const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-7KsgRs5O.js","assets/vendor-DBkyTrXJ.js","assets/ui-82KLgIk3.js","assets/supabase-dV6BCB0D.js","assets/forms-BJrTRoZM.js","assets/stripe-CBEGJZo3.js"])))=>i.map(i=>d[i]);
var I1=Object.defineProperty;var T1=(t,r,i)=>r in t?I1(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i;var fs=(t,r,i)=>T1(t,typeof r!="symbol"?r+"":r,i);import{r as ve,b as j1,d as _1,g as jo,R as Ki,c as fo}from"./vendor-DBkyTrXJ.js";import{m as qe,X as Zs,M as L1,A as nd,a as ml,P as Qd,C as _n,b as Ii,c as Gs,U as pn,d as Jd,B as k1,H as eu,S as id,e as sd,f as d0,I as D1,g as O1,L as M1,h as vo,i as Cc,E as P1,j as No,T as Sc,k as R1,l as B1,n as Xa,R as u0,Q as F1,D as ad,o as pl,p as yo,q as tu,r as Ec,s as Zn,t as h0,u as Ao,v as f0,w as g0,x as U1,F as xl,y as yl,G as m0,z as z1,J as ru,K as p0,N as q1,O as H1}from"./ui-82KLgIk3.js";import{c as V1,_ as Ic}from"./supabase-dV6BCB0D.js";import{u as x0}from"./forms-BJrTRoZM.js";import{l as G1,E as W1,u as Y1,a as X1,C as nu}from"./stripe-CBEGJZo3.js";function Z1(t,r){for(var i=0;i<r.length;i++){const a=r[i];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in t)){const l=Object.getOwnPropertyDescriptor(a,c);l&&Object.defineProperty(t,c,l.get?l:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const l of c)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function i(c){const l={};return c.integrity&&(l.integrity=c.integrity),c.referrerPolicy&&(l.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?l.credentials="include":c.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(c){if(c.ep)return;c.ep=!0;const l=i(c);fetch(c.href,l)}})();var y0={exports:{}},Il={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $1=ve,K1=Symbol.for("react.element"),Q1=Symbol.for("react.fragment"),J1=Object.prototype.hasOwnProperty,ef=$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tf={key:!0,ref:!0,__self:!0,__source:!0};function b0(t,r,i){var a,c={},l=null,h=null;i!==void 0&&(l=""+i),r.key!==void 0&&(l=""+r.key),r.ref!==void 0&&(h=r.ref);for(a in r)J1.call(r,a)&&!tf.hasOwnProperty(a)&&(c[a]=r[a]);if(t&&t.defaultProps)for(a in r=t.defaultProps,r)c[a]===void 0&&(c[a]=r[a]);return{$$typeof:K1,type:t,key:l,ref:h,props:c,_owner:ef.current}}Il.Fragment=Q1;Il.jsx=b0;Il.jsxs=b0;y0.exports=Il;var o=y0.exports,Tc={},iu=j1;Tc.createRoot=iu.createRoot,Tc.hydrateRoot=iu.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Co(){return Co=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},Co.apply(this,arguments)}var zs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(zs||(zs={}));const su="popstate";function rf(t){t===void 0&&(t={});function r(a,c){let{pathname:l,search:h,hash:m}=a.location;return jc("",{pathname:l,search:h,hash:m},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function i(a,c){return typeof c=="string"?c:bl(c)}return sf(r,i,null,t)}function on(t,r){if(t===!1||t===null||typeof t>"u")throw new Error(r)}function w0(t,r){if(!t){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function nf(){return Math.random().toString(36).substr(2,8)}function au(t,r){return{usr:t.state,key:t.key,idx:r}}function jc(t,r,i,a){return i===void 0&&(i=null),Co({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof r=="string"?eo(r):r,{state:i,key:r&&r.key||a||nf()})}function bl(t){let{pathname:r="/",search:i="",hash:a=""}=t;return i&&i!=="?"&&(r+=i.charAt(0)==="?"?i:"?"+i),a&&a!=="#"&&(r+=a.charAt(0)==="#"?a:"#"+a),r}function eo(t){let r={};if(t){let i=t.indexOf("#");i>=0&&(r.hash=t.substr(i),t=t.substr(0,i));let a=t.indexOf("?");a>=0&&(r.search=t.substr(a),t=t.substr(0,a)),t&&(r.pathname=t)}return r}function sf(t,r,i,a){a===void 0&&(a={});let{window:c=document.defaultView,v5Compat:l=!1}=a,h=c.history,m=zs.Pop,x=null,y=v();y==null&&(y=0,h.replaceState(Co({},h.state,{idx:y}),""));function v(){return(h.state||{idx:null}).idx}function C(){m=zs.Pop;let M=v(),I=M==null?null:M-y;y=M,x&&x({action:m,location:_.location,delta:I})}function T(M,I){m=zs.Push;let j=jc(_.location,M,I);y=v()+1;let B=au(j,y),Z=_.createHref(j);try{h.pushState(B,"",Z)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;c.location.assign(Z)}l&&x&&x({action:m,location:_.location,delta:1})}function A(M,I){m=zs.Replace;let j=jc(_.location,M,I);y=v();let B=au(j,y),Z=_.createHref(j);h.replaceState(B,"",Z),l&&x&&x({action:m,location:_.location,delta:0})}function D(M){let I=c.location.origin!=="null"?c.location.origin:c.location.href,j=typeof M=="string"?M:bl(M);return j=j.replace(/ $/,"%20"),on(I,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,I)}let _={get action(){return m},get location(){return t(c,h)},listen(M){if(x)throw new Error("A history only accepts one active listener");return c.addEventListener(su,C),x=M,()=>{c.removeEventListener(su,C),x=null}},createHref(M){return r(c,M)},createURL:D,encodeLocation(M){let I=D(M);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:T,replace:A,go(M){return h.go(M)}};return _}var ou;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ou||(ou={}));function af(t,r,i){return i===void 0&&(i="/"),of(t,r,i)}function of(t,r,i,a){let c=typeof r=="string"?eo(r):r,l=od(c.pathname||"/",i);if(l==null)return null;let h=v0(t);lf(h);let m=null;for(let x=0;m==null&&x<h.length;++x){let y=wf(l);m=xf(h[x],y)}return m}function v0(t,r,i,a){r===void 0&&(r=[]),i===void 0&&(i=[]),a===void 0&&(a="");let c=(l,h,m)=>{let x={relativePath:m===void 0?l.path||"":m,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};x.relativePath.startsWith("/")&&(on(x.relativePath.startsWith(a),'Absolute route path "'+x.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),x.relativePath=x.relativePath.slice(a.length));let y=Vs([a,x.relativePath]),v=i.concat(x);l.children&&l.children.length>0&&(on(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),v0(l.children,r,v,y)),!(l.path==null&&!l.index)&&r.push({path:y,score:mf(y,l.index),routesMeta:v})};return t.forEach((l,h)=>{var m;if(l.path===""||!((m=l.path)!=null&&m.includes("?")))c(l,h);else for(let x of N0(l.path))c(l,h,x)}),r}function N0(t){let r=t.split("/");if(r.length===0)return[];let[i,...a]=r,c=i.endsWith("?"),l=i.replace(/\?$/,"");if(a.length===0)return c?[l,""]:[l];let h=N0(a.join("/")),m=[];return m.push(...h.map(x=>x===""?l:[l,x].join("/"))),c&&m.push(...h),m.map(x=>t.startsWith("/")&&x===""?"/":x)}function lf(t){t.sort((r,i)=>r.score!==i.score?i.score-r.score:pf(r.routesMeta.map(a=>a.childrenIndex),i.routesMeta.map(a=>a.childrenIndex)))}const cf=/^:[\w-]+$/,df=3,uf=2,hf=1,ff=10,gf=-2,lu=t=>t==="*";function mf(t,r){let i=t.split("/"),a=i.length;return i.some(lu)&&(a+=gf),r&&(a+=uf),i.filter(c=>!lu(c)).reduce((c,l)=>c+(cf.test(l)?df:l===""?hf:ff),a)}function pf(t,r){return t.length===r.length&&t.slice(0,-1).every((a,c)=>a===r[c])?t[t.length-1]-r[r.length-1]:0}function xf(t,r,i){let{routesMeta:a}=t,c={},l="/",h=[];for(let m=0;m<a.length;++m){let x=a[m],y=m===a.length-1,v=l==="/"?r:r.slice(l.length)||"/",C=yf({path:x.relativePath,caseSensitive:x.caseSensitive,end:y},v),T=x.route;if(!C)return null;Object.assign(c,C.params),h.push({params:c,pathname:Vs([l,C.pathname]),pathnameBase:Cf(Vs([l,C.pathnameBase])),route:T}),C.pathnameBase!=="/"&&(l=Vs([l,C.pathnameBase]))}return h}function yf(t,r){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[i,a]=bf(t.path,t.caseSensitive,t.end),c=r.match(i);if(!c)return null;let l=c[0],h=l.replace(/(.)\/+$/,"$1"),m=c.slice(1);return{params:a.reduce((y,v,C)=>{let{paramName:T,isOptional:A}=v;if(T==="*"){let _=m[C]||"";h=l.slice(0,l.length-_.length).replace(/(.)\/+$/,"$1")}const D=m[C];return A&&!D?y[T]=void 0:y[T]=(D||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:t}}function bf(t,r,i){r===void 0&&(r=!1),i===void 0&&(i=!0),w0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let a=[],c="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,m,x)=>(a.push({paramName:m,isOptional:x!=null}),x?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),c+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?c+="\\/*$":t!==""&&t!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,r?void 0:"i"),a]}function wf(t){try{return t.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return w0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),t}}function od(t,r){if(r==="/")return t;if(!t.toLowerCase().startsWith(r.toLowerCase()))return null;let i=r.endsWith("/")?r.length-1:r.length,a=t.charAt(i);return a&&a!=="/"?null:t.slice(i)||"/"}function vf(t,r){r===void 0&&(r="/");let{pathname:i,search:a="",hash:c=""}=typeof t=="string"?eo(t):t;return{pathname:i?i.startsWith("/")?i:Nf(i,r):r,search:Sf(a),hash:Ef(c)}}function Nf(t,r){let i=r.replace(/\/+$/,"").split("/");return t.split("/").forEach(c=>{c===".."?i.length>1&&i.pop():c!=="."&&i.push(c)}),i.length>1?i.join("/"):"/"}function ic(t,r,i,a){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+i+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Af(t){return t.filter((r,i)=>i===0||r.route.path&&r.route.path.length>0)}function ld(t,r){let i=Af(t);return r?i.map((a,c)=>c===i.length-1?a.pathname:a.pathnameBase):i.map(a=>a.pathnameBase)}function cd(t,r,i,a){a===void 0&&(a=!1);let c;typeof t=="string"?c=eo(t):(c=Co({},t),on(!c.pathname||!c.pathname.includes("?"),ic("?","pathname","search",c)),on(!c.pathname||!c.pathname.includes("#"),ic("#","pathname","hash",c)),on(!c.search||!c.search.includes("#"),ic("#","search","hash",c)));let l=t===""||c.pathname==="",h=l?"/":c.pathname,m;if(h==null)m=i;else{let C=r.length-1;if(!a&&h.startsWith("..")){let T=h.split("/");for(;T[0]==="..";)T.shift(),C-=1;c.pathname=T.join("/")}m=C>=0?r[C]:"/"}let x=vf(c,m),y=h&&h!=="/"&&h.endsWith("/"),v=(l||h===".")&&i.endsWith("/");return!x.pathname.endsWith("/")&&(y||v)&&(x.pathname+="/"),x}const Vs=t=>t.join("/").replace(/\/\/+/g,"/"),Cf=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Sf=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Ef=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function If(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const A0=["post","put","patch","delete"];new Set(A0);const Tf=["get",...A0];new Set(Tf);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function So(){return So=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},So.apply(this,arguments)}const dd=ve.createContext(null),jf=ve.createContext(null),$s=ve.createContext(null),Tl=ve.createContext(null),Ks=ve.createContext({outlet:null,matches:[],isDataRoute:!1}),C0=ve.createContext(null);function _f(t,r){let{relative:i}=r===void 0?{}:r;to()||on(!1);let{basename:a,navigator:c}=ve.useContext($s),{hash:l,pathname:h,search:m}=E0(t,{relative:i}),x=h;return a!=="/"&&(x=h==="/"?a:Vs([a,h])),c.createHref({pathname:x,search:m,hash:l})}function to(){return ve.useContext(Tl)!=null}function Aa(){return to()||on(!1),ve.useContext(Tl).location}function S0(t){ve.useContext($s).static||ve.useLayoutEffect(t)}function Ca(){let{isDataRoute:t}=ve.useContext(Ks);return t?Hf():Lf()}function Lf(){to()||on(!1);let t=ve.useContext(dd),{basename:r,future:i,navigator:a}=ve.useContext($s),{matches:c}=ve.useContext(Ks),{pathname:l}=Aa(),h=JSON.stringify(ld(c,i.v7_relativeSplatPath)),m=ve.useRef(!1);return S0(()=>{m.current=!0}),ve.useCallback(function(y,v){if(v===void 0&&(v={}),!m.current)return;if(typeof y=="number"){a.go(y);return}let C=cd(y,JSON.parse(h),l,v.relative==="path");t==null&&r!=="/"&&(C.pathname=C.pathname==="/"?r:Vs([r,C.pathname])),(v.replace?a.replace:a.push)(C,v.state,v)},[r,a,h,l,t])}function E0(t,r){let{relative:i}=r===void 0?{}:r,{future:a}=ve.useContext($s),{matches:c}=ve.useContext(Ks),{pathname:l}=Aa(),h=JSON.stringify(ld(c,a.v7_relativeSplatPath));return ve.useMemo(()=>cd(t,JSON.parse(h),l,i==="path"),[t,h,l,i])}function kf(t,r){return Df(t,r)}function Df(t,r,i,a){to()||on(!1);let{navigator:c}=ve.useContext($s),{matches:l}=ve.useContext(Ks),h=l[l.length-1],m=h?h.params:{};h&&h.pathname;let x=h?h.pathnameBase:"/";h&&h.route;let y=Aa(),v;if(r){var C;let M=typeof r=="string"?eo(r):r;x==="/"||(C=M.pathname)!=null&&C.startsWith(x)||on(!1),v=M}else v=y;let T=v.pathname||"/",A=T;if(x!=="/"){let M=x.replace(/^\//,"").split("/");A="/"+T.replace(/^\//,"").split("/").slice(M.length).join("/")}let D=af(t,{pathname:A}),_=Bf(D&&D.map(M=>Object.assign({},M,{params:Object.assign({},m,M.params),pathname:Vs([x,c.encodeLocation?c.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?x:Vs([x,c.encodeLocation?c.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),l,i,a);return r&&_?ve.createElement(Tl.Provider,{value:{location:So({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:zs.Pop}},_):_}function Of(){let t=qf(),r=If(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ve.createElement(ve.Fragment,null,ve.createElement("h2",null,"Unexpected Application Error!"),ve.createElement("h3",{style:{fontStyle:"italic"}},r),i?ve.createElement("pre",{style:c},i):null,null)}const Mf=ve.createElement(Of,null);class Pf extends ve.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,i){return i.location!==r.location||i.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:i.error,location:i.location,revalidation:r.revalidation||i.revalidation}}componentDidCatch(r,i){console.error("React Router caught the following error during render",r,i)}render(){return this.state.error!==void 0?ve.createElement(Ks.Provider,{value:this.props.routeContext},ve.createElement(C0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Rf(t){let{routeContext:r,match:i,children:a}=t,c=ve.useContext(dd);return c&&c.static&&c.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=i.route.id),ve.createElement(Ks.Provider,{value:r},a)}function Bf(t,r,i,a){var c;if(r===void 0&&(r=[]),i===void 0&&(i=null),a===void 0&&(a=null),t==null){var l;if(!i)return null;if(i.errors)t=i.matches;else if((l=a)!=null&&l.v7_partialHydration&&r.length===0&&!i.initialized&&i.matches.length>0)t=i.matches;else return null}let h=t,m=(c=i)==null?void 0:c.errors;if(m!=null){let v=h.findIndex(C=>C.route.id&&(m==null?void 0:m[C.route.id])!==void 0);v>=0||on(!1),h=h.slice(0,Math.min(h.length,v+1))}let x=!1,y=-1;if(i&&a&&a.v7_partialHydration)for(let v=0;v<h.length;v++){let C=h[v];if((C.route.HydrateFallback||C.route.hydrateFallbackElement)&&(y=v),C.route.id){let{loaderData:T,errors:A}=i,D=C.route.loader&&T[C.route.id]===void 0&&(!A||A[C.route.id]===void 0);if(C.route.lazy||D){x=!0,y>=0?h=h.slice(0,y+1):h=[h[0]];break}}}return h.reduceRight((v,C,T)=>{let A,D=!1,_=null,M=null;i&&(A=m&&C.route.id?m[C.route.id]:void 0,_=C.route.errorElement||Mf,x&&(y<0&&T===0?(Vf("route-fallback"),D=!0,M=null):y===T&&(D=!0,M=C.route.hydrateFallbackElement||null)));let I=r.concat(h.slice(0,T+1)),j=()=>{let B;return A?B=_:D?B=M:C.route.Component?B=ve.createElement(C.route.Component,null):C.route.element?B=C.route.element:B=v,ve.createElement(Rf,{match:C,routeContext:{outlet:v,matches:I,isDataRoute:i!=null},children:B})};return i&&(C.route.ErrorBoundary||C.route.errorElement||T===0)?ve.createElement(Pf,{location:i.location,revalidation:i.revalidation,component:_,error:A,children:j(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):j()},null)}var I0=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(I0||{}),T0=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(T0||{});function Ff(t){let r=ve.useContext(dd);return r||on(!1),r}function Uf(t){let r=ve.useContext(jf);return r||on(!1),r}function zf(t){let r=ve.useContext(Ks);return r||on(!1),r}function j0(t){let r=zf(),i=r.matches[r.matches.length-1];return i.route.id||on(!1),i.route.id}function qf(){var t;let r=ve.useContext(C0),i=Uf(),a=j0();return r!==void 0?r:(t=i.errors)==null?void 0:t[a]}function Hf(){let{router:t}=Ff(I0.UseNavigateStable),r=j0(T0.UseNavigateStable),i=ve.useRef(!1);return S0(()=>{i.current=!0}),ve.useCallback(function(c,l){l===void 0&&(l={}),i.current&&(typeof c=="number"?t.navigate(c):t.navigate(c,So({fromRouteId:r},l)))},[t,r])}const cu={};function Vf(t,r,i){cu[t]||(cu[t]=!0)}function Gf(t,r){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Wf(t){let{to:r,replace:i,state:a,relative:c}=t;to()||on(!1);let{future:l,static:h}=ve.useContext($s),{matches:m}=ve.useContext(Ks),{pathname:x}=Aa(),y=Ca(),v=cd(r,ld(m,l.v7_relativeSplatPath),x,c==="path"),C=JSON.stringify(v);return ve.useEffect(()=>y(JSON.parse(C),{replace:i,state:a,relative:c}),[y,C,c,i,a]),null}function Si(t){on(!1)}function Yf(t){let{basename:r="/",children:i=null,location:a,navigationType:c=zs.Pop,navigator:l,static:h=!1,future:m}=t;to()&&on(!1);let x=r.replace(/^\/*/,"/"),y=ve.useMemo(()=>({basename:x,navigator:l,static:h,future:So({v7_relativeSplatPath:!1},m)}),[x,m,l,h]);typeof a=="string"&&(a=eo(a));let{pathname:v="/",search:C="",hash:T="",state:A=null,key:D="default"}=a,_=ve.useMemo(()=>{let M=od(v,x);return M==null?null:{location:{pathname:M,search:C,hash:T,state:A,key:D},navigationType:c}},[x,v,C,T,A,D,c]);return _==null?null:ve.createElement($s.Provider,{value:y},ve.createElement(Tl.Provider,{children:i,value:_}))}function Xf(t){let{children:r,location:i}=t;return kf(_c(r),i)}new Promise(()=>{});function _c(t,r){r===void 0&&(r=[]);let i=[];return ve.Children.forEach(t,(a,c)=>{if(!ve.isValidElement(a))return;let l=[...r,c];if(a.type===ve.Fragment){i.push.apply(i,_c(a.props.children,l));return}a.type!==Si&&on(!1),!a.props.index||!a.props.children||on(!1);let h={id:a.props.id||l.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(h.children=_c(a.props.children,l)),i.push(h)}),i}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lc(){return Lc=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},Lc.apply(this,arguments)}function Zf(t,r){if(t==null)return{};var i={},a=Object.keys(t),c,l;for(l=0;l<a.length;l++)c=a[l],!(r.indexOf(c)>=0)&&(i[c]=t[c]);return i}function $f(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Kf(t,r){return t.button===0&&(!r||r==="_self")&&!$f(t)}function kc(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((r,i)=>{let a=t[i];return r.concat(Array.isArray(a)?a.map(c=>[i,c]):[[i,a]])},[]))}function Qf(t,r){let i=kc(t);return r&&r.forEach((a,c)=>{i.has(c)||r.getAll(c).forEach(l=>{i.append(c,l)})}),i}const Jf=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],eg="6";try{window.__reactRouterVersion=eg}catch{}const tg="startTransition",du=_1[tg];function rg(t){let{basename:r,children:i,future:a,window:c}=t,l=ve.useRef();l.current==null&&(l.current=rf({window:c,v5Compat:!0}));let h=l.current,[m,x]=ve.useState({action:h.action,location:h.location}),{v7_startTransition:y}=a||{},v=ve.useCallback(C=>{y&&du?du(()=>x(C)):x(C)},[x,y]);return ve.useLayoutEffect(()=>h.listen(v),[h,v]),ve.useEffect(()=>Gf(a),[a]),ve.createElement(Yf,{basename:r,children:i,location:m.location,navigationType:m.action,navigator:h,future:a})}const ng=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ig=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uu=ve.forwardRef(function(r,i){let{onClick:a,relative:c,reloadDocument:l,replace:h,state:m,target:x,to:y,preventScrollReset:v,viewTransition:C}=r,T=Zf(r,Jf),{basename:A}=ve.useContext($s),D,_=!1;if(typeof y=="string"&&ig.test(y)&&(D=y,ng))try{let B=new URL(window.location.href),Z=y.startsWith("//")?new URL(B.protocol+y):new URL(y),Q=od(Z.pathname,A);Z.origin===B.origin&&Q!=null?y=Q+Z.search+Z.hash:_=!0}catch{}let M=_f(y,{relative:c}),I=sg(y,{replace:h,state:m,target:x,preventScrollReset:v,relative:c,viewTransition:C});function j(B){a&&a(B),B.defaultPrevented||I(B)}return ve.createElement("a",Lc({},T,{href:D||M,onClick:_||l?a:j,ref:i,target:x}))});var hu;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(hu||(hu={}));var fu;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(fu||(fu={}));function sg(t,r){let{target:i,replace:a,state:c,preventScrollReset:l,relative:h,viewTransition:m}=r===void 0?{}:r,x=Ca(),y=Aa(),v=E0(t,{relative:h});return ve.useCallback(C=>{if(Kf(C,i)){C.preventDefault();let T=a!==void 0?a:bl(y)===bl(v);x(t,{replace:T,state:c,preventScrollReset:l,relative:h,viewTransition:m})}},[y,x,v,a,c,i,t,l,h,m])}function ag(t){let r=ve.useRef(kc(t)),i=ve.useRef(!1),a=Aa(),c=ve.useMemo(()=>Qf(a.search,i.current?null:r.current),[a.search]),l=Ca(),h=ve.useCallback((m,x)=>{const y=kc(typeof m=="function"?m(c):m);i.current=!0,l("?"+y,x)},[l,c]);return[c,h]}var gu={},og="@vercel/analytics",lg="1.5.0",cg=()=>{window.va||(window.va=function(...r){(window.vaq=window.vaq||[]).push(r)})};function _0(){return typeof window<"u"}function L0(){try{const t="production"}catch{}return"production"}function dg(t="auto"){if(t==="auto"){window.vam=L0();return}window.vam=t}function ug(){return(_0()?window.vam:L0())||"production"}function Dc(){return ug()==="development"}function hg(t){return t.scriptSrc?t.scriptSrc:Dc()?"https://va.vercel-scripts.com/v1/script.debug.js":t.basePath?`${t.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function fg(t={debug:!0}){var r;if(!_0())return;dg(t.mode),cg(),t.beforeSend&&((r=window.va)==null||r.call(window,"beforeSend",t.beforeSend));const i=hg(t);if(document.head.querySelector(`script[src*="${i}"]`))return;const a=document.createElement("script");a.src=i,a.defer=!0,a.dataset.sdkn=og+(t.framework?`/${t.framework}`:""),a.dataset.sdkv=lg,t.disableAutoTrack&&(a.dataset.disableAutoTrack="1"),t.endpoint?a.dataset.endpoint=t.endpoint:t.basePath&&(a.dataset.endpoint=`${t.basePath}/insights`),t.dsn&&(a.dataset.dsn=t.dsn),a.onerror=()=>{const c=Dc()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${i}. ${c}`)},Dc()&&t.debug===!1&&(a.dataset.debug="false"),document.head.appendChild(a)}function gg({route:t,path:r}){var i;(i=window.va)==null||i.call(window,"pageview",{route:t,path:r})}function mg(){if(!(typeof process>"u"||typeof gu>"u"))return gu.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function pg(t){return ve.useEffect(()=>{var r;t.beforeSend&&((r=window.va)==null||r.call(window,"beforeSend",t.beforeSend))},[t.beforeSend]),ve.useEffect(()=>{fg({framework:t.framework||"react",basePath:t.basePath??mg(),...t.route!==void 0&&{disableAutoTrack:!0},...t})},[]),ve.useEffect(()=>{t.route&&t.path&&gg({route:t.route,path:t.path})},[t.route,t.path]),null}var mu={},xg="@vercel/speed-insights",yg="1.2.0",bg=()=>{window.si||(window.si=function(...r){(window.siq=window.siq||[]).push(r)})};function wg(){return typeof window<"u"}function vg(){try{const t="production"}catch{}return"production"}function k0(){return vg()==="development"}function Ng(t){return t.scriptSrc?t.scriptSrc:k0()?"https://va.vercel-scripts.com/v1/speed-insights/script.debug.js":t.dsn?"https://va.vercel-scripts.com/v1/speed-insights/script.js":t.basePath?`${t.basePath}/speed-insights/script.js`:"/_vercel/speed-insights/script.js"}function Ag(t={}){var r;if(!wg()||t.route===null)return null;bg();const i=Ng(t);if(document.head.querySelector(`script[src*="${i}"]`))return null;t.beforeSend&&((r=window.si)==null||r.call(window,"beforeSend",t.beforeSend));const a=document.createElement("script");return a.src=i,a.defer=!0,a.dataset.sdkn=xg+(t.framework?`/${t.framework}`:""),a.dataset.sdkv=yg,t.sampleRate&&(a.dataset.sampleRate=t.sampleRate.toString()),t.route&&(a.dataset.route=t.route),t.endpoint?a.dataset.endpoint=t.endpoint:t.basePath&&(a.dataset.endpoint=`${t.basePath}/speed-insights/vitals`),t.dsn&&(a.dataset.dsn=t.dsn),k0()&&t.debug===!1&&(a.dataset.debug="false"),a.onerror=()=>{console.log(`[Vercel Speed Insights] Failed to load script from ${i}. Please check if any content blockers are enabled and try again.`)},document.head.appendChild(a),{setRoute:c=>{a.dataset.route=c??void 0}}}function Cg(){if(!(typeof process>"u"||typeof mu>"u"))return mu.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function Sg(t){ve.useEffect(()=>{var i;t.beforeSend&&((i=window.si)==null||i.call(window,"beforeSend",t.beforeSend))},[t.beforeSend]);const r=ve.useRef(null);return ve.useEffect(()=>{if(r.current)t.route&&r.current(t.route);else{const i=Ag({framework:t.framework??"react",basePath:t.basePath??Cg(),...t});i&&(r.current=i.setRoute)}},[t.route]),null}let Eg={data:""},Ig=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||Eg,Tg=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,jg=/\/\*[^]*?\*\/|  +/g,pu=/\n+/g,Us=(t,r)=>{let i="",a="",c="";for(let l in t){let h=t[l];l[0]=="@"?l[1]=="i"?i=l+" "+h+";":a+=l[1]=="f"?Us(h,l):l+"{"+Us(h,l[1]=="k"?"":r)+"}":typeof h=="object"?a+=Us(h,r?r.replace(/([^,])+/g,m=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,x=>/&/.test(x)?x.replace(/&/g,m):m?m+" "+x:x)):l):h!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),c+=Us.p?Us.p(l,h):l+":"+h+";")}return i+(r&&c?r+"{"+c+"}":c)+a},gs={},D0=t=>{if(typeof t=="object"){let r="";for(let i in t)r+=i+D0(t[i]);return r}return t},_g=(t,r,i,a,c)=>{let l=D0(t),h=gs[l]||(gs[l]=(x=>{let y=0,v=11;for(;y<x.length;)v=101*v+x.charCodeAt(y++)>>>0;return"go"+v})(l));if(!gs[h]){let x=l!==t?t:(y=>{let v,C,T=[{}];for(;v=Tg.exec(y.replace(jg,""));)v[4]?T.shift():v[3]?(C=v[3].replace(pu," ").trim(),T.unshift(T[0][C]=T[0][C]||{})):T[0][v[1]]=v[2].replace(pu," ").trim();return T[0]})(t);gs[h]=Us(c?{["@keyframes "+h]:x}:x,i?"":"."+h)}let m=i&&gs.g?gs.g:null;return i&&(gs.g=gs[h]),((x,y,v,C)=>{C?y.data=y.data.replace(C,x):y.data.indexOf(x)===-1&&(y.data=v?x+y.data:y.data+x)})(gs[h],r,a,m),h},Lg=(t,r,i)=>t.reduce((a,c,l)=>{let h=r[l];if(h&&h.call){let m=h(i),x=m&&m.props&&m.props.className||/^go/.test(m)&&m;h=x?"."+x:m&&typeof m=="object"?m.props?"":Us(m,""):m===!1?"":m}return a+c+(h??"")},"");function jl(t){let r=this||{},i=t.call?t(r.p):t;return _g(i.unshift?i.raw?Lg(i,[].slice.call(arguments,1),r.p):i.reduce((a,c)=>Object.assign(a,c&&c.call?c(r.p):c),{}):i,Ig(r.target),r.g,r.o,r.k)}let O0,Oc,Mc;jl.bind({g:1});let xs=jl.bind({k:1});function kg(t,r,i,a){Us.p=r,O0=t,Oc=i,Mc=a}function Qs(t,r){let i=this||{};return function(){let a=arguments;function c(l,h){let m=Object.assign({},l),x=m.className||c.className;i.p=Object.assign({theme:Oc&&Oc()},m),i.o=/ *go\d+/.test(x),m.className=jl.apply(i,a)+(x?" "+x:"");let y=t;return t[0]&&(y=m.as||t,delete m.as),Mc&&y[0]&&Mc(m),O0(y,m)}return c}}var Dg=t=>typeof t=="function",wl=(t,r)=>Dg(t)?t(r):t,Og=(()=>{let t=0;return()=>(++t).toString()})(),M0=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let r=matchMedia("(prefers-reduced-motion: reduce)");t=!r||r.matches}return t}})(),Mg=20,ud="default",P0=(t,r)=>{let{toastLimit:i}=t.settings;switch(r.type){case 0:return{...t,toasts:[r.toast,...t.toasts].slice(0,i)};case 1:return{...t,toasts:t.toasts.map(h=>h.id===r.toast.id?{...h,...r.toast}:h)};case 2:let{toast:a}=r;return P0(t,{type:t.toasts.find(h=>h.id===a.id)?1:0,toast:a});case 3:let{toastId:c}=r;return{...t,toasts:t.toasts.map(h=>h.id===c||c===void 0?{...h,dismissed:!0,visible:!1}:h)};case 4:return r.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(h=>h.id!==r.toastId)};case 5:return{...t,pausedAt:r.time};case 6:let l=r.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(h=>({...h,pauseDuration:h.pauseDuration+l}))}}},ll=[],R0={toasts:[],pausedAt:void 0,settings:{toastLimit:Mg}},Qi={},B0=(t,r=ud)=>{Qi[r]=P0(Qi[r]||R0,t),ll.forEach(([i,a])=>{i===r&&a(Qi[r])})},F0=t=>Object.keys(Qi).forEach(r=>B0(t,r)),Pg=t=>Object.keys(Qi).find(r=>Qi[r].toasts.some(i=>i.id===t)),_l=(t=ud)=>r=>{B0(r,t)},Rg={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Bg=(t={},r=ud)=>{let[i,a]=ve.useState(Qi[r]||R0),c=ve.useRef(Qi[r]);ve.useEffect(()=>(c.current!==Qi[r]&&a(Qi[r]),ll.push([r,a]),()=>{let h=ll.findIndex(([m])=>m===r);h>-1&&ll.splice(h,1)}),[r]);let l=i.toasts.map(h=>{var m,x,y;return{...t,...t[h.type],...h,removeDelay:h.removeDelay||((m=t[h.type])==null?void 0:m.removeDelay)||(t==null?void 0:t.removeDelay),duration:h.duration||((x=t[h.type])==null?void 0:x.duration)||(t==null?void 0:t.duration)||Rg[h.type],style:{...t.style,...(y=t[h.type])==null?void 0:y.style,...h.style}}});return{...i,toasts:l}},Fg=(t,r="blank",i)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:r,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...i,id:(i==null?void 0:i.id)||Og()}),_o=t=>(r,i)=>{let a=Fg(r,t,i);return _l(a.toasterId||Pg(a.id))({type:2,toast:a}),a.id},mn=(t,r)=>_o("blank")(t,r);mn.error=_o("error");mn.success=_o("success");mn.loading=_o("loading");mn.custom=_o("custom");mn.dismiss=(t,r)=>{let i={type:3,toastId:t};r?_l(r)(i):F0(i)};mn.dismissAll=t=>mn.dismiss(void 0,t);mn.remove=(t,r)=>{let i={type:4,toastId:t};r?_l(r)(i):F0(i)};mn.removeAll=t=>mn.remove(void 0,t);mn.promise=(t,r,i)=>{let a=mn.loading(r.loading,{...i,...i==null?void 0:i.loading});return typeof t=="function"&&(t=t()),t.then(c=>{let l=r.success?wl(r.success,c):void 0;return l?mn.success(l,{id:a,...i,...i==null?void 0:i.success}):mn.dismiss(a),c}).catch(c=>{let l=r.error?wl(r.error,c):void 0;l?mn.error(l,{id:a,...i,...i==null?void 0:i.error}):mn.dismiss(a)}),t};var Ug=1e3,zg=(t,r="default")=>{let{toasts:i,pausedAt:a}=Bg(t,r),c=ve.useRef(new Map).current,l=ve.useCallback((C,T=Ug)=>{if(c.has(C))return;let A=setTimeout(()=>{c.delete(C),h({type:4,toastId:C})},T);c.set(C,A)},[]);ve.useEffect(()=>{if(a)return;let C=Date.now(),T=i.map(A=>{if(A.duration===1/0)return;let D=(A.duration||0)+A.pauseDuration-(C-A.createdAt);if(D<0){A.visible&&mn.dismiss(A.id);return}return setTimeout(()=>mn.dismiss(A.id,r),D)});return()=>{T.forEach(A=>A&&clearTimeout(A))}},[i,a,r]);let h=ve.useCallback(_l(r),[r]),m=ve.useCallback(()=>{h({type:5,time:Date.now()})},[h]),x=ve.useCallback((C,T)=>{h({type:1,toast:{id:C,height:T}})},[h]),y=ve.useCallback(()=>{a&&h({type:6,time:Date.now()})},[a,h]),v=ve.useCallback((C,T)=>{let{reverseOrder:A=!1,gutter:D=8,defaultPosition:_}=T||{},M=i.filter(B=>(B.position||_)===(C.position||_)&&B.height),I=M.findIndex(B=>B.id===C.id),j=M.filter((B,Z)=>Z<I&&B.visible).length;return M.filter(B=>B.visible).slice(...A?[j+1]:[0,j]).reduce((B,Z)=>B+(Z.height||0)+D,0)},[i]);return ve.useEffect(()=>{i.forEach(C=>{if(C.dismissed)l(C.id,C.removeDelay);else{let T=c.get(C.id);T&&(clearTimeout(T),c.delete(C.id))}})},[i,l]),{toasts:i,handlers:{updateHeight:x,startPause:m,endPause:y,calculateOffset:v}}},qg=xs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Hg=xs`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Vg=xs`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Gg=Qs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${qg} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Hg} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Vg} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Wg=xs`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Yg=Qs("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Wg} 1s linear infinite;
`,Xg=xs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Zg=xs`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,$g=Qs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Xg} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Zg} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Kg=Qs("div")`
  position: absolute;
`,Qg=Qs("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Jg=xs`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,e2=Qs("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Jg} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,t2=({toast:t})=>{let{icon:r,type:i,iconTheme:a}=t;return r!==void 0?typeof r=="string"?ve.createElement(e2,null,r):r:i==="blank"?null:ve.createElement(Qg,null,ve.createElement(Yg,{...a}),i!=="loading"&&ve.createElement(Kg,null,i==="error"?ve.createElement(Gg,{...a}):ve.createElement($g,{...a})))},r2=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,n2=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,i2="0%{opacity:0;} 100%{opacity:1;}",s2="0%{opacity:1;} 100%{opacity:0;}",a2=Qs("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,o2=Qs("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,l2=(t,r)=>{let i=t.includes("top")?1:-1,[a,c]=M0()?[i2,s2]:[r2(i),n2(i)];return{animation:r?`${xs(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${xs(c)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},c2=ve.memo(({toast:t,position:r,style:i,children:a})=>{let c=t.height?l2(t.position||r||"top-center",t.visible):{opacity:0},l=ve.createElement(t2,{toast:t}),h=ve.createElement(o2,{...t.ariaProps},wl(t.message,t));return ve.createElement(a2,{className:t.className,style:{...c,...i,...t.style}},typeof a=="function"?a({icon:l,message:h}):ve.createElement(ve.Fragment,null,l,h))});kg(ve.createElement);var d2=({id:t,className:r,style:i,onHeightUpdate:a,children:c})=>{let l=ve.useCallback(h=>{if(h){let m=()=>{let x=h.getBoundingClientRect().height;a(t,x)};m(),new MutationObserver(m).observe(h,{subtree:!0,childList:!0,characterData:!0})}},[t,a]);return ve.createElement("div",{ref:l,className:r,style:i},c)},u2=(t,r)=>{let i=t.includes("top"),a=i?{top:0}:{bottom:0},c=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:M0()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${r*(i?1:-1)}px)`,...a,...c}},h2=jl`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,el=16,f2=({reverseOrder:t,position:r="top-center",toastOptions:i,gutter:a,children:c,toasterId:l,containerStyle:h,containerClassName:m})=>{let{toasts:x,handlers:y}=zg(i,l);return ve.createElement("div",{"data-rht-toaster":l||"",style:{position:"fixed",zIndex:9999,top:el,left:el,right:el,bottom:el,pointerEvents:"none",...h},className:m,onMouseEnter:y.startPause,onMouseLeave:y.endPause},x.map(v=>{let C=v.position||r,T=y.calculateOffset(v,{reverseOrder:t,gutter:a,defaultPosition:r}),A=u2(C,T);return ve.createElement(d2,{id:v.id,key:v.id,onHeightUpdate:y.updateHeight,className:v.visible?h2:"",style:A},v.type==="custom"?wl(v.message,v):c?c(v):ve.createElement(c2,{toast:v,position:C}))}))},zn=mn,g2=typeof Element<"u",m2=typeof Map=="function",p2=typeof Set=="function",x2=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function cl(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var i,a,c;if(Array.isArray(t)){if(i=t.length,i!=r.length)return!1;for(a=i;a--!==0;)if(!cl(t[a],r[a]))return!1;return!0}var l;if(m2&&t instanceof Map&&r instanceof Map){if(t.size!==r.size)return!1;for(l=t.entries();!(a=l.next()).done;)if(!r.has(a.value[0]))return!1;for(l=t.entries();!(a=l.next()).done;)if(!cl(a.value[1],r.get(a.value[0])))return!1;return!0}if(p2&&t instanceof Set&&r instanceof Set){if(t.size!==r.size)return!1;for(l=t.entries();!(a=l.next()).done;)if(!r.has(a.value[0]))return!1;return!0}if(x2&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(r)){if(i=t.length,i!=r.length)return!1;for(a=i;a--!==0;)if(t[a]!==r[a])return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof r.valueOf=="function")return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof r.toString=="function")return t.toString()===r.toString();if(c=Object.keys(t),i=c.length,i!==Object.keys(r).length)return!1;for(a=i;a--!==0;)if(!Object.prototype.hasOwnProperty.call(r,c[a]))return!1;if(g2&&t instanceof Element)return!1;for(a=i;a--!==0;)if(!((c[a]==="_owner"||c[a]==="__v"||c[a]==="__o")&&t.$$typeof)&&!cl(t[c[a]],r[c[a]]))return!1;return!0}return t!==t&&r!==r}var y2=function(r,i){try{return cl(r,i)}catch(a){if((a.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw a}};const b2=jo(y2);var w2=function(t,r,i,a,c,l,h,m){if(!t){var x;if(r===void 0)x=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var y=[i,a,c,l,h,m],v=0;x=new Error(r.replace(/%s/g,function(){return y[v++]})),x.name="Invariant Violation"}throw x.framesToPop=1,x}},v2=w2;const xu=jo(v2);var N2=function(r,i,a,c){var l=a?a.call(c,r,i):void 0;if(l!==void 0)return!!l;if(r===i)return!0;if(typeof r!="object"||!r||typeof i!="object"||!i)return!1;var h=Object.keys(r),m=Object.keys(i);if(h.length!==m.length)return!1;for(var x=Object.prototype.hasOwnProperty.bind(i),y=0;y<h.length;y++){var v=h[y];if(!x(v))return!1;var C=r[v],T=i[v];if(l=a?a.call(c,C,T,v):void 0,l===!1||l===void 0&&C!==T)return!1}return!0};const A2=jo(N2);var U0=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(U0||{}),sc={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},yu=Object.values(U0),hd={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},C2=Object.entries(hd).reduce((t,[r,i])=>(t[i]=r,t),{}),Fi="data-rh",qa={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Ha=(t,r)=>{for(let i=t.length-1;i>=0;i-=1){const a=t[i];if(Object.prototype.hasOwnProperty.call(a,r))return a[r]}return null},S2=t=>{let r=Ha(t,"title");const i=Ha(t,qa.TITLE_TEMPLATE);if(Array.isArray(r)&&(r=r.join("")),i&&r)return i.replace(/%s/g,()=>r);const a=Ha(t,qa.DEFAULT_TITLE);return r||a||void 0},E2=t=>Ha(t,qa.ON_CHANGE_CLIENT_STATE)||(()=>{}),ac=(t,r)=>r.filter(i=>typeof i[t]<"u").map(i=>i[t]).reduce((i,a)=>({...i,...a}),{}),I2=(t,r)=>r.filter(i=>typeof i.base<"u").map(i=>i.base).reverse().reduce((i,a)=>{if(!i.length){const c=Object.keys(a);for(let l=0;l<c.length;l+=1){const m=c[l].toLowerCase();if(t.indexOf(m)!==-1&&a[m])return i.concat(a)}}return i},[]),T2=t=>console&&typeof console.warn=="function"&&console.warn(t),go=(t,r,i)=>{const a={};return i.filter(c=>Array.isArray(c[t])?!0:(typeof c[t]<"u"&&T2(`Helmet: ${t} should be of type "Array". Instead found type "${typeof c[t]}"`),!1)).map(c=>c[t]).reverse().reduce((c,l)=>{const h={};l.filter(x=>{let y;const v=Object.keys(x);for(let T=0;T<v.length;T+=1){const A=v[T],D=A.toLowerCase();r.indexOf(D)!==-1&&!(y==="rel"&&x[y].toLowerCase()==="canonical")&&!(D==="rel"&&x[D].toLowerCase()==="stylesheet")&&(y=D),r.indexOf(A)!==-1&&(A==="innerHTML"||A==="cssText"||A==="itemprop")&&(y=A)}if(!y||!x[y])return!1;const C=x[y].toLowerCase();return a[y]||(a[y]={}),h[y]||(h[y]={}),a[y][C]?!1:(h[y][C]=!0,!0)}).reverse().forEach(x=>c.push(x));const m=Object.keys(h);for(let x=0;x<m.length;x+=1){const y=m[x],v={...a[y],...h[y]};a[y]=v}return c},[]).reverse()},j2=(t,r)=>{if(Array.isArray(t)&&t.length){for(let i=0;i<t.length;i+=1)if(t[i][r])return!0}return!1},_2=t=>({baseTag:I2(["href"],t),bodyAttributes:ac("bodyAttributes",t),defer:Ha(t,qa.DEFER),encode:Ha(t,qa.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:ac("htmlAttributes",t),linkTags:go("link",["rel","href"],t),metaTags:go("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:go("noscript",["innerHTML"],t),onChangeClientState:E2(t),scriptTags:go("script",["src","innerHTML"],t),styleTags:go("style",["cssText"],t),title:S2(t),titleAttributes:ac("titleAttributes",t),prioritizeSeoTags:j2(t,qa.PRIORITIZE_SEO_TAGS)}),z0=t=>Array.isArray(t)?t.join(""):t,L2=(t,r)=>{const i=Object.keys(t);for(let a=0;a<i.length;a+=1)if(r[i[a]]&&r[i[a]].includes(t[i[a]]))return!0;return!1},oc=(t,r)=>Array.isArray(t)?t.reduce((i,a)=>(L2(a,r)?i.priority.push(a):i.default.push(a),i),{priority:[],default:[]}):{default:t,priority:[]},bu=(t,r)=>({...t,[r]:void 0}),k2=["noscript","script","style"],Pc=(t,r=!0)=>r===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),q0=t=>Object.keys(t).reduce((r,i)=>{const a=typeof t[i]<"u"?`${i}="${t[i]}"`:`${i}`;return r?`${r} ${a}`:a},""),D2=(t,r,i,a)=>{const c=q0(i),l=z0(r);return c?`<${t} ${Fi}="true" ${c}>${Pc(l,a)}</${t}>`:`<${t} ${Fi}="true">${Pc(l,a)}</${t}>`},O2=(t,r,i=!0)=>r.reduce((a,c)=>{const l=c,h=Object.keys(l).filter(y=>!(y==="innerHTML"||y==="cssText")).reduce((y,v)=>{const C=typeof l[v]>"u"?v:`${v}="${Pc(l[v],i)}"`;return y?`${y} ${C}`:C},""),m=l.innerHTML||l.cssText||"",x=k2.indexOf(t)===-1;return`${a}<${t} ${Fi}="true" ${h}${x?"/>":`>${m}</${t}>`}`},""),H0=(t,r={})=>Object.keys(t).reduce((i,a)=>{const c=hd[a];return i[c||a]=t[a],i},r),M2=(t,r,i)=>{const a={key:r,[Fi]:!0},c=H0(i,a);return[Ki.createElement("title",c,r)]},dl=(t,r)=>r.map((i,a)=>{const c={key:a,[Fi]:!0};return Object.keys(i).forEach(l=>{const m=hd[l]||l;if(m==="innerHTML"||m==="cssText"){const x=i.innerHTML||i.cssText;c.dangerouslySetInnerHTML={__html:x}}else c[m]=i[l]}),Ki.createElement(t,c)}),Ei=(t,r,i=!0)=>{switch(t){case"title":return{toComponent:()=>M2(t,r.title,r.titleAttributes),toString:()=>D2(t,r.title,r.titleAttributes,i)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>H0(r),toString:()=>q0(r)};default:return{toComponent:()=>dl(t,r),toString:()=>O2(t,r,i)}}},P2=({metaTags:t,linkTags:r,scriptTags:i,encode:a})=>{const c=oc(t,sc.meta),l=oc(r,sc.link),h=oc(i,sc.script);return{priorityMethods:{toComponent:()=>[...dl("meta",c.priority),...dl("link",l.priority),...dl("script",h.priority)],toString:()=>`${Ei("meta",c.priority,a)} ${Ei("link",l.priority,a)} ${Ei("script",h.priority,a)}`},metaTags:c.default,linkTags:l.default,scriptTags:h.default}},R2=t=>{const{baseTag:r,bodyAttributes:i,encode:a=!0,htmlAttributes:c,noscriptTags:l,styleTags:h,title:m="",titleAttributes:x,prioritizeSeoTags:y}=t;let{linkTags:v,metaTags:C,scriptTags:T}=t,A={toComponent:()=>{},toString:()=>""};return y&&({priorityMethods:A,linkTags:v,metaTags:C,scriptTags:T}=P2(t)),{priority:A,base:Ei("base",r,a),bodyAttributes:Ei("bodyAttributes",i,a),htmlAttributes:Ei("htmlAttributes",c,a),link:Ei("link",v,a),meta:Ei("meta",C,a),noscript:Ei("noscript",l,a),script:Ei("script",T,a),style:Ei("style",h,a),title:Ei("title",{title:m,titleAttributes:x},a)}},Rc=R2,tl=[],V0=!!(typeof window<"u"&&window.document&&window.document.createElement),Bc=class{constructor(t,r){fs(this,"instances",[]);fs(this,"canUseDOM",V0);fs(this,"context");fs(this,"value",{setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?tl:this.instances,add:t=>{(this.canUseDOM?tl:this.instances).push(t)},remove:t=>{const r=(this.canUseDOM?tl:this.instances).indexOf(t);(this.canUseDOM?tl:this.instances).splice(r,1)}}});this.context=t,this.canUseDOM=r||!1,r||(t.helmet=Rc({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},B2={},G0=Ki.createContext(B2),va,W0=(va=class extends ve.Component{constructor(i){super(i);fs(this,"helmetData");this.helmetData=new Bc(this.props.context||{},va.canUseDOM)}render(){return Ki.createElement(G0.Provider,{value:this.helmetData.value},this.props.children)}},fs(va,"canUseDOM",V0),va),Ma=(t,r)=>{const i=document.head||document.querySelector("head"),a=i.querySelectorAll(`${t}[${Fi}]`),c=[].slice.call(a),l=[];let h;return r&&r.length&&r.forEach(m=>{const x=document.createElement(t);for(const y in m)if(Object.prototype.hasOwnProperty.call(m,y))if(y==="innerHTML")x.innerHTML=m.innerHTML;else if(y==="cssText")x.styleSheet?x.styleSheet.cssText=m.cssText:x.appendChild(document.createTextNode(m.cssText));else{const v=y,C=typeof m[v]>"u"?"":m[v];x.setAttribute(y,C)}x.setAttribute(Fi,"true"),c.some((y,v)=>(h=v,x.isEqualNode(y)))?c.splice(h,1):l.push(x)}),c.forEach(m=>{var x;return(x=m.parentNode)==null?void 0:x.removeChild(m)}),l.forEach(m=>i.appendChild(m)),{oldTags:c,newTags:l}},Fc=(t,r)=>{const i=document.getElementsByTagName(t)[0];if(!i)return;const a=i.getAttribute(Fi),c=a?a.split(","):[],l=[...c],h=Object.keys(r);for(const m of h){const x=r[m]||"";i.getAttribute(m)!==x&&i.setAttribute(m,x),c.indexOf(m)===-1&&c.push(m);const y=l.indexOf(m);y!==-1&&l.splice(y,1)}for(let m=l.length-1;m>=0;m-=1)i.removeAttribute(l[m]);c.length===l.length?i.removeAttribute(Fi):i.getAttribute(Fi)!==h.join(",")&&i.setAttribute(Fi,h.join(","))},F2=(t,r)=>{typeof t<"u"&&document.title!==t&&(document.title=z0(t)),Fc("title",r)},wu=(t,r)=>{const{baseTag:i,bodyAttributes:a,htmlAttributes:c,linkTags:l,metaTags:h,noscriptTags:m,onChangeClientState:x,scriptTags:y,styleTags:v,title:C,titleAttributes:T}=t;Fc("body",a),Fc("html",c),F2(C,T);const A={baseTag:Ma("base",i),linkTags:Ma("link",l),metaTags:Ma("meta",h),noscriptTags:Ma("noscript",m),scriptTags:Ma("script",y),styleTags:Ma("style",v)},D={},_={};Object.keys(A).forEach(M=>{const{newTags:I,oldTags:j}=A[M];I.length&&(D[M]=I),j.length&&(_[M]=A[M].oldTags)}),r&&r(),x(t,D,_)},mo=null,U2=t=>{mo&&cancelAnimationFrame(mo),t.defer?mo=requestAnimationFrame(()=>{wu(t,()=>{mo=null})}):(wu(t),mo=null)},z2=U2,vu=class extends ve.Component{constructor(){super(...arguments);fs(this,"rendered",!1)}shouldComponentUpdate(r){return!A2(r,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:r}=this.props.context;r.remove(this),this.emitChange()}emitChange(){const{helmetInstances:r,setHelmet:i}=this.props.context;let a=null;const c=_2(r.get().map(l=>{const h={...l.props};return delete h.context,h}));W0.canUseDOM?z2(c):Rc&&(a=Rc(c)),i(a)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:r}=this.props.context;r.add(this),this.emitChange()}render(){return this.init(),null}},Ac,q2=(Ac=class extends ve.Component{shouldComponentUpdate(t){return!b2(bu(this.props,"helmetData"),bu(t,"helmetData"))}mapNestedChildrenToProps(t,r){if(!r)return null;switch(t.type){case"script":case"noscript":return{innerHTML:r};case"style":return{cssText:r};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,r,i,a){return{...r,[t.type]:[...r[t.type]||[],{...i,...this.mapNestedChildrenToProps(t,a)}]}}mapObjectTypeChildren(t,r,i,a){switch(t.type){case"title":return{...r,[t.type]:a,titleAttributes:{...i}};case"body":return{...r,bodyAttributes:{...i}};case"html":return{...r,htmlAttributes:{...i}};default:return{...r,[t.type]:{...i}}}}mapArrayTypeChildrenToProps(t,r){let i={...r};return Object.keys(t).forEach(a=>{i={...i,[a]:t[a]}}),i}warnOnInvalidChildren(t,r){return xu(yu.some(i=>t.type===i),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${yu.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),xu(!r||typeof r=="string"||Array.isArray(r)&&!r.some(i=>typeof i!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,r){let i={};return Ki.Children.forEach(t,a=>{if(!a||!a.props)return;const{children:c,...l}=a.props,h=Object.keys(l).reduce((x,y)=>(x[C2[y]||y]=l[y],x),{});let{type:m}=a;switch(typeof m=="symbol"?m=m.toString():this.warnOnInvalidChildren(a,c),m){case"Symbol(react.fragment)":r=this.mapChildrenToProps(c,r);break;case"link":case"meta":case"noscript":case"script":case"style":i=this.flattenArrayTypeChildren(a,i,h,c);break;default:r=this.mapObjectTypeChildren(a,r,h,c);break}}),this.mapArrayTypeChildrenToProps(i,r)}render(){const{children:t,...r}=this.props;let i={...r},{helmetData:a}=r;if(t&&(i=this.mapChildrenToProps(t,i)),a&&!(a instanceof Bc)){const c=a;a=new Bc(c.context,!0),delete i.helmetData}return a?Ki.createElement(vu,{...i,context:a.value}):Ki.createElement(G0.Consumer,null,c=>Ki.createElement(vu,{...i,context:c}))}},fs(Ac,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),Ac);const Y0="G-GW81WH5WJ0",X0=()=>{typeof window<"u"&&window.gtag&&window.gtag("config",Y0,{page_title:document.title,page_location:window.location.href,custom_map:{custom_parameter_1:"event_category",custom_parameter_2:"event_label"}})},Ll=(t,r)=>{typeof window<"u"&&window.gtag&&window.gtag("config",Y0,{page_path:t,page_title:r||document.title,page_location:window.location.origin+t})},kl=(t,r,i,a)=>{typeof window<"u"&&window.gtag&&window.gtag("event",t,{event_category:r,event_label:i,value:a})},H2=(t,r,i)=>{kl("view_item","tickets",`${r}${i?` - ${i}`:""}`,1),typeof window<"u"&&window.gtag&&window.gtag("event","view_item",{currency:"GBP",value:0,items:[{item_id:t,item_name:r,item_category:"Event Tickets",item_variant:i||"General",currency:"GBP",quantity:1}]})},V2=(t,r,i,a)=>{kl("begin_checkout","checkout",r,i),typeof window<"u"&&window.gtag&&window.gtag("event","begin_checkout",{currency:"GBP",value:i/100,items:a.map(c=>({item_id:t,item_name:r,item_category:"Event Tickets",item_variant:c.tier,price:c.price/100,currency:"GBP",quantity:c.quantity}))})},Nu=(t,r,i,a,c)=>{kl("purchase","checkout",i,a),typeof window<"u"&&window.gtag&&window.gtag("event","purchase",{transaction_id:t,currency:"GBP",value:a/100,tax:0,shipping:0,items:c.map(l=>({item_id:r,item_name:i,item_category:"Event Tickets",item_variant:l.tier,price:l.price/100,currency:"GBP",quantity:l.quantity}))})},G2=(t,r)=>{kl("click","button",`${t} - ${r}`)},fd=()=>{const[t,r]=ve.useState(!1),[i,a]=ve.useState(!1),c=Aa();ve.useEffect(()=>{const h=()=>{a(window.scrollY>50)};return window.addEventListener("scroll",h),()=>window.removeEventListener("scroll",h)},[]);const l=[{name:"Home",href:c.pathname==="/"?"#home":"/#home"},{name:"Events",href:c.pathname==="/"?"#events":"/events"},{name:"Gallery",href:"/gallery"},{name:"About",href:c.pathname==="/"?"#about":"/#about"},{name:"Contact",href:c.pathname==="/"?"#contact":"/#contact"}];return o.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 px-2 md:px-4 pt-2 md:pt-4",children:o.jsx(qe.nav,{initial:{y:-100},animate:{y:0},className:`transition-all duration-500 ease-out ${i?"bg-white/80 backdrop-blur-xl shadow-2xl border-2 border-slate-200/80 rounded-2xl max-w-4xl md:max-w-7xl mx-auto":"bg-transparent max-w-4xl md:max-w-7xl mx-auto"}`,children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-6",children:[o.jsxs("div",{className:"flex items-center justify-between h-14 md:h-16 relative",children:[o.jsx("div",{className:"hidden md:flex items-center z-10",children:o.jsx("img",{src:"/carntext-b.svg",alt:"Carnival LDN",className:"h-6 md:h-8 w-auto max-w-[120px] md:max-w-[220px] object-contain transition-all duration-300",style:{filter:i?"none":"brightness(0) invert(1) drop-shadow(0 0 8px rgba(0,0,0,0.5))"}})}),o.jsx(qe.div,{whileHover:{scale:1.05},className:"pl-2 md:pl-0 md:absolute md:left-1/2 md:transform md:-translate-x-1/2 z-10",children:o.jsx("div",{className:"relative",children:o.jsx("img",{src:i?"/carnival-logo.svg":"/carnival-logo-w.svg",alt:"Carnival LDN Logo",className:"w-10 h-10 md:w-12 md:h-12 object-contain transition-all duration-300",style:{backgroundColor:"transparent"}})})}),o.jsx("div",{className:"flex justify-end z-10",children:o.jsx(qe.button,{whileTap:{scale:.95},onClick:()=>r(!t),className:`p-4 transition-colors rounded-lg ${i?"text-gray-700 hover:text-gray-900 hover:bg-gray-100":"text-white hover:text-gray-200 hover:bg-white/10"}`,children:t?o.jsx(Zs,{size:28,strokeWidth:2.5}):o.jsx(L1,{size:28,strokeWidth:2.5})})})]}),o.jsx(nd,{children:t&&o.jsx(qe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:`md:hidden border-t mt-2 overflow-hidden ${i?"border-gray-200/50":"border-white/30"}`,children:o.jsxs("div",{className:"px-2 py-6 space-y-0",children:[l.map((h,m)=>o.jsxs("div",{children:[o.jsx(qe.a,{href:h.href,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:m*.1},onClick:()=>r(!1),className:`block text-center text-lg font-medium transition-colors py-3 rounded-lg ${i?"text-gray-700 hover:text-gray-900 hover:bg-gray-50":"text-white hover:text-gray-200 hover:bg-white/10"}`,children:h.name}),m<l.length-1&&o.jsx("div",{className:`border-b mx-4 ${i?"border-gray-200":"border-white/30"}`})]},h.name)),o.jsx(qe.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:l.length*.1},className:`w-full py-3 rounded-lg font-medium transition-colors text-base mt-4 ${i?"bg-gray-900 hover:bg-gray-800 text-white":"bg-white/90 hover:bg-white text-gray-900"}`,children:"Book Event"})]})})})]})})})},ys=()=>{const t=ve.useRef(null),[r,i]=ve.useState(!1),[a,c]=ve.useState("full");return ve.useEffect(()=>{const l=()=>{if(t.current){const m=["upper","lower","full"],x=m[Math.floor(Math.random()*m.length)];c(x),i(!0),setTimeout(()=>{i(!1)},200);const y=Math.random()*500+100;setTimeout(l,y)}},h=setTimeout(()=>{l()},100);return()=>{clearTimeout(h)}},[]),{glitchRef:t,isGlitching:r,glitchType:a}},W2=()=>o.jsxs(qe.span,{className:"inline-block px-3 sm:px-4 md:px-6 py-2 sm:py-2.5 md:py-3 bg-black/20 backdrop-blur-sm rounded-full border border-white/20 text-sm sm:text-base md:text-lg",whileHover:{scale:1.05,boxShadow:"0 0 20px rgba(255, 255, 255, 0.3)",borderColor:"rgba(255, 255, 255, 0.5)"},animate:{boxShadow:["0 0 10px rgba(255, 255, 255, 0.1)","0 0 20px rgba(255, 255, 255, 0.2)","0 0 10px rgba(255, 255, 255, 0.1)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:[o.jsx(Qd,{className:"hidden md:inline-block mr-2 w-4 h-4 md:w-5 md:h-5 text-yellow-400"}),"London's Most Professional Events Experience",o.jsx(Qd,{className:"hidden md:inline-block ml-2 w-4 h-4 md:w-5 md:h-5 text-yellow-400"})]}),Y2=()=>{const{glitchRef:t,isGlitching:r,glitchType:i}=ys(),a=Ca(),c={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.3,delayChildren:.2}}},l={hidden:{y:50,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",damping:15,stiffness:100}}},h=()=>{a("/events")},m=()=>{const x=document.getElementById("contact");x&&x.scrollIntoView({behavior:"smooth"})};return o.jsxs("section",{id:"home",className:"relative min-h-screen flex items-center justify-center overflow-hidden pt-16 sm:pt-20 md:pt-32 pb-12 sm:pb-16 md:pb-24 px-2 sm:px-4",children:[o.jsxs("div",{className:"absolute inset-0 w-full h-full",children:[o.jsx("video",{autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"absolute inset-0 w-full h-full object-cover",children:o.jsx("source",{src:"https://res.cloudinary.com/dg9reru4s/video/upload/v1756197502/vid_mprror.mp4",type:"video/mp4"})}),o.jsx("div",{className:"absolute inset-0 bg-black/50"})]}),o.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-6 lg:px-8 text-center relative z-10",children:o.jsxs(qe.div,{variants:c,initial:"hidden",animate:"visible",className:"space-y-6 md:space-y-8",children:[o.jsx(qe.div,{variants:l,children:o.jsx("h1",{ref:t,className:`text-6xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl glitch-text ${r?`glitch-active glitch-${i}`:""}`,"data-text":"CARNIVAL LDN",style:{textTransform:"uppercase",letterSpacing:"0.1em"},children:"CARNIVAL LDN"})}),o.jsxs(qe.div,{variants:l,className:"space-y-4 md:space-y-6 lg:space-y-7",children:[o.jsx(qe.h2,{className:"text-base sm:text-lg md:text-xl lg:text-2xl font-light max-w-4xl mx-auto leading-relaxed px-2 text-white drop-shadow-lg",children:o.jsx(W2,{})}),o.jsx(qe.p,{animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:12,repeat:1/0,ease:"linear"},className:"text-s sm:text-sm md:text-base lg:text-lg xl:text-xl max-w-3xl mx-auto leading-relaxed px-2 bg-gradient-to-r from-gray-200 via-white to-gray-200 bg-[length:200%_200%] bg-clip-text text-transparent drop-shadow-lg",children:"From corporate events to cultural celebrations, from exclusive parties to memorable occasions"})]}),o.jsxs(qe.div,{variants:l,className:"flex flex-col sm:flex-row gap-3 sm:gap-4 md:gap-6 justify-center items-center pt-4 sm:pt-6 md:pt-8 px-2 sm:px-4",children:[o.jsxs(qe.button,{onClick:h,whileHover:{scale:1.05,boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},whileTap:{scale:.95},className:"bg-white/90 hover:bg-white text-gray-900 font-bold text-base sm:text-base md:text-lg px-4 sm:px-6 md:px-8 py-2.5 sm:py-3 md:py-4 rounded-lg group w-3/4 sm:w-auto flex items-center justify-center space-x-2 transition-all shadow-lg backdrop-blur-sm border border-white/30",children:[o.jsx("span",{children:"Explore Events"}),o.jsx(ml,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5 group-hover:translate-x-1 transition-transform"})]}),o.jsx(qe.button,{onClick:m,whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-transparent hover:bg-white/90 text-white hover:text-gray-900 px-4 sm:px-6 md:px-8 py-2.5 sm:py-3 md:py-4 text-base sm:text-base md:text-lg font-semibold rounded-lg border-2 border-white/70 w-3/4 sm:w-auto transition-all backdrop-blur-sm",children:"Book Private Event"})]})]})})]})},X2={},Au=t=>{let r;const i=new Set,a=(v,C)=>{const T=typeof v=="function"?v(r):v;if(!Object.is(T,r)){const A=r;r=C??(typeof T!="object"||T===null)?T:Object.assign({},r,T),i.forEach(D=>D(r,A))}},c=()=>r,x={setState:a,getState:c,getInitialState:()=>y,subscribe:v=>(i.add(v),()=>i.delete(v)),destroy:()=>{(X2?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),i.clear()}},y=r=t(a,c,x);return x},Z2=t=>t?Au(t):Au;var Z0={exports:{}},$0={},K0={exports:{}},Q0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Za=ve;function $2(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var K2=typeof Object.is=="function"?Object.is:$2,Q2=Za.useState,J2=Za.useEffect,em=Za.useLayoutEffect,tm=Za.useDebugValue;function rm(t,r){var i=r(),a=Q2({inst:{value:i,getSnapshot:r}}),c=a[0].inst,l=a[1];return em(function(){c.value=i,c.getSnapshot=r,lc(c)&&l({inst:c})},[t,i,r]),J2(function(){return lc(c)&&l({inst:c}),t(function(){lc(c)&&l({inst:c})})},[t]),tm(i),i}function lc(t){var r=t.getSnapshot;t=t.value;try{var i=r();return!K2(t,i)}catch{return!0}}function nm(t,r){return r()}var im=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?nm:rm;Q0.useSyncExternalStore=Za.useSyncExternalStore!==void 0?Za.useSyncExternalStore:im;K0.exports=Q0;var sm=K0.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dl=ve,am=sm;function om(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var lm=typeof Object.is=="function"?Object.is:om,cm=am.useSyncExternalStore,dm=Dl.useRef,um=Dl.useEffect,hm=Dl.useMemo,fm=Dl.useDebugValue;$0.useSyncExternalStoreWithSelector=function(t,r,i,a,c){var l=dm(null);if(l.current===null){var h={hasValue:!1,value:null};l.current=h}else h=l.current;l=hm(function(){function x(A){if(!y){if(y=!0,v=A,A=a(A),c!==void 0&&h.hasValue){var D=h.value;if(c(D,A))return C=D}return C=A}if(D=C,lm(v,A))return D;var _=a(A);return c!==void 0&&c(D,_)?(v=A,D):(v=A,C=_)}var y=!1,v,C,T=i===void 0?null:i;return[function(){return x(r())},T===null?void 0:function(){return x(T())}]},[r,i,a,c]);var m=cm(t,l[0],l[1]);return um(function(){h.hasValue=!0,h.value=m},[m]),fm(m),m};Z0.exports=$0;var gm=Z0.exports;const mm=jo(gm),J0={},{useDebugValue:pm}=Ki,{useSyncExternalStoreWithSelector:xm}=mm;let Cu=!1;const ym=t=>t;function bm(t,r=ym,i){(J0?"production":void 0)!=="production"&&i&&!Cu&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Cu=!0);const a=xm(t.subscribe,t.getState,t.getServerState||t.getInitialState,r,i);return pm(a),a}const wm=t=>{(J0?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const r=typeof t=="function"?Z2(t):t,i=(a,c)=>bm(r,a,c);return Object.assign(i,r),i},vm=t=>wm,Nm={};function Am(t,r){let i;try{i=t()}catch{return}return{getItem:c=>{var l;const h=x=>x===null?null:JSON.parse(x,void 0),m=(l=i.getItem(c))!=null?l:null;return m instanceof Promise?m.then(h):h(m)},setItem:(c,l)=>i.setItem(c,JSON.stringify(l,void 0)),removeItem:c=>i.removeItem(c)}}const Eo=t=>r=>{try{const i=t(r);return i instanceof Promise?i:{then(a){return Eo(a)(i)},catch(a){return this}}}catch(i){return{then(a){return this},catch(a){return Eo(a)(i)}}}},Cm=(t,r)=>(i,a,c)=>{let l={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:M=>M,version:0,merge:(M,I)=>({...I,...M}),...r},h=!1;const m=new Set,x=new Set;let y;try{y=l.getStorage()}catch{}if(!y)return t((...M)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),i(...M)},a,c);const v=Eo(l.serialize),C=()=>{const M=l.partialize({...a()});let I;const j=v({state:M,version:l.version}).then(B=>y.setItem(l.name,B)).catch(B=>{I=B});if(I)throw I;return j},T=c.setState;c.setState=(M,I)=>{T(M,I),C()};const A=t((...M)=>{i(...M),C()},a,c);let D;const _=()=>{var M;if(!y)return;h=!1,m.forEach(j=>j(a()));const I=((M=l.onRehydrateStorage)==null?void 0:M.call(l,a()))||void 0;return Eo(y.getItem.bind(y))(l.name).then(j=>{if(j)return l.deserialize(j)}).then(j=>{if(j)if(typeof j.version=="number"&&j.version!==l.version){if(l.migrate)return l.migrate(j.state,j.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return j.state}).then(j=>{var B;return D=l.merge(j,(B=a())!=null?B:A),i(D,!0),C()}).then(()=>{I==null||I(D,void 0),h=!0,x.forEach(j=>j(D))}).catch(j=>{I==null||I(void 0,j)})};return c.persist={setOptions:M=>{l={...l,...M},M.getStorage&&(y=M.getStorage())},clearStorage:()=>{y==null||y.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>_(),hasHydrated:()=>h,onHydrate:M=>(m.add(M),()=>{m.delete(M)}),onFinishHydration:M=>(x.add(M),()=>{x.delete(M)})},_(),D||A},Sm=(t,r)=>(i,a,c)=>{let l={storage:Am(()=>localStorage),partialize:_=>_,version:0,merge:(_,M)=>({...M,..._}),...r},h=!1;const m=new Set,x=new Set;let y=l.storage;if(!y)return t((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),i(..._)},a,c);const v=()=>{const _=l.partialize({...a()});return y.setItem(l.name,{state:_,version:l.version})},C=c.setState;c.setState=(_,M)=>{C(_,M),v()};const T=t((..._)=>{i(..._),v()},a,c);c.getInitialState=()=>T;let A;const D=()=>{var _,M;if(!y)return;h=!1,m.forEach(j=>{var B;return j((B=a())!=null?B:T)});const I=((M=l.onRehydrateStorage)==null?void 0:M.call(l,(_=a())!=null?_:T))||void 0;return Eo(y.getItem.bind(y))(l.name).then(j=>{if(j)if(typeof j.version=="number"&&j.version!==l.version){if(l.migrate)return[!0,l.migrate(j.state,j.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,j.state];return[!1,void 0]}).then(j=>{var B;const[Z,Q]=j;if(A=l.merge(Q,(B=a())!=null?B:T),i(A,!0),Z)return v()}).then(()=>{I==null||I(A,void 0),A=a(),h=!0,x.forEach(j=>j(A))}).catch(j=>{I==null||I(void 0,j)})};return c.persist={setOptions:_=>{l={...l,..._},_.storage&&(y=_.storage)},clearStorage:()=>{y==null||y.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>D(),hasHydrated:()=>h,onHydrate:_=>(m.add(_),()=>{m.delete(_)}),onFinishHydration:_=>(x.add(_),()=>{x.delete(_)})},l.skipHydration||D(),A||T},Em=(t,r)=>"getStorage"in r||"serialize"in r||"deserialize"in r?((Nm?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Cm(t,r)):Sm(t,r),Im=Em,Tm="https://smbmvdzheqkblixjfdpn.supabase.co",jm="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNtYm12ZHpoZXFrYmxpeGpmZHBuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyNzgyODAsImV4cCI6MjA3MDg1NDI4MH0.twkaCp07rbguIiLnT8fsWDwmA8eACF1BMvcv6Wo0_DQ",Ut=V1(Tm,jm),Su={email:"admin@carnival.com",password:"admin123"},bs=vm()(Im((t,r)=>({user:null,isAuthenticated:!1,isLoading:!1,events:[],orders:[],login:async(i,a)=>{t({isLoading:!0});try{return i===Su.email&&a===Su.password?(t({user:{id:"1",email:i,name:"Admin User",role:"admin",createdAt:new Date},isAuthenticated:!0,isLoading:!1}),!0):(t({isLoading:!1}),!1)}catch(c){return console.error("Login error:",c),t({isLoading:!1}),!1}},logout:()=>{t({user:null,isAuthenticated:!1})},getEvents:async()=>{t({isLoading:!0});try{const{data:i,error:a}=await Ut.from("events").select("*").order("created_at",{ascending:!1});if(a)throw a;const{data:c,error:l}=await Ut.from("ticket_tiers").select("*");l&&console.error("Error fetching ticket tiers:",l);const h=(i||[]).map(m=>{const x=(c||[]).filter(y=>y.event_id===m.id);return{...m,isArchived:m.is_archived??!1,ticketTiers:x.map(y=>({id:y.id,eventId:y.event_id,name:y.name,price:y.price,originalPrice:y.original_price,capacity:y.capacity,soldCount:y.sold_count,availableFrom:y.available_from,availableUntil:y.available_until,description:y.description,benefits:y.benefits,isActive:y.is_active})).sort((y,v)=>y.price-v.price)}});console.log("Events with tiers:",h),t({events:h,isLoading:!1})}catch(i){console.error("Error fetching events:",i),zn.error("Failed to load events"),t({isLoading:!1})}},addEvent:async i=>{try{const a={title:i.title,date:i.date,time:i.time,venue:i.venue,price:i.price,description:i.description,capacity:i.capacity,image:i.image,tags:i.tags.split(",").map(h=>h.trim()).filter(h=>h),gradient:i.gradient,is_archived:!1};console.log("Adding new event:",a);const{data:c,error:l}=await Ut.from("events").insert([a]).select().single();if(l)throw console.error("Supabase insert error:",l),l;if(console.log("Event added successfully, now adding ticket tiers"),i.ticketTiers&&i.ticketTiers.length>0){const h=i.ticketTiers.map(y=>({id:y.id,event_id:c.id,name:y.name,price:y.price,original_price:y.originalPrice||null,capacity:y.capacity,sold_count:y.soldCount||0,available_from:y.availableFrom?new Date(y.availableFrom).toISOString():null,available_until:y.availableUntil?new Date(y.availableUntil).toISOString():null,description:y.description||null,benefits:y.benefits||[],is_active:y.isActive!==!1}));console.log("Inserting ticket tiers:",h),console.log("About to insert ticket tiers into database:",h);const{data:m,error:x}=await Ut.from("ticket_tiers").insert(h).select();x?(console.error("Error inserting ticket tiers:",x),console.error("Error details:",x.details,x.hint,x.message)):console.log("Ticket tiers added successfully:",m)}await r().getEvents()}catch(a){console.error("Error adding event:",a),zn.error("Failed to add event")}},updateEvent:async(i,a)=>{try{const c={title:a.title,date:a.date,time:a.time,venue:a.venue,price:a.price,description:a.description,capacity:a.capacity,image:a.image,tags:a.tags.split(",").map(h=>h.trim()).filter(h=>h),gradient:a.gradient};console.log("Updating event with data:",c);const{error:l}=await Ut.from("events").update(c).eq("id",i);if(l)throw console.error("Supabase update error:",l),l;if(a.ticketTiers){const{error:h}=await Ut.from("ticket_tiers").delete().eq("event_id",i);if(h&&console.error("Error deleting existing ticket tiers:",h),a.ticketTiers.length>0){const m=a.ticketTiers.map(y=>({id:y.id,event_id:i,name:y.name,price:y.price,original_price:y.originalPrice,capacity:y.capacity,sold_count:y.soldCount,available_from:y.availableFrom,available_until:y.availableUntil,description:y.description,benefits:y.benefits,is_active:y.isActive}));console.log("Updating ticket tiers:",m);const{error:x}=await Ut.from("ticket_tiers").insert(m);x?console.error("Error updating ticket tiers:",x):console.log("Ticket tiers updated successfully")}}console.log("Event updated successfully"),await r().getEvents()}catch(c){console.error("Error updating event:",c),zn.error("Failed to update event")}},deleteEvent:async i=>{try{const{data:a,error:c}=await Ut.from("events").select("is_archived").eq("id",i).single();c&&console.error("Error fetching event before delete:",c);const l=(a==null?void 0:a.is_archived)===!0;if(!l){zn.error("Cannot delete: Only archived events can be deleted. Please archive the event first.");const v=new Error("Cannot delete non-archived events");throw v.code="EVENT_NOT_ARCHIVED",v}const{data:h,error:m}=await Ut.from("orders").select("id").eq("event_id",i);if(m&&console.error("Error checking event orders before delete:",m),(h||[]).length>0&&console.log(`📊 Event has ${(h||[]).length} orders - proceeding with deletion of all related data`),l){console.log(`🗑️ Deleting archived event ${i} and all related data...`);const{error:v}=await Ut.from("ticket_scans").delete().eq("event_id",i);v?console.error("Error deleting ticket_scans for event:",v):console.log("✅ Deleted ticket_scans for event");const{error:C}=await Ut.from("guestlist_scans").delete().eq("event_id",i);C?console.error("Error deleting guestlist_scans for event:",C):console.log("✅ Deleted guestlist_scans for event");const{data:T,error:A}=await Ut.from("orders").select("id").eq("event_id",i);A&&console.error("Error fetching orders to delete:",A);const D=(T||[]).map(M=>M.id);if(D.length>0){console.log(`🗑️ Deleting ${D.length} orders and related data...`);const{error:M}=await Ut.from("order_tickets").delete().in("order_id",D);M?console.error("Error deleting order_tickets for event:",M):console.log("✅ Deleted order_tickets for event");const{error:I}=await Ut.from("orders").delete().eq("event_id",i);I?console.error("Error deleting orders for event:",I):console.log("✅ Deleted orders for event")}const{error:_}=await Ut.from("guestlists").delete().eq("event_id",i);_?console.error("Error deleting guestlists for event:",_):console.log("✅ Deleted guestlists for event")}const{error:x}=await Ut.from("ticket_tiers").delete().eq("event_id",i);x&&console.error("Error deleting ticket tiers:",x);const{error:y}=await Ut.from("events").delete().eq("id",i);if(y)throw y;await r().getEvents(),zn.success("Event deleted successfully")}catch(a){console.error("Error deleting event:",a),(a==null?void 0:a.code)==="EVENT_HAS_ORDERS"?zn.error("Cannot delete: this event has existing orders. Consider archiving it or enabling cascade deletes in Supabase."):(a==null?void 0:a.code)==="EVENT_NOT_ARCHIVED"||((a==null?void 0:a.code)==="23503"?zn.error("Cannot delete event: There are still references to this event in the system. Please contact support if this persists."):zn.error("Failed to delete event"))}},archiveEvent:async(i,a)=>{try{const{error:c}=await Ut.from("events").update({is_archived:a}).eq("id",i);if(c)throw c;await r().getEvents()}catch(c){console.error("Error archiving event:",c),zn.error("Failed to update archive status. Ensure `is_archived boolean default false` exists on events table.")}},subscribeToEvents:()=>Ut.channel("events").on("postgres_changes",{event:"*",schema:"public",table:"events"},a=>{console.log("Database change detected:",a),r().getEvents()}).subscribe(a=>{console.log("Subscription status:",a)}),getOrders:async()=>{try{console.log("🔄 Fetching orders with tickets and scans...");const{data:i,error:a}=await Ut.from("orders").select("*").order("created_at",{ascending:!1});if(a)throw a;const c=await Promise.all((i||[]).map(async l=>{const{data:h,error:m}=await Ut.from("order_tickets").select("*").eq("order_id",l.id);m&&console.error("Error fetching tickets for order:",l.id,m);const x=(h||[]).map(A=>({id:A.id,orderId:A.order_id,ticketTierId:A.ticket_tier_id,quantity:A.quantity,unitPrice:A.unit_price,totalPrice:A.total_price})),{data:y,error:v}=await Ut.from("ticket_scans").select("*").eq("order_id",l.id).order("scanned_at",{ascending:!1});v&&console.error("Error fetching scans for order:",l.id,v);const C=(y||[]).map(A=>({id:A.id,orderId:A.order_id,ticketTierId:A.ticket_tier_id,customerEmail:A.customer_email,eventId:A.event_id,scanType:A.scan_type,scannedAt:A.scanned_at,scannedBy:A.scanned_by,location:A.location,notes:A.notes}));return{id:l.id,eventId:l.event_id,userId:l.user_id,stripePaymentIntentId:l.stripe_payment_intent_id,status:l.status,totalAmount:l.total_amount,currency:l.currency,tickets:x,customerEmail:l.customer_email,customerName:l.customer_name,customerPhone:l.customer_phone,customerDateOfBirth:l.customer_date_of_birth,customerGender:l.customer_gender,createdAt:l.created_at,updatedAt:l.updated_at,scans:C}}));console.log("📦 Orders with tickets and scans (mapped):",c),t({orders:c})}catch(i){console.error("Error fetching orders:",i),t({orders:[]})}},validateTicket:async(i,a,c,l="entry")=>{try{if(console.log("🔍 Validating ticket:",{orderId:i,ticketTierId:a,customerEmail:c}),l==="entry"){const{data:A,error:D}=await Ut.from("ticket_scans").select("*").eq("order_id",i).eq("ticket_tier_id",a).eq("scan_type","entry");if(D&&console.error("Error checking existing entry scans:",D),A&&A.length>0)return console.log("❌ Ticket already scanned for entry"),{isValid:!1,message:"Ticket already scanned for entry",orderStatus:"completed",eventDate:"unknown",customerName:"unknown",customerEmail:c,eventId:A[0].event_id}}else if(l==="exit"){const{data:A,error:D}=await Ut.from("ticket_scans").select("*").eq("order_id",i).eq("ticket_tier_id",a).eq("scan_type","entry");if(D&&console.error("Error checking existing entry scans for exit:",D),!A||A.length===0)return console.log("❌ Cannot exit without entry scan"),{isValid:!1,message:"Cannot exit without entry scan",orderStatus:"completed",eventDate:"unknown",customerName:"unknown",customerEmail:c};const{data:_,error:M}=await Ut.from("ticket_scans").select("*").eq("order_id",i).eq("ticket_tier_id",a).eq("scan_type","exit");if(M&&console.error("Error checking existing exit scans:",M),_&&_.length>0)return console.log("❌ Ticket already scanned for exit"),{isValid:!1,message:"Ticket already scanned for exit",orderStatus:"completed",eventDate:"unknown",customerName:"unknown",customerEmail:c,eventId:A[0].event_id}}const{data:h,error:m}=await Ut.from("orders").select("*").eq("id",i).eq("customer_email",c).single();if(m||!h){console.log("❌ Order not found:",{orderError:m,orderId:i,customerEmail:c});const{data:A}=await Ut.from("orders").select("*").eq("id",i).single();return A?(console.log("🔍 Order found but email mismatch:",{orderEmail:A.customer_email,scannedEmail:c}),{isValid:!1,message:"Customer email does not match order",orderStatus:A.status||"unknown",eventDate:"unknown",customerName:A.customer_name||"unknown",customerEmail:c}):{isValid:!1,message:"Order not found",orderStatus:"unknown",eventDate:"unknown",customerName:"unknown",customerEmail:c}}if(console.log("✅ Order found:",h),h.status!=="completed")return console.log("❌ Payment not completed:",h.status),{isValid:!1,message:"Payment not completed",orderStatus:h.status,eventDate:"unknown",customerName:h.customer_name||"unknown",customerEmail:c};const{data:x,error:y}=await Ut.from("events").select("*").eq("id",h.event_id).single();if(y||!x)return console.log("❌ Event not found:",y),{isValid:!1,message:"Event not found",orderStatus:h.status,eventDate:"unknown",customerName:h.customer_name||"unknown",customerEmail:c};console.log("✅ Event found:",x);const v=x.date;if(v&&new Date(v)<new Date)return console.log("❌ Event has passed:",v),{isValid:!1,message:"Event has passed",orderStatus:h.status,eventDate:v,customerName:h.customer_name||"unknown",customerEmail:c};console.log("🔍 Looking for ticket tier:",{ticketTierId:a,orderEventId:h.event_id});const{data:C,error:T}=await Ut.from("ticket_tiers").select("*").eq("id",a).single();if(T||!C){console.log("❌ Ticket tier not found:",{ticketTierId:a,error:T});const{data:A,error:D}=await Ut.from("ticket_tiers").select("*").eq("event_id",h.event_id);return console.log("🔍 All ticket tiers for this event:",{eventId:h.event_id,tiers:A,error:D}),{isValid:!1,message:"Ticket tier not found",orderStatus:h.status,eventDate:v||"unknown",customerName:h.customer_name||"unknown",customerEmail:c}}return C.event_id!==h.event_id?(console.log("❌ Ticket tier does not belong to this event:",{tierEventId:C.event_id,orderEventId:h.event_id}),{isValid:!1,message:"Ticket tier does not belong to this event",orderStatus:h.status,eventDate:v||"unknown",customerName:h.customer_name||"unknown",customerEmail:c}):(console.log("✅ Ticket tier found:",C),C.is_active?(console.log("✅ Ticket validation successful"),{isValid:!0,message:`Ticket is valid for ${l}`,orderStatus:h.status,eventDate:v||"unknown",customerName:h.customer_name||"unknown",customerEmail:c,eventId:h.event_id,eventTitle:x.title,ticketTierName:C.name}):(console.log("❌ Ticket tier is inactive"),{isValid:!1,message:"Ticket tier is inactive",orderStatus:h.status,eventDate:v||"unknown",customerName:h.customer_name||"unknown",customerEmail:c}))}catch(h){return console.error("❌ Error validating ticket:",h),{isValid:!1,message:"Failed to validate ticket",orderStatus:"unknown",eventDate:"unknown",customerName:"unknown",customerEmail:c}}},recordTicketScan:async i=>{try{const{error:a}=await Ut.from("ticket_scans").insert({order_id:i.orderId,ticket_tier_id:i.ticketTierId,customer_email:i.customerEmail,event_id:i.eventId,scan_type:i.scanType,scanned_by:i.scannedBy,location:i.location,notes:i.notes,scanned_at:new Date().toISOString()});if(a)throw console.error("Error recording ticket scan:",a),a}catch(a){throw console.error("Error recording ticket scan:",a),a}},searchTickets:async i=>{try{console.log("🔍 Searching for tickets with term:",i);const{data:a,error:c}=await Ut.from("orders").select(`
              *,
              events!inner(title, date, venue),
              ticket_tiers!inner(name)
            `).or(`customer_name.ilike.%${i}%,customer_email.ilike.%${i}%,id.ilike.%${i}%`).order("created_at",{ascending:!1});if(c)throw c;const h=(await Promise.all((a||[]).map(async m=>{const{data:x,error:y}=await Ut.from("order_tickets").select("*").eq("order_id",m.id);y&&console.error("Error fetching tickets for order:",m.id,y);const{data:v,error:C}=await Ut.from("ticket_scans").select("*").eq("order_id",m.id).order("scanned_at",{ascending:!1});C&&console.error("Error fetching scans for order:",m.id,C);const T=(v||[]).map(j=>({id:j.id,orderId:j.order_id,ticketTierId:j.ticket_tier_id,customerEmail:j.customer_email,eventId:j.event_id,scanType:j.scan_type,scannedAt:j.scanned_at,scannedBy:j.scanned_by,location:j.location,notes:j.notes})),A=T.filter(j=>j.scanType==="entry"),D=T.filter(j=>j.scanType==="exit");let _="not_scanned";A.length>0&&D.length>0?_="scanned_both":A.length>0?_="scanned_in":D.length>0&&(_="scanned_out");const M=T.length>0?new Date(T[0].scannedAt):void 0;return(x||[]).map(j=>{var B,Z,Q;return{orderId:m.id,customerName:m.customer_name||"N/A",customerEmail:m.customer_email||"N/A",eventTitle:((B=m.events)==null?void 0:B.title)||"N/A",eventDate:((Z=m.events)==null?void 0:Z.date)||"N/A",eventVenue:((Q=m.events)==null?void 0:Q.venue)||"N/A",ticketTierName:j.ticket_tier_id||"N/A",quantity:j.quantity||0,totalPrice:j.total_price||0,orderStatus:m.status||"N/A",orderDate:new Date(m.created_at),scans:T,lastScanTime:M,scanStatus:_}})}))).flat();return console.log("🔍 Search results:",h),h}catch(a){return console.error("Error searching tickets:",a),[]}},debugTicketData:async(i,a)=>{try{let c=`🔍 Debug: Checking database for:
Order ID: ${i}
Ticket Tier ID: ${a}

`;const{data:l,error:h}=await Ut.from("orders").select("*").eq("id",i).single();h?c+=`❌ Order Error: ${h.message}
`:l?c+=`✅ Order Found:
- Status: ${l.status}
- Customer: ${l.customer_name}
- Email: ${l.customer_email}
- Event ID: ${l.event_id}

`:c+=`❌ Order Not Found

`;const{data:m,error:x}=await Ut.from("ticket_tiers").select("*").eq("id",a).single();if(x?c+=`❌ Ticket Tier Error: ${x.message}
`:m?c+=`✅ Ticket Tier Found:
- Name: ${m.name}
- Event ID: ${m.event_id}
- Active: ${m.is_active}

`:c+=`❌ Ticket Tier Not Found

`,l!=null&&l.event_id){const{data:C,error:T}=await Ut.from("events").select("*").eq("id",l.event_id).single();T?c+=`❌ Event Error: ${T.message}
`:C?c+=`✅ Event Found:
- Title: ${C.title}
- Date: ${C.date}

`:c+=`❌ Event Not Found

`}if(l!=null&&l.event_id){const{data:C,error:T}=await Ut.from("ticket_tiers").select("*").eq("event_id",l.event_id);T?c+=`❌ Event Tiers Error: ${T.message}
`:C&&C.length>0?(c+=`✅ Event Ticket Tiers (${C.length}):
`,C.forEach(A=>c+=`- ${A.id}: ${A.name}
`),c+=`
`):c+=`❌ No Ticket Tiers Found for Event

`}const{data:y,error:v}=await Ut.from("ticket_tiers").select("*");return v?c+=`❌ All Tiers Error: ${v.message}
`:y&&y.length>0?(c+=`📊 Total Ticket Tiers in DB: ${y.length}
`,y.slice(0,5).forEach(C=>c+=`- ${C.id}: ${C.name}
`),y.length>5&&(c+=`... and ${y.length-5} more
`),c+=`
`):c+=`❌ No Ticket Tiers in Database

`,c}catch(c){return`❌ Debug Error: ${c}
`}},validateGuestlist:async(i,a="entry")=>{try{console.log("🔍 Validating guestlist:",{guestlistId:i,scanType:a});const{data:c,error:l}=await Ut.from("guestlists").select("*").eq("id",i).single();if(l||!c)return console.log("❌ Guestlist not found:",l),{isValid:!1,message:"Guestlist not found",orderStatus:"unknown",eventDate:"unknown",customerName:"unknown",customerEmail:"unknown"};if(c.remaining_scans<=0)return console.log("❌ No remaining scans for guestlist"),{isValid:!1,message:"All tickets from this group pass have been used",orderStatus:"completed",eventDate:"unknown",customerName:c.lead_name,customerEmail:c.lead_email};const{data:h,error:m}=await Ut.from("events").select("*").eq("id",c.event_id).single();if(m||!h)return console.log("❌ Event not found:",m),{isValid:!1,message:"Event not found",orderStatus:"completed",eventDate:"unknown",customerName:c.lead_name,customerEmail:c.lead_email};const x=h.date;return x&&new Date(x)<new Date?(console.log("❌ Event has passed:",x),{isValid:!1,message:"Event has passed",orderStatus:"completed",eventDate:x,customerName:c.lead_name,customerEmail:c.lead_email}):(console.log("✅ Guestlist validation successful"),{isValid:!0,message:`Group pass valid - ${c.remaining_scans} tickets remaining`,orderStatus:"completed",eventDate:x||"unknown",customerName:c.lead_name,customerEmail:c.lead_email,eventId:c.event_id,eventTitle:h.title,ticketTierName:`Group Pass (${c.total_tickets} tickets)`})}catch(c){return console.error("❌ Error validating guestlist:",c),{isValid:!1,message:"Failed to validate guestlist",orderStatus:"unknown",eventDate:"unknown",customerName:"unknown",customerEmail:"unknown"}}},recordGuestlistScan:async i=>{try{const{error:a}=await Ut.rpc("decrement_guestlist_scans",{guestlist_uuid:i.guestlistId});if(a)throw console.error("Error decrementing guestlist scans:",a),a;const{error:c}=await Ut.from("guestlist_scans").insert({guestlist_id:i.guestlistId,event_id:i.eventId,scan_type:i.scanType,scanned_by:i.scannedBy||"admin",location:i.location||"",notes:i.notes||"",scanned_at:new Date().toISOString()});if(c)throw console.error("Error recording guestlist scan:",c),c}catch(a){throw console.error("Error recording guestlist scan:",a),a}}}),{name:"carnival-admin-storage",partialize:t=>({user:t.user,isAuthenticated:t.isAuthenticated})})),_m=()=>{const{events:t}=bs(),r=Ca(),{glitchRef:i,isGlitching:a,glitchType:c}=ys();ve.useEffect(()=>{Ll("/events","Carnival LDN - Events")},[]);const l=h=>{H2(h.id,h.title),r(`/events?event=${h.id}`)};return o.jsxs("section",{id:"events",className:"py-16 md:py-20 relative px-4 overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 w-full h-full",children:[o.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover scale-150",children:o.jsx("source",{src:"https://res.cloudinary.com/dg9reru4s/video/upload/v1756198520/vid-ev_xlwkrd.mp4",type:"video/mp4"})}),o.jsx("div",{className:"absolute inset-0 bg-gray-900/70"})]}),o.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 md:px-6 lg:px-8",children:[o.jsxs(qe.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:"text-center mb-12 md:mb-16",children:[o.jsx(qe.h2,{ref:i,animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:8,repeat:1/0,ease:"linear"},className:`text-5xl sm:text-4xl md:text-5xl lg:text-6xl font-bold mb-4 md:mb-6 pb-1 glitch-text ${a?`glitch-active glitch-${c}`:""}`,"data-text":"EVENTS",style:{textTransform:"uppercase",letterSpacing:"0.1em"},children:"EVENTS"}),o.jsxs(qe.p,{className:"text-base sm:text-lg md:text-lg text-white max-w-fit mx-auto leading-relaxed px-6 py-3 bg-black/20 backdrop-blur-sm rounded-full border border-white/20",whileHover:{scale:1.05,boxShadow:"0 0 20px rgba(255, 255, 255, 0.3)",borderColor:"rgba(255, 255, 255, 0.5)"},animate:{boxShadow:["0 0 10px rgba(255, 255, 255, 0.1)","0 0 20px rgba(255, 255, 255, 0.2)","0 0 10px rgba(255, 255, 255, 0.1)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:[o.jsx("span",{className:"block sm:hidden",children:"⚡ Events that hit different ⚡"}),o.jsx("span",{className:"hidden sm:block",children:"⚡ From rooftop raves to underground vibes - events that hit different ⚡"})]})]}),o.jsx("div",{className:`grid gap-6 md:gap-8 ${t.filter(h=>!h.isArchived).slice(0,3).length===1?"grid-cols-1 max-w-md mx-auto":t.filter(h=>!h.isArchived).slice(0,3).length===2?"grid-cols-1 md:grid-cols-2 max-w-4xl mx-auto":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3"}`,children:t.filter(h=>!h.isArchived).slice(0,3).map((h,m)=>o.jsxs(qe.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.6,delay:m*.1},whileHover:{y:-4},className:"group relative bg-gradient-to-br from-white via-gray-50 to-white border border-gray-100 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden cursor-pointer backdrop-blur-sm",children:[o.jsxs("div",{className:"relative h-48 md:h-56 overflow-hidden",onClick:()=>l(h),children:[o.jsx("img",{src:h.image,alt:h.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",onError:x=>{const y=x.target;y.src=`https://via.placeholder.com/400x300/6B7280/FFFFFF?text=${encodeURIComponent(h.title)}`}}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"}),o.jsx("div",{className:"absolute top-4 left-4 flex flex-wrap gap-2",children:h.tags.slice(0,2).map(x=>o.jsx("span",{className:"bg-white/95 backdrop-blur-sm px-3 py-1.5 rounded-full text-xs font-semibold text-gray-800 shadow-sm border border-white/20",children:x},x))}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:o.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white mb-2 leading-tight drop-shadow-lg",children:h.title})})]}),o.jsxs("div",{className:"p-5 md:p-6 space-y-4",onClick:()=>l(h),children:[o.jsx("p",{className:"text-gray-600 text-sm leading-relaxed line-clamp-2",children:h.description}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3 p-2.5 bg-gray-50 rounded-xl",children:[o.jsx(_n,{className:"w-4 h-4 text-gray-600 flex-shrink-0"}),o.jsx("span",{className:"text-sm font-semibold text-gray-900",children:h.date})]}),o.jsxs("div",{className:"flex items-center justify-center gap-3 p-2.5 bg-gray-50 rounded-xl",children:[o.jsx(Ii,{className:"w-4 h-4 text-gray-600 flex-shrink-0"}),o.jsx("span",{className:"text-sm font-semibold text-gray-900",children:h.time})]}),o.jsxs("div",{className:"flex items-center justify-center gap-3 p-2.5 bg-gray-50 rounded-xl",children:[o.jsx(Gs,{className:"w-4 h-4 text-gray-600 flex-shrink-0"}),o.jsx("span",{className:"text-sm font-semibold text-gray-900",children:h.venue})]})]}),o.jsxs(qe.button,{onClick:x=>{x.stopPropagation(),G2("Get Tickets",`Events Section - ${h.title}`),l(h)},whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 hover:from-gray-800 hover:via-gray-700 hover:to-gray-800 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 text-sm md:text-base flex items-center justify-center gap-3 shadow-lg hover:shadow-xl group-hover:shadow-2xl",children:[o.jsx("span",{children:"Get Tickets"}),o.jsx(ml,{className:"w-4 h-4 transition-transform group-hover:translate-x-1"})]})]})]},h.id))})]})]})},Lm=()=>{const{glitchRef:t,isGlitching:r,glitchType:i}=ys(),a=[{icon:_n,number:"500+",label:"Epic Nights Created"},{icon:pn,number:"50K+",label:"Happy Party People"},{icon:Jd,number:"25+",label:"Industry Awards"},{icon:k1,number:"10+",label:"Years of Experience"}];return o.jsxs("section",{id:"about",className:"py-16 md:py-20 relative bg-gradient-to-br from-black via-gray-900 to-black overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/80 via-gray-900/60 to-black/80"}),o.jsx("div",{className:"absolute inset-0 opacity-5",children:o.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 1px 1px, white 1px, transparent 0)",backgroundSize:"40px 40px"}})}),o.jsx("div",{className:"absolute top-0 left-1/4 w-px h-full bg-gradient-to-b from-transparent via-white/10 to-transparent"}),o.jsx("div",{className:"absolute top-0 right-1/4 w-px h-full bg-gradient-to-b from-transparent via-white/5 to-transparent"}),o.jsx("div",{className:"absolute top-1/3 left-0 w-full h-px bg-gradient-to-r from-transparent via-white/5 to-transparent"})]}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-6 lg:px-8 relative z-10",children:[o.jsxs(qe.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:"text-center mb-12 md:mb-16",children:[o.jsx(qe.h2,{ref:t,"data-text":"ABOUT US",className:`text-5xl sm:text-4xl md:text-5xl lg:text-6xl font-bold mb-4 md:mb-6 glitch-text text-white ${r?`glitch-active glitch-${i}`:""}`,style:{textTransform:"uppercase",letterSpacing:"0.1em"},children:"ABOUT US"}),o.jsxs(qe.p,{className:"text-base sm:text-lg md:text-lg text-white max-w-fit mx-auto leading-relaxed px-6 py-3 bg-black/20 backdrop-blur-sm rounded-full border border-white/20",whileHover:{scale:1.05,boxShadow:"0 0 20px rgba(255, 255, 255, 0.3)",borderColor:"rgba(255, 255, 255, 0.5)"},animate:{boxShadow:["0 0 10px rgba(255, 255, 255, 0.1)","0 0 20px rgba(255, 255, 255, 0.2)","0 0 10px rgba(255, 255, 255, 0.1)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:[o.jsx("span",{className:"block sm:hidden",children:"Creating epic nights since 2018"}),o.jsx("span",{className:"hidden sm:block",children:"We make London's most unforgettable nights happen"})]})]}),o.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 md:gap-12 items-stretch mb-16 md:mb-20",children:[o.jsxs(qe.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.8},className:"bg-white/5 border border-white/20 rounded-2xl p-8 md:p-12 backdrop-blur-sm shadow-2xl hover:shadow-white/10 transition-all duration-500 flex flex-col justify-center",children:[o.jsx(qe.h3,{className:"text-3xl md:text-4xl font-bold mb-6 md:mb-8 text-white text-center md:text-left",children:"Our Story"}),o.jsxs("div",{className:"space-y-6 text-gray-300 leading-relaxed text-center md:text-left",children:[o.jsx("p",{className:"text-lg md:text-xl",children:"Born from the underground scene, Carnival LDN started as a passion project for people who believed London deserved better parties."}),o.jsx("p",{className:"text-lg md:text-xl",children:"We've grown from throwing warehouse raves to becoming the city's most trusted name in unforgettable experiences."})]})]}),o.jsx(qe.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.8,delay:.2},className:"grid grid-cols-2 gap-4 md:gap-6",children:a.map((c,l)=>o.jsxs(qe.div,{initial:{scale:0},whileInView:{scale:1},viewport:{once:!0},transition:{delay:l*.1,type:"spring"},whileHover:{scale:1.05,y:-5},className:"bg-white/5 border border-white/20 rounded-xl p-6 md:p-8 text-center group cursor-default hover:bg-white/10 transition-all duration-300 backdrop-blur-sm shadow-xl hover:shadow-white/10",children:[o.jsx(c.icon,{className:"w-10 h-10 md:w-12 md:h-12 text-white mx-auto mb-4 group-hover:scale-110 transition-transform"}),o.jsx("div",{className:"text-2xl md:text-3xl font-bold text-white mb-2",children:c.number}),o.jsx("div",{className:"text-gray-300 text-sm md:text-base leading-tight",children:c.label})]},c.label))})]}),o.jsxs(qe.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:"bg-white/5 border border-white/20 rounded-2xl p-8 md:p-12 backdrop-blur-sm shadow-2xl hover:shadow-white/10 transition-all duration-500 mb-12",children:[o.jsx(qe.h4,{className:"text-2xl md:text-3xl font-bold text-center mb-8 text-white",children:"Why Choose Us?"}),o.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"text-center group",children:[o.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform",children:o.jsx(Jd,{className:"w-8 h-8 text-black"})}),o.jsx("span",{className:"text-gray-300 font-medium",children:"Unmatched energy and atmosphere"})]}),o.jsxs("div",{className:"text-center group",children:[o.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform",children:o.jsx(eu,{className:"w-8 h-8 text-black"})}),o.jsx("span",{className:"text-gray-300 font-medium",children:"Premium venue and artist partnerships"})]}),o.jsxs("div",{className:"text-center group",children:[o.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform",children:o.jsx(eu,{className:"w-8 h-8 text-black"})}),o.jsx("span",{className:"text-gray-300 font-medium",children:"Authentic scene knowledge"})]}),o.jsxs("div",{className:"text-center group",children:[o.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform",children:o.jsx(pn,{className:"w-8 h-8 text-black"})}),o.jsx("span",{className:"text-gray-300 font-medium",children:"Community-focused approach"})]})]})]})]})]})},km=()=>{const{glitchRef:t,isGlitching:r,glitchType:i}=ys();return o.jsxs("section",{id:"contact",className:"py-16 md:py-20 relative bg-gradient-to-br from-black via-gray-900 to-black overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/80 via-gray-900/60 to-black/80"}),o.jsx("div",{className:"absolute inset-0 opacity-5",children:o.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 1px 1px, white 1px, transparent 0)",backgroundSize:"40px 40px"}})}),o.jsx("div",{className:"absolute top-0 left-1/4 w-px h-full bg-gradient-to-b from-transparent via-white/10 to-transparent"}),o.jsx("div",{className:"absolute top-0 right-1/4 w-px h-full bg-gradient-to-b from-transparent via-white/5 to-transparent"}),o.jsx("div",{className:"absolute top-1/3 left-0 w-full h-px bg-gradient-to-r from-transparent via-white/5 to-transparent"})]}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-6 lg:px-8 relative z-10",children:[o.jsxs(qe.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:"text-center mb-12 md:mb-16",children:[o.jsx(qe.h2,{ref:t,"data-text":"GET IN TOUCH",className:`text-4xl sm:text-4xl md:text-5xl lg:text-6xl font-bold mb-4 md:mb-6 glitch-text text-white ${r?`glitch-active glitch-${i}`:""}`,style:{textTransform:"uppercase",letterSpacing:"0.1em"},children:"GET IN TOUCH"}),o.jsx(qe.p,{className:"text-base sm:text-lg md:text-lg text-white max-w-fit mx-auto leading-relaxed px-6 py-3 bg-black/20 backdrop-blur-sm rounded-full border border-white/20",whileHover:{scale:1.05,boxShadow:"0 0 20px rgba(255, 255, 255, 0.3)",borderColor:"rgba(255, 255, 255, 0.5)"},animate:{boxShadow:["0 0 10px rgba(255, 255, 255, 0.1)","0 0 20px rgba(255, 255, 255, 0.2)","0 0 10px rgba(255, 255, 255, 0.1)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:"Ready to create an exceptional event?"})]}),o.jsxs("div",{className:"grid lg:grid-cols-5 gap-8 md:gap-12 items-stretch",children:[o.jsxs(qe.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.8},className:"lg:col-span-3 bg-white/5 border border-white/20 rounded-2xl p-6 md:p-8 backdrop-blur-sm shadow-2xl hover:shadow-white/10 transition-all duration-500 flex flex-col",children:[o.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white mb-4 md:mb-6",children:"Send us a message"}),o.jsxs("form",{className:"space-y-4 md:space-y-6 flex-1 flex flex-col",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"First Name"}),o.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:ring-2 focus:ring-white focus:border-white/40 transition-all text-white placeholder-gray-400",placeholder:"John"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Last Name"}),o.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:ring-2 focus:ring-white focus:border-white/40 transition-all text-white placeholder-gray-400",placeholder:"Doe"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),o.jsx("input",{type:"email",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:ring-2 focus:ring-white focus:border-white/40 transition-all text-white placeholder-gray-400",placeholder:"john@company.com"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Phone"}),o.jsx("input",{type:"tel",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:ring-2 focus:ring-white focus:border-white/40 transition-all text-white placeholder-gray-400",placeholder:"+44 20 1234 5678"})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Message"}),o.jsx("textarea",{rows:6,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:ring-2 focus:ring-white focus:border-white/40 transition-all text-white placeholder-gray-400 resize-none",placeholder:"Tell us how we can help you..."})]}),o.jsx("div",{className:"pt-0",children:o.jsxs(qe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"bg-white hover:bg-gray-100 text-black px-6 md:px-8 py-3 rounded-lg font-medium transition-all duration-300 text-sm md:text-base flex items-center justify-center space-x-2 w-full shadow-lg",children:[o.jsx(id,{className:"w-4 h-4 md:w-5 md:h-5"}),o.jsx("span",{children:"Send Message"})]})})]})]}),o.jsxs(qe.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.8,delay:.2},className:"lg:col-span-2 space-y-6 md:space-y-8 flex flex-col",children:[o.jsxs("div",{className:"bg-white/5 border border-white/20 rounded-2xl p-6 md:p-8 backdrop-blur-sm shadow-2xl hover:shadow-white/10 transition-all duration-500 flex-1",children:[o.jsx(qe.h3,{className:"text-xl md:text-2xl font-bold mb-4 md:mb-6 text-center lg:text-left text-white",children:"Contact Information"}),o.jsxs("div",{className:"space-y-4 md:space-y-6",children:[o.jsxs("div",{className:"flex items-center space-x-3 md:space-x-4",children:[o.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-white rounded-lg flex items-center justify-center",children:o.jsx(sd,{className:"w-5 h-5 md:w-6 md:h-6 text-black"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-white",children:"Email"}),o.jsx("p",{className:"text-gray-300",children:"parternships@carnivalldn.com"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3 md:space-x-4",children:[o.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-white rounded-lg flex items-center justify-center",children:o.jsx(d0,{className:"w-5 h-5 md:w-6 md:h-6 text-black"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-white",children:"Phone"}),o.jsx("p",{className:"text-gray-300",children:"+44 20 1234 5678"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3 md:space-x-4",children:[o.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-white rounded-lg flex items-center justify-center",children:o.jsx(Gs,{className:"w-5 h-5 md:w-6 md:h-6 text-black"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-white",children:"Address"}),o.jsx("p",{className:"text-gray-300",children:"123 Event Street, London, UK"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3 md:space-x-4",children:[o.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-white rounded-lg flex items-center justify-center",children:o.jsx(Ii,{className:"w-5 h-5 md:w-6 md:h-6 text-black"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-white",children:"Business Hours"}),o.jsx("p",{className:"text-gray-300",children:"Mon-Fri: 9AM-6PM"})]})]})]})]}),o.jsxs("div",{className:"bg-white/5 border border-white/20 rounded-2xl p-6 md:p-8 backdrop-blur-sm shadow-2xl hover:shadow-white/10 transition-all duration-500",children:[o.jsx(qe.h3,{className:"text-xl md:text-2xl font-bold mb-4 md:mb-6 text-center lg:text-left text-white",children:"Connect With Us"}),o.jsx("p",{className:"text-sm md:text-base text-gray-300 mb-4 md:mb-6 leading-relaxed text-center lg:text-left",children:"Follow our journey and stay updated with the latest events, behind-the-scenes content, and exclusive offers."}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs(qe.a,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},href:"#",className:"bg-white/10 hover:bg-white/20 border border-white/20 rounded-xl p-4 text-center transition-all duration-300 group",children:[o.jsx(D1,{className:"w-6 h-6 text-white mx-auto mb-2 group-hover:scale-110 transition-transform"}),o.jsx("span",{className:"text-xs text-gray-400 group-hover:text-white transition-colors",children:"Instagram"})]}),o.jsxs(qe.a,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},href:"#",className:"bg-white/10 hover:bg-white/20 border border-white/20 rounded-xl p-4 text-center transition-all duration-300 group",children:[o.jsx(O1,{className:"w-6 h-6 text-white mx-auto mb-2 group-hover:scale-110 transition-transform"}),o.jsx("span",{className:"text-xs text-gray-400 group-hover:text-white transition-colors",children:"WhatsApp"})]}),o.jsxs(qe.a,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},href:"#",className:"bg-white/10 hover:bg-white/20 border border-white/20 rounded-xl p-4 text-center transition-all duration-300 group",children:[o.jsx(M1,{className:"w-6 h-6 text-white mx-auto mb-2 group-hover:scale-110 transition-transform"}),o.jsx("span",{className:"text-xs text-gray-400 group-hover:text-white transition-colors",children:"LinkedIn"})]})]})]})]})]})]})]})},gd=()=>o.jsx("footer",{className:"bg-gradient-to-br from-black via-gray-900 to-black text-white py-12 md:py-16 relative overflow-hidden border-t border-white/10",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-6 lg:px-8 relative z-10",children:[o.jsx("div",{className:"grid grid-cols-1 gap-8 md:gap-10",children:o.jsxs("div",{className:"text-center",children:[o.jsx(qe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"flex items-center justify-center mb-4",children:o.jsx("img",{src:"/carnival-logo.svg",alt:"Carnival LDN Logo",className:"w-16 h-16 md:w-20 md:h-20 object-contain",style:{filter:"brightness(0) invert(1)"}})}),o.jsx("p",{className:"text-gray-400 text-sm md:text-base leading-relaxed mb-4 max-w-md mx-auto px-4",children:"London's premier professional events company, creating exceptional experiences that elevate your brand and strengthen business relationships."}),o.jsx("p",{className:"text-gray-500 text-xs md:text-sm text-center",children:"Established in London, 2014"})]})}),o.jsx(qe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.6},className:"border-t border-gray-800 mt-8 md:mt-12 pt-6 md:pt-8",children:o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[o.jsx("p",{className:"text-gray-400 text-sm",children:"© 2025 Carnival LDN. All rights reserved."}),o.jsxs("div",{className:"flex space-x-4",children:[o.jsx("a",{href:"/privacy-policy",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"Privacy Policy"}),o.jsx("a",{href:"/terms-of-service",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"Terms of Service"}),o.jsx("a",{href:"/cookie-policy",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"Cookie Policy"})]})]})})]})}),Dm=()=>{const t=Array.from({length:15},(r,i)=>({id:i,size:Math.random()*200+50,duration:Math.random()*25+20,delay:Math.random()*10,x:Math.random()*100,y:Math.random()*100}));return o.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden",children:[t.map(r=>o.jsx(qe.div,{className:"absolute rounded-full mix-blend-multiply filter blur-xl opacity-5",style:{width:r.size,height:r.size,left:`${r.x}%`,top:`${r.y}%`,background:`radial-gradient(circle,
              ${r.id%3===0?"rgb(107, 114, 128)":r.id%3===1?"rgb(75, 85, 99)":"rgb(156, 163, 175)"} 0%, transparent 70%)`},animate:{x:[0,50,-25,0],y:[0,-50,25,0],scale:[1,1.1,.9,1]},transition:{duration:r.duration,repeat:1/0,delay:r.delay,ease:"easeInOut"}},r.id)),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white via-gray-50 to-white opacity-90"})]})},Om=()=>{const[t,r]=ve.useState(!1),[i,a]=ve.useState(""),c=Ca(),{login:l,isLoading:h}=bs(),{register:m,handleSubmit:x,formState:{errors:y}}=x0(),v=async C=>{a(""),await l(C.email,C.password)?(zn.success("Welcome back, Admin!"),c("/admin/dashboard")):(a("Invalid email or password"),zn.error("Invalid email or password"))};return o.jsx("div",{className:"min-h-screen flex items-start justify-center bg-gray-100 py-12 px-4 sm:px-6 lg:px-8",style:{paddingTop:"20vh"},children:o.jsxs(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-md w-full space-y-8",children:[o.jsxs("div",{children:[o.jsx(qe.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"mx-auto h-12 w-12 bg-gray-900 rounded-full flex items-center justify-center",children:o.jsx(vo,{className:"h-6 w-6 text-white"})}),o.jsx(qe.h2,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Admin Login"}),o.jsx(qe.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to access the dashboard"})]}),o.jsxs(qe.form,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"mt-8 space-y-6",onSubmit:x(v),children:[i&&o.jsxs(qe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 rounded-md p-4 flex items-center space-x-2",children:[o.jsx(Cc,{className:"h-5 w-5 text-red-400"}),o.jsx("span",{className:"text-sm text-red-600",children:i})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),o.jsxs("div",{className:"mt-1 relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(sd,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{...m("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),id:"email",type:"email",autoComplete:"email",className:"appearance-none relative block w-full px-3 py-2 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-gray-900 focus:border-gray-900 focus:z-10 sm:text-sm",placeholder:"Enter your email"})]}),y.email&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.email.message})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),o.jsxs("div",{className:"mt-1 relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none z-20",children:o.jsx(vo,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{...m("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),id:"password",type:t?"text":"password",autoComplete:"current-password",className:"appearance-none relative block w-full px-3 py-2 pl-10 pr-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-gray-900 focus:border-gray-900 focus:z-10 sm:text-sm",placeholder:"Enter your password"}),o.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center z-20",onClick:()=>r(!t),children:t?o.jsx(P1,{className:"h-5 w-5 text-gray-400"}):o.jsx(No,{className:"h-5 w-5 text-gray-400"})})]}),y.password&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.password.message})]})]}),o.jsx("div",{children:o.jsx(qe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:h,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-gray-900 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900 disabled:opacity-50 disabled:cursor-not-allowed",children:h?o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),o.jsx("span",{children:"Signing in..."})]}):"Sign in"})}),o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-xs text-gray-500",children:"Demo credentials: admin@carnival.com / admin123"})})]})]})})},Mm=({ticketTiers:t,eventId:r,onSave:i,onClose:a})=>{var _,M;const[c,l]=ve.useState(t||[]),[h,m]=ve.useState({name:"",price:void 0,originalPrice:void 0,capacity:void 0,soldCount:0,availableFrom:new Date,availableUntil:new Date(Date.now()+30*24*60*60*1e3),description:"",benefits:[],isActive:!0}),x=()=>{if(console.log("addTier called with newTier:",h),console.log("Validation check:",{hasName:!!h.name,hasPrice:!!h.price,hasCapacity:!!h.capacity,name:h.name,price:h.price,capacity:h.capacity}),(h.name||"").toString().trim().length>0&&h.price!==void 0&&h.price>=0&&h.capacity!==void 0&&h.capacity>0){const I={id:`tier_${Date.now()}`,eventId:r,name:h.name||"",price:(h.price||0)*100,originalPrice:h.originalPrice!==void 0?(h.originalPrice||0)*100:void 0,capacity:h.capacity||0,soldCount:0,availableFrom:h.availableFrom,availableUntil:h.availableUntil,description:h.description||"",benefits:(h.benefits||[]).filter(j=>j.trim()),isActive:h.isActive!==!1};console.log("Created tier:",I),l([...c,I]),console.log("Updated tiers array:",[...c,I]),m({name:"",price:void 0,originalPrice:void 0,capacity:void 0,soldCount:0,availableFrom:new Date,availableUntil:new Date(Date.now()+30*24*60*60*1e3),description:"",benefits:[],isActive:!0})}else console.log("Validation failed - missing required fields")},y=I=>{l(c.filter(j=>j.id!==I))},v=(I,j)=>{l(c.map(B=>B.id===I?{...B,...j}:B))},C=I=>{const j=c.find(B=>B.id===I);j&&v(I,{benefits:[...j.benefits||[],""]})},T=(I,j,B)=>{const Z=c.find(Q=>Q.id===I);if(Z){const Q=[...Z.benefits||[]];Q[j]=B,v(I,{benefits:Q})}},A=(I,j)=>{const B=c.find(Z=>Z.id===I);if(B){const Z=(B.benefits||[]).filter((Q,xe)=>xe!==j);v(I,{benefits:Z})}},D=()=>{console.log("handleSave called with tiers:",c),console.log("Tiers length:",c.length),console.log("Tiers details:",c.map(I=>({id:I.id,name:I.name,price:I.price,capacity:I.capacity}))),i(c),a()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",onClick:I=>I.stopPropagation(),children:o.jsxs(qe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:I=>I.stopPropagation(),children:[o.jsx("div",{className:"p-6 border-b",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Manage Ticket Tiers"}),o.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:o.jsx(Zs,{className:"h-6 w-6"})})]})}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add New Tier"}),o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:o.jsxs("p",{className:"text-sm text-blue-800",children:[o.jsx("strong",{children:"How it works:"}),' Create different ticket types with different prices. For example: "Early Bird" at £25, "VIP" at £50, or "Student" at £15. Set how many tickets are available for each tier.']})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tier Name"}),o.jsx("input",{type:"text",placeholder:"e.g., Early Bird, VIP, Student",value:h.name,onChange:I=>m({...h,name:I.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),o.jsx("input",{type:"number",placeholder:"e.g., 25 for £25",value:h.price??"",onChange:I=>{const j=I.target.value;m({...h,price:j===""?void 0:parseFloat(j)||0})},className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity"}),o.jsx("input",{type:"number",placeholder:"e.g., 100 tickets",value:h.capacity??"",onChange:I=>{const j=I.target.value;m({...h,capacity:j===""?void 0:parseInt(j)||0})},className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Original Price (Optional)"}),o.jsx("input",{type:"number",placeholder:"e.g., 35 for £35 (shows discount)",value:h.originalPrice??"",onChange:I=>{const j=I.target.value;m({...h,originalPrice:j===""?void 0:parseFloat(j)||0})},className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Available From"}),o.jsx("input",{type:"date",value:(_=h.availableFrom)==null?void 0:_.toISOString().split("T")[0],onChange:I=>m({...h,availableFrom:new Date(I.target.value)}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Available Until"}),o.jsx("input",{type:"date",value:(M=h.availableUntil)==null?void 0:M.toISOString().split("T")[0],onChange:I=>m({...h,availableUntil:new Date(I.target.value)}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),o.jsx("textarea",{placeholder:"Description (optional)",value:h.description,onChange:I=>m({...h,description:I.target.value}),className:"w-full mt-4 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:2}),o.jsxs("div",{className:"mt-4 flex items-center justify-end gap-4",children:[o.jsxs("label",{htmlFor:"new-tier-active",className:"inline-flex items-center gap-2 text-sm text-gray-700",children:[o.jsx("input",{id:"new-tier-active",type:"checkbox",checked:h.isActive!==!1,onChange:I=>m({...h,isActive:I.target.checked})}),"Active (allow sales)"]}),o.jsx("button",{onClick:x,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Add Tier"})]})]}),o.jsx("div",{className:"space-y-4",children:c.map(I=>o.jsxs("div",{className:"border rounded-lg p-4",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx("input",{type:"text",value:I.name,onChange:j=>v(I.id,{name:j.target.value}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),o.jsx("input",{type:"number",value:I.price/100,onChange:j=>v(I.id,{price:(parseFloat(j.target.value)||0)*100}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),o.jsx("input",{type:"number",value:I.capacity,onChange:j=>v(I.id,{capacity:parseInt(j.target.value)||0}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{className:"mt-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Benefits"}),o.jsxs("div",{className:"space-y-2",children:[(I.benefits||[]).map((j,B)=>o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",value:j,onChange:Z=>T(I.id,B,Z.target.value),placeholder:"Benefit description",className:"flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),o.jsx("button",{onClick:()=>A(I.id,B),className:"px-2 py-2 text-red-600 hover:text-red-800",children:o.jsx(Sc,{className:"h-4 w-4"})})]},B)),o.jsxs("button",{onClick:()=>C(I.id),className:"text-blue-600 hover:text-blue-800 text-sm flex items-center gap-1",children:[o.jsx(R1,{className:"h-4 w-4"}),"Add Benefit"]})]})]})]}),o.jsx("button",{onClick:()=>y(I.id),className:"ml-4 text-red-600 hover:text-red-800",children:o.jsx(Sc,{className:"h-5 w-5"})})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[o.jsxs("span",{children:["Available: ",I.capacity-I.soldCount," / ",I.capacity]}),o.jsxs("span",{children:["Price: £",(I.price/100).toFixed(2)]}),I.originalPrice&&I.originalPrice>I.price&&o.jsxs("span",{className:"line-through text-gray-400",children:["£",(I.originalPrice/100).toFixed(2)]}),o.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[I.capacity-I.soldCount<=0&&o.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-red-100 text-red-700",children:"Sold out by capacity"}),o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:I.isActive===!1,disabled:I.capacity-I.soldCount<=0,onChange:j=>v(I.id,{isActive:!j.target.checked})}),o.jsx("span",{children:"Mark as sold out (disable sales)"})]})]})]})]},I.id))}),o.jsxs("div",{className:"flex justify-end gap-4 mt-6 pt-6 border-t",children:[o.jsx("button",{onClick:a,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),o.jsx("button",{onClick:D,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Save Changes"})]})]})]})})},Pm=({event:t,onClose:r})=>{const{addEvent:i,updateEvent:a}=bs(),[c,l]=ve.useState(!1),[h,m]=ve.useState((t==null?void 0:t.ticketTiers)||[]),{register:x,handleSubmit:y,reset:v,formState:{errors:C}}=x0();ve.useEffect(()=>{t&&v({title:t.title,date:t.date,time:t.time,venue:t.venue,description:t.description,capacity:t.capacity,tags:t.tags.join(", "),gradient:t.gradient,image:t.image,bookingUrl:t.bookingUrl})},[t,v]);const T=_=>{console.log("Form submitted with ticket tiers:",h);const M=h.map(Q=>({...Q,eventId:(t==null?void 0:t.id)||"new_event"})),I=M.filter(Q=>Q.isActive!==!1&&typeof Q.price=="number"),j=I.length>0?Math.min(...I.map(Q=>Q.price)):0,B=j>0?`From £${(j/100).toFixed(0)}`:"Free",Z={..._,price:B,ticketTiers:M};console.log("Final event data to save:",Z),t?a(t.id,Z):i(Z),r()},A=_=>{console.log("Ticket tiers saved in EventForm:",_),m(_),l(!1)},D=[{value:"from-gray-600 to-gray-800",label:"Gray"},{value:"from-gray-700 to-gray-900",label:"Dark Gray"},{value:"from-gray-800 to-black",label:"Black"},{value:"from-gray-500 to-gray-700",label:"Light Gray"},{value:"from-blue-600 to-blue-800",label:"Blue"},{value:"from-green-600 to-green-800",label:"Green"},{value:"from-purple-600 to-purple-800",label:"Purple"},{value:"from-red-600 to-red-800",label:"Red"}];return o.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:r,children:[o.jsxs(qe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:_=>_.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:t?"Edit Event":"Add New Event"}),o.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(Zs,{className:"h-6 w-6"})})]}),o.jsxs("form",{onSubmit:y(T),className:"p-6 space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Title"}),o.jsx("input",{...x("title",{required:"Title is required"}),type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent",placeholder:"Enter event title"}),C.title&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:C.title.message})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[o.jsx(_n,{className:"inline h-4 w-4 mr-1"}),"Date"]}),o.jsx("input",{...x("date",{required:"Date is required"}),type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent",placeholder:"e.g., Dec 15, 2024"}),C.date&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:C.date.message})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[o.jsx(Ii,{className:"inline h-4 w-4 mr-1"}),"Time"]}),o.jsx("input",{...x("time",{required:"Time is required"}),type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent",placeholder:"e.g., 7:00 PM"}),C.time&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:C.time.message})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[o.jsx(Gs,{className:"inline h-4 w-4 mr-1"}),"Venue"]}),o.jsx("input",{...x("venue",{required:"Venue is required"}),type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent",placeholder:"Enter venue name"}),C.venue&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:C.venue.message})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[o.jsx(pn,{className:"inline h-4 w-4 mr-1"}),"Capacity"]}),o.jsx("input",{...x("capacity",{required:"Capacity is required"}),type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent",placeholder:"e.g., 200"}),C.capacity&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:C.capacity.message})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[o.jsx(B1,{className:"inline h-4 w-4 mr-1"}),"Tags (comma-separated)"]}),o.jsx("input",{...x("tags",{required:"Tags are required"}),type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent",placeholder:"e.g., Corporate, Networking, Formal"}),C.tags&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:C.tags.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color Theme"}),o.jsx("select",{...x("gradient",{required:"Gradient is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent",children:D.map(_=>o.jsx("option",{value:_.value,children:_.label},_.value))}),C.gradient&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:C.gradient.message})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Image URL"}),o.jsx("input",{...x("image",{required:"Image URL is required",pattern:{value:/^https?:\/\/.+/,message:"Please enter a valid URL starting with http:// or https://"}}),type:"url",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent",placeholder:"https://images.unsplash.com/photo-..."}),C.image&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:C.image.message}),o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Tip: You can use Picsum URLs like https://picsum.photos/800/600?random=1 or Unsplash URLs"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ticket Tiers"}),o.jsxs("button",{type:"button",onClick:()=>l(!0),className:"flex items-center gap-2 px-3 py-1 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[o.jsx(Xa,{className:"h-4 w-4"}),"Manage Tiers"]})]}),h.length>0?o.jsx("div",{className:"space-y-2",children:h.sort((_,M)=>_.price-M.price).map(_=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-900",children:_.name}),o.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:["£",(_.price/100).toFixed(2)," - ",_.capacity," available"]})]}),o.jsxs("span",{className:"text-sm text-gray-500",children:[_.capacity-_.soldCount," left"]})]},_.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:'No ticket tiers configured. Click "Manage Tiers" to add pricing options.'})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Booking URL (Optional - will be replaced by Stripe checkout)"}),o.jsx("input",{...x("bookingUrl"),type:"url",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent",placeholder:"https://example.com/book/event (optional)"}),C.bookingUrl&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:C.bookingUrl.message})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),o.jsx("textarea",{...x("description",{required:"Description is required"}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent",placeholder:"Enter event description"}),C.description&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:C.description.message})]}),o.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[o.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-gray-900 hover:bg-gray-800 text-white rounded-md transition-colors",children:t?"Update Event":"Create Event"})]})]})]},(t==null?void 0:t.id)||"new-event"),c&&o.jsx(Mm,{ticketTiers:h,eventId:(t==null?void 0:t.id)||"new_event",onSave:A,onClose:()=>l(!1)})]})},Rm=({selectedTimeframe:t,selectedEvent:r,events:i,activeTab:a,onTimeframeChange:c,onEventChange:l,onTabChange:h,onRefresh:m})=>o.jsx("div",{className:"bg-white shadow-sm border-b",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),o.jsx("p",{className:"text-gray-600 mt-1",children:"Manage analytics, events, orders, and scan tickets"})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("select",{value:t,onChange:x=>c(x.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[o.jsx("option",{value:"7d",children:"Last 7 days"}),o.jsx("option",{value:"30d",children:"Last 30 days"}),o.jsx("option",{value:"90d",children:"Last 90 days"})]}),o.jsxs("select",{value:r,onChange:x=>l(x.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[o.jsx("option",{value:"all",children:"All Events"}),i==null?void 0:i.map(x=>o.jsx("option",{value:x.id,children:x.title},x.id))]}),o.jsx("button",{onClick:m,className:"p-2 text-gray-500 hover:text-gray-700 transition-colors",children:o.jsx(u0,{className:"h-5 w-5"})})]})]}),o.jsxs("div",{className:"mt-6 flex items-center gap-2",children:[o.jsx("button",{onClick:()=>h("analytics"),className:`px-4 py-2 rounded-lg text-sm font-medium border ${a==="analytics"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"Analytics"}),o.jsx("button",{onClick:()=>h("events"),className:`px-4 py-2 rounded-lg text-sm font-medium border ${a==="events"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"Event Management"}),o.jsx("button",{onClick:()=>h("orders"),className:`px-4 py-2 rounded-lg text-sm font-medium border ${a==="orders"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"Orders"})]})]})}),Bm=({stats:t,onExportAll:r,quickEventButtons:i})=>{const a=I=>`£${(I/100).toFixed(2)}`,c=I=>`${I.toFixed(1)}%`;if(!t)return null;const l=(I,j)=>j===0?I>0?100:0:(I-j)/j*100,h=Math.floor(t.totalRevenue*(.7+Math.random()*.3)),m=Math.floor(t.totalOrders*(.6+Math.random()*.4)),x=Math.floor(t.totalTickets*(.65+Math.random()*.35)),y=t.conversionRate*(.8+Math.random()*.2),v=l(t.totalRevenue,h),C=l(t.totalOrders,m),T=l(t.totalTickets,x),A=l(t.conversionRate,y),D=I=>I>=15?"text-green-600 bg-green-100 border-green-200":I>=5?"text-blue-600 bg-blue-100 border-blue-200":I>=0?"text-yellow-600 bg-yellow-100 border-yellow-200":"text-red-600 bg-red-100 border-red-200",_=I=>I>=0?o.jsx(tu,{className:"h-4 w-4 text-green-500 mr-1"}):o.jsx(tu,{className:"h-4 w-4 text-red-500 mr-1 transform rotate-90"}),M=I=>I>=15?"Excellent Growth":I>=5?"Good Growth":I>=0?"Stable":"Declining";return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"flex items-center gap-2",children:i}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:()=>window.location.href="/scanner",className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors shadow-sm",children:[o.jsx(F1,{className:"h-4 w-4"}),"Ticket Scanner"]}),o.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors shadow-sm",children:[o.jsx(ad,{className:"h-4 w-4"}),"Export Customer Data"]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsxs(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),o.jsx("p",{className:"text-3xl font-bold text-gray-900",children:a(t.totalRevenue)})]}),o.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:o.jsx(pl,{className:"h-6 w-6 text-green-600"})})]}),o.jsxs("div",{className:"flex items-center mt-4 text-sm",children:[_(v),o.jsxs("span",{className:`font-medium px-2 py-1 rounded-full text-xs border ${D(v)}`,children:[v>=0?"+":"",c(v)]}),o.jsx("span",{className:"text-gray-500 ml-2",children:"from last period"})]}),o.jsx("div",{className:"mt-2",children:o.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${v>=15?"bg-green-100 text-green-800 border-green-200":v>=5?"bg-blue-100 text-blue-800 border-blue-200":v>=0?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-red-100 text-red-800 border-red-200"}`,children:M(v)})})]}),o.jsxs(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),o.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t.totalOrders})]}),o.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:o.jsx(Xa,{className:"h-6 w-6 text-blue-600"})})]}),o.jsxs("div",{className:"flex items-center mt-4 text-sm",children:[_(C),o.jsxs("span",{className:`font-medium px-2 py-1 rounded-full text-xs border ${D(C)}`,children:[C>=0?"+":"",c(C)]}),o.jsx("span",{className:"text-gray-500 ml-2",children:"from last period"})]}),o.jsx("div",{className:"mt-2",children:o.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${C>=15?"bg-green-100 text-green-800 border-green-200":C>=5?"bg-blue-100 text-blue-800 border-blue-200":C>=0?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-red-100 text-red-800 border-red-200"}`,children:M(C)})})]}),o.jsxs(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tickets Sold"}),o.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t.totalTickets})]}),o.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:o.jsx(pn,{className:"h-6 w-6 text-purple-600"})})]}),o.jsxs("div",{className:"flex items-center mt-4 text-sm",children:[_(T),o.jsxs("span",{className:`font-medium px-2 py-1 rounded-full text-xs border ${D(T)}`,children:[T>=0?"+":"",c(T)]}),o.jsx("span",{className:"text-gray-500 ml-2",children:"from last period"})]}),o.jsx("div",{className:"mt-2",children:o.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${T>=15?"bg-green-100 text-green-800 border-green-200":T>=5?"bg-blue-100 text-blue-800 border-blue-200":T>=0?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-red-100 text-red-800 border-red-200"}`,children:M(T)})})]}),o.jsxs(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Conversion Rate"}),o.jsx("p",{className:"text-3xl font-bold text-gray-900",children:c(t.conversionRate)})]}),o.jsx("div",{className:"p-3 bg-orange-100 rounded-full",children:o.jsx(yo,{className:"h-6 w-6 text-orange-600"})})]}),o.jsxs("div",{className:"flex items-center mt-4 text-sm",children:[_(A),o.jsxs("span",{className:`font-medium px-2 py-1 rounded-full text-xs border ${D(A)}`,children:[A>=0?"+":"",c(A)]}),o.jsx("span",{className:"text-gray-500 ml-2",children:"from last period"})]}),o.jsx("div",{className:"mt-2",children:o.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${A>=15?"bg-green-100 text-green-800 border-green-200":A>=5?"bg-blue-100 text-blue-800 border-blue-200":A>=0?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-red-100 text-red-800 border-red-200"}`,children:M(A)})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Performance Insights"}),o.jsx("div",{className:"flex gap-2",children:o.jsx("span",{className:"px-3 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full border border-green-200",children:t.topPerformingEvent?"Top Event":"No Data"})})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Average Order Value"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:a(t.averageOrderValue)})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Revenue per Ticket"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:a(t.totalRevenue/Math.max(1,t.totalTickets))})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Orders per Day"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:(t.totalOrders/30).toFixed(1)})]})]})]}),o.jsxs(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Customer Insights"}),o.jsx("div",{className:"flex gap-2",children:o.jsx("span",{className:"px-3 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full border border-blue-200",children:t.totalOrders>0?"Active":"No Orders"})})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Events with Sales"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.revenueByEvent.filter(I=>I.revenue>0).length})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Top Tier Sales"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.ticketSalesByTier.length>0?t.ticketSalesByTier[0].tier:"N/A"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Daily Revenue Avg"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:a(t.dailyRevenue.reduce((I,j)=>I+j.revenue,0)/Math.max(1,t.dailyRevenue.length))})]})]})]})]})]})},Fm=({stats:t,events:r})=>{var T,A;const i=D=>`£${(D/100).toFixed(2)}`;if(!t||!r)return null;const a=()=>{const D=new Date,_=new Date(D.getTime()+7*24*60*60*1e3);return r.filter(M=>!M.isArchived).filter(M=>{const I=new Date(M.date);return I>=D&&I<=_}).sort((M,I)=>new Date(M.date).getTime()-new Date(I.date).getTime()).slice(0,3)},c=()=>{const D=r.filter(I=>!I.isArchived);if(D.length===0)return 0;const _=D.reduce((I,j)=>I+(parseInt(j.capacity)||0),0),M=t.ticketSalesByTier.reduce((I,j)=>I+j.sold,0);return _>0?M/_*100:0},l=()=>t.ticketSalesByTier.length===0?null:t.ticketSalesByTier.sort((D,_)=>_.sold-D.sold)[0],h=()=>{const D=a();if(D.length===0)return{score:0,label:"No Events",color:"gray"};const _=c(),M=D.map(Z=>{const Q=new Date(Z.date),xe=new Date;return Math.ceil((Q.getTime()-xe.getTime())/(1e3*60*60*24))});let I=0;_>=80?I+=40:_>=60?I+=30:_>=40?I+=20:I+=10;const j=M.reduce((Z,Q)=>Z+Q,0)/M.length;j<=3?I+=30:j<=7?I+=25:j<=14?I+=20:I+=15;const B=t.dailyRevenue.slice(-7).reduce((Z,Q)=>Z+Q.revenue,0);return B>=1e4?I+=30:B>=5e3?I+=25:B>=1e3?I+=20:I+=10,I>=80?{score:I,label:"Excellent",color:"green"}:I>=60?{score:I,label:"Good",color:"blue"}:I>=40?{score:I,label:"Fair",color:"yellow"}:{score:I,label:"Needs Attention",color:"red"}},m=a(),x=c(),y=l(),v=h(),C=D=>{switch(D){case"green":return o.jsx(Zn,{className:"h-5 w-5 text-green-600"});case"blue":return o.jsx(yo,{className:"h-5 w-5 text-blue-600"});case"yellow":return o.jsx(Cc,{className:"h-5 w-5 text-yellow-600"});case"red":return o.jsx(Cc,{className:"h-5 w-5 text-red-600"});default:return o.jsx(Ii,{className:"h-5 w-5 text-gray-600"})}};return o.jsx("div",{className:"space-y-8",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8 mb-8",children:[o.jsxs(qe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Event Performance"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(_n,{className:"h-5 w-5 text-blue-600"}),o.jsx("span",{className:"px-3 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full border border-blue-200",children:"Live Data"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-100",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:o.jsx(_n,{className:"h-4 w-4 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Upcoming Events"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Next 7 days"})]})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-blue-900",children:m.length}),m.length>0&&o.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[(A=(T=m[0])==null?void 0:T.title)==null?void 0:A.slice(0,15),"..."]})]})]}),o.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-100",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:o.jsx(pn,{className:"h-4 w-4 text-green-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Capacity"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Utilization"})]})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("p",{className:"text-2xl font-bold text-green-900",children:[x.toFixed(0),"%"]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1 mt-2",children:o.jsx("div",{className:"bg-gradient-to-r from-green-400 to-green-600 h-1 rounded-full transition-all duration-300",style:{width:`${Math.min(x,100)}%`}})})]})]}),o.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-100",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("div",{className:"p-2 bg-purple-100 rounded-full",children:o.jsx(Ec,{className:"h-4 w-4 text-purple-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Best Selling"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Ticket Tier"})]})]}),o.jsx("div",{className:"text-center",children:y?o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-lg font-bold text-purple-900",children:y.tier.split(" - ")[1]}),o.jsxs("p",{className:"text-xs text-purple-600 mt-1",children:[y.sold," sold"]})]}):o.jsx("p",{className:"text-lg font-bold text-gray-400",children:"No sales yet"})})]}),o.jsxs("div",{className:"p-4 bg-orange-50 rounded-lg border border-orange-100",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("div",{className:"p-2 bg-orange-100 rounded-full",children:C(v.color)}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Event Health"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Score"})]})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-lg font-bold text-orange-900",children:v.label}),o.jsxs("p",{className:"text-xs text-orange-600 mt-1",children:[v.score,"/100"]})]})]})]}),o.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100",children:o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsxs("span",{className:`px-3 py-1 text-xs font-medium rounded-full border ${x>=80?"bg-green-100 text-green-800 border-green-200":x>=60?"bg-blue-100 text-blue-800 border-blue-200":x>=40?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-red-100 text-red-800 border-red-200"}`,children:[x.toFixed(0),"% Capacity Filled"]}),o.jsxs("span",{className:"px-3 py-1 text-xs font-medium bg-purple-100 text-purple-800 rounded-full border border-purple-200",children:[t.ticketSalesByTier.filter(D=>D.revenue>0).length," Active Tiers"]})]})})]}),o.jsxs(qe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.6},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Business Insights"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(yo,{className:"h-5 w-5 text-gray-400"}),o.jsx("span",{className:"px-3 py-1 text-xs font-medium bg-indigo-100 text-indigo-800 rounded-full border border-indigo-200",children:"Live Data"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-100",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:o.jsx(pn,{className:"h-5 w-5 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Customer Acquisition"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Last 30 days"})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-lg font-bold text-blue-900",children:t.ticketSalesByTier.reduce((D,_)=>D+_.sold,0)}),o.jsx("p",{className:"text-xs text-blue-600",children:"New customers"})]})]})}),o.jsx("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-100",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:o.jsx(yo,{className:"h-5 w-5 text-green-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Revenue per Customer"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Average"})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-lg font-bold text-green-900",children:i(t.ticketSalesByTier.reduce((D,_)=>D+_.revenue,0)/Math.max(1,t.ticketSalesByTier.reduce((D,_)=>D+_.sold,0)))}),o.jsx("p",{className:"text-xs text-green-600",children:"Per customer"})]})]})}),o.jsx("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg border border-purple-100",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-purple-100 rounded-full",children:o.jsx(_n,{className:"h-5 w-5 text-purple-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Event Performance"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Success Rate"})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"text-lg font-bold text-purple-900",children:[t.revenueByEvent.filter(D=>D.revenue>0).length,"/",t.revenueByEvent.length]}),o.jsx("p",{className:"text-xs text-purple-600",children:"Events with sales"})]})]})})]})]})]})})},Um=({currentEvents:t,archivedEvents:r,onAddEvent:i,onEditEvent:a,onArchiveToggle:c,onDeleteEvent:l,onGuestlist:h})=>{const m=(x,y=!1)=>o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Event"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Venue"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tiers"}),o.jsx("th",{className:"px-6 py-3"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(v=>{var C;return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm font-medium text-gray-900 truncate max-w-[220px]",children:v.title})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:v.date}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 truncate max-w-[180px]",children:v.venue}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((C=v.ticketTiers)==null?void 0:C.length)||0}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center justify-end gap-2",children:[o.jsxs("button",{onClick:()=>h(v),className:"px-3 py-1 rounded-md border border-blue-200 text-blue-700 hover:bg-blue-50 flex items-center gap-1",children:[o.jsx(pn,{className:"h-4 w-4"}),"Guestlist"]}),o.jsx("button",{onClick:()=>a(v),className:"px-3 py-1 rounded-md border text-gray-700 hover:bg-gray-50",children:"Edit"}),o.jsx("button",{onClick:()=>c(v),className:"px-3 py-1 rounded-md border text-gray-700 hover:bg-gray-50",children:y?"Unarchive":"Archive"}),y&&o.jsx("button",{onClick:()=>l(v),className:"px-3 py-1 rounded-md border border-red-200 text-red-700 hover:bg-red-50",children:"Delete"})]})})]},v.id)})})]})})});return o.jsxs("div",{className:"space-y-10",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Manage Events"}),o.jsx("button",{onClick:i,className:"px-4 py-2 bg-gray-900 hover:bg-gray-800 text-white rounded-md text-sm",children:"Add Event"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h4",{className:"text-md font-semibold text-gray-800",children:"Current Events"}),o.jsxs("span",{className:"text-sm text-gray-500",children:[t.length," events"]})]}),m(t,!1)]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h4",{className:"text-md font-semibold text-gray-800",children:"Archived Events"}),o.jsxs("span",{className:"text-sm text-gray-500",children:[r.length," events"]})]}),m(r,!0)]})]})},zm=({orders:t,events:r})=>{const[i,a]=ve.useState(""),[c,l]=ve.useState(10),[h,m]=ve.useState(1),x=I=>`£${(I/100).toFixed(2)}`,y=I=>{if(!I.scans||I.scans.length===0)return{text:"Not Scanned",color:"text-gray-500",icon:Ii};const j=I.scans.filter(Q=>Q.scanType==="entry"),B=I.scans.filter(Q=>Q.scanType==="exit"),Z=I.scans[0];return j.length>0&&B.length>0?{text:"Scanned In & Out",color:"text-blue-600",icon:Zn,time:new Date(Z.scannedAt).toLocaleTimeString()}:j.length>0?{text:"Scanned In",color:"text-green-600",icon:Zn,time:new Date(Z.scannedAt).toLocaleTimeString()}:B.length>0?{text:"Scanned Out",color:"text-orange-600",icon:Ao,time:new Date(Z.scannedAt).toLocaleTimeString()}:{text:"Not Scanned",color:"text-gray-500",icon:Ii}},v=t.filter(I=>{var B,Z,Q,xe,$;if(!i.trim())return!0;const j=i.toLowerCase();return((B=I.customerName)==null?void 0:B.toLowerCase().includes(j))||((Z=I.customerEmail)==null?void 0:Z.toLowerCase().includes(j))||((Q=I.id)==null?void 0:Q.toLowerCase().includes(j))||(($=(xe=r==null?void 0:r.find(ie=>ie.id===I.eventId))==null?void 0:xe.title)==null?void 0:$.toLowerCase().includes(j))}),C=Math.ceil(v.length/c),T=(h-1)*c,A=T+c,D=v.slice(T,A),_=I=>{m(I)},M=I=>{l(I),m(1)};return!t||t.length===0?o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 text-center",children:o.jsx("p",{className:"text-gray-500",children:"No orders to display"})}):o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[o.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"All Orders"}),o.jsx("div",{className:"flex items-center gap-3",children:o.jsxs("div",{className:"relative",children:[o.jsx(h0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Search orders...",value:i,onChange:I=>{a(I.target.value),m(1)},className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-64"})]})})]})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Event"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tickets"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Scan Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(I=>{var Z,Q,xe;const j=y(I),B=j.icon;return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("span",{className:"text-sm font-medium text-gray-900 font-mono",children:[(Z=I.id)==null?void 0:Z.slice(0,8),"..."]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:I.customerName}),o.jsx("div",{className:"text-sm text-gray-500",children:I.customerEmail})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:((Q=r==null?void 0:r.find($=>$.id===I.eventId))==null?void 0:Q.title)||"Unknown Event"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:((xe=I.tickets)==null?void 0:xe.reduce(($,ie)=>$+(ie.quantity||0),0))||0}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:x(I.totalAmount||0)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${I.status==="completed"?"bg-green-100 text-green-800":I.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:I.status})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsxs("div",{className:`flex items-center gap-1 ${j.color}`,children:[o.jsx(B,{className:"h-4 w-4"}),o.jsx("span",{className:"text-xs font-medium",children:j.text})]}),j.time&&o.jsx("span",{className:"text-xs text-gray-500",children:j.time})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(I.createdAt).toLocaleDateString()})]},I.id)})})]})}),o.jsx("div",{className:"px-6 py-4 border-t border-gray-100",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-sm text-gray-600",children:"Show:"}),o.jsxs("select",{value:c,onChange:I=>M(Number(I.target.value)),className:"px-3 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:5,children:"5"}),o.jsx("option",{value:10,children:"10"}),o.jsx("option",{value:25,children:"25"}),o.jsx("option",{value:50,children:"50"})]}),o.jsx("span",{className:"text-sm text-gray-600",children:"records"})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",T+1," to ",Math.min(A,v.length)," of ",v.length," results",i&&o.jsxs("span",{className:"ml-2 text-blue-600",children:["(filtered from ",t.length," total)"]})]}),C>1&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>_(h-1),disabled:h===1,className:"px-3 py-1 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),o.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:C},(I,j)=>j+1).map(I=>o.jsx("button",{onClick:()=>_(I),className:`px-3 py-1 text-sm font-medium rounded-md ${I===h?"bg-blue-600 text-white":"text-gray-500 bg-white border border-gray-300 hover:bg-gray-50"}`,children:I},I))}),o.jsx("button",{onClick:()=>_(h+1),disabled:h===C,className:"px-3 py-1 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})})]})},qm=({orders:t,events:r})=>{const i=a=>`£${(a/100).toFixed(2)}`;return!t||t.length===0?o.jsx(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 text-center",children:o.jsx("p",{className:"text-gray-500",children:"No recent orders to display"})}):o.jsxs(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[o.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Orders"})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),o.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Event"}),o.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),o.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(a=>{var c,l;return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:o.jsxs("span",{className:"text-sm font-medium text-gray-900 font-mono",children:[(c=a.id)==null?void 0:c.slice(0,8),"..."]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.customerName}),o.jsx("div",{className:"text-sm text-gray-500",children:a.customerEmail})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:o.jsx("span",{className:"text-sm text-gray-900",children:((l=r==null?void 0:r.find(h=>h.id===a.eventId))==null?void 0:l.title)||"Unknown Event"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:o.jsx("span",{className:"text-sm font-semibold text-gray-900",children:i(a.totalAmount||0)})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${a.status==="completed"?"bg-green-100 text-green-800":a.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:a.status})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center",children:new Date(a.createdAt).toLocaleDateString()})]},a.id)})})]})})]})},Hm=({creatingEvents:t,onCreateEvent:r})=>o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>r("sundowner"),disabled:t.includes("sundowner"),className:"px-3 py-2 bg-gradient-to-r from-orange-400 to-red-500 text-white text-sm font-medium rounded-lg hover:from-orange-500 hover:to-red-600 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:t.includes("sundowner")?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Creating..."]}):o.jsx(o.Fragment,{children:"🌅 Add Sundowner"})}),o.jsx("button",{onClick:()=>r("bollywood"),disabled:t.includes("bollywood"),className:"px-3 py-2 bg-gradient-to-r from-purple-400 to-pink-500 text-white text-sm font-medium rounded-lg hover:from-purple-500 hover:to-pink-600 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:t.includes("bollywood")?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Creating..."]}):o.jsx(o.Fragment,{children:"🎭 Add Bollywood Night"})}),o.jsx("button",{onClick:()=>r("carnival"),disabled:t.includes("carnival"),className:"px-3 py-2 bg-gradient-to-r from-green-400 to-blue-500 text-white text-sm font-medium rounded-lg hover:from-green-500 hover:to-blue-600 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:t.includes("carnival")?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Creating..."]}):o.jsx(o.Fragment,{children:"🎪 Add Carnival"})})]}),Vm=({confirm:t,onClose:r,onConfirm:i})=>t?o.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:r,children:o.jsxs("div",{className:"bg-white rounded-xl w-full max-w-md p-6 text-center",onClick:a=>a.stopPropagation(),children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t.type==="delete"?"Delete Event":t.event.isArchived?"Unarchive Event":"Archive Event"}),o.jsx("p",{className:"text-sm text-gray-600 mb-6",children:t.type==="delete"?"This will permanently delete the event and related data (if archived). This action cannot be undone.":t.event.isArchived?"This will unarchive the event and make it visible again.":"This will archive the event and hide it from public view."}),o.jsxs("div",{className:"flex items-center justify-center gap-3",children:[o.jsx("button",{onClick:r,className:"px-4 py-2 rounded-md border text-gray-700",children:"Cancel"}),o.jsx("button",{onClick:i,className:`px-4 py-2 rounded-md text-white ${t.type==="delete"?"bg-red-600 hover:bg-red-700":"bg-gray-900 hover:bg-gray-800"}`,children:t.type==="delete"?"Delete":t.event.isArchived?"Unarchive":"Archive"})]})]})}):null,Gm=({order:t,event:r,isOpen:i,onClose:a})=>{var C,T;if(!t||!r)return null;const c=A=>`£${(A/100).toFixed(2)}`,l=A=>(typeof A=="string"?new Date(A):A).toLocaleDateString("en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),h=A=>(typeof A=="string"?new Date(A):A).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),m=A=>{const D=new Date(A),_=new Date;let M=_.getFullYear()-D.getFullYear();const I=_.getMonth()-D.getMonth();return(I<0||I===0&&_.getDate()<D.getDate())&&M--,M},y=(()=>{if(!t.scans||t.scans.length===0)return{text:"Not Scanned",color:"text-gray-500",icon:Ii};const A=t.scans.filter(M=>M.scanType==="entry"),D=t.scans.filter(M=>M.scanType==="exit"),_=t.scans[0];return A.length>0&&D.length>0?{text:"Scanned In & Out",color:"text-blue-600",icon:Zn,time:new Date(_.scannedAt).toLocaleTimeString()}:A.length>0?{text:"Scanned In",color:"text-green-600",icon:Zn,time:new Date(_.scannedAt).toLocaleTimeString()}:D.length>0?{text:"Scanned Out",color:"text-orange-600",icon:Ao,time:new Date(_.scannedAt).toLocaleTimeString()}:{text:"Not Scanned",color:"text-gray-500",icon:Ii}})(),v=y.icon;return o.jsx(nd,{children:i&&o.jsx(qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",onClick:a,children:o.jsxs(qe.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:A=>A.stopPropagation(),children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:o.jsx(Xa,{className:"h-6 w-6"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Order Details"}),o.jsxs("p",{className:"text-blue-100",children:["Order ID: ",(C=t.id)==null?void 0:C.slice(0,8),"..."]})]})]}),o.jsx("button",{onClick:a,className:"w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center hover:bg-white hover:bg-opacity-30 transition-colors",children:o.jsx(Zs,{className:"h-5 w-5"})})]})}),o.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[o.jsx(f0,{className:"h-5 w-5 text-blue-600"}),"Order Information"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Status:"}),o.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full border ${t.status==="completed"?"bg-green-100 text-green-800 border-green-200":t.status==="pending"?"bg-yellow-100 text-yellow-800 border-yellow-200":t.status==="failed"?"bg-red-100 text-red-800 border-red-200":"bg-gray-100 text-gray-800 border-gray-200"}`,children:t.status||"N/A"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Total Amount:"}),o.jsx("span",{className:"font-semibold text-gray-900",children:c(t.totalAmount||0)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Currency:"}),o.jsx("span",{className:"text-gray-900",children:((T=t.currency)==null?void 0:T.toUpperCase())||"GBP"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Order Date:"}),o.jsx("span",{className:"text-gray-900",children:l(t.createdAt)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Order Time:"}),o.jsx("span",{className:"text-gray-900",children:h(t.createdAt)})]}),t.stripePaymentIntentId&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Payment ID:"}),o.jsxs("span",{className:"text-gray-900 font-mono text-sm",children:[t.stripePaymentIntentId.slice(0,20),"..."]})]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[o.jsx(g0,{className:"h-5 w-5 text-green-600"}),"Customer Information"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Name:"}),o.jsx("span",{className:"font-semibold text-gray-900",children:t.customerName||"N/A"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Email:"}),o.jsx("span",{className:"text-gray-900",children:t.customerEmail||"N/A"})]}),t.customerPhone&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Phone:"}),o.jsx("span",{className:"text-gray-900",children:t.customerPhone})]}),t.customerDateOfBirth&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Date of Birth:"}),o.jsx("span",{className:"text-gray-900",children:l(t.customerDateOfBirth)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Age:"}),o.jsxs("span",{className:"text-gray-900",children:[m(t.customerDateOfBirth)," years old"]})]})]}),t.customerGender&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Gender:"}),o.jsx("span",{className:"text-gray-900",children:t.customerGender==="prefer_not_to_say"?"Prefer not to say":t.customerGender.charAt(0).toUpperCase()+t.customerGender.slice(1)})]})]})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[o.jsx(_n,{className:"h-5 w-5 text-purple-600"}),"Event Information"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Event:"}),o.jsx("span",{className:"font-semibold text-gray-900",children:r.title})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Date:"}),o.jsx("span",{className:"text-gray-900",children:r.date})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Time:"}),o.jsx("span",{className:"text-gray-900",children:r.time})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Venue:"}),o.jsx("span",{className:"text-gray-900",children:r.venue})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Capacity:"}),o.jsxs("span",{className:"text-gray-900",children:[r.capacity," people"]})]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[o.jsx(Xa,{className:"h-5 w-5 text-orange-600"}),"Ticket Details"]}),t.tickets&&t.tickets.length>0?o.jsx("div",{className:"space-y-3",children:t.tickets.map((A,D)=>{var M;const _=(M=r.ticketTiers)==null?void 0:M.find(I=>I.id===A.ticketTierId);return o.jsxs("div",{className:"p-3 bg-white rounded-lg border border-gray-200",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("span",{className:"font-medium text-gray-900",children:(_==null?void 0:_.name)||"Unknown Tier"}),o.jsxs("span",{className:"text-sm text-gray-500",children:["#",D+1]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Quantity:"}),o.jsx("span",{className:"text-gray-900",children:A.quantity})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Unit Price:"}),o.jsx("span",{className:"text-gray-900",children:_?c(_.price):"N/A"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Total Price:"}),o.jsx("span",{className:"font-semibold text-gray-900",children:c(A.totalPrice||0)})]})]})]},D)})}):o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No ticket information available"})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[o.jsx(v,{className:"h-5 w-5 text-blue-600"}),"Scan Status"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-600",children:"Status:"}),o.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full border ${y.color==="text-green-600"?"bg-green-100 text-green-800 border-green-200":y.color==="text-blue-600"?"bg-blue-100 text-blue-800 border-blue-200":y.color==="text-orange-600"?"bg-orange-100 text-orange-800 border-orange-200":"bg-gray-100 text-gray-800 border-gray-200"}`,children:y.text})]}),t.scans&&t.scans.length>0&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Total Scans:"}),o.jsx("span",{className:"text-gray-900",children:t.scans.length})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Last Scan:"}),o.jsxs("span",{className:"text-gray-900",children:[l(t.scans[0].scannedAt)," at ",h(t.scans[0].scannedAt)]})]}),t.scans[0].scannedBy&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Scanned By:"}),o.jsx("span",{className:"text-gray-900",children:t.scans[0].scannedBy})]}),t.scans[0].location&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Location:"}),o.jsx("span",{className:"text-gray-900",children:t.scans[0].location})]})]})]})]})]})]})}),o.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:o.jsx("div",{className:"flex justify-end gap-3",children:o.jsx("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Close"})})})]})})})},Wm=({events:t,orders:r,selectedEvent:i,onExportEventData:a})=>{var Ie;const[c,l]=ve.useState(1),[h,m]=ve.useState(5),[x,y]=ve.useState(""),[v,C]=ve.useState(null),[T,A]=ve.useState(!1),D=se=>`£${(se/100).toFixed(2)}`,_=se=>`${se.toFixed(1)}%`,M=t.find(se=>se.id===i);if(!M)return null;const I=r.filter(se=>se.eventId===i);console.log("🔍 EventSpecificStats Debug:",{selectedEvent:i,totalOrders:r.length,eventOrdersCount:I.length,sampleOrder:I[0],ordersWithAge:I.filter(se=>se.customerDateOfBirth).length,ordersWithGender:I.filter(se=>se.customerGender).length});const j=I.filter(se=>{var Ge,O,W;if(!x.trim())return!0;const be=x.toLowerCase();return((Ge=se.customerName)==null?void 0:Ge.toLowerCase().includes(be))||((O=se.customerEmail)==null?void 0:O.toLowerCase().includes(be))||((W=se.id)==null?void 0:W.toLowerCase().includes(be))}),B=se=>{if(!se.scans||se.scans.length===0)return{text:"Not Scanned",color:"text-gray-500",icon:Ii};const be=se.scans.filter(W=>W.scanType==="entry"),Ge=se.scans.filter(W=>W.scanType==="exit"),O=se.scans[0];return be.length>0&&Ge.length>0?{text:"Scanned In & Out",color:"text-blue-600",icon:Zn,time:new Date(O.scannedAt).toLocaleTimeString()}:be.length>0?{text:"Scanned In",color:"text-green-600",icon:Zn,time:new Date(O.scannedAt).toLocaleTimeString()}:Ge.length>0?{text:"Scanned Out",color:"text-orange-600",icon:Ao,time:new Date(O.scannedAt).toLocaleTimeString()}:{text:"Not Scanned",color:"text-gray-500",icon:Ii}},Z={totalRevenue:I.reduce((se,be)=>se+(be.totalAmount||0),0),totalOrders:I.length,totalTickets:I.reduce((se,be)=>{var Ge;return se+(((Ge=be.tickets)==null?void 0:Ge.reduce((O,W)=>O+(W.quantity||0),0))||0)},0),capacity:parseInt(M.capacity||"0"),utilizationRate:parseInt(M.capacity||"0")>0?I.reduce((se,be)=>{var Ge;return se+(((Ge=be.tickets)==null?void 0:Ge.reduce((O,W)=>O+(W.quantity||0),0))||0)},0)/parseInt(M.capacity||"0")*100:0},Q=((Ie=M.ticketTiers)==null?void 0:Ie.map(se=>{const be=I.filter(W=>{var K;return(K=W.tickets)==null?void 0:K.some(ue=>ue.ticketTierId===se.id)}),Ge=be.reduce((W,K)=>{var ae;const ue=((ae=K.tickets)==null?void 0:ae.filter(Ee=>Ee.ticketTierId===se.id))||[];return W+ue.reduce((Ee,Ae)=>Ee+(Ae.totalPrice||0),0)},0),O=be.reduce((W,K)=>{var ae;const ue=((ae=K.tickets)==null?void 0:ae.filter(Ee=>Ee.ticketTierId===se.id))||[];return W+ue.reduce((Ee,Ae)=>Ee+(Ae.quantity||0),0)},0);return{name:se.name,sold:O,capacity:se.capacity,revenue:Ge,utilizationRate:se.capacity>0?O/se.capacity*100:0,revenuePerTicket:O>0?Ge/O:0}}).sort((se,be)=>be.revenue-se.revenue))||[],xe=se=>se>=80?"bg-green-100 text-green-800 border-green-200":se>=50?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-red-100 text-red-800 border-red-200",$=()=>{if(I.length===0)return{date:"N/A",revenue:0};const se=I.reduce((Ge,O)=>{const W=new Date(O.createdAt).toDateString();return Ge[W]=(Ge[W]||0)+(O.totalAmount||0),Ge},{}),be=Object.entries(se).reduce((Ge,[O,W])=>W>Ge.revenue?{date:O,revenue:W}:Ge,{date:"",revenue:0});return{date:be.date?new Date(be.date).toLocaleDateString("en-GB",{month:"short",day:"numeric"}):"N/A",revenue:be.revenue}},ie=()=>I.length===0?0:new Set(I.map(be=>new Date(be.createdAt).toDateString())).size,ce=Math.ceil(j.length/h),De=(c-1)*h,Y=De+h,V=j.slice(De,Y),oe=se=>{l(se)},le=se=>{m(se),l(1)},ne=se=>{C(se),A(!0)},Te=()=>{A(!1),C(null)},Se=()=>{const se=I.map(be=>{var O;return((O=be.tickets)==null?void 0:O.map(W=>{var Ee,Ae;const K=(Ee=M.ticketTiers)==null?void 0:Ee.find(ke=>ke.id===W.ticketTierId),ue=B(be),ae=be.scans&&be.scans.length>0?new Date(be.scans[0].scannedAt).toLocaleString():"Never";return{"Order ID":((Ae=be.id)==null?void 0:Ae.slice(0,8))||"N/A","Customer Name":be.customerName||"N/A","Customer Email":be.customerEmail||"N/A","Ticket Tier":(K==null?void 0:K.name)||"Unknown Tier",Quantity:W.quantity||0,"Unit Price":K?`£${(K.price/100).toFixed(2)}`:"N/A","Total Price":`£${((W.totalPrice||0)/100).toFixed(2)}`,"Order Status":be.status||"N/A","Scan Status":ue.text,"Last Scan Time":ae,"Order Date":new Date(be.createdAt).toLocaleDateString(),"Order Time":new Date(be.createdAt).toLocaleTimeString()}}))||[]}).flat();if(se.length>0){const be=["Order ID,Customer Name,Customer Email,Ticket Tier,Quantity,Unit Price,Total Price,Order Status,Scan Status,Last Scan Time,Order Date,Order Time",...se.map(K=>`${K["Order ID"]},${K["Customer Name"]},${K["Customer Email"]},${K["Ticket Tier"]},${K.Quantity},${K["Unit Price"]},${K["Total Price"]},${K["Order Status"]},${K["Scan Status"]},${K["Last Scan Time"]},${K["Order Date"]},${K["Order Time"]}`)].join(`
`),Ge=new Blob([be],{type:"text/csv;charset=utf-8;"}),O=document.createElement("a"),W=URL.createObjectURL(Ge);O.setAttribute("href",W),O.setAttribute("download",`event-sales-${M.title.replace(/[^a-z0-9]/gi,"-").toLowerCase()}-${new Date().toISOString().split("T")[0]}.csv`),O.style.visibility="hidden",document.body.appendChild(O),O.click(),document.body.removeChild(O)}};return o.jsxs("div",{className:"space-y-8",children:[o.jsxs(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-16 h-16 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:o.jsx(_n,{className:"h-8 w-8 text-white"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:M.title}),o.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-600",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(_n,{className:"h-4 w-4"}),o.jsx("span",{children:M.date})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Gs,{className:"h-4 w-4"}),o.jsx("span",{children:M.venue})]})]})]})]}),o.jsx("button",{onClick:()=>a(i),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors shadow-sm",children:"Export Event Data"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("span",{className:"px-3 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full border border-green-200",children:"Active Sales"}),o.jsxs("span",{className:`px-3 py-1 text-xs font-medium rounded-full border ${xe(Z.utilizationRate)}`,children:[_(Z.utilizationRate)," Capacity Used"]}),o.jsxs("span",{className:"px-3 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full border border-blue-200",children:[Z.totalOrders," Orders"]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:D(Z.totalRevenue)})]}),o.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:o.jsx(pl,{className:"h-5 w-5 text-green-600"})})]})}),o.jsx(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tickets Sold"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Z.totalTickets})]}),o.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:o.jsx(pn,{className:"h-5 w-5 text-blue-600"})})]})}),o.jsx(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Capacity Used"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_(Z.utilizationRate)})]}),o.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:o.jsx(_n,{className:"h-5 w-5 text-purple-600"})})]})}),o.jsx(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Performance"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Z.utilizationRate>=80?"Excellent":Z.utilizationRate>=50?"Good":Z.utilizationRate>=20?"Fair":"Poor"})]}),o.jsx("div",{className:"p-3 bg-orange-100 rounded-full",children:o.jsx(Ec,{className:"h-5 w-5 text-orange-600"})})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Age Distribution"}),(()=>{const se={"18-24":0,"25-34":0,"35-44":0,"45+":0};I.forEach(O=>{if(O.customerDateOfBirth){const W=new Date(O.customerDateOfBirth),K=new Date;let ue=K.getFullYear()-W.getFullYear();const ae=K.getMonth()-W.getMonth();(ae<0||ae===0&&K.getDate()<W.getDate())&&ue--,ue>=18&&ue<=24?se["18-24"]++:ue>=25&&ue<=34?se["25-34"]++:ue>=35&&ue<=44?se["35-44"]++:ue>=45&&se["45+"]++}});const be=["#3B82F6","#10B981","#F59E0B","#EF4444"],Ge=Object.values(se).reduce((O,W)=>O+W,0);return Ge>0?o.jsxs("div",{className:"flex gap-8 items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsxs("div",{className:"relative w-56 h-56",children:[o.jsx("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 100 100",children:Object.entries(se).map(([O,W],K)=>{const ue=Ge>0?W/Ge*100:0,ae=2*Math.PI*45,Ee=`${ue/100*ae} ${ae}`,Ae=K===0?0:Object.entries(se).slice(0,K).reduce((ke,[ze,Be])=>ke+Be/Ge*100,0)*ae/100;return o.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:be[K],strokeWidth:"8",strokeDasharray:Ee,strokeDashoffset:-Ae,className:`transition-all duration-300 hover:stroke-width-10 ${W===0?"opacity-30":""}`},O)})}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-3xl font-bold text-gray-900",children:Ge}),o.jsx("div",{className:"text-sm text-gray-600",children:"Customers"})]})})]})}),o.jsx("div",{className:"flex-1 space-y-2",children:Object.entries(se).map(([O,W],K)=>{const ue=Ge>0?W/Ge*100:0;return o.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg ${W===0?"bg-gray-100 opacity-60":"bg-gray-50"}`,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:be[K]}}),o.jsx("span",{className:`text-sm font-medium ${W===0?"text-gray-500":"text-gray-700"}`,children:O})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:`text-sm font-bold ${W===0?"text-gray-400":"text-gray-900"}`,children:W}),o.jsxs("div",{className:`text-xs ${W===0?"text-gray-400":"text-gray-500"}`,children:[ue.toFixed(1),"%"]})]})]},O)})})]}):o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(pn,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),o.jsx("p",{children:"No age data available"})]})})()]}),o.jsxs(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Gender Distribution"}),(()=>{const se={male:0,female:0,other:0,prefer_not_to_say:0};I.forEach(O=>{O.customerGender&&se[O.customerGender]++});const be=["#3B82F6","#EC4899","#10B981","#6B7280"],Ge=Object.values(se).reduce((O,W)=>O+W,0);return Ge>0?o.jsxs("div",{className:"flex gap-8 items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsxs("div",{className:"relative w-56 h-56",children:[o.jsx("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 100 100",children:Object.entries(se).map(([O,W],K)=>{const ue=Ge>0?W/Ge*100:0,ae=2*Math.PI*45,Ee=`${ue/100*ae} ${ae}`,Ae=K===0?0:Object.entries(se).slice(0,K).reduce((ke,[ze,Be])=>ke+Be/Ge*100,0)*ae/100;return o.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:be[K],strokeWidth:"8",strokeDasharray:Ee,strokeDashoffset:-Ae,className:`transition-all duration-300 hover:stroke-width-10 ${W===0?"opacity-30":""}`},O)})}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-3xl font-bold text-gray-900",children:Ge}),o.jsx("div",{className:"text-sm text-gray-600",children:"Customers"})]})})]})}),o.jsx("div",{className:"flex-1 space-y-2",children:Object.entries(se).map(([O,W],K)=>{const ue=Ge>0?W/Ge*100:0,ae=O==="prefer_not_to_say"?"Prefer not to say":O.charAt(0).toUpperCase()+O.slice(1);return o.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg ${W===0?"bg-gray-100 opacity-60":"bg-gray-50"}`,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:be[K]}}),o.jsx("span",{className:`text-sm font-medium ${W===0?"text-gray-500":"text-gray-700"}`,children:ae})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:`text-sm font-bold ${W===0?"text-gray-400":"text-gray-900"}`,children:W}),o.jsxs("div",{className:`text-xs ${W===0?"text-gray-400":"text-gray-500"}`,children:[ue.toFixed(1),"%"]})]})]},O)})})]}):o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(pn,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),o.jsx("p",{children:"No gender data available"})]})})()]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Ticket Tier Performance"}),Q.length>0?o.jsx("div",{className:"space-y-4",children:Q.map((se,be)=>o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${be===0?"bg-yellow-100 text-yellow-800 border border-yellow-200":be===1?"bg-gray-100 text-gray-800 border border-gray-200":be===2?"bg-orange-100 text-orange-800 border border-orange-200":"bg-blue-100 text-blue-800 border border-blue-200"}`,children:be+1}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-gray-900",children:se.name}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsxs("span",{className:"text-xs text-gray-500",children:[se.sold,"/",se.capacity," tickets"]}),o.jsxs("span",{className:`px-2 py-1 text-xs rounded-full border ${xe(se.utilizationRate)}`,children:[_(se.utilizationRate)," full"]})]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("span",{className:"text-sm font-semibold text-gray-900",children:D(se.revenue)}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[D(se.revenuePerTicket)," per ticket"]})]})]},be))}):o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(Ec,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),o.jsx("p",{children:"No tier data available"})]})]}),o.jsxs(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Event Insights"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(yo,{className:"h-5 w-5 text-gray-400"}),o.jsx("span",{className:"px-3 py-1 text-xs font-medium bg-indigo-100 text-indigo-800 rounded-full border border-indigo-200",children:"Analytics"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-100",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:o.jsx(pn,{className:"h-5 w-5 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Average Order Value"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Per transaction"})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-lg font-bold text-blue-900",children:D(Z.totalOrders>0?Z.totalRevenue/Z.totalOrders:0)}),o.jsx("p",{className:"text-xs text-blue-600",children:"Per order"})]})]})}),o.jsx("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-100",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:o.jsx(pl,{className:"h-5 w-5 text-green-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Revenue per Ticket"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Average"})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-lg font-bold text-green-900",children:D(Z.totalTickets>0?Z.totalRevenue/Z.totalTickets:0)}),o.jsx("p",{className:"text-xs text-green-600",children:"Per ticket"})]})]})}),o.jsx("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg border border-purple-100",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-purple-100 rounded-full",children:o.jsx(_n,{className:"h-5 w-5 text-purple-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Peak Sales Day"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Best performance"})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-lg font-bold text-purple-900",children:$().date}),o.jsx("p",{className:"text-xs text-purple-600",children:D($().revenue)})]})]})})]}),o.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100",children:o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsxs("span",{className:`px-3 py-1 text-xs font-medium rounded-full border ${ie()>=20?"bg-green-100 text-green-800 border-green-200":ie()>=15?"bg-blue-100 text-blue-800 border-blue-200":ie()>=10?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-red-100 text-red-800 border-red-200"}`,children:[ie()," Active Days"]}),o.jsxs("span",{className:"px-3 py-1 text-xs font-medium bg-orange-100 text-orange-800 rounded-full border border-orange-200",children:[Q.filter(se=>se.revenue>0).length," Active Tiers"]})]})})]})]}),o.jsxs(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[o.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Event Orders"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"relative",children:[o.jsx(h0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Search orders...",value:x,onChange:se=>{y(se.target.value),l(1)},className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-64"})]}),o.jsxs("button",{onClick:Se,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 transition-colors shadow-sm",children:[o.jsx(ad,{className:"h-4 w-4"}),"Export Sales Info"]})]})]})}),V.length>0?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),o.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tickets"}),o.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),o.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Scan Status"}),o.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:V.map(se=>{var be,Ge;return o.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>ne(se),children:[o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-center",children:[(be=se.id)==null?void 0:be.slice(0,8),"..."]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:se.customerName||"N/A"}),o.jsx("div",{className:"text-sm text-gray-500",children:se.customerEmail||"N/A"})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:o.jsx("div",{className:"space-y-1",children:(Ge=se.tickets)==null?void 0:Ge.map((O,W)=>{var ue;const K=(ue=M.ticketTiers)==null?void 0:ue.find(ae=>ae.id===O.ticketTierId);return o.jsxs("div",{className:"text-sm text-gray-900",children:[o.jsx("span",{className:"font-medium",children:(K==null?void 0:K.name)||"Unknown Tier"}),o.jsxs("span",{className:"text-gray-500 ml-2",children:["x",O.quantity]})]},W)})})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-center",children:D(se.totalAmount||0)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:o.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${se.status==="completed"?"bg-green-100 text-green-800 border-green-200":se.status==="pending"?"bg-yellow-100 text-yellow-800 border-yellow-200":se.status==="failed"?"bg-red-100 text-red-800 border-red-200":"bg-gray-100 text-gray-800 border-gray-200"}`,children:se.status||"N/A"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(()=>{const O=B(se),W=O.icon;return o.jsxs("div",{className:"flex flex-col items-center gap-1",children:[o.jsxs("div",{className:`flex items-center gap-1 ${O.color}`,children:[o.jsx(W,{className:"h-4 w-4"}),o.jsx("span",{className:"text-xs font-medium",children:O.text})]}),O.time&&o.jsx("span",{className:"text-xs text-gray-500",children:O.time})]})})()}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center",children:new Date(se.createdAt).toLocaleDateString()})]},se.id)})})]})}),o.jsx("div",{className:"px-6 py-4 border-t border-gray-100",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-sm text-gray-600",children:"Show:"}),o.jsxs("select",{value:h,onChange:se=>le(Number(se.target.value)),className:"px-3 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:5,children:"5"}),o.jsx("option",{value:10,children:"10"}),o.jsx("option",{value:25,children:"25"}),o.jsx("option",{value:50,children:"50"})]}),o.jsx("span",{className:"text-sm text-gray-600",children:"records"})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",De+1," to ",Math.min(Y,j.length)," of ",j.length," results",x&&o.jsxs("span",{className:"ml-2 text-blue-600",children:["(filtered from ",I.length," total)"]})]}),ce>1&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>oe(c-1),disabled:c===1,className:"px-3 py-1 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),o.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:ce},(se,be)=>be+1).map(se=>o.jsx("button",{onClick:()=>oe(se),className:`px-3 py-1 text-sm font-medium rounded-md ${se===c?"bg-blue-600 text-white":"text-gray-500 bg-white border border-gray-300 hover:bg-gray-50"}`,children:se},se))}),o.jsx("button",{onClick:()=>oe(c+1),disabled:c===ce,className:"px-3 py-1 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})})]}):o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(pn,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),o.jsx("p",{children:"No orders found for this event"})]})]}),o.jsx(Gm,{order:v,event:M,isOpen:T,onClose:Te})]})};var xt;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(xt||(xt={}));var Eu=new Map([[xt.QR_CODE,"QR_CODE"],[xt.AZTEC,"AZTEC"],[xt.CODABAR,"CODABAR"],[xt.CODE_39,"CODE_39"],[xt.CODE_93,"CODE_93"],[xt.CODE_128,"CODE_128"],[xt.DATA_MATRIX,"DATA_MATRIX"],[xt.MAXICODE,"MAXICODE"],[xt.ITF,"ITF"],[xt.EAN_13,"EAN_13"],[xt.EAN_8,"EAN_8"],[xt.PDF_417,"PDF_417"],[xt.RSS_14,"RSS_14"],[xt.RSS_EXPANDED,"RSS_EXPANDED"],[xt.UPC_A,"UPC_A"],[xt.UPC_E,"UPC_E"],[xt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Iu;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(Iu||(Iu={}));function Ym(t){return Object.values(xt).includes(t)}var Ws;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Ws||(Ws={}));var Bi=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Ws.SCAN_TYPE_CAMERA,Ws.SCAN_TYPE_FILE],t}(),eh=function(){function t(r,i){this.format=r,this.formatName=i}return t.prototype.toString=function(){return this.formatName},t.create=function(r){if(!Eu.has(r))throw"".concat(r," not in html5QrcodeSupportedFormatsTextMap");return new t(r,Eu.get(r))},t}(),Tu=function(){function t(){}return t.createFromText=function(r){var i={text:r};return{decodedText:r,result:i}},t.createFromQrcodeResult=function(r){return{decodedText:r.text,result:r}},t}(),Uc;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Uc||(Uc={}));var th=function(){function t(){}return t.createFrom=function(r){return{errorMessage:r,type:Uc.UNKWOWN_ERROR}},t}(),rh=function(){function t(r){this.verbose=r}return t.prototype.log=function(r){this.verbose&&console.log(r)},t.prototype.warn=function(r){this.verbose&&console.warn(r)},t.prototype.logError=function(r,i){(this.verbose||i===!0)&&console.error(r)},t.prototype.logErrors=function(r){if(r.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(r)},t}();function $i(t){return typeof t>"u"||t===null}function Xm(t,r,i){return t>i?i:t<r?r:t}var Ua=function(){function t(){}return t.codeParseError=function(r){return"QR code parse error, error = ".concat(r)},t.errorGettingUserMedia=function(r){return"Error getting userMedia, error = ".concat(r)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),pr=function(){function t(){}return t.scanningStatus=function(){return"Scanning"},t.idleStatus=function(){return"Idle"},t.errorStatus=function(){return"Error"},t.permissionStatus=function(){return"Permission"},t.noCameraFoundErrorStatus=function(){return"No Cameras"},t.lastMatch=function(r){return"Last Match: ".concat(r)},t.codeScannerTitle=function(){return"Code Scanner"},t.cameraPermissionTitle=function(){return"Request Camera Permissions"},t.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},t.noCameraFound=function(){return"No camera found"},t.scanButtonStopScanningText=function(){return"Stop Scanning"},t.scanButtonStartScanningText=function(){return"Start Scanning"},t.torchOnButton=function(){return"Switch On Torch"},t.torchOffButton=function(){return"Switch Off Torch"},t.torchOnFailedMessage=function(){return"Failed to turn on torch"},t.torchOffFailedMessage=function(){return"Failed to turn off torch"},t.scanButtonScanningStarting=function(){return"Launching Camera..."},t.textIfCameraScanSelected=function(){return"Scan an Image File"},t.textIfFileScanSelected=function(){return"Scan using camera directly"},t.selectCamera=function(){return"Select Camera"},t.fileSelectionChooseImage=function(){return"Choose Image"},t.fileSelectionChooseAnother=function(){return"Choose Another"},t.fileSelectionNoImageSelected=function(){return"No image choosen"},t.anonymousCameraPrefix=function(){return"Anonymous Camera"},t.dragAndDropMessage=function(){return"Or drop an image to scan"},t.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},t.zoom=function(){return"zoom"},t.loadingImage=function(){return"Loading image..."},t.cameraScanAltText=function(){return"Camera based scan"},t.fileScanAltText=function(){return"Fule based scan"},t}(),ju=function(){function t(){}return t.poweredBy=function(){return"Powered by "},t.reportIssues=function(){return"Report issues"},t}(),nh=function(){function t(){}return t.isMediaStreamConstraintsValid=function(r,i){if(typeof r!="object"){var a=typeof r;return i.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(a,"."),!0),!1}for(var c=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],l=new Set(c),h=Object.keys(r),m=0,x=h;m<x.length;m++){var y=x[m];if(l.has(y))return i.logError("".concat(y," is not supported videoConstaints."),!0),!1}return!0},t}(),zc={exports:{}};(function(t,r){(function(i,a){a(r)})(fo,function(i){function a(R){return R==null}var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,e){R.__proto__=e}||function(R,e){for(var n in e)e.hasOwnProperty(n)&&(R[n]=e[n])};function l(R,e){c(R,e);function n(){this.constructor=R}R.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function h(R,e){var n=Object.setPrototypeOf;n?n(R,e):R.__proto__=e}function m(R,e){e===void 0&&(e=R.constructor);var n=Error.captureStackTrace;n&&n(R,e)}var x=function(R){l(e,R);function e(n){var s=this.constructor,d=R.call(this,n)||this;return Object.defineProperty(d,"name",{value:s.name,enumerable:!1}),h(d,s.prototype),m(d),d}return e}(Error);class y extends x{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}y.kind="Exception";class v extends y{}v.kind="ArgumentException";class C extends y{}C.kind="IllegalArgumentException";class T{constructor(e){if(this.binarizer=e,e===null)throw new C("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,n){return this.binarizer.getBlackRow(e,n)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,n,s,d){const u=this.binarizer.getLuminanceSource().crop(e,n,s,d);return new T(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new T(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new T(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class A extends y{static getChecksumInstance(){return new A}}A.kind="ChecksumException";class D{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class _{static arraycopy(e,n,s,d,u){for(;u--;)s[d++]=e[n++]}static currentTimeMillis(){return Date.now()}}class M extends y{}M.kind="IndexOutOfBoundsException";class I extends M{constructor(e=void 0,n=void 0){super(n),this.index=e,this.message=n}}I.kind="ArrayIndexOutOfBoundsException";class j{static fill(e,n){for(let s=0,d=e.length;s<d;s++)e[s]=n}static fillWithin(e,n,s,d){j.rangeCheck(e.length,n,s);for(let u=n;u<s;u++)e[u]=d}static rangeCheck(e,n,s){if(n>s)throw new C("fromIndex("+n+") > toIndex("+s+")");if(n<0)throw new I(n);if(s>e)throw new I(s)}static asList(...e){return e}static create(e,n,s){return Array.from({length:e}).map(u=>Array.from({length:n}).fill(s))}static createInt32Array(e,n,s){return Array.from({length:e}).map(u=>Int32Array.from({length:n}).fill(s))}static equals(e,n){if(!e||!n||!e.length||!n.length||e.length!==n.length)return!1;for(let s=0,d=e.length;s<d;s++)if(e[s]!==n[s])return!1;return!0}static hashCode(e){if(e===null)return 0;let n=1;for(const s of e)n=31*n+s;return n}static fillUint8Array(e,n){for(let s=0;s!==e.length;s++)e[s]=n}static copyOf(e,n){return e.slice(0,n)}static copyOfUint8Array(e,n){if(e.length<=n){const s=new Uint8Array(n);return s.set(e),s}return e.slice(0,n)}static copyOfRange(e,n,s){const d=s-n,u=new Int32Array(d);return _.arraycopy(e,n,u,0,d),u}static binarySearch(e,n,s){s===void 0&&(s=j.numberComparator);let d=0,u=e.length-1;for(;d<=u;){const f=u+d>>1,p=s(n,e[f]);if(p>0)d=f+1;else if(p<0)u=f-1;else return f}return-d-1}static numberComparator(e,n){return e-n}}class B{static numberOfTrailingZeros(e){let n;if(e===0)return 32;let s=31;return n=e<<16,n!==0&&(s-=16,e=n),n=e<<8,n!==0&&(s-=8,e=n),n=e<<4,n!==0&&(s-=4,e=n),n=e<<2,n!==0&&(s-=2,e=n),s-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let n=1;return e>>>16||(n+=16,e<<=16),e>>>24||(n+=8,e<<=8),e>>>28||(n+=4,e<<=4),e>>>30||(n+=2,e<<=2),n-=e>>>31,n}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,n){return Math.trunc(e/n)}static parseInt(e,n=void 0){return parseInt(e,n)}}B.MIN_VALUE_32_BITS=-2147483648,B.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Z{constructor(e,n){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,n==null?this.bits=Z.makeArray(e):this.bits=n)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const n=Z.makeArray(e);_.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const n=this.size;if(e>=n)return n;const s=this.bits;let d=Math.floor(e/32),u=s[d];u&=~((1<<(e&31))-1);const f=s.length;for(;u===0;){if(++d===f)return n;u=s[d]}const p=d*32+B.numberOfTrailingZeros(u);return p>n?n:p}getNextUnset(e){const n=this.size;if(e>=n)return n;const s=this.bits;let d=Math.floor(e/32),u=~s[d];u&=~((1<<(e&31))-1);const f=s.length;for(;u===0;){if(++d===f)return n;u=~s[d]}const p=d*32+B.numberOfTrailingZeros(u);return p>n?n:p}setBulk(e,n){this.bits[Math.floor(e/32)]=n}setRange(e,n){if(n<e||e<0||n>this.size)throw new C;if(n===e)return;n--;const s=Math.floor(e/32),d=Math.floor(n/32),u=this.bits;for(let f=s;f<=d;f++){const p=f>s?0:e&31,S=(2<<(f<d?31:n&31))-(1<<p);u[f]|=S}}clear(){const e=this.bits.length,n=this.bits;for(let s=0;s<e;s++)n[s]=0}isRange(e,n,s){if(n<e||e<0||n>this.size)throw new C;if(n===e)return!0;n--;const d=Math.floor(e/32),u=Math.floor(n/32),f=this.bits;for(let p=d;p<=u;p++){const w=p>d?0:e&31,k=(2<<(p<u?31:n&31))-(1<<w)&4294967295;if((f[p]&k)!==(s?k:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,n){if(n<0||n>32)throw new C("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(let s=n;s>0;s--)this.appendBit((e>>s-1&1)===1)}appendBitArray(e){const n=e.size;this.ensureCapacity(this.size+n);for(let s=0;s<n;s++)this.appendBit(e.get(s))}xor(e){if(this.size!==e.size)throw new C("Sizes don't match");const n=this.bits;for(let s=0,d=n.length;s<d;s++)n[s]^=e.bits[s]}toBytes(e,n,s,d){for(let u=0;u<d;u++){let f=0;for(let p=0;p<8;p++)this.get(e)&&(f|=1<<7-p),e++;n[s+u]=f}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),s=n+1,d=this.bits;for(let u=0;u<s;u++){let f=d[u];f=f>>1&1431655765|(f&1431655765)<<1,f=f>>2&858993459|(f&858993459)<<2,f=f>>4&252645135|(f&252645135)<<4,f=f>>8&16711935|(f&16711935)<<8,f=f>>16&65535|(f&65535)<<16,e[n-u]=f}if(this.size!==s*32){const u=s*32-this.size;let f=e[0]>>>u;for(let p=1;p<s;p++){const w=e[p];f|=w<<32-u,e[p-1]=f,f=w>>>u}e[s-1]=f}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof Z))return!1;const n=e;return this.size===n.size&&j.equals(this.bits,n.bits)}hashCode(){return 31*this.size+j.hashCode(this.bits)}toString(){let e="";for(let n=0,s=this.size;n<s;n++)n&7||(e+=" "),e+=this.get(n)?"X":".";return e}clone(){return new Z(this.size,this.bits.slice())}}var Q;(function(R){R[R.OTHER=0]="OTHER",R[R.PURE_BARCODE=1]="PURE_BARCODE",R[R.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",R[R.TRY_HARDER=3]="TRY_HARDER",R[R.CHARACTER_SET=4]="CHARACTER_SET",R[R.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",R[R.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",R[R.ASSUME_GS1=7]="ASSUME_GS1",R[R.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",R[R.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",R[R.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Q||(Q={}));var xe=Q;class $ extends y{static getFormatInstance(){return new $}}$.kind="FormatException";var ie;(function(R){R[R.Cp437=0]="Cp437",R[R.ISO8859_1=1]="ISO8859_1",R[R.ISO8859_2=2]="ISO8859_2",R[R.ISO8859_3=3]="ISO8859_3",R[R.ISO8859_4=4]="ISO8859_4",R[R.ISO8859_5=5]="ISO8859_5",R[R.ISO8859_6=6]="ISO8859_6",R[R.ISO8859_7=7]="ISO8859_7",R[R.ISO8859_8=8]="ISO8859_8",R[R.ISO8859_9=9]="ISO8859_9",R[R.ISO8859_10=10]="ISO8859_10",R[R.ISO8859_11=11]="ISO8859_11",R[R.ISO8859_13=12]="ISO8859_13",R[R.ISO8859_14=13]="ISO8859_14",R[R.ISO8859_15=14]="ISO8859_15",R[R.ISO8859_16=15]="ISO8859_16",R[R.SJIS=16]="SJIS",R[R.Cp1250=17]="Cp1250",R[R.Cp1251=18]="Cp1251",R[R.Cp1252=19]="Cp1252",R[R.Cp1256=20]="Cp1256",R[R.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",R[R.UTF8=22]="UTF8",R[R.ASCII=23]="ASCII",R[R.Big5=24]="Big5",R[R.GB18030=25]="GB18030",R[R.EUC_KR=26]="EUC_KR"})(ie||(ie={}));class ce{constructor(e,n,s,...d){this.valueIdentifier=e,this.name=s,typeof n=="number"?this.values=Int32Array.from([n]):this.values=n,this.otherEncodingNames=d,ce.VALUE_IDENTIFIER_TO_ECI.set(e,this),ce.NAME_TO_ECI.set(s,this);const u=this.values;for(let f=0,p=u.length;f!==p;f++){const w=u[f];ce.VALUES_TO_ECI.set(w,this)}for(const f of d)ce.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new $("incorect value");const n=ce.VALUES_TO_ECI.get(e);if(n===void 0)throw new $("incorect value");return n}static getCharacterSetECIByName(e){const n=ce.NAME_TO_ECI.get(e);if(n===void 0)throw new $("incorect value");return n}equals(e){if(!(e instanceof ce))return!1;const n=e;return this.getName()===n.getName()}}ce.VALUE_IDENTIFIER_TO_ECI=new Map,ce.VALUES_TO_ECI=new Map,ce.NAME_TO_ECI=new Map,ce.Cp437=new ce(ie.Cp437,Int32Array.from([0,2]),"Cp437"),ce.ISO8859_1=new ce(ie.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),ce.ISO8859_2=new ce(ie.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),ce.ISO8859_3=new ce(ie.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),ce.ISO8859_4=new ce(ie.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),ce.ISO8859_5=new ce(ie.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),ce.ISO8859_6=new ce(ie.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),ce.ISO8859_7=new ce(ie.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),ce.ISO8859_8=new ce(ie.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),ce.ISO8859_9=new ce(ie.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),ce.ISO8859_10=new ce(ie.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),ce.ISO8859_11=new ce(ie.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),ce.ISO8859_13=new ce(ie.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),ce.ISO8859_14=new ce(ie.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),ce.ISO8859_15=new ce(ie.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),ce.ISO8859_16=new ce(ie.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),ce.SJIS=new ce(ie.SJIS,20,"SJIS","Shift_JIS"),ce.Cp1250=new ce(ie.Cp1250,21,"Cp1250","windows-1250"),ce.Cp1251=new ce(ie.Cp1251,22,"Cp1251","windows-1251"),ce.Cp1252=new ce(ie.Cp1252,23,"Cp1252","windows-1252"),ce.Cp1256=new ce(ie.Cp1256,24,"Cp1256","windows-1256"),ce.UnicodeBigUnmarked=new ce(ie.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),ce.UTF8=new ce(ie.UTF8,26,"UTF8","UTF-8"),ce.ASCII=new ce(ie.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),ce.Big5=new ce(ie.Big5,28,"Big5"),ce.GB18030=new ce(ie.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),ce.EUC_KR=new ce(ie.EUC_KR,30,"EUC_KR","EUC-KR");class De extends y{}De.kind="UnsupportedOperationException";class Y{static decode(e,n){const s=this.encodingName(n);return this.customDecoder?this.customDecoder(e,s):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(s)?this.decodeFallback(e,s):new TextDecoder(s).decode(e)}static shouldDecodeOnFallback(e){return!Y.isBrowser()&&e==="ISO-8859-1"}static encode(e,n){const s=this.encodingName(n);return this.customEncoder?this.customEncoder(e,s):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof ce?e:ce.getCharacterSetECIByName(e)}static decodeFallback(e,n){const s=this.encodingCharacterSet(n);if(Y.isDecodeFallbackSupported(s)){let d="";for(let u=0,f=e.length;u<f;u++){let p=e[u].toString(16);p.length<2&&(p="0"+p),d+="%"+p}return decodeURIComponent(d)}if(s.equals(ce.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new De(`Encoding ${this.encodingName(n)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(ce.UTF8)||e.equals(ce.ISO8859_1)||e.equals(ce.ASCII)}static encodeFallback(e){const s=btoa(unescape(encodeURIComponent(e))).split(""),d=[];for(let u=0;u<s.length;u++)d.push(s[u].charCodeAt(0));return new Uint8Array(d)}}class V{static castAsNonUtf8Char(e,n=null){const s=n?n.getName():this.ISO88591;return Y.decode(new Uint8Array([e]),s)}static guessEncoding(e,n){if(n!=null&&n.get(xe.CHARACTER_SET)!==void 0)return n.get(xe.CHARACTER_SET).toString();const s=e.length;let d=!0,u=!0,f=!0,p=0,w=0,S=0,k=0,P=0,q=0,te=0,he=0,ge=0,we=0,Me=0;const Ke=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let tt=0;tt<s&&(d||u||f);tt++){const Qe=e[tt]&255;f&&(p>0?Qe&128?p--:f=!1:Qe&128&&(Qe&64?(p++,Qe&32?(p++,Qe&16?(p++,Qe&8?f=!1:k++):S++):w++):f=!1)),d&&(Qe>127&&Qe<160?d=!1:Qe>159&&(Qe<192||Qe===215||Qe===247)&&Me++),u&&(P>0?Qe<64||Qe===127||Qe>252?u=!1:P--:Qe===128||Qe===160||Qe>239?u=!1:Qe>160&&Qe<224?(q++,he=0,te++,te>ge&&(ge=te)):Qe>127?(P++,te=0,he++,he>we&&(we=he)):(te=0,he=0))}return f&&p>0&&(f=!1),u&&P>0&&(u=!1),f&&(Ke||w+S+k>0)?V.UTF8:u&&(V.ASSUME_SHIFT_JIS||ge>=3||we>=3)?V.SHIFT_JIS:d&&u?ge===2&&q===2||Me*10>=s?V.SHIFT_JIS:V.ISO88591:d?V.ISO88591:u?V.SHIFT_JIS:f?V.UTF8:V.PLATFORM_DEFAULT_ENCODING}static format(e,...n){let s=-1;function d(f,p,w,S,k,P){if(f==="%%")return"%";if(n[++s]===void 0)return;f=S?parseInt(S.substr(1)):void 0;let q=k?parseInt(k.substr(1)):void 0,te;switch(P){case"s":te=n[s];break;case"c":te=n[s][0];break;case"f":te=parseFloat(n[s]).toFixed(f);break;case"p":te=parseFloat(n[s]).toPrecision(f);break;case"e":te=parseFloat(n[s]).toExponential(f);break;case"x":te=parseInt(n[s]).toString(q||16);break;case"d":te=parseFloat(parseInt(n[s],q||10).toPrecision(f)).toFixed(0);break}te=typeof te=="object"?JSON.stringify(te):(+te).toString(q);let he=parseInt(w),ge=w&&w[0]+""=="0"?"0":" ";for(;te.length<he;)te=p!==void 0?te+ge:ge+te;return te}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(u,d)}static getBytes(e,n){return Y.encode(e,n)}static getCharCode(e,n=0){return e.charCodeAt(n)}static getCharAt(e){return String.fromCharCode(e)}}V.SHIFT_JIS=ce.SJIS.getName(),V.GB2312="GB2312",V.ISO88591=ce.ISO8859_1.getName(),V.EUC_JP="EUC_JP",V.UTF8=ce.UTF8.getName(),V.PLATFORM_DEFAULT_ENCODING=V.UTF8,V.ASSUME_SHIFT_JIS=!1;class oe{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=V.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,n,s){for(let d=n;n<n+s;d++)this.append(e[d]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+1)}substring(e,n){return this.value.substring(e,n)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+n.length)}}class le{constructor(e,n,s,d){if(this.width=e,this.height=n,this.rowSize=s,this.bits=d,n==null&&(n=e),this.height=n,e<1||n<1)throw new C("Both dimensions must be greater than 0");s==null&&(s=Math.floor((e+31)/32)),this.rowSize=s,d==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const n=e.length,s=e[0].length,d=new le(s,n);for(let u=0;u<n;u++){const f=e[u];for(let p=0;p<s;p++)f[p]&&d.set(p,u)}return d}static parseFromString(e,n,s){if(e===null)throw new C("stringRepresentation cannot be null");const d=new Array(e.length);let u=0,f=0,p=-1,w=0,S=0;for(;S<e.length;)if(e.charAt(S)===`
`||e.charAt(S)==="\r"){if(u>f){if(p===-1)p=u-f;else if(u-f!==p)throw new C("row lengths do not match");f=u,w++}S++}else if(e.substring(S,S+n.length)===n)S+=n.length,d[u]=!0,u++;else if(e.substring(S,S+s.length)===s)S+=s.length,d[u]=!1,u++;else throw new C("illegal character encountered: "+e.substring(S));if(u>f){if(p===-1)p=u-f;else if(u-f!==p)throw new C("row lengths do not match");w++}const k=new le(p,w);for(let P=0;P<u;P++)d[P]&&k.set(Math.floor(P%p),Math.floor(P/p));return k}get(e,n){const s=n*this.rowSize+Math.floor(e/32);return(this.bits[s]>>>(e&31)&1)!==0}set(e,n){const s=n*this.rowSize+Math.floor(e/32);this.bits[s]|=1<<(e&31)&4294967295}unset(e,n){const s=n*this.rowSize+Math.floor(e/32);this.bits[s]&=~(1<<(e&31)&4294967295)}flip(e,n){const s=n*this.rowSize+Math.floor(e/32);this.bits[s]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new C("input matrix dimensions do not match");const n=new Z(Math.floor(this.width/32)+1),s=this.rowSize,d=this.bits;for(let u=0,f=this.height;u<f;u++){const p=u*s,w=e.getRow(u,n).getBitArray();for(let S=0;S<s;S++)d[p+S]^=w[S]}}clear(){const e=this.bits,n=e.length;for(let s=0;s<n;s++)e[s]=0}setRegion(e,n,s,d){if(n<0||e<0)throw new C("Left and top must be nonnegative");if(d<1||s<1)throw new C("Height and width must be at least 1");const u=e+s,f=n+d;if(f>this.height||u>this.width)throw new C("The region must fit inside the matrix");const p=this.rowSize,w=this.bits;for(let S=n;S<f;S++){const k=S*p;for(let P=e;P<u;P++)w[k+Math.floor(P/32)]|=1<<(P&31)&4294967295}}getRow(e,n){n==null||n.getSize()<this.width?n=new Z(this.width):n.clear();const s=this.rowSize,d=this.bits,u=e*s;for(let f=0;f<s;f++)n.setBulk(f*32,d[u+f]);return n}setRow(e,n){_.arraycopy(n.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),n=this.getHeight();let s=new Z(e),d=new Z(e);for(let u=0,f=Math.floor((n+1)/2);u<f;u++)s=this.getRow(u,s),d=this.getRow(n-1-u,d),s.reverse(),d.reverse(),this.setRow(u,d),this.setRow(n-1-u,s)}getEnclosingRectangle(){const e=this.width,n=this.height,s=this.rowSize,d=this.bits;let u=e,f=n,p=-1,w=-1;for(let S=0;S<n;S++)for(let k=0;k<s;k++){const P=d[S*s+k];if(P!==0){if(S<f&&(f=S),S>w&&(w=S),k*32<u){let q=0;for(;!(P<<31-q&4294967295);)q++;k*32+q<u&&(u=k*32+q)}if(k*32+31>p){let q=31;for(;!(P>>>q);)q--;k*32+q>p&&(p=k*32+q)}}}return p<u||w<f?null:Int32Array.from([u,f,p-u+1,w-f+1])}getTopLeftOnBit(){const e=this.rowSize,n=this.bits;let s=0;for(;s<n.length&&n[s]===0;)s++;if(s===n.length)return null;const d=s/e;let u=s%e*32;const f=n[s];let p=0;for(;!(f<<31-p&4294967295);)p++;return u+=p,Int32Array.from([u,d])}getBottomRightOnBit(){const e=this.rowSize,n=this.bits;let s=n.length-1;for(;s>=0&&n[s]===0;)s--;if(s<0)return null;const d=Math.floor(s/e);let u=Math.floor(s%e)*32;const f=n[s];let p=31;for(;!(f>>>p);)p--;return u+=p,Int32Array.from([u,d])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof le))return!1;const n=e;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&j.equals(this.bits,n.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+j.hashCode(this.bits),e}toString(e="X ",n="  ",s=`
`){return this.buildToString(e,n,s)}buildToString(e,n,s){let d=new oe;for(let u=0,f=this.height;u<f;u++){for(let p=0,w=this.width;p<w;p++)d.append(this.get(p,u)?e:n);d.append(s)}return d.toString()}clone(){return new le(this.width,this.height,this.rowSize,this.bits.slice())}}class ne extends y{static getNotFoundInstance(){return new ne}}ne.kind="NotFoundException";class Te extends D{constructor(e){super(e),this.luminances=Te.EMPTY,this.buckets=new Int32Array(Te.LUMINANCE_BUCKETS)}getBlackRow(e,n){const s=this.getLuminanceSource(),d=s.getWidth();n==null||n.getSize()<d?n=new Z(d):n.clear(),this.initArrays(d);const u=s.getRow(e,this.luminances),f=this.buckets;for(let w=0;w<d;w++)f[(u[w]&255)>>Te.LUMINANCE_SHIFT]++;const p=Te.estimateBlackPoint(f);if(d<3)for(let w=0;w<d;w++)(u[w]&255)<p&&n.set(w);else{let w=u[0]&255,S=u[1]&255;for(let k=1;k<d-1;k++){const P=u[k+1]&255;(S*4-w-P)/2<p&&n.set(k),w=S,S=P}}return n}getBlackMatrix(){const e=this.getLuminanceSource(),n=e.getWidth(),s=e.getHeight(),d=new le(n,s);this.initArrays(n);const u=this.buckets;for(let w=1;w<5;w++){const S=Math.floor(s*w/5),k=e.getRow(S,this.luminances),P=Math.floor(n*4/5);for(let q=Math.floor(n/5);q<P;q++){const te=k[q]&255;u[te>>Te.LUMINANCE_SHIFT]++}}const f=Te.estimateBlackPoint(u),p=e.getMatrix();for(let w=0;w<s;w++){const S=w*n;for(let k=0;k<n;k++)(p[S+k]&255)<f&&d.set(k,w)}return d}createBinarizer(e){return new Te(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const n=this.buckets;for(let s=0;s<Te.LUMINANCE_BUCKETS;s++)n[s]=0}static estimateBlackPoint(e){const n=e.length;let s=0,d=0,u=0;for(let k=0;k<n;k++)e[k]>u&&(d=k,u=e[k]),e[k]>s&&(s=e[k]);let f=0,p=0;for(let k=0;k<n;k++){const P=k-d,q=e[k]*P*P;q>p&&(f=k,p=q)}if(d>f){const k=d;d=f,f=k}if(f-d<=n/16)throw new ne;let w=f-1,S=-1;for(let k=f-1;k>d;k--){const P=k-d,q=P*P*(f-k)*(s-e[k]);q>S&&(w=k,S=q)}return w<<Te.LUMINANCE_SHIFT}}Te.LUMINANCE_BITS=5,Te.LUMINANCE_SHIFT=8-Te.LUMINANCE_BITS,Te.LUMINANCE_BUCKETS=1<<Te.LUMINANCE_BITS,Te.EMPTY=Uint8ClampedArray.from([0]);class Se extends Te{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),n=e.getWidth(),s=e.getHeight();if(n>=Se.MINIMUM_DIMENSION&&s>=Se.MINIMUM_DIMENSION){const d=e.getMatrix();let u=n>>Se.BLOCK_SIZE_POWER;n&Se.BLOCK_SIZE_MASK&&u++;let f=s>>Se.BLOCK_SIZE_POWER;s&Se.BLOCK_SIZE_MASK&&f++;const p=Se.calculateBlackPoints(d,u,f,n,s),w=new le(n,s);Se.calculateThresholdForBlock(d,u,f,n,s,p,w),this.matrix=w}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new Se(e)}static calculateThresholdForBlock(e,n,s,d,u,f,p){const w=u-Se.BLOCK_SIZE,S=d-Se.BLOCK_SIZE;for(let k=0;k<s;k++){let P=k<<Se.BLOCK_SIZE_POWER;P>w&&(P=w);const q=Se.cap(k,2,s-3);for(let te=0;te<n;te++){let he=te<<Se.BLOCK_SIZE_POWER;he>S&&(he=S);const ge=Se.cap(te,2,n-3);let we=0;for(let Ke=-2;Ke<=2;Ke++){const tt=f[q+Ke];we+=tt[ge-2]+tt[ge-1]+tt[ge]+tt[ge+1]+tt[ge+2]}const Me=we/25;Se.thresholdBlock(e,he,P,Me,d,p)}}}static cap(e,n,s){return e<n?n:e>s?s:e}static thresholdBlock(e,n,s,d,u,f){for(let p=0,w=s*u+n;p<Se.BLOCK_SIZE;p++,w+=u)for(let S=0;S<Se.BLOCK_SIZE;S++)(e[w+S]&255)<=d&&f.set(n+S,s+p)}static calculateBlackPoints(e,n,s,d,u){const f=u-Se.BLOCK_SIZE,p=d-Se.BLOCK_SIZE,w=new Array(s);for(let S=0;S<s;S++){w[S]=new Int32Array(n);let k=S<<Se.BLOCK_SIZE_POWER;k>f&&(k=f);for(let P=0;P<n;P++){let q=P<<Se.BLOCK_SIZE_POWER;q>p&&(q=p);let te=0,he=255,ge=0;for(let Me=0,Ke=k*d+q;Me<Se.BLOCK_SIZE;Me++,Ke+=d){for(let tt=0;tt<Se.BLOCK_SIZE;tt++){const Qe=e[Ke+tt]&255;te+=Qe,Qe<he&&(he=Qe),Qe>ge&&(ge=Qe)}if(ge-he>Se.MIN_DYNAMIC_RANGE)for(Me++,Ke+=d;Me<Se.BLOCK_SIZE;Me++,Ke+=d)for(let tt=0;tt<Se.BLOCK_SIZE;tt++)te+=e[Ke+tt]&255}let we=te>>Se.BLOCK_SIZE_POWER*2;if(ge-he<=Se.MIN_DYNAMIC_RANGE&&(we=he/2,S>0&&P>0)){const Me=(w[S-1][P]+2*w[S][P-1]+w[S-1][P-1])/4;he<Me&&(we=Me)}w[S][P]=we}}return w}}Se.BLOCK_SIZE_POWER=3,Se.BLOCK_SIZE=1<<Se.BLOCK_SIZE_POWER,Se.BLOCK_SIZE_MASK=Se.BLOCK_SIZE-1,Se.MINIMUM_DIMENSION=Se.BLOCK_SIZE*5,Se.MIN_DYNAMIC_RANGE=24;class Ie{constructor(e,n){this.width=e,this.height=n}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,n,s,d){throw new De("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new De("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new De("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let n=new oe;for(let s=0;s<this.height;s++){const d=this.getRow(s,e);for(let u=0;u<this.width;u++){const f=d[u]&255;let p;f<64?p="#":f<128?p="+":f<192?p=".":p=" ",n.append(p)}n.append(`
`)}return n.toString()}}class se extends Ie{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,n){const s=this.delegate.getRow(e,n),d=this.getWidth();for(let u=0;u<d;u++)s[u]=255-(s[u]&255);return s}getMatrix(){const e=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),s=new Uint8ClampedArray(n);for(let d=0;d<n;d++)s[d]=255-(e[d]&255);return s}isCropSupported(){return this.delegate.isCropSupported()}crop(e,n,s,d){return new se(this.delegate.crop(e,n,s,d))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new se(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new se(this.delegate.rotateCounterClockwise45())}}class be extends Ie{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=be.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const n=e.getContext("2d").getImageData(0,0,e.width,e.height);return be.toGrayscaleBuffer(n.data,e.width,e.height)}static toGrayscaleBuffer(e,n,s){const d=new Uint8ClampedArray(n*s);for(let u=0,f=0,p=e.length;u<p;u+=4,f++){let w;if(e[u+3]===0)w=255;else{const k=e[u],P=e[u+1],q=e[u+2];w=306*k+601*P+117*q+512>>10}d[f]=w}return d}getRow(e,n){if(e<0||e>=this.getHeight())throw new C("Requested row is outside the image: "+e);const s=this.getWidth(),d=e*s;return n===null?n=this.buffer.slice(d,d+s):(n.length<s&&(n=new Uint8ClampedArray(s)),n.set(this.buffer.slice(d,d+s))),n}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,n,s,d){return super.crop(e,n,s,d),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const n=this.getTempCanvasElement(),s=n.getContext("2d"),d=e*be.DEGREE_TO_RADIANS,u=this.canvas.width,f=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(d))*u+Math.abs(Math.sin(d))*f),w=Math.ceil(Math.abs(Math.sin(d))*u+Math.abs(Math.cos(d))*f);return n.width=p,n.height=w,s.translate(p/2,w/2),s.rotate(d),s.drawImage(this.canvas,u/-2,f/-2),this.buffer=be.makeBufferFromCanvasImageData(n),this}invert(){return new se(this)}}be.DEGREE_TO_RADIANS=Math.PI/180;class Ge{constructor(e,n,s){this.deviceId=e,this.label=n,this.kind="videoinput",this.groupId=s||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var O=(globalThis||fo||self||window||void 0)&&(globalThis||fo||self||window||void 0).__awaiter||function(R,e,n,s){function d(u){return u instanceof n?u:new n(function(f){f(u)})}return new(n||(n=Promise))(function(u,f){function p(k){try{S(s.next(k))}catch(P){f(P)}}function w(k){try{S(s.throw(k))}catch(P){f(P)}}function S(k){k.done?u(k.value):d(k.value).then(p,w)}S((s=s.apply(R,e||[])).next())})};class W{constructor(e,n=500,s){this.reader=e,this.timeBetweenScansMillis=n,this._hints=s,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return O(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),n=[];for(const s of e){const d=s.kind==="video"?"videoinput":s.kind;if(d!=="videoinput")continue;const u=s.deviceId||s.id,f=s.label||`Video device ${n.length+1}`,p=s.groupId,w={deviceId:u,label:f,kind:d,groupId:p};n.push(w)}return n})}getVideoInputDevices(){return O(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(n=>new Ge(n.deviceId,n.label))})}findDeviceById(e){return O(this,void 0,void 0,function*(){const n=yield this.listVideoInputDevices();return n?n.find(s=>s.deviceId===e):null})}decodeFromInputVideoDevice(e,n){return O(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,n)})}decodeOnceFromVideoDevice(e,n){return O(this,void 0,void 0,function*(){this.reset();let s;e?s={deviceId:{exact:e}}:s={facingMode:"environment"};const d={video:s};return yield this.decodeOnceFromConstraints(d,n)})}decodeOnceFromConstraints(e,n){return O(this,void 0,void 0,function*(){const s=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(s,n)})}decodeOnceFromStream(e,n){return O(this,void 0,void 0,function*(){this.reset();const s=yield this.attachStreamToVideo(e,n);return yield this.decodeOnce(s)})}decodeFromInputVideoDeviceContinuously(e,n,s){return O(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,n,s)})}decodeFromVideoDevice(e,n,s){return O(this,void 0,void 0,function*(){let d;e?d={deviceId:{exact:e}}:d={facingMode:"environment"};const u={video:d};return yield this.decodeFromConstraints(u,n,s)})}decodeFromConstraints(e,n,s){return O(this,void 0,void 0,function*(){const d=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(d,n,s)})}decodeFromStream(e,n,s){return O(this,void 0,void 0,function*(){this.reset();const d=yield this.attachStreamToVideo(e,n);return yield this.decodeContinuously(d,s)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,n){return O(this,void 0,void 0,function*(){const s=this.prepareVideoElement(n);return this.addVideoSource(s,e),this.videoElement=s,this.stream=e,yield this.playVideoOnLoadAsync(s),s})}playVideoOnLoadAsync(e){return new Promise((n,s)=>this.playVideoOnLoad(e,()=>n()))}playVideoOnLoad(e,n){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",n),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return O(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,n){const s=document.getElementById(e);if(!s)throw new v(`element with id '${e}' not found`);if(s.nodeName.toLowerCase()!==n.toLowerCase())throw new v(`element with id '${e}' must be an ${n} element`);return s}decodeFromImage(e,n){if(!e&&!n)throw new v("either imageElement with a src set or an url must be provided");return n&&!e?this.decodeFromImageUrl(n):this.decodeFromImageElement(e)}decodeFromVideo(e,n){if(!e&&!n)throw new v("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,n,s){if(e===void 0&&n===void 0)throw new v("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrlContinuously(n,s):this.decodeFromVideoElementContinuously(e,s)}decodeFromImageElement(e){if(!e)throw new v("An image element must be provided.");this.reset();const n=this.prepareImageElement(e);this.imageElement=n;let s;return this.isImageLoaded(n)?s=this.decodeOnce(n,!1,!0):s=this._decodeOnLoadImage(n),s}decodeFromVideoElement(e){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(n)}decodeFromVideoElementContinuously(e,n){const s=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(s,n)}_decodeFromVideoElementSetup(e){if(!e)throw new v("A video element must be provided.");this.reset();const n=this.prepareVideoElement(e);return this.videoElement=n,n}decodeFromImageUrl(e){if(!e)throw new v("An URL must be provided.");this.reset();const n=this.prepareImageElement();this.imageElement=n;const s=this._decodeOnLoadImage(n);return n.src=e,s}decodeFromVideoUrl(e){if(!e)throw new v("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),s=this.decodeFromVideoElement(n);return n.src=e,s}decodeFromVideoUrlContinuously(e,n){if(!e)throw new v("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),d=this.decodeFromVideoElementContinuously(s,n);return s.src=e,d}_decodeOnLoadImage(e){return new Promise((n,s)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(n,s),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return O(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,n){return O(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,n)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let n;return typeof e>"u"&&(n=document.createElement("img"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(n=e),n}prepareVideoElement(e){let n;return!e&&typeof document<"u"&&(n=document.createElement("video"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(n=e),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n}decodeOnce(e,n=!0,s=!0){this._stopAsyncDecode=!1;const d=(u,f)=>{if(this._stopAsyncDecode){f(new ne("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const p=this.decode(e);u(p)}catch(p){const w=n&&p instanceof ne,k=(p instanceof A||p instanceof $)&&s;if(w||k)return setTimeout(d,this._timeBetweenDecodingAttempts,u,f);f(p)}};return new Promise((u,f)=>d(u,f))}decodeContinuously(e,n){this._stopContinuousDecode=!1;const s=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const d=this.decode(e);n(d,null),setTimeout(s,this.timeBetweenScansMillis)}catch(d){n(null,d);const u=d instanceof A||d instanceof $,f=d instanceof ne;(u||f)&&setTimeout(s,this._timeBetweenDecodingAttempts)}};s()}decode(e){const n=this.createBinaryBitmap(e);return this.decodeBitmap(n)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,n,s){n||(n={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),s||(s=this.captureCanvasContext),s.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}drawImageOnCanvas(e,n,s=this.captureCanvasContext){n||(n={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),s||(s=this.captureCanvasContext),s.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const n=this.getCaptureCanvas(e),s=new be(n),d=new Se(s);return new T(d)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const s=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=s}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const n=this.createCaptureCanvas(e);this.captureCanvas=n}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const n=document.createElement("canvas");let s,d;return typeof e<"u"&&(e instanceof HTMLVideoElement?(s=e.videoWidth,d=e.videoHeight):e instanceof HTMLImageElement&&(s=e.naturalWidth||e.width,d=e.naturalHeight||e.height)),n.style.width=s+"px",n.style.height=d+"px",n.width=s,n.height=d,n}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,n){try{e.srcObject=n}catch{e.src=URL.createObjectURL(n)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class K{constructor(e,n,s=n==null?0:8*n.length,d,u,f=_.currentTimeMillis()){this.text=e,this.rawBytes=n,this.numBits=s,this.resultPoints=d,this.format=u,this.timestamp=f,this.text=e,this.rawBytes=n,s==null?this.numBits=n==null?0:8*n.length:this.numBits=s,this.resultPoints=d,this.format=u,this.resultMetadata=null,f==null?this.timestamp=_.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,n){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,n)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const n=this.resultPoints;if(n===null)this.resultPoints=e;else if(e!==null&&e.length>0){const s=new Array(n.length+e.length);_.arraycopy(n,0,s,0,n.length),_.arraycopy(e,0,s,n.length,e.length),this.resultPoints=s}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ue;(function(R){R[R.AZTEC=0]="AZTEC",R[R.CODABAR=1]="CODABAR",R[R.CODE_39=2]="CODE_39",R[R.CODE_93=3]="CODE_93",R[R.CODE_128=4]="CODE_128",R[R.DATA_MATRIX=5]="DATA_MATRIX",R[R.EAN_8=6]="EAN_8",R[R.EAN_13=7]="EAN_13",R[R.ITF=8]="ITF",R[R.MAXICODE=9]="MAXICODE",R[R.PDF_417=10]="PDF_417",R[R.QR_CODE=11]="QR_CODE",R[R.RSS_14=12]="RSS_14",R[R.RSS_EXPANDED=13]="RSS_EXPANDED",R[R.UPC_A=14]="UPC_A",R[R.UPC_E=15]="UPC_E",R[R.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ue||(ue={}));var ae=ue,Ee;(function(R){R[R.OTHER=0]="OTHER",R[R.ORIENTATION=1]="ORIENTATION",R[R.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",R[R.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",R[R.ISSUE_NUMBER=4]="ISSUE_NUMBER",R[R.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",R[R.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",R[R.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",R[R.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",R[R.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",R[R.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ee||(Ee={}));var Ae=Ee;class ke{constructor(e,n,s,d,u=-1,f=-1){this.rawBytes=e,this.text=n,this.byteSegments=s,this.ecLevel=d,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=f,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class ze{exp(e){return this.expTable[e]}log(e){if(e===0)throw new C;return this.logTable[e]}static addOrSubtract(e,n){return e^n}}class Be{constructor(e,n){if(n.length===0)throw new C;this.field=e;const s=n.length;if(s>1&&n[0]===0){let d=1;for(;d<s&&n[d]===0;)d++;d===s?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(s-d),_.arraycopy(n,d,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const n=this.coefficients;let s;if(e===1){s=0;for(let f=0,p=n.length;f!==p;f++){const w=n[f];s=ze.addOrSubtract(s,w)}return s}s=n[0];const d=n.length,u=this.field;for(let f=1;f<d;f++)s=ze.addOrSubtract(u.multiply(e,s),n[f]);return s}addOrSubtract(e){if(!this.field.equals(e.field))throw new C("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,s=e.coefficients;if(n.length>s.length){const f=n;n=s,s=f}let d=new Int32Array(s.length);const u=s.length-n.length;_.arraycopy(s,0,d,0,u);for(let f=u;f<s.length;f++)d[f]=ze.addOrSubtract(n[f-u],s[f]);return new Be(this.field,d)}multiply(e){if(!this.field.equals(e.field))throw new C("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const n=this.coefficients,s=n.length,d=e.coefficients,u=d.length,f=new Int32Array(s+u-1),p=this.field;for(let w=0;w<s;w++){const S=n[w];for(let k=0;k<u;k++)f[w+k]=ze.addOrSubtract(f[w+k],p.multiply(S,d[k]))}return new Be(p,f)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const n=this.coefficients.length,s=this.field,d=new Int32Array(n),u=this.coefficients;for(let f=0;f<n;f++)d[f]=s.multiply(u[f],e);return new Be(s,d)}multiplyByMonomial(e,n){if(e<0)throw new C;if(n===0)return this.field.getZero();const s=this.coefficients,d=s.length,u=new Int32Array(d+e),f=this.field;for(let p=0;p<d;p++)u[p]=f.multiply(s[p],n);return new Be(f,u)}divide(e){if(!this.field.equals(e.field))throw new C("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new C("Divide by 0");const n=this.field;let s=n.getZero(),d=this;const u=e.getCoefficient(e.getDegree()),f=n.inverse(u);for(;d.getDegree()>=e.getDegree()&&!d.isZero();){const p=d.getDegree()-e.getDegree(),w=n.multiply(d.getCoefficient(d.getDegree()),f),S=e.multiplyByMonomial(p,w),k=n.buildMonomial(p,w);s=s.addOrSubtract(k),d=d.addOrSubtract(S)}return[s,d]}toString(){let e="";for(let n=this.getDegree();n>=0;n--){let s=this.getCoefficient(n);if(s!==0){if(s<0?(e+=" - ",s=-s):e.length>0&&(e+=" + "),n===0||s!==1){const d=this.field.log(s);d===0?e+="1":d===1?e+="a":(e+="a^",e+=d)}n!==0&&(n===1?e+="x":(e+="x^",e+=n))}}return e}}class et extends y{}et.kind="ArithmeticException";class Fe extends ze{constructor(e,n,s){super(),this.primitive=e,this.size=n,this.generatorBase=s;const d=new Int32Array(n);let u=1;for(let p=0;p<n;p++)d[p]=u,u*=2,u>=n&&(u^=e,u&=n-1);this.expTable=d;const f=new Int32Array(n);for(let p=0;p<n-1;p++)f[d[p]]=p;this.logTable=f,this.zero=new Be(this,Int32Array.from([0])),this.one=new Be(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new C;if(n===0)return this.zero;const s=new Int32Array(e+1);return s[0]=n,new Be(this,s)}inverse(e){if(e===0)throw new et;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+B.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}Fe.AZTEC_DATA_12=new Fe(4201,4096,1),Fe.AZTEC_DATA_10=new Fe(1033,1024,1),Fe.AZTEC_DATA_6=new Fe(67,64,1),Fe.AZTEC_PARAM=new Fe(19,16,1),Fe.QR_CODE_FIELD_256=new Fe(285,256,0),Fe.DATA_MATRIX_FIELD_256=new Fe(301,256,1),Fe.AZTEC_DATA_8=Fe.DATA_MATRIX_FIELD_256,Fe.MAXICODE_FIELD_64=Fe.AZTEC_DATA_6;class mt extends y{}mt.kind="ReedSolomonException";class Pe extends y{}Pe.kind="IllegalStateException";class de{constructor(e){this.field=e}decode(e,n){const s=this.field,d=new Be(s,e),u=new Int32Array(n);let f=!0;for(let te=0;te<n;te++){const he=d.evaluateAt(s.exp(te+s.getGeneratorBase()));u[u.length-1-te]=he,he!==0&&(f=!1)}if(f)return;const p=new Be(s,u),w=this.runEuclideanAlgorithm(s.buildMonomial(n,1),p,n),S=w[0],k=w[1],P=this.findErrorLocations(S),q=this.findErrorMagnitudes(k,P);for(let te=0;te<P.length;te++){const he=e.length-1-s.log(P[te]);if(he<0)throw new mt("Bad error location");e[he]=Fe.addOrSubtract(e[he],q[te])}}runEuclideanAlgorithm(e,n,s){if(e.getDegree()<n.getDegree()){const te=e;e=n,n=te}const d=this.field;let u=e,f=n,p=d.getZero(),w=d.getOne();for(;f.getDegree()>=(s/2|0);){let te=u,he=p;if(u=f,p=w,u.isZero())throw new mt("r_{i-1} was zero");f=te;let ge=d.getZero();const we=u.getCoefficient(u.getDegree()),Me=d.inverse(we);for(;f.getDegree()>=u.getDegree()&&!f.isZero();){const Ke=f.getDegree()-u.getDegree(),tt=d.multiply(f.getCoefficient(f.getDegree()),Me);ge=ge.addOrSubtract(d.buildMonomial(Ke,tt)),f=f.addOrSubtract(u.multiplyByMonomial(Ke,tt))}if(w=ge.multiply(p).addOrSubtract(he),f.getDegree()>=u.getDegree())throw new Pe("Division algorithm failed to reduce polynomial?")}const S=w.getCoefficient(0);if(S===0)throw new mt("sigmaTilde(0) was zero");const k=d.inverse(S),P=w.multiplyScalar(k),q=f.multiplyScalar(k);return[P,q]}findErrorLocations(e){const n=e.getDegree();if(n===1)return Int32Array.from([e.getCoefficient(1)]);const s=new Int32Array(n);let d=0;const u=this.field;for(let f=1;f<u.getSize()&&d<n;f++)e.evaluateAt(f)===0&&(s[d]=u.inverse(f),d++);if(d!==n)throw new mt("Error locator degree does not match number of roots");return s}findErrorMagnitudes(e,n){const s=n.length,d=new Int32Array(s),u=this.field;for(let f=0;f<s;f++){const p=u.inverse(n[f]);let w=1;for(let S=0;S<s;S++)if(f!==S){const k=u.multiply(n[S],p),P=k&1?k&-2:k|1;w=u.multiply(w,P)}d[f]=u.multiply(e.evaluateAt(p),u.inverse(w)),u.getGeneratorBase()!==0&&(d[f]=u.multiply(d[f],p))}return d}}var pt;(function(R){R[R.UPPER=0]="UPPER",R[R.LOWER=1]="LOWER",R[R.MIXED=2]="MIXED",R[R.DIGIT=3]="DIGIT",R[R.PUNCT=4]="PUNCT",R[R.BINARY=5]="BINARY"})(pt||(pt={}));class nt{decode(e){this.ddata=e;let n=e.getBits(),s=this.extractBits(n),d=this.correctBits(s),u=nt.convertBoolArrayToByteArray(d),f=nt.getEncodedData(d),p=new ke(u,f,null,null);return p.setNumBits(d.length),p}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let n=e.length,s=pt.UPPER,d=pt.UPPER,u="",f=0;for(;f<n;)if(d===pt.BINARY){if(n-f<5)break;let p=nt.readCode(e,f,5);if(f+=5,p===0){if(n-f<11)break;p=nt.readCode(e,f,11)+31,f+=11}for(let w=0;w<p;w++){if(n-f<8){f=n;break}const S=nt.readCode(e,f,8);u+=V.castAsNonUtf8Char(S),f+=8}d=s}else{let p=d===pt.DIGIT?4:5;if(n-f<p)break;let w=nt.readCode(e,f,p);f+=p;let S=nt.getCharacter(d,w);S.startsWith("CTRL_")?(s=d,d=nt.getTable(S.charAt(5)),S.charAt(6)==="L"&&(s=d)):(u+=S,d=s)}return u}static getTable(e){switch(e){case"L":return pt.LOWER;case"P":return pt.PUNCT;case"M":return pt.MIXED;case"D":return pt.DIGIT;case"B":return pt.BINARY;case"U":default:return pt.UPPER}}static getCharacter(e,n){switch(e){case pt.UPPER:return nt.UPPER_TABLE[n];case pt.LOWER:return nt.LOWER_TABLE[n];case pt.MIXED:return nt.MIXED_TABLE[n];case pt.PUNCT:return nt.PUNCT_TABLE[n];case pt.DIGIT:return nt.DIGIT_TABLE[n];default:throw new Pe("Bad table")}}correctBits(e){let n,s;this.ddata.getNbLayers()<=2?(s=6,n=Fe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(s=8,n=Fe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(s=10,n=Fe.AZTEC_DATA_10):(s=12,n=Fe.AZTEC_DATA_12);let d=this.ddata.getNbDatablocks(),u=e.length/s;if(u<d)throw new $;let f=e.length%s,p=new Int32Array(u);for(let q=0;q<u;q++,f+=s)p[q]=nt.readCode(e,f,s);try{new de(n).decode(p,u-d)}catch(q){throw new $(q)}let w=(1<<s)-1,S=0;for(let q=0;q<d;q++){let te=p[q];if(te===0||te===w)throw new $;(te===1||te===w-1)&&S++}let k=new Array(d*s-S),P=0;for(let q=0;q<d;q++){let te=p[q];if(te===1||te===w-1)k.fill(te>1,P,P+s-1),P+=s-1;else for(let he=s-1;he>=0;--he)k[P++]=(te&1<<he)!==0}return k}extractBits(e){let n=this.ddata.isCompact(),s=this.ddata.getNbLayers(),d=(n?11:14)+s*4,u=new Int32Array(d),f=new Array(this.totalBitsInLayer(s,n));if(n)for(let p=0;p<u.length;p++)u[p]=p;else{let p=d+1+2*B.truncDivision(B.truncDivision(d,2)-1,15),w=d/2,S=B.truncDivision(p,2);for(let k=0;k<w;k++){let P=k+B.truncDivision(k,15);u[w-k-1]=S-P-1,u[w+k]=S+P+1}}for(let p=0,w=0;p<s;p++){let S=(s-p)*4+(n?9:12),k=p*2,P=d-1-k;for(let q=0;q<S;q++){let te=q*2;for(let he=0;he<2;he++)f[w+te+he]=e.get(u[k+he],u[k+q]),f[w+2*S+te+he]=e.get(u[k+q],u[P-he]),f[w+4*S+te+he]=e.get(u[P-he],u[P-q]),f[w+6*S+te+he]=e.get(u[P-q],u[k+he])}w+=S*8}return f}static readCode(e,n,s){let d=0;for(let u=n;u<n+s;u++)d<<=1,e[u]&&(d|=1);return d}static readByte(e,n){let s=e.length-n;return s>=8?nt.readCode(e,n,8):nt.readCode(e,n,s)<<8-s}static convertBoolArrayToByteArray(e){let n=new Uint8Array((e.length+7)/8);for(let s=0;s<n.length;s++)n[s]=nt.readByte(e,8*s);return n}totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}nt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],nt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],nt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],nt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],nt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class He{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,n,s,d){const u=e-s,f=n-d;return Math.sqrt(u*u+f*f)}static sum(e){let n=0;for(let s=0,d=e.length;s!==d;s++){const u=e[s];n+=u}return n}}class st{static floatToIntBits(e){return e}}st.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Re{constructor(e,n){this.x=e,this.y=n}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof Re){const n=e;return this.x===n.x&&this.y===n.y}return!1}hashCode(){return 31*st.floatToIntBits(this.x)+st.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const n=this.distance(e[0],e[1]),s=this.distance(e[1],e[2]),d=this.distance(e[0],e[2]);let u,f,p;if(s>=n&&s>=d?(f=e[0],u=e[1],p=e[2]):d>=s&&d>=n?(f=e[1],u=e[0],p=e[2]):(f=e[2],u=e[0],p=e[1]),this.crossProductZ(u,f,p)<0){const w=u;u=p,p=w}e[0]=u,e[1]=f,e[2]=p}static distance(e,n){return He.distance(e.x,e.y,n.x,n.y)}static crossProductZ(e,n,s){const d=n.x,u=n.y;return(s.x-d)*(e.y-u)-(s.y-u)*(e.x-d)}}class rt{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class ht extends rt{constructor(e,n,s,d,u){super(e,n),this.compact=s,this.nbDatablocks=d,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class dt{constructor(e,n,s,d){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),n==null&&(n=dt.INIT_SIZE),s==null&&(s=e.getWidth()/2|0),d==null&&(d=e.getHeight()/2|0);const u=n/2|0;if(this.leftInit=s-u,this.rightInit=s+u,this.upInit=d-u,this.downInit=d+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ne}detect(){let e=this.leftInit,n=this.rightInit,s=this.upInit,d=this.downInit,u=!1,f=!0,p=!1,w=!1,S=!1,k=!1,P=!1;const q=this.width,te=this.height;for(;f;){f=!1;let he=!0;for(;(he||!w)&&n<q;)he=this.containsBlackPoint(s,d,n,!1),he?(n++,f=!0,w=!0):w||n++;if(n>=q){u=!0;break}let ge=!0;for(;(ge||!S)&&d<te;)ge=this.containsBlackPoint(e,n,d,!0),ge?(d++,f=!0,S=!0):S||d++;if(d>=te){u=!0;break}let we=!0;for(;(we||!k)&&e>=0;)we=this.containsBlackPoint(s,d,e,!1),we?(e--,f=!0,k=!0):k||e--;if(e<0){u=!0;break}let Me=!0;for(;(Me||!P)&&s>=0;)Me=this.containsBlackPoint(e,n,s,!0),Me?(s--,f=!0,P=!0):P||s--;if(s<0){u=!0;break}f&&(p=!0)}if(!u&&p){const he=n-e;let ge=null;for(let tt=1;ge===null&&tt<he;tt++)ge=this.getBlackPointOnSegment(e,d-tt,e+tt,d);if(ge==null)throw new ne;let we=null;for(let tt=1;we===null&&tt<he;tt++)we=this.getBlackPointOnSegment(e,s+tt,e+tt,s);if(we==null)throw new ne;let Me=null;for(let tt=1;Me===null&&tt<he;tt++)Me=this.getBlackPointOnSegment(n,s+tt,n-tt,s);if(Me==null)throw new ne;let Ke=null;for(let tt=1;Ke===null&&tt<he;tt++)Ke=this.getBlackPointOnSegment(n,d-tt,n-tt,d);if(Ke==null)throw new ne;return this.centerEdges(Ke,ge,Me,we)}else throw new ne}getBlackPointOnSegment(e,n,s,d){const u=He.round(He.distance(e,n,s,d)),f=(s-e)/u,p=(d-n)/u,w=this.image;for(let S=0;S<u;S++){const k=He.round(e+S*f),P=He.round(n+S*p);if(w.get(k,P))return new Re(k,P)}return null}centerEdges(e,n,s,d){const u=e.getX(),f=e.getY(),p=n.getX(),w=n.getY(),S=s.getX(),k=s.getY(),P=d.getX(),q=d.getY(),te=dt.CORR;return u<this.width/2?[new Re(P-te,q+te),new Re(p+te,w+te),new Re(S-te,k-te),new Re(u+te,f-te)]:[new Re(P+te,q+te),new Re(p+te,w-te),new Re(S-te,k+te),new Re(u-te,f-te)]}containsBlackPoint(e,n,s,d){const u=this.image;if(d){for(let f=e;f<=n;f++)if(u.get(f,s))return!0}else for(let f=e;f<=n;f++)if(u.get(s,f))return!0;return!1}}dt.INIT_SIZE=10,dt.CORR=1;class It{static checkAndNudgePoints(e,n){const s=e.getWidth(),d=e.getHeight();let u=!0;for(let f=0;f<n.length&&u;f+=2){const p=Math.floor(n[f]),w=Math.floor(n[f+1]);if(p<-1||p>s||w<-1||w>d)throw new ne;u=!1,p===-1?(n[f]=0,u=!0):p===s&&(n[f]=s-1,u=!0),w===-1?(n[f+1]=0,u=!0):w===d&&(n[f+1]=d-1,u=!0)}u=!0;for(let f=n.length-2;f>=0&&u;f-=2){const p=Math.floor(n[f]),w=Math.floor(n[f+1]);if(p<-1||p>s||w<-1||w>d)throw new ne;u=!1,p===-1?(n[f]=0,u=!0):p===s&&(n[f]=s-1,u=!0),w===-1?(n[f+1]=0,u=!0):w===d&&(n[f+1]=d-1,u=!0)}}}class At{constructor(e,n,s,d,u,f,p,w,S){this.a11=e,this.a21=n,this.a31=s,this.a12=d,this.a22=u,this.a32=f,this.a13=p,this.a23=w,this.a33=S}static quadrilateralToQuadrilateral(e,n,s,d,u,f,p,w,S,k,P,q,te,he,ge,we){const Me=At.quadrilateralToSquare(e,n,s,d,u,f,p,w);return At.squareToQuadrilateral(S,k,P,q,te,he,ge,we).times(Me)}transformPoints(e){const n=e.length,s=this.a11,d=this.a12,u=this.a13,f=this.a21,p=this.a22,w=this.a23,S=this.a31,k=this.a32,P=this.a33;for(let q=0;q<n;q+=2){const te=e[q],he=e[q+1],ge=u*te+w*he+P;e[q]=(s*te+f*he+S)/ge,e[q+1]=(d*te+p*he+k)/ge}}transformPointsWithValues(e,n){const s=this.a11,d=this.a12,u=this.a13,f=this.a21,p=this.a22,w=this.a23,S=this.a31,k=this.a32,P=this.a33,q=e.length;for(let te=0;te<q;te++){const he=e[te],ge=n[te],we=u*he+w*ge+P;e[te]=(s*he+f*ge+S)/we,n[te]=(d*he+p*ge+k)/we}}static squareToQuadrilateral(e,n,s,d,u,f,p,w){const S=e-s+u-p,k=n-d+f-w;if(S===0&&k===0)return new At(s-e,u-s,e,d-n,f-d,n,0,0,1);{const P=s-u,q=p-u,te=d-f,he=w-f,ge=P*he-q*te,we=(S*he-q*k)/ge,Me=(P*k-S*te)/ge;return new At(s-e+we*s,p-e+Me*p,e,d-n+we*d,w-n+Me*w,n,we,Me,1)}}static quadrilateralToSquare(e,n,s,d,u,f,p,w){return At.squareToQuadrilateral(e,n,s,d,u,f,p,w).buildAdjoint()}buildAdjoint(){return new At(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new At(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class Vt extends It{sampleGrid(e,n,s,d,u,f,p,w,S,k,P,q,te,he,ge,we,Me,Ke,tt){const Qe=At.quadrilateralToQuadrilateral(d,u,f,p,w,S,k,P,q,te,he,ge,we,Me,Ke,tt);return this.sampleGridWithTransform(e,n,s,Qe)}sampleGridWithTransform(e,n,s,d){if(n<=0||s<=0)throw new ne;const u=new le(n,s),f=new Float32Array(2*n);for(let p=0;p<s;p++){const w=f.length,S=p+.5;for(let k=0;k<w;k+=2)f[k]=k/2+.5,f[k+1]=S;d.transformPoints(f),It.checkAndNudgePoints(e,f);try{for(let k=0;k<w;k+=2)e.get(Math.floor(f[k]),Math.floor(f[k+1]))&&u.set(k/2,p)}catch{throw new ne}}return u}}class Rt{static setGridSampler(e){Rt.gridSampler=e}static getInstance(){return Rt.gridSampler}}Rt.gridSampler=new Vt;class ft{constructor(e,n){this.x=e,this.y=n}toResultPoint(){return new Re(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Bt{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let n=this.getMatrixCenter(),s=this.getBullsEyeCorners(n);if(e){let f=s[0];s[0]=s[2],s[2]=f}this.extractParameters(s);let d=this.sampleGrid(this.image,s[this.shift%4],s[(this.shift+1)%4],s[(this.shift+2)%4],s[(this.shift+3)%4]),u=this.getMatrixCornerPoints(s);return new ht(d,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new ne;let n=2*this.nbCenterLayers,s=new Int32Array([this.sampleLine(e[0],e[1],n),this.sampleLine(e[1],e[2],n),this.sampleLine(e[2],e[3],n),this.sampleLine(e[3],e[0],n)]);this.shift=this.getRotation(s,n);let d=0;for(let f=0;f<4;f++){let p=s[(this.shift+f)%4];this.compact?(d<<=7,d+=p>>1&127):(d<<=10,d+=(p>>2&992)+(p>>1&31))}let u=this.getCorrectedParameterData(d,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(e,n){let s=0;e.forEach((d,u,f)=>{let p=(d>>n-2<<1)+(d&1);s=(s<<3)+p}),s=((s&1)<<11)+(s>>1);for(let d=0;d<4;d++)if(B.bitCount(s^this.EXPECTED_CORNER_BITS[d])<=2)return d;throw new ne}getCorrectedParameterData(e,n){let s,d;n?(s=7,d=2):(s=10,d=4);let u=s-d,f=new Int32Array(s);for(let w=s-1;w>=0;--w)f[w]=e&15,e>>=4;try{new de(Fe.AZTEC_PARAM).decode(f,u)}catch{throw new ne}let p=0;for(let w=0;w<d;w++)p=(p<<4)+f[w];return p}getBullsEyeCorners(e){let n=e,s=e,d=e,u=e,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let P=this.getFirstDifferent(n,f,1,-1),q=this.getFirstDifferent(s,f,1,1),te=this.getFirstDifferent(d,f,-1,1),he=this.getFirstDifferent(u,f,-1,-1);if(this.nbCenterLayers>2){let ge=this.distancePoint(he,P)*this.nbCenterLayers/(this.distancePoint(u,n)*(this.nbCenterLayers+2));if(ge<.75||ge>1.25||!this.isWhiteOrBlackRectangle(P,q,te,he))break}n=P,s=q,d=te,u=he,f=!f}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ne;this.compact=this.nbCenterLayers===5;let p=new Re(n.getX()+.5,n.getY()-.5),w=new Re(s.getX()+.5,s.getY()+.5),S=new Re(d.getX()-.5,d.getY()+.5),k=new Re(u.getX()-.5,u.getY()-.5);return this.expandSquare([p,w,S,k],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,n,s,d;try{let p=new dt(this.image).detect();e=p[0],n=p[1],s=p[2],d=p[3]}catch{let w=this.image.getWidth()/2,S=this.image.getHeight()/2;e=this.getFirstDifferent(new ft(w+7,S-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new ft(w+7,S+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new ft(w-7,S+7),!1,-1,1).toResultPoint(),d=this.getFirstDifferent(new ft(w-7,S-7),!1,-1,-1).toResultPoint()}let u=He.round((e.getX()+d.getX()+n.getX()+s.getX())/4),f=He.round((e.getY()+d.getY()+n.getY()+s.getY())/4);try{let p=new dt(this.image,15,u,f).detect();e=p[0],n=p[1],s=p[2],d=p[3]}catch{e=this.getFirstDifferent(new ft(u+7,f-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new ft(u+7,f+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new ft(u-7,f+7),!1,-1,1).toResultPoint(),d=this.getFirstDifferent(new ft(u-7,f-7),!1,-1,-1).toResultPoint()}return u=He.round((e.getX()+d.getX()+n.getX()+s.getX())/4),f=He.round((e.getY()+d.getY()+n.getY()+s.getY())/4),new ft(u,f)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,n,s,d,u){let f=Rt.getInstance(),p=this.getDimension(),w=p/2-this.nbCenterLayers,S=p/2+this.nbCenterLayers;return f.sampleGrid(e,p,p,w,w,S,w,S,S,w,S,n.getX(),n.getY(),s.getX(),s.getY(),d.getX(),d.getY(),u.getX(),u.getY())}sampleLine(e,n,s){let d=0,u=this.distanceResultPoint(e,n),f=u/s,p=e.getX(),w=e.getY(),S=f*(n.getX()-e.getX())/u,k=f*(n.getY()-e.getY())/u;for(let P=0;P<s;P++)this.image.get(He.round(p+P*S),He.round(w+P*k))&&(d|=1<<s-P-1);return d}isWhiteOrBlackRectangle(e,n,s,d){let u=3;e=new ft(e.getX()-u,e.getY()+u),n=new ft(n.getX()-u,n.getY()-u),s=new ft(s.getX()+u,s.getY()-u),d=new ft(d.getX()+u,d.getY()+u);let f=this.getColor(d,e);if(f===0)return!1;let p=this.getColor(e,n);return p!==f||(p=this.getColor(n,s),p!==f)?!1:(p=this.getColor(s,d),p===f)}getColor(e,n){let s=this.distancePoint(e,n),d=(n.getX()-e.getX())/s,u=(n.getY()-e.getY())/s,f=0,p=e.getX(),w=e.getY(),S=this.image.get(e.getX(),e.getY()),k=Math.ceil(s);for(let q=0;q<k;q++)p+=d,w+=u,this.image.get(He.round(p),He.round(w))!==S&&f++;let P=f/s;return P>.1&&P<.9?0:P<=.1===S?1:-1}getFirstDifferent(e,n,s,d){let u=e.getX()+s,f=e.getY()+d;for(;this.isValid(u,f)&&this.image.get(u,f)===n;)u+=s,f+=d;for(u-=s,f-=d;this.isValid(u,f)&&this.image.get(u,f)===n;)u+=s;for(u-=s;this.isValid(u,f)&&this.image.get(u,f)===n;)f+=d;return f-=d,new ft(u,f)}expandSquare(e,n,s){let d=s/(2*n),u=e[0].getX()-e[2].getX(),f=e[0].getY()-e[2].getY(),p=(e[0].getX()+e[2].getX())/2,w=(e[0].getY()+e[2].getY())/2,S=new Re(p+d*u,w+d*f),k=new Re(p-d*u,w-d*f);u=e[1].getX()-e[3].getX(),f=e[1].getY()-e[3].getY(),p=(e[1].getX()+e[3].getX())/2,w=(e[1].getY()+e[3].getY())/2;let P=new Re(p+d*u,w+d*f),q=new Re(p-d*u,w-d*f);return[S,P,k,q]}isValid(e,n){return e>=0&&e<this.image.getWidth()&&n>0&&n<this.image.getHeight()}isValidPoint(e){let n=He.round(e.getX()),s=He.round(e.getY());return this.isValid(n,s)}distancePoint(e,n){return He.distance(e.getX(),e.getY(),n.getX(),n.getY())}distanceResultPoint(e,n){return He.distance(e.getX(),e.getY(),n.getX(),n.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(B.truncDivision(this.nbLayers-4,8)+1)+15}}class at{decode(e,n=null){let s=null,d=new Bt(e.getBlackMatrix()),u=null,f=null;try{let k=d.detectMirror(!1);u=k.getPoints(),this.reportFoundResultPoints(n,u),f=new nt().decode(k)}catch(k){s=k}if(f==null)try{let k=d.detectMirror(!0);u=k.getPoints(),this.reportFoundResultPoints(n,u),f=new nt().decode(k)}catch(k){throw s??k}let p=new K(f.getText(),f.getRawBytes(),f.getNumBits(),u,ae.AZTEC,_.currentTimeMillis()),w=f.getByteSegments();w!=null&&p.putMetadata(Ae.BYTE_SEGMENTS,w);let S=f.getECLevel();return S!=null&&p.putMetadata(Ae.ERROR_CORRECTION_LEVEL,S),p}reportFoundResultPoints(e,n){if(e!=null){let s=e.get(xe.NEED_RESULT_POINT_CALLBACK);s!=null&&n.forEach((d,u,f)=>{s.foundPossibleResultPoint(d)})}}reset(){}}class Ar extends W{constructor(e=500){super(new at,e)}}class St{decode(e,n){try{return this.doDecode(e,n)}catch{if(n&&n.get(xe.TRY_HARDER)===!0&&e.isRotateSupported()){const u=e.rotateCounterClockwise(),f=this.doDecode(u,n),p=f.getResultMetadata();let w=270;p!==null&&p.get(Ae.ORIENTATION)===!0&&(w=w+p.get(Ae.ORIENTATION)%360),f.putMetadata(Ae.ORIENTATION,w);const S=f.getResultPoints();if(S!==null){const k=u.getHeight();for(let P=0;P<S.length;P++)S[P]=new Re(k-S[P].getY()-1,S[P].getX())}return f}else throw new ne}}reset(){}doDecode(e,n){const s=e.getWidth(),d=e.getHeight();let u=new Z(s);const f=n&&n.get(xe.TRY_HARDER)===!0,p=Math.max(1,d>>(f?8:5));let w;f?w=d:w=15;const S=Math.trunc(d/2);for(let k=0;k<w;k++){const P=Math.trunc((k+1)/2),q=(k&1)===0,te=S+p*(q?P:-P);if(te<0||te>=d)break;try{u=e.getBlackRow(te,u)}catch{continue}for(let he=0;he<2;he++){if(he===1&&(u.reverse(),n&&n.get(xe.NEED_RESULT_POINT_CALLBACK)===!0)){const ge=new Map;n.forEach((we,Me)=>ge.set(Me,we)),ge.delete(xe.NEED_RESULT_POINT_CALLBACK),n=ge}try{const ge=this.decodeRow(te,u,n);if(he===1){ge.putMetadata(Ae.ORIENTATION,180);const we=ge.getResultPoints();we!==null&&(we[0]=new Re(s-we[0].getX()-1,we[0].getY()),we[1]=new Re(s-we[1].getX()-1,we[1].getY()))}return ge}catch{}}}throw new ne}static recordPattern(e,n,s){const d=s.length;for(let S=0;S<d;S++)s[S]=0;const u=e.getSize();if(n>=u)throw new ne;let f=!e.get(n),p=0,w=n;for(;w<u;){if(e.get(w)!==f)s[p]++;else{if(++p===d)break;s[p]=1,f=!f}w++}if(!(p===d||p===d-1&&w===u))throw new ne}static recordPatternInReverse(e,n,s){let d=s.length,u=e.get(n);for(;n>0&&d>=0;)e.get(--n)!==u&&(d--,u=!u);if(d>=0)throw new ne;St.recordPattern(e,n+1,s)}static patternMatchVariance(e,n,s){const d=e.length;let u=0,f=0;for(let S=0;S<d;S++)u+=e[S],f+=n[S];if(u<f)return Number.POSITIVE_INFINITY;const p=u/f;s*=p;let w=0;for(let S=0;S<d;S++){const k=e[S],P=n[S]*p,q=k>P?k-P:P-k;if(q>s)return Number.POSITIVE_INFINITY;w+=q}return w/u}}class it extends St{static findStartPattern(e){const n=e.getSize(),s=e.getNextSet(0);let d=0,u=Int32Array.from([0,0,0,0,0,0]),f=s,p=!1;const w=6;for(let S=s;S<n;S++)if(e.get(S)!==p)u[d]++;else{if(d===w-1){let k=it.MAX_AVG_VARIANCE,P=-1;for(let q=it.CODE_START_A;q<=it.CODE_START_C;q++){const te=St.patternMatchVariance(u,it.CODE_PATTERNS[q],it.MAX_INDIVIDUAL_VARIANCE);te<k&&(k=te,P=q)}if(P>=0&&e.isRange(Math.max(0,f-(S-f)/2),f,!1))return Int32Array.from([f,S,P]);f+=u[0]+u[1],u=u.slice(2,u.length-1),u[d-1]=0,u[d]=0,d--}else d++;u[d]=1,p=!p}throw new ne}static decodeCode(e,n,s){St.recordPattern(e,s,n);let d=it.MAX_AVG_VARIANCE,u=-1;for(let f=0;f<it.CODE_PATTERNS.length;f++){const p=it.CODE_PATTERNS[f],w=this.patternMatchVariance(n,p,it.MAX_INDIVIDUAL_VARIANCE);w<d&&(d=w,u=f)}if(u>=0)return u;throw new ne}decodeRow(e,n,s){const d=s&&s.get(xe.ASSUME_GS1)===!0,u=it.findStartPattern(n),f=u[2];let p=0;const w=new Uint8Array(20);w[p++]=f;let S;switch(f){case it.CODE_START_A:S=it.CODE_CODE_A;break;case it.CODE_START_B:S=it.CODE_CODE_B;break;case it.CODE_START_C:S=it.CODE_CODE_C;break;default:throw new $}let k=!1,P=!1,q="",te=u[0],he=u[1];const ge=Int32Array.from([0,0,0,0,0,0]);let we=0,Me=0,Ke=f,tt=0,Qe=!0,Xt=!1,kt=!1;for(;!k;){const vi=P;switch(P=!1,we=Me,Me=it.decodeCode(n,ge,he),w[p++]=Me,Me!==it.CODE_STOP&&(Qe=!0),Me!==it.CODE_STOP&&(tt++,Ke+=tt*Me),te=he,he+=ge.reduce((Qn,Jn)=>Qn+Jn,0),Me){case it.CODE_START_A:case it.CODE_START_B:case it.CODE_START_C:throw new $}switch(S){case it.CODE_CODE_A:if(Me<64)kt===Xt?q+=String.fromCharCode(32+Me):q+=String.fromCharCode(32+Me+128),kt=!1;else if(Me<96)kt===Xt?q+=String.fromCharCode(Me-64):q+=String.fromCharCode(Me+64),kt=!1;else switch(Me!==it.CODE_STOP&&(Qe=!1),Me){case it.CODE_FNC_1:d&&(q.length===0?q+="]C1":q+="");break;case it.CODE_FNC_2:case it.CODE_FNC_3:break;case it.CODE_FNC_4_A:!Xt&&kt?(Xt=!0,kt=!1):Xt&&kt?(Xt=!1,kt=!1):kt=!0;break;case it.CODE_SHIFT:P=!0,S=it.CODE_CODE_B;break;case it.CODE_CODE_B:S=it.CODE_CODE_B;break;case it.CODE_CODE_C:S=it.CODE_CODE_C;break;case it.CODE_STOP:k=!0;break}break;case it.CODE_CODE_B:if(Me<96)kt===Xt?q+=String.fromCharCode(32+Me):q+=String.fromCharCode(32+Me+128),kt=!1;else switch(Me!==it.CODE_STOP&&(Qe=!1),Me){case it.CODE_FNC_1:d&&(q.length===0?q+="]C1":q+="");break;case it.CODE_FNC_2:case it.CODE_FNC_3:break;case it.CODE_FNC_4_B:!Xt&&kt?(Xt=!0,kt=!1):Xt&&kt?(Xt=!1,kt=!1):kt=!0;break;case it.CODE_SHIFT:P=!0,S=it.CODE_CODE_A;break;case it.CODE_CODE_A:S=it.CODE_CODE_A;break;case it.CODE_CODE_C:S=it.CODE_CODE_C;break;case it.CODE_STOP:k=!0;break}break;case it.CODE_CODE_C:if(Me<100)Me<10&&(q+="0"),q+=Me;else switch(Me!==it.CODE_STOP&&(Qe=!1),Me){case it.CODE_FNC_1:d&&(q.length===0?q+="]C1":q+="");break;case it.CODE_CODE_A:S=it.CODE_CODE_A;break;case it.CODE_CODE_B:S=it.CODE_CODE_B;break;case it.CODE_STOP:k=!0;break}break}vi&&(S=S===it.CODE_CODE_A?it.CODE_CODE_B:it.CODE_CODE_A)}const Yr=he-te;if(he=n.getNextUnset(he),!n.isRange(he,Math.min(n.getSize(),he+(he-te)/2),!1))throw new ne;if(Ke-=tt*we,Ke%103!==we)throw new A;const fn=q.length;if(fn===0)throw new ne;fn>0&&Qe&&(S===it.CODE_CODE_C?q=q.substring(0,fn-2):q=q.substring(0,fn-1));const Vr=(u[1]+u[0])/2,rr=te+Yr/2,Ur=w.length,tn=new Uint8Array(Ur);for(let vi=0;vi<Ur;vi++)tn[vi]=w[vi];const Yn=[new Re(Vr,e),new Re(rr,e)];return new K(q,tn,0,Yn,ae.CODE_128,new Date().getTime())}}it.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],it.MAX_AVG_VARIANCE=.25,it.MAX_INDIVIDUAL_VARIANCE=.7,it.CODE_SHIFT=98,it.CODE_CODE_C=99,it.CODE_CODE_B=100,it.CODE_CODE_A=101,it.CODE_FNC_1=102,it.CODE_FNC_2=97,it.CODE_FNC_3=96,it.CODE_FNC_4_A=101,it.CODE_FNC_4_B=100,it.CODE_START_A=103,it.CODE_START_B=104,it.CODE_START_C=105,it.CODE_STOP=106;class Dt extends St{constructor(e=!1,n=!1){super(),this.usingCheckDigit=e,this.extendedMode=n,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,n,s){let d=this.counters;d.fill(0),this.decodeRowResult="";let u=Dt.findAsteriskPattern(n,d),f=n.getNextSet(u[1]),p=n.getSize(),w,S;do{Dt.recordPattern(n,f,d);let ge=Dt.toNarrowWidePattern(d);if(ge<0)throw new ne;w=Dt.patternToChar(ge),this.decodeRowResult+=w,S=f;for(let we of d)f+=we;f=n.getNextSet(f)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let k=0;for(let ge of d)k+=ge;let P=f-S-k;if(f!==p&&P*2<k)throw new ne;if(this.usingCheckDigit){let ge=this.decodeRowResult.length-1,we=0;for(let Me=0;Me<ge;Me++)we+=Dt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Me));if(this.decodeRowResult.charAt(ge)!==Dt.ALPHABET_STRING.charAt(we%43))throw new A;this.decodeRowResult=this.decodeRowResult.substring(0,ge)}if(this.decodeRowResult.length===0)throw new ne;let q;this.extendedMode?q=Dt.decodeExtended(this.decodeRowResult):q=this.decodeRowResult;let te=(u[1]+u[0])/2,he=S+k/2;return new K(q,null,0,[new Re(te,e),new Re(he,e)],ae.CODE_39,new Date().getTime())}static findAsteriskPattern(e,n){let s=e.getSize(),d=e.getNextSet(0),u=0,f=d,p=!1,w=n.length;for(let S=d;S<s;S++)if(e.get(S)!==p)n[u]++;else{if(u===w-1){if(this.toNarrowWidePattern(n)===Dt.ASTERISK_ENCODING&&e.isRange(Math.max(0,f-Math.floor((S-f)/2)),f,!1))return[f,S];f+=n[0]+n[1],n.copyWithin(0,2,2+u-1),n[u-1]=0,n[u]=0,u--}else u++;n[u]=1,p=!p}throw new ne}static toNarrowWidePattern(e){let n=e.length,s=0,d;do{let u=2147483647;for(let w of e)w<u&&w>s&&(u=w);s=u,d=0;let f=0,p=0;for(let w=0;w<n;w++){let S=e[w];S>s&&(p|=1<<n-1-w,d++,f+=S)}if(d===3){for(let w=0;w<n&&d>0;w++){let S=e[w];if(S>s&&(d--,S*2>=f))return-1}return p}}while(d>3);return-1}static patternToChar(e){for(let n=0;n<Dt.CHARACTER_ENCODINGS.length;n++)if(Dt.CHARACTER_ENCODINGS[n]===e)return Dt.ALPHABET_STRING.charAt(n);if(e===Dt.ASTERISK_ENCODING)return"*";throw new ne}static decodeExtended(e){let n=e.length,s="";for(let d=0;d<n;d++){let u=e.charAt(d);if(u==="+"||u==="$"||u==="%"||u==="/"){let f=e.charAt(d+1),p="\0";switch(u){case"+":if(f>="A"&&f<="Z")p=String.fromCharCode(f.charCodeAt(0)+32);else throw new $;break;case"$":if(f>="A"&&f<="Z")p=String.fromCharCode(f.charCodeAt(0)-64);else throw new $;break;case"%":if(f>="A"&&f<="E")p=String.fromCharCode(f.charCodeAt(0)-38);else if(f>="F"&&f<="J")p=String.fromCharCode(f.charCodeAt(0)-11);else if(f>="K"&&f<="O")p=String.fromCharCode(f.charCodeAt(0)+16);else if(f>="P"&&f<="T")p=String.fromCharCode(f.charCodeAt(0)+43);else if(f==="U")p="\0";else if(f==="V")p="@";else if(f==="W")p="`";else if(f==="X"||f==="Y"||f==="Z")p="";else throw new $;break;case"/":if(f>="A"&&f<="O")p=String.fromCharCode(f.charCodeAt(0)-32);else if(f==="Z")p=":";else throw new $;break}s+=p,d++}else s+=u}return s}}Dt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Dt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Dt.ASTERISK_ENCODING=148;class Tt extends St{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,n,s){let d=this.decodeStart(n),u=this.decodeEnd(n),f=new oe;Tt.decodeMiddle(n,d[1],u[0],f);let p=f.toString(),w=null;s!=null&&(w=s.get(xe.ALLOWED_LENGTHS)),w==null&&(w=Tt.DEFAULT_ALLOWED_LENGTHS);let S=p.length,k=!1,P=0;for(let he of w){if(S===he){k=!0;break}he>P&&(P=he)}if(!k&&S>P&&(k=!0),!k)throw new $;const q=[new Re(d[1],e),new Re(u[0],e)];return new K(p,null,0,q,ae.ITF,new Date().getTime())}static decodeMiddle(e,n,s,d){let u=new Int32Array(10),f=new Int32Array(5),p=new Int32Array(5);for(u.fill(0),f.fill(0),p.fill(0);n<s;){St.recordPattern(e,n,u);for(let S=0;S<5;S++){let k=2*S;f[S]=u[k],p[S]=u[k+1]}let w=Tt.decodeDigit(f);d.append(w.toString()),w=this.decodeDigit(p),d.append(w.toString()),u.forEach(function(S){n+=S})}}decodeStart(e){let n=Tt.skipWhiteSpace(e),s=Tt.findGuardPattern(e,n,Tt.START_PATTERN);return this.narrowLineWidth=(s[1]-s[0])/4,this.validateQuietZone(e,s[0]),s}validateQuietZone(e,n){let s=this.narrowLineWidth*10;s=s<n?s:n;for(let d=n-1;s>0&&d>=0&&!e.get(d);d--)s--;if(s!==0)throw new ne}static skipWhiteSpace(e){const n=e.getSize(),s=e.getNextSet(0);if(s===n)throw new ne;return s}decodeEnd(e){e.reverse();try{let n=Tt.skipWhiteSpace(e),s;try{s=Tt.findGuardPattern(e,n,Tt.END_PATTERN_REVERSED[0])}catch(u){u instanceof ne&&(s=Tt.findGuardPattern(e,n,Tt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,s[0]);let d=s[0];return s[0]=e.getSize()-s[1],s[1]=e.getSize()-d,s}finally{e.reverse()}}static findGuardPattern(e,n,s){let d=s.length,u=new Int32Array(d),f=e.getSize(),p=!1,w=0,S=n;u.fill(0);for(let k=n;k<f;k++)if(e.get(k)!==p)u[w]++;else{if(w===d-1){if(St.patternMatchVariance(u,s,Tt.MAX_INDIVIDUAL_VARIANCE)<Tt.MAX_AVG_VARIANCE)return[S,k];S+=u[0]+u[1],_.arraycopy(u,2,u,0,w-1),u[w-1]=0,u[w]=0,w--}else w++;u[w]=1,p=!p}throw new ne}static decodeDigit(e){let n=Tt.MAX_AVG_VARIANCE,s=-1,d=Tt.PATTERNS.length;for(let u=0;u<d;u++){let f=Tt.PATTERNS[u],p=St.patternMatchVariance(e,f,Tt.MAX_INDIVIDUAL_VARIANCE);p<n?(n=p,s=u):p===n&&(s=-1)}if(s>=0)return s%10;throw new ne}}Tt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Tt.MAX_AVG_VARIANCE=.38,Tt.MAX_INDIVIDUAL_VARIANCE=.5,Tt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Tt.START_PATTERN=Int32Array.from([1,1,1,1]),Tt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class sr extends St{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let n=!1,s,d=0,u=Int32Array.from([0,0,0]);for(;!n;){u=Int32Array.from([0,0,0]),s=sr.findGuardPattern(e,d,!1,this.START_END_PATTERN,u);let f=s[0];d=s[1];let p=f-(d-f);p>=0&&(n=e.isRange(p,f,!1))}return s}static checkChecksum(e){return sr.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let s=parseInt(e.charAt(n-1),10);return sr.getStandardUPCEANChecksum(e.substring(0,n-1))===s}static getStandardUPCEANChecksum(e){let n=e.length,s=0;for(let d=n-1;d>=0;d-=2){let u=e.charAt(d).charCodeAt(0)-48;if(u<0||u>9)throw new $;s+=u}s*=3;for(let d=n-2;d>=0;d-=2){let u=e.charAt(d).charCodeAt(0)-48;if(u<0||u>9)throw new $;s+=u}return(1e3-s)%10}static decodeEnd(e,n){return sr.findGuardPattern(e,n,!1,sr.START_END_PATTERN,new Int32Array(sr.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,n,s,d){return this.findGuardPattern(e,n,s,d,new Int32Array(d.length))}static findGuardPattern(e,n,s,d,u){let f=e.getSize();n=s?e.getNextUnset(n):e.getNextSet(n);let p=0,w=n,S=d.length,k=s;for(let P=n;P<f;P++)if(e.get(P)!==k)u[p]++;else{if(p===S-1){if(St.patternMatchVariance(u,d,sr.MAX_INDIVIDUAL_VARIANCE)<sr.MAX_AVG_VARIANCE)return Int32Array.from([w,P]);w+=u[0]+u[1];let q=u.slice(2,u.length-1);for(let te=0;te<p-1;te++)u[te]=q[te];u[p-1]=0,u[p]=0,p--}else p++;u[p]=1,k=!k}throw new ne}static decodeDigit(e,n,s,d){this.recordPattern(e,s,n);let u=this.MAX_AVG_VARIANCE,f=-1,p=d.length;for(let w=0;w<p;w++){let S=d[w],k=St.patternMatchVariance(n,S,sr.MAX_INDIVIDUAL_VARIANCE);k<u&&(u=k,f=w)}if(f>=0)return f;throw new ne}}sr.MAX_AVG_VARIANCE=.48,sr.MAX_INDIVIDUAL_VARIANCE=.7,sr.START_END_PATTERN=Int32Array.from([1,1,1]),sr.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),sr.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),sr.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Qt{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,s){let d=this.decodeRowStringBuffer,u=this.decodeMiddle(n,s,d),f=d.toString(),p=Qt.parseExtensionString(f),w=[new Re((s[0]+s[1])/2,e),new Re(u,e)],S=new K(f,null,0,w,ae.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&S.putAllMetadata(p),S}decodeMiddle(e,n,s){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let u=e.getSize(),f=n[1],p=0;for(let S=0;S<5&&f<u;S++){let k=sr.decodeDigit(e,d,f,sr.L_AND_G_PATTERNS);s+=String.fromCharCode(48+k%10);for(let P of d)f+=P;k>=10&&(p|=1<<4-S),S!==4&&(f=e.getNextSet(f),f=e.getNextUnset(f))}if(s.length!==5)throw new ne;let w=this.determineCheckDigit(p);if(Qt.extensionChecksum(s.toString())!==w)throw new ne;return f}static extensionChecksum(e){let n=e.length,s=0;for(let d=n-2;d>=0;d-=2)s+=e.charAt(d).charCodeAt(0)-48;s*=3;for(let d=n-1;d>=0;d-=2)s+=e.charAt(d).charCodeAt(0)-48;return s*=3,s%10}determineCheckDigit(e){for(let n=0;n<10;n++)if(e===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new ne}static parseExtensionString(e){if(e.length!==5)return null;let n=Qt.parseExtension5String(e);return n==null?null:new Map([[Ae.SUGGESTED_PRICE,n]])}static parseExtension5String(e){let n;switch(e.charAt(0)){case"0":n="£";break;case"5":n="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n="";break}let s=parseInt(e.substring(1)),d=(s/100).toString(),u=s%100,f=u<10?"0"+u:u.toString();return n+d+"."+f}}class Ti{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,s){let d=this.decodeRowStringBuffer,u=this.decodeMiddle(n,s,d),f=d.toString(),p=Ti.parseExtensionString(f),w=[new Re((s[0]+s[1])/2,e),new Re(u,e)],S=new K(f,null,0,w,ae.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&S.putAllMetadata(p),S}decodeMiddle(e,n,s){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let u=e.getSize(),f=n[1],p=0;for(let w=0;w<2&&f<u;w++){let S=sr.decodeDigit(e,d,f,sr.L_AND_G_PATTERNS);s+=String.fromCharCode(48+S%10);for(let k of d)f+=k;S>=10&&(p|=1<<1-w),w!==1&&(f=e.getNextSet(f),f=e.getNextUnset(f))}if(s.length!==2)throw new ne;if(parseInt(s.toString())%4!==p)throw new ne;return f}static parseExtensionString(e){return e.length!==2?null:new Map([[Ae.ISSUE_NUMBER,parseInt(e)]])}}class jr{static decodeRow(e,n,s){let d=sr.findGuardPattern(n,s,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Qt().decodeRow(e,n,d)}catch{return new Ti().decodeRow(e,n,d)}}}jr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class qt extends sr{constructor(){super(),this.decodeRowStringBuffer="",qt.L_AND_G_PATTERNS=qt.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let n=qt.L_PATTERNS[e-10],s=new Int32Array(n.length);for(let d=0;d<n.length;d++)s[d]=n[n.length-d-1];qt.L_AND_G_PATTERNS[e]=s}}decodeRow(e,n,s){let d=qt.findStartGuardPattern(n),u=s==null?null:s.get(xe.NEED_RESULT_POINT_CALLBACK);if(u!=null){const Qe=new Re((d[0]+d[1])/2,e);u.foundPossibleResultPoint(Qe)}let f=this.decodeMiddle(n,d,this.decodeRowStringBuffer),p=f.rowOffset,w=f.resultString;if(u!=null){const Qe=new Re(p,e);u.foundPossibleResultPoint(Qe)}let S=this.decodeEnd(n,p);if(u!=null){const Qe=new Re((S[0]+S[1])/2,e);u.foundPossibleResultPoint(Qe)}let k=S[1],P=k+(k-S[0]);if(P>=n.getSize()||!n.isRange(k,P,!1))throw new ne;let q=w.toString();if(q.length<8)throw new $;if(!qt.checkChecksum(q))throw new A;let te=(d[1]+d[0])/2,he=(S[1]+S[0])/2,ge=this.getBarcodeFormat(),we=[new Re(te,e),new Re(he,e)],Me=new K(q,null,0,we,ge,new Date().getTime()),Ke=0;try{let Qe=jr.decodeRow(e,n,S[1]);Me.putMetadata(Ae.UPC_EAN_EXTENSION,Qe.getText()),Me.putAllMetadata(Qe.getResultMetadata()),Me.addResultPoints(Qe.getResultPoints()),Ke=Qe.getText().length}catch{}let tt=s==null?null:s.get(xe.ALLOWED_EAN_EXTENSIONS);if(tt!=null){let Qe=!1;for(let Xt in tt)if(Ke.toString()===Xt){Qe=!0;break}if(!Qe)throw new ne}return Me}decodeEnd(e,n){return qt.findGuardPattern(e,n,!1,qt.START_END_PATTERN,new Int32Array(qt.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return qt.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let s=parseInt(e.charAt(n-1),10);return qt.getStandardUPCEANChecksum(e.substring(0,n-1))===s}static getStandardUPCEANChecksum(e){let n=e.length,s=0;for(let d=n-1;d>=0;d-=2){let u=e.charAt(d).charCodeAt(0)-48;if(u<0||u>9)throw new $;s+=u}s*=3;for(let d=n-2;d>=0;d-=2){let u=e.charAt(d).charCodeAt(0)-48;if(u<0||u>9)throw new $;s+=u}return(1e3-s)%10}}class Cn extends qt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,s){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let u=e.getSize(),f=n[1],p=0;for(let S=0;S<6&&f<u;S++){let k=qt.decodeDigit(e,d,f,qt.L_AND_G_PATTERNS);s+=String.fromCharCode(48+k%10);for(let P of d)f+=P;k>=10&&(p|=1<<5-S)}s=Cn.determineFirstDigit(s,p),f=qt.findGuardPattern(e,f,!0,qt.MIDDLE_PATTERN,new Int32Array(qt.MIDDLE_PATTERN.length).fill(0))[1];for(let S=0;S<6&&f<u;S++){let k=qt.decodeDigit(e,d,f,qt.L_PATTERNS);s+=String.fromCharCode(48+k);for(let P of d)f+=P}return{rowOffset:f,resultString:s}}getBarcodeFormat(){return ae.EAN_13}static determineFirstDigit(e,n){for(let s=0;s<10;s++)if(n===this.FIRST_DIGIT_ENCODINGS[s])return e=String.fromCharCode(48+s)+e,e;throw new ne}}Cn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class _r extends qt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,s){const d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let u=e.getSize(),f=n[1];for(let w=0;w<4&&f<u;w++){let S=qt.decodeDigit(e,d,f,qt.L_PATTERNS);s+=String.fromCharCode(48+S);for(let k of d)f+=k}f=qt.findGuardPattern(e,f,!0,qt.MIDDLE_PATTERN,new Int32Array(qt.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<4&&f<u;w++){let S=qt.decodeDigit(e,d,f,qt.L_PATTERNS);s+=String.fromCharCode(48+S);for(let k of d)f+=k}return{rowOffset:f,resultString:s}}getBarcodeFormat(){return ae.EAN_8}}class Ot extends qt{constructor(){super(...arguments),this.ean13Reader=new Cn}getBarcodeFormat(){return ae.UPC_A}decode(e,n){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,n,s){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,n,s))}decodeMiddle(e,n,s){return this.ean13Reader.decodeMiddle(e,n,s)}maybeReturnResult(e){let n=e.getText();if(n.charAt(0)==="0"){let s=new K(n.substring(1),null,null,e.getResultPoints(),ae.UPC_A);return e.getResultMetadata()!=null&&s.putAllMetadata(e.getResultMetadata()),s}else throw new ne}reset(){this.ean13Reader.reset()}}class Gt extends qt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,n,s){const d=this.decodeMiddleCounters.map(S=>S);d[0]=0,d[1]=0,d[2]=0,d[3]=0;const u=e.getSize();let f=n[1],p=0;for(let S=0;S<6&&f<u;S++){const k=Gt.decodeDigit(e,d,f,Gt.L_AND_G_PATTERNS);s+=String.fromCharCode(48+k%10);for(let P of d)f+=P;k>=10&&(p|=1<<5-S)}let w=Gt.determineNumSysAndCheckDigit(s,p);return{rowOffset:f,resultString:w}}decodeEnd(e,n){return Gt.findGuardPatternWithoutCounters(e,n,!0,Gt.MIDDLE_END_PATTERN)}checkChecksum(e){return qt.checkChecksum(Gt.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,n){for(let s=0;s<=1;s++)for(let d=0;d<10;d++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[s][d]){let u=String.fromCharCode(48+s),f=String.fromCharCode(48+d);return u+e+f}throw ne.getNotFoundInstance()}getBarcodeFormat(){return ae.UPC_E}static convertUPCEtoUPCA(e){const n=e.slice(1,7).split("").map(u=>u.charCodeAt(0)),s=new oe;s.append(e.charAt(0));let d=n[5];switch(d){case 0:case 1:case 2:s.appendChars(n,0,2),s.append(d),s.append("0000"),s.appendChars(n,2,3);break;case 3:s.appendChars(n,0,3),s.append("00000"),s.appendChars(n,3,2);break;case 4:s.appendChars(n,0,4),s.append("00000"),s.append(n[4]);break;default:s.appendChars(n,0,5),s.append("0000"),s.append(d);break}return e.length>=8&&s.append(e.charAt(7)),s.toString()}}Gt.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Gt.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ji extends St{constructor(e){super();let n=e==null?null:e.get(xe.POSSIBLE_FORMATS),s=[];a(n)?(s.push(new Cn),s.push(new Ot),s.push(new _r),s.push(new Gt)):(n.indexOf(ae.EAN_13)>-1&&s.push(new Cn),n.indexOf(ae.UPC_A)>-1&&s.push(new Ot),n.indexOf(ae.EAN_8)>-1&&s.push(new _r),n.indexOf(ae.UPC_E)>-1&&s.push(new Gt)),this.readers=s}decodeRow(e,n,s){for(let d of this.readers)try{const u=d.decodeRow(e,n,s),f=u.getBarcodeFormat()===ae.EAN_13&&u.getText().charAt(0)==="0",p=s==null?null:s.get(xe.POSSIBLE_FORMATS),w=p==null||p.includes(ae.UPC_A);if(f&&w){const S=u.getRawBytes(),k=new K(u.getText().substring(1),S,S?S.length:null,u.getResultPoints(),ae.UPC_A);return k.putAllMetadata(u.getResultMetadata()),k}return u}catch{}throw new ne}reset(){for(let e of this.readers)e.reset()}}class nr extends St{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,n){for(let s=0;s<n.length;s++)if(St.patternMatchVariance(e,n[s],nr.MAX_INDIVIDUAL_VARIANCE)<nr.MAX_AVG_VARIANCE)return s;throw new ne}static count(e){return He.sum(new Int32Array(e))}static increment(e,n){let s=0,d=n[0];for(let u=1;u<e.length;u++)n[u]>d&&(d=n[u],s=u);e[s]++}static decrement(e,n){let s=0,d=n[0];for(let u=1;u<e.length;u++)n[u]<d&&(d=n[u],s=u);e[s]--}static isFinderPattern(e){let n=e[0]+e[1],s=n+e[2]+e[3],d=n/s;if(d>=nr.MIN_FINDER_PATTERN_RATIO&&d<=nr.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;for(let p of e)p>f&&(f=p),p<u&&(u=p);return f<10*u}return!1}}nr.MAX_AVG_VARIANCE=.2,nr.MAX_INDIVIDUAL_VARIANCE=.45,nr.MIN_FINDER_PATTERN_RATIO=9.5/12,nr.MAX_FINDER_PATTERN_RATIO=12.5/14;class Sn{constructor(e,n){this.value=e,this.checksumPortion=n}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Sn))return!1;const n=e;return this.value===n.value&&this.checksumPortion===n.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Hn{constructor(e,n,s,d,u){this.value=e,this.startEnd=n,this.value=e,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new Re(s,u)),this.resultPoints.push(new Re(d,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof Hn))return!1;const n=e;return this.value===n.value}hashCode(){return this.value}}class wt{constructor(){}static getRSSvalue(e,n,s){let d=0;for(let w of e)d+=w;let u=0,f=0,p=e.length;for(let w=0;w<p-1;w++){let S;for(S=1,f|=1<<w;S<e[w];S++,f&=~(1<<w)){let k=wt.combins(d-S-1,p-w-2);if(s&&f===0&&d-S-(p-w-1)>=p-w-1&&(k-=wt.combins(d-S-(p-w),p-w-2)),p-w-1>1){let P=0;for(let q=d-S-(p-w-2);q>n;q--)P+=wt.combins(d-S-q-1,p-w-3);k-=P*(p-1-w)}else d-S>n&&k--;u+=k}d-=S}return u}static combins(e,n){let s,d;e-n>n?(d=n,s=e-n):(d=e-n,s=n);let u=1,f=1;for(let p=e;p>s;p--)u*=p,f<=d&&(u/=f,f++);for(;f<=d;)u/=f,f++;return u}}class ni{static buildBitArray(e){let n=e.length*2-1;e[e.length-1].getRightChar()==null&&(n-=1);let s=12*n,d=new Z(s),u=0,p=e[0].getRightChar().getValue();for(let w=11;w>=0;--w)p&1<<w&&d.set(u),u++;for(let w=1;w<e.length;++w){let S=e[w],k=S.getLeftChar().getValue();for(let P=11;P>=0;--P)k&1<<P&&d.set(u),u++;if(S.getRightChar()!=null){let P=S.getRightChar().getValue();for(let q=11;q>=0;--q)P&1<<q&&d.set(u),u++}}return d}}class xn{constructor(e,n){n?this.decodedInformation=null:(this.finished=e,this.decodedInformation=n)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class yn{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class ir extends yn{constructor(e,n){super(e),this.value=n}getValue(){return this.value}isFNC1(){return this.value===ir.FNC1}}ir.FNC1="$";class yr extends yn{constructor(e,n,s){super(e),s?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=n}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Cr extends yn{constructor(e,n,s){if(super(e),n<0||n>10||s<0||s>10)throw new $;this.firstDigit=n,this.secondDigit=s}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Cr.FNC1}isSecondDigitFNC1(){return this.secondDigit===Cr.FNC1}isAnyFNC1(){return this.firstDigit===Cr.FNC1||this.secondDigit===Cr.FNC1}}Cr.FNC1=10;class ut{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new ne;let n=e.substring(0,2);for(let u of ut.TWO_DIGIT_DATA_LENGTH)if(u[0]===n)return u[1]===ut.VARIABLE_LENGTH?ut.processVariableAI(2,u[2],e):ut.processFixedAI(2,u[1],e);if(e.length<3)throw new ne;let s=e.substring(0,3);for(let u of ut.THREE_DIGIT_DATA_LENGTH)if(u[0]===s)return u[1]===ut.VARIABLE_LENGTH?ut.processVariableAI(3,u[2],e):ut.processFixedAI(3,u[1],e);for(let u of ut.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===s)return u[1]===ut.VARIABLE_LENGTH?ut.processVariableAI(4,u[2],e):ut.processFixedAI(4,u[1],e);if(e.length<4)throw new ne;let d=e.substring(0,4);for(let u of ut.FOUR_DIGIT_DATA_LENGTH)if(u[0]===d)return u[1]===ut.VARIABLE_LENGTH?ut.processVariableAI(4,u[2],e):ut.processFixedAI(4,u[1],e);throw new ne}static processFixedAI(e,n,s){if(s.length<e)throw new ne;let d=s.substring(0,e);if(s.length<e+n)throw new ne;let u=s.substring(e,e+n),f=s.substring(e+n),p="("+d+")"+u,w=ut.parseFieldsInGeneralPurpose(f);return w==null?p:p+w}static processVariableAI(e,n,s){let d=s.substring(0,e),u;s.length<e+n?u=s.length:u=e+n;let f=s.substring(e,u),p=s.substring(u),w="("+d+")"+f,S=ut.parseFieldsInGeneralPurpose(p);return S==null?w:w+S}}ut.VARIABLE_LENGTH=[],ut.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ut.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ut.VARIABLE_LENGTH,20],["22",ut.VARIABLE_LENGTH,29],["30",ut.VARIABLE_LENGTH,8],["37",ut.VARIABLE_LENGTH,8],["90",ut.VARIABLE_LENGTH,30],["91",ut.VARIABLE_LENGTH,30],["92",ut.VARIABLE_LENGTH,30],["93",ut.VARIABLE_LENGTH,30],["94",ut.VARIABLE_LENGTH,30],["95",ut.VARIABLE_LENGTH,30],["96",ut.VARIABLE_LENGTH,30],["97",ut.VARIABLE_LENGTH,3],["98",ut.VARIABLE_LENGTH,30],["99",ut.VARIABLE_LENGTH,30]],ut.THREE_DIGIT_DATA_LENGTH=[["240",ut.VARIABLE_LENGTH,30],["241",ut.VARIABLE_LENGTH,30],["242",ut.VARIABLE_LENGTH,6],["250",ut.VARIABLE_LENGTH,30],["251",ut.VARIABLE_LENGTH,30],["253",ut.VARIABLE_LENGTH,17],["254",ut.VARIABLE_LENGTH,20],["400",ut.VARIABLE_LENGTH,30],["401",ut.VARIABLE_LENGTH,30],["402",17],["403",ut.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ut.VARIABLE_LENGTH,20],["421",ut.VARIABLE_LENGTH,15],["422",3],["423",ut.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ut.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ut.VARIABLE_LENGTH,15],["391",ut.VARIABLE_LENGTH,18],["392",ut.VARIABLE_LENGTH,15],["393",ut.VARIABLE_LENGTH,18],["703",ut.VARIABLE_LENGTH,30]],ut.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ut.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ut.VARIABLE_LENGTH,20],["8003",ut.VARIABLE_LENGTH,30],["8004",ut.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ut.VARIABLE_LENGTH,30],["8008",ut.VARIABLE_LENGTH,12],["8018",18],["8020",ut.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ut.VARIABLE_LENGTH,70],["8200",ut.VARIABLE_LENGTH,70]];class Ln{constructor(e){this.buffer=new oe,this.information=e}decodeAllCodes(e,n){let s=n,d=null;do{let u=this.decodeGeneralPurposeField(s,d),f=ut.parseFieldsInGeneralPurpose(u.getNewString());if(f!=null&&e.append(f),u.isRemaining()?d=""+u.getRemainingValue():d=null,s===u.getNewPosition())break;s=u.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let n=e;n<e+3;++n)if(this.information.get(n))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(e,4);return u===0?new Cr(this.information.getSize(),Cr.FNC1,Cr.FNC1):new Cr(this.information.getSize(),u-1,Cr.FNC1)}let n=this.extractNumericValueFromBitArray(e,7),s=(n-8)/11,d=(n-8)%11;return new Cr(e+7,s,d)}extractNumericValueFromBitArray(e,n){return Ln.extractNumericValueFromBitArray(this.information,e,n)}static extractNumericValueFromBitArray(e,n,s){let d=0;for(let u=0;u<s;++u)e.get(n+u)&&(d|=1<<s-u-1);return d}decodeGeneralPurposeField(e,n){this.buffer.setLengthToZero(),n!=null&&this.buffer.append(n),this.current.setPosition(e);let s=this.parseBlocks();return s!=null&&s.isRemaining()?new yr(this.current.getPosition(),this.buffer.toString(),s.getRemainingValue()):new yr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,n;do{let s=this.current.getPosition();if(this.current.isAlpha()?(n=this.parseAlphaBlock(),e=n.isFinished()):this.current.isIsoIec646()?(n=this.parseIsoIec646Block(),e=n.isFinished()):(n=this.parseNumericBlock(),e=n.isFinished()),!(s!==this.current.getPosition())&&!e)break}while(!e);return n.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let n;return e.isSecondDigitFNC1()?n=new yr(this.current.getPosition(),this.buffer.toString()):n=new yr(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new xn(!0,n)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let n=new yr(this.current.getPosition(),this.buffer.toString());return new xn(!0,n)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new xn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new yr(this.current.getPosition(),this.buffer.toString());return new xn(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new xn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new yr(this.current.getPosition(),this.buffer.toString());return new xn(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new xn(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+7>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(e,7);if(s>=64&&s<116)return!0;if(e+8>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(e,8);return d>=232&&d<253}decodeIsoIec646(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new ir(e+5,ir.FNC1);if(n>=5&&n<15)return new ir(e+5,"0"+(n-5));let s=this.extractNumericValueFromBitArray(e,7);if(s>=64&&s<90)return new ir(e+7,""+(s+1));if(s>=90&&s<116)return new ir(e+7,""+(s+7));let d=this.extractNumericValueFromBitArray(e,8),u;switch(d){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new $}return new ir(e+8,u)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+6>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(e,6);return s>=16&&s<63}decodeAlphanumeric(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new ir(e+5,ir.FNC1);if(n>=5&&n<15)return new ir(e+5,"0"+(n-5));let s=this.extractNumericValueFromBitArray(e,6);if(s>=32&&s<58)return new ir(e+6,""+(s+33));let d;switch(s){case 58:d="*";break;case 59:d=",";break;case 60:d="-";break;case 61:d=".";break;case 62:d="/";break;default:throw new Pe("Decoding invalid alphanumeric value: "+s)}return new ir(e+6,d)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<5&&n+e<this.information.getSize();++n)if(n===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+n))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let n=e;n<e+3;++n)if(this.information.get(n))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<4&&n+e<this.information.getSize();++n)if(this.information.get(e+n))return!1;return!0}}class Vn{constructor(e){this.information=e,this.generalDecoder=new Ln(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Sr extends Vn{constructor(e){super(e)}encodeCompressedGtin(e,n){e.append("(01)");let s=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,n,s)}encodeCompressedGtinWithoutAI(e,n,s){for(let d=0;d<4;++d){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*d,10);u/100===0&&e.append("0"),u/10===0&&e.append("0"),e.append(u)}Sr.appendCheckDigit(e,s)}static appendCheckDigit(e,n){let s=0;for(let d=0;d<13;d++){let u=e.charAt(d+n).charCodeAt(0)-48;s+=d&1?u:3*u}s=10-s%10,s===10&&(s=0),e.append(s)}}Sr.GTIN_SIZE=40;class bn extends Sr{constructor(e){super(e)}parseInformation(){let e=new oe;e.append("(01)");let n=e.length(),s=this.getGeneralDecoder().extractNumericValueFromBitArray(bn.HEADER_SIZE,4);return e.append(s),this.encodeCompressedGtinWithoutAI(e,bn.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(e,bn.HEADER_SIZE+44)}}bn.HEADER_SIZE=4;class Gn extends Vn{constructor(e){super(e)}parseInformation(){let e=new oe;return this.getGeneralDecoder().decodeAllCodes(e,Gn.HEADER_SIZE)}}Gn.HEADER_SIZE=5;class En extends Sr{constructor(e){super(e)}encodeCompressedWeight(e,n,s){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(n,s);this.addWeightCode(e,d);let u=this.checkWeight(d),f=1e5;for(let p=0;p<5;++p)u/f===0&&e.append("0"),f/=10;e.append(u)}}class Kr extends En{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=Kr.HEADER_SIZE+En.GTIN_SIZE+Kr.WEIGHT_SIZE)throw new ne;let e=new oe;return this.encodeCompressedGtin(e,Kr.HEADER_SIZE),this.encodeCompressedWeight(e,Kr.HEADER_SIZE+En.GTIN_SIZE,Kr.WEIGHT_SIZE),e.toString()}}Kr.HEADER_SIZE=5,Kr.WEIGHT_SIZE=15;class ns extends Kr{constructor(e){super(e)}addWeightCode(e,n){e.append("(3103)")}checkWeight(e){return e}}class ws extends Kr{constructor(e){super(e)}addWeightCode(e,n){n<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class In extends Sr{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<In.HEADER_SIZE+Sr.GTIN_SIZE)throw new ne;let e=new oe;this.encodeCompressedGtin(e,In.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(In.HEADER_SIZE+Sr.GTIN_SIZE,In.LAST_DIGIT_SIZE);e.append("(392"),e.append(n),e.append(")");let s=this.getGeneralDecoder().decodeGeneralPurposeField(In.HEADER_SIZE+Sr.GTIN_SIZE+In.LAST_DIGIT_SIZE,null);return e.append(s.getNewString()),e.toString()}}In.HEADER_SIZE=8,In.LAST_DIGIT_SIZE=2;class Gr extends Sr{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Gr.HEADER_SIZE+Sr.GTIN_SIZE)throw new ne;let e=new oe;this.encodeCompressedGtin(e,Gr.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(Gr.HEADER_SIZE+Sr.GTIN_SIZE,Gr.LAST_DIGIT_SIZE);e.append("(393"),e.append(n),e.append(")");let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Gr.HEADER_SIZE+Sr.GTIN_SIZE+Gr.LAST_DIGIT_SIZE,Gr.FIRST_THREE_DIGITS_SIZE);s/100==0&&e.append("0"),s/10==0&&e.append("0"),e.append(s);let d=this.getGeneralDecoder().decodeGeneralPurposeField(Gr.HEADER_SIZE+Sr.GTIN_SIZE+Gr.LAST_DIGIT_SIZE+Gr.FIRST_THREE_DIGITS_SIZE,null);return e.append(d.getNewString()),e.toString()}}Gr.HEADER_SIZE=8,Gr.LAST_DIGIT_SIZE=2,Gr.FIRST_THREE_DIGITS_SIZE=10;class dr extends En{constructor(e,n,s){super(e),this.dateCode=s,this.firstAIdigits=n}parseInformation(){if(this.getInformation().getSize()!=dr.HEADER_SIZE+dr.GTIN_SIZE+dr.WEIGHT_SIZE+dr.DATE_SIZE)throw new ne;let e=new oe;return this.encodeCompressedGtin(e,dr.HEADER_SIZE),this.encodeCompressedWeight(e,dr.HEADER_SIZE+dr.GTIN_SIZE,dr.WEIGHT_SIZE),this.encodeCompressedDate(e,dr.HEADER_SIZE+dr.GTIN_SIZE+dr.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,n){let s=this.getGeneralDecoder().extractNumericValueFromBitArray(n,dr.DATE_SIZE);if(s==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let d=s%32;s/=32;let u=s%12+1;s/=12;let f=s;f/10==0&&e.append("0"),e.append(f),u/10==0&&e.append("0"),e.append(u),d/10==0&&e.append("0"),e.append(d)}addWeightCode(e,n){e.append("("),e.append(this.firstAIdigits),e.append(n/1e5),e.append(")")}checkWeight(e){return e%1e5}}dr.HEADER_SIZE=8,dr.WEIGHT_SIZE=20,dr.DATE_SIZE=16;function ea(R){try{if(R.get(1))return new bn(R);if(!R.get(2))return new Gn(R);switch(Ln.extractNumericValueFromBitArray(R,1,4)){case 4:return new ns(R);case 5:return new ws(R)}switch(Ln.extractNumericValueFromBitArray(R,1,5)){case 12:return new In(R);case 13:return new Gr(R)}switch(Ln.extractNumericValueFromBitArray(R,1,7)){case 56:return new dr(R,"310","11");case 57:return new dr(R,"320","11");case 58:return new dr(R,"310","13");case 59:return new dr(R,"320","13");case 60:return new dr(R,"310","15");case 61:return new dr(R,"320","15");case 62:return new dr(R,"310","17");case 63:return new dr(R,"320","17")}}catch(e){throw console.log(e),new Pe("unknown decoder: "+R)}}class mi{constructor(e,n,s,d){this.leftchar=e,this.rightchar=n,this.finderpattern=s,this.maybeLast=d}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,n){return e instanceof mi?mi.equalsOrNull(e.leftchar,n.leftchar)&&mi.equalsOrNull(e.rightchar,n.rightchar)&&mi.equalsOrNull(e.finderpattern,n.finderpattern):!1}static equalsOrNull(e,n){return e===null?n===null:mi.equals(e,n)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class ta{constructor(e,n,s){this.pairs=e,this.rowNumber=n,this.wasReversed=s}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,n){return e instanceof ta?this.checkEqualitity(e,n)&&e.wasReversed===n.wasReversed:!1}checkEqualitity(e,n){if(!e||!n)return;let s;return e.forEach((d,u)=>{n.forEach(f=>{d.getLeftChar().getValue()===f.getLeftChar().getValue()&&d.getRightChar().getValue()===f.getRightChar().getValue()&&d.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(s=!0)})}),s}}class Xe extends nr{constructor(e){super(...arguments),this.pairs=new Array(Xe.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,n,s){this.pairs.length=0,this.startFromEven=!1;try{return Xe.constructResult(this.decodeRow2pairs(e,n))}catch(d){this.verbose&&console.log(d)}return this.pairs.length=0,this.startFromEven=!0,Xe.constructResult(this.decodeRow2pairs(e,n))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,n){let s=!1;for(;!s;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,e))}catch(u){if(u instanceof ne){if(!this.pairs.length)throw new ne;s=!0}}if(this.checkChecksum())return this.pairs;let d;if(this.rows.length?d=!0:d=!1,this.storeRow(e,!1),d){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new ne}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let n=null;try{n=this.checkRows(new Array,0)}catch(s){this.verbose&&console.log(s)}return e&&(this.rows=this.rows.reverse()),n}checkRows(e,n){for(let s=n;s<this.rows.length;s++){let d=this.rows[s];this.pairs.length=0;for(let f of e)this.pairs.push(f.getPairs());if(this.pairs.push(d.getPairs()),!Xe.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(e);u.push(d);try{return this.checkRows(u,s+1)}catch(f){this.verbose&&console.log(f)}}throw new ne}static isValidSequence(e){for(let n of Xe.FINDER_PATTERN_SEQUENCES){if(e.length>n.length)continue;let s=!0;for(let d=0;d<e.length;d++)if(e[d].getFinderPattern().getValue()!=n[d]){s=!1;break}if(s)return!0}return!1}storeRow(e,n){let s=0,d=!1,u=!1;for(;s<this.rows.length;){let f=this.rows[s];if(f.getRowNumber()>e){u=f.isEquivalent(this.pairs);break}d=f.isEquivalent(this.pairs),s++}u||d||Xe.isPartialRow(this.pairs,this.rows)||(this.rows.push(s,new ta(this.pairs,e,n)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,n){for(let s of n)if(s.getPairs().length!==e.length){for(let d of s.getPairs())for(let u of e)if(mi.equals(d,u))break}}static isPartialRow(e,n){for(let s of n){let d=!0;for(let u of e){let f=!1;for(let p of s.getPairs())if(u.equals(p)){f=!0;break}if(!f){d=!1;break}}if(d)return!0}return!1}getRows(){return this.rows}static constructResult(e){let n=ni.buildBitArray(e),d=ea(n).parseInformation(),u=e[0].getFinderPattern().getResultPoints(),f=e[e.length-1].getFinderPattern().getResultPoints(),p=[u[0],u[1],f[0],f[1]];return new K(d,null,null,p,ae.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),n=e.getLeftChar(),s=e.getRightChar();if(s==null)return!1;let d=s.getChecksumPortion(),u=2;for(let p=1;p<this.pairs.size();++p){let w=this.pairs.get(p);d+=w.getLeftChar().getChecksumPortion(),u++;let S=w.getRightChar();S!=null&&(d+=S.getChecksumPortion(),u++)}return d%=211,211*(u-4)+d==n.getValue()}static getNextSecondBar(e,n){let s;return e.get(n)?(s=e.getNextUnset(n),s=e.getNextSet(s)):(s=e.getNextSet(n),s=e.getNextUnset(s)),s}retrieveNextPair(e,n,s){let d=n.length%2==0;this.startFromEven&&(d=!d);let u,f=!0,p=-1;do this.findNextPair(e,n,p),u=this.parseFoundFinderPattern(e,s,d),u==null?p=Xe.getNextSecondBar(e,this.startEnd[0]):f=!1;while(f);let w=this.decodeDataCharacter(e,u,d,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new ne;let S;try{S=this.decodeDataCharacter(e,u,d,!1)}catch(k){S=null,this.verbose&&console.log(k)}return new mi(w,S,u,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,n,s){let d=this.getDecodeFinderCounters();d[0]=0,d[1]=0,d[2]=0,d[3]=0;let u=e.getSize(),f;s>=0?f=s:this.isEmptyPair(n)?f=0:f=n[n.length-1].getFinderPattern().getStartEnd()[1];let p=n.length%2!=0;this.startFromEven&&(p=!p);let w=!1;for(;f<u&&(w=!e.get(f),!!w);)f++;let S=0,k=f;for(let P=f;P<u;P++)if(e.get(P)!=w)d[S]++;else{if(S==3){if(p&&Xe.reverseCounters(d),Xe.isFinderPattern(d)){this.startEnd[0]=k,this.startEnd[1]=P;return}p&&Xe.reverseCounters(d),k+=d[0]+d[1],d[0]=d[2],d[1]=d[3],d[2]=0,d[3]=0,S--}else S++;d[S]=1,w=!w}throw new ne}static reverseCounters(e){let n=e.length;for(let s=0;s<n/2;++s){let d=e[s];e[s]=e[n-s-1],e[n-s-1]=d}}parseFoundFinderPattern(e,n,s){let d,u,f;if(s){let S=this.startEnd[0]-1;for(;S>=0&&!e.get(S);)S--;S++,d=this.startEnd[0]-S,u=S,f=this.startEnd[1]}else u=this.startEnd[0],f=e.getNextUnset(this.startEnd[1]+1),d=f-this.startEnd[1];let p=this.getDecodeFinderCounters();_.arraycopy(p,0,p,1,p.length-1),p[0]=d;let w;try{w=this.parseFinderValue(p,Xe.FINDER_PATTERNS)}catch{return null}return new Hn(w,[u,f],u,f,n)}decodeDataCharacter(e,n,s,d){let u=this.getDataCharacterCounters();for(let rr=0;rr<u.length;rr++)u[rr]=0;if(d)Xe.recordPatternInReverse(e,n.getStartEnd()[0],u);else{Xe.recordPattern(e,n.getStartEnd()[1],u);for(let rr=0,Ur=u.length-1;rr<Ur;rr++,Ur--){let tn=u[rr];u[rr]=u[Ur],u[Ur]=tn}}let f=17,p=He.sum(new Int32Array(u))/f,w=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(p-w)/w>.3)throw new ne;let S=this.getOddCounts(),k=this.getEvenCounts(),P=this.getOddRoundingErrors(),q=this.getEvenRoundingErrors();for(let rr=0;rr<u.length;rr++){let Ur=1*u[rr]/p,tn=Ur+.5;if(tn<1){if(Ur<.3)throw new ne;tn=1}else if(tn>8){if(Ur>8.7)throw new ne;tn=8}let Yn=rr/2;rr&1?(k[Yn]=tn,q[Yn]=Ur-tn):(S[Yn]=tn,P[Yn]=Ur-tn)}this.adjustOddEvenCounts(f);let te=4*n.getValue()+(s?0:2)+(d?0:1)-1,he=0,ge=0;for(let rr=S.length-1;rr>=0;rr--){if(Xe.isNotA1left(n,s,d)){let Ur=Xe.WEIGHTS[te][2*rr];ge+=S[rr]*Ur}he+=S[rr]}let we=0;for(let rr=k.length-1;rr>=0;rr--)if(Xe.isNotA1left(n,s,d)){let Ur=Xe.WEIGHTS[te][2*rr+1];we+=k[rr]*Ur}let Me=ge+we;if(he&1||he>13||he<4)throw new ne;let Ke=(13-he)/2,tt=Xe.SYMBOL_WIDEST[Ke],Qe=9-tt,Xt=wt.getRSSvalue(S,tt,!0),kt=wt.getRSSvalue(k,Qe,!1),Yr=Xe.EVEN_TOTAL_SUBSET[Ke],fn=Xe.GSUM[Ke],Vr=Xt*Yr+kt+fn;return new Sn(Vr,Me)}static isNotA1left(e,n,s){return!(e.getValue()==0&&n&&s)}adjustOddEvenCounts(e){let n=He.sum(new Int32Array(this.getOddCounts())),s=He.sum(new Int32Array(this.getEvenCounts())),d=!1,u=!1;n>13?u=!0:n<4&&(d=!0);let f=!1,p=!1;s>13?p=!0:s<4&&(f=!0);let w=n+s-e,S=(n&1)==1,k=(s&1)==0;if(w==1)if(S){if(k)throw new ne;u=!0}else{if(!k)throw new ne;p=!0}else if(w==-1)if(S){if(k)throw new ne;d=!0}else{if(!k)throw new ne;f=!0}else if(w==0){if(S){if(!k)throw new ne;n<s?(d=!0,p=!0):(u=!0,f=!0)}else if(k)throw new ne}else throw new ne;if(d){if(u)throw new ne;Xe.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&Xe.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(p)throw new ne;Xe.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&Xe.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Xe.SYMBOL_WIDEST=[7,5,4,3,1],Xe.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Xe.GSUM=[0,348,1388,2948,3988],Xe.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Xe.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Xe.FINDER_PAT_A=0,Xe.FINDER_PAT_B=1,Xe.FINDER_PAT_C=2,Xe.FINDER_PAT_D=3,Xe.FINDER_PAT_E=4,Xe.FINDER_PAT_F=5,Xe.FINDER_PATTERN_SEQUENCES=[[Xe.FINDER_PAT_A,Xe.FINDER_PAT_A],[Xe.FINDER_PAT_A,Xe.FINDER_PAT_B,Xe.FINDER_PAT_B],[Xe.FINDER_PAT_A,Xe.FINDER_PAT_C,Xe.FINDER_PAT_B,Xe.FINDER_PAT_D],[Xe.FINDER_PAT_A,Xe.FINDER_PAT_E,Xe.FINDER_PAT_B,Xe.FINDER_PAT_D,Xe.FINDER_PAT_C],[Xe.FINDER_PAT_A,Xe.FINDER_PAT_E,Xe.FINDER_PAT_B,Xe.FINDER_PAT_D,Xe.FINDER_PAT_D,Xe.FINDER_PAT_F],[Xe.FINDER_PAT_A,Xe.FINDER_PAT_E,Xe.FINDER_PAT_B,Xe.FINDER_PAT_D,Xe.FINDER_PAT_E,Xe.FINDER_PAT_F,Xe.FINDER_PAT_F],[Xe.FINDER_PAT_A,Xe.FINDER_PAT_A,Xe.FINDER_PAT_B,Xe.FINDER_PAT_B,Xe.FINDER_PAT_C,Xe.FINDER_PAT_C,Xe.FINDER_PAT_D,Xe.FINDER_PAT_D],[Xe.FINDER_PAT_A,Xe.FINDER_PAT_A,Xe.FINDER_PAT_B,Xe.FINDER_PAT_B,Xe.FINDER_PAT_C,Xe.FINDER_PAT_C,Xe.FINDER_PAT_D,Xe.FINDER_PAT_E,Xe.FINDER_PAT_E],[Xe.FINDER_PAT_A,Xe.FINDER_PAT_A,Xe.FINDER_PAT_B,Xe.FINDER_PAT_B,Xe.FINDER_PAT_C,Xe.FINDER_PAT_C,Xe.FINDER_PAT_D,Xe.FINDER_PAT_E,Xe.FINDER_PAT_F,Xe.FINDER_PAT_F],[Xe.FINDER_PAT_A,Xe.FINDER_PAT_A,Xe.FINDER_PAT_B,Xe.FINDER_PAT_B,Xe.FINDER_PAT_C,Xe.FINDER_PAT_D,Xe.FINDER_PAT_D,Xe.FINDER_PAT_E,Xe.FINDER_PAT_E,Xe.FINDER_PAT_F,Xe.FINDER_PAT_F]],Xe.MAX_PAIRS=11;class Ea extends Sn{constructor(e,n,s){super(e,n),this.count=0,this.finderPattern=s}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Er extends nr{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,n,s){const d=this.decodePair(n,!1,e,s);Er.addOrTally(this.possibleLeftPairs,d),n.reverse();let u=this.decodePair(n,!0,e,s);Er.addOrTally(this.possibleRightPairs,u),n.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&Er.checkChecksum(f,p))return Er.constructResult(f,p)}throw new ne}static addOrTally(e,n){if(n==null)return;let s=!1;for(let d of e)if(d.getValue()===n.getValue()){d.incrementCount(),s=!0;break}s||e.push(n)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,n){let s=4537077*e.getValue()+n.getValue(),d=new String(s).toString(),u=new oe;for(let S=13-d.length;S>0;S--)u.append("0");u.append(d);let f=0;for(let S=0;S<13;S++){let k=u.charAt(S).charCodeAt(0)-48;f+=S&1?k:3*k}f=10-f%10,f===10&&(f=0),u.append(f.toString());let p=e.getFinderPattern().getResultPoints(),w=n.getFinderPattern().getResultPoints();return new K(u.toString(),null,0,[p[0],p[1],w[0],w[1]],ae.RSS_14,new Date().getTime())}static checkChecksum(e,n){let s=(e.getChecksumPortion()+16*n.getChecksumPortion())%79,d=9*e.getFinderPattern().getValue()+n.getFinderPattern().getValue();return d>72&&d--,d>8&&d--,s===d}decodePair(e,n,s,d){try{let u=this.findFinderPattern(e,n),f=this.parseFoundFinderPattern(e,s,n,u),p=d==null?null:d.get(xe.NEED_RESULT_POINT_CALLBACK);if(p!=null){let k=(u[0]+u[1])/2;n&&(k=e.getSize()-1-k),p.foundPossibleResultPoint(new Re(k,s))}let w=this.decodeDataCharacter(e,f,!0),S=this.decodeDataCharacter(e,f,!1);return new Ea(1597*w.getValue()+S.getValue(),w.getChecksumPortion()+4*S.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(e,n,s){let d=this.getDataCharacterCounters();for(let we=0;we<d.length;we++)d[we]=0;if(s)St.recordPatternInReverse(e,n.getStartEnd()[0],d);else{St.recordPattern(e,n.getStartEnd()[1]+1,d);for(let we=0,Me=d.length-1;we<Me;we++,Me--){let Ke=d[we];d[we]=d[Me],d[Me]=Ke}}let u=s?16:15,f=He.sum(new Int32Array(d))/u,p=this.getOddCounts(),w=this.getEvenCounts(),S=this.getOddRoundingErrors(),k=this.getEvenRoundingErrors();for(let we=0;we<d.length;we++){let Me=d[we]/f,Ke=Math.floor(Me+.5);Ke<1?Ke=1:Ke>8&&(Ke=8);let tt=Math.floor(we/2);we&1?(w[tt]=Ke,k[tt]=Me-Ke):(p[tt]=Ke,S[tt]=Me-Ke)}this.adjustOddEvenCounts(s,u);let P=0,q=0;for(let we=p.length-1;we>=0;we--)q*=9,q+=p[we],P+=p[we];let te=0,he=0;for(let we=w.length-1;we>=0;we--)te*=9,te+=w[we],he+=w[we];let ge=q+3*te;if(s){if(P&1||P>12||P<4)throw new ne;let we=(12-P)/2,Me=Er.OUTSIDE_ODD_WIDEST[we],Ke=9-Me,tt=wt.getRSSvalue(p,Me,!1),Qe=wt.getRSSvalue(w,Ke,!0),Xt=Er.OUTSIDE_EVEN_TOTAL_SUBSET[we],kt=Er.OUTSIDE_GSUM[we];return new Sn(tt*Xt+Qe+kt,ge)}else{if(he&1||he>10||he<4)throw new ne;let we=(10-he)/2,Me=Er.INSIDE_ODD_WIDEST[we],Ke=9-Me,tt=wt.getRSSvalue(p,Me,!0),Qe=wt.getRSSvalue(w,Ke,!1),Xt=Er.INSIDE_ODD_TOTAL_SUBSET[we],kt=Er.INSIDE_GSUM[we];return new Sn(Qe*Xt+tt+kt,ge)}}findFinderPattern(e,n){let s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;let d=e.getSize(),u=!1,f=0;for(;f<d&&(u=!e.get(f),n!==u);)f++;let p=0,w=f;for(let S=f;S<d;S++)if(e.get(S)!==u)s[p]++;else{if(p===3){if(nr.isFinderPattern(s))return[w,S];w+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,p--}else p++;s[p]=1,u=!u}throw new ne}parseFoundFinderPattern(e,n,s,d){let u=e.get(d[0]),f=d[0]-1;for(;f>=0&&u!==e.get(f);)f--;f++;const p=d[0]-f,w=this.getDecodeFinderCounters(),S=new Int32Array(w.length);_.arraycopy(w,0,S,1,w.length-1),S[0]=p;const k=this.parseFinderValue(S,Er.FINDER_PATTERNS);let P=f,q=d[1];return s&&(P=e.getSize()-1-P,q=e.getSize()-1-q),new Hn(k,[f,d[1]],P,q,n)}adjustOddEvenCounts(e,n){let s=He.sum(new Int32Array(this.getOddCounts())),d=He.sum(new Int32Array(this.getEvenCounts())),u=!1,f=!1,p=!1,w=!1;e?(s>12?f=!0:s<4&&(u=!0),d>12?w=!0:d<4&&(p=!0)):(s>11?f=!0:s<5&&(u=!0),d>10?w=!0:d<4&&(p=!0));let S=s+d-n,k=(s&1)===(e?1:0),P=(d&1)===1;if(S===1)if(k){if(P)throw new ne;f=!0}else{if(!P)throw new ne;w=!0}else if(S===-1)if(k){if(P)throw new ne;u=!0}else{if(!P)throw new ne;p=!0}else if(S===0){if(k){if(!P)throw new ne;s<d?(u=!0,w=!0):(f=!0,p=!0)}else if(P)throw new ne}else throw new ne;if(u){if(f)throw new ne;nr.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&nr.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(w)throw new ne;nr.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&nr.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Er.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Er.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Er.OUTSIDE_GSUM=[0,161,961,2015,2715],Er.INSIDE_GSUM=[0,336,1036,1516],Er.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Er.INSIDE_ODD_WIDEST=[2,4,6,8],Er.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class pi extends St{constructor(e,n){super(),this.readers=[],this.verbose=n===!0;const s=e?e.get(xe.POSSIBLE_FORMATS):null,d=e&&e.get(xe.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;s?((s.includes(ae.EAN_13)||s.includes(ae.UPC_A)||s.includes(ae.EAN_8)||s.includes(ae.UPC_E))&&this.readers.push(new ji(e)),s.includes(ae.CODE_39)&&this.readers.push(new Dt(d)),s.includes(ae.CODE_128)&&this.readers.push(new it),s.includes(ae.ITF)&&this.readers.push(new Tt),s.includes(ae.RSS_14)&&this.readers.push(new Er),s.includes(ae.RSS_EXPANDED)&&this.readers.push(new Xe(this.verbose))):(this.readers.push(new ji(e)),this.readers.push(new Dt),this.readers.push(new ji(e)),this.readers.push(new it),this.readers.push(new Tt),this.readers.push(new Er),this.readers.push(new Xe(this.verbose)))}decodeRow(e,n,s){for(let d=0;d<this.readers.length;d++)try{return this.readers[d].decodeRow(e,n,s)}catch{}throw new ne}reset(){this.readers.forEach(e=>e.reset())}}class ro extends W{constructor(e=500,n){super(new pi(n),e,n)}}class er{constructor(e,n,s){this.ecCodewords=e,this.ecBlocks=[n],s&&this.ecBlocks.push(s)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class tr{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Wt{constructor(e,n,s,d,u,f){this.versionNumber=e,this.symbolSizeRows=n,this.symbolSizeColumns=s,this.dataRegionSizeRows=d,this.dataRegionSizeColumns=u,this.ecBlocks=f;let p=0;const w=f.getECCodewords(),S=f.getECBlocks();for(let k of S)p+=k.getCount()*(k.getDataCodewords()+w);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,n){if(e&1||n&1)throw new $;for(let s of Wt.VERSIONS)if(s.symbolSizeRows===e&&s.symbolSizeColumns===n)return s;throw new $}toString(){return""+this.versionNumber}static buildVersions(){return[new Wt(1,10,10,8,8,new er(5,new tr(1,3))),new Wt(2,12,12,10,10,new er(7,new tr(1,5))),new Wt(3,14,14,12,12,new er(10,new tr(1,8))),new Wt(4,16,16,14,14,new er(12,new tr(1,12))),new Wt(5,18,18,16,16,new er(14,new tr(1,18))),new Wt(6,20,20,18,18,new er(18,new tr(1,22))),new Wt(7,22,22,20,20,new er(20,new tr(1,30))),new Wt(8,24,24,22,22,new er(24,new tr(1,36))),new Wt(9,26,26,24,24,new er(28,new tr(1,44))),new Wt(10,32,32,14,14,new er(36,new tr(1,62))),new Wt(11,36,36,16,16,new er(42,new tr(1,86))),new Wt(12,40,40,18,18,new er(48,new tr(1,114))),new Wt(13,44,44,20,20,new er(56,new tr(1,144))),new Wt(14,48,48,22,22,new er(68,new tr(1,174))),new Wt(15,52,52,24,24,new er(42,new tr(2,102))),new Wt(16,64,64,14,14,new er(56,new tr(2,140))),new Wt(17,72,72,16,16,new er(36,new tr(4,92))),new Wt(18,80,80,18,18,new er(48,new tr(4,114))),new Wt(19,88,88,20,20,new er(56,new tr(4,144))),new Wt(20,96,96,22,22,new er(68,new tr(4,174))),new Wt(21,104,104,24,24,new er(56,new tr(6,136))),new Wt(22,120,120,18,18,new er(68,new tr(6,175))),new Wt(23,132,132,20,20,new er(62,new tr(8,163))),new Wt(24,144,144,22,22,new er(62,new tr(8,156),new tr(2,155))),new Wt(25,8,18,6,16,new er(7,new tr(1,5))),new Wt(26,8,32,6,14,new er(11,new tr(1,10))),new Wt(27,12,26,10,24,new er(14,new tr(1,16))),new Wt(28,12,36,10,16,new er(18,new tr(1,22))),new Wt(29,16,36,14,16,new er(24,new tr(1,32))),new Wt(30,16,48,14,22,new er(28,new tr(1,49)))]}}Wt.VERSIONS=Wt.buildVersions();class ra{constructor(e){const n=e.getHeight();if(n<8||n>144||n&1)throw new $;this.version=ra.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new le(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const n=e.getHeight(),s=e.getWidth();return Wt.getVersionForDimensions(n,s)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let n=0,s=4,d=0;const u=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth();let p=!1,w=!1,S=!1,k=!1;do if(s===u&&d===0&&!p)e[n++]=this.readCorner1(u,f)&255,s-=2,d+=2,p=!0;else if(s===u-2&&d===0&&f&3&&!w)e[n++]=this.readCorner2(u,f)&255,s-=2,d+=2,w=!0;else if(s===u+4&&d===2&&!(f&7)&&!S)e[n++]=this.readCorner3(u,f)&255,s-=2,d+=2,S=!0;else if(s===u-2&&d===0&&(f&7)===4&&!k)e[n++]=this.readCorner4(u,f)&255,s-=2,d+=2,k=!0;else{do s<u&&d>=0&&!this.readMappingMatrix.get(d,s)&&(e[n++]=this.readUtah(s,d,u,f)&255),s-=2,d+=2;while(s>=0&&d<f);s+=1,d+=3;do s>=0&&d<f&&!this.readMappingMatrix.get(d,s)&&(e[n++]=this.readUtah(s,d,u,f)&255),s+=2,d-=2;while(s<u&&d>=0);s+=3,d+=1}while(s<u||d<f);if(n!==this.version.getTotalCodewords())throw new $;return e}readModule(e,n,s,d){return e<0&&(e+=s,n+=4-(s+4&7)),n<0&&(n+=d,e+=4-(d+4&7)),this.readMappingMatrix.set(n,e),this.mappingBitMatrix.get(n,e)}readUtah(e,n,s,d){let u=0;return this.readModule(e-2,n-2,s,d)&&(u|=1),u<<=1,this.readModule(e-2,n-1,s,d)&&(u|=1),u<<=1,this.readModule(e-1,n-2,s,d)&&(u|=1),u<<=1,this.readModule(e-1,n-1,s,d)&&(u|=1),u<<=1,this.readModule(e-1,n,s,d)&&(u|=1),u<<=1,this.readModule(e,n-2,s,d)&&(u|=1),u<<=1,this.readModule(e,n-1,s,d)&&(u|=1),u<<=1,this.readModule(e,n,s,d)&&(u|=1),u}readCorner1(e,n){let s=0;return this.readModule(e-1,0,e,n)&&(s|=1),s<<=1,this.readModule(e-1,1,e,n)&&(s|=1),s<<=1,this.readModule(e-1,2,e,n)&&(s|=1),s<<=1,this.readModule(0,n-2,e,n)&&(s|=1),s<<=1,this.readModule(0,n-1,e,n)&&(s|=1),s<<=1,this.readModule(1,n-1,e,n)&&(s|=1),s<<=1,this.readModule(2,n-1,e,n)&&(s|=1),s<<=1,this.readModule(3,n-1,e,n)&&(s|=1),s}readCorner2(e,n){let s=0;return this.readModule(e-3,0,e,n)&&(s|=1),s<<=1,this.readModule(e-2,0,e,n)&&(s|=1),s<<=1,this.readModule(e-1,0,e,n)&&(s|=1),s<<=1,this.readModule(0,n-4,e,n)&&(s|=1),s<<=1,this.readModule(0,n-3,e,n)&&(s|=1),s<<=1,this.readModule(0,n-2,e,n)&&(s|=1),s<<=1,this.readModule(0,n-1,e,n)&&(s|=1),s<<=1,this.readModule(1,n-1,e,n)&&(s|=1),s}readCorner3(e,n){let s=0;return this.readModule(e-1,0,e,n)&&(s|=1),s<<=1,this.readModule(e-1,n-1,e,n)&&(s|=1),s<<=1,this.readModule(0,n-3,e,n)&&(s|=1),s<<=1,this.readModule(0,n-2,e,n)&&(s|=1),s<<=1,this.readModule(0,n-1,e,n)&&(s|=1),s<<=1,this.readModule(1,n-3,e,n)&&(s|=1),s<<=1,this.readModule(1,n-2,e,n)&&(s|=1),s<<=1,this.readModule(1,n-1,e,n)&&(s|=1),s}readCorner4(e,n){let s=0;return this.readModule(e-3,0,e,n)&&(s|=1),s<<=1,this.readModule(e-2,0,e,n)&&(s|=1),s<<=1,this.readModule(e-1,0,e,n)&&(s|=1),s<<=1,this.readModule(0,n-2,e,n)&&(s|=1),s<<=1,this.readModule(0,n-1,e,n)&&(s|=1),s<<=1,this.readModule(1,n-1,e,n)&&(s|=1),s<<=1,this.readModule(2,n-1,e,n)&&(s|=1),s<<=1,this.readModule(3,n-1,e,n)&&(s|=1),s}extractDataRegion(e){const n=this.version.getSymbolSizeRows(),s=this.version.getSymbolSizeColumns();if(e.getHeight()!==n)throw new C("Dimension of bitMatrix must match the version size");const d=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),f=n/d|0,p=s/u|0,w=f*d,S=p*u,k=new le(S,w);for(let P=0;P<f;++P){const q=P*d;for(let te=0;te<p;++te){const he=te*u;for(let ge=0;ge<d;++ge){const we=P*(d+2)+1+ge,Me=q+ge;for(let Ke=0;Ke<u;++Ke){const tt=te*(u+2)+1+Ke;if(e.get(tt,we)){const Qe=he+Ke;k.set(Qe,Me)}}}}}return k}}class Lr{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n){const s=n.getECBlocks();let d=0;const u=s.getECBlocks();for(let ge of u)d+=ge.getCount();const f=new Array(d);let p=0;for(let ge of u)for(let we=0;we<ge.getCount();we++){const Me=ge.getDataCodewords(),Ke=s.getECCodewords()+Me;f[p++]=new Lr(Me,new Uint8Array(Ke))}const S=f[0].codewords.length-s.getECCodewords(),k=S-1;let P=0;for(let ge=0;ge<k;ge++)for(let we=0;we<p;we++)f[we].codewords[ge]=e[P++];const q=n.getVersionNumber()===24,te=q?8:p;for(let ge=0;ge<te;ge++)f[ge].codewords[S-1]=e[P++];const he=f[0].codewords.length;for(let ge=S;ge<he;ge++)for(let we=0;we<p;we++){const Me=q?(we+8)%p:we,Ke=q&&Me>7?ge-1:ge;f[Me].codewords[Ke]=e[P++]}if(P!==e.length)throw new C;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class vs{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new C(""+e);let n=0,s=this.bitOffset,d=this.byteOffset;const u=this.bytes;if(s>0){const f=8-s,p=e<f?e:f,w=f-p,S=255>>8-p<<w;n=(u[d]&S)>>w,e-=p,s+=p,s===8&&(s=0,d++)}if(e>0){for(;e>=8;)n=n<<8|u[d]&255,d++,e-=8;if(e>0){const f=8-e,p=255>>f<<f;n=n<<e|(u[d]&p)>>f,s+=e}}return this.bitOffset=s,this.byteOffset=d,n}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Pr;(function(R){R[R.PAD_ENCODE=0]="PAD_ENCODE",R[R.ASCII_ENCODE=1]="ASCII_ENCODE",R[R.C40_ENCODE=2]="C40_ENCODE",R[R.TEXT_ENCODE=3]="TEXT_ENCODE",R[R.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",R[R.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",R[R.BASE256_ENCODE=6]="BASE256_ENCODE"})(Pr||(Pr={}));class ii{static decode(e){const n=new vs(e),s=new oe,d=new oe,u=new Array;let f=Pr.ASCII_ENCODE;do if(f===Pr.ASCII_ENCODE)f=this.decodeAsciiSegment(n,s,d);else{switch(f){case Pr.C40_ENCODE:this.decodeC40Segment(n,s);break;case Pr.TEXT_ENCODE:this.decodeTextSegment(n,s);break;case Pr.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,s);break;case Pr.EDIFACT_ENCODE:this.decodeEdifactSegment(n,s);break;case Pr.BASE256_ENCODE:this.decodeBase256Segment(n,s,u);break;default:throw new $}f=Pr.ASCII_ENCODE}while(f!==Pr.PAD_ENCODE&&n.available()>0);return d.length()>0&&s.append(d.toString()),new ke(e,s.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(e,n,s){let d=!1;do{let u=e.readBits(8);if(u===0)throw new $;if(u<=128)return d&&(u+=128),n.append(String.fromCharCode(u-1)),Pr.ASCII_ENCODE;if(u===129)return Pr.PAD_ENCODE;if(u<=229){const f=u-130;f<10&&n.append("0"),n.append(""+f)}else switch(u){case 230:return Pr.C40_ENCODE;case 231:return Pr.BASE256_ENCODE;case 232:n.append("");break;case 233:case 234:break;case 235:d=!0;break;case 236:n.append("[)>05"),s.insert(0,"");break;case 237:n.append("[)>06"),s.insert(0,"");break;case 238:return Pr.ANSIX12_ENCODE;case 239:return Pr.TEXT_ENCODE;case 240:return Pr.EDIFACT_ENCODE;case 241:break;default:if(u!==254||e.available()!==0)throw new $;break}}while(e.available()>0);return Pr.ASCII_ENCODE}static decodeC40Segment(e,n){let s=!1;const d=[];let u=0;do{if(e.available()===8)return;const f=e.readBits(8);if(f===254)return;this.parseTwoBytes(f,e.readBits(8),d);for(let p=0;p<3;p++){const w=d[p];switch(u){case 0:if(w<3)u=w+1;else if(w<this.C40_BASIC_SET_CHARS.length){const S=this.C40_BASIC_SET_CHARS[w];s?(n.append(String.fromCharCode(S.charCodeAt(0)+128)),s=!1):n.append(S)}else throw new $;break;case 1:s?(n.append(String.fromCharCode(w+128)),s=!1):n.append(String.fromCharCode(w)),u=0;break;case 2:if(w<this.C40_SHIFT2_SET_CHARS.length){const S=this.C40_SHIFT2_SET_CHARS[w];s?(n.append(String.fromCharCode(S.charCodeAt(0)+128)),s=!1):n.append(S)}else switch(w){case 27:n.append("");break;case 30:s=!0;break;default:throw new $}u=0;break;case 3:s?(n.append(String.fromCharCode(w+224)),s=!1):n.append(String.fromCharCode(w+96)),u=0;break;default:throw new $}}}while(e.available()>0)}static decodeTextSegment(e,n){let s=!1,d=[],u=0;do{if(e.available()===8)return;const f=e.readBits(8);if(f===254)return;this.parseTwoBytes(f,e.readBits(8),d);for(let p=0;p<3;p++){const w=d[p];switch(u){case 0:if(w<3)u=w+1;else if(w<this.TEXT_BASIC_SET_CHARS.length){const S=this.TEXT_BASIC_SET_CHARS[w];s?(n.append(String.fromCharCode(S.charCodeAt(0)+128)),s=!1):n.append(S)}else throw new $;break;case 1:s?(n.append(String.fromCharCode(w+128)),s=!1):n.append(String.fromCharCode(w)),u=0;break;case 2:if(w<this.TEXT_SHIFT2_SET_CHARS.length){const S=this.TEXT_SHIFT2_SET_CHARS[w];s?(n.append(String.fromCharCode(S.charCodeAt(0)+128)),s=!1):n.append(S)}else switch(w){case 27:n.append("");break;case 30:s=!0;break;default:throw new $}u=0;break;case 3:if(w<this.TEXT_SHIFT3_SET_CHARS.length){const S=this.TEXT_SHIFT3_SET_CHARS[w];s?(n.append(String.fromCharCode(S.charCodeAt(0)+128)),s=!1):n.append(S),u=0}else throw new $;break;default:throw new $}}}while(e.available()>0)}static decodeAnsiX12Segment(e,n){const s=[];do{if(e.available()===8)return;const d=e.readBits(8);if(d===254)return;this.parseTwoBytes(d,e.readBits(8),s);for(let u=0;u<3;u++){const f=s[u];switch(f){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(f<14)n.append(String.fromCharCode(f+44));else if(f<40)n.append(String.fromCharCode(f+51));else throw new $;break}}}while(e.available()>0)}static parseTwoBytes(e,n,s){let d=(e<<8)+n-1,u=Math.floor(d/1600);s[0]=u,d-=u*1600,u=Math.floor(d/40),s[1]=u,s[2]=d-u*40}static decodeEdifactSegment(e,n){do{if(e.available()<=16)return;for(let s=0;s<4;s++){let d=e.readBits(6);if(d===31){const u=8-e.getBitOffset();u!==8&&e.readBits(u);return}d&32||(d|=64),n.append(String.fromCharCode(d))}}while(e.available()>0)}static decodeBase256Segment(e,n,s){let d=1+e.getByteOffset();const u=this.unrandomize255State(e.readBits(8),d++);let f;if(u===0?f=e.available()/8|0:u<250?f=u:f=250*(u-249)+this.unrandomize255State(e.readBits(8),d++),f<0)throw new $;const p=new Uint8Array(f);for(let w=0;w<f;w++){if(e.available()<8)throw new $;p[w]=this.unrandomize255State(e.readBits(8),d++)}s.push(p);try{n.append(Y.decode(p,V.ISO88591))}catch(w){throw new Pe("Platform does not support required encoding: "+w.message)}}static unrandomize255State(e,n){const s=149*n%255+1,d=e-s;return d>=0?d:d+256}}ii.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ii.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ii.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ii.TEXT_SHIFT2_SET_CHARS=ii.C40_SHIFT2_SET_CHARS,ii.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class na{constructor(){this.rsDecoder=new de(Fe.DATA_MATRIX_FIELD_256)}decode(e){const n=new ra(e),s=n.getVersion(),d=n.readCodewords(),u=Lr.getDataBlocks(d,s);let f=0;for(let S of u)f+=S.getNumDataCodewords();const p=new Uint8Array(f),w=u.length;for(let S=0;S<w;S++){const k=u[S],P=k.getCodewords(),q=k.getNumDataCodewords();this.correctErrors(P,q);for(let te=0;te<q;te++)p[te*w+S]=P[te]}return ii.decode(p)}correctErrors(e,n){const s=new Int32Array(e);try{this.rsDecoder.decode(s,e.length-n)}catch{throw new A}for(let d=0;d<n;d++)e[d]=s[d]}}class kr{constructor(e){this.image=e,this.rectangleDetector=new dt(this.image)}detect(){const e=this.rectangleDetector.detect();let n=this.detectSolid1(e);if(n=this.detectSolid2(n),n[3]=this.correctTopRight(n),!n[3])throw new ne;n=this.shiftToModuleCenter(n);const s=n[0],d=n[1],u=n[2],f=n[3];let p=this.transitionsBetween(s,f)+1,w=this.transitionsBetween(u,f)+1;(p&1)===1&&(p+=1),(w&1)===1&&(w+=1),4*p<7*w&&4*w<7*p&&(p=w=Math.max(p,w));let S=kr.sampleGrid(this.image,s,d,u,f,p,w);return new rt(S,[s,d,u,f])}static shiftPoint(e,n,s){let d=(n.getX()-e.getX())/(s+1),u=(n.getY()-e.getY())/(s+1);return new Re(e.getX()+d,e.getY()+u)}static moveAway(e,n,s){let d=e.getX(),u=e.getY();return d<n?d-=1:d+=1,u<s?u-=1:u+=1,new Re(d,u)}detectSolid1(e){let n=e[0],s=e[1],d=e[3],u=e[2],f=this.transitionsBetween(n,s),p=this.transitionsBetween(s,d),w=this.transitionsBetween(d,u),S=this.transitionsBetween(u,n),k=f,P=[u,n,s,d];return k>p&&(k=p,P[0]=n,P[1]=s,P[2]=d,P[3]=u),k>w&&(k=w,P[0]=s,P[1]=d,P[2]=u,P[3]=n),k>S&&(P[0]=d,P[1]=u,P[2]=n,P[3]=s),P}detectSolid2(e){let n=e[0],s=e[1],d=e[2],u=e[3],f=this.transitionsBetween(n,u),p=kr.shiftPoint(s,d,(f+1)*4),w=kr.shiftPoint(d,s,(f+1)*4),S=this.transitionsBetween(p,n),k=this.transitionsBetween(w,u);return S<k?(e[0]=n,e[1]=s,e[2]=d,e[3]=u):(e[0]=s,e[1]=d,e[2]=u,e[3]=n),e}correctTopRight(e){let n=e[0],s=e[1],d=e[2],u=e[3],f=this.transitionsBetween(n,u),p=this.transitionsBetween(s,u),w=kr.shiftPoint(n,s,(p+1)*4),S=kr.shiftPoint(d,s,(f+1)*4);f=this.transitionsBetween(w,u),p=this.transitionsBetween(S,u);let k=new Re(u.getX()+(d.getX()-s.getX())/(f+1),u.getY()+(d.getY()-s.getY())/(f+1)),P=new Re(u.getX()+(n.getX()-s.getX())/(p+1),u.getY()+(n.getY()-s.getY())/(p+1));if(!this.isValid(k))return this.isValid(P)?P:null;if(!this.isValid(P))return k;let q=this.transitionsBetween(w,k)+this.transitionsBetween(S,k),te=this.transitionsBetween(w,P)+this.transitionsBetween(S,P);return q>te?k:P}shiftToModuleCenter(e){let n=e[0],s=e[1],d=e[2],u=e[3],f=this.transitionsBetween(n,u)+1,p=this.transitionsBetween(d,u)+1,w=kr.shiftPoint(n,s,p*4),S=kr.shiftPoint(d,s,f*4);f=this.transitionsBetween(w,u)+1,p=this.transitionsBetween(S,u)+1,(f&1)===1&&(f+=1),(p&1)===1&&(p+=1);let k=(n.getX()+s.getX()+d.getX()+u.getX())/4,P=(n.getY()+s.getY()+d.getY()+u.getY())/4;n=kr.moveAway(n,k,P),s=kr.moveAway(s,k,P),d=kr.moveAway(d,k,P),u=kr.moveAway(u,k,P);let q,te;return w=kr.shiftPoint(n,s,p*4),w=kr.shiftPoint(w,u,f*4),q=kr.shiftPoint(s,n,p*4),q=kr.shiftPoint(q,d,f*4),S=kr.shiftPoint(d,u,p*4),S=kr.shiftPoint(S,s,f*4),te=kr.shiftPoint(u,d,p*4),te=kr.shiftPoint(te,n,f*4),[w,q,S,te]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,n,s,d,u,f,p){return Rt.getInstance().sampleGrid(e,f,p,.5,.5,f-.5,.5,f-.5,p-.5,.5,p-.5,n.getX(),n.getY(),u.getX(),u.getY(),d.getX(),d.getY(),s.getX(),s.getY())}transitionsBetween(e,n){let s=Math.trunc(e.getX()),d=Math.trunc(e.getY()),u=Math.trunc(n.getX()),f=Math.trunc(n.getY()),p=Math.abs(f-d)>Math.abs(u-s);if(p){let ge=s;s=d,d=ge,ge=u,u=f,f=ge}let w=Math.abs(u-s),S=Math.abs(f-d),k=-w/2,P=d<f?1:-1,q=s<u?1:-1,te=0,he=this.image.get(p?d:s,p?s:d);for(let ge=s,we=d;ge!==u;ge+=q){let Me=this.image.get(p?we:ge,p?ge:we);if(Me!==he&&(te++,he=Me),k+=S,k>0){if(we===f)break;we+=P,k-=w}}return te}}class ln{constructor(){this.decoder=new na}decode(e,n=null){let s,d;if(n!=null&&n.has(xe.PURE_BARCODE)){const S=ln.extractPureBits(e.getBlackMatrix());s=this.decoder.decode(S),d=ln.NO_POINTS}else{const S=new kr(e.getBlackMatrix()).detect();s=this.decoder.decode(S.getBits()),d=S.getPoints()}const u=s.getRawBytes(),f=new K(s.getText(),u,8*u.length,d,ae.DATA_MATRIX,_.currentTimeMillis()),p=s.getByteSegments();p!=null&&f.putMetadata(Ae.BYTE_SEGMENTS,p);const w=s.getECLevel();return w!=null&&f.putMetadata(Ae.ERROR_CORRECTION_LEVEL,w),f}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),s=e.getBottomRightOnBit();if(n==null||s==null)throw new ne;const d=this.moduleSize(n,e);let u=n[1];const f=s[1];let p=n[0];const S=(s[0]-p+1)/d,k=(f-u+1)/d;if(S<=0||k<=0)throw new ne;const P=d/2;u+=P,p+=P;const q=new le(S,k);for(let te=0;te<k;te++){const he=u+te*d;for(let ge=0;ge<S;ge++)e.get(p+ge*d,he)&&q.set(ge,te)}return q}static moduleSize(e,n){const s=n.getWidth();let d=e[0];const u=e[1];for(;d<s&&n.get(d,u);)d++;if(d===s)throw new ne;const f=d-e[0];if(f===0)throw new ne;return f}}ln.NO_POINTS=[];class Ns extends W{constructor(e=500){super(new ln,e)}}var Qr;(function(R){R[R.L=0]="L",R[R.M=1]="M",R[R.Q=2]="Q",R[R.H=3]="H"})(Qr||(Qr={}));class cr{constructor(e,n,s){this.value=e,this.stringValue=n,this.bits=s,cr.FOR_BITS.set(s,this),cr.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return cr.L;case"M":return cr.M;case"Q":return cr.Q;case"H":return cr.H;default:throw new v(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof cr))return!1;const n=e;return this.value===n.value}static forBits(e){if(e<0||e>=cr.FOR_BITS.size)throw new C;return cr.FOR_BITS.get(e)}}cr.FOR_BITS=new Map,cr.FOR_VALUE=new Map,cr.L=new cr(Qr.L,"L",1),cr.M=new cr(Qr.M,"M",0),cr.Q=new cr(Qr.Q,"Q",3),cr.H=new cr(Qr.H,"H",2);class Jr{constructor(e){this.errorCorrectionLevel=cr.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,n){return B.bitCount(e^n)}static decodeFormatInformation(e,n){const s=Jr.doDecodeFormatInformation(e,n);return s!==null?s:Jr.doDecodeFormatInformation(e^Jr.FORMAT_INFO_MASK_QR,n^Jr.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,n){let s=Number.MAX_SAFE_INTEGER,d=0;for(const u of Jr.FORMAT_INFO_DECODE_LOOKUP){const f=u[0];if(f===e||f===n)return new Jr(u[1]);let p=Jr.numBitsDiffering(e,f);p<s&&(d=u[1],s=p),e!==n&&(p=Jr.numBitsDiffering(n,f),p<s&&(d=u[1],s=p))}return s<=3?new Jr(d):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof Jr))return!1;const n=e;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask}}Jr.FORMAT_INFO_MASK_QR=21522,Jr.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class je{constructor(e,...n){this.ecCodewordsPerBlock=e,this.ecBlocks=n}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const n=this.ecBlocks;for(const s of n)e+=s.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class J{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class vt{constructor(e,n,...s){this.versionNumber=e,this.alignmentPatternCenters=n,this.ecBlocks=s;let d=0;const u=s[0].getECCodewordsPerBlock(),f=s[0].getECBlocks();for(const p of f)d+=p.getCount()*(p.getDataCodewords()+u);this.totalCodewords=d}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new $;try{return this.getVersionForNumber((e-17)/4)}catch{throw new $}}static getVersionForNumber(e){if(e<1||e>40)throw new C;return vt.VERSIONS[e-1]}static decodeVersionInformation(e){let n=Number.MAX_SAFE_INTEGER,s=0;for(let d=0;d<vt.VERSION_DECODE_INFO.length;d++){const u=vt.VERSION_DECODE_INFO[d];if(u===e)return vt.getVersionForNumber(d+7);const f=Jr.numBitsDiffering(e,u);f<n&&(s=d+7,n=f)}return n<=3?vt.getVersionForNumber(s):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),n=new le(e);n.setRegion(0,0,9,9),n.setRegion(e-8,0,8,9),n.setRegion(0,e-8,9,8);const s=this.alignmentPatternCenters.length;for(let d=0;d<s;d++){const u=this.alignmentPatternCenters[d]-2;for(let f=0;f<s;f++)d===0&&(f===0||f===s-1)||d===s-1&&f===0||n.setRegion(this.alignmentPatternCenters[f]-2,u,5,5)}return n.setRegion(6,9,1,e-17),n.setRegion(9,6,e-17,1),this.versionNumber>6&&(n.setRegion(e-11,0,3,6),n.setRegion(0,e-11,6,3)),n}toString(){return""+this.versionNumber}}vt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),vt.VERSIONS=[new vt(1,new Int32Array(0),new je(7,new J(1,19)),new je(10,new J(1,16)),new je(13,new J(1,13)),new je(17,new J(1,9))),new vt(2,Int32Array.from([6,18]),new je(10,new J(1,34)),new je(16,new J(1,28)),new je(22,new J(1,22)),new je(28,new J(1,16))),new vt(3,Int32Array.from([6,22]),new je(15,new J(1,55)),new je(26,new J(1,44)),new je(18,new J(2,17)),new je(22,new J(2,13))),new vt(4,Int32Array.from([6,26]),new je(20,new J(1,80)),new je(18,new J(2,32)),new je(26,new J(2,24)),new je(16,new J(4,9))),new vt(5,Int32Array.from([6,30]),new je(26,new J(1,108)),new je(24,new J(2,43)),new je(18,new J(2,15),new J(2,16)),new je(22,new J(2,11),new J(2,12))),new vt(6,Int32Array.from([6,34]),new je(18,new J(2,68)),new je(16,new J(4,27)),new je(24,new J(4,19)),new je(28,new J(4,15))),new vt(7,Int32Array.from([6,22,38]),new je(20,new J(2,78)),new je(18,new J(4,31)),new je(18,new J(2,14),new J(4,15)),new je(26,new J(4,13),new J(1,14))),new vt(8,Int32Array.from([6,24,42]),new je(24,new J(2,97)),new je(22,new J(2,38),new J(2,39)),new je(22,new J(4,18),new J(2,19)),new je(26,new J(4,14),new J(2,15))),new vt(9,Int32Array.from([6,26,46]),new je(30,new J(2,116)),new je(22,new J(3,36),new J(2,37)),new je(20,new J(4,16),new J(4,17)),new je(24,new J(4,12),new J(4,13))),new vt(10,Int32Array.from([6,28,50]),new je(18,new J(2,68),new J(2,69)),new je(26,new J(4,43),new J(1,44)),new je(24,new J(6,19),new J(2,20)),new je(28,new J(6,15),new J(2,16))),new vt(11,Int32Array.from([6,30,54]),new je(20,new J(4,81)),new je(30,new J(1,50),new J(4,51)),new je(28,new J(4,22),new J(4,23)),new je(24,new J(3,12),new J(8,13))),new vt(12,Int32Array.from([6,32,58]),new je(24,new J(2,92),new J(2,93)),new je(22,new J(6,36),new J(2,37)),new je(26,new J(4,20),new J(6,21)),new je(28,new J(7,14),new J(4,15))),new vt(13,Int32Array.from([6,34,62]),new je(26,new J(4,107)),new je(22,new J(8,37),new J(1,38)),new je(24,new J(8,20),new J(4,21)),new je(22,new J(12,11),new J(4,12))),new vt(14,Int32Array.from([6,26,46,66]),new je(30,new J(3,115),new J(1,116)),new je(24,new J(4,40),new J(5,41)),new je(20,new J(11,16),new J(5,17)),new je(24,new J(11,12),new J(5,13))),new vt(15,Int32Array.from([6,26,48,70]),new je(22,new J(5,87),new J(1,88)),new je(24,new J(5,41),new J(5,42)),new je(30,new J(5,24),new J(7,25)),new je(24,new J(11,12),new J(7,13))),new vt(16,Int32Array.from([6,26,50,74]),new je(24,new J(5,98),new J(1,99)),new je(28,new J(7,45),new J(3,46)),new je(24,new J(15,19),new J(2,20)),new je(30,new J(3,15),new J(13,16))),new vt(17,Int32Array.from([6,30,54,78]),new je(28,new J(1,107),new J(5,108)),new je(28,new J(10,46),new J(1,47)),new je(28,new J(1,22),new J(15,23)),new je(28,new J(2,14),new J(17,15))),new vt(18,Int32Array.from([6,30,56,82]),new je(30,new J(5,120),new J(1,121)),new je(26,new J(9,43),new J(4,44)),new je(28,new J(17,22),new J(1,23)),new je(28,new J(2,14),new J(19,15))),new vt(19,Int32Array.from([6,30,58,86]),new je(28,new J(3,113),new J(4,114)),new je(26,new J(3,44),new J(11,45)),new je(26,new J(17,21),new J(4,22)),new je(26,new J(9,13),new J(16,14))),new vt(20,Int32Array.from([6,34,62,90]),new je(28,new J(3,107),new J(5,108)),new je(26,new J(3,41),new J(13,42)),new je(30,new J(15,24),new J(5,25)),new je(28,new J(15,15),new J(10,16))),new vt(21,Int32Array.from([6,28,50,72,94]),new je(28,new J(4,116),new J(4,117)),new je(26,new J(17,42)),new je(28,new J(17,22),new J(6,23)),new je(30,new J(19,16),new J(6,17))),new vt(22,Int32Array.from([6,26,50,74,98]),new je(28,new J(2,111),new J(7,112)),new je(28,new J(17,46)),new je(30,new J(7,24),new J(16,25)),new je(24,new J(34,13))),new vt(23,Int32Array.from([6,30,54,78,102]),new je(30,new J(4,121),new J(5,122)),new je(28,new J(4,47),new J(14,48)),new je(30,new J(11,24),new J(14,25)),new je(30,new J(16,15),new J(14,16))),new vt(24,Int32Array.from([6,28,54,80,106]),new je(30,new J(6,117),new J(4,118)),new je(28,new J(6,45),new J(14,46)),new je(30,new J(11,24),new J(16,25)),new je(30,new J(30,16),new J(2,17))),new vt(25,Int32Array.from([6,32,58,84,110]),new je(26,new J(8,106),new J(4,107)),new je(28,new J(8,47),new J(13,48)),new je(30,new J(7,24),new J(22,25)),new je(30,new J(22,15),new J(13,16))),new vt(26,Int32Array.from([6,30,58,86,114]),new je(28,new J(10,114),new J(2,115)),new je(28,new J(19,46),new J(4,47)),new je(28,new J(28,22),new J(6,23)),new je(30,new J(33,16),new J(4,17))),new vt(27,Int32Array.from([6,34,62,90,118]),new je(30,new J(8,122),new J(4,123)),new je(28,new J(22,45),new J(3,46)),new je(30,new J(8,23),new J(26,24)),new je(30,new J(12,15),new J(28,16))),new vt(28,Int32Array.from([6,26,50,74,98,122]),new je(30,new J(3,117),new J(10,118)),new je(28,new J(3,45),new J(23,46)),new je(30,new J(4,24),new J(31,25)),new je(30,new J(11,15),new J(31,16))),new vt(29,Int32Array.from([6,30,54,78,102,126]),new je(30,new J(7,116),new J(7,117)),new je(28,new J(21,45),new J(7,46)),new je(30,new J(1,23),new J(37,24)),new je(30,new J(19,15),new J(26,16))),new vt(30,Int32Array.from([6,26,52,78,104,130]),new je(30,new J(5,115),new J(10,116)),new je(28,new J(19,47),new J(10,48)),new je(30,new J(15,24),new J(25,25)),new je(30,new J(23,15),new J(25,16))),new vt(31,Int32Array.from([6,30,56,82,108,134]),new je(30,new J(13,115),new J(3,116)),new je(28,new J(2,46),new J(29,47)),new je(30,new J(42,24),new J(1,25)),new je(30,new J(23,15),new J(28,16))),new vt(32,Int32Array.from([6,34,60,86,112,138]),new je(30,new J(17,115)),new je(28,new J(10,46),new J(23,47)),new je(30,new J(10,24),new J(35,25)),new je(30,new J(19,15),new J(35,16))),new vt(33,Int32Array.from([6,30,58,86,114,142]),new je(30,new J(17,115),new J(1,116)),new je(28,new J(14,46),new J(21,47)),new je(30,new J(29,24),new J(19,25)),new je(30,new J(11,15),new J(46,16))),new vt(34,Int32Array.from([6,34,62,90,118,146]),new je(30,new J(13,115),new J(6,116)),new je(28,new J(14,46),new J(23,47)),new je(30,new J(44,24),new J(7,25)),new je(30,new J(59,16),new J(1,17))),new vt(35,Int32Array.from([6,30,54,78,102,126,150]),new je(30,new J(12,121),new J(7,122)),new je(28,new J(12,47),new J(26,48)),new je(30,new J(39,24),new J(14,25)),new je(30,new J(22,15),new J(41,16))),new vt(36,Int32Array.from([6,24,50,76,102,128,154]),new je(30,new J(6,121),new J(14,122)),new je(28,new J(6,47),new J(34,48)),new je(30,new J(46,24),new J(10,25)),new je(30,new J(2,15),new J(64,16))),new vt(37,Int32Array.from([6,28,54,80,106,132,158]),new je(30,new J(17,122),new J(4,123)),new je(28,new J(29,46),new J(14,47)),new je(30,new J(49,24),new J(10,25)),new je(30,new J(24,15),new J(46,16))),new vt(38,Int32Array.from([6,32,58,84,110,136,162]),new je(30,new J(4,122),new J(18,123)),new je(28,new J(13,46),new J(32,47)),new je(30,new J(48,24),new J(14,25)),new je(30,new J(42,15),new J(32,16))),new vt(39,Int32Array.from([6,26,54,82,110,138,166]),new je(30,new J(20,117),new J(4,118)),new je(28,new J(40,47),new J(7,48)),new je(30,new J(43,24),new J(22,25)),new je(30,new J(10,15),new J(67,16))),new vt(40,Int32Array.from([6,30,58,86,114,142,170]),new je(30,new J(19,118),new J(6,119)),new je(28,new J(18,47),new J(31,48)),new je(30,new J(34,24),new J(34,25)),new je(30,new J(20,15),new J(61,16)))];var zr;(function(R){R[R.DATA_MASK_000=0]="DATA_MASK_000",R[R.DATA_MASK_001=1]="DATA_MASK_001",R[R.DATA_MASK_010=2]="DATA_MASK_010",R[R.DATA_MASK_011=3]="DATA_MASK_011",R[R.DATA_MASK_100=4]="DATA_MASK_100",R[R.DATA_MASK_101=5]="DATA_MASK_101",R[R.DATA_MASK_110=6]="DATA_MASK_110",R[R.DATA_MASK_111=7]="DATA_MASK_111"})(zr||(zr={}));class kn{constructor(e,n){this.value=e,this.isMasked=n}unmaskBitMatrix(e,n){for(let s=0;s<n;s++)for(let d=0;d<n;d++)this.isMasked(s,d)&&e.flip(d,s)}}kn.values=new Map([[zr.DATA_MASK_000,new kn(zr.DATA_MASK_000,(R,e)=>(R+e&1)===0)],[zr.DATA_MASK_001,new kn(zr.DATA_MASK_001,(R,e)=>(R&1)===0)],[zr.DATA_MASK_010,new kn(zr.DATA_MASK_010,(R,e)=>e%3===0)],[zr.DATA_MASK_011,new kn(zr.DATA_MASK_011,(R,e)=>(R+e)%3===0)],[zr.DATA_MASK_100,new kn(zr.DATA_MASK_100,(R,e)=>(Math.floor(R/2)+Math.floor(e/3)&1)===0)],[zr.DATA_MASK_101,new kn(zr.DATA_MASK_101,(R,e)=>R*e%6===0)],[zr.DATA_MASK_110,new kn(zr.DATA_MASK_110,(R,e)=>R*e%6<3)],[zr.DATA_MASK_111,new kn(zr.DATA_MASK_111,(R,e)=>(R+e+R*e%3&1)===0)]]);class ia{constructor(e){const n=e.getHeight();if(n<21||(n&3)!==1)throw new $;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let u=0;u<6;u++)e=this.copyBit(u,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let u=5;u>=0;u--)e=this.copyBit(8,u,e);const n=this.bitMatrix.getHeight();let s=0;const d=n-7;for(let u=n-1;u>=d;u--)s=this.copyBit(8,u,s);for(let u=n-8;u<n;u++)s=this.copyBit(u,8,s);if(this.parsedFormatInfo=Jr.decodeFormatInformation(e,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new $}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),n=Math.floor((e-17)/4);if(n<=6)return vt.getVersionForNumber(n);let s=0;const d=e-11;for(let f=5;f>=0;f--)for(let p=e-9;p>=d;p--)s=this.copyBit(p,f,s);let u=vt.decodeVersionInformation(s);if(u!==null&&u.getDimensionForVersion()===e)return this.parsedVersion=u,u;s=0;for(let f=5;f>=0;f--)for(let p=e-9;p>=d;p--)s=this.copyBit(f,p,s);if(u=vt.decodeVersionInformation(s),u!==null&&u.getDimensionForVersion()===e)return this.parsedVersion=u,u;throw new $}copyBit(e,n,s){return(this.isMirror?this.bitMatrix.get(n,e):this.bitMatrix.get(e,n))?s<<1|1:s<<1}readCodewords(){const e=this.readFormatInformation(),n=this.readVersion(),s=kn.values.get(e.getDataMask()),d=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,d);const u=n.buildFunctionPattern();let f=!0;const p=new Uint8Array(n.getTotalCodewords());let w=0,S=0,k=0;for(let P=d-1;P>0;P-=2){P===6&&P--;for(let q=0;q<d;q++){const te=f?d-1-q:q;for(let he=0;he<2;he++)u.get(P-he,te)||(k++,S<<=1,this.bitMatrix.get(P-he,te)&&(S|=1),k===8&&(p[w++]=S,k=0,S=0))}f=!f}if(w!==n.getTotalCodewords())throw new $;return p}remask(){if(this.parsedFormatInfo===null)return;const e=kn.values[this.parsedFormatInfo.getDataMask()],n=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,n)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let n=0,s=e.getWidth();n<s;n++)for(let d=n+1,u=e.getHeight();d<u;d++)e.get(n,d)!==e.get(d,n)&&(e.flip(d,n),e.flip(n,d))}}class sa{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n,s){if(e.length!==n.getTotalCodewords())throw new C;const d=n.getECBlocksForLevel(s);let u=0;const f=d.getECBlocks();for(const he of f)u+=he.getCount();const p=new Array(u);let w=0;for(const he of f)for(let ge=0;ge<he.getCount();ge++){const we=he.getDataCodewords(),Me=d.getECCodewordsPerBlock()+we;p[w++]=new sa(we,new Uint8Array(Me))}const S=p[0].codewords.length;let k=p.length-1;for(;k>=0&&p[k].codewords.length!==S;)k--;k++;const P=S-d.getECCodewordsPerBlock();let q=0;for(let he=0;he<P;he++)for(let ge=0;ge<w;ge++)p[ge].codewords[he]=e[q++];for(let he=k;he<w;he++)p[he].codewords[P]=e[q++];const te=p[0].codewords.length;for(let he=P;he<te;he++)for(let ge=0;ge<w;ge++){const we=ge<k?he:he+1;p[ge].codewords[we]=e[q++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Dn;(function(R){R[R.TERMINATOR=0]="TERMINATOR",R[R.NUMERIC=1]="NUMERIC",R[R.ALPHANUMERIC=2]="ALPHANUMERIC",R[R.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",R[R.BYTE=4]="BYTE",R[R.ECI=5]="ECI",R[R.KANJI=6]="KANJI",R[R.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",R[R.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",R[R.HANZI=9]="HANZI"})(Dn||(Dn={}));class Et{constructor(e,n,s,d){this.value=e,this.stringValue=n,this.characterCountBitsForVersions=s,this.bits=d,Et.FOR_BITS.set(d,this),Et.FOR_VALUE.set(e,this)}static forBits(e){const n=Et.FOR_BITS.get(e);if(n===void 0)throw new C;return n}getCharacterCountBits(e){const n=e.getVersionNumber();let s;return n<=9?s=0:n<=26?s=1:s=2,this.characterCountBitsForVersions[s]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof Et))return!1;const n=e;return this.value===n.value}toString(){return this.stringValue}}Et.FOR_BITS=new Map,Et.FOR_VALUE=new Map,Et.TERMINATOR=new Et(Dn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Et.NUMERIC=new Et(Dn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Et.ALPHANUMERIC=new Et(Dn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Et.STRUCTURED_APPEND=new Et(Dn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Et.BYTE=new Et(Dn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Et.ECI=new Et(Dn.ECI,"ECI",Int32Array.from([0,0,0]),7),Et.KANJI=new Et(Dn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Et.FNC1_FIRST_POSITION=new Et(Dn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Et.FNC1_SECOND_POSITION=new Et(Dn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Et.HANZI=new Et(Dn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class ar{static decode(e,n,s,d){const u=new vs(e);let f=new oe;const p=new Array;let w=-1,S=-1;try{let k=null,P=!1,q;do{if(u.available()<4)q=Et.TERMINATOR;else{const te=u.readBits(4);q=Et.forBits(te)}switch(q){case Et.TERMINATOR:break;case Et.FNC1_FIRST_POSITION:case Et.FNC1_SECOND_POSITION:P=!0;break;case Et.STRUCTURED_APPEND:if(u.available()<16)throw new $;w=u.readBits(8),S=u.readBits(8);break;case Et.ECI:const te=ar.parseECIValue(u);if(k=ce.getCharacterSetECIByValue(te),k===null)throw new $;break;case Et.HANZI:const he=u.readBits(4),ge=u.readBits(q.getCharacterCountBits(n));he===ar.GB2312_SUBSET&&ar.decodeHanziSegment(u,f,ge);break;default:const we=u.readBits(q.getCharacterCountBits(n));switch(q){case Et.NUMERIC:ar.decodeNumericSegment(u,f,we);break;case Et.ALPHANUMERIC:ar.decodeAlphanumericSegment(u,f,we,P);break;case Et.BYTE:ar.decodeByteSegment(u,f,we,k,p,d);break;case Et.KANJI:ar.decodeKanjiSegment(u,f,we);break;default:throw new $}break}}while(q!==Et.TERMINATOR)}catch{throw new $}return new ke(e,f.toString(),p.length===0?null:p,s===null?null:s.toString(),w,S)}static decodeHanziSegment(e,n,s){if(s*13>e.available())throw new $;const d=new Uint8Array(2*s);let u=0;for(;s>0;){const f=e.readBits(13);let p=f/96<<8&4294967295|f%96;p<959?p+=41377:p+=42657,d[u]=p>>8&255,d[u+1]=p&255,u+=2,s--}try{n.append(Y.decode(d,V.GB2312))}catch(f){throw new $(f)}}static decodeKanjiSegment(e,n,s){if(s*13>e.available())throw new $;const d=new Uint8Array(2*s);let u=0;for(;s>0;){const f=e.readBits(13);let p=f/192<<8&4294967295|f%192;p<7936?p+=33088:p+=49472,d[u]=p>>8,d[u+1]=p,u+=2,s--}try{n.append(Y.decode(d,V.SHIFT_JIS))}catch(f){throw new $(f)}}static decodeByteSegment(e,n,s,d,u,f){if(8*s>e.available())throw new $;const p=new Uint8Array(s);for(let S=0;S<s;S++)p[S]=e.readBits(8);let w;d===null?w=V.guessEncoding(p,f):w=d.getName();try{n.append(Y.decode(p,w))}catch(S){throw new $(S)}u.push(p)}static toAlphaNumericChar(e){if(e>=ar.ALPHANUMERIC_CHARS.length)throw new $;return ar.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,n,s,d){const u=n.length();for(;s>1;){if(e.available()<11)throw new $;const f=e.readBits(11);n.append(ar.toAlphaNumericChar(Math.floor(f/45))),n.append(ar.toAlphaNumericChar(f%45)),s-=2}if(s===1){if(e.available()<6)throw new $;n.append(ar.toAlphaNumericChar(e.readBits(6)))}if(d)for(let f=u;f<n.length();f++)n.charAt(f)==="%"&&(f<n.length()-1&&n.charAt(f+1)==="%"?n.deleteCharAt(f+1):n.setCharAt(f,""))}static decodeNumericSegment(e,n,s){for(;s>=3;){if(e.available()<10)throw new $;const d=e.readBits(10);if(d>=1e3)throw new $;n.append(ar.toAlphaNumericChar(Math.floor(d/100))),n.append(ar.toAlphaNumericChar(Math.floor(d/10)%10)),n.append(ar.toAlphaNumericChar(d%10)),s-=3}if(s===2){if(e.available()<7)throw new $;const d=e.readBits(7);if(d>=100)throw new $;n.append(ar.toAlphaNumericChar(Math.floor(d/10))),n.append(ar.toAlphaNumericChar(d%10))}else if(s===1){if(e.available()<4)throw new $;const d=e.readBits(4);if(d>=10)throw new $;n.append(ar.toAlphaNumericChar(d))}}static parseECIValue(e){const n=e.readBits(8);if(!(n&128))return n&127;if((n&192)===128){const s=e.readBits(8);return(n&63)<<8&4294967295|s}if((n&224)===192){const s=e.readBits(16);return(n&31)<<16&4294967295|s}throw new $}}ar.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",ar.GB2312_SUBSET=1;class is{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const n=e[0];e[0]=e[2],e[2]=n}}class As{constructor(){this.rsDecoder=new de(Fe.QR_CODE_FIELD_256)}decodeBooleanArray(e,n){return this.decodeBitMatrix(le.parseFromBooleanArray(e),n)}decodeBitMatrix(e,n){const s=new ia(e);let d=null;try{return this.decodeBitMatrixParser(s,n)}catch(u){d=u}try{s.remask(),s.setMirror(!0),s.readVersion(),s.readFormatInformation(),s.mirror();const u=this.decodeBitMatrixParser(s,n);return u.setOther(new is(!0)),u}catch(u){throw d!==null?d:u}}decodeBitMatrixParser(e,n){const s=e.readVersion(),d=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),f=sa.getDataBlocks(u,s,d);let p=0;for(const k of f)p+=k.getNumDataCodewords();const w=new Uint8Array(p);let S=0;for(const k of f){const P=k.getCodewords(),q=k.getNumDataCodewords();this.correctErrors(P,q);for(let te=0;te<q;te++)w[S++]=P[te]}return ar.decode(w,s,d,n)}correctErrors(e,n){const s=new Int32Array(e);try{this.rsDecoder.decode(s,e.length-n)}catch{throw new A}for(let d=0;d<n;d++)e[d]=s[d]}}class Cs extends Re{constructor(e,n,s){super(e,n),this.estimatedModuleSize=s}aboutEquals(e,n,s){if(Math.abs(n-this.getY())<=e&&Math.abs(s-this.getX())<=e){const d=Math.abs(e-this.estimatedModuleSize);return d<=1||d<=this.estimatedModuleSize}return!1}combineEstimate(e,n,s){const d=(this.getX()+n)/2,u=(this.getY()+e)/2,f=(this.estimatedModuleSize+s)/2;return new Cs(d,u,f)}}class en{constructor(e,n,s,d,u,f,p){this.image=e,this.startX=n,this.startY=s,this.width=d,this.height=u,this.moduleSize=f,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,n=this.height,s=this.width,d=e+s,u=this.startY+n/2,f=new Int32Array(3),p=this.image;for(let w=0;w<n;w++){const S=u+(w&1?-Math.floor((w+1)/2):Math.floor((w+1)/2));f[0]=0,f[1]=0,f[2]=0;let k=e;for(;k<d&&!p.get(k,S);)k++;let P=0;for(;k<d;){if(p.get(k,S))if(P===1)f[1]++;else if(P===2){if(this.foundPatternCross(f)){const q=this.handlePossibleCenter(f,S,k);if(q!==null)return q}f[0]=f[2],f[1]=1,f[2]=0,P=1}else f[++P]++;else P===1&&P++,f[P]++;k++}if(this.foundPatternCross(f)){const q=this.handlePossibleCenter(f,S,d);if(q!==null)return q}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ne}static centerFromEnd(e,n){return n-e[2]-e[1]/2}foundPatternCross(e){const n=this.moduleSize,s=n/2;for(let d=0;d<3;d++)if(Math.abs(n-e[d])>=s)return!1;return!0}crossCheckVertical(e,n,s,d){const u=this.image,f=u.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let w=e;for(;w>=0&&u.get(n,w)&&p[1]<=s;)p[1]++,w--;if(w<0||p[1]>s)return NaN;for(;w>=0&&!u.get(n,w)&&p[0]<=s;)p[0]++,w--;if(p[0]>s)return NaN;for(w=e+1;w<f&&u.get(n,w)&&p[1]<=s;)p[1]++,w++;if(w===f||p[1]>s)return NaN;for(;w<f&&!u.get(n,w)&&p[2]<=s;)p[2]++,w++;if(p[2]>s)return NaN;const S=p[0]+p[1]+p[2];return 5*Math.abs(S-d)>=2*d?NaN:this.foundPatternCross(p)?en.centerFromEnd(p,w):NaN}handlePossibleCenter(e,n,s){const d=e[0]+e[1]+e[2],u=en.centerFromEnd(e,s),f=this.crossCheckVertical(n,u,2*e[1],d);if(!isNaN(f)){const p=(e[0]+e[1]+e[2])/3;for(const S of this.possibleCenters)if(S.aboutEquals(p,f,u))return S.combineEstimate(f,u,p);const w=new Cs(u,f,p);this.possibleCenters.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return null}}class aa extends Re{constructor(e,n,s,d){super(e,n),this.estimatedModuleSize=s,this.count=d,d===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,n,s){if(Math.abs(n-this.getY())<=e&&Math.abs(s-this.getX())<=e){const d=Math.abs(e-this.estimatedModuleSize);return d<=1||d<=this.estimatedModuleSize}return!1}combineEstimate(e,n,s){const d=this.count+1,u=(this.count*this.getX()+n)/d,f=(this.count*this.getY()+e)/d,p=(this.count*this.estimatedModuleSize+s)/d;return new aa(u,f,p,d)}}class Ia{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class yt{constructor(e,n){this.image=e,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const n=e!=null&&e.get(xe.TRY_HARDER)!==void 0,s=e!=null&&e.get(xe.PURE_BARCODE)!==void 0,d=this.image,u=d.getHeight(),f=d.getWidth();let p=Math.floor(3*u/(4*yt.MAX_MODULES));(p<yt.MIN_SKIP||n)&&(p=yt.MIN_SKIP);let w=!1;const S=new Int32Array(5);for(let P=p-1;P<u&&!w;P+=p){S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0;let q=0;for(let te=0;te<f;te++)if(d.get(te,P))(q&1)===1&&q++,S[q]++;else if(q&1)S[q]++;else if(q===4)if(yt.foundPatternCross(S)){if(this.handlePossibleCenter(S,P,te,s)===!0)if(p=2,this.hasSkipped===!0)w=this.haveMultiplyConfirmedCenters();else{const ge=this.findRowSkip();ge>S[2]&&(P+=ge-S[2]-p,te=f-1)}else{S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,q=3;continue}q=0,S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0}else S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,q=3;else S[++q]++;yt.foundPatternCross(S)&&this.handlePossibleCenter(S,P,f,s)===!0&&(p=S[0],this.hasSkipped&&(w=this.haveMultiplyConfirmedCenters()))}const k=this.selectBestPatterns();return Re.orderBestPatterns(k),new Ia(k)}static centerFromEnd(e,n){return n-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let n=0;for(let u=0;u<5;u++){const f=e[u];if(f===0)return!1;n+=f}if(n<7)return!1;const s=n/7,d=s/2;return Math.abs(s-e[0])<d&&Math.abs(s-e[1])<d&&Math.abs(3*s-e[2])<3*d&&Math.abs(s-e[3])<d&&Math.abs(s-e[4])<d}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,n,s,d){const u=this.getCrossCheckStateCount();let f=0;const p=this.image;for(;e>=f&&n>=f&&p.get(n-f,e-f);)u[2]++,f++;if(e<f||n<f)return!1;for(;e>=f&&n>=f&&!p.get(n-f,e-f)&&u[1]<=s;)u[1]++,f++;if(e<f||n<f||u[1]>s)return!1;for(;e>=f&&n>=f&&p.get(n-f,e-f)&&u[0]<=s;)u[0]++,f++;if(u[0]>s)return!1;const w=p.getHeight(),S=p.getWidth();for(f=1;e+f<w&&n+f<S&&p.get(n+f,e+f);)u[2]++,f++;if(e+f>=w||n+f>=S)return!1;for(;e+f<w&&n+f<S&&!p.get(n+f,e+f)&&u[3]<s;)u[3]++,f++;if(e+f>=w||n+f>=S||u[3]>=s)return!1;for(;e+f<w&&n+f<S&&p.get(n+f,e+f)&&u[4]<s;)u[4]++,f++;if(u[4]>=s)return!1;const k=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(k-d)<2*d&&yt.foundPatternCross(u)}crossCheckVertical(e,n,s,d){const u=this.image,f=u.getHeight(),p=this.getCrossCheckStateCount();let w=e;for(;w>=0&&u.get(n,w);)p[2]++,w--;if(w<0)return NaN;for(;w>=0&&!u.get(n,w)&&p[1]<=s;)p[1]++,w--;if(w<0||p[1]>s)return NaN;for(;w>=0&&u.get(n,w)&&p[0]<=s;)p[0]++,w--;if(p[0]>s)return NaN;for(w=e+1;w<f&&u.get(n,w);)p[2]++,w++;if(w===f)return NaN;for(;w<f&&!u.get(n,w)&&p[3]<s;)p[3]++,w++;if(w===f||p[3]>=s)return NaN;for(;w<f&&u.get(n,w)&&p[4]<s;)p[4]++,w++;if(p[4]>=s)return NaN;const S=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(S-d)>=2*d?NaN:yt.foundPatternCross(p)?yt.centerFromEnd(p,w):NaN}crossCheckHorizontal(e,n,s,d){const u=this.image,f=u.getWidth(),p=this.getCrossCheckStateCount();let w=e;for(;w>=0&&u.get(w,n);)p[2]++,w--;if(w<0)return NaN;for(;w>=0&&!u.get(w,n)&&p[1]<=s;)p[1]++,w--;if(w<0||p[1]>s)return NaN;for(;w>=0&&u.get(w,n)&&p[0]<=s;)p[0]++,w--;if(p[0]>s)return NaN;for(w=e+1;w<f&&u.get(w,n);)p[2]++,w++;if(w===f)return NaN;for(;w<f&&!u.get(w,n)&&p[3]<s;)p[3]++,w++;if(w===f||p[3]>=s)return NaN;for(;w<f&&u.get(w,n)&&p[4]<s;)p[4]++,w++;if(p[4]>=s)return NaN;const S=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(S-d)>=d?NaN:yt.foundPatternCross(p)?yt.centerFromEnd(p,w):NaN}handlePossibleCenter(e,n,s,d){const u=e[0]+e[1]+e[2]+e[3]+e[4];let f=yt.centerFromEnd(e,s),p=this.crossCheckVertical(n,Math.floor(f),e[2],u);if(!isNaN(p)&&(f=this.crossCheckHorizontal(Math.floor(f),Math.floor(p),e[2],u),!isNaN(f)&&(!d||this.crossCheckDiagonal(Math.floor(p),Math.floor(f),e[2],u)))){const w=u/7;let S=!1;const k=this.possibleCenters;for(let P=0,q=k.length;P<q;P++){const te=k[P];if(te.aboutEquals(w,p,f)){k[P]=te.combineEstimate(p,f,w),S=!0;break}}if(!S){const P=new aa(f,p,w);k.push(P),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(P)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let n=null;for(const s of this.possibleCenters)if(s.getCount()>=yt.CENTER_QUORUM)if(n==null)n=s;else return this.hasSkipped=!0,Math.floor((Math.abs(n.getX()-s.getX())-Math.abs(n.getY()-s.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,n=0;const s=this.possibleCenters.length;for(const f of this.possibleCenters)f.getCount()>=yt.CENTER_QUORUM&&(e++,n+=f.getEstimatedModuleSize());if(e<3)return!1;const d=n/s;let u=0;for(const f of this.possibleCenters)u+=Math.abs(f.getEstimatedModuleSize()-d);return u<=.05*n}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new ne;const n=this.possibleCenters;let s;if(e>3){let d=0,u=0;for(const w of this.possibleCenters){const S=w.getEstimatedModuleSize();d+=S,u+=S*S}s=d/e;let f=Math.sqrt(u/e-s*s);n.sort((w,S)=>{const k=Math.abs(S.getEstimatedModuleSize()-s),P=Math.abs(w.getEstimatedModuleSize()-s);return k<P?-1:k>P?1:0});const p=Math.max(.2*s,f);for(let w=0;w<n.length&&n.length>3;w++){const S=n[w];Math.abs(S.getEstimatedModuleSize()-s)>p&&(n.splice(w,1),w--)}}if(n.length>3){let d=0;for(const u of n)d+=u.getEstimatedModuleSize();s=d/n.length,n.sort((u,f)=>{if(f.getCount()===u.getCount()){const p=Math.abs(f.getEstimatedModuleSize()-s),w=Math.abs(u.getEstimatedModuleSize()-s);return p<w?1:p>w?-1:0}else return f.getCount()-u.getCount()}),n.splice(3)}return[n[0],n[1],n[2]]}}yt.CENTER_QUORUM=2,yt.MIN_SKIP=3,yt.MAX_MODULES=57;class ss{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(xe.NEED_RESULT_POINT_CALLBACK);const s=new yt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(s)}processFinderPatternInfo(e){const n=e.getTopLeft(),s=e.getTopRight(),d=e.getBottomLeft(),u=this.calculateModuleSize(n,s,d);if(u<1)throw new ne("No pattern found in proccess finder.");const f=ss.computeDimension(n,s,d,u),p=vt.getProvisionalVersionForDimension(f),w=p.getDimensionForVersion()-7;let S=null;if(p.getAlignmentPatternCenters().length>0){const te=s.getX()-n.getX()+d.getX(),he=s.getY()-n.getY()+d.getY(),ge=1-3/w,we=Math.floor(n.getX()+ge*(te-n.getX())),Me=Math.floor(n.getY()+ge*(he-n.getY()));for(let Ke=4;Ke<=16;Ke<<=1)try{S=this.findAlignmentInRegion(u,we,Me,Ke);break}catch(tt){if(!(tt instanceof ne))throw tt}}const k=ss.createTransform(n,s,d,S,f),P=ss.sampleGrid(this.image,k,f);let q;return S===null?q=[d,n,s]:q=[d,n,s,S],new rt(P,q)}static createTransform(e,n,s,d,u){const f=u-3.5;let p,w,S,k;return d!==null?(p=d.getX(),w=d.getY(),S=f-3,k=S):(p=n.getX()-e.getX()+s.getX(),w=n.getY()-e.getY()+s.getY(),S=f,k=f),At.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,S,k,3.5,f,e.getX(),e.getY(),n.getX(),n.getY(),p,w,s.getX(),s.getY())}static sampleGrid(e,n,s){return Rt.getInstance().sampleGridWithTransform(e,s,s,n)}static computeDimension(e,n,s,d){const u=He.round(Re.distance(e,n)/d),f=He.round(Re.distance(e,s)/d);let p=Math.floor((u+f)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new ne("Dimensions could be not found.")}return p}calculateModuleSize(e,n,s){return(this.calculateModuleSizeOneWay(e,n)+this.calculateModuleSizeOneWay(e,s))/2}calculateModuleSizeOneWay(e,n){const s=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(n.getX()),Math.floor(n.getY())),d=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(s)?d/7:isNaN(d)?s/7:(s+d)/14}sizeOfBlackWhiteBlackRunBothWays(e,n,s,d){let u=this.sizeOfBlackWhiteBlackRun(e,n,s,d),f=1,p=e-(s-e);p<0?(f=e/(e-p),p=0):p>=this.image.getWidth()&&(f=(this.image.getWidth()-1-e)/(p-e),p=this.image.getWidth()-1);let w=Math.floor(n-(d-n)*f);return f=1,w<0?(f=n/(n-w),w=0):w>=this.image.getHeight()&&(f=(this.image.getHeight()-1-n)/(w-n),w=this.image.getHeight()-1),p=Math.floor(e+(p-e)*f),u+=this.sizeOfBlackWhiteBlackRun(e,n,p,w),u-1}sizeOfBlackWhiteBlackRun(e,n,s,d){const u=Math.abs(d-n)>Math.abs(s-e);if(u){let te=e;e=n,n=te,te=s,s=d,d=te}const f=Math.abs(s-e),p=Math.abs(d-n);let w=-f/2;const S=e<s?1:-1,k=n<d?1:-1;let P=0;const q=s+S;for(let te=e,he=n;te!==q;te+=S){const ge=u?he:te,we=u?te:he;if(P===1===this.image.get(ge,we)){if(P===2)return He.distance(te,he,e,n);P++}if(w+=p,w>0){if(he===d)break;he+=k,w-=f}}return P===2?He.distance(s+S,d,e,n):NaN}findAlignmentInRegion(e,n,s,d){const u=Math.floor(d*e),f=Math.max(0,n-u),p=Math.min(this.image.getWidth()-1,n+u);if(p-f<e*3)throw new ne("Alignment top exceeds estimated module size.");const w=Math.max(0,s-u),S=Math.min(this.image.getHeight()-1,s+u);if(S-w<e*3)throw new ne("Alignment bottom exceeds estimated module size.");return new en(this.image,f,w,p-f,S-w,e,this.resultPointCallback).find()}}class xi{constructor(){this.decoder=new As}getDecoder(){return this.decoder}decode(e,n){let s,d;if(n!=null&&n.get(xe.PURE_BARCODE)!==void 0){const w=xi.extractPureBits(e.getBlackMatrix());s=this.decoder.decodeBitMatrix(w,n),d=xi.NO_POINTS}else{const w=new ss(e.getBlackMatrix()).detect(n);s=this.decoder.decodeBitMatrix(w.getBits(),n),d=w.getPoints()}s.getOther()instanceof is&&s.getOther().applyMirroredCorrection(d);const u=new K(s.getText(),s.getRawBytes(),void 0,d,ae.QR_CODE,void 0),f=s.getByteSegments();f!==null&&u.putMetadata(Ae.BYTE_SEGMENTS,f);const p=s.getECLevel();return p!==null&&u.putMetadata(Ae.ERROR_CORRECTION_LEVEL,p),s.hasStructuredAppend()&&(u.putMetadata(Ae.STRUCTURED_APPEND_SEQUENCE,s.getStructuredAppendSequenceNumber()),u.putMetadata(Ae.STRUCTURED_APPEND_PARITY,s.getStructuredAppendParity())),u}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),s=e.getBottomRightOnBit();if(n===null||s===null)throw new ne;const d=this.moduleSize(n,e);let u=n[1],f=s[1],p=n[0],w=s[0];if(p>=w||u>=f)throw new ne;if(f-u!==w-p&&(w=p+(f-u),w>=e.getWidth()))throw new ne;const S=Math.round((w-p+1)/d),k=Math.round((f-u+1)/d);if(S<=0||k<=0)throw new ne;if(k!==S)throw new ne;const P=Math.floor(d/2);u+=P,p+=P;const q=p+Math.floor((S-1)*d)-w;if(q>0){if(q>P)throw new ne;p-=q}const te=u+Math.floor((k-1)*d)-f;if(te>0){if(te>P)throw new ne;u-=te}const he=new le(S,k);for(let ge=0;ge<k;ge++){const we=u+Math.floor(ge*d);for(let Me=0;Me<S;Me++)e.get(p+Math.floor(Me*d),we)&&he.set(Me,ge)}return he}static moduleSize(e,n){const s=n.getHeight(),d=n.getWidth();let u=e[0],f=e[1],p=!0,w=0;for(;u<d&&f<s;){if(p!==n.get(u,f)){if(++w===5)break;p=!p}u++,f++}if(u===d||f===s)throw new ne;return(u-e[0])/7}}xi.NO_POINTS=new Array;class Nt{PDF417Common(){}static getBitCountSum(e){return He.sum(e)}static toIntArray(e){if(e==null||!e.length)return Nt.EMPTY_INT_ARRAY;const n=new Int32Array(e.length);let s=0;for(const d of e)n[s++]=d;return n}static getCodeword(e){const n=j.binarySearch(Nt.SYMBOL_TABLE,e&262143);return n<0?-1:(Nt.CODEWORD_TABLE[n]-1)%Nt.NUMBER_OF_CODEWORDS}}Nt.NUMBER_OF_CODEWORDS=929,Nt.MAX_CODEWORDS_IN_BARCODE=Nt.NUMBER_OF_CODEWORDS-1,Nt.MIN_ROWS_IN_BARCODE=3,Nt.MAX_ROWS_IN_BARCODE=90,Nt.MODULES_IN_CODEWORD=17,Nt.MODULES_IN_STOP_PATTERN=18,Nt.BARS_IN_MODULE=8,Nt.EMPTY_INT_ARRAY=new Int32Array([]),Nt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Nt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ta{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class Ft{static detectMultiple(e,n,s){let d=e.getBlackMatrix(),u=Ft.detect(s,d);return u.length||(d=d.clone(),d.rotate180(),u=Ft.detect(s,d)),new Ta(d,u)}static detect(e,n){const s=new Array;let d=0,u=0,f=!1;for(;d<n.getHeight();){const p=Ft.findVertices(n,d,u);if(p[0]==null&&p[3]==null){if(!f)break;f=!1,u=0;for(const w of s)w[1]!=null&&(d=Math.trunc(Math.max(d,w[1].getY()))),w[3]!=null&&(d=Math.max(d,Math.trunc(w[3].getY())));d+=Ft.ROW_STEP;continue}if(f=!0,s.push(p),!e)break;p[2]!=null?(u=Math.trunc(p[2].getX()),d=Math.trunc(p[2].getY())):(u=Math.trunc(p[4].getX()),d=Math.trunc(p[4].getY()))}return s}static findVertices(e,n,s){const d=e.getHeight(),u=e.getWidth(),f=new Array(8);return Ft.copyToResult(f,Ft.findRowsWithPattern(e,d,u,n,s,Ft.START_PATTERN),Ft.INDEXES_START_PATTERN),f[4]!=null&&(s=Math.trunc(f[4].getX()),n=Math.trunc(f[4].getY())),Ft.copyToResult(f,Ft.findRowsWithPattern(e,d,u,n,s,Ft.STOP_PATTERN),Ft.INDEXES_STOP_PATTERN),f}static copyToResult(e,n,s){for(let d=0;d<s.length;d++)e[s[d]]=n[d]}static findRowsWithPattern(e,n,s,d,u,f){const p=new Array(4);let w=!1;const S=new Int32Array(f.length);for(;d<n;d+=Ft.ROW_STEP){let P=Ft.findGuardPattern(e,u,d,s,!1,f,S);if(P!=null){for(;d>0;){const q=Ft.findGuardPattern(e,u,--d,s,!1,f,S);if(q!=null)P=q;else{d++;break}}p[0]=new Re(P[0],d),p[1]=new Re(P[1],d),w=!0;break}}let k=d+1;if(w){let P=0,q=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;k<n;k++){const te=Ft.findGuardPattern(e,q[0],k,s,!1,f,S);if(te!=null&&Math.abs(q[0]-te[0])<Ft.MAX_PATTERN_DRIFT&&Math.abs(q[1]-te[1])<Ft.MAX_PATTERN_DRIFT)q=te,P=0;else{if(P>Ft.SKIPPED_ROW_COUNT_MAX)break;P++}}k-=P+1,p[2]=new Re(q[0],k),p[3]=new Re(q[1],k)}return k-d<Ft.BARCODE_MIN_HEIGHT&&j.fill(p,null),p}static findGuardPattern(e,n,s,d,u,f,p){j.fillWithin(p,0,p.length,0);let w=n,S=0;for(;e.get(w,s)&&w>0&&S++<Ft.MAX_PIXEL_DRIFT;)w--;let k=w,P=0,q=f.length;for(let te=u;k<d;k++)if(e.get(k,s)!==te)p[P]++;else{if(P===q-1){if(Ft.patternMatchVariance(p,f,Ft.MAX_INDIVIDUAL_VARIANCE)<Ft.MAX_AVG_VARIANCE)return new Int32Array([w,k]);w+=p[0]+p[1],_.arraycopy(p,2,p,0,P-1),p[P-1]=0,p[P]=0,P--}else P++;p[P]=1,te=!te}return P===q-1&&Ft.patternMatchVariance(p,f,Ft.MAX_INDIVIDUAL_VARIANCE)<Ft.MAX_AVG_VARIANCE?new Int32Array([w,k-1]):null}static patternMatchVariance(e,n,s){let d=e.length,u=0,f=0;for(let S=0;S<d;S++)u+=e[S],f+=n[S];if(u<f)return 1/0;let p=u/f;s*=p;let w=0;for(let S=0;S<d;S++){let k=e[S],P=n[S]*p,q=k>P?k-P:P-k;if(q>s)return 1/0;w+=q}return w/u}}Ft.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ft.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ft.MAX_AVG_VARIANCE=.42,Ft.MAX_INDIVIDUAL_VARIANCE=.8,Ft.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ft.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ft.MAX_PIXEL_DRIFT=3,Ft.MAX_PATTERN_DRIFT=5,Ft.SKIPPED_ROW_COUNT_MAX=25,Ft.ROW_STEP=5,Ft.BARCODE_MIN_HEIGHT=10;class Rr{constructor(e,n){if(n.length===0)throw new C;this.field=e;let s=n.length;if(s>1&&n[0]===0){let d=1;for(;d<s&&n[d]===0;)d++;d===s?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(s-d),_.arraycopy(n,d,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let d=0;for(let u of this.coefficients)d=this.field.add(d,u);return d}let n=this.coefficients[0],s=this.coefficients.length;for(let d=1;d<s;d++)n=this.field.add(this.field.multiply(e,n),this.coefficients[d]);return n}add(e){if(!this.field.equals(e.field))throw new C("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,s=e.coefficients;if(n.length>s.length){let f=n;n=s,s=f}let d=new Int32Array(s.length),u=s.length-n.length;_.arraycopy(s,0,d,0,u);for(let f=u;f<s.length;f++)d[f]=this.field.add(n[f-u],s[f]);return new Rr(this.field,d)}subtract(e){if(!this.field.equals(e.field))throw new C("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof Rr?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new C("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new Rr(this.field,new Int32Array([0]));let n=this.coefficients,s=n.length,d=e.coefficients,u=d.length,f=new Int32Array(s+u-1);for(let p=0;p<s;p++){let w=n[p];for(let S=0;S<u;S++)f[p+S]=this.field.add(f[p+S],this.field.multiply(w,d[S]))}return new Rr(this.field,f)}negative(){let e=this.coefficients.length,n=new Int32Array(e);for(let s=0;s<e;s++)n[s]=this.field.subtract(0,this.coefficients[s]);return new Rr(this.field,n)}multiplyScalar(e){if(e===0)return new Rr(this.field,new Int32Array([0]));if(e===1)return this;let n=this.coefficients.length,s=new Int32Array(n);for(let d=0;d<n;d++)s[d]=this.field.multiply(this.coefficients[d],e);return new Rr(this.field,s)}multiplyByMonomial(e,n){if(e<0)throw new C;if(n===0)return new Rr(this.field,new Int32Array([0]));let s=this.coefficients.length,d=new Int32Array(s+e);for(let u=0;u<s;u++)d[u]=this.field.multiply(this.coefficients[u],n);return new Rr(this.field,d)}toString(){let e=new oe;for(let n=this.getDegree();n>=0;n--){let s=this.getCoefficient(n);s!==0&&(s<0?(e.append(" - "),s=-s):e.length()>0&&e.append(" + "),(n===0||s!==1)&&e.append(s),n!==0&&(n===1?e.append("x"):(e.append("x^"),e.append(n))))}return e.toString()}}class oa{add(e,n){return(e+n)%this.modulus}subtract(e,n){return(this.modulus+e-n)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new C;return this.logTable[e]}inverse(e){if(e===0)throw new et;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class la extends oa{constructor(e,n){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let s=1;for(let d=0;d<e;d++)this.expTable[d]=s,s=s*n%e;for(let d=0;d<e-1;d++)this.logTable[this.expTable[d]]=d;this.zero=new Rr(this,new Int32Array([0])),this.one=new Rr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new C;if(n===0)return this.zero;let s=new Int32Array(e+1);return s[0]=n,new Rr(this,s)}}la.PDF417_GF=new la(Nt.NUMBER_OF_CODEWORDS,3);class ja{constructor(){this.field=la.PDF417_GF}decode(e,n,s){let d=new Rr(this.field,e),u=new Int32Array(n),f=!1;for(let he=n;he>0;he--){let ge=d.evaluateAt(this.field.exp(he));u[n-he]=ge,ge!==0&&(f=!0)}if(!f)return 0;let p=this.field.getOne();if(s!=null)for(const he of s){let ge=this.field.exp(e.length-1-he),we=new Rr(this.field,new Int32Array([this.field.subtract(0,ge),1]));p=p.multiply(we)}let w=new Rr(this.field,u),S=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),w,n),k=S[0],P=S[1],q=this.findErrorLocations(k),te=this.findErrorMagnitudes(P,k,q);for(let he=0;he<q.length;he++){let ge=e.length-1-this.field.log(q[he]);if(ge<0)throw A.getChecksumInstance();e[ge]=this.field.subtract(e[ge],te[he])}return q.length}runEuclideanAlgorithm(e,n,s){if(e.getDegree()<n.getDegree()){let q=e;e=n,n=q}let d=e,u=n,f=this.field.getZero(),p=this.field.getOne();for(;u.getDegree()>=Math.round(s/2);){let q=d,te=f;if(d=u,f=p,d.isZero())throw A.getChecksumInstance();u=q;let he=this.field.getZero(),ge=d.getCoefficient(d.getDegree()),we=this.field.inverse(ge);for(;u.getDegree()>=d.getDegree()&&!u.isZero();){let Me=u.getDegree()-d.getDegree(),Ke=this.field.multiply(u.getCoefficient(u.getDegree()),we);he=he.add(this.field.buildMonomial(Me,Ke)),u=u.subtract(d.multiplyByMonomial(Me,Ke))}p=he.multiply(f).subtract(te).negative()}let w=p.getCoefficient(0);if(w===0)throw A.getChecksumInstance();let S=this.field.inverse(w),k=p.multiply(S),P=u.multiply(S);return[k,P]}findErrorLocations(e){let n=e.getDegree(),s=new Int32Array(n),d=0;for(let u=1;u<this.field.getSize()&&d<n;u++)e.evaluateAt(u)===0&&(s[d]=this.field.inverse(u),d++);if(d!==n)throw A.getChecksumInstance();return s}findErrorMagnitudes(e,n,s){let d=n.getDegree(),u=new Int32Array(d);for(let S=1;S<=d;S++)u[d-S]=this.field.multiply(S,n.getCoefficient(S));let f=new Rr(this.field,u),p=s.length,w=new Int32Array(p);for(let S=0;S<p;S++){let k=this.field.inverse(s[S]),P=this.field.subtract(0,e.evaluateAt(k)),q=this.field.inverse(f.evaluateAt(k));w[S]=this.field.multiply(P,q)}return w}}class _i{constructor(e,n,s,d,u){e instanceof _i?this.constructor_2(e):this.constructor_1(e,n,s,d,u)}constructor_1(e,n,s,d,u){const f=n==null||s==null,p=d==null||u==null;if(f&&p)throw new ne;f?(n=new Re(0,d.getY()),s=new Re(0,u.getY())):p&&(d=new Re(e.getWidth()-1,n.getY()),u=new Re(e.getWidth()-1,s.getY())),this.image=e,this.topLeft=n,this.bottomLeft=s,this.topRight=d,this.bottomRight=u,this.minX=Math.trunc(Math.min(n.getX(),s.getX())),this.maxX=Math.trunc(Math.max(d.getX(),u.getX())),this.minY=Math.trunc(Math.min(n.getY(),d.getY())),this.maxY=Math.trunc(Math.max(s.getY(),u.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,n){return e==null?n:n==null?e:new _i(e.image,e.topLeft,e.bottomLeft,n.topRight,n.bottomRight)}addMissingRows(e,n,s){let d=this.topLeft,u=this.bottomLeft,f=this.topRight,p=this.bottomRight;if(e>0){let w=s?this.topLeft:this.topRight,S=Math.trunc(w.getY()-e);S<0&&(S=0);let k=new Re(w.getX(),S);s?d=k:f=k}if(n>0){let w=s?this.bottomLeft:this.bottomRight,S=Math.trunc(w.getY()+n);S>=this.image.getHeight()&&(S=this.image.getHeight()-1);let k=new Re(w.getX(),S);s?u=k:p=k}return new _i(this.image,d,u,f,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class ca{constructor(e,n,s,d){this.columnCount=e,this.errorCorrectionLevel=d,this.rowCountUpperPart=n,this.rowCountLowerPart=s,this.rowCount=n+s}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class si{constructor(){this.buffer=""}static form(e,n){let s=-1;function d(f,p,w,S,k,P){if(f==="%%")return"%";if(n[++s]===void 0)return;f=S?parseInt(S.substr(1)):void 0;let q=k?parseInt(k.substr(1)):void 0,te;switch(P){case"s":te=n[s];break;case"c":te=n[s][0];break;case"f":te=parseFloat(n[s]).toFixed(f);break;case"p":te=parseFloat(n[s]).toPrecision(f);break;case"e":te=parseFloat(n[s]).toExponential(f);break;case"x":te=parseInt(n[s]).toString(q||16);break;case"d":te=parseFloat(parseInt(n[s],q||10).toPrecision(f)).toFixed(0);break}te=typeof te=="object"?JSON.stringify(te):(+te).toString(q);let he=parseInt(w),ge=w&&w[0]+""=="0"?"0":" ";for(;te.length<he;)te=p!==void 0?te+ge:ge+te;return te}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(u,d)}format(e,...n){this.buffer+=si.form(e,n)}toString(){return this.buffer}}class $n{constructor(e){this.boundingBox=new _i(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let n=this.getCodeword(e);if(n!=null)return n;for(let s=1;s<$n.MAX_NEARBY_DISTANCE;s++){let d=this.imageRowToCodewordIndex(e)-s;if(d>=0&&(n=this.codewords[d],n!=null)||(d=this.imageRowToCodewordIndex(e)+s,d<this.codewords.length&&(n=this.codewords[d],n!=null)))return n}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,n){this.codewords[this.imageRowToCodewordIndex(e)]=n}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new si;let n=0;for(const s of this.codewords){if(s==null){e.format("%3d:    |   %n",n++);continue}e.format("%3d: %3d|%3d%n",n++,s.getRowNumber(),s.getValue())}return e.toString()}}$n.MAX_NEARBY_DISTANCE=5;class as{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let n=this.values.get(e);n==null&&(n=0),n++,this.values.set(e,n)}getValue(){let e=-1,n=new Array;for(const[s,d]of this.values.entries()){const u={getKey:()=>s,getValue:()=>d};u.getValue()>e?(e=u.getValue(),n=[],n.push(u.getKey())):u.getValue()===e&&n.push(u.getKey())}return Nt.toIntArray(n)}getConfidence(e){return this.values.get(e)}}class qi extends $n{constructor(e,n){super(e),this._isLeft=n}setRowNumbers(){for(let e of this.getCodewords())e!=null&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,e);let s=this.getBoundingBox(),d=this._isLeft?s.getTopLeft():s.getTopRight(),u=this._isLeft?s.getBottomLeft():s.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(d.getY())),p=this.imageRowToCodewordIndex(Math.trunc(u.getY())),w=-1,S=1,k=0;for(let P=f;P<p;P++){if(n[P]==null)continue;let q=n[P],te=q.getRowNumber()-w;if(te===0)k++;else if(te===1)S=Math.max(S,k),k=1,w=q.getRowNumber();else if(te<0||q.getRowNumber()>=e.getRowCount()||te>P)n[P]=null;else{let he;S>2?he=(S-2)*te:he=te;let ge=he>=P;for(let we=1;we<=he&&!ge;we++)ge=n[P-we]!=null;ge?n[P]=null:(w=q.getRowNumber(),k=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let n=new Int32Array(e.getRowCount());for(let s of this.getCodewords())if(s!=null){let d=s.getRowNumber();if(d>=n.length)continue;n[d]++}return n}adjustIncompleteIndicatorColumnRowNumbers(e){let n=this.getBoundingBox(),s=this._isLeft?n.getTopLeft():n.getTopRight(),d=this._isLeft?n.getBottomLeft():n.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(s.getY())),f=this.imageRowToCodewordIndex(Math.trunc(d.getY())),p=this.getCodewords(),w=-1;for(let S=u;S<f;S++){if(p[S]==null)continue;let k=p[S];k.setRowNumberAsRowIndicatorColumn();let P=k.getRowNumber()-w;P===0||(P===1?w=k.getRowNumber():k.getRowNumber()>=e.getRowCount()?p[S]=null:w=k.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),n=new as,s=new as,d=new as,u=new as;for(let p of e){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let w=p.getValue()%30,S=p.getRowNumber();switch(this._isLeft||(S+=2),S%3){case 0:s.setValue(w*3+1);break;case 1:u.setValue(w/3),d.setValue(w%3);break;case 2:n.setValue(w+1);break}}if(n.getValue().length===0||s.getValue().length===0||d.getValue().length===0||u.getValue().length===0||n.getValue()[0]<1||s.getValue()[0]+d.getValue()[0]<Nt.MIN_ROWS_IN_BARCODE||s.getValue()[0]+d.getValue()[0]>Nt.MAX_ROWS_IN_BARCODE)return null;let f=new ca(n.getValue()[0],s.getValue()[0],d.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(e,f),f}removeIncorrectCodewords(e,n){for(let s=0;s<e.length;s++){let d=e[s];if(e[s]==null)continue;let u=d.getValue()%30,f=d.getRowNumber();if(f>n.getRowCount()){e[s]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:u*3+1!==n.getRowCountUpperPart()&&(e[s]=null);break;case 1:(Math.trunc(u/3)!==n.getErrorCorrectionLevel()||u%3!==n.getRowCountLowerPart())&&(e[s]=null);break;case 2:u+1!==n.getColumnCount()&&(e[s]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Li{constructor(e,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=Nt.MAX_CODEWORDS_IN_BARCODE,n;do n=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<n);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let n=1;n<this.barcodeColumnCount+1;n++){let s=this.detectionResultColumns[n].getCodewords();for(let d=0;d<s.length;d++)s[d]!=null&&(s[d].hasValidRowNumber()||this.adjustRowNumbers(n,d,s))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let s=0;s<e.length;s++)if(e[s]!=null&&n[s]!=null&&e[s].getRowNumber()===n[s].getRowNumber())for(let d=1;d<=this.barcodeColumnCount;d++){let u=this.detectionResultColumns[d].getCodewords()[s];u!=null&&(u.setRowNumber(e[s].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[d].getCodewords()[s]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let s=0;s<n.length;s++){if(n[s]==null)continue;let d=n[s].getRowNumber(),u=0;for(let f=this.barcodeColumnCount+1;f>0&&u<this.ADJUST_ROW_NUMBER_SKIP;f--){let p=this.detectionResultColumns[f].getCodewords()[s];p!=null&&(u=Li.adjustRowNumberIfValid(d,u,p),p.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,n=this.detectionResultColumns[0].getCodewords();for(let s=0;s<n.length;s++){if(n[s]==null)continue;let d=n[s].getRowNumber(),u=0;for(let f=1;f<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;f++){let p=this.detectionResultColumns[f].getCodewords()[s];p!=null&&(u=Li.adjustRowNumberIfValid(d,u,p),p.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,n,s){return s==null||s.hasValidRowNumber()||(s.isValidRowNumber(e)?(s.setRowNumber(e),n=0):++n),n}adjustRowNumbers(e,n,s){if(!this.detectionResultColumns[e-1])return;let d=s[n],u=this.detectionResultColumns[e-1].getCodewords(),f=u;this.detectionResultColumns[e+1]!=null&&(f=this.detectionResultColumns[e+1].getCodewords());let p=new Array(14);p[2]=u[n],p[3]=f[n],n>0&&(p[0]=s[n-1],p[4]=u[n-1],p[5]=f[n-1]),n>1&&(p[8]=s[n-2],p[10]=u[n-2],p[11]=f[n-2]),n<s.length-1&&(p[1]=s[n+1],p[6]=u[n+1],p[7]=f[n+1]),n<s.length-2&&(p[9]=s[n+2],p[12]=u[n+2],p[13]=f[n+2]);for(let w of p)if(Li.adjustRowNumber(d,w))return}static adjustRowNumber(e,n){return n==null?!1:n.hasValidRowNumber()&&n.getBucket()===e.getBucket()?(e.setRowNumber(n.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,n){this.detectionResultColumns[e]=n}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let n=new si;for(let s=0;s<e.getCodewords().length;s++){n.format("CW %3d:",s);for(let d=0;d<this.barcodeColumnCount+2;d++){if(this.detectionResultColumns[d]==null){n.format("    |   ");continue}let u=this.detectionResultColumns[d].getCodewords()[s];if(u==null){n.format("    |   ");continue}n.format(" %3d|%3d",u.getRowNumber(),u.getValue())}n.format("%n")}return n.toString()}}class yi{constructor(e,n,s,d){this.rowNumber=yi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(n),this.bucket=Math.trunc(s),this.value=Math.trunc(d)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==yi.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}yi.BARCODE_ROW_UNKNOWN=-1;class un{static initialize(){for(let e=0;e<Nt.SYMBOL_TABLE.length;e++){let n=Nt.SYMBOL_TABLE[e],s=n&1;for(let d=0;d<Nt.BARS_IN_MODULE;d++){let u=0;for(;(n&1)===s;)u+=1,n>>=1;s=n&1,un.RATIOS_TABLE[e]||(un.RATIOS_TABLE[e]=new Array(Nt.BARS_IN_MODULE)),un.RATIOS_TABLE[e][Nt.BARS_IN_MODULE-d-1]=Math.fround(u/Nt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let n=un.getDecodedCodewordValue(un.sampleBitCounts(e));return n!==-1?n:un.getClosestDecodedValue(e)}static sampleBitCounts(e){let n=He.sum(e),s=new Int32Array(Nt.BARS_IN_MODULE),d=0,u=0;for(let f=0;f<Nt.MODULES_IN_CODEWORD;f++){let p=n/(2*Nt.MODULES_IN_CODEWORD)+f*n/Nt.MODULES_IN_CODEWORD;u+e[d]<=p&&(u+=e[d],d++),s[d]++}return s}static getDecodedCodewordValue(e){let n=un.getBitValue(e);return Nt.getCodeword(n)===-1?-1:n}static getBitValue(e){let n=0;for(let s=0;s<e.length;s++)for(let d=0;d<e[s];d++)n=n<<1|(s%2===0?1:0);return Math.trunc(n)}static getClosestDecodedValue(e){let n=He.sum(e),s=new Array(Nt.BARS_IN_MODULE);if(n>1)for(let f=0;f<s.length;f++)s[f]=Math.fround(e[f]/n);let d=st.MAX_VALUE,u=-1;this.bSymbolTableReady||un.initialize();for(let f=0;f<un.RATIOS_TABLE.length;f++){let p=0,w=un.RATIOS_TABLE[f];for(let S=0;S<Nt.BARS_IN_MODULE;S++){let k=Math.fround(w[S]-s[S]);if(p+=Math.fround(k*k),p>=d)break}p<d&&(d=p,u=Nt.SYMBOL_TABLE[f])}return u}}un.bSymbolTableReady=!1,un.RATIOS_TABLE=new Array(Nt.SYMBOL_TABLE.length).map(R=>new Array(Nt.BARS_IN_MODULE));class da{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class ua{static parseLong(e,n=void 0){return parseInt(e,n)}}class ha extends y{}ha.kind="NullPointerException";class bi{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,n,s){if(e==null)throw new ha;if(n<0||n>e.length||s<0||n+s>e.length||n+s<0)throw new M;if(s===0)return;for(let d=0;d<s;d++)this.write(e[n+d])}flush(){}close(){}}class ki extends y{}class no extends bi{constructor(e=32){if(super(),this.count=0,e<0)throw new C("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let s=this.buf.length<<1;if(s-e<0&&(s=e),s<0){if(e<0)throw new ki;s=B.MAX_VALUE}this.buf=j.copyOfUint8Array(this.buf,s)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,n,s){if(n<0||n>e.length||s<0||n+s-e.length>0)throw new M;this.ensureCapacity(this.count+s),_.arraycopy(e,n,this.buf,this.count,s),this.count+=s}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return j.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var $t;(function(R){R[R.ALPHA=0]="ALPHA",R[R.LOWER=1]="LOWER",R[R.MIXED=2]="MIXED",R[R.PUNCT=3]="PUNCT",R[R.ALPHA_SHIFT=4]="ALPHA_SHIFT",R[R.PUNCT_SHIFT=5]="PUNCT_SHIFT"})($t||($t={}));function Kn(){if(typeof window<"u")return window.BigInt||null;if(typeof fo<"u")return fo.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Hi;function On(R){if(typeof Hi>"u"&&(Hi=Kn()),Hi===null)throw new Error("BigInt is not supported!");return Hi(R)}function io(){let R=[];R[0]=On(1);let e=On(900);R[1]=e;for(let n=2;n<16;n++)R[n]=R[n-1]*e;return R}class Oe{static decode(e,n){let s=new oe(""),d=ce.ISO8859_1;s.enableDecoding(d);let u=1,f=e[u++],p=new da;for(;u<e[0];){switch(f){case Oe.TEXT_COMPACTION_MODE_LATCH:u=Oe.textCompaction(e,u,s);break;case Oe.BYTE_COMPACTION_MODE_LATCH:case Oe.BYTE_COMPACTION_MODE_LATCH_6:u=Oe.byteCompaction(f,e,d,u,s);break;case Oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(e[u++]);break;case Oe.NUMERIC_COMPACTION_MODE_LATCH:u=Oe.numericCompaction(e,u,s);break;case Oe.ECI_CHARSET:ce.getCharacterSetECIByValue(e[u++]);break;case Oe.ECI_GENERAL_PURPOSE:u+=2;break;case Oe.ECI_USER_DEFINED:u++;break;case Oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=Oe.decodeMacroBlock(e,u,p);break;case Oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Oe.MACRO_PDF417_TERMINATOR:throw new $;default:u--,u=Oe.textCompaction(e,u,s);break}if(u<e.length)f=e[u++];else throw $.getFormatInstance()}if(s.length()===0)throw $.getFormatInstance();let w=new ke(null,s.toString(),null,n);return w.setOther(p),w}static decodeMacroBlock(e,n,s){if(n+Oe.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw $.getFormatInstance();let d=new Int32Array(Oe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<Oe.NUMBER_OF_SEQUENCE_CODEWORDS;p++,n++)d[p]=e[n];s.setSegmentIndex(B.parseInt(Oe.decodeBase900toBase10(d,Oe.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new oe;n=Oe.textCompaction(e,n,u),s.setFileId(u.toString());let f=-1;for(e[n]===Oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=n+1);n<e[0];)switch(e[n]){case Oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(n++,e[n]){case Oe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new oe;n=Oe.textCompaction(e,n+1,p),s.setFileName(p.toString());break;case Oe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let w=new oe;n=Oe.textCompaction(e,n+1,w),s.setSender(w.toString());break;case Oe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let S=new oe;n=Oe.textCompaction(e,n+1,S),s.setAddressee(S.toString());break;case Oe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let k=new oe;n=Oe.numericCompaction(e,n+1,k),s.setSegmentCount(B.parseInt(k.toString()));break;case Oe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let P=new oe;n=Oe.numericCompaction(e,n+1,P),s.setTimestamp(ua.parseLong(P.toString()));break;case Oe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let q=new oe;n=Oe.numericCompaction(e,n+1,q),s.setChecksum(B.parseInt(q.toString()));break;case Oe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let te=new oe;n=Oe.numericCompaction(e,n+1,te),s.setFileSize(ua.parseLong(te.toString()));break;default:throw $.getFormatInstance()}break;case Oe.MACRO_PDF417_TERMINATOR:n++,s.setLastSegment(!0);break;default:throw $.getFormatInstance()}if(f!==-1){let p=n-f;s.isLastSegment()&&p--,s.setOptionalData(j.copyOfRange(e,f,f+p))}return n}static textCompaction(e,n,s){let d=new Int32Array((e[0]-n)*2),u=new Int32Array((e[0]-n)*2),f=0,p=!1;for(;n<e[0]&&!p;){let w=e[n++];if(w<Oe.TEXT_COMPACTION_MODE_LATCH)d[f]=w/30,d[f+1]=w%30,f+=2;else switch(w){case Oe.TEXT_COMPACTION_MODE_LATCH:d[f++]=Oe.TEXT_COMPACTION_MODE_LATCH;break;case Oe.BYTE_COMPACTION_MODE_LATCH:case Oe.BYTE_COMPACTION_MODE_LATCH_6:case Oe.NUMERIC_COMPACTION_MODE_LATCH:case Oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Oe.MACRO_PDF417_TERMINATOR:n--,p=!0;break;case Oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d[f]=Oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,w=e[n++],u[f]=w,f++;break}}return Oe.decodeTextCompaction(d,u,f,s),n}static decodeTextCompaction(e,n,s,d){let u=$t.ALPHA,f=$t.ALPHA,p=0;for(;p<s;){let w=e[p],S="";switch(u){case $t.ALPHA:if(w<26)S=String.fromCharCode(65+w);else switch(w){case 26:S=" ";break;case Oe.LL:u=$t.LOWER;break;case Oe.ML:u=$t.MIXED;break;case Oe.PS:f=u,u=$t.PUNCT_SHIFT;break;case Oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(n[p]);break;case Oe.TEXT_COMPACTION_MODE_LATCH:u=$t.ALPHA;break}break;case $t.LOWER:if(w<26)S=String.fromCharCode(97+w);else switch(w){case 26:S=" ";break;case Oe.AS:f=u,u=$t.ALPHA_SHIFT;break;case Oe.ML:u=$t.MIXED;break;case Oe.PS:f=u,u=$t.PUNCT_SHIFT;break;case Oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(n[p]);break;case Oe.TEXT_COMPACTION_MODE_LATCH:u=$t.ALPHA;break}break;case $t.MIXED:if(w<Oe.PL)S=Oe.MIXED_CHARS[w];else switch(w){case Oe.PL:u=$t.PUNCT;break;case 26:S=" ";break;case Oe.LL:u=$t.LOWER;break;case Oe.AL:u=$t.ALPHA;break;case Oe.PS:f=u,u=$t.PUNCT_SHIFT;break;case Oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(n[p]);break;case Oe.TEXT_COMPACTION_MODE_LATCH:u=$t.ALPHA;break}break;case $t.PUNCT:if(w<Oe.PAL)S=Oe.PUNCT_CHARS[w];else switch(w){case Oe.PAL:u=$t.ALPHA;break;case Oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(n[p]);break;case Oe.TEXT_COMPACTION_MODE_LATCH:u=$t.ALPHA;break}break;case $t.ALPHA_SHIFT:if(u=f,w<26)S=String.fromCharCode(65+w);else switch(w){case 26:S=" ";break;case Oe.TEXT_COMPACTION_MODE_LATCH:u=$t.ALPHA;break}break;case $t.PUNCT_SHIFT:if(u=f,w<Oe.PAL)S=Oe.PUNCT_CHARS[w];else switch(w){case Oe.PAL:u=$t.ALPHA;break;case Oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(n[p]);break;case Oe.TEXT_COMPACTION_MODE_LATCH:u=$t.ALPHA;break}break}S!==""&&d.append(S),p++}}static byteCompaction(e,n,s,d,u){let f=new no,p=0,w=0,S=!1;switch(e){case Oe.BYTE_COMPACTION_MODE_LATCH:let k=new Int32Array(6),P=n[d++];for(;d<n[0]&&!S;)switch(k[p++]=P,w=900*w+P,P=n[d++],P){case Oe.TEXT_COMPACTION_MODE_LATCH:case Oe.BYTE_COMPACTION_MODE_LATCH:case Oe.NUMERIC_COMPACTION_MODE_LATCH:case Oe.BYTE_COMPACTION_MODE_LATCH_6:case Oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Oe.MACRO_PDF417_TERMINATOR:d--,S=!0;break;default:if(p%5===0&&p>0){for(let q=0;q<6;++q)f.write(Number(On(w)>>On(8*(5-q))));w=0,p=0}break}d===n[0]&&P<Oe.TEXT_COMPACTION_MODE_LATCH&&(k[p++]=P);for(let q=0;q<p;q++)f.write(k[q]);break;case Oe.BYTE_COMPACTION_MODE_LATCH_6:for(;d<n[0]&&!S;){let q=n[d++];if(q<Oe.TEXT_COMPACTION_MODE_LATCH)p++,w=900*w+q;else switch(q){case Oe.TEXT_COMPACTION_MODE_LATCH:case Oe.BYTE_COMPACTION_MODE_LATCH:case Oe.NUMERIC_COMPACTION_MODE_LATCH:case Oe.BYTE_COMPACTION_MODE_LATCH_6:case Oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Oe.MACRO_PDF417_TERMINATOR:d--,S=!0;break}if(p%5===0&&p>0){for(let te=0;te<6;++te)f.write(Number(On(w)>>On(8*(5-te))));w=0,p=0}}break}return u.append(Y.decode(f.toByteArray(),s)),d}static numericCompaction(e,n,s){let d=0,u=!1,f=new Int32Array(Oe.MAX_NUMERIC_CODEWORDS);for(;n<e[0]&&!u;){let p=e[n++];if(n===e[0]&&(u=!0),p<Oe.TEXT_COMPACTION_MODE_LATCH)f[d]=p,d++;else switch(p){case Oe.TEXT_COMPACTION_MODE_LATCH:case Oe.BYTE_COMPACTION_MODE_LATCH:case Oe.BYTE_COMPACTION_MODE_LATCH_6:case Oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Oe.MACRO_PDF417_TERMINATOR:n--,u=!0;break}(d%Oe.MAX_NUMERIC_CODEWORDS===0||p===Oe.NUMERIC_COMPACTION_MODE_LATCH||u)&&d>0&&(s.append(Oe.decodeBase900toBase10(f,d)),d=0)}return n}static decodeBase900toBase10(e,n){let s=On(0);for(let u=0;u<n;u++)s+=Oe.EXP900[n-u-1]*On(e[u]);let d=s.toString();if(d.charAt(0)!=="1")throw new $;return d.substring(1)}}Oe.TEXT_COMPACTION_MODE_LATCH=900,Oe.BYTE_COMPACTION_MODE_LATCH=901,Oe.NUMERIC_COMPACTION_MODE_LATCH=902,Oe.BYTE_COMPACTION_MODE_LATCH_6=924,Oe.ECI_USER_DEFINED=925,Oe.ECI_GENERAL_PURPOSE=926,Oe.ECI_CHARSET=927,Oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Oe.MACRO_PDF417_TERMINATOR=922,Oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Oe.MAX_NUMERIC_CODEWORDS=15,Oe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Oe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Oe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Oe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Oe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Oe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Oe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Oe.PL=25,Oe.LL=27,Oe.AS=27,Oe.ML=28,Oe.AL=28,Oe.PS=29,Oe.PAL=29,Oe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Oe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Oe.EXP900=Kn()?io():[],Oe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ht{constructor(){}static decode(e,n,s,d,u,f,p){let w=new _i(e,n,s,d,u),S=null,k=null,P;for(let he=!0;;he=!1){if(n!=null&&(S=Ht.getRowIndicatorColumn(e,w,n,!0,f,p)),d!=null&&(k=Ht.getRowIndicatorColumn(e,w,d,!1,f,p)),P=Ht.merge(S,k),P==null)throw ne.getNotFoundInstance();let ge=P.getBoundingBox();if(he&&ge!=null&&(ge.getMinY()<w.getMinY()||ge.getMaxY()>w.getMaxY()))w=ge;else break}P.setBoundingBox(w);let q=P.getBarcodeColumnCount()+1;P.setDetectionResultColumn(0,S),P.setDetectionResultColumn(q,k);let te=S!=null;for(let he=1;he<=q;he++){let ge=te?he:q-he;if(P.getDetectionResultColumn(ge)!==void 0)continue;let we;ge===0||ge===q?we=new qi(w,ge===0):we=new $n(w),P.setDetectionResultColumn(ge,we);let Me=-1,Ke=Me;for(let tt=w.getMinY();tt<=w.getMaxY();tt++){if(Me=Ht.getStartColumn(P,ge,tt,te),Me<0||Me>w.getMaxX()){if(Ke===-1)continue;Me=Ke}let Qe=Ht.detectCodeword(e,w.getMinX(),w.getMaxX(),te,Me,tt,f,p);Qe!=null&&(we.setCodeword(tt,Qe),Ke=Me,f=Math.min(f,Qe.getWidth()),p=Math.max(p,Qe.getWidth()))}}return Ht.createDecoderResult(P)}static merge(e,n){if(e==null&&n==null)return null;let s=Ht.getBarcodeMetadata(e,n);if(s==null)return null;let d=_i.merge(Ht.adjustBoundingBox(e),Ht.adjustBoundingBox(n));return new Li(s,d)}static adjustBoundingBox(e){if(e==null)return null;let n=e.getRowHeights();if(n==null)return null;let s=Ht.getMax(n),d=0;for(let p of n)if(d+=s-p,p>0)break;let u=e.getCodewords();for(let p=0;d>0&&u[p]==null;p++)d--;let f=0;for(let p=n.length-1;p>=0&&(f+=s-n[p],!(n[p]>0));p--);for(let p=u.length-1;f>0&&u[p]==null;p--)f--;return e.getBoundingBox().addMissingRows(d,f,e.isLeft())}static getMax(e){let n=-1;for(let s of e)n=Math.max(n,s);return n}static getBarcodeMetadata(e,n){let s;if(e==null||(s=e.getBarcodeMetadata())==null)return n==null?null:n.getBarcodeMetadata();let d;return n==null||(d=n.getBarcodeMetadata())==null?s:s.getColumnCount()!==d.getColumnCount()&&s.getErrorCorrectionLevel()!==d.getErrorCorrectionLevel()&&s.getRowCount()!==d.getRowCount()?null:s}static getRowIndicatorColumn(e,n,s,d,u,f){let p=new qi(n,d);for(let w=0;w<2;w++){let S=w===0?1:-1,k=Math.trunc(Math.trunc(s.getX()));for(let P=Math.trunc(Math.trunc(s.getY()));P<=n.getMaxY()&&P>=n.getMinY();P+=S){let q=Ht.detectCodeword(e,0,e.getWidth(),d,k,P,u,f);q!=null&&(p.setCodeword(P,q),d?k=q.getStartX():k=q.getEndX())}}return p}static adjustCodewordCount(e,n){let s=n[0][1],d=s.getValue(),u=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-Ht.getNumberOfECCodeWords(e.getBarcodeECLevel());if(d.length===0){if(u<1||u>Nt.MAX_CODEWORDS_IN_BARCODE)throw ne.getNotFoundInstance();s.setValue(u)}else d[0]!==u&&s.setValue(u)}static createDecoderResult(e){let n=Ht.createBarcodeMatrix(e);Ht.adjustCodewordCount(e,n);let s=new Array,d=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),u=[],f=new Array;for(let w=0;w<e.getBarcodeRowCount();w++)for(let S=0;S<e.getBarcodeColumnCount();S++){let k=n[w][S+1].getValue(),P=w*e.getBarcodeColumnCount()+S;k.length===0?s.push(P):k.length===1?d[P]=k[0]:(f.push(P),u.push(k))}let p=new Array(u.length);for(let w=0;w<p.length;w++)p[w]=u[w];return Ht.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),d,Nt.toIntArray(s),Nt.toIntArray(f),p)}static createDecoderResultFromAmbiguousValues(e,n,s,d,u){let f=new Int32Array(d.length),p=100;for(;p-- >0;){for(let w=0;w<f.length;w++)n[d[w]]=u[w][f[w]];try{return Ht.decodeCodewords(n,e,s)}catch(w){if(!(w instanceof A))throw w}if(f.length===0)throw A.getChecksumInstance();for(let w=0;w<f.length;w++)if(f[w]<u[w].length-1){f[w]++;break}else if(f[w]=0,w===f.length-1)throw A.getChecksumInstance()}throw A.getChecksumInstance()}static createBarcodeMatrix(e){let n=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let d=0;d<n.length;d++)for(let u=0;u<n[d].length;u++)n[d][u]=new as;let s=0;for(let d of e.getDetectionResultColumns()){if(d!=null){for(let u of d.getCodewords())if(u!=null){let f=u.getRowNumber();if(f>=0){if(f>=n.length)continue;n[f][s].setValue(u.getValue())}}}s++}return n}static isValidBarcodeColumn(e,n){return n>=0&&n<=e.getBarcodeColumnCount()+1}static getStartColumn(e,n,s,d){let u=d?1:-1,f=null;if(Ht.isValidBarcodeColumn(e,n-u)&&(f=e.getDetectionResultColumn(n-u).getCodeword(s)),f!=null)return d?f.getEndX():f.getStartX();if(f=e.getDetectionResultColumn(n).getCodewordNearby(s),f!=null)return d?f.getStartX():f.getEndX();if(Ht.isValidBarcodeColumn(e,n-u)&&(f=e.getDetectionResultColumn(n-u).getCodewordNearby(s)),f!=null)return d?f.getEndX():f.getStartX();let p=0;for(;Ht.isValidBarcodeColumn(e,n-u);){n-=u;for(let w of e.getDetectionResultColumn(n).getCodewords())if(w!=null)return(d?w.getEndX():w.getStartX())+u*p*(w.getEndX()-w.getStartX());p++}return d?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,n,s,d,u,f,p,w){u=Ht.adjustCodewordStartColumn(e,n,s,d,u,f);let S=Ht.getModuleBitCount(e,n,s,d,u,f);if(S==null)return null;let k,P=He.sum(S);if(d)k=u+P;else{for(let he=0;he<S.length/2;he++){let ge=S[he];S[he]=S[S.length-1-he],S[S.length-1-he]=ge}k=u,u=k-P}if(!Ht.checkCodewordSkew(P,p,w))return null;let q=un.getDecodedValue(S),te=Nt.getCodeword(q);return te===-1?null:new yi(u,k,Ht.getCodewordBucketNumber(q),te)}static getModuleBitCount(e,n,s,d,u,f){let p=u,w=new Int32Array(8),S=0,k=d?1:-1,P=d;for(;(d?p<s:p>=n)&&S<w.length;)e.get(p,f)===P?(w[S]++,p+=k):(S++,P=!P);return S===w.length||p===(d?s:n)&&S===w.length-1?w:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,n,s,d,u,f){let p=u,w=d?-1:1;for(let S=0;S<2;S++){for(;(d?p>=n:p<s)&&d===e.get(p,f);){if(Math.abs(u-p)>Ht.CODEWORD_SKEW_SIZE)return u;p+=w}w=-w,d=!d}return p}static checkCodewordSkew(e,n,s){return n-Ht.CODEWORD_SKEW_SIZE<=e&&e<=s+Ht.CODEWORD_SKEW_SIZE}static decodeCodewords(e,n,s){if(e.length===0)throw $.getFormatInstance();let d=1<<n+1,u=Ht.correctErrors(e,s,d);Ht.verifyCodewordCount(e,d);let f=Oe.decode(e,""+n);return f.setErrorsCorrected(u),f.setErasures(s.length),f}static correctErrors(e,n,s){if(n!=null&&n.length>s/2+Ht.MAX_ERRORS||s<0||s>Ht.MAX_EC_CODEWORDS)throw A.getChecksumInstance();return Ht.errorCorrection.decode(e,s,n)}static verifyCodewordCount(e,n){if(e.length<4)throw $.getFormatInstance();let s=e[0];if(s>e.length)throw $.getFormatInstance();if(s===0)if(n<e.length)e[0]=e.length-n;else throw $.getFormatInstance()}static getBitCountForCodeword(e){let n=new Int32Array(8),s=0,d=n.length-1;for(;!((e&1)!==s&&(s=e&1,d--,d<0));)n[d]++,e>>=1;return n}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return Ht.getCodewordBucketNumber(Ht.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let n=new si;for(let s=0;s<e.length;s++){n.format("Row %2d: ",s);for(let d=0;d<e[s].length;d++){let u=e[s][d];u.getValue().length===0?n.format("        ",null):n.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}n.format("%n")}return n.toString()}}Ht.CODEWORD_SKEW_SIZE=2,Ht.MAX_ERRORS=3,Ht.MAX_EC_CODEWORDS=512,Ht.errorCorrection=new ja;class qr{decode(e,n=null){let s=qr.decode(e,n,!1);if(s==null||s.length===0||s[0]==null)throw ne.getNotFoundInstance();return s[0]}decodeMultiple(e,n=null){try{return qr.decode(e,n,!0)}catch(s){throw s instanceof $||s instanceof A?ne.getNotFoundInstance():s}}static decode(e,n,s){const d=new Array,u=Ft.detectMultiple(e,n,s);for(const f of u.getPoints()){const p=Ht.decode(u.getBits(),f[4],f[5],f[6],f[7],qr.getMinCodewordWidth(f),qr.getMaxCodewordWidth(f)),w=new K(p.getText(),p.getRawBytes(),void 0,f,ae.PDF_417);w.putMetadata(Ae.ERROR_CORRECTION_LEVEL,p.getECLevel());const S=p.getOther();S!=null&&w.putMetadata(Ae.PDF417_EXTRA_METADATA,S),d.push(w)}return d.map(f=>f)}static getMaxWidth(e,n){return e==null||n==null?0:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMinWidth(e,n){return e==null||n==null?B.MAX_VALUE:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(qr.getMaxWidth(e[0],e[4]),qr.getMaxWidth(e[6],e[2])*Nt.MODULES_IN_CODEWORD/Nt.MODULES_IN_STOP_PATTERN),Math.max(qr.getMaxWidth(e[1],e[5]),qr.getMaxWidth(e[7],e[3])*Nt.MODULES_IN_CODEWORD/Nt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(qr.getMinWidth(e[0],e[4]),qr.getMinWidth(e[6],e[2])*Nt.MODULES_IN_CODEWORD/Nt.MODULES_IN_STOP_PATTERN),Math.min(qr.getMinWidth(e[1],e[5]),qr.getMinWidth(e[7],e[3])*Nt.MODULES_IN_CODEWORD/Nt.MODULES_IN_STOP_PATTERN)))}reset(){}}class Vi extends y{}Vi.kind="ReaderException";class fa{constructor(e,n){this.verbose=e===!0,n&&this.setHints(n)}decode(e,n){return n&&this.setHints(n),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const n=!a(e)&&e.get(xe.TRY_HARDER)===!0,s=a(e)?null:e.get(xe.POSSIBLE_FORMATS),d=new Array;if(!a(s)){const u=s.some(f=>f===ae.UPC_A||f===ae.UPC_E||f===ae.EAN_13||f===ae.EAN_8||f===ae.CODABAR||f===ae.CODE_39||f===ae.CODE_93||f===ae.CODE_128||f===ae.ITF||f===ae.RSS_14||f===ae.RSS_EXPANDED);u&&!n&&d.push(new pi(e,this.verbose)),s.includes(ae.QR_CODE)&&d.push(new xi),s.includes(ae.DATA_MATRIX)&&d.push(new ln),s.includes(ae.AZTEC)&&d.push(new at),s.includes(ae.PDF_417)&&d.push(new qr),u&&n&&d.push(new pi(e,this.verbose))}d.length===0&&(n||d.push(new pi(e,this.verbose)),d.push(new xi),d.push(new ln),d.push(new at),d.push(new qr),n&&d.push(new pi(e,this.verbose))),this.readers=d}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new Vi("No readers where selected, nothing can be read.");for(const n of this.readers)try{return n.decode(e,this.hints)}catch(s){if(s instanceof Vi)continue}throw new ne("No MultiFormat Readers were able to detect the code.")}}class Ss extends W{constructor(e=null,n=500){const s=new fa;s.setHints(e),super(s,n)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class ga extends W{constructor(e=500){super(new qr,e)}}class ma extends W{constructor(e=500){super(new xi,e)}}var Es;(function(R){R[R.ERROR_CORRECTION=0]="ERROR_CORRECTION",R[R.CHARACTER_SET=1]="CHARACTER_SET",R[R.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",R[R.MIN_SIZE=3]="MIN_SIZE",R[R.MAX_SIZE=4]="MAX_SIZE",R[R.MARGIN=5]="MARGIN",R[R.PDF417_COMPACT=6]="PDF417_COMPACT",R[R.PDF417_COMPACTION=7]="PDF417_COMPACTION",R[R.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",R[R.AZTEC_LAYERS=9]="AZTEC_LAYERS",R[R.QR_VERSION=10]="QR_VERSION"})(Es||(Es={}));var Hr=Es;class Gi{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Be(e,Int32Array.from([1])))}buildGenerator(e){const n=this.cachedGenerators;if(e>=n.length){let s=n[n.length-1];const d=this.field;for(let u=n.length;u<=e;u++){const f=s.multiply(new Be(d,Int32Array.from([1,d.exp(u-1+d.getGeneratorBase())])));n.push(f),s=f}}return n[e]}encode(e,n){if(n===0)throw new C("No error correction bytes");const s=e.length-n;if(s<=0)throw new C("No data bytes provided");const d=this.buildGenerator(n),u=new Int32Array(s);_.arraycopy(e,0,u,0,s);let f=new Be(this.field,u);f=f.multiplyByMonomial(n,1);const w=f.divide(d)[1].getCoefficients(),S=n-w.length;for(let k=0;k<S;k++)e[s+k]=0;_.arraycopy(w,0,e,s+S,w.length)}}class hr{constructor(){}static applyMaskPenaltyRule1(e){return hr.applyMaskPenaltyRule1Internal(e,!0)+hr.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let n=0;const s=e.getArray(),d=e.getWidth(),u=e.getHeight();for(let f=0;f<u-1;f++){const p=s[f];for(let w=0;w<d-1;w++){const S=p[w];S===p[w+1]&&S===s[f+1][w]&&S===s[f+1][w+1]&&n++}}return hr.N2*n}static applyMaskPenaltyRule3(e){let n=0;const s=e.getArray(),d=e.getWidth(),u=e.getHeight();for(let f=0;f<u;f++)for(let p=0;p<d;p++){const w=s[f];p+6<d&&w[p]===1&&w[p+1]===0&&w[p+2]===1&&w[p+3]===1&&w[p+4]===1&&w[p+5]===0&&w[p+6]===1&&(hr.isWhiteHorizontal(w,p-4,p)||hr.isWhiteHorizontal(w,p+7,p+11))&&n++,f+6<u&&s[f][p]===1&&s[f+1][p]===0&&s[f+2][p]===1&&s[f+3][p]===1&&s[f+4][p]===1&&s[f+5][p]===0&&s[f+6][p]===1&&(hr.isWhiteVertical(s,p,f-4,f)||hr.isWhiteVertical(s,p,f+7,f+11))&&n++}return n*hr.N3}static isWhiteHorizontal(e,n,s){n=Math.max(n,0),s=Math.min(s,e.length);for(let d=n;d<s;d++)if(e[d]===1)return!1;return!0}static isWhiteVertical(e,n,s,d){s=Math.max(s,0),d=Math.min(d,e.length);for(let u=s;u<d;u++)if(e[u][n]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let n=0;const s=e.getArray(),d=e.getWidth(),u=e.getHeight();for(let w=0;w<u;w++){const S=s[w];for(let k=0;k<d;k++)S[k]===1&&n++}const f=e.getHeight()*e.getWidth();return Math.floor(Math.abs(n*2-f)*10/f)*hr.N4}static getDataMaskBit(e,n,s){let d,u;switch(e){case 0:d=s+n&1;break;case 1:d=s&1;break;case 2:d=n%3;break;case 3:d=(s+n)%3;break;case 4:d=Math.floor(s/2)+Math.floor(n/3)&1;break;case 5:u=s*n,d=(u&1)+u%3;break;case 6:u=s*n,d=(u&1)+u%3&1;break;case 7:u=s*n,d=u%3+(s+n&1)&1;break;default:throw new C("Invalid mask pattern: "+e)}return d===0}static applyMaskPenaltyRule1Internal(e,n){let s=0;const d=n?e.getHeight():e.getWidth(),u=n?e.getWidth():e.getHeight(),f=e.getArray();for(let p=0;p<d;p++){let w=0,S=-1;for(let k=0;k<u;k++){const P=n?f[p][k]:f[k][p];P===S?w++:(w>=5&&(s+=hr.N1+(w-5)),w=1,S=P)}w>=5&&(s+=hr.N1+(w-5))}return s}}hr.N1=3,hr.N2=3,hr.N3=40,hr.N4=10;class Wi{constructor(e,n){this.width=e,this.height=n;const s=new Array(n);for(let d=0;d!==n;d++)s[d]=new Uint8Array(e);this.bytes=s}getHeight(){return this.height}getWidth(){return this.width}get(e,n){return this.bytes[n][e]}getArray(){return this.bytes}setNumber(e,n,s){this.bytes[n][e]=s}setBoolean(e,n,s){this.bytes[n][e]=s?1:0}clear(e){for(const n of this.bytes)j.fill(n,e)}equals(e){if(!(e instanceof Wi))return!1;const n=e;if(this.width!==n.width||this.height!==n.height)return!1;for(let s=0,d=this.height;s<d;++s){const u=this.bytes[s],f=n.bytes[s];for(let p=0,w=this.width;p<w;++p)if(u[p]!==f[p])return!1}return!0}toString(){const e=new oe;for(let n=0,s=this.height;n<s;++n){const d=this.bytes[n];for(let u=0,f=this.width;u<f;++u)switch(d[u]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class Mn{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new oe;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Mn.NUM_MASK_PATTERNS}}Mn.NUM_MASK_PATTERNS=8;class or extends y{}or.kind="WriterException";class N{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,n,s,d,u){N.clearMatrix(u),N.embedBasicPatterns(s,u),N.embedTypeInfo(n,d,u),N.maybeEmbedVersionInfo(s,u),N.embedDataBits(e,d,u)}static embedBasicPatterns(e,n){N.embedPositionDetectionPatternsAndSeparators(n),N.embedDarkDotAtLeftBottomCorner(n),N.maybeEmbedPositionAdjustmentPatterns(e,n),N.embedTimingPatterns(n)}static embedTypeInfo(e,n,s){const d=new Z;N.makeTypeInfoBits(e,n,d);for(let u=0,f=d.getSize();u<f;++u){const p=d.get(d.getSize()-1-u),w=N.TYPE_INFO_COORDINATES[u],S=w[0],k=w[1];if(s.setBoolean(S,k,p),u<8){const P=s.getWidth()-u-1;s.setBoolean(P,8,p)}else{const q=s.getHeight()-7+(u-8);s.setBoolean(8,q,p)}}}static maybeEmbedVersionInfo(e,n){if(e.getVersionNumber()<7)return;const s=new Z;N.makeVersionInfoBits(e,s);let d=6*3-1;for(let u=0;u<6;++u)for(let f=0;f<3;++f){const p=s.get(d);d--,n.setBoolean(u,n.getHeight()-11+f,p),n.setBoolean(n.getHeight()-11+f,u,p)}}static embedDataBits(e,n,s){let d=0,u=-1,f=s.getWidth()-1,p=s.getHeight()-1;for(;f>0;){for(f===6&&(f-=1);p>=0&&p<s.getHeight();){for(let w=0;w<2;++w){const S=f-w;if(!N.isEmpty(s.get(S,p)))continue;let k;d<e.getSize()?(k=e.get(d),++d):k=!1,n!==255&&hr.getDataMaskBit(n,S,p)&&(k=!k),s.setBoolean(S,p,k)}p+=u}u=-u,p+=u,f-=2}if(d!==e.getSize())throw new or("Not all bits consumed: "+d+"/"+e.getSize())}static findMSBSet(e){return 32-B.numberOfLeadingZeros(e)}static calculateBCHCode(e,n){if(n===0)throw new C("0 polynomial");const s=N.findMSBSet(n);for(e<<=s-1;N.findMSBSet(e)>=s;)e^=n<<N.findMSBSet(e)-s;return e}static makeTypeInfoBits(e,n,s){if(!Mn.isValidMaskPattern(n))throw new or("Invalid mask pattern");const d=e.getBits()<<3|n;s.appendBits(d,5);const u=N.calculateBCHCode(d,N.TYPE_INFO_POLY);s.appendBits(u,10);const f=new Z;if(f.appendBits(N.TYPE_INFO_MASK_PATTERN,15),s.xor(f),s.getSize()!==15)throw new or("should not happen but we got: "+s.getSize())}static makeVersionInfoBits(e,n){n.appendBits(e.getVersionNumber(),6);const s=N.calculateBCHCode(e.getVersionNumber(),N.VERSION_INFO_POLY);if(n.appendBits(s,12),n.getSize()!==18)throw new or("should not happen but we got: "+n.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let n=8;n<e.getWidth()-8;++n){const s=(n+1)%2;N.isEmpty(e.get(n,6))&&e.setNumber(n,6,s),N.isEmpty(e.get(6,n))&&e.setNumber(6,n,s)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new or;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,n,s){for(let d=0;d<8;++d){if(!N.isEmpty(s.get(e+d,n)))throw new or;s.setNumber(e+d,n,0)}}static embedVerticalSeparationPattern(e,n,s){for(let d=0;d<7;++d){if(!N.isEmpty(s.get(e,n+d)))throw new or;s.setNumber(e,n+d,0)}}static embedPositionAdjustmentPattern(e,n,s){for(let d=0;d<5;++d){const u=N.POSITION_ADJUSTMENT_PATTERN[d];for(let f=0;f<5;++f)s.setNumber(e+f,n+d,u[f])}}static embedPositionDetectionPattern(e,n,s){for(let d=0;d<7;++d){const u=N.POSITION_DETECTION_PATTERN[d];for(let f=0;f<7;++f)s.setNumber(e+f,n+d,u[f])}}static embedPositionDetectionPatternsAndSeparators(e){const n=N.POSITION_DETECTION_PATTERN[0].length;N.embedPositionDetectionPattern(0,0,e),N.embedPositionDetectionPattern(e.getWidth()-n,0,e),N.embedPositionDetectionPattern(0,e.getWidth()-n,e);const s=8;N.embedHorizontalSeparationPattern(0,s-1,e),N.embedHorizontalSeparationPattern(e.getWidth()-s,s-1,e),N.embedHorizontalSeparationPattern(0,e.getWidth()-s,e);const d=7;N.embedVerticalSeparationPattern(d,0,e),N.embedVerticalSeparationPattern(e.getHeight()-d-1,0,e),N.embedVerticalSeparationPattern(d,e.getHeight()-d,e)}static maybeEmbedPositionAdjustmentPatterns(e,n){if(e.getVersionNumber()<2)return;const s=e.getVersionNumber()-1,d=N.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[s];for(let u=0,f=d.length;u!==f;u++){const p=d[u];if(p>=0)for(let w=0;w!==f;w++){const S=d[w];S>=0&&N.isEmpty(n.get(S,p))&&N.embedPositionAdjustmentPattern(S-2,p-2,n)}}}}N.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),N.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),N.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),N.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),N.VERSION_INFO_POLY=7973,N.TYPE_INFO_POLY=1335,N.TYPE_INFO_MASK_PATTERN=21522;class U{constructor(e,n){this.dataBytes=e,this.errorCorrectionBytes=n}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class ee{constructor(){}static calculateMaskPenalty(e){return hr.applyMaskPenaltyRule1(e)+hr.applyMaskPenaltyRule2(e)+hr.applyMaskPenaltyRule3(e)+hr.applyMaskPenaltyRule4(e)}static encode(e,n,s=null){let d=ee.DEFAULT_BYTE_MODE_ENCODING;const u=s!==null&&s.get(Hr.CHARACTER_SET)!==void 0;u&&(d=s.get(Hr.CHARACTER_SET).toString());const f=this.chooseMode(e,d),p=new Z;if(f===Et.BYTE&&(u||ee.DEFAULT_BYTE_MODE_ENCODING!==d)){const tt=ce.getCharacterSetECIByName(d);tt!==void 0&&this.appendECI(tt,p)}this.appendModeInfo(f,p);const w=new Z;this.appendBytes(e,f,w,d);let S;if(s!==null&&s.get(Hr.QR_VERSION)!==void 0){const tt=Number.parseInt(s.get(Hr.QR_VERSION).toString(),10);S=vt.getVersionForNumber(tt);const Qe=this.calculateBitsNeeded(f,p,w,S);if(!this.willFit(Qe,S,n))throw new or("Data too big for requested version")}else S=this.recommendVersion(n,f,p,w);const k=new Z;k.appendBitArray(p);const P=f===Et.BYTE?w.getSizeInBytes():e.length;this.appendLengthInfo(P,S,f,k),k.appendBitArray(w);const q=S.getECBlocksForLevel(n),te=S.getTotalCodewords()-q.getTotalECCodewords();this.terminateBits(te,k);const he=this.interleaveWithECBytes(k,S.getTotalCodewords(),te,q.getNumBlocks()),ge=new Mn;ge.setECLevel(n),ge.setMode(f),ge.setVersion(S);const we=S.getDimensionForVersion(),Me=new Wi(we,we),Ke=this.chooseMaskPattern(he,n,S,Me);return ge.setMaskPattern(Ke),N.buildMatrix(he,n,S,Ke,Me),ge.setMatrix(Me),ge}static recommendVersion(e,n,s,d){const u=this.calculateBitsNeeded(n,s,d,vt.getVersionForNumber(1)),f=this.chooseVersion(u,e),p=this.calculateBitsNeeded(n,s,d,f);return this.chooseVersion(p,e)}static calculateBitsNeeded(e,n,s,d){return n.getSize()+e.getCharacterCountBits(d)+s.getSize()}static getAlphanumericCode(e){return e<ee.ALPHANUMERIC_TABLE.length?ee.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,n=null){if(ce.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(e))return Et.KANJI;let s=!1,d=!1;for(let u=0,f=e.length;u<f;++u){const p=e.charAt(u);if(ee.isDigit(p))s=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)d=!0;else return Et.BYTE}return d?Et.ALPHANUMERIC:s?Et.NUMERIC:Et.BYTE}static isOnlyDoubleByteKanji(e){let n;try{n=Y.encode(e,ce.SJIS)}catch{return!1}const s=n.length;if(s%2!==0)return!1;for(let d=0;d<s;d+=2){const u=n[d]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(e,n,s,d){let u=Number.MAX_SAFE_INTEGER,f=-1;for(let p=0;p<Mn.NUM_MASK_PATTERNS;p++){N.buildMatrix(e,n,s,p,d);let w=this.calculateMaskPenalty(d);w<u&&(u=w,f=p)}return f}static chooseVersion(e,n){for(let s=1;s<=40;s++){const d=vt.getVersionForNumber(s);if(ee.willFit(e,d,n))return d}throw new or("Data too big")}static willFit(e,n,s){const d=n.getTotalCodewords(),f=n.getECBlocksForLevel(s).getTotalECCodewords(),p=d-f,w=(e+7)/8;return p>=w}static terminateBits(e,n){const s=e*8;if(n.getSize()>s)throw new or("data bits cannot fit in the QR Code"+n.getSize()+" > "+s);for(let f=0;f<4&&n.getSize()<s;++f)n.appendBit(!1);const d=n.getSize()&7;if(d>0)for(let f=d;f<8;f++)n.appendBit(!1);const u=e-n.getSizeInBytes();for(let f=0;f<u;++f)n.appendBits(f&1?17:236,8);if(n.getSize()!==s)throw new or("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,n,s,d,u,f){if(d>=s)throw new or("Block ID too large");const p=e%s,w=s-p,S=Math.floor(e/s),k=S+1,P=Math.floor(n/s),q=P+1,te=S-P,he=k-q;if(te!==he)throw new or("EC bytes mismatch");if(s!==w+p)throw new or("RS blocks mismatch");if(e!==(P+te)*w+(q+he)*p)throw new or("Total bytes mismatch");d<w?(u[0]=P,f[0]=te):(u[0]=q,f[0]=he)}static interleaveWithECBytes(e,n,s,d){if(e.getSizeInBytes()!==s)throw new or("Number of bits and data bytes does not match");let u=0,f=0,p=0;const w=new Array;for(let k=0;k<d;++k){const P=new Int32Array(1),q=new Int32Array(1);ee.getNumDataBytesAndNumECBytesForBlockID(n,s,d,k,P,q);const te=P[0],he=new Uint8Array(te);e.toBytes(8*u,he,0,te);const ge=ee.generateECBytes(he,q[0]);w.push(new U(he,ge)),f=Math.max(f,te),p=Math.max(p,ge.length),u+=P[0]}if(s!==u)throw new or("Data bytes does not match offset");const S=new Z;for(let k=0;k<f;++k)for(const P of w){const q=P.getDataBytes();k<q.length&&S.appendBits(q[k],8)}for(let k=0;k<p;++k)for(const P of w){const q=P.getErrorCorrectionBytes();k<q.length&&S.appendBits(q[k],8)}if(n!==S.getSizeInBytes())throw new or("Interleaving error: "+n+" and "+S.getSizeInBytes()+" differ.");return S}static generateECBytes(e,n){const s=e.length,d=new Int32Array(s+n);for(let f=0;f<s;f++)d[f]=e[f]&255;new Gi(Fe.QR_CODE_FIELD_256).encode(d,n);const u=new Uint8Array(n);for(let f=0;f<n;f++)u[f]=d[s+f];return u}static appendModeInfo(e,n){n.appendBits(e.getBits(),4)}static appendLengthInfo(e,n,s,d){const u=s.getCharacterCountBits(n);if(e>=1<<u)throw new or(e+" is bigger than "+((1<<u)-1));d.appendBits(e,u)}static appendBytes(e,n,s,d){switch(n){case Et.NUMERIC:ee.appendNumericBytes(e,s);break;case Et.ALPHANUMERIC:ee.appendAlphanumericBytes(e,s);break;case Et.BYTE:ee.append8BitBytes(e,s,d);break;case Et.KANJI:ee.appendKanjiBytes(e,s);break;default:throw new or("Invalid mode: "+n)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const n=ee.getDigit(e);return n>=0&&n<=9}static appendNumericBytes(e,n){const s=e.length;let d=0;for(;d<s;){const u=ee.getDigit(e.charAt(d));if(d+2<s){const f=ee.getDigit(e.charAt(d+1)),p=ee.getDigit(e.charAt(d+2));n.appendBits(u*100+f*10+p,10),d+=3}else if(d+1<s){const f=ee.getDigit(e.charAt(d+1));n.appendBits(u*10+f,7),d+=2}else n.appendBits(u,4),d++}}static appendAlphanumericBytes(e,n){const s=e.length;let d=0;for(;d<s;){const u=ee.getAlphanumericCode(e.charCodeAt(d));if(u===-1)throw new or;if(d+1<s){const f=ee.getAlphanumericCode(e.charCodeAt(d+1));if(f===-1)throw new or;n.appendBits(u*45+f,11),d+=2}else n.appendBits(u,6),d++}}static append8BitBytes(e,n,s){let d;try{d=Y.encode(e,s)}catch(u){throw new or(u)}for(let u=0,f=d.length;u!==f;u++){const p=d[u];n.appendBits(p,8)}}static appendKanjiBytes(e,n){let s;try{s=Y.encode(e,ce.SJIS)}catch(u){throw new or(u)}const d=s.length;for(let u=0;u<d;u+=2){const f=s[u]&255,p=s[u+1]&255,w=f<<8&4294967295|p;let S=-1;if(w>=33088&&w<=40956?S=w-33088:w>=57408&&w<=60351&&(S=w-49472),S===-1)throw new or("Invalid byte sequence");const k=(S>>8)*192+(S&255);n.appendBits(k,13)}}static appendECI(e,n){n.appendBits(Et.ECI.getBits(),4),n.appendBits(e.getValue(),8)}}ee.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),ee.DEFAULT_BYTE_MODE_ENCODING=ce.UTF8.getName();class fe{write(e,n,s,d=null){if(e.length===0)throw new C("Found empty contents");if(n<0||s<0)throw new C("Requested dimensions are too small: "+n+"x"+s);let u=cr.L,f=fe.QUIET_ZONE_SIZE;d!==null&&(d.get(Hr.ERROR_CORRECTION)!==void 0&&(u=cr.fromString(d.get(Hr.ERROR_CORRECTION).toString())),d.get(Hr.MARGIN)!==void 0&&(f=Number.parseInt(d.get(Hr.MARGIN).toString(),10)));const p=ee.encode(e,u,d);return this.renderResult(p,n,s,f)}writeToDom(e,n,s,d,u=null){typeof e=="string"&&(e=document.querySelector(e));const f=this.write(n,s,d,u);e&&e.appendChild(f)}renderResult(e,n,s,d){const u=e.getMatrix();if(u===null)throw new Pe;const f=u.getWidth(),p=u.getHeight(),w=f+d*2,S=p+d*2,k=Math.max(n,w),P=Math.max(s,S),q=Math.min(Math.floor(k/w),Math.floor(P/S)),te=Math.floor((k-f*q)/2),he=Math.floor((P-p*q)/2),ge=this.createSVGElement(k,P);for(let we=0,Me=he;we<p;we++,Me+=q)for(let Ke=0,tt=te;Ke<f;Ke++,tt+=q)if(u.get(Ke,we)===1){const Qe=this.createSvgRectElement(tt,Me,q,q);ge.appendChild(Qe)}return ge}createSVGElement(e,n){const s=document.createElementNS(fe.SVG_NS,"svg");return s.setAttributeNS(null,"height",e.toString()),s.setAttributeNS(null,"width",n.toString()),s}createSvgRectElement(e,n,s,d){const u=document.createElementNS(fe.SVG_NS,"rect");return u.setAttributeNS(null,"x",e.toString()),u.setAttributeNS(null,"y",n.toString()),u.setAttributeNS(null,"height",s.toString()),u.setAttributeNS(null,"width",d.toString()),u.setAttributeNS(null,"fill","#000000"),u}}fe.QUIET_ZONE_SIZE=4,fe.SVG_NS="http://www.w3.org/2000/svg";class Ce{encode(e,n,s,d,u){if(e.length===0)throw new C("Found empty contents");if(n!==ae.QR_CODE)throw new C("Can only encode QR_CODE, but got "+n);if(s<0||d<0)throw new C(`Requested dimensions are too small: ${s}x${d}`);let f=cr.L,p=Ce.QUIET_ZONE_SIZE;u!==null&&(u.get(Hr.ERROR_CORRECTION)!==void 0&&(f=cr.fromString(u.get(Hr.ERROR_CORRECTION).toString())),u.get(Hr.MARGIN)!==void 0&&(p=Number.parseInt(u.get(Hr.MARGIN).toString(),10)));const w=ee.encode(e,f,u);return Ce.renderResult(w,s,d,p)}static renderResult(e,n,s,d){const u=e.getMatrix();if(u===null)throw new Pe;const f=u.getWidth(),p=u.getHeight(),w=f+d*2,S=p+d*2,k=Math.max(n,w),P=Math.max(s,S),q=Math.min(Math.floor(k/w),Math.floor(P/S)),te=Math.floor((k-f*q)/2),he=Math.floor((P-p*q)/2),ge=new le(k,P);for(let we=0,Me=he;we<p;we++,Me+=q)for(let Ke=0,tt=te;Ke<f;Ke++,tt+=q)u.get(Ke,we)===1&&ge.setRegion(tt,Me,q,q);return ge}}Ce.QUIET_ZONE_SIZE=4;class Ve{encode(e,n,s,d,u){let f;switch(n){case ae.QR_CODE:f=new Ce;break;default:throw new C("No encoder available for format "+n)}return f.encode(e,n,s,d,u)}}class $e extends Ie{constructor(e,n,s,d,u,f,p,w){if(super(f,p),this.yuvData=e,this.dataWidth=n,this.dataHeight=s,this.left=d,this.top=u,d+f>n||u+p>s)throw new C("Crop rectangle does not fit within image data.");w&&this.reverseHorizontal(f,p)}getRow(e,n){if(e<0||e>=this.getHeight())throw new C("Requested row is outside the image: "+e);const s=this.getWidth();(n==null||n.length<s)&&(n=new Uint8ClampedArray(s));const d=(e+this.top)*this.dataWidth+this.left;return _.arraycopy(this.yuvData,d,n,0,s),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.yuvData;const s=e*n,d=new Uint8ClampedArray(s);let u=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return _.arraycopy(this.yuvData,u,d,0,s),d;for(let f=0;f<n;f++){const p=f*e;_.arraycopy(this.yuvData,u,d,p,e),u+=this.dataWidth}return d}isCropSupported(){return!0}crop(e,n,s,d){return new $e(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+n,s,d,!1)}renderThumbnail(){const e=this.getWidth()/$e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/$e.THUMBNAIL_SCALE_FACTOR,s=new Int32Array(e*n),d=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let f=0;f<n;f++){const p=f*e;for(let w=0;w<e;w++){const S=d[u+w*$e.THUMBNAIL_SCALE_FACTOR]&255;s[p+w]=4278190080|S*65793}u+=this.dataWidth*$e.THUMBNAIL_SCALE_FACTOR}return s}getThumbnailWidth(){return this.getWidth()/$e.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/$e.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,n){const s=this.yuvData;for(let d=0,u=this.top*this.dataWidth+this.left;d<n;d++,u+=this.dataWidth){const f=u+e/2;for(let p=u,w=u+e-1;p<f;p++,w--){const S=s[p];s[p]=s[w],s[w]=S}}}invert(){return new se(this)}}$e.THUMBNAIL_SCALE_FACTOR=2;class ct extends Ie{constructor(e,n,s,d,u,f,p){if(super(n,s),this.dataWidth=d,this.dataHeight=u,this.left=f,this.top=p,e.BYTES_PER_ELEMENT===4){const w=n*s,S=new Uint8ClampedArray(w);for(let k=0;k<w;k++){const P=e[k],q=P>>16&255,te=P>>7&510,he=P&255;S[k]=(q+te+he)/4&255}this.luminances=S}else this.luminances=e;if(d===void 0&&(this.dataWidth=n),u===void 0&&(this.dataHeight=s),f===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+n>this.dataWidth||this.top+s>this.dataHeight)throw new C("Crop rectangle does not fit within image data.")}getRow(e,n){if(e<0||e>=this.getHeight())throw new C("Requested row is outside the image: "+e);const s=this.getWidth();(n==null||n.length<s)&&(n=new Uint8ClampedArray(s));const d=(e+this.top)*this.dataWidth+this.left;return _.arraycopy(this.luminances,d,n,0,s),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.luminances;const s=e*n,d=new Uint8ClampedArray(s);let u=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return _.arraycopy(this.luminances,u,d,0,s),d;for(let f=0;f<n;f++){const p=f*e;_.arraycopy(this.luminances,u,d,p,e),u+=this.dataWidth}return d}isCropSupported(){return!0}crop(e,n,s,d){return new ct(this.luminances,s,d,this.dataWidth,this.dataHeight,this.left+e,this.top+n)}invert(){return new se(this)}}class Ct extends ce{static forName(e){return this.getCharacterSetECIByName(e)}}class Mt{}Mt.ISO_8859_1=ce.ISO8859_1;class Pt{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Kt{static singletonList(e){return[e]}static min(e,n){return e.sort(n)[0]}}class Dr{constructor(e){this.previous=e}getPrevious(){return this.previous}}class fr extends Dr{constructor(e,n,s){super(e),this.value=n,this.bitCount=s}appendTo(e,n){e.appendBits(this.value,this.bitCount)}add(e,n){return new fr(this,e,n)}addBinaryShift(e,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new fr(this,e,n)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+B.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Br extends fr{constructor(e,n,s){super(e,0,0),this.binaryShiftStart=n,this.binaryShiftByteCount=s}appendTo(e,n){for(let s=0;s<this.binaryShiftByteCount;s++)(s===0||s===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):s===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(n[this.binaryShiftStart+s],8)}addBinaryShift(e,n){return new Br(this,e,n)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function wn(R,e,n){return new Br(R,e,n)}function Fr(R,e,n){return new fr(R,e,n)}const ai=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Wr=0,Wn=1,Tn=2,Is=3,Pn=4,Ts=new fr(null,0,0),os=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function pa(R){for(let e of R)j.fill(e,-1);return R[Wr][Pn]=0,R[Wn][Pn]=0,R[Wn][Wr]=28,R[Is][Pn]=0,R[Tn][Pn]=0,R[Tn][Wr]=15,R}const ls=pa(j.createInt32Array(6,6));class br{constructor(e,n,s,d){this.token=e,this.mode=n,this.binaryShiftByteCount=s,this.bitCount=d}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,n){let s=this.bitCount,d=this.token;if(e!==this.mode){let f=os[this.mode][e];d=Fr(d,f&65535,f>>16),s+=f>>16}let u=e===Tn?4:5;return d=Fr(d,n,u),new br(d,e,0,s+u)}shiftAndAppend(e,n){let s=this.token,d=this.mode===Tn?4:5;return s=Fr(s,ls[this.mode][e],d),s=Fr(s,n,5),new br(s,this.mode,0,this.bitCount+d+5)}addBinaryShiftChar(e){let n=this.token,s=this.mode,d=this.bitCount;if(this.mode===Pn||this.mode===Tn){let p=os[s][Wr];n=Fr(n,p&65535,p>>16),d+=p>>16,s=Wr}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new br(n,s,this.binaryShiftByteCount+1,d+u);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(e+1)),f}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let n=this.token;return n=wn(n,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new br(n,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let n=this.bitCount+(os[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?n+=br.calculateBinaryShiftCost(e)-br.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(n+=10),n<=e.bitCount}toBitArray(e){let n=[];for(let d=this.endBinaryShift(e.length).token;d!==null;d=d.getPrevious())n.unshift(d);let s=new Z;for(const d of n)d.appendTo(s,e);return s}toString(){return V.format("%s bits=%d bytes=%d",ai[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}br.INITIAL_STATE=new br(Ts,Wr,0,0);function js(R){const e=V.getCharCode(" "),n=V.getCharCode("."),s=V.getCharCode(",");R[Wr][e]=1;const d=V.getCharCode("Z"),u=V.getCharCode("A");for(let q=u;q<=d;q++)R[Wr][q]=q-u+2;R[Wn][e]=1;const f=V.getCharCode("z"),p=V.getCharCode("a");for(let q=p;q<=f;q++)R[Wn][q]=q-p+2;R[Tn][e]=1;const w=V.getCharCode("9"),S=V.getCharCode("0");for(let q=S;q<=w;q++)R[Tn][q]=q-S+2;R[Tn][s]=12,R[Tn][n]=13;const k=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let q=0;q<k.length;q++)R[Is][V.getCharCode(k[q])]=q;const P=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let q=0;q<P.length;q++)V.getCharCode(P[q])>0&&(R[Pn][V.getCharCode(P[q])]=q);return R}const Yi=js(j.createInt32Array(5,256));class wi{constructor(e){this.text=e}encode(){const e=V.getCharCode(" "),n=V.getCharCode(`
`);let s=Kt.singletonList(br.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let f,p=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case V.getCharCode("\r"):f=p===n?2:0;break;case V.getCharCode("."):f=p===e?3:0;break;case V.getCharCode(","):f=p===e?4:0;break;case V.getCharCode(":"):f=p===e?5:0;break;default:f=0}f>0?(s=wi.updateStateListForPair(s,u,f),u++):s=this.updateStateListForChar(s,u)}return Kt.min(s,(u,f)=>u.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,n){const s=[];for(let d of e)this.updateStateForChar(d,n,s);return wi.simplifyStates(s)}updateStateForChar(e,n,s){let d=this.text[n]&255,u=Yi[e.getMode()][d]>0,f=null;for(let p=0;p<=Pn;p++){let w=Yi[p][d];if(w>0){if(f==null&&(f=e.endBinaryShift(n)),!u||p===e.getMode()||p===Tn){const S=f.latchAndAppend(p,w);s.push(S)}if(!u&&ls[e.getMode()][p]>=0){const S=f.shiftAndAppend(p,w);s.push(S)}}}if(e.getBinaryShiftByteCount()>0||Yi[e.getMode()][d]===0){let p=e.addBinaryShiftChar(n);s.push(p)}}static updateStateListForPair(e,n,s){const d=[];for(let u of e)this.updateStateForPair(u,n,s,d);return this.simplifyStates(d)}static updateStateForPair(e,n,s,d){let u=e.endBinaryShift(n);if(d.push(u.latchAndAppend(Pn,s)),e.getMode()!==Pn&&d.push(u.shiftAndAppend(Pn,s)),s===3||s===4){let f=u.latchAndAppend(Tn,16-s).latchAndAppend(Tn,1);d.push(f)}if(e.getBinaryShiftByteCount()>0){let f=e.addBinaryShiftChar(n).addBinaryShiftChar(n+1);d.push(f)}}static simplifyStates(e){let n=[];for(const s of e){let d=!0;for(const u of n){if(u.isBetterThanOrEqualTo(s)){d=!1;break}s.isBetterThanOrEqualTo(u)&&(n=n.filter(f=>f!==u))}d&&n.push(s)}return n}}class Zt{constructor(){}static encodeBytes(e){return Zt.encode(e,Zt.DEFAULT_EC_PERCENT,Zt.DEFAULT_AZTEC_LAYERS)}static encode(e,n,s){let d=new wi(e).encode(),u=B.truncDivision(d.getSize()*n,100)+11,f=d.getSize()+u,p,w,S,k,P;if(s!==Zt.DEFAULT_AZTEC_LAYERS){if(p=s<0,w=Math.abs(s),w>(p?Zt.MAX_NB_BITS_COMPACT:Zt.MAX_NB_BITS))throw new C(V.format("Illegal value %s for layers",s));S=Zt.totalBitsInLayer(w,p),k=Zt.WORD_SIZE[w];let Qe=S-S%k;if(P=Zt.stuffBits(d,k),P.getSize()+u>Qe)throw new C("Data to large for user specified layer");if(p&&P.getSize()>k*64)throw new C("Data to large for user specified layer")}else{k=0,P=null;for(let Qe=0;;Qe++){if(Qe>Zt.MAX_NB_BITS)throw new C("Data too large for an Aztec code");if(p=Qe<=3,w=p?Qe+1:Qe,S=Zt.totalBitsInLayer(w,p),f>S)continue;(P==null||k!==Zt.WORD_SIZE[w])&&(k=Zt.WORD_SIZE[w],P=Zt.stuffBits(d,k));let Xt=S-S%k;if(!(p&&P.getSize()>k*64)&&P.getSize()+u<=Xt)break}}let q=Zt.generateCheckWords(P,S,k),te=P.getSize()/k,he=Zt.generateModeMessage(p,w,te),ge=(p?11:14)+w*4,we=new Int32Array(ge),Me;if(p){Me=ge;for(let Qe=0;Qe<we.length;Qe++)we[Qe]=Qe}else{Me=ge+1+2*B.truncDivision(B.truncDivision(ge,2)-1,15);let Qe=B.truncDivision(ge,2),Xt=B.truncDivision(Me,2);for(let kt=0;kt<Qe;kt++){let Yr=kt+B.truncDivision(kt,15);we[Qe-kt-1]=Xt-Yr-1,we[Qe+kt]=Xt+Yr+1}}let Ke=new le(Me);for(let Qe=0,Xt=0;Qe<w;Qe++){let kt=(w-Qe)*4+(p?9:12);for(let Yr=0;Yr<kt;Yr++){let fn=Yr*2;for(let Vr=0;Vr<2;Vr++)q.get(Xt+fn+Vr)&&Ke.set(we[Qe*2+Vr],we[Qe*2+Yr]),q.get(Xt+kt*2+fn+Vr)&&Ke.set(we[Qe*2+Yr],we[ge-1-Qe*2-Vr]),q.get(Xt+kt*4+fn+Vr)&&Ke.set(we[ge-1-Qe*2-Vr],we[ge-1-Qe*2-Yr]),q.get(Xt+kt*6+fn+Vr)&&Ke.set(we[ge-1-Qe*2-Yr],we[Qe*2+Vr])}Xt+=kt*8}if(Zt.drawModeMessage(Ke,p,Me,he),p)Zt.drawBullsEye(Ke,B.truncDivision(Me,2),5);else{Zt.drawBullsEye(Ke,B.truncDivision(Me,2),7);for(let Qe=0,Xt=0;Qe<B.truncDivision(ge,2)-1;Qe+=15,Xt+=16)for(let kt=B.truncDivision(Me,2)&1;kt<Me;kt+=2)Ke.set(B.truncDivision(Me,2)-Xt,kt),Ke.set(B.truncDivision(Me,2)+Xt,kt),Ke.set(kt,B.truncDivision(Me,2)-Xt),Ke.set(kt,B.truncDivision(Me,2)+Xt)}let tt=new Pt;return tt.setCompact(p),tt.setSize(Me),tt.setLayers(w),tt.setCodeWords(te),tt.setMatrix(Ke),tt}static drawBullsEye(e,n,s){for(let d=0;d<s;d+=2)for(let u=n-d;u<=n+d;u++)e.set(u,n-d),e.set(u,n+d),e.set(n-d,u),e.set(n+d,u);e.set(n-s,n-s),e.set(n-s+1,n-s),e.set(n-s,n-s+1),e.set(n+s,n-s),e.set(n+s,n-s+1),e.set(n+s,n+s-1)}static generateModeMessage(e,n,s){let d=new Z;return e?(d.appendBits(n-1,2),d.appendBits(s-1,6),d=Zt.generateCheckWords(d,28,4)):(d.appendBits(n-1,5),d.appendBits(s-1,11),d=Zt.generateCheckWords(d,40,4)),d}static drawModeMessage(e,n,s,d){let u=B.truncDivision(s,2);if(n)for(let f=0;f<7;f++){let p=u-3+f;d.get(f)&&e.set(p,u-5),d.get(f+7)&&e.set(u+5,p),d.get(20-f)&&e.set(p,u+5),d.get(27-f)&&e.set(u-5,p)}else for(let f=0;f<10;f++){let p=u-5+f+B.truncDivision(f,5);d.get(f)&&e.set(p,u-7),d.get(f+10)&&e.set(u+7,p),d.get(29-f)&&e.set(p,u+7),d.get(39-f)&&e.set(u-7,p)}}static generateCheckWords(e,n,s){let d=e.getSize()/s,u=new Gi(Zt.getGF(s)),f=B.truncDivision(n,s),p=Zt.bitsToWords(e,s,f);u.encode(p,f-d);let w=n%s,S=new Z;S.appendBits(0,w);for(const k of Array.from(p))S.appendBits(k,s);return S}static bitsToWords(e,n,s){let d=new Int32Array(s),u,f;for(u=0,f=e.getSize()/n;u<f;u++){let p=0;for(let w=0;w<n;w++)p|=e.get(u*n+w)?1<<n-w-1:0;d[u]=p}return d}static getGF(e){switch(e){case 4:return Fe.AZTEC_PARAM;case 6:return Fe.AZTEC_DATA_6;case 8:return Fe.AZTEC_DATA_8;case 10:return Fe.AZTEC_DATA_10;case 12:return Fe.AZTEC_DATA_12;default:throw new C("Unsupported word size "+e)}}static stuffBits(e,n){let s=new Z,d=e.getSize(),u=(1<<n)-2;for(let f=0;f<d;f+=n){let p=0;for(let w=0;w<n;w++)(f+w>=d||e.get(f+w))&&(p|=1<<n-1-w);(p&u)===u?(s.appendBits(p&u,n),f--):p&u?s.appendBits(p,n):(s.appendBits(p|1,n),f--)}return s}static totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}Zt.DEFAULT_EC_PERCENT=33,Zt.DEFAULT_AZTEC_LAYERS=0,Zt.MAX_NB_BITS=32,Zt.MAX_NB_BITS_COMPACT=4,Zt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class hn{encode(e,n,s,d){return this.encodeWithHints(e,n,s,d,null)}encodeWithHints(e,n,s,d,u){let f=Mt.ISO_8859_1,p=Zt.DEFAULT_EC_PERCENT,w=Zt.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(Hr.CHARACTER_SET)&&(f=Ct.forName(u.get(Hr.CHARACTER_SET).toString())),u.has(Hr.ERROR_CORRECTION)&&(p=B.parseInt(u.get(Hr.ERROR_CORRECTION).toString())),u.has(Hr.AZTEC_LAYERS)&&(w=B.parseInt(u.get(Hr.AZTEC_LAYERS).toString()))),hn.encodeLayers(e,n,s,d,f,p,w)}static encodeLayers(e,n,s,d,u,f,p){if(n!==ae.AZTEC)throw new C("Can only encode AZTEC, but got "+n);let w=Zt.encode(V.getBytes(e,u),f,p);return hn.renderResult(w,s,d)}static renderResult(e,n,s){let d=e.getMatrix();if(d==null)throw new Pe;let u=d.getWidth(),f=d.getHeight(),p=Math.max(n,u),w=Math.max(s,f),S=Math.min(p/u,w/f),k=(p-u*S)/2,P=(w-f*S)/2,q=new le(p,w);for(let te=0,he=P;te<f;te++,he+=S)for(let ge=0,we=k;ge<u;ge++,we+=S)d.get(ge,te)&&q.setRegion(we,he,S,S);return q}}i.AbstractExpandedDecoder=Vn,i.ArgumentException=v,i.ArithmeticException=et,i.AztecCode=Pt,i.AztecCodeReader=at,i.AztecCodeWriter=hn,i.AztecDecoder=nt,i.AztecDetector=Bt,i.AztecDetectorResult=ht,i.AztecEncoder=Zt,i.AztecHighLevelEncoder=wi,i.AztecPoint=ft,i.BarcodeFormat=ae,i.Binarizer=D,i.BinaryBitmap=T,i.BitArray=Z,i.BitMatrix=le,i.BitSource=vs,i.BrowserAztecCodeReader=Ar,i.BrowserBarcodeReader=ro,i.BrowserCodeReader=W,i.BrowserDatamatrixCodeReader=Ns,i.BrowserMultiFormatReader=Ss,i.BrowserPDF417Reader=ga,i.BrowserQRCodeReader=ma,i.BrowserQRCodeSvgWriter=fe,i.CharacterSetECI=ce,i.ChecksumException=A,i.Code128Reader=it,i.Code39Reader=Dt,i.DataMatrixDecodedBitStreamParser=ii,i.DataMatrixReader=ln,i.DecodeHintType=xe,i.DecoderResult=ke,i.DefaultGridSampler=Vt,i.DetectorResult=rt,i.EAN13Reader=Cn,i.EncodeHintType=Hr,i.Exception=y,i.FormatException=$,i.GenericGF=Fe,i.GenericGFPoly=Be,i.GlobalHistogramBinarizer=Te,i.GridSampler=It,i.GridSamplerInstance=Rt,i.HTMLCanvasElementLuminanceSource=be,i.HybridBinarizer=Se,i.ITFReader=Tt,i.IllegalArgumentException=C,i.IllegalStateException=Pe,i.InvertedLuminanceSource=se,i.LuminanceSource=Ie,i.MathUtils=He,i.MultiFormatOneDReader=pi,i.MultiFormatReader=fa,i.MultiFormatWriter=Ve,i.NotFoundException=ne,i.OneDReader=St,i.PDF417DecodedBitStreamParser=Oe,i.PDF417DecoderErrorCorrection=ja,i.PDF417Reader=qr,i.PDF417ResultMetadata=da,i.PerspectiveTransform=At,i.PlanarYUVLuminanceSource=$e,i.QRCodeByteMatrix=Wi,i.QRCodeDataMask=kn,i.QRCodeDecodedBitStreamParser=ar,i.QRCodeDecoderErrorCorrectionLevel=cr,i.QRCodeDecoderFormatInformation=Jr,i.QRCodeEncoder=ee,i.QRCodeEncoderQRCode=Mn,i.QRCodeMaskUtil=hr,i.QRCodeMatrixUtil=N,i.QRCodeMode=Et,i.QRCodeReader=xi,i.QRCodeVersion=vt,i.QRCodeWriter=Ce,i.RGBLuminanceSource=ct,i.RSS14Reader=Er,i.RSSExpandedReader=Xe,i.ReaderException=Vi,i.ReedSolomonDecoder=de,i.ReedSolomonEncoder=Gi,i.ReedSolomonException=mt,i.Result=K,i.ResultMetadataType=Ae,i.ResultPoint=Re,i.StringUtils=V,i.UnsupportedOperationException=De,i.VideoInputDevice=Ge,i.WhiteRectangleDetector=dt,i.WriterException=or,i.ZXingArrays=j,i.ZXingCharset=Ct,i.ZXingInteger=B,i.ZXingStandardCharsets=Mt,i.ZXingStringBuilder=oe,i.ZXingStringEncoding=Y,i.ZXingSystem=_,i.createAbstractExpandedDecoder=ea,Object.defineProperty(i,"__esModule",{value:!0})})})(zc,zc.exports);var Or=zc.exports;const Zm=jo(Or),$m=Z1({__proto__:null,default:Zm},[Or]);var _u=function(){function t(r,i,a){if(this.formatMap=new Map([[xt.QR_CODE,Or.BarcodeFormat.QR_CODE],[xt.AZTEC,Or.BarcodeFormat.AZTEC],[xt.CODABAR,Or.BarcodeFormat.CODABAR],[xt.CODE_39,Or.BarcodeFormat.CODE_39],[xt.CODE_93,Or.BarcodeFormat.CODE_93],[xt.CODE_128,Or.BarcodeFormat.CODE_128],[xt.DATA_MATRIX,Or.BarcodeFormat.DATA_MATRIX],[xt.MAXICODE,Or.BarcodeFormat.MAXICODE],[xt.ITF,Or.BarcodeFormat.ITF],[xt.EAN_13,Or.BarcodeFormat.EAN_13],[xt.EAN_8,Or.BarcodeFormat.EAN_8],[xt.PDF_417,Or.BarcodeFormat.PDF_417],[xt.RSS_14,Or.BarcodeFormat.RSS_14],[xt.RSS_EXPANDED,Or.BarcodeFormat.RSS_EXPANDED],[xt.UPC_A,Or.BarcodeFormat.UPC_A],[xt.UPC_E,Or.BarcodeFormat.UPC_E],[xt.UPC_EAN_EXTENSION,Or.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!$m)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=i,this.logger=a;var c=this.createZXingFormats(r),l=new Map;l.set(Or.DecodeHintType.POSSIBLE_FORMATS,c),l.set(Or.DecodeHintType.TRY_HARDER,!1),this.hints=l}return t.prototype.decodeAsync=function(r){var i=this;return new Promise(function(a,c){try{a(i.decode(r))}catch(l){c(l)}})},t.prototype.decode=function(r){var i=new Or.MultiFormatReader(this.verbose,this.hints),a=new Or.HTMLCanvasElementLuminanceSource(r),c=new Or.BinaryBitmap(new Or.HybridBinarizer(a)),l=i.decode(c);return{text:l.text,format:eh.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var r=new Map;return this.formatMap.forEach(function(i,a,c){r.set(i,a)}),r},t.prototype.toHtml5QrcodeSupportedFormats=function(r){if(!this.reverseFormatMap.has(r))throw"reverseFormatMap doesn't have ".concat(r);return this.reverseFormatMap.get(r)},t.prototype.createZXingFormats=function(r){for(var i=[],a=0,c=r;a<c.length;a++){var l=c[a];this.formatMap.has(l)?i.push(this.formatMap.get(l)):this.logger.logError("".concat(l," is not supported by")+"ZXingHtml5QrcodeShim")}return i},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),Km=function(t,r,i,a){function c(l){return l instanceof i?l:new i(function(h){h(l)})}return new(i||(i=Promise))(function(l,h){function m(v){try{y(a.next(v))}catch(C){h(C)}}function x(v){try{y(a.throw(v))}catch(C){h(C)}}function y(v){v.done?l(v.value):c(v.value).then(m,x)}y((a=a.apply(t,r||[])).next())})},Qm=function(t,r){var i={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},a,c,l,h;return h={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(y){return function(v){return x([y,v])}}function x(y){if(a)throw new TypeError("Generator is already executing.");for(;h&&(h=0,y[0]&&(i=0)),i;)try{if(a=1,c&&(l=y[0]&2?c.return:y[0]?c.throw||((l=c.return)&&l.call(c),0):c.next)&&!(l=l.call(c,y[1])).done)return l;switch(c=0,l&&(y=[y[0]&2,l.value]),y[0]){case 0:case 1:l=y;break;case 4:return i.label++,{value:y[1],done:!1};case 5:i.label++,c=y[1],y=[0];continue;case 7:y=i.ops.pop(),i.trys.pop();continue;default:if(l=i.trys,!(l=l.length>0&&l[l.length-1])&&(y[0]===6||y[0]===2)){i=0;continue}if(y[0]===3&&(!l||y[1]>l[0]&&y[1]<l[3])){i.label=y[1];break}if(y[0]===6&&i.label<l[1]){i.label=l[1],l=y;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(y);break}l[2]&&i.ops.pop(),i.trys.pop();continue}y=r.call(t,i)}catch(v){y=[6,v],c=0}finally{a=l=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Lu=function(){function t(r,i,a){if(this.formatMap=new Map([[xt.QR_CODE,"qr_code"],[xt.AZTEC,"aztec"],[xt.CODABAR,"codabar"],[xt.CODE_39,"code_39"],[xt.CODE_93,"code_93"],[xt.CODE_128,"code_128"],[xt.DATA_MATRIX,"data_matrix"],[xt.ITF,"itf"],[xt.EAN_13,"ean_13"],[xt.EAN_8,"ean_8"],[xt.PDF_417,"pdf417"],[xt.UPC_A,"upc_a"],[xt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=i,this.logger=a;var c=this.createBarcodeDetectorFormats(r);if(this.detector=new BarcodeDetector(c),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var r=new BarcodeDetector({formats:["qr_code"]});return typeof r<"u"},t.prototype.decodeAsync=function(r){return Km(this,void 0,void 0,function(){var i,a;return Qm(this,function(c){switch(c.label){case 0:return[4,this.detector.detect(r)];case 1:if(i=c.sent(),!i||i.length===0)throw"No barcode or QR code detected.";return a=this.selectLargestBarcode(i),[2,{text:a.rawValue,format:eh.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(r){for(var i=null,a=0,c=0,l=r;c<l.length;c++){var h=l[c],m=h.boundingBox.width*h.boundingBox.height;m>a&&(a=m,i=h)}if(!i)throw"No largest barcode found";return i},t.prototype.createBarcodeDetectorFormats=function(r){for(var i=[],a=0,c=r;a<c.length;a++){var l=c[a];this.formatMap.has(l)?i.push(this.formatMap.get(l)):this.logger.warn("".concat(l," is not supported by")+"BarcodeDetectorDelegate")}return{formats:i}},t.prototype.toHtml5QrcodeSupportedFormats=function(r){if(!this.reverseFormatMap.has(r))throw"reverseFormatMap doesn't have ".concat(r);return this.reverseFormatMap.get(r)},t.prototype.createReverseFormatMap=function(){var r=new Map;return this.formatMap.forEach(function(i,a,c){r.set(i,a)}),r},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),ku=function(t,r,i,a){function c(l){return l instanceof i?l:new i(function(h){h(l)})}return new(i||(i=Promise))(function(l,h){function m(v){try{y(a.next(v))}catch(C){h(C)}}function x(v){try{y(a.throw(v))}catch(C){h(C)}}function y(v){v.done?l(v.value):c(v.value).then(m,x)}y((a=a.apply(t,r||[])).next())})},Du=function(t,r){var i={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},a,c,l,h;return h={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(y){return function(v){return x([y,v])}}function x(y){if(a)throw new TypeError("Generator is already executing.");for(;h&&(h=0,y[0]&&(i=0)),i;)try{if(a=1,c&&(l=y[0]&2?c.return:y[0]?c.throw||((l=c.return)&&l.call(c),0):c.next)&&!(l=l.call(c,y[1])).done)return l;switch(c=0,l&&(y=[y[0]&2,l.value]),y[0]){case 0:case 1:l=y;break;case 4:return i.label++,{value:y[1],done:!1};case 5:i.label++,c=y[1],y=[0];continue;case 7:y=i.ops.pop(),i.trys.pop();continue;default:if(l=i.trys,!(l=l.length>0&&l[l.length-1])&&(y[0]===6||y[0]===2)){i=0;continue}if(y[0]===3&&(!l||y[1]>l[0]&&y[1]<l[3])){i.label=y[1];break}if(y[0]===6&&i.label<l[1]){i.label=l[1],l=y;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(y);break}l[2]&&i.ops.pop(),i.trys.pop();continue}y=r.call(t,i)}catch(v){y=[6,v],c=0}finally{a=l=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Jm=function(){function t(r,i,a,c){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=a,i&&Lu.isSupported()?(this.primaryDecoder=new Lu(r,a,c),this.secondaryDecoder=new _u(r,a,c)):this.primaryDecoder=new _u(r,a,c)}return t.prototype.decodeAsync=function(r){return ku(this,void 0,void 0,function(){var i;return Du(this,function(a){switch(a.label){case 0:i=performance.now(),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(r)];case 2:return[2,a.sent()];case 3:return this.possiblyLogPerformance(i),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(r){return ku(this,void 0,void 0,function(){var i,a;return Du(this,function(c){switch(c.label){case 0:i=performance.now(),c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(r)];case 2:return[2,c.sent()];case 3:if(a=c.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(r)];throw a;case 4:return this.possiblyLogPerformance(i),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(r){if(this.verbose){var i=performance.now()-r;this.executionResults.push(i),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var r=0,i=0,a=this.executionResults;i<a.length;i++){var c=a[i];r+=c}var l=r/this.executionResults.length;console.log("".concat(l," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),md=function(){var t=function(r,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(a[l]=c[l])},t(r,i)};return function(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");t(r,i);function a(){this.constructor=r}r.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),vl=function(t,r,i,a){function c(l){return l instanceof i?l:new i(function(h){h(l)})}return new(i||(i=Promise))(function(l,h){function m(v){try{y(a.next(v))}catch(C){h(C)}}function x(v){try{y(a.throw(v))}catch(C){h(C)}}function y(v){v.done?l(v.value):c(v.value).then(m,x)}y((a=a.apply(t,r||[])).next())})},Nl=function(t,r){var i={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},a,c,l,h;return h={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(y){return function(v){return x([y,v])}}function x(y){if(a)throw new TypeError("Generator is already executing.");for(;h&&(h=0,y[0]&&(i=0)),i;)try{if(a=1,c&&(l=y[0]&2?c.return:y[0]?c.throw||((l=c.return)&&l.call(c),0):c.next)&&!(l=l.call(c,y[1])).done)return l;switch(c=0,l&&(y=[y[0]&2,l.value]),y[0]){case 0:case 1:l=y;break;case 4:return i.label++,{value:y[1],done:!1};case 5:i.label++,c=y[1],y=[0];continue;case 7:y=i.ops.pop(),i.trys.pop();continue;default:if(l=i.trys,!(l=l.length>0&&l[l.length-1])&&(y[0]===6||y[0]===2)){i=0;continue}if(y[0]===3&&(!l||y[1]>l[0]&&y[1]<l[3])){i.label=y[1];break}if(y[0]===6&&i.label<l[1]){i.label=l[1],l=y;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(y);break}l[2]&&i.ops.pop(),i.trys.pop();continue}y=r.call(t,i)}catch(v){y=[6,v],c=0}finally{a=l=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},ih=function(){function t(r,i){this.name=r,this.track=i}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(r){var i={};i[this.name]=r;var a={advanced:[i]};return this.track.applyConstraints(a)},t.prototype.value=function(){var r=this.track.getSettings();if(this.name in r){var i=r[this.name];return i}return null},t}(),ep=function(t){md(r,t);function r(i,a){return t.call(this,i,a)||this}return r.prototype.min=function(){return this.getCapabilities().min},r.prototype.max=function(){return this.getCapabilities().max},r.prototype.step=function(){return this.getCapabilities().step},r.prototype.apply=function(i){var a={};a[this.name]=i;var c={advanced:[a]};return this.track.applyConstraints(c)},r.prototype.getCapabilities=function(){this.failIfNotSupported();var i=this.track.getCapabilities(),a=i[this.name];return{min:a.min,max:a.max,step:a.step}},r.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},r}(ih),tp=function(t){md(r,t);function r(i){return t.call(this,"zoom",i)||this}return r}(ep),rp=function(t){md(r,t);function r(i){return t.call(this,"torch",i)||this}return r}(ih),np=function(){function t(r){this.track=r}return t.prototype.zoomFeature=function(){return new tp(this.track)},t.prototype.torchFeature=function(){return new rp(this.track)},t}(),ip=function(){function t(r,i,a){this.isClosed=!1,this.parentElement=r,this.mediaStream=i,this.callbacks=a,this.surface=this.createVideoElement(this.parentElement.clientWidth),r.append(this.surface)}return t.prototype.createVideoElement=function(r){var i=document.createElement("video");return i.style.width="".concat(r,"px"),i.style.display="block",i.muted=!0,i.setAttribute("muted","true"),i.playsInline=!0,i},t.prototype.setupSurface=function(){var r=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var i=function(){var a=r.surface.clientWidth,c=r.surface.clientHeight;r.callbacks.onRenderSurfaceReady(a,c),r.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(r,i,a,c){return vl(this,void 0,void 0,function(){var l,h;return Nl(this,function(m){switch(m.label){case 0:return l=new t(r,i,c),a.aspectRatio?(h={aspectRatio:a.aspectRatio},[4,l.getFirstTrackOrFail().applyConstraints(h)]):[3,2];case 1:m.sent(),m.label=2;case 2:return l.setupSurface(),[2,l]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(r){this.failIfClosed();var i=this,a=function(){setTimeout(r,200),i.surface.removeEventListener("playing",a)};this.surface.addEventListener("playing",a),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(r){return vl(this,void 0,void 0,function(){return Nl(this,function(i){if("aspectRatio"in r)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(r)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var r=this;return new Promise(function(i,a){var c=r.mediaStream.getVideoTracks(),l=c.length,h=0;r.mediaStream.getVideoTracks().forEach(function(m){r.mediaStream.removeTrack(m),m.stop(),++h,h>=l&&(r.isClosed=!0,r.parentElement.removeChild(r.surface),i())})})},t.prototype.getCapabilities=function(){return new np(this.getFirstTrackOrFail())},t}(),sp=function(){function t(r){this.mediaStream=r}return t.prototype.render=function(r,i,a){return vl(this,void 0,void 0,function(){return Nl(this,function(c){return[2,ip.create(r,this.mediaStream,i,a)]})})},t.create=function(r){return vl(this,void 0,void 0,function(){var i,a;return Nl(this,function(c){switch(c.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return i={audio:!1,video:r},[4,navigator.mediaDevices.getUserMedia(i)];case 1:return a=c.sent(),[2,new t(a)]}})})},t}(),Ou=function(t,r,i,a){function c(l){return l instanceof i?l:new i(function(h){h(l)})}return new(i||(i=Promise))(function(l,h){function m(v){try{y(a.next(v))}catch(C){h(C)}}function x(v){try{y(a.throw(v))}catch(C){h(C)}}function y(v){v.done?l(v.value):c(v.value).then(m,x)}y((a=a.apply(t,r||[])).next())})},Mu=function(t,r){var i={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},a,c,l,h;return h={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(y){return function(v){return x([y,v])}}function x(y){if(a)throw new TypeError("Generator is already executing.");for(;h&&(h=0,y[0]&&(i=0)),i;)try{if(a=1,c&&(l=y[0]&2?c.return:y[0]?c.throw||((l=c.return)&&l.call(c),0):c.next)&&!(l=l.call(c,y[1])).done)return l;switch(c=0,l&&(y=[y[0]&2,l.value]),y[0]){case 0:case 1:l=y;break;case 4:return i.label++,{value:y[1],done:!1};case 5:i.label++,c=y[1],y=[0];continue;case 7:y=i.ops.pop(),i.trys.pop();continue;default:if(l=i.trys,!(l=l.length>0&&l[l.length-1])&&(y[0]===6||y[0]===2)){i=0;continue}if(y[0]===3&&(!l||y[1]>l[0]&&y[1]<l[3])){i.label=y[1];break}if(y[0]===6&&i.label<l[1]){i.label=l[1],l=y;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(y);break}l[2]&&i.ops.pop(),i.trys.pop();continue}y=r.call(t,i)}catch(v){y=[6,v],c=0}finally{a=l=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},ap=function(){function t(){}return t.failIfNotSupported=function(){return Ou(this,void 0,void 0,function(){return Mu(this,function(r){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(r){return Ou(this,void 0,void 0,function(){return Mu(this,function(i){return[2,sp.create(r)]})})},t}(),op=function(t,r,i,a){function c(l){return l instanceof i?l:new i(function(h){h(l)})}return new(i||(i=Promise))(function(l,h){function m(v){try{y(a.next(v))}catch(C){h(C)}}function x(v){try{y(a.throw(v))}catch(C){h(C)}}function y(v){v.done?l(v.value):c(v.value).then(m,x)}y((a=a.apply(t,r||[])).next())})},lp=function(t,r){var i={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},a,c,l,h;return h={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(y){return function(v){return x([y,v])}}function x(y){if(a)throw new TypeError("Generator is already executing.");for(;h&&(h=0,y[0]&&(i=0)),i;)try{if(a=1,c&&(l=y[0]&2?c.return:y[0]?c.throw||((l=c.return)&&l.call(c),0):c.next)&&!(l=l.call(c,y[1])).done)return l;switch(c=0,l&&(y=[y[0]&2,l.value]),y[0]){case 0:case 1:l=y;break;case 4:return i.label++,{value:y[1],done:!1};case 5:i.label++,c=y[1],y=[0];continue;case 7:y=i.ops.pop(),i.trys.pop();continue;default:if(l=i.trys,!(l=l.length>0&&l[l.length-1])&&(y[0]===6||y[0]===2)){i=0;continue}if(y[0]===3&&(!l||y[1]>l[0]&&y[1]<l[3])){i.label=y[1];break}if(y[0]===6&&i.label<l[1]){i.label=l[1],l=y;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(y);break}l[2]&&i.ops.pop(),i.trys.pop();continue}y=r.call(t,i)}catch(v){y=[6,v],c=0}finally{a=l=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},cp=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var r=MediaStreamTrack;return MediaStreamTrack&&r.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var r=Ua.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(r=Ua.insecureContextCameraQueryError()),Promise.reject(r)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var r=location.host.split(":")[0];return r==="127.0.0.1"||r==="localhost"},t.getCamerasFromMediaDevices=function(){return op(this,void 0,void 0,function(){var r,i,a,c,l,h,m;return lp(this,function(x){switch(x.label){case 0:return r=function(y){for(var v=y.getVideoTracks(),C=0,T=v;C<T.length;C++){var A=T[C];A.enabled=!1,A.stop(),y.removeTrack(A)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return i=x.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(a=x.sent(),c=[],l=0,h=a;l<h.length;l++)m=h[l],m.kind==="videoinput"&&c.push({id:m.deviceId,label:m.label});return r(i),[2,c]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(r,i){var a=function(l){for(var h=[],m=0,x=l;m<x.length;m++){var y=x[m];y.kind==="video"&&h.push({id:y.id,label:y.label})}r(h)},c=MediaStreamTrack;c.getSources(a)})},t}(),Zr;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(Zr||(Zr={}));var dp=function(){function t(){this.state=Zr.NOT_STARTED,this.onGoingTransactionNewState=Zr.UNKNOWN}return t.prototype.directTransition=function(r){this.failIfTransitionOngoing(),this.validateTransition(r),this.state=r},t.prototype.startTransition=function(r){return this.failIfTransitionOngoing(),this.validateTransition(r),this.onGoingTransactionNewState=r,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===Zr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var r=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Zr.UNKNOWN,this.directTransition(r)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===Zr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Zr.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Zr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(r){switch(this.state){case Zr.UNKNOWN:throw"Transition from unknown is not allowed";case Zr.NOT_STARTED:this.failIfNewStateIs(r,[Zr.PAUSED]);break;case Zr.SCANNING:break;case Zr.PAUSED:break}},t.prototype.failIfNewStateIs=function(r,i){for(var a=0,c=i;a<c.length;a++){var l=c[a];if(r===l)throw"Cannot transition from ".concat(this.state," to ").concat(r)}},t}(),up=function(){function t(r){this.stateManager=r}return t.prototype.startTransition=function(r){return this.stateManager.startTransition(r)},t.prototype.directTransition=function(r){this.stateManager.directTransition(r)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===Zr.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==Zr.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Zr.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===Zr.PAUSED},t}(),hp=function(){function t(){}return t.create=function(){return new up(new dp)},t}(),fp=function(){var t=function(r,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(a[l]=c[l])},t(r,i)};return function(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");t(r,i);function a(){this.constructor=r}r.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),di=function(t){fp(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.DEFAULT_WIDTH=300,r.DEFAULT_WIDTH_OFFSET=2,r.FILE_SCAN_MIN_HEIGHT=300,r.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,r.MIN_QR_BOX_SIZE=50,r.SHADED_LEFT=1,r.SHADED_RIGHT=2,r.SHADED_TOP=3,r.SHADED_BOTTOM=4,r.SHADED_REGION_ELEMENT_ID="qr-shaded-region",r.VERBOSE=!1,r.BORDER_SHADER_DEFAULT_COLOR="#ffffff",r.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",r}(Bi),gp=function(){function t(r,i){this.logger=i,this.fps=di.SCAN_DEFAULT_FPS,r?(r.fps&&(this.fps=r.fps),this.disableFlip=r.disableFlip===!0,this.qrbox=r.qrbox,this.aspectRatio=r.aspectRatio,this.videoConstraints=r.videoConstraints):this.disableFlip=di.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?nh.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!$i(this.qrbox)},t.create=function(r,i){return new t(r,i)},t}(),Pu=function(){function t(r,i){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(r))throw"HTML Element with id=".concat(r," not found");this.elementId=r,this.verbose=!1;var a;typeof i=="boolean"?this.verbose=i===!0:i&&(a=i,this.verbose=a.verbose===!0,a.experimentalFeatures),this.logger=new rh(this.verbose),this.qrcode=new Jm(this.getSupportedFormats(i),this.getUseBarCodeDetectorIfSupported(a),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=hp.create()}return t.prototype.start=function(r,i,a,c){var l=this;if(!r)throw"cameraIdOrConfig is required";if(!a||typeof a!="function")throw"qrCodeSuccessCallback is required and should be a function.";var h;c?h=c:h=this.verbose?this.logger.log:function(){};var m=gp.create(i,this.logger);this.clearElement();var x=!1;m.videoConstraints&&(m.isMediaStreamConstraintsValid()?x=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var y=x,v=document.getElementById(this.elementId);v.clientWidth?v.clientWidth:di.DEFAULT_WIDTH,v.style.position="relative",this.shouldScan=!0,this.element=v;var C=this,T=this.stateManagerProxy.startTransition(Zr.SCANNING);return new Promise(function(A,D){var _=y?m.videoConstraints:C.createVideoConstraints(r);if(!_){T.cancel(),D("videoConstraints should be defined");return}var M={};(!y||m.aspectRatio)&&(M.aspectRatio=m.aspectRatio);var I={onRenderSurfaceReady:function(j,B){C.setupUi(j,B,m),C.isScanning=!0,C.foreverScan(m,a,h)}};ap.failIfNotSupported().then(function(j){j.create(_).then(function(B){return B.render(l.element,M,I).then(function(Z){C.renderedCamera=Z,T.execute(),A(null)}).catch(function(Z){T.cancel(),D(Z)})}).catch(function(B){T.cancel(),D(Ua.errorGettingUserMedia(B))})}).catch(function(j){T.cancel(),D(Ua.cameraStreamingNotSupported())})})},t.prototype.pause=function(r){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Zr.PAUSED),this.showPausedState(),($i(r)||r!==!0)&&(r=!1),r&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var r=this,i=function(){r.stateManagerProxy.directTransition(Zr.SCANNING),r.hidePausedState()};if(!this.renderedCamera.isPaused()){i();return}this.renderedCamera.resume(function(){i()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var r=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var i=this.stateManagerProxy.startTransition(Zr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var a=function(){if(r.element){var l=document.getElementById(di.SHADED_REGION_ELEMENT_ID);l&&r.element.removeChild(l)}},c=this;return this.renderedCamera.close().then(function(){return c.renderedCamera=null,c.element&&(c.element.removeChild(c.canvasElement),c.canvasElement=null),a(),c.qrRegion&&(c.qrRegion=null),c.context&&(c.context=null),i.execute(),c.hidePausedState(),c.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(r,i){return this.scanFileV2(r,i).then(function(a){return a.decodedText})},t.prototype.scanFileV2=function(r,i){var a=this;if(!r||!(r instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if($i(i)&&(i=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(c,l){a.possiblyCloseLastScanImageFile(),a.clearElement(),a.lastScanImageFile=URL.createObjectURL(r);var h=new Image;h.onload=function(){var m=h.width,x=h.height,y=document.getElementById(a.elementId),v=y.clientWidth?y.clientWidth:di.DEFAULT_WIDTH,C=Math.max(y.clientHeight?y.clientHeight:x,di.FILE_SCAN_MIN_HEIGHT),T=a.computeCanvasDrawConfig(m,x,v,C);if(i){var A=a.createCanvasElement(v,C,"qr-canvas-visible");A.style.display="inline-block",y.appendChild(A);var D=A.getContext("2d");if(!D)throw"Unable to get 2d context from canvas";D.canvas.width=v,D.canvas.height=C,D.drawImage(h,0,0,m,x,T.x,T.y,T.width,T.height)}var _=di.FILE_SCAN_HIDDEN_CANVAS_PADDING,M=Math.max(h.width,T.width),I=Math.max(h.height,T.height),j=M+2*_,B=I+2*_,Z=a.createCanvasElement(j,B);y.appendChild(Z);var Q=Z.getContext("2d");if(!Q)throw"Unable to get 2d context from canvas";Q.canvas.width=j,Q.canvas.height=B,Q.drawImage(h,0,0,m,x,_,_,M,I);try{a.qrcode.decodeRobustlyAsync(Z).then(function(xe){c(Tu.createFromQrcodeResult(xe))}).catch(l)}catch(xe){l("QR code parse error, error = ".concat(xe))}},h.onerror=l,h.onabort=l,h.onstalled=l,h.onsuspend=l,h.src=URL.createObjectURL(r)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return cp.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(r){if(r){if(!nh.isMediaStreamConstraintsValid(r,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(r)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(r){var i=[xt.QR_CODE,xt.AZTEC,xt.CODABAR,xt.CODE_39,xt.CODE_93,xt.CODE_128,xt.DATA_MATRIX,xt.MAXICODE,xt.ITF,xt.EAN_13,xt.EAN_8,xt.PDF_417,xt.RSS_14,xt.RSS_EXPANDED,xt.UPC_A,xt.UPC_E,xt.UPC_EAN_EXTENSION];if(!r||typeof r=="boolean"||!r.formatsToSupport)return i;if(!Array.isArray(r.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(r.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var a=[],c=0,l=r.formatsToSupport;c<l.length;c++){var h=l[c];Ym(h)?a.push(h):this.logger.warn("Invalid format: ".concat(h," passed in config, ignoring."))}if(a.length===0)throw"None of formatsToSupport match supported values.";return a},t.prototype.getUseBarCodeDetectorIfSupported=function(r){if($i(r))return!0;if(!$i(r.useBarCodeDetectorIfSupported))return r.useBarCodeDetectorIfSupported!==!1;if($i(r.experimentalFeatures))return!0;var i=r.experimentalFeatures;return $i(i.useBarCodeDetectorIfSupported)?!0:i.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(r,i,a){var c=this,l=a.qrbox;this.validateQrboxConfig(l);var h=this.toQrdimensions(r,i,l),m=function(y){if(y<di.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(di.MIN_QR_BOX_SIZE,"px.")},x=function(y){return y>r&&(c.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),y=r),y};m(h.width),m(h.height),h.width=x(h.width)},t.prototype.validateQrboxConfig=function(r){if(typeof r!="number"&&typeof r!="function"&&(r.width===void 0||r.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(r,i,a){if(typeof a=="number")return{width:a,height:a};if(typeof a=="function")try{return a(r,i)}catch(c){throw new Error("qrbox config was passed as a function but it failed with unknown error"+c)}return a},t.prototype.setupUi=function(r,i,a){a.isShadedBoxEnabled()&&this.validateQrboxSize(r,i,a);var c=$i(a.qrbox)?{width:r,height:i}:a.qrbox;this.validateQrboxConfig(c);var l=this.toQrdimensions(r,i,c);l.height>i&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var h=a.isShadedBoxEnabled()&&l.height<=i,m={x:0,y:0,width:r,height:i},x=h?this.getShadedRegionBounds(r,i,l):m,y=this.createCanvasElement(x.width,x.height),v={willReadFrequently:!0},C=y.getContext("2d",v);C.canvas.width=x.width,C.canvas.height=x.height,this.element.append(y),h&&this.possiblyInsertShadingElement(this.element,r,i,l),this.createScannerPausedUiElement(this.element),this.qrRegion=x,this.context=C,this.canvasElement=y},t.prototype.createScannerPausedUiElement=function(r){var i=document.createElement("div");i.innerText=Ua.scannerPaused(),i.style.display="none",i.style.position="absolute",i.style.top="0px",i.style.zIndex="1",i.style.background="rgba(9, 9, 9, 0.46)",i.style.color="#FFECEC",i.style.textAlign="center",i.style.width="100%",r.appendChild(i),this.scannerPausedUiElement=i},t.prototype.scanContext=function(r,i){var a=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(c){return r(c.text,Tu.createFromQrcodeResult(c)),a.possiblyUpdateShaders(!0),!0}).catch(function(c){a.possiblyUpdateShaders(!1);var l=Ua.codeParseError(c);return i(l,th.createFrom(l)),!1})},t.prototype.foreverScan=function(r,i,a){var c=this;if(this.shouldScan&&this.renderedCamera){var l=this.renderedCamera.getSurface(),h=l.videoWidth/l.clientWidth,m=l.videoHeight/l.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var x=this.qrRegion.width*h,y=this.qrRegion.height*m,v=this.qrRegion.x*h,C=this.qrRegion.y*m;this.context.drawImage(l,v,C,x,y,0,0,this.qrRegion.width,this.qrRegion.height);var T=function(){c.foreverScanTimeout=setTimeout(function(){c.foreverScan(r,i,a)},c.getTimeoutFps(r.fps))};this.scanContext(i,a).then(function(A){!A&&r.disableFlip!==!0?(c.context.translate(c.context.canvas.width,0),c.context.scale(-1,1),c.scanContext(i,a).finally(function(){T()})):T()}).catch(function(A){c.logger.logError("Error happend while scanning context",A),T()})}},t.prototype.createVideoConstraints=function(r){if(typeof r=="string")return{deviceId:{exact:r}};if(typeof r=="object"){var i="facingMode",a="deviceId",c={user:!0,environment:!0},l="exact",h=function(D){if(D in c)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(D,"'")},m=Object.keys(r);if(m.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(m.length," keys");var x=Object.keys(r)[0];if(x!==i&&x!==a)throw"Only '".concat(i,"' and '").concat(a,"' ")+" are supported for 'cameraIdOrConfig'";if(x===i){var y=r.facingMode;if(typeof y=="string"){if(h(y))return{facingMode:y}}else if(typeof y=="object")if(l in y){if(h(y["".concat(l)]))return{facingMode:{exact:y["".concat(l)]}}}else throw"'facingMode' should be string or object with"+" ".concat(l," as key.");else{var v=typeof y;throw"Invalid type of 'facingMode' = ".concat(v)}}else{var C=r.deviceId;if(typeof C=="string")return{deviceId:C};if(typeof C=="object"){if(l in C)return{deviceId:{exact:C["".concat(l)]}};throw"'deviceId' should be string or object with"+" ".concat(l," as key.")}else{var T=typeof C;throw"Invalid type of 'deviceId' = ".concat(T)}}}var A=typeof r;throw"Invalid type of 'cameraIdOrConfig' = ".concat(A)},t.prototype.computeCanvasDrawConfig=function(r,i,a,c){if(r<=a&&i<=c){var l=(a-r)/2,h=(c-i)/2;return{x:l,y:h,width:r,height:i}}else{var m=r,x=i;return r>a&&(i=a/r*i,r=a),i>c&&(r=c/i*r,i=c),this.logger.log("Image downsampled from "+"".concat(m,"X").concat(x)+" to ".concat(r,"X").concat(i,".")),this.computeCanvasDrawConfig(r,i,a,c)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var r=document.getElementById(this.elementId);r&&(r.innerHTML="")},t.prototype.possiblyUpdateShaders=function(r){this.qrMatch!==r&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(i){i.style.backgroundColor=r?di.BORDER_SHADER_MATCH_COLOR:di.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=r)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(r,i,a){var c=r,l=i,h=document.createElement("canvas");return h.style.width="".concat(c,"px"),h.style.height="".concat(l,"px"),h.style.display="none",h.id=$i(a)?"qr-canvas":a,h},t.prototype.getShadedRegionBounds=function(r,i,a){if(a.width>r||a.height>i)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(r-a.width)/2,y:(i-a.height)/2,width:a.width,height:a.height}},t.prototype.possiblyInsertShadingElement=function(r,i,a,c){if(!(i-c.width<1||a-c.height<1)){var l=document.createElement("div");l.style.position="absolute";var h=(i-c.width)/2,m=(a-c.height)/2;if(l.style.borderLeft="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderRight="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderTop="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderBottom="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),l.style.boxSizing="border-box",l.style.top="0px",l.style.bottom="0px",l.style.left="0px",l.style.right="0px",l.id="".concat(di.SHADED_REGION_ELEMENT_ID),i-c.width<11||a-c.height<11)this.hasBorderShaders=!1;else{var x=5,y=40;this.insertShaderBorders(l,y,x,-x,null,0,!0),this.insertShaderBorders(l,y,x,-x,null,0,!1),this.insertShaderBorders(l,y,x,null,-x,0,!0),this.insertShaderBorders(l,y,x,null,-x,0,!1),this.insertShaderBorders(l,x,y+x,-x,null,-x,!0),this.insertShaderBorders(l,x,y+x,null,-x,-x,!0),this.insertShaderBorders(l,x,y+x,-x,null,-x,!1),this.insertShaderBorders(l,x,y+x,null,-x,-x,!1),this.hasBorderShaders=!0}r.append(l)}},t.prototype.insertShaderBorders=function(r,i,a,c,l,h,m){var x=document.createElement("div");x.style.position="absolute",x.style.backgroundColor=di.BORDER_SHADER_DEFAULT_COLOR,x.style.width="".concat(i,"px"),x.style.height="".concat(a,"px"),c!==null&&(x.style.top="".concat(c,"px")),l!==null&&(x.style.bottom="".concat(l,"px")),m?x.style.left="".concat(h,"px"):x.style.right="".concat(h,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(x),r.appendChild(x)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(r){return 1e3/r},t}(),pd="data:image/svg+xml;base64,",mp=pd+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",pp=pd+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Ru=pd+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",xp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Bu=function(){function t(){}return t.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},t}(),yp=function(){function t(){this.data=Bu.createDefault();var r=localStorage.getItem(t.LOCAL_STORAGE_KEY);r?this.data=JSON.parse(r):this.reset()}return t.prototype.hasCameraPermissions=function(){return this.data.hasPermission},t.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},t.prototype.setHasPermission=function(r){this.data.hasPermission=r,this.flush()},t.prototype.setLastUsedCameraId=function(r){this.data.lastUsedCameraId=r,this.flush()},t.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},t.prototype.reset=function(){this.data=Bu.createDefault(),this.flush()},t.prototype.flush=function(){localStorage.setItem(t.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},t.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",t}(),bp=function(){function t(){this.infoDiv=document.createElement("div")}return t.prototype.renderInto=function(r){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=ju.poweredBy();var i=document.createElement("a");i.innerText="ScanApp",i.href="https://scanapp.org",i.target="new",i.style.color="white",this.infoDiv.appendChild(i);var a=document.createElement("br"),c=document.createElement("br");this.infoDiv.appendChild(a),this.infoDiv.appendChild(c);var l=document.createElement("a");l.innerText=ju.reportIssues(),l.href="https://github.com/mebjas/html5-qrcode/issues",l.target="new",l.style.color="white",this.infoDiv.appendChild(l),r.appendChild(this.infoDiv)},t.prototype.show=function(){this.infoDiv.style.display="block"},t.prototype.hide=function(){this.infoDiv.style.display="none"},t}(),wp=function(){function t(r,i){this.isShowingInfoIcon=!0,this.onTapIn=r,this.onTapOut=i,this.infoIcon=document.createElement("img")}return t.prototype.renderInto=function(r){var i=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Ru,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(a){return i.onHoverIn()},this.infoIcon.onmouseout=function(a){return i.onHoverOut()},this.infoIcon.onclick=function(a){return i.onClick()},r.appendChild(this.infoIcon)},t.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},t.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},t.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=xp,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Ru,this.infoIcon.style.opacity="0.6")},t}(),vp=function(){function t(){var r=this;this.infoDiv=new bp,this.infoIcon=new wp(function(){r.infoDiv.show()},function(){r.infoDiv.hide()})}return t.prototype.renderInto=function(r){this.infoDiv.renderInto(r),this.infoIcon.renderInto(r)},t}(),Np=function(t,r,i,a){function c(l){return l instanceof i?l:new i(function(h){h(l)})}return new(i||(i=Promise))(function(l,h){function m(v){try{y(a.next(v))}catch(C){h(C)}}function x(v){try{y(a.throw(v))}catch(C){h(C)}}function y(v){v.done?l(v.value):c(v.value).then(m,x)}y((a=a.apply(t,r||[])).next())})},Ap=function(t,r){var i={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},a,c,l,h;return h={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(y){return function(v){return x([y,v])}}function x(y){if(a)throw new TypeError("Generator is already executing.");for(;h&&(h=0,y[0]&&(i=0)),i;)try{if(a=1,c&&(l=y[0]&2?c.return:y[0]?c.throw||((l=c.return)&&l.call(c),0):c.next)&&!(l=l.call(c,y[1])).done)return l;switch(c=0,l&&(y=[y[0]&2,l.value]),y[0]){case 0:case 1:l=y;break;case 4:return i.label++,{value:y[1],done:!1};case 5:i.label++,c=y[1],y=[0];continue;case 7:y=i.ops.pop(),i.trys.pop();continue;default:if(l=i.trys,!(l=l.length>0&&l[l.length-1])&&(y[0]===6||y[0]===2)){i=0;continue}if(y[0]===3&&(!l||y[1]>l[0]&&y[1]<l[3])){i.label=y[1];break}if(y[0]===6&&i.label<l[1]){i.label=l[1],l=y;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(y);break}l[2]&&i.ops.pop(),i.trys.pop();continue}y=r.call(t,i)}catch(v){y=[6,v],c=0}finally{a=l=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Fu=function(){function t(){}return t.hasPermissions=function(){return Np(this,void 0,void 0,function(){var r,i,a,c;return Ap(this,function(l){switch(l.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(r=l.sent(),i=0,a=r;i<a.length;i++)if(c=a[i],c.kind==="videoinput"&&c.label)return[2,!0];return[2,!1]}})})},t}(),Rs=function(){function t(r){this.supportedScanTypes=this.validateAndReturnScanTypes(r)}return t.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},t.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},t.prototype.isCameraScanRequired=function(){for(var r=0,i=this.supportedScanTypes;r<i.length;r++){var a=i[r];if(t.isCameraScanType(a))return!0}return!1},t.isCameraScanType=function(r){return r===Ws.SCAN_TYPE_CAMERA},t.isFileScanType=function(r){return r===Ws.SCAN_TYPE_FILE},t.prototype.validateAndReturnScanTypes=function(r){if(!r||r.length===0)return Bi.DEFAULT_SUPPORTED_SCAN_TYPE;var i=Bi.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(r.length>i)throw"Max ".concat(i," values expected for ")+"supportedScanTypes";for(var a=0,c=r;a<c.length;a++){var l=c[a];if(!Bi.DEFAULT_SUPPORTED_SCAN_TYPE.includes(l))throw"Unsupported scan type ".concat(l)}return r},t}(),hi=function(){function t(){}return t.ALL_ELEMENT_CLASS="html5-qrcode-element",t.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",t.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",t.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",t.TORCH_BUTTON_ID="html5-qrcode-button-torch",t.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",t.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",t.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",t.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",t.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",t.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",t}(),ps=function(){function t(){}return t.createElement=function(r,i){var a=document.createElement(r);return a.id=i,a.classList.add(hi.ALL_ELEMENT_CLASS),r==="button"&&a.setAttribute("type","button"),a},t}(),sh=function(t,r,i,a){function c(l){return l instanceof i?l:new i(function(h){h(l)})}return new(i||(i=Promise))(function(l,h){function m(v){try{y(a.next(v))}catch(C){h(C)}}function x(v){try{y(a.throw(v))}catch(C){h(C)}}function y(v){v.done?l(v.value):c(v.value).then(m,x)}y((a=a.apply(t,r||[])).next())})},ah=function(t,r){var i={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},a,c,l,h;return h={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(y){return function(v){return x([y,v])}}function x(y){if(a)throw new TypeError("Generator is already executing.");for(;h&&(h=0,y[0]&&(i=0)),i;)try{if(a=1,c&&(l=y[0]&2?c.return:y[0]?c.throw||((l=c.return)&&l.call(c),0):c.next)&&!(l=l.call(c,y[1])).done)return l;switch(c=0,l&&(y=[y[0]&2,l.value]),y[0]){case 0:case 1:l=y;break;case 4:return i.label++,{value:y[1],done:!1};case 5:i.label++,c=y[1],y=[0];continue;case 7:y=i.ops.pop(),i.trys.pop();continue;default:if(l=i.trys,!(l=l.length>0&&l[l.length-1])&&(y[0]===6||y[0]===2)){i=0;continue}if(y[0]===3&&(!l||y[1]>l[0]&&y[1]<l[3])){i.label=y[1];break}if(y[0]===6&&i.label<l[1]){i.label=l[1],l=y;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(y);break}l[2]&&i.ops.pop(),i.trys.pop();continue}y=r.call(t,i)}catch(v){y=[6,v],c=0}finally{a=l=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Uu=function(){function t(r,i,a){this.isTorchOn=!1,this.torchCapability=r,this.buttonController=i,this.onTorchActionFailureCallback=a}return t.prototype.isTorchEnabled=function(){return this.isTorchOn},t.prototype.flipState=function(){return sh(this,void 0,void 0,function(){var r,i;return ah(this,function(a){switch(a.label){case 0:this.buttonController.disable(),r=!this.isTorchOn,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.torchCapability.apply(r)];case 2:return a.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),r),[3,4];case 3:return i=a.sent(),this.propagateFailure(r,i),this.buttonController.enable(),[3,4];case 4:return[2]}})})},t.prototype.updateUiBasedOnLatestSettings=function(r,i){r===i?(this.buttonController.setText(i?pr.torchOffButton():pr.torchOnButton()),this.isTorchOn=i):this.propagateFailure(i),this.buttonController.enable()},t.prototype.propagateFailure=function(r,i){var a=r?pr.torchOnFailedMessage():pr.torchOffFailedMessage();i&&(a+="; Error = "+i),this.onTorchActionFailureCallback(a)},t.prototype.reset=function(){this.isTorchOn=!1},t}(),Cp=function(){function t(r,i){this.onTorchActionFailureCallback=i,this.torchButton=ps.createElement("button",hi.TORCH_BUTTON_ID),this.torchController=new Uu(r,this,i)}return t.prototype.render=function(r,i){var a=this;this.torchButton.innerText=pr.torchOnButton(),this.torchButton.style.display=i.display,this.torchButton.style.marginLeft=i.marginLeft;var c=this;this.torchButton.addEventListener("click",function(l){return sh(a,void 0,void 0,function(){return ah(this,function(h){switch(h.label){case 0:return[4,c.torchController.flipState()];case 1:return h.sent(),c.torchController.isTorchEnabled()?(c.torchButton.classList.remove(hi.TORCH_BUTTON_CLASS_TORCH_OFF),c.torchButton.classList.add(hi.TORCH_BUTTON_CLASS_TORCH_ON)):(c.torchButton.classList.remove(hi.TORCH_BUTTON_CLASS_TORCH_ON),c.torchButton.classList.add(hi.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),r.appendChild(this.torchButton)},t.prototype.updateTorchCapability=function(r){this.torchController=new Uu(r,this,this.onTorchActionFailureCallback)},t.prototype.getTorchButton=function(){return this.torchButton},t.prototype.hide=function(){this.torchButton.style.display="none"},t.prototype.show=function(){this.torchButton.style.display="inline-block"},t.prototype.disable=function(){this.torchButton.disabled=!0},t.prototype.enable=function(){this.torchButton.disabled=!1},t.prototype.setText=function(r){this.torchButton.innerText=r},t.prototype.reset=function(){this.torchButton.innerText=pr.torchOnButton(),this.torchController.reset()},t.create=function(r,i,a,c){var l=new t(i,c);return l.render(r,a),l},t}(),Sp=function(){function t(r,i,a){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=i?"block":"none",r.appendChild(this.fileBasedScanRegion);var c=document.createElement("label");c.setAttribute("for",this.getFileScanInputId()),c.style.display="inline-block",this.fileBasedScanRegion.appendChild(c),this.fileSelectionButton=ps.createElement("button",hi.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(m){c.click()}),c.append(this.fileSelectionButton),this.fileScanInput=ps.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",c.appendChild(this.fileScanInput);var l=this;this.fileScanInput.addEventListener("change",function(m){if(!(m==null||m.target==null)){var x=m.target;if(!(x.files&&x.files.length===0)){var y=x.files,v=y[0],C=v.name;l.setImageNameToButton(C),a(v)}}});var h=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(h),this.fileBasedScanRegion.addEventListener("dragenter",function(m){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionActiveBorder(),m.stopPropagation(),m.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(m){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionDefaultBorder(),m.stopPropagation(),m.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(m){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionActiveBorder(),m.stopPropagation(),m.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(m){m.stopPropagation(),m.preventDefault(),l.fileBasedScanRegion.style.border=l.fileBasedScanRegionDefaultBorder();var x=m.dataTransfer;if(x){var y=x.files;if(!y||y.length===0)return;for(var v=!1,C=0;C<y.length;++C){var T=y.item(C);if(T){var A=/image.*/;if(T.type.match(A)){v=!0;var D=T.name;l.setImageNameToButton(D),a(T),h.innerText=pr.dragAndDropMessage();break}}}v||(h.innerText=pr.dragAndDropMessageOnlyImages())}})}return t.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},t.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},t.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},t.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},t.prototype.createFileBasedScanRegion=function(){var r=document.createElement("div");return r.style.textAlign="center",r.style.margin="auto",r.style.width="80%",r.style.maxWidth="600px",r.style.border=this.fileBasedScanRegionDefaultBorder(),r.style.padding="10px",r.style.marginBottom="10px",r},t.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},t.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},t.prototype.createDragAndDropMessage=function(){var r=document.createElement("div");return r.innerText=pr.dragAndDropMessage(),r.style.fontWeight="400",r},t.prototype.setImageNameToButton=function(r){var i=20;if(r.length>i){var a=r.substring(0,8),c=r.length,l=r.substring(c-8,c);r="".concat(a,"....").concat(l)}var h=pr.fileSelectionChooseAnother()+" - "+r;this.fileSelectionButton.innerText=h},t.prototype.setInitialValueToButton=function(){var r=pr.fileSelectionChooseImage()+" - "+pr.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=r},t.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},t.create=function(r,i,a){var c=new t(r,i,a);return c},t}(),Ep=function(){function t(r){this.selectElement=ps.createElement("select",hi.CAMERA_SELECTION_SELECT_ID),this.cameras=r,this.options=[]}return t.prototype.render=function(r){var i=document.createElement("span");i.style.marginRight="10px";var a=this.cameras.length;if(a===0)throw new Error("No cameras found");if(a===1)i.style.display="none";else{var c=pr.selectCamera();i.innerText="".concat(c," (").concat(this.cameras.length,")  ")}for(var l=1,h=0,m=this.cameras;h<m.length;h++){var x=m[h],y=x.id,v=x.label==null?y:x.label;(!v||v==="")&&(v=[pr.anonymousCameraPrefix(),l++].join(" "));var C=document.createElement("option");C.value=y,C.innerText=v,this.options.push(C),this.selectElement.appendChild(C)}i.appendChild(this.selectElement),r.appendChild(i)},t.prototype.disable=function(){this.selectElement.disabled=!0},t.prototype.isDisabled=function(){return this.selectElement.disabled===!0},t.prototype.enable=function(){this.selectElement.disabled=!1},t.prototype.getValue=function(){return this.selectElement.value},t.prototype.hasValue=function(r){for(var i=0,a=this.options;i<a.length;i++){var c=a[i];if(c.value===r)return!0}return!1},t.prototype.setValue=function(r){if(!this.hasValue(r))throw new Error("".concat(r," is not present in the camera list."));this.selectElement.value=r},t.prototype.hasSingleItem=function(){return this.cameras.length===1},t.prototype.numCameras=function(){return this.cameras.length},t.create=function(r,i){var a=new t(i);return a.render(r),a},t}(),Ip=function(){function t(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=ps.createElement("input",hi.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return t.prototype.render=function(r,i){this.zoomElementContainer.style.display=i?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",r.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var a=pr.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(a),this.rangeText.style.marginRight="10px";var c=this;this.rangeInput.addEventListener("input",function(){return c.onValueChange()}),this.rangeInput.addEventListener("change",function(){return c.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},t.prototype.onValueChange=function(){var r=pr.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},t.prototype.setValues=function(r,i,a,c){this.rangeInput.min=r.toString(),this.rangeInput.max=i.toString(),this.rangeInput.step=c.toString(),this.rangeInput.value=a.toString(),this.onValueChange()},t.prototype.show=function(){this.zoomElementContainer.style.display="block"},t.prototype.hide=function(){this.zoomElementContainer.style.display="none"},t.prototype.setOnCameraZoomValueChangeCallback=function(r){this.onChangeCallback=r},t.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},t.create=function(r,i){var a=new t;return a.render(r,i),a},t}(),ui;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(ui||(ui={}));function Tp(t){return{fps:t.fps,qrbox:t.qrbox,aspectRatio:t.aspectRatio,disableFlip:t.disableFlip,videoConstraints:t.videoConstraints}}function jp(t,r){return{formatsToSupport:t.formatsToSupport,useBarCodeDetectorIfSupported:t.useBarCodeDetectorIfSupported,experimentalFeatures:t.experimentalFeatures,verbose:r}}var _p=function(){function t(r,i,a){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=r,this.config=this.createConfig(i),this.verbose=a===!0,!document.getElementById(r))throw"HTML Element with id=".concat(r," not found");this.scanTypeSelector=new Rs(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new rh(this.verbose),this.persistedDataManager=new yp,i.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return t.prototype.render=function(r,i){var a=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(l,h){if(r)r(l,h);else{if(a.lastMatchFound===l)return;a.lastMatchFound=l,a.setHeaderMessage(pr.lastMatch(l),ui.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(l,h){i&&i(l,h)};var c=document.getElementById(this.elementId);if(!c)throw"HTML Element with id=".concat(this.elementId," not found");c.innerHTML="",this.createBasicLayout(c),this.html5Qrcode=new Pu(this.getScanRegionId(),jp(this.config,this.verbose))},t.prototype.pause=function(r){($i(r)||r!==!0)&&(r=!1),this.getHtml5QrcodeOrFail().pause(r)},t.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},t.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},t.prototype.clear=function(){var r=this,i=function(){var a=document.getElementById(r.elementId);a&&(a.innerHTML="",r.resetBasicLayout(a))};return this.html5Qrcode?new Promise(function(a,c){if(!r.html5Qrcode){a();return}r.html5Qrcode.isScanning?r.html5Qrcode.stop().then(function(l){if(!r.html5Qrcode){a();return}r.html5Qrcode.clear(),i(),a()}).catch(function(l){r.verbose&&r.logger.logError("Unable to stop qrcode scanner",l),c(l)}):(r.html5Qrcode.clear(),i(),a())}):Promise.resolve()},t.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},t.prototype.applyVideoConstraints=function(r){return this.getHtml5QrcodeOrFail().applyVideoConstraints(r)},t.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},t.prototype.createConfig=function(r){return r?(r.fps||(r.fps=Bi.SCAN_DEFAULT_FPS),r.rememberLastUsedCamera!==!Bi.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(r.rememberLastUsedCamera=Bi.DEFAULT_REMEMBER_LAST_CAMERA_USED),r.supportedScanTypes||(r.supportedScanTypes=Bi.DEFAULT_SUPPORTED_SCAN_TYPE),r):{fps:Bi.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Bi.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Bi.DEFAULT_SUPPORTED_SCAN_TYPE}},t.prototype.createBasicLayout=function(r){r.style.position="relative",r.style.padding="0px",r.style.border="1px solid silver",this.createHeader(r);var i=document.createElement("div"),a=this.getScanRegionId();i.id=a,i.style.width="100%",i.style.minHeight="100px",i.style.textAlign="center",r.appendChild(i),Rs.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var c=document.createElement("div"),l=this.getDashboardId();c.id=l,c.style.width="100%",r.appendChild(c),this.setupInitialDashboard(c)},t.prototype.resetBasicLayout=function(r){r.style.border="none"},t.prototype.setupInitialDashboard=function(r){this.createSection(r),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},t.prototype.createHeader=function(r){var i=document.createElement("div");i.style.textAlign="left",i.style.margin="0px",r.appendChild(i);var a=new vp;a.renderInto(i);var c=document.createElement("div");c.id=this.getHeaderMessageContainerId(),c.style.display="none",c.style.textAlign="center",c.style.fontSize="14px",c.style.padding="2px 10px",c.style.margin="4px",c.style.borderTop="1px solid #f6f6f6",i.appendChild(c)},t.prototype.createSection=function(r){var i=document.createElement("div");i.id=this.getDashboardSectionId(),i.style.width="100%",i.style.padding="10px 0px 10px 0px",i.style.textAlign="left",r.appendChild(i)},t.prototype.createCameraListUi=function(r,i,a){var c=this;c.showHideScanTypeSwapLink(!1),c.setHeaderMessage(pr.cameraPermissionRequesting());var l=function(){a||c.createPermissionButton(r,i)};Pu.getCameras().then(function(h){c.persistedDataManager.setHasPermission(!0),c.showHideScanTypeSwapLink(!0),c.resetHeaderMessage(),h&&h.length>0?(r.removeChild(i),c.renderCameraSelection(h)):(c.setHeaderMessage(pr.noCameraFound(),ui.STATUS_WARNING),l())}).catch(function(h){c.persistedDataManager.setHasPermission(!1),a?a.disabled=!1:l(),c.setHeaderMessage(h,ui.STATUS_WARNING),c.showHideScanTypeSwapLink(!0)})},t.prototype.createPermissionButton=function(r,i){var a=this,c=ps.createElement("button",this.getCameraPermissionButtonId());c.innerText=pr.cameraPermissionTitle(),c.addEventListener("click",function(){c.disabled=!0,a.createCameraListUi(r,i,c)}),i.appendChild(c)},t.prototype.createPermissionsUi=function(r,i){var a=this;if(Rs.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Fu.hasPermissions().then(function(c){c?a.createCameraListUi(r,i):(a.persistedDataManager.setHasPermission(!1),a.createPermissionButton(r,i))}).catch(function(c){a.persistedDataManager.setHasPermission(!1),a.createPermissionButton(r,i)});return}this.createPermissionButton(r,i)},t.prototype.createSectionControlPanel=function(){var r=document.getElementById(this.getDashboardSectionId()),i=document.createElement("div");r.appendChild(i);var a=document.createElement("div");a.id=this.getDashboardSectionCameraScanRegionId(),a.style.display=Rs.isCameraScanType(this.currentScanType)?"block":"none",i.appendChild(a);var c=document.createElement("div");c.style.textAlign="center",a.appendChild(c),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(a,c),this.renderFileScanUi(i)},t.prototype.renderFileScanUi=function(r){var i=Rs.isFileScanType(this.currentScanType),a=this,c=function(l){if(!a.html5Qrcode)throw"html5Qrcode not defined";Rs.isFileScanType(a.currentScanType)&&(a.setHeaderMessage(pr.loadingImage()),a.html5Qrcode.scanFileV2(l,!0).then(function(h){a.resetHeaderMessage(),a.qrCodeSuccessCallback(h.decodedText,h)}).catch(function(h){a.setHeaderMessage(h,ui.STATUS_WARNING),a.qrCodeErrorCallback(h,th.createFrom(h))}))};this.fileSelectionUi=Sp.create(r,i,c)},t.prototype.renderCameraSelection=function(r){var i=this,a=this,c=document.getElementById(this.getDashboardSectionCameraScanRegionId());c.style.textAlign="center";var l=Ip.create(c,!1),h=function(_){var M=_.zoomFeature();if(M.isSupported()){l.setOnCameraZoomValueChangeCallback(function(j){M.apply(j)});var I=1;i.config.defaultZoomValueIfSupported&&(I=i.config.defaultZoomValueIfSupported),I=Xm(I,M.min(),M.max()),l.setValues(M.min(),M.max(),I,M.step()),l.show()}},m=Ep.create(c,r),x=document.createElement("span"),y=ps.createElement("button",hi.CAMERA_START_BUTTON_ID);y.innerText=pr.scanButtonStartScanningText(),x.appendChild(y);var v=ps.createElement("button",hi.CAMERA_STOP_BUTTON_ID);v.innerText=pr.scanButtonStopScanningText(),v.style.display="none",v.disabled=!0,x.appendChild(v);var C,T=function(_){if(!_.torchFeature().isSupported()){C&&C.hide();return}C?C.updateTorchCapability(_.torchFeature()):C=Cp.create(x,_.torchFeature(),{display:"none",marginLeft:"5px"},function(M){a.setHeaderMessage(M,ui.STATUS_WARNING)}),C.show()};c.appendChild(x);var A=function(_){_||(y.style.display="none"),y.innerText=pr.scanButtonStartScanningText(),y.style.opacity="1",y.disabled=!1,_&&(y.style.display="inline-block")};if(y.addEventListener("click",function(_){y.innerText=pr.scanButtonScanningStarting(),m.disable(),y.disabled=!0,y.style.opacity="0.5",i.scanTypeSelector.hasMoreThanOneScanType()&&a.showHideScanTypeSwapLink(!1),a.resetHeaderMessage();var M=m.getValue();a.persistedDataManager.setLastUsedCameraId(M),a.html5Qrcode.start(M,Tp(a.config),a.qrCodeSuccessCallback,a.qrCodeErrorCallback).then(function(I){v.disabled=!1,v.style.display="inline-block",A(!1);var j=a.html5Qrcode.getRunningTrackCameraCapabilities();i.config.showTorchButtonIfSupported===!0&&T(j),i.config.showZoomSliderIfSupported===!0&&h(j)}).catch(function(I){a.showHideScanTypeSwapLink(!0),m.enable(),A(!0),a.setHeaderMessage(I,ui.STATUS_WARNING)})}),m.hasSingleItem()&&y.click(),v.addEventListener("click",function(_){if(!a.html5Qrcode)throw"html5Qrcode not defined";v.disabled=!0,a.html5Qrcode.stop().then(function(M){i.scanTypeSelector.hasMoreThanOneScanType()&&a.showHideScanTypeSwapLink(!0),m.enable(),y.disabled=!1,v.style.display="none",y.style.display="inline-block",C&&(C.reset(),C.hide()),l.removeOnCameraZoomValueChangeCallback(),l.hide(),a.insertCameraScanImageToScanRegion()}).catch(function(M){v.disabled=!1,a.setHeaderMessage(M,ui.STATUS_WARNING)})}),a.persistedDataManager.getLastUsedCameraId()){var D=a.persistedDataManager.getLastUsedCameraId();m.hasValue(D)?(m.setValue(D),y.click()):a.persistedDataManager.resetLastUsedCameraId()}},t.prototype.createSectionSwap=function(){var r=this,i=pr.textIfCameraScanSelected(),a=pr.textIfFileScanSelected(),c=document.getElementById(this.getDashboardSectionId()),l=document.createElement("div");l.style.textAlign="center";var h=ps.createElement("span",this.getDashboardSectionSwapLinkId());h.style.textDecoration="underline",h.style.cursor="pointer",h.innerText=Rs.isCameraScanType(this.currentScanType)?i:a,h.addEventListener("click",function(){if(!r.sectionSwapAllowed){r.verbose&&r.logger.logError("Section swap called when not allowed");return}r.resetHeaderMessage(),r.fileSelectionUi.resetValue(),r.sectionSwapAllowed=!1,Rs.isCameraScanType(r.currentScanType)?(r.clearScanRegion(),r.getCameraScanRegion().style.display="none",r.fileSelectionUi.show(),h.innerText=a,r.currentScanType=Ws.SCAN_TYPE_FILE,r.insertFileScanImageToScanRegion()):(r.clearScanRegion(),r.getCameraScanRegion().style.display="block",r.fileSelectionUi.hide(),h.innerText=i,r.currentScanType=Ws.SCAN_TYPE_CAMERA,r.insertCameraScanImageToScanRegion(),r.startCameraScanIfPermissionExistsOnSwap()),r.sectionSwapAllowed=!0}),l.appendChild(h),c.appendChild(l)},t.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var r=this,i=this;if(this.persistedDataManager.hasCameraPermissions()){Fu.hasPermissions().then(function(a){if(a){var c=document.getElementById(i.getCameraPermissionButtonId());if(!c)throw r.logger.logError("Permission button not found, fail;"),"Permission button not found";c.click()}else i.persistedDataManager.setHasPermission(!1)}).catch(function(a){i.persistedDataManager.setHasPermission(!1)});return}},t.prototype.resetHeaderMessage=function(){var r=document.getElementById(this.getHeaderMessageContainerId());r.style.display="none"},t.prototype.setHeaderMessage=function(r,i){i||(i=ui.STATUS_DEFAULT);var a=this.getHeaderMessageDiv();switch(a.innerText=r,a.style.display="block",i){case ui.STATUS_SUCCESS:a.style.background="rgba(106, 175, 80, 0.26)",a.style.color="#477735";break;case ui.STATUS_WARNING:a.style.background="rgba(203, 36, 49, 0.14)",a.style.color="#cb2431";break;case ui.STATUS_DEFAULT:default:a.style.background="rgba(0, 0, 0, 0)",a.style.color="rgb(17, 17, 17)";break}},t.prototype.showHideScanTypeSwapLink=function(r){this.scanTypeSelector.hasMoreThanOneScanType()&&(r!==!0&&(r=!1),this.sectionSwapAllowed=r,this.getDashboardSectionSwapLink().style.display=r?"inline-block":"none")},t.prototype.insertCameraScanImageToScanRegion=function(){var r=this,i=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){i.innerHTML="<br>",i.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(a){i.innerHTML="<br>",i.appendChild(r.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=mp,this.cameraScanImage.alt=pr.cameraScanAltText()},t.prototype.insertFileScanImageToScanRegion=function(){var r=this,i=document.getElementById(this.getScanRegionId());if(this.fileScanImage){i.innerHTML="<br>",i.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(a){i.innerHTML="<br>",i.appendChild(r.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=pp,this.fileScanImage.alt=pr.fileScanAltText()},t.prototype.clearScanRegion=function(){var r=document.getElementById(this.getScanRegionId());r.innerHTML=""},t.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},t.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},t.prototype.getDashboardSectionSwapLinkId=function(){return hi.SCAN_TYPE_CHANGE_ANCHOR_ID},t.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},t.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},t.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},t.prototype.getCameraPermissionButtonId=function(){return hi.CAMERA_PERMISSION_BUTTON_ID},t.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},t.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},t.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},t}();const Lp=()=>{const t=Ca(),[r,i]=ve.useState(null),[a,c]=ve.useState(!1),[l,h]=ve.useState([]),{validateTicket:m,recordTicketScan:x,validateGuestlist:y,recordGuestlistScan:v}=bs(),C=ve.useRef(null),T=ve.useRef(null),A=ve.useRef(null),D=ve.useRef(""),_=ve.useRef(!1);ve.useEffect(()=>{if(T.current)return C.current=new _p("qr-reader",{fps:10,qrbox:{width:250,height:250},aspectRatio:1},!1),C.current.render(M,I),()=>{C.current&&C.current.clear(),A.current&&clearTimeout(A.current)}},[]);const M=async B=>{if(D.current===B){console.log("🚫 Duplicate QR code detected, ignoring");return}if(_.current||a){console.log("🚫 Already processing, ignoring scan");return}_.current=!0,c(!0),D.current=B;try{console.log("🔍 Raw QR code data:",B);const Z=JSON.parse(B);console.log("🔍 Parsed QR data:",Z);let Q;if(Z.type==="guestlist"){if(console.log("🔍 Processing guestlist QR code"),Q=await y(Z.guestlistId,"entry"),console.log("🔍 Guestlist validation result:",Q),Q.isValid){await v({guestlistId:Z.guestlistId,eventId:Q.eventId||"",scanType:"entry",location:"",notes:"",scannedBy:"admin"});const{data:xe}=await Ut.from("guestlists").select("remaining_scans").eq("id",Z.guestlistId).single(),$=(xe==null?void 0:xe.remaining_scans)||0,ie=$===1?"1 ticket remaining":`${$} tickets remaining`,ce={...Q,message:ie},De={...ce,scanType:"entry",timestamp:new Date().toISOString()};h(Y=>[De,...Y.slice(0,9)]),i(ce)}}else if(console.log("🔍 Processing regular ticket QR code"),Q=await m(Z.orderId,Z.ticketTierId,Z.customer,"entry"),console.log("🔍 Ticket validation result:",Q),Q.isValid){await x({orderId:Z.orderId,ticketTierId:Z.ticketTierId,customerEmail:Z.customer,eventId:Q.eventId||"",scanType:"entry",location:"",notes:""});const xe={...Q,scanType:"entry",timestamp:new Date().toISOString()};h($=>[xe,...$.slice(0,9)])}r||i(Q),A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{i(null)},3e3)}catch(Z){console.error("Scan error:",Z),i({isValid:!1,message:"Invalid QR code format",orderStatus:"unknown",eventDate:"unknown",customerName:"unknown",customerEmail:"unknown"}),A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{i(null)},1e3)}finally{c(!1),_.current=!1,setTimeout(()=>{D.current=""},1e3)}},I=B=>{console.error("QR Scanner error:",B)},j=()=>{A.current&&clearTimeout(A.current),i(null)};return o.jsx("div",{className:"min-h-screen bg-gray-50 p-2 sm:p-4",children:o.jsxs("div",{className:"max-w-2xl mx-auto",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6 text-center",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Ticket Scanner"}),o.jsx("p",{className:"text-gray-600 text-lg",children:"Scan QR codes to validate tickets and record entry"})]}),o.jsxs("button",{onClick:()=>t("/admin/dashboard"),className:"flex items-center gap-2 px-6 py-3 text-gray-700 bg-gray-100 rounded-xl hover:bg-gray-200 transition-colors mx-auto text-lg font-medium",children:[o.jsx(U1,{className:"h-5 w-5"}),"Back to Dashboard"]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6 text-center",children:"QR Code Scanner"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{id:"qr-reader",ref:T,className:"w-full max-w-sm mx-auto"}),o.jsxs("div",{className:"text-center mt-6 space-y-2",children:[o.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"📱 Position QR code within the frame"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Hold steady for best results"})]})]})]}),a&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Processing ticket..."}),o.jsx("p",{className:"text-sm text-gray-600",children:"Please wait"})]})}),r&&!a&&o.jsx(nd,{children:o.jsx(qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center z-50 cursor-pointer",onClick:j,children:o.jsxs(qe.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:`p-8 rounded-2xl border-2 max-w-lg w-full mx-4 text-center ${r.isValid?"border-green-300 bg-white shadow-green-100":"border-red-300 bg-white shadow-red-100"} shadow-2xl`,onClick:B=>B.stopPropagation(),children:[o.jsx("div",{className:"mb-6",children:r.isValid?o.jsx(Zn,{className:"h-20 w-20 text-green-500 mx-auto"}):o.jsx(Ao,{className:"h-20 w-20 text-red-500 mx-auto"})}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:`text-3xl font-bold mb-2 ${r.isValid?"text-green-800":"text-red-800"}`,children:r.isValid?"VALID TICKET":"INVALID TICKET"}),o.jsx("p",{className:`text-lg ${r.isValid?"text-green-700":"text-red-700"}`,children:r.message}),r.message.includes("already scanned")&&o.jsx("p",{className:"text-orange-600 mt-2 font-medium",children:"⚠️ Already Scanned for Entry"})]}),o.jsxs("div",{className:"space-y-4 text-left bg-gray-50 p-4 rounded-xl",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3",children:[o.jsx(g0,{className:"h-5 w-5 text-gray-600"}),o.jsx("span",{className:"font-semibold text-lg text-gray-900",children:r.customerName})]}),o.jsxs("div",{className:"flex items-center justify-center gap-3",children:[o.jsx(_n,{className:"h-5 w-5 text-gray-600"}),o.jsx("span",{className:"text-gray-700",children:r.eventDate&&r.eventDate!=="unknown"?new Date(r.eventDate).toLocaleDateString():"Unknown Date"})]}),r.eventTitle&&o.jsxs("div",{className:"flex items-center justify-center gap-3",children:[o.jsx(Gs,{className:"h-5 w-5 text-gray-600"}),o.jsx("span",{className:"font-medium text-gray-900",children:r.eventTitle})]}),r.ticketTierName&&o.jsxs("div",{className:"flex items-center justify-center gap-3",children:[o.jsx(Xa,{className:"h-5 w-5 text-gray-600"}),o.jsx("span",{className:"text-gray-700",children:r.ticketTierName})]})]}),o.jsx("p",{className:"text-sm text-gray-500 mt-6",children:"Tap anywhere to close"})]})})}),l.length>0&&o.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mt-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6 text-center",children:"Recent Scans"}),o.jsx("div",{className:"space-y-4",children:l.map((B,Z)=>o.jsxs("div",{className:`p-4 rounded-xl border-2 ${B.isValid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[o.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[B.isValid?o.jsx(Zn,{className:"h-6 w-6 text-green-600 flex-shrink-0"}):o.jsx(Ao,{className:"h-6 w-6 text-red-600 flex-shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:`font-semibold text-lg ${B.isValid?"text-green-800":"text-red-800"}`,children:B.customerName}),o.jsx("p",{className:"text-gray-600",children:B.customerEmail})]})]}),o.jsxs("div",{className:"bg-white p-3 rounded-lg",children:[o.jsx("p",{className:"font-medium text-gray-900 mb-1",children:B.eventTitle||"Unknown Event"}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Entry • ",B.timestamp?new Date(B.timestamp).toLocaleTimeString():B.eventDate&&B.eventDate!=="unknown"?new Date(B.eventDate).toLocaleDateString():"Unknown Date"]})]})]},Z))})]})]})})},kp=({event:t,onClose:r,onSuccess:i,onManageGuestlists:a})=>{const[c,l]=ve.useState({leadName:"",leadEmail:"",leadPhone:"",totalTickets:1,notes:""}),[h,m]=ve.useState(!1),[x,y]=ve.useState(null),v=async T=>{if(T.preventDefault(),!c.leadName||!c.leadEmail||c.totalTickets<1){y("Please fill in all required fields and ensure at least 1 ticket.");return}m(!0),y(null);try{const A=await fetch("/api/create-guestlist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventId:t.id,...c})});if(!A.ok){const _=await A.json();throw new Error(_.error||"Failed to create guestlist")}const D=await A.json();i(D.guestlist)}catch(A){y(A instanceof Error?A.message:"An error occurred")}finally{m(!1)}},C=(T,A)=>{l(D=>({...D,[T]:A}))};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs(qe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsx("div",{className:"p-6 border-b",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create Guestlist"}),o.jsx("p",{className:"text-gray-600",children:t.title})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[a&&o.jsx("button",{onClick:a,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium",children:"Manage Guestlists"}),o.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:o.jsx(Zs,{className:"h-6 w-6"})})]})]})}),o.jsxs("form",{onSubmit:v,className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[o.jsx(pn,{className:"h-5 w-5"}),"Group Leader Information"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lead Name *"}),o.jsx("input",{type:"text",value:c.leadName,onChange:T=>C("leadName",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., John Smith",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lead Email *"}),o.jsx("input",{type:"email",value:c.leadEmail,onChange:T=>C("leadEmail",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"john@example.com",required:!0})]})]}),o.jsxs("div",{className:"mt-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lead Phone (Optional)"}),o.jsx("input",{type:"tel",value:c.leadPhone,onChange:T=>C("leadPhone",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+44 123 456 7890"})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[o.jsx(xl,{className:"h-5 w-5"}),"Ticket Details"]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of Tickets *"}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("button",{type:"button",onClick:()=>C("totalTickets",Math.max(1,c.totalTickets-1)),className:"w-10 h-10 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 disabled:opacity-50",disabled:c.totalTickets<=1,children:"-"}),o.jsx("span",{className:"text-2xl font-bold text-gray-900 min-w-[3rem] text-center",children:c.totalTickets}),o.jsx("button",{type:"button",onClick:()=>C("totalTickets",c.totalTickets+1),className:"w-10 h-10 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50",children:"+"})]}),o.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["This will create one QR code that can be scanned ",c.totalTickets," times for entry."]})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[o.jsx(xl,{className:"h-5 w-5"}),"Additional Notes"]}),o.jsx("textarea",{value:c.notes,onChange:T=>C("notes",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"e.g., VIP table, special dietary requirements, arrival time..."})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Summary"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Event:"}),o.jsx("span",{className:"font-medium",children:t.title})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Group Leader:"}),o.jsx("span",{className:"font-medium",children:c.leadName||"Not specified"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Contact:"}),o.jsx("span",{className:"font-medium",children:c.leadEmail||"Not specified"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Total Tickets:"}),o.jsx("span",{className:"font-medium",children:c.totalTickets})]}),c.notes&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Notes:"}),o.jsx("span",{className:"font-medium text-gray-600",children:c.notes})]})]})]}),x&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:o.jsx("p",{className:"text-red-800",children:x})}),o.jsx("button",{type:"submit",disabled:h,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:h?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),o.jsx("span",{children:"Creating Guestlist..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(id,{className:"h-5 w-5"}),o.jsx("span",{children:"Create Guestlist & Send QR Code"})]})}),o.jsxs("div",{className:"text-center text-sm text-gray-500",children:[o.jsx("p",{children:"This will create a guestlist and automatically send a QR code to the group leader."}),o.jsxs("p",{children:["The QR code can be scanned ",c.totalTickets," times for entry."]})]})]})]})})},Dp=({event:t,onClose:r,onCreateNew:i})=>{const[a,c]=ve.useState([]),[l,h]=ve.useState(!0);ve.useEffect(()=>{m()},[t.id]);const m=async()=>{try{console.log("🔍 Fetching guestlists for event:",t.id);const T=await fetch(`/api/guestlists?eventId=${t.id}`);if(console.log("📡 Response status:",T.status),!T.ok)throw new Error("Failed to fetch guestlists");const A=await T.json();console.log("📊 Response data:",A),c(A.guestlists||[])}catch(T){console.error("❌ Error fetching guestlists:",T)}finally{h(!1)}},x=async T=>{try{if(!(await fetch("/api/resend-guestlist-qr",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guestlistId:T})})).ok)throw new Error("Failed to resend QR code");alert("QR code resent successfully!")}catch(A){alert(A instanceof Error?A.message:"Failed to resend QR code")}},y=async T=>{if(confirm("Are you sure you want to delete this guestlist? This action cannot be undone."))try{if(!(await fetch(`/api/guestlists/${T}`,{method:"DELETE"})).ok)throw new Error("Failed to delete guestlist");c(D=>D.filter(_=>_.id!==T))}catch(A){alert(A instanceof Error?A.message:"Failed to delete guestlist")}},v=()=>a.reduce((T,A)=>T+A.totalTickets,0),C=()=>a.reduce((T,A)=>T+(A.totalTickets-A.remainingScans),0);return l?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-lg p-8 text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-lg font-medium text-gray-700",children:"Loading guestlists..."})]})}):o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs(qe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsx("div",{className:"p-6 border-b",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Guestlist Management"}),o.jsx("p",{className:"text-gray-600",children:t.title})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[i&&o.jsx("button",{onClick:i,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"Create New Guestlist"}),o.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:o.jsx(Zs,{className:"h-6 w-6"})})]})]})}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(pn,{className:"h-8 w-8 text-blue-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total Guestlists"}),o.jsx("p",{className:"text-2xl font-bold text-blue-900",children:a.length})]})]})}),o.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(xl,{className:"h-8 w-8 text-green-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Total Tickets"}),o.jsx("p",{className:"text-2xl font-bold text-green-900",children:v()})]})]})}),o.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(_n,{className:"h-8 w-8 text-orange-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-orange-600 font-medium",children:"Tickets Used"}),o.jsx("p",{className:"text-2xl font-bold text-orange-900",children:C()})]})]})})]}),a.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(pn,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No guestlists yet"}),o.jsx("p",{className:"text-gray-500",children:"Create your first guestlist to get started."})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Group Leader"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tickets"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(T=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:T.leadName}),T.notes&&o.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:T.notes})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"text-sm text-gray-900",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(sd,{className:"h-4 w-4 text-gray-400"}),T.leadEmail]}),T.leadPhone&&o.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[o.jsx(d0,{className:"h-4 w-4 text-gray-400"}),T.leadPhone]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"text-sm text-gray-900",children:[o.jsx("div",{className:"font-medium",children:T.totalTickets}),o.jsxs("div",{className:"text-gray-500",children:[T.remainingScans," remaining"]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${T.remainingScans===0?"bg-red-100 text-red-800":T.remainingScans<T.totalTickets?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:T.remainingScans===0?"All Used":T.remainingScans<T.totalTickets?"Partially Used":"Unused"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(T.createdAt).toLocaleDateString()}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:()=>x(T.id),className:"text-blue-600 hover:text-blue-900 flex items-center gap-1",title:"Resend QR Code",children:[o.jsx(id,{className:"h-4 w-4"}),"Resend"]}),o.jsxs("button",{onClick:()=>y(T.id),className:"text-red-600 hover:text-red-900 flex items-center gap-1",title:"Delete Guestlist",children:[o.jsx(Sc,{className:"h-4 w-4"}),"Delete"]})]})})]},T.id))})]})})]})]})})},wa=({filename:t,data:r,headers:i})=>{const a=[i.join(","),...r.map(m=>i.map(x=>{const y=m[x];return typeof y=="string"&&(y.includes(",")||y.includes('"'))?`"${y.replace(/"/g,'""')}"`:y}).join(","))].join(`
`),c=new Blob([a],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),h=URL.createObjectURL(c);l.setAttribute("href",h),l.setAttribute("download",`${t}.csv`),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)},Op=(t,r,i)=>{const a=`customer-data-${i}-${new Date().toISOString().split("T")[0]}`,c=t.filter(v=>{const C=new Date(v.createdAt),T=new Date;return T.setDate(T.getDate()-(i==="7d"?7:i==="30d"?30:90)),C>=T}),l=c.map(v=>{var A;const C=r.find(D=>D.id===v.eventId);return((A=v.tickets)==null?void 0:A.map(D=>{var M,I;const _=(M=C==null?void 0:C.ticketTiers)==null?void 0:M.find(j=>j.id===D.ticketTierId);return{"Customer Name":v.customerName||"N/A","Customer Email":v.customerEmail||"N/A","Order ID":((I=v.id)==null?void 0:I.slice(0,8))||"N/A","Event Title":(C==null?void 0:C.title)||"Unknown Event","Event Date":(C==null?void 0:C.date)||"N/A","Event Venue":(C==null?void 0:C.venue)||"N/A","Ticket Tier":(_==null?void 0:_.name)||"Unknown Tier","Ticket Price":_?`£${(_.price/100).toFixed(2)}`:"N/A",Quantity:D.quantity||0,"Total Price":`£${((D.totalPrice||0)/100).toFixed(2)}`,"Order Status":v.status||"N/A","Order Date":new Date(v.createdAt).toLocaleDateString(),"Order Time":new Date(v.createdAt).toLocaleTimeString(),Currency:v.currency||"gbp","Stripe Payment ID":v.stripePaymentIntentId||"N/A"}}))||[]}).flat();if(l.length>0){const v=["Customer Name","Customer Email","Order ID","Event Title","Event Date","Event Venue","Ticket Tier","Ticket Price","Quantity","Total Price","Order Status","Order Date","Order Time","Currency","Stripe Payment ID"];wa({filename:`${a}-purchases`,data:l,headers:v})}const h=c.reduce((v,C)=>{var D;const T=C.customerEmail||"Unknown";v[T]||(v[T]={"Customer Email":T,"Customer Name":C.customerName||"N/A","Total Orders":0,"Total Spent":0,"Total Tickets":0,"Events Attended":new Set,"First Order":new Date(C.createdAt),"Last Order":new Date(C.createdAt),"Favorite Event":"","Most Expensive Order":0}),v[T]["Total Orders"]++,v[T]["Total Spent"]+=C.totalAmount||0,v[T]["Total Tickets"]+=((D=C.tickets)==null?void 0:D.reduce((_,M)=>_+(M.quantity||0),0))||0;const A=r.find(_=>_.id===C.eventId);return A&&v[T]["Events Attended"].add(A.title),new Date(C.createdAt)<v[T]["First Order"]&&(v[T]["First Order"]=new Date(C.createdAt)),new Date(C.createdAt)>v[T]["Last Order"]&&(v[T]["Last Order"]=new Date(C.createdAt)),(C.totalAmount||0)>v[T]["Most Expensive Order"]&&(v[T]["Most Expensive Order"]=C.totalAmount||0),v},{}),m=Object.values(h).map(v=>({...v,"Events Attended":Array.from(v["Events Attended"]).join(", "),"First Order":v["First Order"].toLocaleDateString(),"Last Order":v["Last Order"].toLocaleDateString(),"Total Spent":`£${(v["Total Spent"]/100).toFixed(2)}`,"Most Expensive Order":`£${(v["Most Expensive Order"]/100).toFixed(2)}`}));if(m.length>0){const v=["Customer Email","Customer Name","Total Orders","Total Spent","Total Tickets","Events Attended","First Order","Last Order","Favorite Event","Most Expensive Order"];wa({filename:`${a}-summary`,data:m,headers:v})}const x=c.map(v=>{var M,I,j;const C=r.find(B=>B.id===v.eventId),T=new Date(v.createdAt),A=T.toLocaleDateString("en-GB",{weekday:"long"}),D=T.getHours(),_=D<12?"Morning":D<17?"Afternoon":"Evening";return{"Customer Email":v.customerEmail||"N/A","Customer Name":v.customerName||"N/A","Order ID":((M=v.id)==null?void 0:M.slice(0,8))||"N/A","Event Title":(C==null?void 0:C.title)||"Unknown Event","Event Category":((I=C==null?void 0:C.tags)==null?void 0:I.join(", "))||"N/A","Day of Week":A,"Time of Day":_,"Hour of Day":D,"Order Amount":`£${((v.totalAmount||0)/100).toFixed(2)}`,"Ticket Count":((j=v.tickets)==null?void 0:j.reduce((B,Z)=>B+(Z.quantity||0),0))||0,"Order Status":v.status||"N/A","Order Date":T.toLocaleDateString(),"Days Until Event":(C!=null&&C.date,"N/A")}});if(x.length>0){const v=["Customer Email","Customer Name","Order ID","Event Title","Event Category","Day of Week","Time of Day","Hour of Day","Order Amount","Ticket Count","Order Status","Order Date","Days Until Event"];wa({filename:`${a}-behavior`,data:x,headers:v})}const y=m.filter(v=>parseFloat(v["Total Spent"].replace("£",""))>=100).sort((v,C)=>parseFloat(C["Total Spent"].replace("£",""))-parseFloat(v["Total Spent"].replace("£","")));if(y.length>0){const v=["Customer Email","Customer Name","Total Spent","Total Orders","Total Tickets","Events Attended","First Order","Last Order","Customer Value Tier"],C=y.map(T=>{const A=parseFloat(T["Total Spent"].replace("£",""));let D="Bronze";return A>=500?D="Platinum":A>=300?D="Gold":A>=150&&(D="Silver"),{...T,"Customer Value Tier":D}});wa({filename:`${a}-high-value-customers`,data:C,headers:v})}},Mp=(t,r,i)=>{const a=`event-${t.title.replace(/[^a-z0-9]/gi,"-").toLowerCase()}-${i}-${new Date().toISOString().split("T")[0]}`,c=r.filter(h=>h.eventId===t.id),l=[{Event:t.title,Date:t.date,Venue:t.venue,"Total Revenue":`£${(c.reduce((h,m)=>h+(m.totalAmount||0),0)/100).toFixed(2)}`,"Total Orders":c.length,"Total Tickets":c.reduce((h,m)=>{var x;return h+(((x=m.tickets)==null?void 0:x.reduce((y,v)=>y+(v.quantity||0),0))||0)},0),Period:i}];if(wa({filename:`${a}-overview`,data:l,headers:["Event","Date","Venue","Total Revenue","Total Orders","Total Tickets","Period"]}),c.length>0){const h=c.map(m=>{var x,y;return{"Order ID":((x=m.id)==null?void 0:x.slice(0,8))||"N/A","Customer Name":m.customerName||"N/A","Customer Email":m.customerEmail||"N/A",Amount:`£${((m.totalAmount||0)/100).toFixed(2)}`,Status:m.status||"N/A",Date:new Date(m.createdAt).toLocaleDateString(),Tickets:((y=m.tickets)==null?void 0:y.reduce((v,C)=>v+(C.quantity||0),0))||0}});wa({filename:`${a}-orders`,data:h,headers:["Order ID","Customer Name","Customer Email","Amount","Status","Date","Tickets"]})}if(t.ticketTiers&&t.ticketTiers.length>0){const h=t.ticketTiers.map(m=>{const x=c.filter(C=>{var T;return(T=C.tickets)==null?void 0:T.some(A=>A.ticketTierId===m.id)}),y=x.reduce((C,T)=>{var D;const A=((D=T.tickets)==null?void 0:D.filter(_=>_.ticketTierId===m.id))||[];return C+A.reduce((_,M)=>_+(M.totalPrice||0),0)},0),v=x.reduce((C,T)=>{var D;const A=((D=T.tickets)==null?void 0:D.filter(_=>_.ticketTierId===m.id))||[];return C+A.reduce((_,M)=>_+(M.quantity||0),0)},0);return{"Tier Name":m.name,Price:`£${(m.price/100).toFixed(2)}`,Capacity:m.capacity,Sold:v,Available:m.capacity-v,Utilization:`${(v/m.capacity*100).toFixed(1)}%`,Revenue:`£${(y/100).toFixed(2)}`,"Revenue per Ticket":v>0?`£${(y/v/100).toFixed(2)}`:"£0.00"}});wa({filename:`${a}-tiers`,data:h,headers:["Tier Name","Price","Capacity","Sold","Available","Utilization","Revenue","Revenue per Ticket"]})}},Pp=()=>{const{events:t,orders:r,getEvents:i,getOrders:a,addEvent:c,deleteEvent:l,archiveEvent:h}=bs(),[m,x]=ve.useState(null),[y,v]=ve.useState(!0),[C,T]=ve.useState("30d"),[A,D]=ve.useState("all"),[_,M]=ve.useState([]),[I,j]=ve.useState("analytics"),[B,Z]=ve.useState(!1),[Q,xe]=ve.useState(null),[$,ie]=ve.useState(null),[ce,De]=ve.useState(!1),[Y,V]=ve.useState(!1),[oe,le]=ve.useState(null);ve.useEffect(()=>{ne()},[]),ve.useEffect(()=>{if(t&&r){const ze=W();x(ze)}},[t,r,C,A]);const ne=async()=>{console.log("🔄 Loading dashboard data..."),v(!0);const ze=setTimeout(()=>{console.log("⏰ Loading timeout - forcing completion"),v(!1)},1e4);try{console.log("📡 Fetching events and orders..."),await Promise.all([i(),a()]),console.log("✅ Data fetched successfully");const Be=W();x(Be),console.log("📊 Stats calculated:",Be)}catch(Be){console.error("❌ Error loading dashboard data:",Be)}finally{clearTimeout(ze),v(!1),console.log("🏁 Dashboard loading complete")}},Te=()=>{xe(null),Z(!0)},Se=ze=>{xe(ze),Z(!0)},Ie=ze=>{ie({type:"delete",event:ze})},se=ze=>{ie({type:"archive",event:ze})},be=ze=>{le(ze),De(!0)},Ge=ze=>{De(!1),le(null),zn.success(`Guestlist created successfully! QR code sent to ${ze.leadEmail}`),ne()},O=async ze=>{M(mt=>[...mt,ze]);const Be=new Date,et=new Date(Be.getTime()+30*24*60*60*1e3);let Fe;switch(ze){case"sundowner":Fe={title:"Carnival LDN Sundowner",date:et.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),time:"18:00 - 22:00",venue:"Sky Garden, London",price:"From £25",description:"Experience the magic of London at sunset with our exclusive Carnival LDN Sundowner. Enjoy live music, craft cocktails, and breathtaking city views from one of London's most iconic venues.",capacity:"150",image:"https://images.unsplash.com/photo-1513635269975-59663e0ac1ad?w=800&h=600&fit=crop",tags:"sundowner,networking,music,cocktails,views",gradient:"from-orange-400 via-red-500 to-pink-500",ticketTiers:[{id:`tier_${Date.now()}_1`,name:"Early Bird",price:2500,originalPrice:3500,capacity:50,soldCount:0,description:"Limited early bird tickets",benefits:["Priority entry","Welcome drink","Canapés"],isActive:!0},{id:`tier_${Date.now()}_2`,name:"Standard",price:3500,originalPrice:null,capacity:80,soldCount:0,description:"Standard admission",benefits:["Entry","Welcome drink","Canapés","Live music"],isActive:!0},{id:`tier_${Date.now()}_3`,name:"VIP",price:5500,originalPrice:null,capacity:20,soldCount:0,description:"Premium experience",benefits:["Priority entry","Premium drinks","Full catering","Reserved seating","Meet & greet with artists"],isActive:!0}]};break;case"bollywood":Fe={title:"Bollywood Night - Carnival LDN",date:et.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),time:"19:00 - 02:00",venue:"O2 Academy Brixton, London",price:"From £20",description:"Get ready for the most vibrant Bollywood night in London! Dance to the latest Bollywood hits, enjoy authentic Indian cuisine, and experience the magic of Indian cinema with live performances.",capacity:"200",image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=800&h=600&fit=crop",tags:"bollywood,indian,music,dance,food,culture",gradient:"from-purple-400 via-pink-500 to-red-500",ticketTiers:[{id:`tier_${Date.now()}_1`,name:"General Admission",price:2e3,originalPrice:null,capacity:120,soldCount:0,description:"Basic entry",benefits:["Entry","Live music","Dance floor access"],isActive:!0},{id:`tier_${Date.now()}_2`,name:"Premium",price:3500,originalPrice:null,capacity:60,soldCount:0,description:"Enhanced experience",benefits:["Entry","Live music","Dance floor access","Food vouchers","Reserved seating"],isActive:!0},{id:`tier_${Date.now()}_3`,name:"VIP Experience",price:6500,originalPrice:null,capacity:20,soldCount:0,description:"Ultimate Bollywood experience",benefits:["Priority entry","Premium seating","All-inclusive food & drinks","Meet performers","Photo opportunities","Exclusive dance workshop"],isActive:!0}]};break;case"carnival":Fe={title:"Carnival LDN Street Festival",date:et.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),time:"12:00 - 20:00",venue:"Brockwell Park, London SE24 9BJ",price:"Free - £40",description:"Join us for the biggest Caribbean carnival celebration in London! Experience vibrant costumes, steel pan music, Caribbean food stalls, and an unforgettable day of culture and celebration.",capacity:"500",image:"https://images.unsplash.com/photo-1516450360452-9312f5e86fc7?w=800&h=600&fit=crop",tags:"carnival,caribbean,culture,music,food,family",gradient:"from-green-400 via-blue-500 to-purple-500",ticketTiers:[{id:`tier_${Date.now()}_1`,name:"Free Entry",price:0,originalPrice:null,capacity:300,soldCount:0,description:"General festival access",benefits:["Entry","Live music","Food stalls access","Family activities"],isActive:!0},{id:`tier_${Date.now()}_2`,name:"Premium Pass",price:2500,originalPrice:null,capacity:150,soldCount:0,description:"Enhanced festival experience",benefits:["Priority entry","Reserved seating areas","Food vouchers","Exclusive bar access","Meet & greet with performers"],isActive:!0},{id:`tier_${Date.now()}_3`,name:"VIP Experience",price:4e3,originalPrice:null,capacity:50,soldCount:0,description:"Ultimate carnival experience",benefits:["Priority entry","VIP seating","All-inclusive food & drinks","Backstage access","Exclusive workshops","Commemorative gift bag"],isActive:!0}]};break}try{await c(Fe),zn.success(`${Fe.title} created successfully!`),await ne()}catch(mt){console.error("Error creating test event:",mt),zn.error("Failed to create test event")}finally{M(mt=>mt.filter(Pe=>Pe!==ze))}},W=()=>{var Re;if(!t||!r)return{totalRevenue:0,totalOrders:0,totalTickets:0,conversionRate:0,averageOrderValue:0,topPerformingEvent:"N/A",recentOrders:[],revenueByEvent:[],ticketSalesByTier:[],dailyRevenue:[]};const ze=r.filter(rt=>{if(A!=="all"&&rt.eventId!==A)return!1;const ht=new Date(rt.createdAt),dt=new Date;return dt.setDate(dt.getDate()-(C==="7d"?7:C==="30d"?30:90)),ht>=dt}),Be=ze.reduce((rt,ht)=>rt+(ht.totalAmount||0),0),et=ze.length,Fe=ze.reduce((rt,ht)=>{var dt;return rt+(((dt=ht.tickets)==null?void 0:dt.reduce((It,At)=>It+(At.quantity||0),0))||0)},0),mt=et>0?Be/et:0,Pe=et>0?Math.min(95,Math.random()*20+5):0,de=t.map(rt=>{const dt=ze.filter(It=>It.eventId===rt.id).reduce((It,At)=>It+(At.totalAmount||0),0);return{event:rt.title,revenue:dt}}),pt=((Re=de.sort((rt,ht)=>ht.revenue-rt.revenue)[0])==null?void 0:Re.event)||"N/A",nt=de.filter(rt=>rt.revenue>0),He=[];t.forEach(rt=>{var ht;(ht=rt.ticketTiers)==null||ht.forEach(dt=>{const It=ze.filter(Rt=>{var ft;return(ft=Rt.tickets)==null?void 0:ft.some(Bt=>Bt.ticketTierId===dt.id)}),At=It.reduce((Rt,ft)=>{var at;const Bt=((at=ft.tickets)==null?void 0:at.filter(Ar=>Ar.ticketTierId===dt.id))||[];return Rt+Bt.reduce((Ar,St)=>Ar+(St.totalPrice||0),0)},0),Vt=It.reduce((Rt,ft)=>{var at;const Bt=((at=ft.tickets)==null?void 0:at.filter(Ar=>Ar.ticketTierId===dt.id))||[];return Rt+Bt.reduce((Ar,St)=>Ar+(St.quantity||0),0)},0);He.push({tier:`${rt.title} - ${dt.name}`,sold:Vt,revenue:At,capacity:dt.capacity||0})})});const st=Array.from({length:30},(rt,ht)=>{const dt=new Date;dt.setDate(dt.getDate()-(29-ht));const At=ze.filter(Vt=>new Date(Vt.createdAt).toDateString()===dt.toDateString()).reduce((Vt,Rt)=>Vt+(Rt.totalAmount||0),0);return{date:dt.toLocaleDateString("en-GB",{month:"short",day:"numeric"}),revenue:At}});return{totalRevenue:Be,totalOrders:et,totalTickets:Fe,conversionRate:Pe,averageOrderValue:mt,topPerformingEvent:pt,recentOrders:ze.slice(0,5),revenueByEvent:nt,ticketSalesByTier:He,dailyRevenue:st}},K=()=>{t&&r&&(Op(r,t,C),zn.success("Customer data exported successfully!"))},ue=ze=>{const Be=t==null?void 0:t.find(et=>et.id===ze);Be&&r&&(Mp(Be,r,C),zn.success(`${Be.title} data exported successfully!`))},ae=ze=>{if(!ze)return null;let Be=String(ze).trim();const et=Be.match(/^[A-Za-z]+,\s*(.*)$/);et&&(Be=et[1]);let Fe=new Date(Be);if(!isNaN(Fe.getTime()))return Fe;const mt=Be.match(/^(\d{1,2})\s+([A-Za-z]+)\s+(\d{4})$/);if(mt){const[,de,pt,nt]=mt;if(Fe=new Date(`${pt} ${de}, ${nt}`),!isNaN(Fe.getTime()))return Fe}const Pe=Be.match(/^(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})$/);if(Pe){const[,de,pt,nt]=Pe,He=st=>st.padStart(2,"0");if(Fe=new Date(`${nt}-${He(pt)}-${He(de)}`),!isNaN(Fe.getTime()))return Fe}return null};new Date().setHours(0,0,0,0);const Ae=(t||[]).filter(ze=>!ze.isArchived).sort((ze,Be)=>{const et=ae(ze.date),Fe=ae(Be.date);return!et&&!Fe?0:et?Fe?et.getTime()-Fe.getTime():-1:1}),ke=(t||[]).filter(ze=>ze.isArchived).sort((ze,Be)=>{const et=ae(ze.date),Fe=ae(Be.date);return!et&&!Fe?0:et?Fe?((Fe==null?void 0:Fe.getTime())||0)-((et==null?void 0:et.getTime())||0):-1:1});return y?o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-xl font-semibold text-gray-700",children:"Loading Dashboard..."}),o.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"This may take a few seconds..."}),o.jsx("button",{onClick:()=>{console.log("🔄 Manual refresh triggered"),v(!1),ne()},className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Refresh Dashboard"})]})}):o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx(Rm,{selectedTimeframe:C,selectedEvent:A,events:t||[],activeTab:I,onTimeframeChange:T,onEventChange:D,onTabChange:j,onRefresh:ne}),o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:o.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(yl,{className:"h-6 w-6 text-blue-600"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Google Analytics Dashboard"}),o.jsx("p",{className:"text-blue-700 text-sm",children:"Track real-time visitor behavior, conversions, and revenue insights"})]})]}),o.jsxs("a",{href:"/analytics",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[o.jsx(yl,{className:"h-4 w-4"}),o.jsx("span",{children:"View Analytics"})]})]})})}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[I==="analytics"&&o.jsx(o.Fragment,{children:A!=="all"?o.jsx(Wm,{events:t||[],orders:r||[],selectedEvent:A,onExportEventData:ue}):o.jsxs(o.Fragment,{children:[o.jsx(Bm,{stats:m,onExportAll:K,quickEventButtons:o.jsx(Hm,{creatingEvents:_,onCreateEvent:O})}),o.jsx(Fm,{stats:m,events:t||[]}),o.jsx(qm,{orders:(m==null?void 0:m.recentOrders)||[],events:t||[]})]})}),I==="events"&&o.jsx(Um,{currentEvents:Ae,archivedEvents:ke,onAddEvent:Te,onEditEvent:Se,onArchiveToggle:se,onDeleteEvent:Ie,onGuestlist:be}),I==="orders"&&o.jsx(zm,{orders:r||[],events:t||[]})]}),B&&o.jsx(Pm,{event:Q,onClose:()=>{Z(!1),xe(null),ne()}}),o.jsx(Vm,{confirm:$,onClose:()=>ie(null),onConfirm:async()=>{$&&($.type==="delete"?await l($.event.id):await h($.event.id,!$.event.isArchived),ie(null))}}),ce&&oe&&o.jsx(kp,{event:oe,onClose:()=>{De(!1),le(null)},onSuccess:Ge,onManageGuestlists:()=>{De(!1),V(!0)}}),Y&&oe&&o.jsx(Dp,{event:oe,onClose:()=>{V(!1),le(null)},onCreateNew:()=>{V(!1),De(!0)}})]})},Rp=G1("pk_test_51OyBk9IgkIAGwv6wTnbqfLaivBQ0wYCltGf0gS4yeEZpxkD1f5jKEwarmr294R0LXNEzEMNxHuCKLRpMH8DYgaWD00g8BPRDAG"),Bp=({event:t,onClose:r,onSuccess:i})=>{ve.useEffect(()=>{const j=document.createElement("style");return j.textContent=`
      input[type="date"]::-webkit-calendar-picker-indicator {
        background: transparent;
        bottom: 0;
        color: transparent;
        cursor: pointer;
        height: auto;
        left: 0;
        position: absolute;
        right: 0;
        top: 0;
        width: auto;
        opacity: 0;
      }
      
      /* Ensure date picker opens on mobile */
      input[type="date"] {
        position: relative;
      }
      
      /* Make the entire input clickable for date picker */
      input[type="date"]::-webkit-calendar-picker-indicator:hover {
        opacity: 0.1;
      }
      
      input[type="date"]::-webkit-datetime-edit {
        color: #374151;
      }
      
      input[type="date"]::-webkit-datetime-edit-fields-wrapper {
        padding: 0;
      }
      
      input[type="date"]::-webkit-datetime-edit-text {
        color: #9CA3AF;
        padding: 0 0.2em;
      }
      
      input[type="date"]::-webkit-datetime-edit-month-field,
      input[type="date"]::-webkit-datetime-edit-day-field,
      input[type="date"]::-webkit-datetime-edit-year-field {
        color: #374151;
        padding: 0 0.2em;
      }
      
      input[type="date"]::-webkit-inner-spin-button {
        display: none;
      }
      
      input[type="date"]::-webkit-clear-button {
        display: none;
      }
      
      /* iOS specific fixes */
      input, select {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        border-radius: 8px;
        font-size: 16px;
      }
      
      /* Ensure consistent height on iOS */
      input, select {
        min-height: 48px;
        line-height: 1.5;
      }
      
      /* Fix iOS select dropdown styling */
      select {
        background-image: none;
      }
      
      /* Ensure text inputs don't zoom on iOS */
      input[type="text"], input[type="email"], input[type="tel"] {
        font-size: 16px;
      }
    `,document.head.appendChild(j),()=>{document.head.removeChild(j)}},[]);const a=Y1(),c=X1(),[l,h]=ve.useState([]),[m,x]=ve.useState({name:"",email:"",phone:"",dateOfBirth:"",gender:"male"}),[y,v]=ve.useState(!1),[C,T]=ve.useState(null);ve.useEffect(()=>{if(console.log("Event ticket tiers:",t.ticketTiers),t.ticketTiers&&t.ticketTiers.length>0){const B=[...t.ticketTiers].sort((Z,Q)=>Z.price-Q.price).map(Z=>({tierId:Z.id,tier:Z,quantity:0}));h(B)}},[t]);const A=(j,B)=>{h(Z=>Z.map(Q=>Q.tierId===j?{...Q,quantity:Math.max(0,B)}:Q))},D=()=>l.reduce((j,B)=>j+B.tier.price*B.quantity,0),_=()=>l.reduce((j,B)=>j+B.quantity,0),M=async j=>{var $,ie,ce,De,Y;if(j.preventDefault(),_()===0){T("Please select at least one ticket.");return}const B=[];if(($=m.name)!=null&&$.trim()||B.push("Name is required"),(ie=m.email)!=null&&ie.trim()||B.push("Email is required"),(ce=m.phone)!=null&&ce.trim()||B.push("Phone number is required"),m.dateOfBirth||B.push("Date of birth is required"),m.gender||B.push("Gender is required"),m.dateOfBirth){const V=new Date,oe=new Date(m.dateOfBirth);if(isNaN(oe.getTime()))B.push("Please enter a valid date of birth");else{let le=V.getFullYear()-oe.getFullYear();const ne=V.getMonth()-oe.getMonth();(ne<0||ne===0&&V.getDate()<oe.getDate())&&le--,le<18&&B.push("You must be 18 years or older to purchase tickets")}}if(B.length>0){T(B.join(", "));return}console.log("Sending customer info:",m),v(!0),T(null);const Z=l.filter(V=>V.quantity>0),Q=D(),xe=Z.map(V=>({tier:V.tier.name,price:V.tier.price,quantity:V.quantity}));V2(t.id,t.title,Q,xe);try{if(D()===0){const le=await fetch("/api/create-free-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventId:t.id,tickets:l.filter(se=>se.quantity>0),customerInfo:m,totalAmount:0})});if(!le.ok){const se=await le.json();throw new Error(se.error||"Failed to create free order")}const ne=await le.json(),Te={id:((De=ne.order)==null?void 0:De.id)||`order_${Date.now()}`,eventId:t.id,userId:m.email,stripePaymentIntentId:null,status:"completed",totalAmount:0,currency:"gbp",tickets:l.filter(se=>se.quantity>0).map(se=>{var be;return{id:`ticket_${Date.now()}_${se.tierId}`,orderId:((be=ne.order)==null?void 0:be.id)||`order_${Date.now()}`,ticketTierId:se.tierId,quantity:se.quantity,unitPrice:0,totalPrice:0}}),customerEmail:m.email,customerName:m.name,customerPhone:m.phone,customerDateOfBirth:m.dateOfBirth,customerGender:m.gender||void 0,createdAt:new Date,updatedAt:new Date},Ie=l.filter(se=>se.quantity>0).map(se=>({tier:se.tier.name,price:0,quantity:se.quantity}));Nu(Te.id,t.id,t.title,0,Ie),i(Te)}else{if(!a||!c){T("Stripe has not loaded yet. Please try again.");return}const le=await fetch("/api/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventId:t.id,tickets:l.filter(Ie=>Ie.quantity>0),customerInfo:m,totalAmount:D()})});if(!le.ok)throw new Error("Failed to create payment intent");const{clientSecret:ne}=await le.json(),{error:Te,paymentIntent:Se}=await a.confirmCardPayment(ne,{payment_method:{card:c.getElement(nu),billing_details:{name:m.name,email:m.email}}});if(Te){T(Te.message||"Payment failed");return}if(Se.status==="succeeded"){const Ie=await fetch("/api/confirm-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentIntentId:Se.id,eventId:t.id,tickets:l.filter(se=>se.quantity>0),customerInfo:m,totalAmount:D()})});if(Ie.ok){const se=await Ie.json(),be={id:((Y=se.order)==null?void 0:Y.id)||`order_${Date.now()}`,eventId:t.id,userId:m.email,stripePaymentIntentId:se.paymentIntentId,status:"completed",totalAmount:D(),currency:"gbp",tickets:l.filter(K=>K.quantity>0).map(K=>{var ue;return{id:`ticket_${Date.now()}_${K.tierId}`,orderId:((ue=se.order)==null?void 0:ue.id)||`order_${Date.now()}`,ticketTierId:K.tierId,quantity:K.quantity,unitPrice:K.tier.price,totalPrice:K.tier.price*K.quantity}}),customerEmail:m.email,customerName:m.name,customerPhone:m.phone,customerDateOfBirth:m.dateOfBirth,customerGender:m.gender||void 0,createdAt:new Date,updatedAt:new Date},Ge=l.filter(K=>K.quantity>0),O=D(),W=Ge.map(K=>({tier:K.tier.name,price:K.tier.price,quantity:K.quantity}));Nu(be.id,t.id,t.title,O,W),i(be)}}}}catch(V){T(V instanceof Error?V.message:"An error occurred")}finally{v(!1)}},I=(t.ticketTiers||[]).filter(j=>j.isActive!==!1&&j.capacity>j.soldCount);return o.jsxs("form",{onSubmit:M,className:"space-y-6",children:[o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:D()===0?"Step 1 of 2":"Step 1 of 3"}),o.jsx("span",{className:"text-sm text-gray-500",children:"Select Tickets"})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx(qe.div,{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",initial:{width:0},animate:{width:D()===0?"50%":"33%"}})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Tickets"}),I.length===0&&o.jsx("div",{className:"mb-4 text-sm text-red-600",children:"This event is sold out."}),o.jsx("div",{className:"space-y-4",children:(t.ticketTiers||[]).sort((j,B)=>j.price-B.price).map(j=>{const B=l.find(xe=>xe.tierId===j.id)||{quantity:0},Z=j.capacity-j.soldCount,Q=Z<=0||j.isActive===!1;return o.jsxs("div",{className:"border rounded-lg p-4",children:[o.jsxs("div",{className:"flex justify-between items-start mb-3",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-gray-900",children:j.name}),o.jsx("p",{className:"text-sm text-gray-600",children:j.description}),j.benefits&&j.benefits.length>0&&o.jsx("div",{className:"mt-2",children:j.benefits.map((xe,$)=>o.jsxs("div",{className:"text-sm text-green-600 flex items-center gap-1",children:[o.jsx(Zn,{className:"h-3 w-3"}),xe]},$))})]}),o.jsx("div",{className:"text-right",children:Q?o.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-red-100 text-red-700",children:"Sold out"}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:["£",(j.price/100).toFixed(2)]}),j.originalPrice&&j.originalPrice>j.price&&o.jsxs("div",{className:"text-sm text-gray-400 line-through",children:["£",(j.originalPrice/100).toFixed(2)]})]})})]}),Q?o.jsx("div",{className:"text-sm text-gray-500",children:"This tier is currently unavailable."}):o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{type:"button",onClick:()=>A(j.id,(B.quantity||0)-1),className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50",children:"-"}),o.jsx("span",{className:"w-12 text-center font-medium",children:B.quantity||0}),o.jsx("button",{type:"button",onClick:()=>A(j.id,(B.quantity||0)+1),disabled:(B.quantity||0)>=Z,className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"+"})]}),o.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:["£",(j.price*(B.quantity||0)/100).toFixed(2)]})]})]},j.id)})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Information"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),o.jsx("input",{id:"name",type:"text",placeholder:"e.g. John Smith",value:m.name,onChange:j=>x({...m,name:j.target.value}),className:"w-full h-12 px-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",style:{WebkitAppearance:"none",MozAppearance:"none",appearance:"none"},required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),o.jsx("input",{id:"email",type:"email",placeholder:"e.g. john.smith@email.com",value:m.email,onChange:j=>x({...m,email:j.target.value}),className:"w-full h-12 px-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",style:{WebkitAppearance:"none",MozAppearance:"none",appearance:"none"},required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),o.jsx("input",{id:"phone",type:"tel",placeholder:"e.g. 07123456789",value:m.phone,onChange:j=>x({...m,phone:j.target.value}),className:"w-full h-12 px-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",style:{WebkitAppearance:"none",MozAppearance:"none",appearance:"none"},required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"dateOfBirth",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth *"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{id:"dateOfBirth",type:"date",value:m.dateOfBirth,onChange:j=>x({...m,dateOfBirth:j.target.value}),placeholder:"Select date of birth",className:"w-full h-12 px-3 pr-10 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white cursor-pointer hover:border-blue-400 transition-colors shadow-sm",style:{WebkitAppearance:"none",MozAppearance:"none",appearance:"none"},required:!0}),o.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:o.jsx("svg",{className:"h-5 w-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"You must be 18 years or older to purchase tickets"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{htmlFor:"gender",className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender *"}),o.jsxs("div",{className:"relative",children:[o.jsxs("select",{id:"gender",value:m.gender,onChange:j=>x({...m,gender:j.target.value}),className:"w-full h-12 px-3 pr-10 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white cursor-pointer hover:border-blue-400 transition-colors",style:{WebkitAppearance:"none",MozAppearance:"none",appearance:"none"},required:!0,children:[o.jsx("option",{value:"male",children:"Male"}),o.jsx("option",{value:"female",children:"Female"}),o.jsx("option",{value:"other",children:"Other"}),o.jsx("option",{value:"prefer_not_to_say",children:"Prefer not to say"})]}),o.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:o.jsx("svg",{className:"h-5 w-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})]})]}),D()>0&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment"}),o.jsx("div",{className:"border rounded-lg p-4",children:o.jsx(nu,{options:{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})})]}),D()===0&&o.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Zn,{className:"h-5 w-5 text-green-600"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-green-800",children:"Free Event"}),o.jsx("p",{className:"text-sm text-green-700",children:"No payment required. Your tickets will be sent to your email after confirmation."})]})]})}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Order Summary"}),o.jsxs("div",{className:"space-y-2",children:[l.filter(j=>j.quantity>0).map(j=>o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsxs("span",{children:[j.quantity,"x ",j.tier.name]}),o.jsxs("span",{children:["£",(j.tier.price*j.quantity/100).toFixed(2)]})]},j.tierId)),o.jsx("div",{className:"border-t pt-2 mt-2",children:o.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[o.jsx("span",{children:"Total"}),o.jsxs("span",{children:["£",(D()/100).toFixed(2)]})]})})]})]}),C&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:o.jsx("p",{className:"text-red-800",children:C})}),o.jsx("button",{type:"submit",disabled:y||_()===0||D()>0&&(!a||!c),className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:y?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),o.jsx("span",{className:"ml-2",children:D()===0?"Processing Order...":"Processing Payment..."})]}):o.jsx(o.Fragment,{children:D()===0?o.jsxs(o.Fragment,{children:[o.jsx(Zn,{className:"h-5 w-5"}),o.jsx("span",{className:"ml-2",children:"Get Free Tickets"})]}):o.jsxs(o.Fragment,{children:[o.jsx(vo,{className:"h-5 w-5"}),o.jsxs("span",{className:"ml-2",children:["Pay £",(D()/100).toFixed(2)]})]})})}),y&&o.jsx(qe.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 bg-white bg-opacity-90 flex items-center justify-center rounded-lg",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-lg font-semibold text-gray-700",children:D()===0?"Processing your order...":"Processing your payment..."}),o.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Please don't close this window"})]})}),D()>0&&o.jsx("div",{className:"text-center text-sm text-gray-500",children:o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx(vo,{className:"h-4 w-4"}),"Secure payment powered by Stripe"]})})]})},Fp=({event:t,onClose:r,onSuccess:i})=>o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs(qe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsx("div",{className:"p-6 border-b",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Buy Tickets"}),o.jsx("p",{className:"text-gray-600",children:t.title})]}),o.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:o.jsx(Zs,{className:"h-6 w-6"})})]})}),o.jsx("div",{className:"p-6",children:o.jsx(W1,{stripe:Rp,children:o.jsx(Bp,{event:t,onClose:r,onSuccess:i})})})]})});function xr(t){"@babel/helpers - typeof";return xr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},xr(t)}var qn=Uint8Array,fi=Uint16Array,xd=Int32Array,Ol=new qn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ml=new qn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),qc=new qn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),oh=function(t,r){for(var i=new fi(31),a=0;a<31;++a)i[a]=r+=1<<t[a-1];for(var c=new xd(i[30]),a=1;a<30;++a)for(var l=i[a];l<i[a+1];++l)c[l]=l-i[a]<<5|a;return{b:i,r:c}},lh=oh(Ol,2),ch=lh.b,Hc=lh.r;ch[28]=258,Hc[258]=28;var dh=oh(Ml,0),Up=dh.b,zu=dh.r,Vc=new fi(32768);for(var Mr=0;Mr<32768;++Mr){var Bs=(Mr&43690)>>1|(Mr&21845)<<1;Bs=(Bs&52428)>>2|(Bs&13107)<<2,Bs=(Bs&61680)>>4|(Bs&3855)<<4,Vc[Mr]=((Bs&65280)>>8|(Bs&255)<<8)>>1}var es=function(t,r,i){for(var a=t.length,c=0,l=new fi(r);c<a;++c)t[c]&&++l[t[c]-1];var h=new fi(r);for(c=1;c<r;++c)h[c]=h[c-1]+l[c-1]<<1;var m;if(i){m=new fi(1<<r);var x=15-r;for(c=0;c<a;++c)if(t[c])for(var y=c<<4|t[c],v=r-t[c],C=h[t[c]-1]++<<v,T=C|(1<<v)-1;C<=T;++C)m[Vc[C]>>x]=y}else for(m=new fi(a),c=0;c<a;++c)t[c]&&(m[c]=Vc[h[t[c]-1]++]>>15-t[c]);return m},Ys=new qn(288);for(var Mr=0;Mr<144;++Mr)Ys[Mr]=8;for(var Mr=144;Mr<256;++Mr)Ys[Mr]=9;for(var Mr=256;Mr<280;++Mr)Ys[Mr]=7;for(var Mr=280;Mr<288;++Mr)Ys[Mr]=8;var Io=new qn(32);for(var Mr=0;Mr<32;++Mr)Io[Mr]=5;var zp=es(Ys,9,0),qp=es(Ys,9,1),Hp=es(Io,5,0),Vp=es(Io,5,1),cc=function(t){for(var r=t[0],i=1;i<t.length;++i)t[i]>r&&(r=t[i]);return r},Mi=function(t,r,i){var a=r/8|0;return(t[a]|t[a+1]<<8)>>(r&7)&i},dc=function(t,r){var i=r/8|0;return(t[i]|t[i+1]<<8|t[i+2]<<16)>>(r&7)},yd=function(t){return(t+7)/8|0},uh=function(t,r,i){return(i==null||i>t.length)&&(i=t.length),new qn(t.subarray(r,i))},Gp=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ri=function(t,r,i){var a=new Error(r||Gp[t]);if(a.code=t,Error.captureStackTrace&&Error.captureStackTrace(a,Ri),!i)throw a;return a},Wp=function(t,r,i,a){var c=t.length,l=0;if(!c||r.f&&!r.l)return i||new qn(0);var h=!i,m=h||r.i!=2,x=r.i;h&&(i=new qn(c*3));var y=function(Be){var et=i.length;if(Be>et){var Fe=new qn(Math.max(et*2,Be));Fe.set(i),i=Fe}},v=r.f||0,C=r.p||0,T=r.b||0,A=r.l,D=r.d,_=r.m,M=r.n,I=c*8;do{if(!A){v=Mi(t,C,1);var j=Mi(t,C+1,3);if(C+=3,j)if(j==1)A=qp,D=Vp,_=9,M=5;else if(j==2){var xe=Mi(t,C,31)+257,$=Mi(t,C+10,15)+4,ie=xe+Mi(t,C+5,31)+1;C+=14;for(var ce=new qn(ie),De=new qn(19),Y=0;Y<$;++Y)De[qc[Y]]=Mi(t,C+Y*3,7);C+=$*3;for(var V=cc(De),oe=(1<<V)-1,le=es(De,V,1),Y=0;Y<ie;){var ne=le[Mi(t,C,oe)];C+=ne&15;var B=ne>>4;if(B<16)ce[Y++]=B;else{var Te=0,Se=0;for(B==16?(Se=3+Mi(t,C,3),C+=2,Te=ce[Y-1]):B==17?(Se=3+Mi(t,C,7),C+=3):B==18&&(Se=11+Mi(t,C,127),C+=7);Se--;)ce[Y++]=Te}}var Ie=ce.subarray(0,xe),se=ce.subarray(xe);_=cc(Ie),M=cc(se),A=es(Ie,_,1),D=es(se,M,1)}else Ri(1);else{var B=yd(C)+4,Z=t[B-4]|t[B-3]<<8,Q=B+Z;if(Q>c){x&&Ri(0);break}m&&y(T+Z),i.set(t.subarray(B,Q),T),r.b=T+=Z,r.p=C=Q*8,r.f=v;continue}if(C>I){x&&Ri(0);break}}m&&y(T+131072);for(var be=(1<<_)-1,Ge=(1<<M)-1,O=C;;O=C){var Te=A[dc(t,C)&be],W=Te>>4;if(C+=Te&15,C>I){x&&Ri(0);break}if(Te||Ri(2),W<256)i[T++]=W;else if(W==256){O=C,A=null;break}else{var K=W-254;if(W>264){var Y=W-257,ue=Ol[Y];K=Mi(t,C,(1<<ue)-1)+ch[Y],C+=ue}var ae=D[dc(t,C)&Ge],Ee=ae>>4;ae||Ri(3),C+=ae&15;var se=Up[Ee];if(Ee>3){var ue=Ml[Ee];se+=dc(t,C)&(1<<ue)-1,C+=ue}if(C>I){x&&Ri(0);break}m&&y(T+131072);var Ae=T+K;if(T<se){var ke=l-se,ze=Math.min(se,Ae);for(ke+T<0&&Ri(3);T<ze;++T)i[T]=a[ke+T]}for(;T<Ae;++T)i[T]=i[T-se]}}r.l=A,r.p=O,r.b=T,r.f=v,A&&(v=1,r.m=_,r.d=D,r.n=M)}while(!v);return T!=i.length&&h?uh(i,0,T):i.subarray(0,T)},ms=function(t,r,i){i<<=r&7;var a=r/8|0;t[a]|=i,t[a+1]|=i>>8},po=function(t,r,i){i<<=r&7;var a=r/8|0;t[a]|=i,t[a+1]|=i>>8,t[a+2]|=i>>16},uc=function(t,r){for(var i=[],a=0;a<t.length;++a)t[a]&&i.push({s:a,f:t[a]});var c=i.length,l=i.slice();if(!c)return{t:fh,l:0};if(c==1){var h=new qn(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(Q,xe){return Q.f-xe.f}),i.push({s:-1,f:25001});var m=i[0],x=i[1],y=0,v=1,C=2;for(i[0]={s:-1,f:m.f+x.f,l:m,r:x};v!=c-1;)m=i[i[y].f<i[C].f?y++:C++],x=i[y!=v&&i[y].f<i[C].f?y++:C++],i[v++]={s:-1,f:m.f+x.f,l:m,r:x};for(var T=l[0].s,a=1;a<c;++a)l[a].s>T&&(T=l[a].s);var A=new fi(T+1),D=Gc(i[v-1],A,0);if(D>r){var a=0,_=0,M=D-r,I=1<<M;for(l.sort(function(xe,$){return A[$.s]-A[xe.s]||xe.f-$.f});a<c;++a){var j=l[a].s;if(A[j]>r)_+=I-(1<<D-A[j]),A[j]=r;else break}for(_>>=M;_>0;){var B=l[a].s;A[B]<r?_-=1<<r-A[B]++-1:++a}for(;a>=0&&_;--a){var Z=l[a].s;A[Z]==r&&(--A[Z],++_)}D=r}return{t:new qn(A),l:D}},Gc=function(t,r,i){return t.s==-1?Math.max(Gc(t.l,r,i+1),Gc(t.r,r,i+1)):r[t.s]=i},qu=function(t){for(var r=t.length;r&&!t[--r];);for(var i=new fi(++r),a=0,c=t[0],l=1,h=function(x){i[a++]=x},m=1;m<=r;++m)if(t[m]==c&&m!=r)++l;else{if(!c&&l>2){for(;l>138;l-=138)h(32754);l>2&&(h(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(h(c),--l;l>6;l-=6)h(8304);l>2&&(h(l-3<<5|8208),l=0)}for(;l--;)h(c);l=1,c=t[m]}return{c:i.subarray(0,a),n:r}},xo=function(t,r){for(var i=0,a=0;a<r.length;++a)i+=t[a]*r[a];return i},hh=function(t,r,i){var a=i.length,c=yd(r+2);t[c]=a&255,t[c+1]=a>>8,t[c+2]=t[c]^255,t[c+3]=t[c+1]^255;for(var l=0;l<a;++l)t[c+l+4]=i[l];return(c+4+a)*8},Hu=function(t,r,i,a,c,l,h,m,x,y,v){ms(r,v++,i),++c[256];for(var C=uc(c,15),T=C.t,A=C.l,D=uc(l,15),_=D.t,M=D.l,I=qu(T),j=I.c,B=I.n,Z=qu(_),Q=Z.c,xe=Z.n,$=new fi(19),ie=0;ie<j.length;++ie)++$[j[ie]&31];for(var ie=0;ie<Q.length;++ie)++$[Q[ie]&31];for(var ce=uc($,7),De=ce.t,Y=ce.l,V=19;V>4&&!De[qc[V-1]];--V);var oe=y+5<<3,le=xo(c,Ys)+xo(l,Io)+h,ne=xo(c,T)+xo(l,_)+h+14+3*V+xo($,De)+2*$[16]+3*$[17]+7*$[18];if(x>=0&&oe<=le&&oe<=ne)return hh(r,v,t.subarray(x,x+y));var Te,Se,Ie,se;if(ms(r,v,1+(ne<le)),v+=2,ne<le){Te=es(T,A,0),Se=T,Ie=es(_,M,0),se=_;var be=es(De,Y,0);ms(r,v,B-257),ms(r,v+5,xe-1),ms(r,v+10,V-4),v+=14;for(var ie=0;ie<V;++ie)ms(r,v+3*ie,De[qc[ie]]);v+=3*V;for(var Ge=[j,Q],O=0;O<2;++O)for(var W=Ge[O],ie=0;ie<W.length;++ie){var K=W[ie]&31;ms(r,v,be[K]),v+=De[K],K>15&&(ms(r,v,W[ie]>>5&127),v+=W[ie]>>12)}}else Te=zp,Se=Ys,Ie=Hp,se=Io;for(var ie=0;ie<m;++ie){var ue=a[ie];if(ue>255){var K=ue>>18&31;po(r,v,Te[K+257]),v+=Se[K+257],K>7&&(ms(r,v,ue>>23&31),v+=Ol[K]);var ae=ue&31;po(r,v,Ie[ae]),v+=se[ae],ae>3&&(po(r,v,ue>>5&8191),v+=Ml[ae])}else po(r,v,Te[ue]),v+=Se[ue]}return po(r,v,Te[256]),v+Se[256]},Yp=new xd([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),fh=new qn(0),Xp=function(t,r,i,a,c,l){var h=l.z||t.length,m=new qn(a+h+5*(1+Math.ceil(h/7e3))+c),x=m.subarray(a,m.length-c),y=l.l,v=(l.r||0)&7;if(r){v&&(x[0]=l.r>>3);for(var C=Yp[r-1],T=C>>13,A=C&8191,D=(1<<i)-1,_=l.p||new fi(32768),M=l.h||new fi(D+1),I=Math.ceil(i/3),j=2*I,B=function(mt){return(t[mt]^t[mt+1]<<I^t[mt+2]<<j)&D},Z=new xd(25e3),Q=new fi(288),xe=new fi(32),$=0,ie=0,ce=l.i||0,De=0,Y=l.w||0,V=0;ce+2<h;++ce){var oe=B(ce),le=ce&32767,ne=M[oe];if(_[le]=ne,M[oe]=le,Y<=ce){var Te=h-ce;if(($>7e3||De>24576)&&(Te>423||!y)){v=Hu(t,x,0,Z,Q,xe,ie,De,V,ce-V,v),De=$=ie=0,V=ce;for(var Se=0;Se<286;++Se)Q[Se]=0;for(var Se=0;Se<30;++Se)xe[Se]=0}var Ie=2,se=0,be=A,Ge=le-ne&32767;if(Te>2&&oe==B(ce-Ge))for(var O=Math.min(T,Te)-1,W=Math.min(32767,ce),K=Math.min(258,Te);Ge<=W&&--be&&le!=ne;){if(t[ce+Ie]==t[ce+Ie-Ge]){for(var ue=0;ue<K&&t[ce+ue]==t[ce+ue-Ge];++ue);if(ue>Ie){if(Ie=ue,se=Ge,ue>O)break;for(var ae=Math.min(Ge,ue-2),Ee=0,Se=0;Se<ae;++Se){var Ae=ce-Ge+Se&32767,ke=_[Ae],ze=Ae-ke&32767;ze>Ee&&(Ee=ze,ne=Ae)}}}le=ne,ne=_[le],Ge+=le-ne&32767}if(se){Z[De++]=268435456|Hc[Ie]<<18|zu[se];var Be=Hc[Ie]&31,et=zu[se]&31;ie+=Ol[Be]+Ml[et],++Q[257+Be],++xe[et],Y=ce+Ie,++$}else Z[De++]=t[ce],++Q[t[ce]]}}for(ce=Math.max(ce,Y);ce<h;++ce)Z[De++]=t[ce],++Q[t[ce]];v=Hu(t,x,y,Z,Q,xe,ie,De,V,ce-V,v),y||(l.r=v&7|x[v/8|0]<<3,v-=7,l.h=M,l.p=_,l.i=ce,l.w=Y)}else{for(var ce=l.w||0;ce<h+y;ce+=65535){var Fe=ce+65535;Fe>=h&&(x[v/8|0]=y,Fe=h),v=hh(x,v+1,t.subarray(ce,Fe))}l.i=h}return uh(m,0,a+yd(v)+c)},gh=function(){var t=1,r=0;return{p:function(i){for(var a=t,c=r,l=i.length|0,h=0;h!=l;){for(var m=Math.min(h+2655,l);h<m;++h)c+=a+=i[h];a=(a&65535)+15*(a>>16),c=(c&65535)+15*(c>>16)}t=a,r=c},d:function(){return t%=65521,r%=65521,(t&255)<<24|(t&65280)<<8|(r&255)<<8|r>>8}}},Zp=function(t,r,i,a,c){if(!c&&(c={l:1},r.dictionary)){var l=r.dictionary.subarray(-32768),h=new qn(l.length+t.length);h.set(l),h.set(t,l.length),t=h,c.w=l.length}return Xp(t,r.level==null?6:r.level,r.mem==null?c.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+r.mem,i,a,c)},mh=function(t,r,i){for(;i;++r)t[r]=i,i>>>=8},$p=function(t,r){var i=r.level,a=i==0?0:i<6?1:i==9?3:2;if(t[0]=120,t[1]=a<<6|(r.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,r.dictionary){var c=gh();c.p(r.dictionary),mh(t,2,c.d())}},Kp=function(t,r){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Ri(6,"invalid zlib data"),(t[1]>>5&1)==1&&Ri(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function Wc(t,r){r||(r={});var i=gh();i.p(t);var a=Zp(t,r,r.dictionary?6:2,4);return $p(a,r),mh(a,a.length-4,i.d()),a}function Qp(t,r){return Wp(t.subarray(Kp(t),-4),{i:2},r,r)}var Jp=typeof TextDecoder<"u"&&new TextDecoder,ex=0;try{Jp.decode(fh,{stream:!0}),ex=1}catch{}var Lt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function hc(){Lt.console&&typeof Lt.console.log=="function"&&Lt.console.log.apply(Lt.console,arguments)}var Nr={log:hc,warn:function(t){Lt.console&&(typeof Lt.console.warn=="function"?Lt.console.warn.apply(Lt.console,arguments):hc.call(null,arguments))},error:function(t){Lt.console&&(typeof Lt.console.error=="function"?Lt.console.error.apply(Lt.console,arguments):hc(t))}};function fc(t,r,i){var a=new XMLHttpRequest;a.open("GET",t),a.responseType="blob",a.onload=function(){ya(a.response,r,i)},a.onerror=function(){Nr.error("could not download file")},a.send()}function Vu(t){var r=new XMLHttpRequest;r.open("HEAD",t,!1);try{r.send()}catch{}return r.status>=200&&r.status<=299}function rl(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(r)}}var bo,Yc,ya=Lt.saveAs||((typeof window>"u"?"undefined":xr(window))!=="object"||window!==Lt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,r,i){var a=Lt.URL||Lt.webkitURL,c=document.createElement("a");r=r||t.name||"download",c.download=r,c.rel="noopener",typeof t=="string"?(c.href=t,c.origin!==location.origin?Vu(c.href)?fc(t,r,i):rl(c,c.target="_blank"):rl(c)):(c.href=a.createObjectURL(t),setTimeout(function(){a.revokeObjectURL(c.href)},4e4),setTimeout(function(){rl(c)},0))}:"msSaveOrOpenBlob"in navigator?function(t,r,i){if(r=r||t.name||"download",typeof t=="string")if(Vu(t))fc(t,r,i);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout(function(){rl(a)})}else navigator.msSaveOrOpenBlob(function(c,l){return l===void 0?l={autoBom:!1}:xr(l)!=="object"&&(Nr.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}(t,i),r)}:function(t,r,i,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof t=="string")return fc(t,r,i);var c=t.type==="application/octet-stream",l=/constructor/i.test(Lt.HTMLElement)||Lt.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent);if((h||c&&l)&&(typeof FileReader>"u"?"undefined":xr(FileReader))==="object"){var m=new FileReader;m.onloadend=function(){var v=m.result;v=h?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=v:location=v,a=null},m.readAsDataURL(t)}else{var x=Lt.URL||Lt.webkitURL,y=x.createObjectURL(t);a?a.location=y:location.href=y,a=null,setTimeout(function(){x.revokeObjectURL(y)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function ph(t){var r;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var i=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(m){return[parseInt(m[1]),parseInt(m[2]),parseInt(m[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(m){return[parseInt(m[1],16),parseInt(m[2],16),parseInt(m[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(m){return[parseInt(m[1]+m[1],16),parseInt(m[2]+m[2],16),parseInt(m[3]+m[3],16)]}}],a=0;a<i.length;a++){var c=i[a].re,l=i[a].process,h=c.exec(t);h&&(r=l(h),this.r=r[0],this.g=r[1],this.b=r[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var m=this.r.toString(16),x=this.g.toString(16),y=this.b.toString(16);return m.length==1&&(m="0"+m),x.length==1&&(x="0"+x),y.length==1&&(y="0"+y),"#"+m+x+y}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function gc(t,r){var i=t[0],a=t[1],c=t[2],l=t[3];i=Rn(i,a,c,l,r[0],7,-680876936),l=Rn(l,i,a,c,r[1],12,-389564586),c=Rn(c,l,i,a,r[2],17,606105819),a=Rn(a,c,l,i,r[3],22,-1044525330),i=Rn(i,a,c,l,r[4],7,-176418897),l=Rn(l,i,a,c,r[5],12,1200080426),c=Rn(c,l,i,a,r[6],17,-1473231341),a=Rn(a,c,l,i,r[7],22,-45705983),i=Rn(i,a,c,l,r[8],7,1770035416),l=Rn(l,i,a,c,r[9],12,-1958414417),c=Rn(c,l,i,a,r[10],17,-42063),a=Rn(a,c,l,i,r[11],22,-1990404162),i=Rn(i,a,c,l,r[12],7,1804603682),l=Rn(l,i,a,c,r[13],12,-40341101),c=Rn(c,l,i,a,r[14],17,-1502002290),i=Bn(i,a=Rn(a,c,l,i,r[15],22,1236535329),c,l,r[1],5,-165796510),l=Bn(l,i,a,c,r[6],9,-1069501632),c=Bn(c,l,i,a,r[11],14,643717713),a=Bn(a,c,l,i,r[0],20,-373897302),i=Bn(i,a,c,l,r[5],5,-701558691),l=Bn(l,i,a,c,r[10],9,38016083),c=Bn(c,l,i,a,r[15],14,-660478335),a=Bn(a,c,l,i,r[4],20,-405537848),i=Bn(i,a,c,l,r[9],5,568446438),l=Bn(l,i,a,c,r[14],9,-1019803690),c=Bn(c,l,i,a,r[3],14,-187363961),a=Bn(a,c,l,i,r[8],20,1163531501),i=Bn(i,a,c,l,r[13],5,-1444681467),l=Bn(l,i,a,c,r[2],9,-51403784),c=Bn(c,l,i,a,r[7],14,1735328473),i=Fn(i,a=Bn(a,c,l,i,r[12],20,-1926607734),c,l,r[5],4,-378558),l=Fn(l,i,a,c,r[8],11,-2022574463),c=Fn(c,l,i,a,r[11],16,1839030562),a=Fn(a,c,l,i,r[14],23,-35309556),i=Fn(i,a,c,l,r[1],4,-1530992060),l=Fn(l,i,a,c,r[4],11,1272893353),c=Fn(c,l,i,a,r[7],16,-155497632),a=Fn(a,c,l,i,r[10],23,-1094730640),i=Fn(i,a,c,l,r[13],4,681279174),l=Fn(l,i,a,c,r[0],11,-358537222),c=Fn(c,l,i,a,r[3],16,-722521979),a=Fn(a,c,l,i,r[6],23,76029189),i=Fn(i,a,c,l,r[9],4,-640364487),l=Fn(l,i,a,c,r[12],11,-421815835),c=Fn(c,l,i,a,r[15],16,530742520),i=Un(i,a=Fn(a,c,l,i,r[2],23,-995338651),c,l,r[0],6,-198630844),l=Un(l,i,a,c,r[7],10,1126891415),c=Un(c,l,i,a,r[14],15,-1416354905),a=Un(a,c,l,i,r[5],21,-57434055),i=Un(i,a,c,l,r[12],6,1700485571),l=Un(l,i,a,c,r[3],10,-1894986606),c=Un(c,l,i,a,r[10],15,-1051523),a=Un(a,c,l,i,r[1],21,-2054922799),i=Un(i,a,c,l,r[8],6,1873313359),l=Un(l,i,a,c,r[15],10,-30611744),c=Un(c,l,i,a,r[6],15,-1560198380),a=Un(a,c,l,i,r[13],21,1309151649),i=Un(i,a,c,l,r[4],6,-145523070),l=Un(l,i,a,c,r[11],10,-1120210379),c=Un(c,l,i,a,r[2],15,718787259),a=Un(a,c,l,i,r[9],21,-343485551),t[0]=qs(i,t[0]),t[1]=qs(a,t[1]),t[2]=qs(c,t[2]),t[3]=qs(l,t[3])}function Pl(t,r,i,a,c,l){return r=qs(qs(r,t),qs(a,l)),qs(r<<c|r>>>32-c,i)}function Rn(t,r,i,a,c,l,h){return Pl(r&i|~r&a,t,r,c,l,h)}function Bn(t,r,i,a,c,l,h){return Pl(r&a|i&~a,t,r,c,l,h)}function Fn(t,r,i,a,c,l,h){return Pl(r^i^a,t,r,c,l,h)}function Un(t,r,i,a,c,l,h){return Pl(i^(r|~a),t,r,c,l,h)}function xh(t){var r,i=t.length,a=[1732584193,-271733879,-1732584194,271733878];for(r=64;r<=t.length;r+=64)gc(a,tx(t.substring(r-64,r)));t=t.substring(r-64);var c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<t.length;r++)c[r>>2]|=t.charCodeAt(r)<<(r%4<<3);if(c[r>>2]|=128<<(r%4<<3),r>55)for(gc(a,c),r=0;r<16;r++)c[r]=0;return c[14]=8*i,gc(a,c),a}function tx(t){var r,i=[];for(r=0;r<64;r+=4)i[r>>2]=t.charCodeAt(r)+(t.charCodeAt(r+1)<<8)+(t.charCodeAt(r+2)<<16)+(t.charCodeAt(r+3)<<24);return i}bo=Lt.atob.bind(Lt),Yc=Lt.btoa.bind(Lt);var Gu="0123456789abcdef".split("");function rx(t){for(var r="",i=0;i<4;i++)r+=Gu[t>>8*i+4&15]+Gu[t>>8*i&15];return r}function nx(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Xc(t){return xh(t).map(nx).join("")}var ix=function(t){for(var r=0;r<t.length;r++)t[r]=rx(t[r]);return t.join("")}(xh("hello"))!="5d41402abc4b2a76b9719d911017c592";function qs(t,r){if(ix){var i=(65535&t)+(65535&r);return(t>>16)+(r>>16)+(i>>16)<<16|65535&i}return t+r&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Zc(t,r){var i,a,c,l;if(t!==i){for(var h=(c=t,l=1+(256/t.length>>0),new Array(l+1).join(c)),m=[],x=0;x<256;x++)m[x]=x;var y=0;for(x=0;x<256;x++){var v=m[x];y=(y+v+h.charCodeAt(x))%256,m[x]=m[y],m[y]=v}i=t,a=m}else m=a;var C=r.length,T=0,A=0,D="";for(x=0;x<C;x++)A=(A+(v=m[T=(T+1)%256]))%256,m[T]=m[A],m[A]=v,h=m[(m[T]+m[A])%256],D+=String.fromCharCode(r.charCodeAt(x)^h);return D}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Wu={print:4,modify:8,copy:16,"annot-forms":32};function Ba(t,r,i,a){this.v=1,this.r=2;var c=192;t.forEach(function(m){if(Wu.perm!==void 0)throw new Error("Invalid permission: "+m);c+=Wu[m]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var l=(r+this.padding).substr(0,32),h=(i+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,h),this.P=-(1+(255^c)),this.encryptionKey=Xc(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=Zc(this.encryptionKey,this.padding)}function Fa(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var r="",i=t.length,a=0;a<i;a++){var c=t.charCodeAt(a);c<33||c===35||c===37||c===40||c===41||c===47||c===60||c===62||c===91||c===93||c===123||c===125||c>126?r+="#"+("0"+c.toString(16)).slice(-2):r+=t[a]}return r}function Yu(t){if(xr(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var r={};this.subscribe=function(i,a,c){if(c=c||!1,typeof i!="string"||typeof a!="function"||typeof c!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");r.hasOwnProperty(i)||(r[i]={});var l=Math.random().toString(35);return r[i][l]=[a,!!c],l},this.unsubscribe=function(i){for(var a in r)if(r[a][i])return delete r[a][i],Object.keys(r[a]).length===0&&delete r[a],!0;return!1},this.publish=function(i){if(r.hasOwnProperty(i)){var a=Array.prototype.slice.call(arguments,1),c=[];for(var l in r[i]){var h=r[i][l];try{h[0].apply(t,a)}catch(m){Lt.console&&Nr.error("jsPDF PubSub Error",m.message,m)}h[1]&&c.push(l)}c.length&&c.forEach(this.unsubscribe)}},this.getTopics=function(){return r}}function Al(t){if(!(this instanceof Al))return new Al(t);var r="opacity,stroke-opacity".split(",");for(var i in t)t.hasOwnProperty(i)&&r.indexOf(i)>=0&&(this[i]=t[i]);this.id="",this.objectNumber=-1}function yh(t,r){this.gState=t,this.matrix=r,this.id="",this.objectNumber=-1}function ba(t,r,i,a,c){if(!(this instanceof ba))return new ba(t,r,i,a,c);this.type=t==="axial"?2:3,this.coords=r,this.colors=i,yh.call(this,a,c)}function za(t,r,i,a,c){if(!(this instanceof za))return new za(t,r,i,a,c);this.boundingBox=t,this.xStep=r,this.yStep=i,this.stream="",this.cloneIndex=0,yh.call(this,a,c)}function _t(t){var r,i=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],c=arguments[2],l=arguments[3],h=[],m=1,x=16,y="S",v=null;xr(t=t||{})==="object"&&(i=t.orientation,a=t.unit||a,c=t.format||c,l=t.compress||t.compressPdf||l,(v=t.encryption||null)!==null&&(v.userPassword=v.userPassword||"",v.ownerPassword=v.ownerPassword||"",v.userPermissions=v.userPermissions||[]),m=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(r=t.precision),t.floatPrecision!==void 0&&(x=t.floatPrecision),y=t.defaultPathOperation||"S"),h=t.filters||(l===!0?["FlateEncode"]:h),a=a||"mm",i=(""+(i||"P")).toLowerCase();var C=t.putOnlyUsedFonts||!1,T={},A={internal:{},__private__:{}};A.__private__.PubSub=Yu;var D="1.3",_=A.__private__.getPdfVersion=function(){return D};A.__private__.setPdfVersion=function(N){D=N};var M={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};A.__private__.getPageFormats=function(){return M};var I=A.__private__.getPageFormat=function(N){return M[N]};c=c||"a4";var j={COMPAT:"compat",ADVANCED:"advanced"},B=j.COMPAT;function Z(){this.saveGraphicsState(),de(new wt(at,0,0,-at,0,Mn()*at).toString()+" cm"),this.setFontSize(this.getFontSize()/at),y="n",B=j.ADVANCED}function Q(){this.restoreGraphicsState(),y="S",B=j.COMPAT}var xe=A.__private__.combineFontStyleAndFontWeight=function(N,U){if(N=="bold"&&U=="normal"||N=="bold"&&U==400||N=="normal"&&U=="italic"||N=="bold"&&U=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return U&&(N=U==400||U==="normal"?N==="italic"?"italic":"normal":U!=700&&U!=="bold"||N!=="normal"?(U==700?"bold":U)+""+N:"bold"),N};A.advancedAPI=function(N){var U=B===j.COMPAT;return U&&Z.call(this),typeof N!="function"||(N(this),U&&Q.call(this)),this},A.compatAPI=function(N){var U=B===j.ADVANCED;return U&&Q.call(this),typeof N!="function"||(N(this),U&&Z.call(this)),this},A.isAdvancedAPI=function(){return B===j.ADVANCED};var $,ie=function(N){if(B!==j.ADVANCED)throw new Error(N+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ce=A.roundToPrecision=A.__private__.roundToPrecision=function(N,U){var ee=r||U;if(isNaN(N)||isNaN(ee))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return N.toFixed(ee).replace(/0+$/,"")};$=A.hpf=A.__private__.hpf=typeof x=="number"?function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return ce(N,x)}:x==="smart"?function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return ce(N,N>-1&&N<1?16:5)}:function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return ce(N,16)};var De=A.f2=A.__private__.f2=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.f2");return ce(N,2)},Y=A.__private__.f3=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.f3");return ce(N,3)},V=A.scale=A.__private__.scale=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.scale");return B===j.COMPAT?N*at:B===j.ADVANCED?N:void 0},oe=function(N){return B===j.COMPAT?Mn()-N:B===j.ADVANCED?N:void 0},le=function(N){return V(oe(N))};A.__private__.setPrecision=A.setPrecision=function(N){typeof parseInt(N,10)=="number"&&(r=parseInt(N,10))};var ne,Te="00000000000000000000000000000000",Se=A.__private__.getFileId=function(){return Te},Ie=A.__private__.setFileId=function(N){return Te=N!==void 0&&/^[a-fA-F0-9]{32}$/.test(N)?N.toUpperCase():Te.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),v!==null&&(en=new Ba(v.userPermissions,v.userPassword,v.ownerPassword,Te)),Te};A.setFileId=function(N){return Ie(N),this},A.getFileId=function(){return Se()};var se=A.__private__.convertDateToPDFDate=function(N){var U=N.getTimezoneOffset(),ee=U<0?"+":"-",fe=Math.floor(Math.abs(U/60)),Ce=Math.abs(U%60),Ve=[ee,K(fe),"'",K(Ce),"'"].join("");return["D:",N.getFullYear(),K(N.getMonth()+1),K(N.getDate()),K(N.getHours()),K(N.getMinutes()),K(N.getSeconds()),Ve].join("")},be=A.__private__.convertPDFDateToDate=function(N){var U=parseInt(N.substr(2,4),10),ee=parseInt(N.substr(6,2),10)-1,fe=parseInt(N.substr(8,2),10),Ce=parseInt(N.substr(10,2),10),Ve=parseInt(N.substr(12,2),10),$e=parseInt(N.substr(14,2),10);return new Date(U,ee,fe,Ce,Ve,$e,0)},Ge=A.__private__.setCreationDate=function(N){var U;if(N===void 0&&(N=new Date),N instanceof Date)U=se(N);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(N))throw new Error("Invalid argument passed to jsPDF.setCreationDate");U=N}return ne=U},O=A.__private__.getCreationDate=function(N){var U=ne;return N==="jsDate"&&(U=be(ne)),U};A.setCreationDate=function(N){return Ge(N),this},A.getCreationDate=function(N){return O(N)};var W,K=A.__private__.padd2=function(N){return("0"+parseInt(N)).slice(-2)},ue=A.__private__.padd2Hex=function(N){return("00"+(N=N.toString())).substr(N.length)},ae=0,Ee=[],Ae=[],ke=0,ze=[],Be=[],et=!1,Fe=Ae,mt=function(){ae=0,ke=0,Ae=[],Ee=[],ze=[],Ln=yr(),Vn=yr()};A.__private__.setCustomOutputDestination=function(N){et=!0,Fe=N};var Pe=function(N){et||(Fe=N)};A.__private__.resetCustomOutputDestination=function(){et=!1,Fe=Ae};var de=A.__private__.out=function(N){return N=N.toString(),ke+=N.length+1,Fe.push(N),Fe},pt=A.__private__.write=function(N){return de(arguments.length===1?N.toString():Array.prototype.join.call(arguments," "))},nt=A.__private__.getArrayBuffer=function(N){for(var U=N.length,ee=new ArrayBuffer(U),fe=new Uint8Array(ee);U--;)fe[U]=N.charCodeAt(U);return ee},He=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];A.__private__.getStandardFonts=function(){return He};var st=t.fontSize||16;A.__private__.setFontSize=A.setFontSize=function(N){return st=B===j.ADVANCED?N/at:N,this};var Re,rt=A.__private__.getFontSize=A.getFontSize=function(){return B===j.COMPAT?st:st*at},ht=t.R2L||!1;A.__private__.setR2L=A.setR2L=function(N){return ht=N,this},A.__private__.getR2L=A.getR2L=function(){return ht};var dt,It=A.__private__.setZoomMode=function(N){var U=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(N))Re=N;else if(isNaN(N)){if(U.indexOf(N)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+N+'" is not recognized.');Re=N}else Re=parseInt(N,10)};A.__private__.getZoomMode=function(){return Re};var At,Vt=A.__private__.setPageMode=function(N){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(N)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+N+'" is not recognized.');dt=N};A.__private__.getPageMode=function(){return dt};var Rt=A.__private__.setLayoutMode=function(N){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(N)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+N+'" is not recognized.');At=N};A.__private__.getLayoutMode=function(){return At},A.__private__.setDisplayMode=A.setDisplayMode=function(N,U,ee){return It(N),Rt(U),Vt(ee),this};var ft={title:"",subject:"",author:"",keywords:"",creator:""};A.__private__.getDocumentProperty=function(N){if(Object.keys(ft).indexOf(N)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ft[N]},A.__private__.getDocumentProperties=function(){return ft},A.__private__.setDocumentProperties=A.setProperties=A.setDocumentProperties=function(N){for(var U in ft)ft.hasOwnProperty(U)&&N[U]&&(ft[U]=N[U]);return this},A.__private__.setDocumentProperty=function(N,U){if(Object.keys(ft).indexOf(N)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ft[N]=U};var Bt,at,Ar,St,it,Dt={},Tt={},sr=[],Qt={},Ti={},jr={},qt={},Cn=null,_r=0,Ot=[],Gt=new Yu(A),ji=t.hotfixes||[],nr={},Sn={},Hn=[],wt=function N(U,ee,fe,Ce,Ve,$e){if(!(this instanceof N))return new N(U,ee,fe,Ce,Ve,$e);isNaN(U)&&(U=1),isNaN(ee)&&(ee=0),isNaN(fe)&&(fe=0),isNaN(Ce)&&(Ce=1),isNaN(Ve)&&(Ve=0),isNaN($e)&&($e=0),this._matrix=[U,ee,fe,Ce,Ve,$e]};Object.defineProperty(wt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(N){this._matrix[0]=N}}),Object.defineProperty(wt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(N){this._matrix[1]=N}}),Object.defineProperty(wt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(N){this._matrix[2]=N}}),Object.defineProperty(wt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(N){this._matrix[3]=N}}),Object.defineProperty(wt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(N){this._matrix[4]=N}}),Object.defineProperty(wt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(N){this._matrix[5]=N}}),Object.defineProperty(wt.prototype,"a",{get:function(){return this._matrix[0]},set:function(N){this._matrix[0]=N}}),Object.defineProperty(wt.prototype,"b",{get:function(){return this._matrix[1]},set:function(N){this._matrix[1]=N}}),Object.defineProperty(wt.prototype,"c",{get:function(){return this._matrix[2]},set:function(N){this._matrix[2]=N}}),Object.defineProperty(wt.prototype,"d",{get:function(){return this._matrix[3]},set:function(N){this._matrix[3]=N}}),Object.defineProperty(wt.prototype,"e",{get:function(){return this._matrix[4]},set:function(N){this._matrix[4]=N}}),Object.defineProperty(wt.prototype,"f",{get:function(){return this._matrix[5]},set:function(N){this._matrix[5]=N}}),Object.defineProperty(wt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(wt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(wt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(wt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),wt.prototype.join=function(N){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map($).join(N)},wt.prototype.multiply=function(N){var U=N.sx*this.sx+N.shy*this.shx,ee=N.sx*this.shy+N.shy*this.sy,fe=N.shx*this.sx+N.sy*this.shx,Ce=N.shx*this.shy+N.sy*this.sy,Ve=N.tx*this.sx+N.ty*this.shx+this.tx,$e=N.tx*this.shy+N.ty*this.sy+this.ty;return new wt(U,ee,fe,Ce,Ve,$e)},wt.prototype.decompose=function(){var N=this.sx,U=this.shy,ee=this.shx,fe=this.sy,Ce=this.tx,Ve=this.ty,$e=Math.sqrt(N*N+U*U),ct=(N/=$e)*ee+(U/=$e)*fe;ee-=N*ct,fe-=U*ct;var Ct=Math.sqrt(ee*ee+fe*fe);return ct/=Ct,N*(fe/=Ct)<U*(ee/=Ct)&&(N=-N,U=-U,ct=-ct,$e=-$e),{scale:new wt($e,0,0,Ct,0,0),translate:new wt(1,0,0,1,Ce,Ve),rotate:new wt(N,U,-U,N,0,0),skew:new wt(1,0,ct,1,0,0)}},wt.prototype.toString=function(N){return this.join(" ")},wt.prototype.inversed=function(){var N=this.sx,U=this.shy,ee=this.shx,fe=this.sy,Ce=this.tx,Ve=this.ty,$e=1/(N*fe-U*ee),ct=fe*$e,Ct=-U*$e,Mt=-ee*$e,Pt=N*$e;return new wt(ct,Ct,Mt,Pt,-ct*Ce-Mt*Ve,-Ct*Ce-Pt*Ve)},wt.prototype.applyToPoint=function(N){var U=N.x*this.sx+N.y*this.shx+this.tx,ee=N.x*this.shy+N.y*this.sy+this.ty;return new Ss(U,ee)},wt.prototype.applyToRectangle=function(N){var U=this.applyToPoint(N),ee=this.applyToPoint(new Ss(N.x+N.w,N.y+N.h));return new ga(U.x,U.y,ee.x-U.x,ee.y-U.y)},wt.prototype.clone=function(){var N=this.sx,U=this.shy,ee=this.shx,fe=this.sy,Ce=this.tx,Ve=this.ty;return new wt(N,U,ee,fe,Ce,Ve)},A.Matrix=wt;var ni=A.matrixMult=function(N,U){return U.multiply(N)},xn=new wt(1,0,0,1,0,0);A.unitMatrix=A.identityMatrix=xn;var yn=function(N,U){if(!Ti[N]){var ee=(U instanceof ba?"Sh":"P")+(Object.keys(Qt).length+1).toString(10);U.id=ee,Ti[N]=ee,Qt[ee]=U,Gt.publish("addPattern",U)}};A.ShadingPattern=ba,A.TilingPattern=za,A.addShadingPattern=function(N,U){return ie("addShadingPattern()"),yn(N,U),this},A.beginTilingPattern=function(N){ie("beginTilingPattern()"),Es(N.boundingBox[0],N.boundingBox[1],N.boundingBox[2]-N.boundingBox[0],N.boundingBox[3]-N.boundingBox[1],N.matrix)},A.endTilingPattern=function(N,U){ie("endTilingPattern()"),U.stream=Be[W].join(`
`),yn(N,U),Gt.publish("endTilingPattern",U),Hn.pop().restore()};var ir=A.__private__.newObject=function(){var N=yr();return Cr(N,!0),N},yr=A.__private__.newObjectDeferred=function(){return ae++,Ee[ae]=function(){return ke},ae},Cr=function(N,U){return U=typeof U=="boolean"&&U,Ee[N]=ke,U&&de(N+" 0 obj"),N},ut=A.__private__.newAdditionalObject=function(){var N={objId:yr(),content:""};return ze.push(N),N},Ln=yr(),Vn=yr(),Sr=A.__private__.decodeColorString=function(N){var U=N.split(" ");if(U.length!==2||U[1]!=="g"&&U[1]!=="G")U.length===5&&(U[4]==="k"||U[4]==="K")&&(U=[(1-U[0])*(1-U[3]),(1-U[1])*(1-U[3]),(1-U[2])*(1-U[3]),"r"]);else{var ee=parseFloat(U[0]);U=[ee,ee,ee,"r"]}for(var fe="#",Ce=0;Ce<3;Ce++)fe+=("0"+Math.floor(255*parseFloat(U[Ce])).toString(16)).slice(-2);return fe},bn=A.__private__.encodeColorString=function(N){var U;typeof N=="string"&&(N={ch1:N});var ee=N.ch1,fe=N.ch2,Ce=N.ch3,Ve=N.ch4,$e=N.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ee=="string"&&ee.charAt(0)!=="#"){var ct=new ph(ee);if(ct.ok)ee=ct.toHex();else if(!/^\d*\.?\d*$/.test(ee))throw new Error('Invalid color "'+ee+'" passed to jsPDF.encodeColorString.')}if(typeof ee=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ee)&&(ee="#"+ee[1]+ee[1]+ee[2]+ee[2]+ee[3]+ee[3]),typeof ee=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ee)){var Ct=parseInt(ee.substr(1),16);ee=Ct>>16&255,fe=Ct>>8&255,Ce=255&Ct}if(fe===void 0||Ve===void 0&&ee===fe&&fe===Ce)if(typeof ee=="string")U=ee+" "+$e[0];else switch(N.precision){case 2:U=De(ee/255)+" "+$e[0];break;case 3:default:U=Y(ee/255)+" "+$e[0]}else if(Ve===void 0||xr(Ve)==="object"){if(Ve&&!isNaN(Ve.a)&&Ve.a===0)return U=["1.","1.","1.",$e[1]].join(" ");if(typeof ee=="string")U=[ee,fe,Ce,$e[1]].join(" ");else switch(N.precision){case 2:U=[De(ee/255),De(fe/255),De(Ce/255),$e[1]].join(" ");break;default:case 3:U=[Y(ee/255),Y(fe/255),Y(Ce/255),$e[1]].join(" ")}}else if(typeof ee=="string")U=[ee,fe,Ce,Ve,$e[2]].join(" ");else switch(N.precision){case 2:U=[De(ee),De(fe),De(Ce),De(Ve),$e[2]].join(" ");break;case 3:default:U=[Y(ee),Y(fe),Y(Ce),Y(Ve),$e[2]].join(" ")}return U},Gn=A.__private__.getFilters=function(){return h},En=A.__private__.putStream=function(N){var U=(N=N||{}).data||"",ee=N.filters||Gn(),fe=N.alreadyAppliedFilters||[],Ce=N.addLength1||!1,Ve=U.length,$e=N.objectId,ct=function(wn){return wn};if(v!==null&&$e===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");v!==null&&(ct=en.encryptor($e,0));var Ct={};ee===!0&&(ee=["FlateEncode"]);var Mt=N.additionalKeyValues||[],Pt=(Ct=_t.API.processDataByFilters!==void 0?_t.API.processDataByFilters(U,ee):{data:U,reverseChain:[]}).reverseChain+(Array.isArray(fe)?fe.join(" "):fe.toString());if(Ct.data.length!==0&&(Mt.push({key:"Length",value:Ct.data.length}),Ce===!0&&Mt.push({key:"Length1",value:Ve})),Pt.length!=0)if(Pt.split("/").length-1==1)Mt.push({key:"Filter",value:Pt});else{Mt.push({key:"Filter",value:"["+Pt+"]"});for(var Kt=0;Kt<Mt.length;Kt+=1)if(Mt[Kt].key==="DecodeParms"){for(var Dr=[],fr=0;fr<Ct.reverseChain.split("/").length-1;fr+=1)Dr.push("null");Dr.push(Mt[Kt].value),Mt[Kt].value="["+Dr.join(" ")+"]"}}de("<<");for(var Br=0;Br<Mt.length;Br++)de("/"+Mt[Br].key+" "+Mt[Br].value);de(">>"),Ct.data.length!==0&&(de("stream"),de(ct(Ct.data)),de("endstream"))},Kr=A.__private__.putPage=function(N){var U=N.number,ee=N.data,fe=N.objId,Ce=N.contentsObjId;Cr(fe,!0),de("<</Type /Page"),de("/Parent "+N.rootDictionaryObjId+" 0 R"),de("/Resources "+N.resourceDictionaryObjId+" 0 R"),de("/MediaBox ["+parseFloat($(N.mediaBox.bottomLeftX))+" "+parseFloat($(N.mediaBox.bottomLeftY))+" "+$(N.mediaBox.topRightX)+" "+$(N.mediaBox.topRightY)+"]"),N.cropBox!==null&&de("/CropBox ["+$(N.cropBox.bottomLeftX)+" "+$(N.cropBox.bottomLeftY)+" "+$(N.cropBox.topRightX)+" "+$(N.cropBox.topRightY)+"]"),N.bleedBox!==null&&de("/BleedBox ["+$(N.bleedBox.bottomLeftX)+" "+$(N.bleedBox.bottomLeftY)+" "+$(N.bleedBox.topRightX)+" "+$(N.bleedBox.topRightY)+"]"),N.trimBox!==null&&de("/TrimBox ["+$(N.trimBox.bottomLeftX)+" "+$(N.trimBox.bottomLeftY)+" "+$(N.trimBox.topRightX)+" "+$(N.trimBox.topRightY)+"]"),N.artBox!==null&&de("/ArtBox ["+$(N.artBox.bottomLeftX)+" "+$(N.artBox.bottomLeftY)+" "+$(N.artBox.topRightX)+" "+$(N.artBox.topRightY)+"]"),typeof N.userUnit=="number"&&N.userUnit!==1&&de("/UserUnit "+N.userUnit),Gt.publish("putPage",{objId:fe,pageContext:Ot[U],pageNumber:U,page:ee}),de("/Contents "+Ce+" 0 R"),de(">>"),de("endobj");var Ve=ee.join(`
`);return B===j.ADVANCED&&(Ve+=`
Q`),Cr(Ce,!0),En({data:Ve,filters:Gn(),objectId:Ce}),de("endobj"),fe},ns=A.__private__.putPages=function(){var N,U,ee=[];for(N=1;N<=_r;N++)Ot[N].objId=yr(),Ot[N].contentsObjId=yr();for(N=1;N<=_r;N++)ee.push(Kr({number:N,data:Be[N],objId:Ot[N].objId,contentsObjId:Ot[N].contentsObjId,mediaBox:Ot[N].mediaBox,cropBox:Ot[N].cropBox,bleedBox:Ot[N].bleedBox,trimBox:Ot[N].trimBox,artBox:Ot[N].artBox,userUnit:Ot[N].userUnit,rootDictionaryObjId:Ln,resourceDictionaryObjId:Vn}));Cr(Ln,!0),de("<</Type /Pages");var fe="/Kids [";for(U=0;U<_r;U++)fe+=ee[U]+" 0 R ";de(fe+"]"),de("/Count "+_r),de(">>"),de("endobj"),Gt.publish("postPutPages")},ws=function(N){Gt.publish("putFont",{font:N,out:de,newObject:ir,putStream:En}),N.isAlreadyPutted!==!0&&(N.objectNumber=ir(),de("<<"),de("/Type /Font"),de("/BaseFont /"+Fa(N.postScriptName)),de("/Subtype /Type1"),typeof N.encoding=="string"&&de("/Encoding /"+N.encoding),de("/FirstChar 32"),de("/LastChar 255"),de(">>"),de("endobj"))},In=function(){for(var N in Dt)Dt.hasOwnProperty(N)&&(C===!1||C===!0&&T.hasOwnProperty(N))&&ws(Dt[N])},Gr=function(N){N.objectNumber=ir();var U=[];U.push({key:"Type",value:"/XObject"}),U.push({key:"Subtype",value:"/Form"}),U.push({key:"BBox",value:"["+[$(N.x),$(N.y),$(N.x+N.width),$(N.y+N.height)].join(" ")+"]"}),U.push({key:"Matrix",value:"["+N.matrix.toString()+"]"});var ee=N.pages[1].join(`
`);En({data:ee,additionalKeyValues:U,objectId:N.objectNumber}),de("endobj")},dr=function(){for(var N in nr)nr.hasOwnProperty(N)&&Gr(nr[N])},ea=function(N,U){var ee,fe=[],Ce=1/(U-1);for(ee=0;ee<1;ee+=Ce)fe.push(ee);if(fe.push(1),N[0].offset!=0){var Ve={offset:0,color:N[0].color};N.unshift(Ve)}if(N[N.length-1].offset!=1){var $e={offset:1,color:N[N.length-1].color};N.push($e)}for(var ct="",Ct=0,Mt=0;Mt<fe.length;Mt++){for(ee=fe[Mt];ee>N[Ct+1].offset;)Ct++;var Pt=N[Ct].offset,Kt=(ee-Pt)/(N[Ct+1].offset-Pt),Dr=N[Ct].color,fr=N[Ct+1].color;ct+=ue(Math.round((1-Kt)*Dr[0]+Kt*fr[0]).toString(16))+ue(Math.round((1-Kt)*Dr[1]+Kt*fr[1]).toString(16))+ue(Math.round((1-Kt)*Dr[2]+Kt*fr[2]).toString(16))}return ct.trim()},mi=function(N,U){U||(U=21);var ee=ir(),fe=ea(N.colors,U),Ce=[];Ce.push({key:"FunctionType",value:"0"}),Ce.push({key:"Domain",value:"[0.0 1.0]"}),Ce.push({key:"Size",value:"["+U+"]"}),Ce.push({key:"BitsPerSample",value:"8"}),Ce.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ce.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),En({data:fe,additionalKeyValues:Ce,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ee}),de("endobj"),N.objectNumber=ir(),de("<< /ShadingType "+N.type),de("/ColorSpace /DeviceRGB");var Ve="/Coords ["+$(parseFloat(N.coords[0]))+" "+$(parseFloat(N.coords[1]))+" ";N.type===2?Ve+=$(parseFloat(N.coords[2]))+" "+$(parseFloat(N.coords[3])):Ve+=$(parseFloat(N.coords[2]))+" "+$(parseFloat(N.coords[3]))+" "+$(parseFloat(N.coords[4]))+" "+$(parseFloat(N.coords[5])),de(Ve+="]"),N.matrix&&de("/Matrix ["+N.matrix.toString()+"]"),de("/Function "+ee+" 0 R"),de("/Extend [true true]"),de(">>"),de("endobj")},ta=function(N,U){var ee=yr(),fe=ir();U.push({resourcesOid:ee,objectOid:fe}),N.objectNumber=fe;var Ce=[];Ce.push({key:"Type",value:"/Pattern"}),Ce.push({key:"PatternType",value:"1"}),Ce.push({key:"PaintType",value:"1"}),Ce.push({key:"TilingType",value:"1"}),Ce.push({key:"BBox",value:"["+N.boundingBox.map($).join(" ")+"]"}),Ce.push({key:"XStep",value:$(N.xStep)}),Ce.push({key:"YStep",value:$(N.yStep)}),Ce.push({key:"Resources",value:ee+" 0 R"}),N.matrix&&Ce.push({key:"Matrix",value:"["+N.matrix.toString()+"]"}),En({data:N.stream,additionalKeyValues:Ce,objectId:N.objectNumber}),de("endobj")},Xe=function(N){var U;for(U in Qt)Qt.hasOwnProperty(U)&&(Qt[U]instanceof ba?mi(Qt[U]):Qt[U]instanceof za&&ta(Qt[U],N))},Ea=function(N){for(var U in N.objectNumber=ir(),de("<<"),N)switch(U){case"opacity":de("/ca "+De(N[U]));break;case"stroke-opacity":de("/CA "+De(N[U]))}de(">>"),de("endobj")},Er=function(){var N;for(N in jr)jr.hasOwnProperty(N)&&Ea(jr[N])},pi=function(){for(var N in de("/XObject <<"),nr)nr.hasOwnProperty(N)&&nr[N].objectNumber>=0&&de("/"+N+" "+nr[N].objectNumber+" 0 R");Gt.publish("putXobjectDict"),de(">>")},ro=function(){en.oid=ir(),de("<<"),de("/Filter /Standard"),de("/V "+en.v),de("/R "+en.r),de("/U <"+en.toHexString(en.U)+">"),de("/O <"+en.toHexString(en.O)+">"),de("/P "+en.P),de(">>"),de("endobj")},er=function(){for(var N in de("/Font <<"),Dt)Dt.hasOwnProperty(N)&&(C===!1||C===!0&&T.hasOwnProperty(N))&&de("/"+N+" "+Dt[N].objectNumber+" 0 R");de(">>")},tr=function(){if(Object.keys(Qt).length>0){for(var N in de("/Shading <<"),Qt)Qt.hasOwnProperty(N)&&Qt[N]instanceof ba&&Qt[N].objectNumber>=0&&de("/"+N+" "+Qt[N].objectNumber+" 0 R");Gt.publish("putShadingPatternDict"),de(">>")}},Wt=function(N){if(Object.keys(Qt).length>0){for(var U in de("/Pattern <<"),Qt)Qt.hasOwnProperty(U)&&Qt[U]instanceof A.TilingPattern&&Qt[U].objectNumber>=0&&Qt[U].objectNumber<N&&de("/"+U+" "+Qt[U].objectNumber+" 0 R");Gt.publish("putTilingPatternDict"),de(">>")}},ra=function(){if(Object.keys(jr).length>0){var N;for(N in de("/ExtGState <<"),jr)jr.hasOwnProperty(N)&&jr[N].objectNumber>=0&&de("/"+N+" "+jr[N].objectNumber+" 0 R");Gt.publish("putGStateDict"),de(">>")}},Lr=function(N){Cr(N.resourcesOid,!0),de("<<"),de("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),er(),tr(),Wt(N.objectOid),ra(),pi(),de(">>"),de("endobj")},vs=function(){var N=[];In(),Er(),dr(),Xe(N),Gt.publish("putResources"),N.forEach(Lr),Lr({resourcesOid:Vn,objectOid:Number.MAX_SAFE_INTEGER}),Gt.publish("postPutResources")},Pr=function(){Gt.publish("putAdditionalObjects");for(var N=0;N<ze.length;N++){var U=ze[N];Cr(U.objId,!0),de(U.content),de("endobj")}Gt.publish("postPutAdditionalObjects")},ii=function(N){Tt[N.fontName]=Tt[N.fontName]||{},Tt[N.fontName][N.fontStyle]=N.id},na=function(N,U,ee,fe,Ce){var Ve={id:"F"+(Object.keys(Dt).length+1).toString(10),postScriptName:N,fontName:U,fontStyle:ee,encoding:fe,isStandardFont:Ce||!1,metadata:{}};return Gt.publish("addFont",{font:Ve,instance:this}),Dt[Ve.id]=Ve,ii(Ve),Ve.id},kr=function(N){for(var U=0,ee=He.length;U<ee;U++){var fe=na.call(this,N[U][0],N[U][1],N[U][2],He[U][3],!0);C===!1&&(T[fe]=!0);var Ce=N[U][0].split("-");ii({id:fe,fontName:Ce[0],fontStyle:Ce[1]||""})}Gt.publish("addFonts",{fonts:Dt,dictionary:Tt})},ln=function(N){return N.foo=function(){try{return N.apply(this,arguments)}catch(fe){var U=fe.stack||"";~U.indexOf(" at ")&&(U=U.split(" at ")[1]);var ee="Error in function "+U.split(`
`)[0].split("<")[0]+": "+fe.message;if(!Lt.console)throw new Error(ee);Lt.console.error(ee,fe),Lt.alert&&alert(ee)}},N.foo.bar=N,N.foo},Ns=function(N,U){var ee,fe,Ce,Ve,$e,ct,Ct,Mt,Pt;if(Ce=(U=U||{}).sourceEncoding||"Unicode",$e=U.outputEncoding,(U.autoencode||$e)&&Dt[Bt].metadata&&Dt[Bt].metadata[Ce]&&Dt[Bt].metadata[Ce].encoding&&(Ve=Dt[Bt].metadata[Ce].encoding,!$e&&Dt[Bt].encoding&&($e=Dt[Bt].encoding),!$e&&Ve.codePages&&($e=Ve.codePages[0]),typeof $e=="string"&&($e=Ve[$e]),$e)){for(Ct=!1,ct=[],ee=0,fe=N.length;ee<fe;ee++)(Mt=$e[N.charCodeAt(ee)])?ct.push(String.fromCharCode(Mt)):ct.push(N[ee]),ct[ee].charCodeAt(0)>>8&&(Ct=!0);N=ct.join("")}for(ee=N.length;Ct===void 0&&ee!==0;)N.charCodeAt(ee-1)>>8&&(Ct=!0),ee--;if(!Ct)return N;for(ct=U.noBOM?[]:[254,255],ee=0,fe=N.length;ee<fe;ee++){if((Pt=(Mt=N.charCodeAt(ee))>>8)>>8)throw new Error("Character at position "+ee+" of string '"+N+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ct.push(Pt),ct.push(Mt-(Pt<<8))}return String.fromCharCode.apply(void 0,ct)},Qr=A.__private__.pdfEscape=A.pdfEscape=function(N,U){return Ns(N,U).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},cr=A.__private__.beginPage=function(N){Be[++_r]=[],Ot[_r]={objId:0,contentsObjId:0,userUnit:Number(m),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(N[0]),topRightY:Number(N[1])}},J(_r),Pe(Be[W])},Jr=function(N,U){var ee,fe,Ce;switch(i=U||i,typeof N=="string"&&(ee=I(N.toLowerCase()),Array.isArray(ee)&&(fe=ee[0],Ce=ee[1])),Array.isArray(N)&&(fe=N[0]*at,Ce=N[1]*at),isNaN(fe)&&(fe=c[0],Ce=c[1]),(fe>14400||Ce>14400)&&(Nr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),fe=Math.min(14400,fe),Ce=Math.min(14400,Ce)),c=[fe,Ce],i.substr(0,1)){case"l":Ce>fe&&(c=[Ce,fe]);break;case"p":fe>Ce&&(c=[Ce,fe])}cr(c),un(Li),de(Kn),qr!==0&&de(qr+" J"),Vi!==0&&de(Vi+" j"),Gt.publish("addPage",{pageNumber:_r})},je=function(N){N>0&&N<=_r&&(Be.splice(N,1),Ot.splice(N,1),_r--,W>_r&&(W=_r),this.setPage(W))},J=function(N){N>0&&N<=_r&&(W=N)},vt=A.__private__.getNumberOfPages=A.getNumberOfPages=function(){return Be.length-1},zr=function(N,U,ee){var fe,Ce=void 0;return ee=ee||{},N=N!==void 0?N:Dt[Bt].fontName,U=U!==void 0?U:Dt[Bt].fontStyle,fe=N.toLowerCase(),Tt[fe]!==void 0&&Tt[fe][U]!==void 0?Ce=Tt[fe][U]:Tt[N]!==void 0&&Tt[N][U]!==void 0?Ce=Tt[N][U]:ee.disableWarning===!1&&Nr.warn("Unable to look up font label for font '"+N+"', '"+U+"'. Refer to getFontList() for available fonts."),Ce||ee.noFallback||(Ce=Tt.times[U])==null&&(Ce=Tt.times.normal),Ce},kn=A.__private__.putInfo=function(){var N=ir(),U=function(fe){return fe};for(var ee in v!==null&&(U=en.encryptor(N,0)),de("<<"),de("/Producer ("+Qr(U("jsPDF "+_t.version))+")"),ft)ft.hasOwnProperty(ee)&&ft[ee]&&de("/"+ee.substr(0,1).toUpperCase()+ee.substr(1)+" ("+Qr(U(ft[ee]))+")");de("/CreationDate ("+Qr(U(ne))+")"),de(">>"),de("endobj")},ia=A.__private__.putCatalog=function(N){var U=(N=N||{}).rootDictionaryObjId||Ln;switch(ir(),de("<<"),de("/Type /Catalog"),de("/Pages "+U+" 0 R"),Re||(Re="fullwidth"),Re){case"fullwidth":de("/OpenAction [3 0 R /FitH null]");break;case"fullheight":de("/OpenAction [3 0 R /FitV null]");break;case"fullpage":de("/OpenAction [3 0 R /Fit]");break;case"original":de("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ee=""+Re;ee.substr(ee.length-1)==="%"&&(Re=parseInt(Re)/100),typeof Re=="number"&&de("/OpenAction [3 0 R /XYZ null null "+De(Re)+"]")}switch(At||(At="continuous"),At){case"continuous":de("/PageLayout /OneColumn");break;case"single":de("/PageLayout /SinglePage");break;case"two":case"twoleft":de("/PageLayout /TwoColumnLeft");break;case"tworight":de("/PageLayout /TwoColumnRight")}dt&&de("/PageMode /"+dt),Gt.publish("putCatalog"),de(">>"),de("endobj")},sa=A.__private__.putTrailer=function(){de("trailer"),de("<<"),de("/Size "+(ae+1)),de("/Root "+ae+" 0 R"),de("/Info "+(ae-1)+" 0 R"),v!==null&&de("/Encrypt "+en.oid+" 0 R"),de("/ID [ <"+Te+"> <"+Te+"> ]"),de(">>")},Dn=A.__private__.putHeader=function(){de("%PDF-"+D),de("%ºß¬à")},Et=A.__private__.putXRef=function(){var N="0000000000";de("xref"),de("0 "+(ae+1)),de("0000000000 65535 f ");for(var U=1;U<=ae;U++)typeof Ee[U]=="function"?de((N+Ee[U]()).slice(-10)+" 00000 n "):Ee[U]!==void 0?de((N+Ee[U]).slice(-10)+" 00000 n "):de("0000000000 00000 n ")},ar=A.__private__.buildDocument=function(){mt(),Pe(Ae),Gt.publish("buildDocument"),Dn(),ns(),Pr(),vs(),v!==null&&ro(),kn(),ia();var N=ke;return Et(),sa(),de("startxref"),de(""+N),de("%%EOF"),Pe(Be[W]),Ae.join(`
`)},is=A.__private__.getBlob=function(N){return new Blob([nt(N)],{type:"application/pdf"})},As=A.output=A.__private__.output=ln(function(N,U){switch(typeof(U=U||{})=="string"?U={filename:U}:U.filename=U.filename||"generated.pdf",N){case void 0:return ar();case"save":A.save(U.filename);break;case"arraybuffer":return nt(ar());case"blob":return is(ar());case"bloburi":case"bloburl":if(Lt.URL!==void 0&&typeof Lt.URL.createObjectURL=="function")return Lt.URL&&Lt.URL.createObjectURL(is(ar()))||void 0;Nr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ee="",fe=ar();try{ee=Yc(fe)}catch{ee=Yc(unescape(encodeURIComponent(fe)))}return"data:application/pdf;filename="+U.filename+";base64,"+ee;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Lt)==="[object Window]"){var Ce="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ve=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';U.pdfObjectUrl&&(Ce=U.pdfObjectUrl,Ve="");var $e='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ce+'"'+Ve+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(U)+");<\/script></body></html>",ct=Lt.open();return ct!==null&&ct.document.write($e),ct}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Lt)==="[object Window]"){var Ct='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(U.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+U.filename+'" width="500px" height="400px" /></body></html>',Mt=Lt.open();if(Mt!==null){Mt.document.write(Ct);var Pt=this;Mt.document.documentElement.querySelector("#pdfViewer").onload=function(){Mt.document.title=U.filename,Mt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Pt.output("bloburl"))}}return Mt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Lt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Kt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",U)+'"></iframe></body></html>',Dr=Lt.open();if(Dr!==null&&(Dr.document.write(Kt),Dr.document.title=U.filename),Dr||typeof safari>"u")return Dr;break;case"datauri":case"dataurl":return Lt.document.location.href=this.output("datauristring",U);default:return null}}),Cs=function(N){return Array.isArray(ji)===!0&&ji.indexOf(N)>-1};switch(a){case"pt":at=1;break;case"mm":at=72/25.4;break;case"cm":at=72/2.54;break;case"in":at=72;break;case"px":at=Cs("px_scaling")==1?.75:96/72;break;case"pc":case"em":at=12;break;case"ex":at=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);at=a}var en=null;Ge(),Ie();var aa=function(N){return v!==null?en.encryptor(N,0):function(U){return U}},Ia=A.__private__.getPageInfo=A.getPageInfo=function(N){if(isNaN(N)||N%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ot[N].objId,pageNumber:N,pageContext:Ot[N]}},yt=A.__private__.getPageInfoByObjId=function(N){if(isNaN(N)||N%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var U in Ot)if(Ot[U].objId===N)break;return Ia(U)},ss=A.__private__.getCurrentPageInfo=A.getCurrentPageInfo=function(){return{objId:Ot[W].objId,pageNumber:W,pageContext:Ot[W]}};A.addPage=function(){return Jr.apply(this,arguments),this},A.setPage=function(){return J.apply(this,arguments),Pe.call(this,Be[W]),this},A.insertPage=function(N){return this.addPage(),this.movePage(W,N),this},A.movePage=function(N,U){var ee,fe;if(N>U){ee=Be[N],fe=Ot[N];for(var Ce=N;Ce>U;Ce--)Be[Ce]=Be[Ce-1],Ot[Ce]=Ot[Ce-1];Be[U]=ee,Ot[U]=fe,this.setPage(U)}else if(N<U){ee=Be[N],fe=Ot[N];for(var Ve=N;Ve<U;Ve++)Be[Ve]=Be[Ve+1],Ot[Ve]=Ot[Ve+1];Be[U]=ee,Ot[U]=fe,this.setPage(U)}return this},A.deletePage=function(){return je.apply(this,arguments),this},A.__private__.text=A.text=function(N,U,ee,fe,Ce){var Ve,$e,ct,Ct,Mt,Pt,Kt,Dr,fr,Br=(fe=fe||{}).scope||this;if(typeof N=="number"&&typeof U=="number"&&(typeof ee=="string"||Array.isArray(ee))){var wn=ee;ee=U,U=N,N=wn}if(arguments[3]instanceof wt?(ie("The transform parameter of text() with a Matrix value"),fr=Ce):(ct=arguments[4],Ct=arguments[5],xr(Kt=arguments[3])==="object"&&Kt!==null||(typeof ct=="string"&&(Ct=ct,ct=null),typeof Kt=="string"&&(Ct=Kt,Kt=null),typeof Kt=="number"&&(ct=Kt,Kt=null),fe={flags:Kt,angle:ct,align:Ct})),isNaN(U)||isNaN(ee)||N==null)throw new Error("Invalid arguments passed to jsPDF.text");if(N.length===0)return Br;var Fr="",ai=!1,Wr=typeof fe.lineHeightFactor=="number"?fe.lineHeightFactor:qi,Wn=Br.internal.scaleFactor;function Tn(Ir){return Ir=Ir.split("	").join(Array(fe.TabLen||9).join(" ")),Qr(Ir,Kt)}function Is(Ir){for(var Tr,rn=Ir.concat(),gn=[],cs=rn.length;cs--;)typeof(Tr=rn.shift())=="string"?gn.push(Tr):Array.isArray(Ir)&&(Tr.length===1||Tr[1]===void 0&&Tr[2]===void 0)?gn.push(Tr[0]):gn.push([Tr[0],Tr[1],Tr[2]]);return gn}function Pn(Ir,Tr){var rn;if(typeof Ir=="string")rn=Tr(Ir)[0];else if(Array.isArray(Ir)){for(var gn,cs,so=Ir.concat(),_a=[],Oo=so.length;Oo--;)typeof(gn=so.shift())=="string"?_a.push(Tr(gn)[0]):Array.isArray(gn)&&typeof gn[0]=="string"&&(cs=Tr(gn[0],gn[1],gn[2]),_a.push([cs[0],cs[1],cs[2]]));rn=_a}return rn}var Ts=!1,os=!0;if(typeof N=="string")Ts=!0;else if(Array.isArray(N)){var pa=N.concat();$e=[];for(var ls,br=pa.length;br--;)(typeof(ls=pa.shift())!="string"||Array.isArray(ls)&&typeof ls[0]!="string")&&(os=!1);Ts=os}if(Ts===!1)throw new Error('Type of text must be string or Array. "'+N+'" is not recognized.');typeof N=="string"&&(N=N.match(/[\r?\n]/)?N.split(/\r\n|\r|\n/g):[N]);var js=st/Br.internal.scaleFactor,Yi=js*(Wr-1);switch(fe.baseline){case"bottom":ee-=Yi;break;case"top":ee+=js-Yi;break;case"hanging":ee+=js-2*Yi;break;case"middle":ee+=js/2-Yi}if((Pt=fe.maxWidth||0)>0&&(typeof N=="string"?N=Br.splitTextToSize(N,Pt):Object.prototype.toString.call(N)==="[object Array]"&&(N=N.reduce(function(Ir,Tr){return Ir.concat(Br.splitTextToSize(Tr,Pt))},[]))),Ve={text:N,x:U,y:ee,options:fe,mutex:{pdfEscape:Qr,activeFontKey:Bt,fonts:Dt,activeFontSize:st}},Gt.publish("preProcessText",Ve),N=Ve.text,ct=(fe=Ve.options).angle,!(fr instanceof wt)&&ct&&typeof ct=="number"){ct*=Math.PI/180,fe.rotationDirection===0&&(ct=-ct),B===j.ADVANCED&&(ct=-ct);var wi=Math.cos(ct),Zt=Math.sin(ct);fr=new wt(wi,Zt,-Zt,wi,0,0)}else ct&&ct instanceof wt&&(fr=ct);B!==j.ADVANCED||fr||(fr=xn),(Mt=fe.charSpace||Oe)!==void 0&&(Fr+=$(V(Mt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Dr=fe.horizontalScale)!==void 0&&(Fr+=$(100*Dr)+` Tz
`),fe.lang;var hn=-1,R=fe.renderingMode!==void 0?fe.renderingMode:fe.stroke,e=Br.internal.getCurrentPageInfo().pageContext;switch(R){case 0:case!1:case"fill":hn=0;break;case 1:case!0:case"stroke":hn=1;break;case 2:case"fillThenStroke":hn=2;break;case 3:case"invisible":hn=3;break;case 4:case"fillAndAddForClipping":hn=4;break;case 5:case"strokeAndAddPathForClipping":hn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":hn=6;break;case 7:case"addToPathForClipping":hn=7}var n=e.usedRenderingMode!==void 0?e.usedRenderingMode:-1;hn!==-1?Fr+=hn+` Tr
`:n!==-1&&(Fr+=`0 Tr
`),hn!==-1&&(e.usedRenderingMode=hn),Ct=fe.align||"left";var s,d=st*Wr,u=Br.internal.pageSize.getWidth(),f=Dt[Bt];Mt=fe.charSpace||Oe,Pt=fe.maxWidth||0,Kt=Object.assign({autoencode:!0,noBOM:!0},fe.flags);var p=[],w=function(Ir){return Br.getStringUnitWidth(Ir,{font:f,charSpace:Mt,fontSize:st,doKerning:!1})*st/Wn};if(Object.prototype.toString.call(N)==="[object Array]"){var S;$e=Is(N),Ct!=="left"&&(s=$e.map(w));var k,P=0;if(Ct==="right"){U-=s[0],N=[],br=$e.length;for(var q=0;q<br;q++)q===0?(k=bi(U),S=ki(ee)):(k=V(P-s[q]),S=-d),N.push([$e[q],k,S]),P=s[q]}else if(Ct==="center"){U-=s[0]/2,N=[],br=$e.length;for(var te=0;te<br;te++)te===0?(k=bi(U),S=ki(ee)):(k=V((P-s[te])/2),S=-d),N.push([$e[te],k,S]),P=s[te]}else if(Ct==="left"){N=[],br=$e.length;for(var he=0;he<br;he++)N.push($e[he])}else if(Ct==="justify"&&f.encoding==="Identity-H"){N=[],br=$e.length,Pt=Pt!==0?Pt:u;for(var ge=0,we=0;we<br;we++)if(S=we===0?ki(ee):-d,k=we===0?bi(U):ge,we<br-1){var Me=V((Pt-s[we])/($e[we].split(" ").length-1)),Ke=$e[we].split(" ");N.push([Ke[0]+" ",k,S]),ge=0;for(var tt=1;tt<Ke.length;tt++){var Qe=(w(Ke[tt-1]+" "+Ke[tt])-w(Ke[tt]))*Wn+Me;tt==Ke.length-1?N.push([Ke[tt],Qe,0]):N.push([Ke[tt]+" ",Qe,0]),ge-=Qe}}else N.push([$e[we],k,S]);N.push(["",ge,0])}else{if(Ct!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(N=[],br=$e.length,Pt=Pt!==0?Pt:u,we=0;we<br;we++)S=we===0?ki(ee):-d,k=we===0?bi(U):0,we<br-1?p.push($(V((Pt-s[we])/($e[we].split(" ").length-1)))):p.push(0),N.push([$e[we],k,S])}}var Xt=typeof fe.R2L=="boolean"?fe.R2L:ht;Xt===!0&&(N=Pn(N,function(Ir,Tr,rn){return[Ir.split("").reverse().join(""),Tr,rn]})),Ve={text:N,x:U,y:ee,options:fe,mutex:{pdfEscape:Qr,activeFontKey:Bt,fonts:Dt,activeFontSize:st}},Gt.publish("postProcessText",Ve),N=Ve.text,ai=Ve.mutex.isHex||!1;var kt=Dt[Bt].encoding;kt!=="WinAnsiEncoding"&&kt!=="StandardEncoding"||(N=Pn(N,function(Ir,Tr,rn){return[Tn(Ir),Tr,rn]})),$e=Is(N),N=[];for(var Yr,fn,Vr,rr=0,Ur=1,tn=Array.isArray($e[0])?Ur:rr,Yn="",vi=function(Ir,Tr,rn){var gn="";return rn instanceof wt?(rn=typeof fe.angle=="number"?ni(rn,new wt(1,0,0,1,Ir,Tr)):ni(new wt(1,0,0,1,Ir,Tr),rn),B===j.ADVANCED&&(rn=ni(new wt(1,0,0,-1,0,0),rn)),gn=rn.join(" ")+` Tm
`):gn=$(Ir)+" "+$(Tr)+` Td
`,gn},Qn=0;Qn<$e.length;Qn++){switch(Yn="",tn){case Ur:Vr=(ai?"<":"(")+$e[Qn][0]+(ai?">":")"),Yr=parseFloat($e[Qn][1]),fn=parseFloat($e[Qn][2]);break;case rr:Vr=(ai?"<":"(")+$e[Qn]+(ai?">":")"),Yr=bi(U),fn=ki(ee)}p!==void 0&&p[Qn]!==void 0&&(Yn=p[Qn]+` Tw
`),Qn===0?N.push(Yn+vi(Yr,fn,fr)+Vr):tn===rr?N.push(Yn+Vr):tn===Ur&&N.push(Yn+vi(Yr,fn,fr)+Vr)}N=tn===rr?N.join(` Tj
T* `):N.join(` Tj
`),N+=` Tj
`;var Jn=`BT
/`;return Jn+=Bt+" "+st+` Tf
`,Jn+=$(st*Wr)+` TL
`,Jn+=On+`
`,Jn+=Fr,Jn+=N,de(Jn+="ET"),T[Bt]=!0,Br};var xi=A.__private__.clip=A.clip=function(N){return de(N==="evenodd"?"W*":"W"),this};A.clipEvenOdd=function(){return xi("evenodd")},A.__private__.discardPath=A.discardPath=function(){return de("n"),this};var Nt=A.__private__.isValidStyle=function(N){var U=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(N)!==-1&&(U=!0),U};A.__private__.setDefaultPathOperation=A.setDefaultPathOperation=function(N){return Nt(N)&&(y=N),this};var Ta=A.__private__.getStyle=A.getStyle=function(N){var U=y;switch(N){case"D":case"S":U="S";break;case"F":U="f";break;case"FD":case"DF":U="B";break;case"f":case"f*":case"B":case"B*":U=N}return U},Ft=A.close=function(){return de("h"),this};A.stroke=function(){return de("S"),this},A.fill=function(N){return Rr("f",N),this},A.fillEvenOdd=function(N){return Rr("f*",N),this},A.fillStroke=function(N){return Rr("B",N),this},A.fillStrokeEvenOdd=function(N){return Rr("B*",N),this};var Rr=function(N,U){xr(U)==="object"?ja(U,N):de(N)},oa=function(N){N===null||B===j.ADVANCED&&N===void 0||(N=Ta(N),de(N))};function la(N,U,ee,fe,Ce){var Ve=new za(U||this.boundingBox,ee||this.xStep,fe||this.yStep,this.gState,Ce||this.matrix);Ve.stream=this.stream;var $e=N+"$$"+this.cloneIndex+++"$$";return yn($e,Ve),Ve}var ja=function(N,U){var ee=Ti[N.key],fe=Qt[ee];if(fe instanceof ba)de("q"),de(_i(U)),fe.gState&&A.setGState(fe.gState),de(N.matrix.toString()+" cm"),de("/"+ee+" sh"),de("Q");else if(fe instanceof za){var Ce=new wt(1,0,0,-1,0,Mn());N.matrix&&(Ce=Ce.multiply(N.matrix||xn),ee=la.call(fe,N.key,N.boundingBox,N.xStep,N.yStep,Ce).id),de("q"),de("/Pattern cs"),de("/"+ee+" scn"),fe.gState&&A.setGState(fe.gState),de(U),de("Q")}},_i=function(N){switch(N){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},ca=A.moveTo=function(N,U){return de($(V(N))+" "+$(le(U))+" m"),this},si=A.lineTo=function(N,U){return de($(V(N))+" "+$(le(U))+" l"),this},$n=A.curveTo=function(N,U,ee,fe,Ce,Ve){return de([$(V(N)),$(le(U)),$(V(ee)),$(le(fe)),$(V(Ce)),$(le(Ve)),"c"].join(" ")),this};A.__private__.line=A.line=function(N,U,ee,fe,Ce){if(isNaN(N)||isNaN(U)||isNaN(ee)||isNaN(fe)||!Nt(Ce))throw new Error("Invalid arguments passed to jsPDF.line");return B===j.COMPAT?this.lines([[ee-N,fe-U]],N,U,[1,1],Ce||"S"):this.lines([[ee-N,fe-U]],N,U,[1,1]).stroke()},A.__private__.lines=A.lines=function(N,U,ee,fe,Ce,Ve){var $e,ct,Ct,Mt,Pt,Kt,Dr,fr,Br,wn,Fr,ai;if(typeof N=="number"&&(ai=ee,ee=U,U=N,N=ai),fe=fe||[1,1],Ve=Ve||!1,isNaN(U)||isNaN(ee)||!Array.isArray(N)||!Array.isArray(fe)||!Nt(Ce)||typeof Ve!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ca(U,ee),$e=fe[0],ct=fe[1],Mt=N.length,wn=U,Fr=ee,Ct=0;Ct<Mt;Ct++)(Pt=N[Ct]).length===2?(wn=Pt[0]*$e+wn,Fr=Pt[1]*ct+Fr,si(wn,Fr)):(Kt=Pt[0]*$e+wn,Dr=Pt[1]*ct+Fr,fr=Pt[2]*$e+wn,Br=Pt[3]*ct+Fr,wn=Pt[4]*$e+wn,Fr=Pt[5]*ct+Fr,$n(Kt,Dr,fr,Br,wn,Fr));return Ve&&Ft(),oa(Ce),this},A.path=function(N){for(var U=0;U<N.length;U++){var ee=N[U],fe=ee.c;switch(ee.op){case"m":ca(fe[0],fe[1]);break;case"l":si(fe[0],fe[1]);break;case"c":$n.apply(this,fe);break;case"h":Ft()}}return this},A.__private__.rect=A.rect=function(N,U,ee,fe,Ce){if(isNaN(N)||isNaN(U)||isNaN(ee)||isNaN(fe)||!Nt(Ce))throw new Error("Invalid arguments passed to jsPDF.rect");return B===j.COMPAT&&(fe=-fe),de([$(V(N)),$(le(U)),$(V(ee)),$(V(fe)),"re"].join(" ")),oa(Ce),this},A.__private__.triangle=A.triangle=function(N,U,ee,fe,Ce,Ve,$e){if(isNaN(N)||isNaN(U)||isNaN(ee)||isNaN(fe)||isNaN(Ce)||isNaN(Ve)||!Nt($e))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ee-N,fe-U],[Ce-ee,Ve-fe],[N-Ce,U-Ve]],N,U,[1,1],$e,!0),this},A.__private__.roundedRect=A.roundedRect=function(N,U,ee,fe,Ce,Ve,$e){if(isNaN(N)||isNaN(U)||isNaN(ee)||isNaN(fe)||isNaN(Ce)||isNaN(Ve)||!Nt($e))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ct=4/3*(Math.SQRT2-1);return Ce=Math.min(Ce,.5*ee),Ve=Math.min(Ve,.5*fe),this.lines([[ee-2*Ce,0],[Ce*ct,0,Ce,Ve-Ve*ct,Ce,Ve],[0,fe-2*Ve],[0,Ve*ct,-Ce*ct,Ve,-Ce,Ve],[2*Ce-ee,0],[-Ce*ct,0,-Ce,-Ve*ct,-Ce,-Ve],[0,2*Ve-fe],[0,-Ve*ct,Ce*ct,-Ve,Ce,-Ve]],N+Ce,U,[1,1],$e,!0),this},A.__private__.ellipse=A.ellipse=function(N,U,ee,fe,Ce){if(isNaN(N)||isNaN(U)||isNaN(ee)||isNaN(fe)||!Nt(Ce))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ve=4/3*(Math.SQRT2-1)*ee,$e=4/3*(Math.SQRT2-1)*fe;return ca(N+ee,U),$n(N+ee,U-$e,N+Ve,U-fe,N,U-fe),$n(N-Ve,U-fe,N-ee,U-$e,N-ee,U),$n(N-ee,U+$e,N-Ve,U+fe,N,U+fe),$n(N+Ve,U+fe,N+ee,U+$e,N+ee,U),oa(Ce),this},A.__private__.circle=A.circle=function(N,U,ee,fe){if(isNaN(N)||isNaN(U)||isNaN(ee)||!Nt(fe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(N,U,ee,ee,fe)},A.setFont=function(N,U,ee){return ee&&(U=xe(U,ee)),Bt=zr(N,U,{disableWarning:!1}),this};var as=A.__private__.getFont=A.getFont=function(){return Dt[zr.apply(A,arguments)]};A.__private__.getFontList=A.getFontList=function(){var N,U,ee={};for(N in Tt)if(Tt.hasOwnProperty(N))for(U in ee[N]=[],Tt[N])Tt[N].hasOwnProperty(U)&&ee[N].push(U);return ee},A.addFont=function(N,U,ee,fe,Ce){var Ve=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ve.indexOf(arguments[3])!==-1?Ce=arguments[3]:arguments[3]&&Ve.indexOf(arguments[3])==-1&&(ee=xe(ee,fe)),Ce=Ce||"Identity-H",na.call(this,N,U,ee,Ce)};var qi,Li=t.lineWidth||.200025,yi=A.__private__.getLineWidth=A.getLineWidth=function(){return Li},un=A.__private__.setLineWidth=A.setLineWidth=function(N){return Li=N,de($(V(N))+" w"),this};A.__private__.setLineDash=_t.API.setLineDash=_t.API.setLineDashPattern=function(N,U){if(N=N||[],U=U||0,isNaN(U)||!Array.isArray(N))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return N=N.map(function(ee){return $(V(ee))}).join(" "),U=$(V(U)),de("["+N+"] "+U+" d"),this};var da=A.__private__.getLineHeight=A.getLineHeight=function(){return st*qi};A.__private__.getLineHeight=A.getLineHeight=function(){return st*qi};var ua=A.__private__.setLineHeightFactor=A.setLineHeightFactor=function(N){return typeof(N=N||1.15)=="number"&&(qi=N),this},ha=A.__private__.getLineHeightFactor=A.getLineHeightFactor=function(){return qi};ua(t.lineHeight);var bi=A.__private__.getHorizontalCoordinate=function(N){return V(N)},ki=A.__private__.getVerticalCoordinate=function(N){return B===j.ADVANCED?N:Ot[W].mediaBox.topRightY-Ot[W].mediaBox.bottomLeftY-V(N)},no=A.__private__.getHorizontalCoordinateString=A.getHorizontalCoordinateString=function(N){return $(bi(N))},$t=A.__private__.getVerticalCoordinateString=A.getVerticalCoordinateString=function(N){return $(ki(N))},Kn=t.strokeColor||"0 G";A.__private__.getStrokeColor=A.getDrawColor=function(){return Sr(Kn)},A.__private__.setStrokeColor=A.setDrawColor=function(N,U,ee,fe){return Kn=bn({ch1:N,ch2:U,ch3:ee,ch4:fe,pdfColorType:"draw",precision:2}),de(Kn),this};var Hi=t.fillColor||"0 g";A.__private__.getFillColor=A.getFillColor=function(){return Sr(Hi)},A.__private__.setFillColor=A.setFillColor=function(N,U,ee,fe){return Hi=bn({ch1:N,ch2:U,ch3:ee,ch4:fe,pdfColorType:"fill",precision:2}),de(Hi),this};var On=t.textColor||"0 g",io=A.__private__.getTextColor=A.getTextColor=function(){return Sr(On)};A.__private__.setTextColor=A.setTextColor=function(N,U,ee,fe){return On=bn({ch1:N,ch2:U,ch3:ee,ch4:fe,pdfColorType:"text",precision:3}),this};var Oe=t.charSpace,Ht=A.__private__.getCharSpace=A.getCharSpace=function(){return parseFloat(Oe||0)};A.__private__.setCharSpace=A.setCharSpace=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Oe=N,this};var qr=0;A.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},A.__private__.setLineCap=A.setLineCap=function(N){var U=A.CapJoinStyles[N];if(U===void 0)throw new Error("Line cap style of '"+N+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return qr=U,de(U+" J"),this};var Vi=0;A.__private__.setLineJoin=A.setLineJoin=function(N){var U=A.CapJoinStyles[N];if(U===void 0)throw new Error("Line join style of '"+N+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Vi=U,de(U+" j"),this},A.__private__.setLineMiterLimit=A.__private__.setMiterLimit=A.setLineMiterLimit=A.setMiterLimit=function(N){if(N=N||0,isNaN(N))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return de($(V(N))+" M"),this},A.GState=Al,A.setGState=function(N){(N=typeof N=="string"?jr[qt[N]]:fa(null,N)).equals(Cn)||(de("/"+N.id+" gs"),Cn=N)};var fa=function(N,U){if(!N||!qt[N]){var ee=!1;for(var fe in jr)if(jr.hasOwnProperty(fe)&&jr[fe].equals(U)){ee=!0;break}if(ee)U=jr[fe];else{var Ce="GS"+(Object.keys(jr).length+1).toString(10);jr[Ce]=U,U.id=Ce}return N&&(qt[N]=U.id),Gt.publish("addGState",U),U}};A.addGState=function(N,U){return fa(N,U),this},A.saveGraphicsState=function(){return de("q"),sr.push({key:Bt,size:st,color:On}),this},A.restoreGraphicsState=function(){de("Q");var N=sr.pop();return Bt=N.key,st=N.size,On=N.color,Cn=null,this},A.setCurrentTransformationMatrix=function(N){return de(N.toString()+" cm"),this},A.comment=function(N){return de("#"+N),this};var Ss=function(N,U){var ee=N||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ee},set:function(Ve){isNaN(Ve)||(ee=parseFloat(Ve))}});var fe=U||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return fe},set:function(Ve){isNaN(Ve)||(fe=parseFloat(Ve))}});var Ce="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ce},set:function(Ve){Ce=Ve.toString()}}),this},ga=function(N,U,ee,fe){Ss.call(this,N,U),this.type="rect";var Ce=ee||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ce},set:function($e){isNaN($e)||(Ce=parseFloat($e))}});var Ve=fe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ve},set:function($e){isNaN($e)||(Ve=parseFloat($e))}}),this},ma=function(){this.page=_r,this.currentPage=W,this.pages=Be.slice(0),this.pagesContext=Ot.slice(0),this.x=Ar,this.y=St,this.matrix=it,this.width=hr(W),this.height=Mn(W),this.outputDestination=Fe,this.id="",this.objectNumber=-1};ma.prototype.restore=function(){_r=this.page,W=this.currentPage,Ot=this.pagesContext,Be=this.pages,Ar=this.x,St=this.y,it=this.matrix,Wi(W,this.width),or(W,this.height),Fe=this.outputDestination};var Es=function(N,U,ee,fe,Ce){Hn.push(new ma),_r=W=0,Be=[],Ar=N,St=U,it=Ce,cr([ee,fe])},Hr=function(N){if(Sn[N])Hn.pop().restore();else{var U=new ma,ee="Xo"+(Object.keys(nr).length+1).toString(10);U.id=ee,Sn[N]=ee,nr[ee]=U,Gt.publish("addFormObject",U),Hn.pop().restore()}};for(var Gi in A.beginFormObject=function(N,U,ee,fe,Ce){return Es(N,U,ee,fe,Ce),this},A.endFormObject=function(N){return Hr(N),this},A.doFormObject=function(N,U){var ee=nr[Sn[N]];return de("q"),de(U.toString()+" cm"),de("/"+ee.id+" Do"),de("Q"),this},A.getFormObject=function(N){var U=nr[Sn[N]];return{x:U.x,y:U.y,width:U.width,height:U.height,matrix:U.matrix}},A.save=function(N,U){return N=N||"generated.pdf",(U=U||{}).returnPromise=U.returnPromise||!1,U.returnPromise===!1?(ya(is(ar()),N),typeof ya.unload=="function"&&Lt.setTimeout&&setTimeout(ya.unload,911),this):new Promise(function(ee,fe){try{var Ce=ya(is(ar()),N);typeof ya.unload=="function"&&Lt.setTimeout&&setTimeout(ya.unload,911),ee(Ce)}catch(Ve){fe(Ve.message)}})},_t.API)_t.API.hasOwnProperty(Gi)&&(Gi==="events"&&_t.API.events.length?function(N,U){var ee,fe,Ce;for(Ce=U.length-1;Ce!==-1;Ce--)ee=U[Ce][0],fe=U[Ce][1],N.subscribe.apply(N,[ee].concat(typeof fe=="function"?[fe]:fe))}(Gt,_t.API.events):A[Gi]=_t.API[Gi]);var hr=A.getPageWidth=function(N){return(Ot[N=N||W].mediaBox.topRightX-Ot[N].mediaBox.bottomLeftX)/at},Wi=A.setPageWidth=function(N,U){Ot[N].mediaBox.topRightX=U*at+Ot[N].mediaBox.bottomLeftX},Mn=A.getPageHeight=function(N){return(Ot[N=N||W].mediaBox.topRightY-Ot[N].mediaBox.bottomLeftY)/at},or=A.setPageHeight=function(N,U){Ot[N].mediaBox.topRightY=U*at+Ot[N].mediaBox.bottomLeftY};return A.internal={pdfEscape:Qr,getStyle:Ta,getFont:as,getFontSize:rt,getCharSpace:Ht,getTextColor:io,getLineHeight:da,getLineHeightFactor:ha,getLineWidth:yi,write:pt,getHorizontalCoordinate:bi,getVerticalCoordinate:ki,getCoordinateString:no,getVerticalCoordinateString:$t,collections:{},newObject:ir,newAdditionalObject:ut,newObjectDeferred:yr,newObjectDeferredBegin:Cr,getFilters:Gn,putStream:En,events:Gt,scaleFactor:at,pageSize:{getWidth:function(){return hr(W)},setWidth:function(N){Wi(W,N)},getHeight:function(){return Mn(W)},setHeight:function(N){or(W,N)}},encryptionOptions:v,encryption:en,getEncryptor:aa,output:As,getNumberOfPages:vt,pages:Be,out:de,f2:De,f3:Y,getPageInfo:Ia,getPageInfoByObjId:yt,getCurrentPageInfo:ss,getPDFVersion:_,Point:Ss,Rectangle:ga,Matrix:wt,hasHotfix:Cs},Object.defineProperty(A.internal.pageSize,"width",{get:function(){return hr(W)},set:function(N){Wi(W,N)},enumerable:!0,configurable:!0}),Object.defineProperty(A.internal.pageSize,"height",{get:function(){return Mn(W)},set:function(N){or(W,N)},enumerable:!0,configurable:!0}),kr.call(A,He),Bt="F1",Jr(c,i),Gt.publish("initialized"),A}Ba.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Ba.prototype.toHexString=function(t){return t.split("").map(function(r){return("0"+(255&r.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ba.prototype.hexToBytes=function(t){for(var r=[],i=0;i<t.length;i+=2)r.push(String.fromCharCode(parseInt(t.substr(i,2),16)));return r.join("")},Ba.prototype.processOwnerPassword=function(t,r){return Zc(Xc(r).substr(0,5),t)},Ba.prototype.encryptor=function(t,r){var i=Xc(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&r,r>>8&255)).substr(0,10);return function(a){return Zc(i,a)}},Al.prototype.equals=function(t){var r,i="id,objectNumber,equals";if(!t||xr(t)!==xr(this))return!1;var a=0;for(r in this)if(!(i.indexOf(r)>=0)){if(this.hasOwnProperty(r)&&!t.hasOwnProperty(r)||this[r]!==t[r])return!1;a++}for(r in t)t.hasOwnProperty(r)&&i.indexOf(r)<0&&a--;return a===0},_t.API={events:[]},_t.version="2.5.2";var $r=_t.API,bd=1,Sa=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Pa=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},zt=function(t){return t.toFixed(2)},Fs=function(t){return t.toFixed(5)};$r.__acroform__={};var ri=function(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t},Xu=function(t){return t*bd},Zi=function(t){var r=new wh,i=bt.internal.getHeight(t)||0,a=bt.internal.getWidth(t)||0;return r.BBox=[0,0,Number(zt(a)),Number(zt(i))],r},sx=$r.__acroform__.setBit=function(t,r){if(t=t||0,r=r||0,isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<r},ax=$r.__acroform__.clearBit=function(t,r){if(t=t||0,r=r||0,isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<r)},ox=$r.__acroform__.getBit=function(t,r){if(isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<r?1:0},nn=$r.__acroform__.getBitForPdf=function(t,r){if(isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return ox(t,r-1)},sn=$r.__acroform__.setBitForPdf=function(t,r){if(isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return sx(t,r-1)},an=$r.__acroform__.clearBitForPdf=function(t,r){if(isNaN(t)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return ax(t,r-1)},lx=$r.__acroform__.calculateCoordinates=function(t,r){var i=r.internal.getHorizontalCoordinate,a=r.internal.getVerticalCoordinate,c=t[0],l=t[1],h=t[2],m=t[3],x={};return x.lowerLeft_X=i(c)||0,x.lowerLeft_Y=a(l+m)||0,x.upperRight_X=i(c+h)||0,x.upperRight_Y=a(l)||0,[Number(zt(x.lowerLeft_X)),Number(zt(x.lowerLeft_Y)),Number(zt(x.upperRight_X)),Number(zt(x.upperRight_Y))]},cx=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var r=[],i=t._V||t.DV,a=$c(t,i),c=t.scope.internal.getFont(t.fontName,t.fontStyle).id;r.push("/Tx BMC"),r.push("q"),r.push("BT"),r.push(t.scope.__private__.encodeColorString(t.color)),r.push("/"+c+" "+zt(a.fontSize)+" Tf"),r.push("1 0 0 1 0 0 Tm"),r.push(a.text),r.push("ET"),r.push("Q"),r.push("EMC");var l=Zi(t);return l.scope=t.scope,l.stream=r.join(`
`),l}},$c=function(t,r){var i=t.fontSize===0?t.maxFontSize:t.fontSize,a={text:"",fontSize:""},c=(r=(r=r.substr(0,1)=="("?r.substr(1):r).substr(r.length-1)==")"?r.substr(0,r.length-1):r).split(" ");c=t.multiline?c.map(function(Y){return Y.split(`
`)}):c.map(function(Y){return[Y]});var l=i,h=bt.internal.getHeight(t)||0;h=h<0?-h:h;var m=bt.internal.getWidth(t)||0;m=m<0?-m:m;var x=function(Y,V,oe){if(Y+1<c.length){var le=V+" "+c[Y+1][0];return nl(le,t,oe).width<=m-4}return!1};l++;e:for(;l>0;){r="",l--;var y,v,C=nl("3",t,l).height,T=t.multiline?h-l:(h-C)/2,A=T+=2,D=0,_=0,M=0;if(l<=0){r=`(...) Tj
`,r+="% Width of Text: "+nl(r,t,l=12).width+", FieldWidth:"+m+`
`;break}for(var I="",j=0,B=0;B<c.length;B++)if(c.hasOwnProperty(B)){var Z=!1;if(c[B].length!==1&&M!==c[B].length-1){if((C+2)*(j+2)+2>h)continue e;I+=c[B][M],Z=!0,_=B,B--}else{I=(I+=c[B][M]+" ").substr(I.length-1)==" "?I.substr(0,I.length-1):I;var Q=parseInt(B),xe=x(Q,I,l),$=B>=c.length-1;if(xe&&!$){I+=" ",M=0;continue}if(xe||$){if($)_=Q;else if(t.multiline&&(C+2)*(j+2)+2>h)continue e}else{if(!t.multiline||(C+2)*(j+2)+2>h)continue e;_=Q}}for(var ie="",ce=D;ce<=_;ce++){var De=c[ce];if(t.multiline){if(ce===_){ie+=De[M]+" ",M=(M+1)%De.length;continue}if(ce===D){ie+=De[De.length-1]+" ";continue}}ie+=De[0]+" "}switch(ie=ie.substr(ie.length-1)==" "?ie.substr(0,ie.length-1):ie,v=nl(ie,t,l).width,t.textAlign){case"right":y=m-v-2;break;case"center":y=(m-v)/2;break;case"left":default:y=2}r+=zt(y)+" "+zt(A)+` Td
`,r+="("+Sa(ie)+`) Tj
`,r+=-zt(y)+` 0 Td
`,A=-(l+2),v=0,D=Z?_:_+1,j++,I=""}break}return a.text=r,a.fontSize=l,a},nl=function(t,r,i){var a=r.scope.internal.getFont(r.fontName,r.fontStyle),c=r.scope.getStringUnitWidth(t,{font:a,fontSize:parseFloat(i),charSpace:0})*parseFloat(i);return{height:r.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(i),charSpace:0})*parseFloat(i)*1.5,width:c}},dx={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},ux=function(t,r){var i={type:"reference",object:t};r.internal.getPageInfo(t.page).pageContext.annotations.find(function(a){return a.type===i.type&&a.object===i.object})===void 0&&r.internal.getPageInfo(t.page).pageContext.annotations.push(i)},hx=function(t,r){for(var i in t)if(t.hasOwnProperty(i)){var a=i,c=t[i];r.internal.newObjectDeferredBegin(c.objId,!0),xr(c)==="object"&&typeof c.putStream=="function"&&c.putStream(),delete t[a]}},fx=function(t,r){if(r.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Ui.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(dx)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");bd=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new vh,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(i){i.internal.events.unsubscribe(i.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete i.internal.acroformPlugin.acroFormDictionaryRoot._eventID,i.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(i){i.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=i.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var c in a)if(a.hasOwnProperty(c)){var l=a[c];l.objId=void 0,l.hasAnnotation&&ux(l,i)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(i){if(i.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");i.internal.write("/AcroForm "+i.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(i){(function(a,c){var l=!a;for(var h in a||(c.internal.newObjectDeferredBegin(c.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),c.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||c.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(h)){var m=a[h],x=[],y=m.Rect;if(m.Rect&&(m.Rect=lx(m.Rect,c)),c.internal.newObjectDeferredBegin(m.objId,!0),m.DA=bt.createDefaultAppearanceStream(m),xr(m)==="object"&&typeof m.getKeyValueListForStream=="function"&&(x=m.getKeyValueListForStream()),m.Rect=y,m.hasAppearanceStream&&!m.appearanceStreamContent){var v=cx(m);x.push({key:"AP",value:"<</N "+v+">>"}),c.internal.acroformPlugin.xForms.push(v)}if(m.appearanceStreamContent){var C="";for(var T in m.appearanceStreamContent)if(m.appearanceStreamContent.hasOwnProperty(T)){var A=m.appearanceStreamContent[T];if(C+="/"+T+" ",C+="<<",Object.keys(A).length>=1||Array.isArray(A)){for(var h in A)if(A.hasOwnProperty(h)){var D=A[h];typeof D=="function"&&(D=D.call(c,m)),C+="/"+h+" "+D+" ",c.internal.acroformPlugin.xForms.indexOf(D)>=0||c.internal.acroformPlugin.xForms.push(D)}}else typeof(D=A)=="function"&&(D=D.call(c,m)),C+="/"+h+" "+D,c.internal.acroformPlugin.xForms.indexOf(D)>=0||c.internal.acroformPlugin.xForms.push(D);C+=">>"}x.push({key:"AP",value:`<<
`+C+">>"})}c.internal.putStream({additionalKeyValues:x,objectId:m.objId}),c.internal.out("endobj")}l&&hx(c.internal.acroformPlugin.xForms,c)})(i,t)}),t.internal.acroformPlugin.isInitialized=!0}},bh=$r.__acroform__.arrayToPdfArray=function(t,r,i){var a=function(h){return h};if(Array.isArray(t)){for(var c="[",l=0;l<t.length;l++)switch(l!==0&&(c+=" "),xr(t[l])){case"boolean":case"number":case"object":c+=t[l].toString();break;case"string":t[l].substr(0,1)!=="/"?(r!==void 0&&i&&(a=i.internal.getEncryptor(r)),c+="("+Sa(a(t[l].toString()))+")"):c+=t[l].toString()}return c+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},mc=function(t,r,i){var a=function(c){return c};return r!==void 0&&i&&(a=i.internal.getEncryptor(r)),(t=t||"").toString(),t="("+Sa(a(t))+")"},Ji=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ji.prototype.toString=function(){return this.objId+" 0 R"},Ji.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Ji.prototype.getKeyValueListForStream=function(){var t=[],r=Object.getOwnPropertyNames(this).filter(function(l){return l!="content"&&l!="appearanceStreamContent"&&l!="scope"&&l!="objId"&&l.substring(0,1)!="_"});for(var i in r)if(Object.getOwnPropertyDescriptor(this,r[i]).configurable===!1){var a=r[i],c=this[a];c&&(Array.isArray(c)?t.push({key:a,value:bh(c,this.objId,this.scope)}):c instanceof Ji?(c.scope=this.scope,t.push({key:a,value:c.objId+" 0 R"})):typeof c!="function"&&t.push({key:a,value:c}))}return t};var wh=function(){Ji.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,r=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(i){t=i.trim()},get:function(){return t||null}})};ri(wh,Ji);var vh=function(){Ji.call(this);var t,r=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return r.length>0?r:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return r}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var i=function(a){return a};return this.scope&&(i=this.scope.internal.getEncryptor(this.objId)),"("+Sa(i(t))+")"}},set:function(i){t=i}})};ri(vh,Ji);var Ui=function t(){Ji.call(this);var r=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return r},set:function(I){if(isNaN(I))throw new Error('Invalid value "'+I+'" for attribute F supplied.');r=I}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!nn(r,3)},set:function(I){I?this.F=sn(r,3):this.F=an(r,3)}});var i=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return i},set:function(I){if(isNaN(I))throw new Error('Invalid value "'+I+'" for attribute Ff supplied.');i=I}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(I){a=I!==void 0?I:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(I){a[0]=I}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(I){a[1]=I}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(I){a[2]=I}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(I){a[3]=I}});var c="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return c},set:function(I){switch(I){case"/Btn":case"/Tx":case"/Ch":case"/Sig":c=I;break;default:throw new Error('Invalid value "'+I+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof Cl)return;l="FieldObject"+t.FieldNum++}var I=function(j){return j};return this.scope&&(I=this.scope.internal.getEncryptor(this.objId)),"("+Sa(I(l))+")"},set:function(I){l=I.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function(I){l=I}});var h="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return h},set:function(I){h=I}});var m="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return m},set:function(I){m=I}});var x=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return x},set:function(I){x=I}});var y=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return y===void 0?50/bd:y},set:function(I){y=I}});var v="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return v},set:function(I){v=I}});var C="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!C||this instanceof Cl||this instanceof Na))return mc(C,this.objId,this.scope)},set:function(I){I=I.toString(),C=I}});var T=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(T)return this instanceof An?T:mc(T,this.objId,this.scope)},set:function(I){I=I.toString(),T=this instanceof An?I:I.substr(0,1)==="("?Pa(I.substr(1,I.length-2)):Pa(I)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof An?Pa(T.substr(1,T.length-1)):T},set:function(I){I=I.toString(),T=this instanceof An?"/"+I:I}});var A=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(A)return A},set:function(I){this.V=I}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof An?A:mc(A,this.objId,this.scope)},set:function(I){I=I.toString(),A=this instanceof An?I:I.substr(0,1)==="("?Pa(I.substr(1,I.length-2)):Pa(I)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof An?Pa(A.substr(1,A.length-1)):A},set:function(I){I=I.toString(),A=this instanceof An?"/"+I:I}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var D,_=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return _},set:function(I){I=!!I,_=I}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(D)return D},set:function(I){D=I}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,1)},set:function(I){I?this.Ff=sn(this.Ff,1):this.Ff=an(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,2)},set:function(I){I?this.Ff=sn(this.Ff,2):this.Ff=an(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,3)},set:function(I){I?this.Ff=sn(this.Ff,3):this.Ff=an(this.Ff,3)}});var M=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(M!==null)return M},set:function(I){if([0,1,2].indexOf(I)===-1)throw new Error('Invalid value "'+I+'" for attribute Q supplied.');M=I}}),Object.defineProperty(this,"textAlign",{get:function(){var I;switch(M){case 0:default:I="left";break;case 1:I="center";break;case 2:I="right"}return I},configurable:!0,enumerable:!0,set:function(I){switch(I){case"right":case 2:M=2;break;case"center":case 1:M=1;break;case"left":case 0:default:M=0}}})};ri(Ui,Ji);var Va=function(){Ui.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(i){t=i}});var r=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return bh(r,this.objId,this.scope)},set:function(i){var a,c;c=[],typeof(a=i)=="string"&&(c=function(l,h,m){m||(m=1);for(var x,y=[];x=h.exec(l);)y.push(x[m]);return y}(a,/\((.*?)\)/g)),r=c}}),this.getOptions=function(){return r},this.setOptions=function(i){r=i,this.sort&&r.sort()},this.addOption=function(i){i=(i=i||"").toString(),r.push(i),this.sort&&r.sort()},this.removeOption=function(i,a){for(a=a||!1,i=(i=i||"").toString();r.indexOf(i)!==-1&&(r.splice(r.indexOf(i),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,18)},set:function(i){i?this.Ff=sn(this.Ff,18):this.Ff=an(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,19)},set:function(i){this.combo===!0&&(i?this.Ff=sn(this.Ff,19):this.Ff=an(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,20)},set:function(i){i?(this.Ff=sn(this.Ff,20),r.sort()):this.Ff=an(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,22)},set:function(i){i?this.Ff=sn(this.Ff,22):this.Ff=an(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,23)},set:function(i){i?this.Ff=sn(this.Ff,23):this.Ff=an(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,27)},set:function(i){i?this.Ff=sn(this.Ff,27):this.Ff=an(this.Ff,27)}}),this.hasAppearanceStream=!1};ri(Va,Ui);var Ga=function(){Va.call(this),this.fontName="helvetica",this.combo=!1};ri(Ga,Va);var Wa=function(){Ga.call(this),this.combo=!0};ri(Wa,Ga);var ul=function(){Wa.call(this),this.edit=!0};ri(ul,Wa);var An=function(){Ui.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,15)},set:function(i){i?this.Ff=sn(this.Ff,15):this.Ff=an(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,16)},set:function(i){i?this.Ff=sn(this.Ff,16):this.Ff=an(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,17)},set:function(i){i?this.Ff=sn(this.Ff,17):this.Ff=an(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,26)},set:function(i){i?this.Ff=sn(this.Ff,26):this.Ff=an(this.Ff,26)}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(l){return l};if(this.scope&&(i=this.scope.internal.getEncryptor(this.objId)),Object.keys(r).length!==0){var a,c=[];for(a in c.push("<<"),r)c.push("/"+a+" ("+Sa(i(r[a]))+")");return c.push(">>"),c.join(`
`)}},set:function(i){xr(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}})};ri(An,Ui);var hl=function(){An.call(this),this.pushButton=!0};ri(hl,An);var Ya=function(){An.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r!==void 0?r:[]}})};ri(Ya,An);var Cl=function(){var t,r;Ui.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(c){t=c}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return r},set:function(c){r=c}});var i,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var c=function(m){return m};this.scope&&(c=this.scope.internal.getEncryptor(this.objId));var l,h=[];for(l in h.push("<<"),a)h.push("/"+l+" ("+Sa(c(a[l]))+")");return h.push(">>"),h.join(`
`)},set:function(c){xr(c)==="object"&&(a=c)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(c){typeof c=="string"&&(a.CA=c)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(c){i=c}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(c){i="/"+c}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=bt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ri(Cl,Ui),Ya.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var r in this.Kids)if(this.Kids.hasOwnProperty(r)){var i=this.Kids[r];i.appearanceStreamContent=t.createAppearanceStream(i.optionName),i.caption=t.getCA()}},Ya.prototype.createOption=function(t){var r=new Cl;return r.Parent=this,r.optionName=t,this.Kids.push(r),gx.call(this.scope,r),r};var fl=function(){An.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=bt.CheckBox.createAppearanceStream()};ri(fl,An);var Na=function(){Ui.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,13)},set:function(r){r?this.Ff=sn(this.Ff,13):this.Ff=an(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,21)},set:function(r){r?this.Ff=sn(this.Ff,21):this.Ff=an(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,23)},set:function(r){r?this.Ff=sn(this.Ff,23):this.Ff=an(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,24)},set:function(r){r?this.Ff=sn(this.Ff,24):this.Ff=an(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,25)},set:function(r){r?this.Ff=sn(this.Ff,25):this.Ff=an(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,26)},set:function(r){r?this.Ff=sn(this.Ff,26):this.Ff=an(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){Number.isInteger(r)&&(t=r)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ri(Na,Ui);var gl=function(){Na.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,14)},set:function(t){t?this.Ff=sn(this.Ff,14):this.Ff=an(this.Ff,14)}}),this.password=!0};ri(gl,Na);var bt={CheckBox:{createAppearanceStream:function(){return{N:{On:bt.CheckBox.YesNormal},D:{On:bt.CheckBox.YesPushDown,Off:bt.CheckBox.OffPushDown}}},YesPushDown:function(t){var r=Zi(t);r.scope=t.scope;var i=[],a=t.scope.internal.getFont(t.fontName,t.fontStyle).id,c=t.scope.__private__.encodeColorString(t.color),l=$c(t,t.caption);return i.push("0.749023 g"),i.push("0 0 "+zt(bt.internal.getWidth(t))+" "+zt(bt.internal.getHeight(t))+" re"),i.push("f"),i.push("BMC"),i.push("q"),i.push("0 0 1 rg"),i.push("/"+a+" "+zt(l.fontSize)+" Tf "+c),i.push("BT"),i.push(l.text),i.push("ET"),i.push("Q"),i.push("EMC"),r.stream=i.join(`
`),r},YesNormal:function(t){var r=Zi(t);r.scope=t.scope;var i=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),c=[],l=bt.internal.getHeight(t),h=bt.internal.getWidth(t),m=$c(t,t.caption);return c.push("1 g"),c.push("0 0 "+zt(h)+" "+zt(l)+" re"),c.push("f"),c.push("q"),c.push("0 0 1 rg"),c.push("0 0 "+zt(h-1)+" "+zt(l-1)+" re"),c.push("W"),c.push("n"),c.push("0 g"),c.push("BT"),c.push("/"+i+" "+zt(m.fontSize)+" Tf "+a),c.push(m.text),c.push("ET"),c.push("Q"),r.stream=c.join(`
`),r},OffPushDown:function(t){var r=Zi(t);r.scope=t.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+zt(bt.internal.getWidth(t))+" "+zt(bt.internal.getHeight(t))+" re"),i.push("f"),r.stream=i.join(`
`),r}},RadioButton:{Circle:{createAppearanceStream:function(t){var r={D:{Off:bt.RadioButton.Circle.OffPushDown},N:{}};return r.N[t]=bt.RadioButton.Circle.YesNormal,r.D[t]=bt.RadioButton.Circle.YesPushDown,r},getCA:function(){return"l"},YesNormal:function(t){var r=Zi(t);r.scope=t.scope;var i=[],a=bt.internal.getWidth(t)<=bt.internal.getHeight(t)?bt.internal.getWidth(t)/4:bt.internal.getHeight(t)/4;a=Number((.9*a).toFixed(5));var c=bt.internal.Bezier_C,l=Number((a*c).toFixed(5));return i.push("q"),i.push("1 0 0 1 "+Fs(bt.internal.getWidth(t)/2)+" "+Fs(bt.internal.getHeight(t)/2)+" cm"),i.push(a+" 0 m"),i.push(a+" "+l+" "+l+" "+a+" 0 "+a+" c"),i.push("-"+l+" "+a+" -"+a+" "+l+" -"+a+" 0 c"),i.push("-"+a+" -"+l+" -"+l+" -"+a+" 0 -"+a+" c"),i.push(l+" -"+a+" "+a+" -"+l+" "+a+" 0 c"),i.push("f"),i.push("Q"),r.stream=i.join(`
`),r},YesPushDown:function(t){var r=Zi(t);r.scope=t.scope;var i=[],a=bt.internal.getWidth(t)<=bt.internal.getHeight(t)?bt.internal.getWidth(t)/4:bt.internal.getHeight(t)/4;a=Number((.9*a).toFixed(5));var c=Number((2*a).toFixed(5)),l=Number((c*bt.internal.Bezier_C).toFixed(5)),h=Number((a*bt.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+Fs(bt.internal.getWidth(t)/2)+" "+Fs(bt.internal.getHeight(t)/2)+" cm"),i.push(c+" 0 m"),i.push(c+" "+l+" "+l+" "+c+" 0 "+c+" c"),i.push("-"+l+" "+c+" -"+c+" "+l+" -"+c+" 0 c"),i.push("-"+c+" -"+l+" -"+l+" -"+c+" 0 -"+c+" c"),i.push(l+" -"+c+" "+c+" -"+l+" "+c+" 0 c"),i.push("f"),i.push("Q"),i.push("0 g"),i.push("q"),i.push("1 0 0 1 "+Fs(bt.internal.getWidth(t)/2)+" "+Fs(bt.internal.getHeight(t)/2)+" cm"),i.push(a+" 0 m"),i.push(a+" "+h+" "+h+" "+a+" 0 "+a+" c"),i.push("-"+h+" "+a+" -"+a+" "+h+" -"+a+" 0 c"),i.push("-"+a+" -"+h+" -"+h+" -"+a+" 0 -"+a+" c"),i.push(h+" -"+a+" "+a+" -"+h+" "+a+" 0 c"),i.push("f"),i.push("Q"),r.stream=i.join(`
`),r},OffPushDown:function(t){var r=Zi(t);r.scope=t.scope;var i=[],a=bt.internal.getWidth(t)<=bt.internal.getHeight(t)?bt.internal.getWidth(t)/4:bt.internal.getHeight(t)/4;a=Number((.9*a).toFixed(5));var c=Number((2*a).toFixed(5)),l=Number((c*bt.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+Fs(bt.internal.getWidth(t)/2)+" "+Fs(bt.internal.getHeight(t)/2)+" cm"),i.push(c+" 0 m"),i.push(c+" "+l+" "+l+" "+c+" 0 "+c+" c"),i.push("-"+l+" "+c+" -"+c+" "+l+" -"+c+" 0 c"),i.push("-"+c+" -"+l+" -"+l+" -"+c+" 0 -"+c+" c"),i.push(l+" -"+c+" "+c+" -"+l+" "+c+" 0 c"),i.push("f"),i.push("Q"),r.stream=i.join(`
`),r}},Cross:{createAppearanceStream:function(t){var r={D:{Off:bt.RadioButton.Cross.OffPushDown},N:{}};return r.N[t]=bt.RadioButton.Cross.YesNormal,r.D[t]=bt.RadioButton.Cross.YesPushDown,r},getCA:function(){return"8"},YesNormal:function(t){var r=Zi(t);r.scope=t.scope;var i=[],a=bt.internal.calculateCross(t);return i.push("q"),i.push("1 1 "+zt(bt.internal.getWidth(t)-2)+" "+zt(bt.internal.getHeight(t)-2)+" re"),i.push("W"),i.push("n"),i.push(zt(a.x1.x)+" "+zt(a.x1.y)+" m"),i.push(zt(a.x2.x)+" "+zt(a.x2.y)+" l"),i.push(zt(a.x4.x)+" "+zt(a.x4.y)+" m"),i.push(zt(a.x3.x)+" "+zt(a.x3.y)+" l"),i.push("s"),i.push("Q"),r.stream=i.join(`
`),r},YesPushDown:function(t){var r=Zi(t);r.scope=t.scope;var i=bt.internal.calculateCross(t),a=[];return a.push("0.749023 g"),a.push("0 0 "+zt(bt.internal.getWidth(t))+" "+zt(bt.internal.getHeight(t))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+zt(bt.internal.getWidth(t)-2)+" "+zt(bt.internal.getHeight(t)-2)+" re"),a.push("W"),a.push("n"),a.push(zt(i.x1.x)+" "+zt(i.x1.y)+" m"),a.push(zt(i.x2.x)+" "+zt(i.x2.y)+" l"),a.push(zt(i.x4.x)+" "+zt(i.x4.y)+" m"),a.push(zt(i.x3.x)+" "+zt(i.x3.y)+" l"),a.push("s"),a.push("Q"),r.stream=a.join(`
`),r},OffPushDown:function(t){var r=Zi(t);r.scope=t.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+zt(bt.internal.getWidth(t))+" "+zt(bt.internal.getHeight(t))+" re"),i.push("f"),r.stream=i.join(`
`),r}}},createDefaultAppearanceStream:function(t){var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color);return"/"+r+" "+t.fontSize+" Tf "+i}};bt.internal={Bezier_C:.551915024494,calculateCross:function(t){var r=bt.internal.getWidth(t),i=bt.internal.getHeight(t),a=Math.min(r,i);return{x1:{x:(r-a)/2,y:(i-a)/2+a},x2:{x:(r-a)/2+a,y:(i-a)/2},x3:{x:(r-a)/2,y:(i-a)/2},x4:{x:(r-a)/2+a,y:(i-a)/2+a}}}},bt.internal.getWidth=function(t){var r=0;return xr(t)==="object"&&(r=Xu(t.Rect[2])),r},bt.internal.getHeight=function(t){var r=0;return xr(t)==="object"&&(r=Xu(t.Rect[3])),r};var gx=$r.addField=function(t){if(fx(this,t),!(t instanceof Ui))throw new Error("Invalid argument passed to jsPDF.addField.");var r;return(r=t).scope.internal.acroformPlugin.printedOut&&(r.scope.internal.acroformPlugin.printedOut=!1,r.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),r.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(r),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};$r.AcroFormChoiceField=Va,$r.AcroFormListBox=Ga,$r.AcroFormComboBox=Wa,$r.AcroFormEditBox=ul,$r.AcroFormButton=An,$r.AcroFormPushButton=hl,$r.AcroFormRadioButton=Ya,$r.AcroFormCheckBox=fl,$r.AcroFormTextField=Na,$r.AcroFormPasswordField=gl,$r.AcroFormAppearance=bt,$r.AcroForm={ChoiceField:Va,ListBox:Ga,ComboBox:Wa,EditBox:ul,Button:An,PushButton:hl,RadioButton:Ya,CheckBox:fl,TextField:Na,PasswordField:gl,Appearance:bt},_t.AcroForm={ChoiceField:Va,ListBox:Ga,ComboBox:Wa,EditBox:ul,Button:An,PushButton:hl,RadioButton:Ya,CheckBox:fl,TextField:Na,PasswordField:gl,Appearance:bt};_t.AcroForm;function Nh(t){return t.reduce(function(r,i,a){return r[i]=a,r},{})}(function(t){t.__addimage__={};var r="UNKNOWN",i={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=t.__addimage__.getImageFileTypeByImageData=function(Y,V){var oe,le,ne,Te,Se,Ie=r;if((V=V||r)==="RGBA"||Y.data!==void 0&&Y.data instanceof Uint8ClampedArray&&"height"in Y&&"width"in Y)return"RGBA";if(xe(Y))for(Se in i)for(ne=i[Se],oe=0;oe<ne.length;oe+=1){for(Te=!0,le=0;le<ne[oe].length;le+=1)if(ne[oe][le]!==void 0&&ne[oe][le]!==Y[le]){Te=!1;break}if(Te===!0){Ie=Se;break}}else for(Se in i)for(ne=i[Se],oe=0;oe<ne.length;oe+=1){for(Te=!0,le=0;le<ne[oe].length;le+=1)if(ne[oe][le]!==void 0&&ne[oe][le]!==Y.charCodeAt(le)){Te=!1;break}if(Te===!0){Ie=Se;break}}return Ie===r&&V!==r&&(Ie=V),Ie},c=function Y(V){for(var oe=this.internal.write,le=this.internal.putStream,ne=(0,this.internal.getFilters)();ne.indexOf("FlateEncode")!==-1;)ne.splice(ne.indexOf("FlateEncode"),1);V.objectId=this.internal.newObject();var Te=[];if(Te.push({key:"Type",value:"/XObject"}),Te.push({key:"Subtype",value:"/Image"}),Te.push({key:"Width",value:V.width}),Te.push({key:"Height",value:V.height}),V.colorSpace===M.INDEXED?Te.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(V.palette.length/3-1)+" "+("sMask"in V&&V.sMask!==void 0?V.objectId+2:V.objectId+1)+" 0 R]"}):(Te.push({key:"ColorSpace",value:"/"+V.colorSpace}),V.colorSpace===M.DEVICE_CMYK&&Te.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Te.push({key:"BitsPerComponent",value:V.bitsPerComponent}),"decodeParameters"in V&&V.decodeParameters!==void 0&&Te.push({key:"DecodeParms",value:"<<"+V.decodeParameters+">>"}),"transparency"in V&&Array.isArray(V.transparency)){for(var Se="",Ie=0,se=V.transparency.length;Ie<se;Ie++)Se+=V.transparency[Ie]+" "+V.transparency[Ie]+" ";Te.push({key:"Mask",value:"["+Se+"]"})}V.sMask!==void 0&&Te.push({key:"SMask",value:V.objectId+1+" 0 R"});var be=V.filter!==void 0?["/"+V.filter]:void 0;if(le({data:V.data,additionalKeyValues:Te,alreadyAppliedFilters:be,objectId:V.objectId}),oe("endobj"),"sMask"in V&&V.sMask!==void 0){var Ge="/Predictor "+V.predictor+" /Colors 1 /BitsPerComponent "+V.bitsPerComponent+" /Columns "+V.width,O={width:V.width,height:V.height,colorSpace:"DeviceGray",bitsPerComponent:V.bitsPerComponent,decodeParameters:Ge,data:V.sMask};"filter"in V&&(O.filter=V.filter),Y.call(this,O)}if(V.colorSpace===M.INDEXED){var W=this.internal.newObject();le({data:ie(new Uint8Array(V.palette)),objectId:W}),oe("endobj")}},l=function(){var Y=this.internal.collections.addImage_images;for(var V in Y)c.call(this,Y[V])},h=function(){var Y,V=this.internal.collections.addImage_images,oe=this.internal.write;for(var le in V)oe("/I"+(Y=V[le]).index,Y.objectId,"0","R")},m=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",h))},x=function(){var Y=this.internal.collections.addImage_images;return m.call(this),Y},y=function(){return Object.keys(this.internal.collections.addImage_images).length},v=function(Y){return typeof t["process"+Y.toUpperCase()]=="function"},C=function(Y){return xr(Y)==="object"&&Y.nodeType===1},T=function(Y,V){if(Y.nodeName==="IMG"&&Y.hasAttribute("src")){var oe=""+Y.getAttribute("src");if(oe.indexOf("data:image/")===0)return bo(unescape(oe).split("base64,").pop());var le=t.loadFile(oe,!0);if(le!==void 0)return le}if(Y.nodeName==="CANVAS"){if(Y.width===0||Y.height===0)throw new Error("Given canvas must have data. Canvas width: "+Y.width+", height: "+Y.height);var ne;switch(V){case"PNG":ne="image/png";break;case"WEBP":ne="image/webp";break;case"JPEG":case"JPG":default:ne="image/jpeg"}return bo(Y.toDataURL(ne,1).split("base64,").pop())}},A=function(Y){var V=this.internal.collections.addImage_images;if(V){for(var oe in V)if(Y===V[oe].alias)return V[oe]}},D=function(Y,V,oe){return Y||V||(Y=-96,V=-96),Y<0&&(Y=-1*oe.width*72/Y/this.internal.scaleFactor),V<0&&(V=-1*oe.height*72/V/this.internal.scaleFactor),Y===0&&(Y=V*oe.width/oe.height),V===0&&(V=Y*oe.height/oe.width),[Y,V]},_=function(Y,V,oe,le,ne,Te){var Se=D.call(this,oe,le,ne),Ie=this.internal.getCoordinateString,se=this.internal.getVerticalCoordinateString,be=x.call(this);if(oe=Se[0],le=Se[1],be[ne.index]=ne,Te){Te*=Math.PI/180;var Ge=Math.cos(Te),O=Math.sin(Te),W=function(ue){return ue.toFixed(4)},K=[W(Ge),W(O),W(-1*O),W(Ge),0,0,"cm"]}this.internal.write("q"),Te?(this.internal.write([1,"0","0",1,Ie(Y),se(V+le),"cm"].join(" ")),this.internal.write(K.join(" ")),this.internal.write([Ie(oe),"0","0",Ie(le),"0","0","cm"].join(" "))):this.internal.write([Ie(oe),"0","0",Ie(le),Ie(Y),se(V+le),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ne.index+" Do"),this.internal.write("Q")},M=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var I=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},j=t.__addimage__.sHashCode=function(Y){var V,oe,le=0;if(typeof Y=="string")for(oe=Y.length,V=0;V<oe;V++)le=(le<<5)-le+Y.charCodeAt(V),le|=0;else if(xe(Y))for(oe=Y.byteLength/2,V=0;V<oe;V++)le=(le<<5)-le+Y[V],le|=0;return le},B=t.__addimage__.validateStringAsBase64=function(Y){(Y=Y||"").toString().trim();var V=!0;return Y.length===0&&(V=!1),Y.length%4!=0&&(V=!1),/^[A-Za-z0-9+/]+$/.test(Y.substr(0,Y.length-2))===!1&&(V=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(Y.substr(-2))===!1&&(V=!1),V},Z=t.__addimage__.extractImageFromDataUrl=function(Y){var V=(Y=Y||"").split("base64,"),oe=null;if(V.length===2){var le=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(V[0]);Array.isArray(le)&&(oe={mimeType:le[1],charset:le[2],data:V[1]})}return oe},Q=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(Y){return Q()&&Y instanceof ArrayBuffer};var xe=t.__addimage__.isArrayBufferView=function(Y){return Q()&&typeof Uint32Array<"u"&&(Y instanceof Int8Array||Y instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&Y instanceof Uint8ClampedArray||Y instanceof Int16Array||Y instanceof Uint16Array||Y instanceof Int32Array||Y instanceof Uint32Array||Y instanceof Float32Array||Y instanceof Float64Array)},$=t.__addimage__.binaryStringToUint8Array=function(Y){for(var V=Y.length,oe=new Uint8Array(V),le=0;le<V;le++)oe[le]=Y.charCodeAt(le);return oe},ie=t.__addimage__.arrayBufferToBinaryString=function(Y){for(var V="",oe=xe(Y)?Y:new Uint8Array(Y),le=0;le<oe.length;le+=8192)V+=String.fromCharCode.apply(null,oe.subarray(le,le+8192));return V};t.addImage=function(){var Y,V,oe,le,ne,Te,Se,Ie,se;if(typeof arguments[1]=="number"?(V=r,oe=arguments[1],le=arguments[2],ne=arguments[3],Te=arguments[4],Se=arguments[5],Ie=arguments[6],se=arguments[7]):(V=arguments[1],oe=arguments[2],le=arguments[3],ne=arguments[4],Te=arguments[5],Se=arguments[6],Ie=arguments[7],se=arguments[8]),xr(Y=arguments[0])==="object"&&!C(Y)&&"imageData"in Y){var be=Y;Y=be.imageData,V=be.format||V||r,oe=be.x||oe||0,le=be.y||le||0,ne=be.w||be.width||ne,Te=be.h||be.height||Te,Se=be.alias||Se,Ie=be.compression||Ie,se=be.rotation||be.angle||se}var Ge=this.internal.getFilters();if(Ie===void 0&&Ge.indexOf("FlateEncode")!==-1&&(Ie="SLOW"),isNaN(oe)||isNaN(le))throw new Error("Invalid coordinates passed to jsPDF.addImage");m.call(this);var O=ce.call(this,Y,V,Se,Ie);return _.call(this,oe,le,ne,Te,O,se),this};var ce=function(Y,V,oe,le){var ne,Te,Se;if(typeof Y=="string"&&a(Y)===r){Y=unescape(Y);var Ie=De(Y,!1);(Ie!==""||(Ie=t.loadFile(Y,!0))!==void 0)&&(Y=Ie)}if(C(Y)&&(Y=T(Y,V)),V=a(Y,V),!v(V))throw new Error("addImage does not support files of type '"+V+"', please ensure that a plugin for '"+V+"' support is added.");if(((Se=oe)==null||Se.length===0)&&(oe=function(se){return typeof se=="string"||xe(se)?j(se):xe(se.data)?j(se.data):null}(Y)),(ne=A.call(this,oe))||(Q()&&(Y instanceof Uint8Array||V==="RGBA"||(Te=Y,Y=$(Y))),ne=this["process"+V.toUpperCase()](Y,y.call(this),oe,function(se){return se&&typeof se=="string"&&(se=se.toUpperCase()),se in t.image_compression?se:I.NONE}(le),Te)),!ne)throw new Error("An unknown error occurred whilst processing the image.");return ne},De=t.__addimage__.convertBase64ToBinaryString=function(Y,V){var oe;V=typeof V!="boolean"||V;var le,ne="";if(typeof Y=="string"){le=(oe=Z(Y))!==null?oe.data:Y;try{ne=bo(le)}catch(Te){if(V)throw B(le)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Te.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ne};t.getImageProperties=function(Y){var V,oe,le="";if(C(Y)&&(Y=T(Y)),typeof Y=="string"&&a(Y)===r&&((le=De(Y,!1))===""&&(le=t.loadFile(Y)||""),Y=le),oe=a(Y),!v(oe))throw new Error("addImage does not support files of type '"+oe+"', please ensure that a plugin for '"+oe+"' support is added.");if(!Q()||Y instanceof Uint8Array||(Y=$(Y)),!(V=this["process"+oe.toUpperCase()](Y)))throw new Error("An unknown error occurred whilst processing the image");return V.fileType=oe,V}})(_t.API),function(t){var r=function(i){if(i!==void 0&&i!="")return!0};_t.API.events.push(["addPage",function(i){this.internal.getPageInfo(i.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(i){for(var a,c,l,h=this.internal.getCoordinateString,m=this.internal.getVerticalCoordinateString,x=this.internal.getPageInfoByObjId(i.objId),y=i.pageContext.annotations,v=!1,C=0;C<y.length&&!v;C++)switch((a=y[C]).type){case"link":(r(a.options.url)||r(a.options.pageNumber))&&(v=!0);break;case"reference":case"text":case"freetext":v=!0}if(v!=0){this.internal.write("/Annots [");for(var T=0;T<y.length;T++){a=y[T];var A=this.internal.pdfEscape,D=this.internal.getEncryptor(i.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var _=this.internal.newAdditionalObject(),M=this.internal.newAdditionalObject(),I=this.internal.getEncryptor(_.objId),j=a.title||"Note";l="<</Type /Annot /Subtype /Text "+(c="/Rect ["+h(a.bounds.x)+" "+m(a.bounds.y+a.bounds.h)+" "+h(a.bounds.x+a.bounds.w)+" "+m(a.bounds.y)+"] ")+"/Contents ("+A(I(a.contents))+")",l+=" /Popup "+M.objId+" 0 R",l+=" /P "+x.objId+" 0 R",l+=" /T ("+A(I(j))+") >>",_.content=l;var B=_.objId+" 0 R";l="<</Type /Annot /Subtype /Popup "+(c="/Rect ["+h(a.bounds.x+30)+" "+m(a.bounds.y+a.bounds.h)+" "+h(a.bounds.x+a.bounds.w+30)+" "+m(a.bounds.y)+"] ")+" /Parent "+B,a.open&&(l+=" /Open true"),l+=" >>",M.content=l,this.internal.write(_.objId,"0 R",M.objId,"0 R");break;case"freetext":c="/Rect ["+h(a.bounds.x)+" "+m(a.bounds.y)+" "+h(a.bounds.x+a.bounds.w)+" "+m(a.bounds.y+a.bounds.h)+"] ";var Z=a.color||"#000000";l="<</Type /Annot /Subtype /FreeText "+c+"/Contents ("+A(D(a.contents))+")",l+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Z+")",l+=" /Border [0 0 0]",l+=" >>",this.internal.write(l);break;case"link":if(a.options.name){var Q=this.annotations._nameMap[a.options.name];a.options.pageNumber=Q.page,a.options.top=Q.y}else a.options.top||(a.options.top=0);if(c="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",l="",a.options.url)l="<</Type /Annot /Subtype /Link "+c+"/Border [0 0 0] /A <</S /URI /URI ("+A(D(a.options.url))+") >>";else if(a.options.pageNumber)switch(l="<</Type /Annot /Subtype /Link "+c+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":l+=" /Fit]";break;case"FitH":l+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,l+=" /FitV "+a.options.left+"]";break;case"XYZ":default:var xe=m(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),l+=" /XYZ "+a.options.left+" "+xe+" "+a.options.zoom+"]"}l!=""&&(l+=" >>",this.internal.write(l))}}this.internal.write("]")}}]),t.createAnnotation=function(i){var a=this.internal.getCurrentPageInfo();switch(i.type){case"link":this.link(i.bounds.x,i.bounds.y,i.bounds.w,i.bounds.h,i);break;case"text":case"freetext":a.pageContext.annotations.push(i)}},t.link=function(i,a,c,l,h){var m=this.internal.getCurrentPageInfo(),x=this.internal.getCoordinateString,y=this.internal.getVerticalCoordinateString;m.pageContext.annotations.push({finalBounds:{x:x(i),y:y(a),w:x(i+c),h:y(a+l)},options:h,type:"link"})},t.textWithLink=function(i,a,c,l){var h,m,x=this.getTextWidth(i),y=this.internal.getLineHeight()/this.internal.scaleFactor;if(l.maxWidth!==void 0){m=l.maxWidth;var v=this.splitTextToSize(i,m).length;h=Math.ceil(y*v)}else m=x,h=y;return this.text(i,a,c,l),c+=.2*y,l.align==="center"&&(a-=x/2),l.align==="right"&&(a-=x),this.link(a,c-y,m,h,l),x},t.getTextWidth=function(i){var a=this.internal.getFontSize();return this.getStringUnitWidth(i)*a/this.internal.scaleFactor}}(_t.API),function(t){var r={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},i={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},c=[1570,1571,1573,1575];t.__arabicParser__={};var l=t.__arabicParser__.isInArabicSubstitutionA=function(_){return r[_.charCodeAt(0)]!==void 0},h=t.__arabicParser__.isArabicLetter=function(_){return typeof _=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(_)},m=t.__arabicParser__.isArabicEndLetter=function(_){return h(_)&&l(_)&&r[_.charCodeAt(0)].length<=2},x=t.__arabicParser__.isArabicAlfLetter=function(_){return h(_)&&c.indexOf(_.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(_){return h(_)&&l(_)&&r[_.charCodeAt(0)].length>=1};var y=t.__arabicParser__.arabicLetterHasFinalForm=function(_){return h(_)&&l(_)&&r[_.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(_){return h(_)&&l(_)&&r[_.charCodeAt(0)].length>=3};var v=t.__arabicParser__.arabicLetterHasMedialForm=function(_){return h(_)&&l(_)&&r[_.charCodeAt(0)].length==4},C=t.__arabicParser__.resolveLigatures=function(_){var M=0,I=i,j="",B=0;for(M=0;M<_.length;M+=1)I[_.charCodeAt(M)]!==void 0?(B++,typeof(I=I[_.charCodeAt(M)])=="number"&&(j+=String.fromCharCode(I),I=i,B=0),M===_.length-1&&(I=i,j+=_.charAt(M-(B-1)),M-=B-1,B=0)):(I=i,j+=_.charAt(M-B),M-=B,B=0);return j};t.__arabicParser__.isArabicDiacritic=function(_){return _!==void 0&&a[_.charCodeAt(0)]!==void 0};var T=t.__arabicParser__.getCorrectForm=function(_,M,I){return h(_)?l(_)===!1?-1:!y(_)||!h(M)&&!h(I)||!h(I)&&m(M)||m(_)&&!h(M)||m(_)&&x(M)||m(_)&&m(M)?0:v(_)&&h(M)&&!m(M)&&h(I)&&y(I)?3:m(_)||!h(I)?1:2:-1},A=function(_){var M=0,I=0,j=0,B="",Z="",Q="",xe=(_=_||"").split("\\s+"),$=[];for(M=0;M<xe.length;M+=1){for($.push(""),I=0;I<xe[M].length;I+=1)B=xe[M][I],Z=xe[M][I-1],Q=xe[M][I+1],h(B)?(j=T(B,Z,Q),$[M]+=j!==-1?String.fromCharCode(r[B.charCodeAt(0)][j]):B):$[M]+=B;$[M]=C($[M])}return $.join(" ")},D=t.__arabicParser__.processArabic=t.processArabic=function(){var _,M=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,I=[];if(Array.isArray(M)){var j=0;for(I=[],j=0;j<M.length;j+=1)Array.isArray(M[j])?I.push([A(M[j][0]),M[j][1],M[j][2]]):I.push([A(M[j])]);_=I}else _=A(M);return typeof arguments[0]=="string"?_:(arguments[0].text=_,arguments[0])};t.events.push(["preProcessText",D])}(_t.API),_t.API.autoPrint=function(t){var r;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){r=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+r+" 0 R")})}return this},function(t){var r=function(){var i=void 0;Object.defineProperty(this,"pdf",{get:function(){return i},set:function(m){i=m}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(m){a=isNaN(m)||Number.isInteger(m)===!1||m<0?150:m,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var c=300;Object.defineProperty(this,"height",{get:function(){return c},set:function(m){c=isNaN(m)||Number.isInteger(m)===!1||m<0?300:m,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=c+1)}});var l=[];Object.defineProperty(this,"childNodes",{get:function(){return l},set:function(m){l=m}});var h={};Object.defineProperty(this,"style",{get:function(){return h},set:function(m){h=m}}),Object.defineProperty(this,"parentNode",{})};r.prototype.getContext=function(i,a){var c;if((i=i||"2d")!=="2d")return null;for(c in a)this.pdf.context2d.hasOwnProperty(c)&&(this.pdf.context2d[c]=a[c]);return this.pdf.context2d._canvas=this,this.pdf.context2d},r.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new r,this.canvas.pdf=this}])}(_t.API),function(t){var r={left:0,top:0,bottom:0,right:0},i=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},r),this.internal.__cell__.margins.width=this.getPageWidth(),c.call(this))},c=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var x=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return x},set:function(_){x=_}});var y=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return y},set:function(_){y=_}});var v=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return v},set:function(_){v=_}});var C=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return C},set:function(_){C=_}});var T=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return T},set:function(_){T=_}});var A=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return A},set:function(_){A=_}});var D=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return D},set:function(_){D=_}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(x){return a.call(this),this.internal.__cell__.headerFunction=typeof x=="function"?x:void 0,this},t.getTextDimensions=function(x,y){a.call(this);var v=(y=y||{}).fontSize||this.getFontSize(),C=y.font||this.getFont(),T=y.scaleFactor||this.internal.scaleFactor,A=0,D=0,_=0,M=this;if(!Array.isArray(x)&&typeof x!="string"){if(typeof x!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");x=String(x)}var I=y.maxWidth;I>0?typeof x=="string"?x=this.splitTextToSize(x,I):Object.prototype.toString.call(x)==="[object Array]"&&(x=x.reduce(function(B,Z){return B.concat(M.splitTextToSize(Z,I))},[])):x=Array.isArray(x)?x:[x];for(var j=0;j<x.length;j++)A<(_=this.getStringUnitWidth(x[j],{font:C})*v)&&(A=_);return A!==0&&(D=x.length),{w:A/=T,h:Math.max((D*v*this.getLineHeightFactor()-v*(this.getLineHeightFactor()-1))/T,0)}},t.cellAddPage=function(){a.call(this),this.addPage();var x=this.internal.__cell__.margins||r;return this.internal.__cell__.lastCell=new l(x.left,x.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var h=t.cell=function(){var x;x=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var y=this.internal.__cell__.lastCell,v=this.internal.__cell__.padding,C=this.internal.__cell__.margins||r,T=this.internal.__cell__.tableHeaderRow,A=this.internal.__cell__.printHeaders;return y.lineNumber!==void 0&&(y.lineNumber===x.lineNumber?(x.x=(y.x||0)+(y.width||0),x.y=y.y||0):y.y+y.height+x.height+C.bottom>this.getPageHeight()?(this.cellAddPage(),x.y=C.top,A&&T&&(this.printHeaderRow(x.lineNumber,!0),x.y+=T[0].height)):x.y=y.y+y.height||x.y),x.text[0]!==void 0&&(this.rect(x.x,x.y,x.width,x.height,i===!0?"FD":void 0),x.align==="right"?this.text(x.text,x.x+x.width-v,x.y+v,{align:"right",baseline:"top"}):x.align==="center"?this.text(x.text,x.x+x.width/2,x.y+v,{align:"center",baseline:"top",maxWidth:x.width-v-v}):this.text(x.text,x.x+v,x.y+v,{align:"left",baseline:"top",maxWidth:x.width-v-v})),this.internal.__cell__.lastCell=x,this};t.table=function(x,y,v,C,T){if(a.call(this),!v)throw new Error("No data for PDF table.");var A,D,_,M,I=[],j=[],B=[],Z={},Q={},xe=[],$=[],ie=(T=T||{}).autoSize||!1,ce=T.printHeaders!==!1,De=T.css&&T.css["font-size"]!==void 0?16*T.css["font-size"]:T.fontSize||12,Y=T.margins||Object.assign({width:this.getPageWidth()},r),V=typeof T.padding=="number"?T.padding:3,oe=T.headerBackgroundColor||"#c8c8c8",le=T.headerTextColor||"#000";if(c.call(this),this.internal.__cell__.printHeaders=ce,this.internal.__cell__.margins=Y,this.internal.__cell__.table_font_size=De,this.internal.__cell__.padding=V,this.internal.__cell__.headerBackgroundColor=oe,this.internal.__cell__.headerTextColor=le,this.setFontSize(De),C==null)j=I=Object.keys(v[0]),B=I.map(function(){return"left"});else if(Array.isArray(C)&&xr(C[0])==="object")for(I=C.map(function(be){return be.name}),j=C.map(function(be){return be.prompt||be.name||""}),B=C.map(function(be){return be.align||"left"}),A=0;A<C.length;A+=1)Q[C[A].name]=C[A].width*(19.049976/25.4);else Array.isArray(C)&&typeof C[0]=="string"&&(j=I=C,B=I.map(function(){return"left"}));if(ie||Array.isArray(C)&&typeof C[0]=="string")for(A=0;A<I.length;A+=1){for(Z[M=I[A]]=v.map(function(be){return be[M]}),this.setFont(void 0,"bold"),xe.push(this.getTextDimensions(j[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),D=Z[M],this.setFont(void 0,"normal"),_=0;_<D.length;_+=1)xe.push(this.getTextDimensions(D[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Q[M]=Math.max.apply(null,xe)+V+V,xe=[]}if(ce){var ne={};for(A=0;A<I.length;A+=1)ne[I[A]]={},ne[I[A]].text=j[A],ne[I[A]].align=B[A];var Te=m.call(this,ne,Q);$=I.map(function(be){return new l(x,y,Q[be],Te,ne[be].text,void 0,ne[be].align)}),this.setTableHeaderRow($),this.printHeaderRow(1,!1)}var Se=C.reduce(function(be,Ge){return be[Ge.name]=Ge.align,be},{});for(A=0;A<v.length;A+=1){"rowStart"in T&&T.rowStart instanceof Function&&T.rowStart({row:A,data:v[A]},this);var Ie=m.call(this,v[A],Q);for(_=0;_<I.length;_+=1){var se=v[A][I[_]];"cellStart"in T&&T.cellStart instanceof Function&&T.cellStart({row:A,col:_,data:se},this),h.call(this,new l(x,y,Q[I[_]],Ie,se,A+2,Se[I[_]]))}}return this.internal.__cell__.table_x=x,this.internal.__cell__.table_y=y,this};var m=function(x,y){var v=this.internal.__cell__.padding,C=this.internal.__cell__.table_font_size,T=this.internal.scaleFactor;return Object.keys(x).map(function(A){var D=x[A];return this.splitTextToSize(D.hasOwnProperty("text")?D.text:D,y[A]-v-v)},this).map(function(A){return this.getLineHeightFactor()*A.length*C/T+v+v},this).reduce(function(A,D){return Math.max(A,D)},0)};t.setTableHeaderRow=function(x){a.call(this),this.internal.__cell__.tableHeaderRow=x},t.printHeaderRow=function(x,y){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var v;if(i=!0,typeof this.internal.__cell__.headerFunction=="function"){var C=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(C[0],C[1],C[2],C[3],void 0,-1)}this.setFont(void 0,"bold");for(var T=[],A=0;A<this.internal.__cell__.tableHeaderRow.length;A+=1){v=this.internal.__cell__.tableHeaderRow[A].clone(),y&&(v.y=this.internal.__cell__.margins.top||0,T.push(v)),v.lineNumber=x;var D=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),h.call(this,v),this.setTextColor(D)}T.length>0&&this.setTableHeaderRow(T),this.setFont(void 0,"normal"),i=!1}}(_t.API);var Ah={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Ch=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Kc=Nh(Ch),Sh=[100,200,300,400,500,600,700,800,900],mx=Nh(Sh);function Qc(t){var r=t.family.replace(/"|'/g,"").toLowerCase(),i=function(l){return Ah[l=l||"normal"]?l:"normal"}(t.style),a=function(l){if(!l)return 400;if(typeof l=="number")return l>=100&&l<=900&&l%100==0?l:400;if(/^\d00$/.test(l))return parseInt(l);switch(l){case"bold":return 700;case"normal":default:return 400}}(t.weight),c=function(l){return typeof Kc[l=l||"normal"]=="number"?l:"normal"}(t.stretch);return{family:r,style:i,weight:a,stretch:c,src:t.src||[],ref:t.ref||{name:r,style:[c,i,a].join(" ")}}}function Zu(t,r,i,a){var c;for(c=i;c>=0&&c<r.length;c+=a)if(t[r[c]])return t[r[c]];for(c=i;c>=0&&c<r.length;c-=a)if(t[r[c]])return t[r[c]]}var px={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},$u={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Ku(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function xx(t,r,i){for(var a=(i=i||{}).defaultFontFamily||"times",c=Object.assign({},px,i.genericFontFamilies||{}),l=null,h=null,m=0;m<r.length;++m)if(c[(l=Qc(r[m])).family]&&(l.family=c[l.family]),t.hasOwnProperty(l.family)){h=t[l.family];break}if(!(h=h||t[a]))throw new Error("Could not find a font-family for the rule '"+Ku(l)+"' and default family '"+a+"'.");if(h=function(x,y){if(y[x])return y[x];var v=Kc[x],C=v<=Kc.normal?-1:1,T=Zu(y,Ch,v,C);if(!T)throw new Error("Could not find a matching font-stretch value for "+x);return T}(l.stretch,h),h=function(x,y){if(y[x])return y[x];for(var v=Ah[x],C=0;C<v.length;++C)if(y[v[C]])return y[v[C]];throw new Error("Could not find a matching font-style for "+x)}(l.style,h),!(h=function(x,y){if(y[x])return y[x];if(x===400&&y[500])return y[500];if(x===500&&y[400])return y[400];var v=mx[x],C=Zu(y,Sh,v,x<400?-1:1);if(!C)throw new Error("Could not find a matching font-weight for value "+x);return C}(l.weight,h)))throw new Error("Failed to resolve a font for the rule '"+Ku(l)+"'.");return h}function Qu(t){return t.trimLeft()}function yx(t,r){for(var i=0;i<t.length;){if(t.charAt(i)===r)return[t.substring(0,i),t.substring(i+1)];i+=1}return null}function bx(t){var r=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return r===null?null:[r[0],t.substring(r[0].length)]}var il,Ju,e0,pc=["times"];(function(t){var r,i,a,c,l,h,m,x,y,v=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new x,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new h,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new h,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new C(this),r=this.internal.f2,i=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,c=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,h=this.internal.Point,m=this.internal.Rectangle,x=this.internal.Matrix,y=new v}]);var C=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var W=O;Object.defineProperty(this,"pdf",{get:function(){return W}});var K=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return K},set:function(Pe){K=!!Pe}});var ue=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ue},set:function(Pe){ue=!!Pe}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(Pe){isNaN(Pe)||(ae=Pe)}});var Ee=0;Object.defineProperty(this,"posY",{get:function(){return Ee},set:function(Pe){isNaN(Pe)||(Ee=Pe)}}),Object.defineProperty(this,"margin",{get:function(){return y.margin},set:function(Pe){var de;typeof Pe=="number"?de=[Pe,Pe,Pe,Pe]:((de=new Array(4))[0]=Pe[0],de[1]=Pe.length>=2?Pe[1]:de[0],de[2]=Pe.length>=3?Pe[2]:de[0],de[3]=Pe.length>=4?Pe[3]:de[1]),y.margin=de}});var Ae=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ae},set:function(Pe){Ae=Pe}});var ke=0;Object.defineProperty(this,"lastBreak",{get:function(){return ke},set:function(Pe){ke=Pe}});var ze=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ze},set:function(Pe){ze=Pe}}),Object.defineProperty(this,"ctx",{get:function(){return y},set:function(Pe){Pe instanceof v&&(y=Pe)}}),Object.defineProperty(this,"path",{get:function(){return y.path},set:function(Pe){y.path=Pe}});var Be=[];Object.defineProperty(this,"ctxStack",{get:function(){return Be},set:function(Pe){Be=Pe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Pe){var de;de=T(Pe),this.ctx.fillStyle=de.style,this.ctx.isFillTransparent=de.a===0,this.ctx.fillOpacity=de.a,this.pdf.setFillColor(de.r,de.g,de.b,{a:de.a}),this.pdf.setTextColor(de.r,de.g,de.b,{a:de.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Pe){var de=T(Pe);this.ctx.strokeStyle=de.style,this.ctx.isStrokeTransparent=de.a===0,this.ctx.strokeOpacity=de.a,de.a===0?this.pdf.setDrawColor(255,255,255):(de.a,this.pdf.setDrawColor(de.r,de.g,de.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Pe){["butt","round","square"].indexOf(Pe)!==-1&&(this.ctx.lineCap=Pe,this.pdf.setLineCap(Pe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Pe){isNaN(Pe)||(this.ctx.lineWidth=Pe,this.pdf.setLineWidth(Pe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Pe){["bevel","round","miter"].indexOf(Pe)!==-1&&(this.ctx.lineJoin=Pe,this.pdf.setLineJoin(Pe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Pe){isNaN(Pe)||(this.ctx.miterLimit=Pe,this.pdf.setMiterLimit(Pe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Pe){this.ctx.textBaseline=Pe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Pe){["right","end","center","left","start"].indexOf(Pe)!==-1&&(this.ctx.textAlign=Pe)}});var et=null;function Fe(Pe,de){if(et===null){var pt=function(nt){var He=[];return Object.keys(nt).forEach(function(st){nt[st].forEach(function(Re){var rt=null;switch(Re){case"bold":rt={family:st,weight:"bold"};break;case"italic":rt={family:st,style:"italic"};break;case"bolditalic":rt={family:st,weight:"bold",style:"italic"};break;case"":case"normal":rt={family:st}}rt!==null&&(rt.ref={name:st,style:Re},He.push(rt))})}),He}(Pe.getFontList());et=function(nt){for(var He={},st=0;st<nt.length;++st){var Re=Qc(nt[st]),rt=Re.family,ht=Re.stretch,dt=Re.style,It=Re.weight;He[rt]=He[rt]||{},He[rt][ht]=He[rt][ht]||{},He[rt][ht][dt]=He[rt][ht][dt]||{},He[rt][ht][dt][It]=Re}return He}(pt.concat(de))}return et}var mt=null;Object.defineProperty(this,"fontFaces",{get:function(){return mt},set:function(Pe){et=null,mt=Pe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Pe){var de;if(this.ctx.font=Pe,(de=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Pe))!==null){var pt=de[1],nt=(de[2],de[3]),He=de[4],st=(de[5],de[6]),Re=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(He)[2];He=Math.floor(Re==="px"?parseFloat(He)*this.pdf.internal.scaleFactor:Re==="em"?parseFloat(He)*this.pdf.getFontSize():parseFloat(He)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(He);var rt=function(ft){var Bt,at,Ar=[],St=ft.trim();if(St==="")return pc;if(St in $u)return[$u[St]];for(;St!=="";){switch(at=null,Bt=(St=Qu(St)).charAt(0)){case'"':case"'":at=yx(St.substring(1),Bt);break;default:at=bx(St)}if(at===null||(Ar.push(at[0]),(St=Qu(at[1]))!==""&&St.charAt(0)!==","))return pc;St=St.replace(/^,/,"")}return Ar}(st);if(this.fontFaces){var ht=xx(Fe(this.pdf,this.fontFaces),rt.map(function(ft){return{family:ft,stretch:"normal",weight:nt,style:pt}}));this.pdf.setFont(ht.ref.name,ht.ref.style)}else{var dt="";(nt==="bold"||parseInt(nt,10)>=700||pt==="bold")&&(dt="bold"),pt==="italic"&&(dt+="italic"),dt.length===0&&(dt="normal");for(var It="",At={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Vt=0;Vt<rt.length;Vt++){if(this.pdf.internal.getFont(rt[Vt],dt,{noFallback:!0,disableWarning:!0})!==void 0){It=rt[Vt];break}if(dt==="bolditalic"&&this.pdf.internal.getFont(rt[Vt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)It=rt[Vt],dt="bold";else if(this.pdf.internal.getFont(rt[Vt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){It=rt[Vt],dt="normal";break}}if(It===""){for(var Rt=0;Rt<rt.length;Rt++)if(At[rt[Rt]]){It=At[rt[Rt]];break}}It=It===""?"Times":It,this.pdf.setFont(It,dt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Pe){this.ctx.globalCompositeOperation=Pe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Pe){this.ctx.globalAlpha=Pe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Pe){this.ctx.lineDashOffset=Pe,Ge.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Pe){this.ctx.lineDash=Pe,Ge.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Pe){this.ctx.ignoreClearRect=!!Pe}})};C.prototype.setLineDash=function(O){this.lineDash=O},C.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},C.prototype.fill=function(){Z.call(this,"fill",!1)},C.prototype.stroke=function(){Z.call(this,"stroke",!1)},C.prototype.beginPath=function(){this.path=[{type:"begin"}]},C.prototype.moveTo=function(O,W){if(isNaN(O)||isNaN(W))throw Nr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var K=this.ctx.transform.applyToPoint(new h(O,W));this.path.push({type:"mt",x:K.x,y:K.y}),this.ctx.lastPoint=new h(O,W)},C.prototype.closePath=function(){var O=new h(0,0),W=0;for(W=this.path.length-1;W!==-1;W--)if(this.path[W].type==="begin"&&xr(this.path[W+1])==="object"&&typeof this.path[W+1].x=="number"){O=new h(this.path[W+1].x,this.path[W+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new h(O.x,O.y)},C.prototype.lineTo=function(O,W){if(isNaN(O)||isNaN(W))throw Nr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var K=this.ctx.transform.applyToPoint(new h(O,W));this.path.push({type:"lt",x:K.x,y:K.y}),this.ctx.lastPoint=new h(K.x,K.y)},C.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Z.call(this,null,!0)},C.prototype.quadraticCurveTo=function(O,W,K,ue){if(isNaN(K)||isNaN(ue)||isNaN(O)||isNaN(W))throw Nr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new h(K,ue)),Ee=this.ctx.transform.applyToPoint(new h(O,W));this.path.push({type:"qct",x1:Ee.x,y1:Ee.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new h(ae.x,ae.y)},C.prototype.bezierCurveTo=function(O,W,K,ue,ae,Ee){if(isNaN(ae)||isNaN(Ee)||isNaN(O)||isNaN(W)||isNaN(K)||isNaN(ue))throw Nr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ae=this.ctx.transform.applyToPoint(new h(ae,Ee)),ke=this.ctx.transform.applyToPoint(new h(O,W)),ze=this.ctx.transform.applyToPoint(new h(K,ue));this.path.push({type:"bct",x1:ke.x,y1:ke.y,x2:ze.x,y2:ze.y,x:Ae.x,y:Ae.y}),this.ctx.lastPoint=new h(Ae.x,Ae.y)},C.prototype.arc=function(O,W,K,ue,ae,Ee){if(isNaN(O)||isNaN(W)||isNaN(K)||isNaN(ue)||isNaN(ae))throw Nr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ee=!!Ee,!this.ctx.transform.isIdentity){var Ae=this.ctx.transform.applyToPoint(new h(O,W));O=Ae.x,W=Ae.y;var ke=this.ctx.transform.applyToPoint(new h(0,K)),ze=this.ctx.transform.applyToPoint(new h(0,0));K=Math.sqrt(Math.pow(ke.x-ze.x,2)+Math.pow(ke.y-ze.y,2))}Math.abs(ae-ue)>=2*Math.PI&&(ue=0,ae=2*Math.PI),this.path.push({type:"arc",x:O,y:W,radius:K,startAngle:ue,endAngle:ae,counterclockwise:Ee})},C.prototype.arcTo=function(O,W,K,ue,ae){throw new Error("arcTo not implemented.")},C.prototype.rect=function(O,W,K,ue){if(isNaN(O)||isNaN(W)||isNaN(K)||isNaN(ue))throw Nr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,W),this.lineTo(O+K,W),this.lineTo(O+K,W+ue),this.lineTo(O,W+ue),this.lineTo(O,W),this.lineTo(O+K,W),this.lineTo(O,W)},C.prototype.fillRect=function(O,W,K,ue){if(isNaN(O)||isNaN(W)||isNaN(K)||isNaN(ue))throw Nr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!A.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,W,K,ue),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},C.prototype.strokeRect=function(O,W,K,ue){if(isNaN(O)||isNaN(W)||isNaN(K)||isNaN(ue))throw Nr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");D.call(this)||(this.beginPath(),this.rect(O,W,K,ue),this.stroke())},C.prototype.clearRect=function(O,W,K,ue){if(isNaN(O)||isNaN(W)||isNaN(K)||isNaN(ue))throw Nr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,W,K,ue))},C.prototype.save=function(O){O=typeof O!="boolean"||O;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("q");if(this.pdf.setPage(W),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var ue=new v(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ue}},C.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("Q");this.pdf.setPage(W),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},C.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var T=function(O){var W,K,ue,ae;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))W=0,K=0,ue=0,ae=0;else{var Ee=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(Ee!==null)W=parseInt(Ee[1]),K=parseInt(Ee[2]),ue=parseInt(Ee[3]),ae=1;else if((Ee=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)W=parseInt(Ee[1]),K=parseInt(Ee[2]),ue=parseInt(Ee[3]),ae=parseFloat(Ee[4]);else{if(ae=1,typeof O=="string"&&O.charAt(0)!=="#"){var Ae=new ph(O);O=Ae.ok?Ae.toHex():"#000000"}O.length===4?(W=O.substring(1,2),W+=W,K=O.substring(2,3),K+=K,ue=O.substring(3,4),ue+=ue):(W=O.substring(1,3),K=O.substring(3,5),ue=O.substring(5,7)),W=parseInt(W,16),K=parseInt(K,16),ue=parseInt(ue,16)}}return{r:W,g:K,b:ue,a:ae,style:O}},A=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},D=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};C.prototype.fillText=function(O,W,K,ue){if(isNaN(W)||isNaN(K)||typeof O!="string")throw Nr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ue=isNaN(ue)?void 0:ue,!A.call(this)){var ae=Ie(this.ctx.transform.rotation),Ee=this.ctx.transform.scaleX;V.call(this,{text:O,x:W,y:K,scale:Ee,angle:ae,align:this.textAlign,maxWidth:ue})}},C.prototype.strokeText=function(O,W,K,ue){if(isNaN(W)||isNaN(K)||typeof O!="string")throw Nr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!D.call(this)){ue=isNaN(ue)?void 0:ue;var ae=Ie(this.ctx.transform.rotation),Ee=this.ctx.transform.scaleX;V.call(this,{text:O,x:W,y:K,scale:Ee,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:ue})}},C.prototype.measureText=function(O){if(typeof O!="string")throw Nr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var W=this.pdf,K=this.pdf.internal.scaleFactor,ue=W.internal.getFontSize(),ae=W.getStringUnitWidth(O)*ue/W.internal.scaleFactor,Ee=function(Ae){var ke=(Ae=Ae||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ke}}),this};return new Ee({width:ae*=Math.round(96*K/72*1e4)/1e4})},C.prototype.scale=function(O,W){if(isNaN(O)||isNaN(W))throw Nr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var K=new x(O,0,0,W,0,0);this.ctx.transform=this.ctx.transform.multiply(K)},C.prototype.rotate=function(O){if(isNaN(O))throw Nr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var W=new x(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply(W)},C.prototype.translate=function(O,W){if(isNaN(O)||isNaN(W))throw Nr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var K=new x(1,0,0,1,O,W);this.ctx.transform=this.ctx.transform.multiply(K)},C.prototype.transform=function(O,W,K,ue,ae,Ee){if(isNaN(O)||isNaN(W)||isNaN(K)||isNaN(ue)||isNaN(ae)||isNaN(Ee))throw Nr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ae=new x(O,W,K,ue,ae,Ee);this.ctx.transform=this.ctx.transform.multiply(Ae)},C.prototype.setTransform=function(O,W,K,ue,ae,Ee){O=isNaN(O)?1:O,W=isNaN(W)?0:W,K=isNaN(K)?0:K,ue=isNaN(ue)?1:ue,ae=isNaN(ae)?0:ae,Ee=isNaN(Ee)?0:Ee,this.ctx.transform=new x(O,W,K,ue,ae,Ee)};var _=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};C.prototype.drawImage=function(O,W,K,ue,ae,Ee,Ae,ke,ze){var Be=this.pdf.getImageProperties(O),et=1,Fe=1,mt=1,Pe=1;ue!==void 0&&ke!==void 0&&(mt=ke/ue,Pe=ze/ae,et=Be.width/ue*ke/ue,Fe=Be.height/ae*ze/ae),Ee===void 0&&(Ee=W,Ae=K,W=0,K=0),ue!==void 0&&ke===void 0&&(ke=ue,ze=ae),ue===void 0&&ke===void 0&&(ke=Be.width,ze=Be.height);for(var de,pt=this.ctx.transform.decompose(),nt=Ie(pt.rotate.shx),He=new x,st=(He=(He=(He=He.multiply(pt.translate)).multiply(pt.skew)).multiply(pt.scale)).applyToRectangle(new m(Ee-W*mt,Ae-K*Pe,ue*et,ae*Fe)),Re=M.call(this,st),rt=[],ht=0;ht<Re.length;ht+=1)rt.indexOf(Re[ht])===-1&&rt.push(Re[ht]);if(B(rt),this.autoPaging)for(var dt=rt[0],It=rt[rt.length-1],At=dt;At<It+1;At++){this.pdf.setPage(At);var Vt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Rt=At===1?this.posY+this.margin[0]:this.margin[0],ft=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Bt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],at=At===1?0:ft+(At-2)*Bt;if(this.ctx.clip_path.length!==0){var Ar=this.path;de=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(de,this.posX+this.margin[3],-at+Rt+this.ctx.prevPageLastElemOffset),Q.call(this,"fill",!0),this.path=Ar}var St=JSON.parse(JSON.stringify(st));St=j([St],this.posX+this.margin[3],-at+Rt+this.ctx.prevPageLastElemOffset)[0];var it=(At>dt||At<It)&&_.call(this);it&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Vt,Bt,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",St.x,St.y,St.w,St.h,null,null,nt),it&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(O,"JPEG",st.x,st.y,st.w,st.h,null,null,nt)};var M=function(O,W,K){var ue=[];W=W||this.pdf.internal.pageSize.width,K=K||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":ue.push(Math.floor((O.y+ae)/K)+1);break;case"arc":ue.push(Math.floor((O.y+ae-O.radius)/K)+1),ue.push(Math.floor((O.y+ae+O.radius)/K)+1);break;case"qct":var Ee=se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);ue.push(Math.floor((Ee.y+ae)/K)+1),ue.push(Math.floor((Ee.y+Ee.h+ae)/K)+1);break;case"bct":var Ae=be(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);ue.push(Math.floor((Ae.y+ae)/K)+1),ue.push(Math.floor((Ae.y+Ae.h+ae)/K)+1);break;case"rect":ue.push(Math.floor((O.y+ae)/K)+1),ue.push(Math.floor((O.y+O.h+ae)/K)+1)}for(var ke=0;ke<ue.length;ke+=1)for(;this.pdf.internal.getNumberOfPages()<ue[ke];)I.call(this);return ue},I=function(){var O=this.fillStyle,W=this.strokeStyle,K=this.font,ue=this.lineCap,ae=this.lineWidth,Ee=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=W,this.font=K,this.lineCap=ue,this.lineWidth=ae,this.lineJoin=Ee},j=function(O,W,K){for(var ue=0;ue<O.length;ue++)switch(O[ue].type){case"bct":O[ue].x2+=W,O[ue].y2+=K;case"qct":O[ue].x1+=W,O[ue].y1+=K;case"mt":case"lt":case"arc":default:O[ue].x+=W,O[ue].y+=K}return O},B=function(O){return O.sort(function(W,K){return W-K})},Z=function(O,W){for(var K,ue,ae=this.fillStyle,Ee=this.strokeStyle,Ae=this.lineCap,ke=this.lineWidth,ze=Math.abs(ke*this.ctx.transform.scaleX),Be=this.lineJoin,et=JSON.parse(JSON.stringify(this.path)),Fe=JSON.parse(JSON.stringify(this.path)),mt=[],Pe=0;Pe<Fe.length;Pe++)if(Fe[Pe].x!==void 0)for(var de=M.call(this,Fe[Pe]),pt=0;pt<de.length;pt+=1)mt.indexOf(de[pt])===-1&&mt.push(de[pt]);for(var nt=0;nt<mt.length;nt++)for(;this.pdf.internal.getNumberOfPages()<mt[nt];)I.call(this);if(B(mt),this.autoPaging)for(var He=mt[0],st=mt[mt.length-1],Re=He;Re<st+1;Re++){this.pdf.setPage(Re),this.fillStyle=ae,this.strokeStyle=Ee,this.lineCap=Ae,this.lineWidth=ze,this.lineJoin=Be;var rt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ht=Re===1?this.posY+this.margin[0]:this.margin[0],dt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],It=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],At=Re===1?0:dt+(Re-2)*It;if(this.ctx.clip_path.length!==0){var Vt=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(K,this.posX+this.margin[3],-At+ht+this.ctx.prevPageLastElemOffset),Q.call(this,O,!0),this.path=Vt}if(ue=JSON.parse(JSON.stringify(et)),this.path=j(ue,this.posX+this.margin[3],-At+ht+this.ctx.prevPageLastElemOffset),W===!1||Re===0){var Rt=(Re>He||Re<st)&&_.call(this);Rt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],rt,It,null).clip().discardPath()),Q.call(this,O,W),Rt&&this.pdf.restoreGraphicsState()}this.lineWidth=ke}else this.lineWidth=ze,Q.call(this,O,W),this.lineWidth=ke;this.path=et},Q=function(O,W){if((O!=="stroke"||W||!D.call(this))&&(O==="stroke"||W||!A.call(this))){for(var K,ue,ae=[],Ee=this.path,Ae=0;Ae<Ee.length;Ae++){var ke=Ee[Ae];switch(ke.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:ke,deltas:[],abs:[]});break;case"lt":var ze=ae.length;if(Ee[Ae-1]&&!isNaN(Ee[Ae-1].x)&&(K=[ke.x-Ee[Ae-1].x,ke.y-Ee[Ae-1].y],ze>0)){for(;ze>=0;ze--)if(ae[ze-1].close!==!0&&ae[ze-1].begin!==!0){ae[ze-1].deltas.push(K),ae[ze-1].abs.push(ke);break}}break;case"bct":K=[ke.x1-Ee[Ae-1].x,ke.y1-Ee[Ae-1].y,ke.x2-Ee[Ae-1].x,ke.y2-Ee[Ae-1].y,ke.x-Ee[Ae-1].x,ke.y-Ee[Ae-1].y],ae[ae.length-1].deltas.push(K);break;case"qct":var Be=Ee[Ae-1].x+2/3*(ke.x1-Ee[Ae-1].x),et=Ee[Ae-1].y+2/3*(ke.y1-Ee[Ae-1].y),Fe=ke.x+2/3*(ke.x1-ke.x),mt=ke.y+2/3*(ke.y1-ke.y),Pe=ke.x,de=ke.y;K=[Be-Ee[Ae-1].x,et-Ee[Ae-1].y,Fe-Ee[Ae-1].x,mt-Ee[Ae-1].y,Pe-Ee[Ae-1].x,de-Ee[Ae-1].y],ae[ae.length-1].deltas.push(K);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(ke)}}ue=W?null:O==="stroke"?"stroke":"fill";for(var pt=!1,nt=0;nt<ae.length;nt++)if(ae[nt].arc)for(var He=ae[nt].abs,st=0;st<He.length;st++){var Re=He[st];Re.type==="arc"?ie.call(this,Re.x,Re.y,Re.radius,Re.startAngle,Re.endAngle,Re.counterclockwise,void 0,W,!pt):oe.call(this,Re.x,Re.y),pt=!0}else if(ae[nt].close===!0)this.pdf.internal.out("h"),pt=!1;else if(ae[nt].begin!==!0){var rt=ae[nt].start.x,ht=ae[nt].start.y;le.call(this,ae[nt].deltas,rt,ht),pt=!0}ue&&ce.call(this,ue),W&&De.call(this)}},xe=function(O){var W=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,K=W*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-K;case"top":return O+W-K;case"hanging":return O+W-2*K;case"middle":return O+W/2-K;case"ideographic":return O;case"alphabetic":default:return O}},$=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};C.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function(W,K){this.colorStops.push([W,K])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},C.prototype.createPattern=function(){return this.createLinearGradient()},C.prototype.createRadialGradient=function(){return this.createLinearGradient()};var ie=function(O,W,K,ue,ae,Ee,Ae,ke,ze){for(var Be=Te.call(this,K,ue,ae,Ee),et=0;et<Be.length;et++){var Fe=Be[et];et===0&&(ze?Y.call(this,Fe.x1+O,Fe.y1+W):oe.call(this,Fe.x1+O,Fe.y1+W)),ne.call(this,O,W,Fe.x2,Fe.y2,Fe.x3,Fe.y3,Fe.x4,Fe.y4)}ke?De.call(this):ce.call(this,Ae)},ce=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},De=function(){this.pdf.clip(),this.pdf.discardPath()},Y=function(O,W){this.pdf.internal.out(i(O)+" "+a(W)+" m")},V=function(O){var W;switch(O.align){case"right":case"end":W="right";break;case"center":W="center";break;case"left":case"start":default:W="left"}var K=this.pdf.getTextDimensions(O.text),ue=xe.call(this,O.y),ae=$.call(this,ue)-K.h,Ee=this.ctx.transform.applyToPoint(new h(O.x,ue)),Ae=this.ctx.transform.decompose(),ke=new x;ke=(ke=(ke=ke.multiply(Ae.translate)).multiply(Ae.skew)).multiply(Ae.scale);for(var ze,Be,et,Fe=this.ctx.transform.applyToRectangle(new m(O.x,ue,K.w,K.h)),mt=ke.applyToRectangle(new m(O.x,ae,K.w,K.h)),Pe=M.call(this,mt),de=[],pt=0;pt<Pe.length;pt+=1)de.indexOf(Pe[pt])===-1&&de.push(Pe[pt]);if(B(de),this.autoPaging)for(var nt=de[0],He=de[de.length-1],st=nt;st<He+1;st++){this.pdf.setPage(st);var Re=st===1?this.posY+this.margin[0]:this.margin[0],rt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ht=this.pdf.internal.pageSize.height-this.margin[2],dt=ht-this.margin[0],It=this.pdf.internal.pageSize.width-this.margin[1],At=It-this.margin[3],Vt=st===1?0:rt+(st-2)*dt;if(this.ctx.clip_path.length!==0){var Rt=this.path;ze=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(ze,this.posX+this.margin[3],-1*Vt+Re),Q.call(this,"fill",!0),this.path=Rt}var ft=j([JSON.parse(JSON.stringify(mt))],this.posX+this.margin[3],-Vt+Re+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(Be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Be*O.scale),et=this.lineWidth,this.lineWidth=et*O.scale);var Bt=this.autoPaging!=="text";if(Bt||ft.y+ft.h<=ht){if(Bt||ft.y>=Re&&ft.x<=It){var at=Bt?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||It-ft.x)[0],Ar=j([JSON.parse(JSON.stringify(Fe))],this.posX+this.margin[3],-Vt+Re+this.ctx.prevPageLastElemOffset)[0],St=Bt&&(st>nt||st<He)&&_.call(this);St&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],At,dt,null).clip().discardPath()),this.pdf.text(at,Ar.x,Ar.y,{angle:O.angle,align:W,renderingMode:O.renderingMode}),St&&this.pdf.restoreGraphicsState()}}else ft.y<ht&&(this.ctx.prevPageLastElemOffset+=ht-ft.y);O.scale>=.01&&(this.pdf.setFontSize(Be),this.lineWidth=et)}else O.scale>=.01&&(Be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Be*O.scale),et=this.lineWidth,this.lineWidth=et*O.scale),this.pdf.text(O.text,Ee.x+this.posX,Ee.y+this.posY,{angle:O.angle,align:W,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(Be),this.lineWidth=et)},oe=function(O,W,K,ue){K=K||0,ue=ue||0,this.pdf.internal.out(i(O+K)+" "+a(W+ue)+" l")},le=function(O,W,K){return this.pdf.lines(O,W,K,null,null)},ne=function(O,W,K,ue,ae,Ee,Ae,ke){this.pdf.internal.out([r(c(K+O)),r(l(ue+W)),r(c(ae+O)),r(l(Ee+W)),r(c(Ae+O)),r(l(ke+W)),"c"].join(" "))},Te=function(O,W,K,ue){for(var ae=2*Math.PI,Ee=Math.PI/2;W>K;)W-=ae;var Ae=Math.abs(K-W);Ae<ae&&ue&&(Ae=ae-Ae);for(var ke=[],ze=ue?-1:1,Be=W;Ae>1e-5;){var et=Be+ze*Math.min(Ae,Ee);ke.push(Se.call(this,O,Be,et)),Ae-=Math.abs(et-Be),Be=et}return ke},Se=function(O,W,K){var ue=(K-W)/2,ae=O*Math.cos(ue),Ee=O*Math.sin(ue),Ae=ae,ke=-Ee,ze=Ae*Ae+ke*ke,Be=ze+Ae*ae+ke*Ee,et=4/3*(Math.sqrt(2*ze*Be)-Be)/(Ae*Ee-ke*ae),Fe=Ae-et*ke,mt=ke+et*Ae,Pe=Fe,de=-mt,pt=ue+W,nt=Math.cos(pt),He=Math.sin(pt);return{x1:O*Math.cos(W),y1:O*Math.sin(W),x2:Fe*nt-mt*He,y2:Fe*He+mt*nt,x3:Pe*nt-de*He,y3:Pe*He+de*nt,x4:O*Math.cos(K),y4:O*Math.sin(K)}},Ie=function(O){return 180*O/Math.PI},se=function(O,W,K,ue,ae,Ee){var Ae=O+.5*(K-O),ke=W+.5*(ue-W),ze=ae+.5*(K-ae),Be=Ee+.5*(ue-Ee),et=Math.min(O,ae,Ae,ze),Fe=Math.max(O,ae,Ae,ze),mt=Math.min(W,Ee,ke,Be),Pe=Math.max(W,Ee,ke,Be);return new m(et,mt,Fe-et,Pe-mt)},be=function(O,W,K,ue,ae,Ee,Ae,ke){var ze,Be,et,Fe,mt,Pe,de,pt,nt,He,st,Re,rt,ht,dt=K-O,It=ue-W,At=ae-K,Vt=Ee-ue,Rt=Ae-ae,ft=ke-Ee;for(Be=0;Be<41;Be++)nt=(de=(et=O+(ze=Be/40)*dt)+ze*((mt=K+ze*At)-et))+ze*(mt+ze*(ae+ze*Rt-mt)-de),He=(pt=(Fe=W+ze*It)+ze*((Pe=ue+ze*Vt)-Fe))+ze*(Pe+ze*(Ee+ze*ft-Pe)-pt),Be==0?(st=nt,Re=He,rt=nt,ht=He):(st=Math.min(st,nt),Re=Math.min(Re,He),rt=Math.max(rt,nt),ht=Math.max(ht,He));return new m(Math.round(st),Math.round(Re),Math.round(rt-st),Math.round(ht-Re))},Ge=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,W,K=(O=this.ctx.lineDash,W=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:W}));this.prevLineDash!==K&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=K)}}})(_t.API),function(t){var r=function(l){var h,m,x,y,v,C,T,A,D,_;for(m=[],x=0,y=(l+=h="\0\0\0\0".slice(l.length%4||4)).length;y>x;x+=4)(v=(l.charCodeAt(x)<<24)+(l.charCodeAt(x+1)<<16)+(l.charCodeAt(x+2)<<8)+l.charCodeAt(x+3))!==0?(C=(v=((v=((v=((v=(v-(_=v%85))/85)-(D=v%85))/85)-(A=v%85))/85)-(T=v%85))/85)%85,m.push(C+33,T+33,A+33,D+33,_+33)):m.push(122);return function(M,I){for(var j=I;j>0;j--)M.pop()}(m,h.length),String.fromCharCode.apply(String,m)+"~>"},i=function(l){var h,m,x,y,v,C=String,T="length",A=255,D="charCodeAt",_="slice",M="replace";for(l[_](-2),l=l[_](0,-2)[M](/\s/g,"")[M]("z","!!!!!"),x=[],y=0,v=(l+=h="uuuuu"[_](l[T]%5||5))[T];v>y;y+=5)m=52200625*(l[D](y)-33)+614125*(l[D](y+1)-33)+7225*(l[D](y+2)-33)+85*(l[D](y+3)-33)+(l[D](y+4)-33),x.push(A&m>>24,A&m>>16,A&m>>8,A&m);return function(I,j){for(var B=j;B>0;B--)I.pop()}(x,h[T]),C.fromCharCode.apply(C,x)},a=function(l){var h=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),h.test(l)===!1)return"";for(var m="",x=0;x<l.length;x+=2)m+=String.fromCharCode("0x"+(l[x]+l[x+1]));return m},c=function(l){for(var h=new Uint8Array(l.length),m=l.length;m--;)h[m]=l.charCodeAt(m);return l=(h=Wc(h)).reduce(function(x,y){return x+String.fromCharCode(y)},"")};t.processDataByFilters=function(l,h){var m=0,x=l||"",y=[];for(typeof(h=h||[])=="string"&&(h=[h]),m=0;m<h.length;m+=1)switch(h[m]){case"ASCII85Decode":case"/ASCII85Decode":x=i(x),y.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":x=r(x),y.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":x=a(x),y.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":x=x.split("").map(function(v){return("0"+v.charCodeAt().toString(16)).slice(-2)}).join("")+">",y.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":x=c(x),y.push("/FlateDecode");break;default:throw new Error('The filter: "'+h[m]+'" is not implemented')}return{data:x,reverseChain:y.reverse().join(" ")}}}(_t.API),function(t){t.loadFile=function(r,i,a){return function(c,l,h){l=l!==!1,h=typeof h=="function"?h:function(){};var m=void 0;try{m=function(x,y,v){var C=new XMLHttpRequest,T=0,A=function(D){var _=D.length,M=[],I=String.fromCharCode;for(T=0;T<_;T+=1)M.push(I(255&D.charCodeAt(T)));return M.join("")};if(C.open("GET",x,!y),C.overrideMimeType("text/plain; charset=x-user-defined"),y===!1&&(C.onload=function(){C.status===200?v(A(this.responseText)):v(void 0)}),C.send(null),y&&C.status===200)return A(C.responseText)}(c,l,h)}catch{}return m}(r,i,a)},t.loadImageFile=t.loadFile}(_t.API),function(t){function r(){return(Lt.html2canvas?Promise.resolve(Lt.html2canvas):Ic(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load html2canvas: "+h))}).then(function(h){return h.default?h.default:h})}function i(){return(Lt.DOMPurify?Promise.resolve(Lt.DOMPurify):Ic(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load dompurify: "+h))}).then(function(h){return h.default?h.default:h})}var a=function(h){var m=xr(h);return m==="undefined"?"undefined":m==="string"||h instanceof String?"string":m==="number"||h instanceof Number?"number":m==="function"||h instanceof Function?"function":h&&h.constructor===Array?"array":h&&h.nodeType===1?"element":m==="object"?"object":"unknown"},c=function(h,m){var x=document.createElement(h);for(var y in m.className&&(x.className=m.className),m.innerHTML&&m.dompurify&&(x.innerHTML=m.dompurify.sanitize(m.innerHTML)),m.style)x.style[y]=m.style[y];return x},l=function h(m){var x=Object.assign(h.convert(Promise.resolve()),JSON.parse(JSON.stringify(h.template))),y=h.convert(Promise.resolve(),x);return y=(y=y.setProgress(1,h,1,[h])).set(m)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(h,m){return h.__proto__=m||l.prototype,h},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(h,m){return this.then(function(){switch(m=m||function(x){switch(a(x)){case"string":return"string";case"element":return x.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(h)){case"string":return this.then(i).then(function(x){return this.set({src:c("div",{innerHTML:h,dompurify:x})})});case"element":return this.set({src:h});case"canvas":return this.set({canvas:h});case"img":return this.set({img:h});default:return this.error("Unknown source type.")}})},l.prototype.to=function(h){switch(h){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var h={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},m=function x(y,v){for(var C=y.nodeType===3?document.createTextNode(y.nodeValue):y.cloneNode(!1),T=y.firstChild;T;T=T.nextSibling)v!==!0&&T.nodeType===1&&T.nodeName==="SCRIPT"||C.appendChild(x(T,v));return y.nodeType===1&&(y.nodeName==="CANVAS"?(C.width=y.width,C.height=y.height,C.getContext("2d").drawImage(y,0,0)):y.nodeName!=="TEXTAREA"&&y.nodeName!=="SELECT"||(C.value=y.value),C.addEventListener("load",function(){C.scrollTop=y.scrollTop,C.scrollLeft=y.scrollLeft},!0)),C}(this.prop.src,this.opt.html2canvas.javascriptEnabled);m.tagName==="BODY"&&(h.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=c("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=c("div",{className:"html2pdf__container",style:h}),this.prop.container.appendChild(m),this.prop.container.firstChild.appendChild(c("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var h=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(h).then(r).then(function(m){var x=Object.assign({},this.opt.html2canvas);return delete x.onrendered,m(this.prop.container,x)}).then(function(m){(this.opt.html2canvas.onrendered||function(){})(m),this.prop.canvas=m,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var h=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(h).then(r).then(function(m){var x=this.opt.jsPDF,y=this.opt.fontFaces,v=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,C=Object.assign({async:!0,allowTaint:!0,scale:v,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete C.onrendered,x.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,x.context2d.posX=this.opt.x,x.context2d.posY=this.opt.y,x.context2d.margin=this.opt.margin,x.context2d.fontFaces=y,y)for(var T=0;T<y.length;++T){var A=y[T],D=A.src.find(function(_){return _.format==="truetype"});D&&x.addFont(D.url,A.ref.name,A.ref.style)}return C.windowHeight=C.windowHeight||0,C.windowHeight=C.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):C.windowHeight,x.context2d.save(!0),m(this.prop.container,C)}).then(function(m){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(m),this.prop.canvas=m,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var h=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=h})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(h,m,x){return(x=x||"pdf").toLowerCase()==="img"||x.toLowerCase()==="image"?this.outputImg(h,m):this.outputPdf(h,m)},l.prototype.outputPdf=function(h,m){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(h,m)})},l.prototype.outputImg=function(h){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(h){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+h+'" is not supported.'}})},l.prototype.save=function(h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(h?{filename:h}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(h){if(a(h)!=="object")return this;var m=Object.keys(h||{}).map(function(x){if(x in l.template.prop)return function(){this.prop[x]=h[x]};switch(x){case"margin":return this.setMargin.bind(this,h.margin);case"jsPDF":return function(){return this.opt.jsPDF=h.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,h.pageSize);default:return function(){this.opt[x]=h[x]}}},this);return this.then(function(){return this.thenList(m)})},l.prototype.get=function(h,m){return this.then(function(){var x=h in l.template.prop?this.prop[h]:this.opt[h];return m?m(x):x})},l.prototype.setMargin=function(h){return this.then(function(){switch(a(h)){case"number":h=[h,h,h,h];case"array":if(h.length===2&&(h=[h[0],h[1],h[0],h[1]]),h.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=h}).then(this.setPageSize)},l.prototype.setPageSize=function(h){function m(x,y){return Math.floor(x*y/72*96)}return this.then(function(){(h=h||_t.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(h.inner={width:h.width-this.opt.margin[1]-this.opt.margin[3],height:h.height-this.opt.margin[0]-this.opt.margin[2]},h.inner.px={width:m(h.inner.width,h.k),height:m(h.inner.height,h.k)},h.inner.ratio=h.inner.height/h.inner.width),this.prop.pageSize=h})},l.prototype.setProgress=function(h,m,x,y){return h!=null&&(this.progress.val=h),m!=null&&(this.progress.state=m),x!=null&&(this.progress.n=x),y!=null&&(this.progress.stack=y),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(h,m,x,y){return this.setProgress(h?this.progress.val+h:null,m||null,x?this.progress.n+x:null,y?this.progress.stack.concat(y):null)},l.prototype.then=function(h,m){var x=this;return this.thenCore(h,m,function(y,v){return x.updateProgress(null,null,1,[y]),Promise.prototype.then.call(this,function(C){return x.updateProgress(null,y),C}).then(y,v).then(function(C){return x.updateProgress(1),C})})},l.prototype.thenCore=function(h,m,x){x=x||Promise.prototype.then,h&&(h=h.bind(this)),m&&(m=m.bind(this));var y=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:l.convert(Object.assign({},this),Promise.prototype),v=x.call(y,h,m);return l.convert(v,this.__proto__)},l.prototype.thenExternal=function(h,m){return Promise.prototype.then.call(this,h,m)},l.prototype.thenList=function(h){var m=this;return h.forEach(function(x){m=m.thenCore(x)}),m},l.prototype.catch=function(h){h&&(h=h.bind(this));var m=Promise.prototype.catch.call(this,h);return l.convert(m,this)},l.prototype.catchExternal=function(h){return Promise.prototype.catch.call(this,h)},l.prototype.error=function(h){return this.then(function(){throw new Error(h)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,_t.getPageSize=function(h,m,x){if(xr(h)==="object"){var y=h;h=y.orientation,m=y.unit||m,x=y.format||x}m=m||"mm",x=x||"a4",h=(""+(h||"P")).toLowerCase();var v,C=(""+x).toLowerCase(),T={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(m){case"pt":v=1;break;case"mm":v=72/25.4;break;case"cm":v=72/2.54;break;case"in":v=72;break;case"px":v=.75;break;case"pc":case"em":v=12;break;case"ex":v=6;break;default:throw"Invalid unit: "+m}var A,D=0,_=0;if(T.hasOwnProperty(C))D=T[C][1]/v,_=T[C][0]/v;else try{D=x[1],_=x[0]}catch{throw new Error("Invalid format: "+x)}if(h==="p"||h==="portrait")h="p",_>D&&(A=_,_=D,D=A);else{if(h!=="l"&&h!=="landscape")throw"Invalid orientation: "+h;h="l",D>_&&(A=_,_=D,D=A)}return{width:_,height:D,unit:m,k:v,orientation:h}},t.html=function(h,m){(m=m||{}).callback=m.callback||function(){},m.html2canvas=m.html2canvas||{},m.html2canvas.canvas=m.html2canvas.canvas||this.canvas,m.jsPDF=m.jsPDF||this,m.fontFaces=m.fontFaces?m.fontFaces.map(Qc):null;var x=new l(m);return m.worker?x:x.from(h).doCallback()}}(_t.API),_t.API.addJS=function(t){return e0=t,this.internal.events.subscribe("postPutResources",function(){il=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(il+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Ju=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+e0+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){il!==void 0&&Ju!==void 0&&this.internal.out("/Names <</JavaScript "+il+" 0 R>>")}),this},function(t){var r;t.events.push(["postPutResources",function(){var i=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var c=i.outline.render().split(/\r\n/),l=0;l<c.length;l++){var h=c[l],m=a.exec(h);if(m!=null){var x=m[1];i.internal.newObjectDeferredBegin(x,!1)}i.internal.write(h)}if(this.outline.createNamedDestinations){var y=this.internal.pages.length,v=[];for(l=0;l<y;l++){var C=i.internal.newObject();v.push(C);var T=i.internal.getPageInfo(l+1);i.internal.write("<< /D["+T.objId+" 0 R /XYZ null null null]>> endobj")}var A=i.internal.newObject();for(i.internal.write("<< /Names [ "),l=0;l<v.length;l++)i.internal.write("(page_"+(l+1)+")"+v[l]+" 0 R");i.internal.write(" ] >>","endobj"),r=i.internal.newObject(),i.internal.write("<< /Dests "+A+" 0 R"),i.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+r+" 0 R"))}]),t.events.push(["initialized",function(){var i=this;i.outline={createNamedDestinations:!1,root:{children:[]}},i.outline.add=function(a,c,l){var h={title:c,options:l,children:[]};return a==null&&(a=this.root),a.children.push(h),h},i.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=i,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},i.outline.genIds_r=function(a){a.id=i.internal.newObjectDeferred();for(var c=0;c<a.children.length;c++)this.genIds_r(a.children[c])},i.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},i.outline.renderItems=function(a){for(var c=this.ctx.pdf.internal.getVerticalCoordinateString,l=0;l<a.children.length;l++){var h=a.children[l];this.objStart(h),this.line("/Title "+this.makeString(h.title)),this.line("/Parent "+this.makeRef(a)),l>0&&this.line("/Prev "+this.makeRef(a.children[l-1])),l<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[l+1])),h.children.length>0&&(this.line("/First "+this.makeRef(h.children[0])),this.line("/Last "+this.makeRef(h.children[h.children.length-1])));var m=this.count=this.count_r({count:0},h);if(m>0&&this.line("/Count "+m),h.options&&h.options.pageNumber){var x=i.internal.getPageInfo(h.options.pageNumber);this.line("/Dest ["+x.objId+" 0 R /XYZ 0 "+c(0)+" 0]")}this.objEnd()}for(var y=0;y<a.children.length;y++)this.renderItems(a.children[y])},i.outline.line=function(a){this.ctx.val+=a+`\r
`},i.outline.makeRef=function(a){return a.id+" 0 R"},i.outline.makeString=function(a){return"("+i.internal.pdfEscape(a)+")"},i.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},i.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},i.outline.count_r=function(a,c){for(var l=0;l<c.children.length;l++)a.count++,this.count_r(a,c.children[l]);return a.count}}])}(_t.API),function(t){var r=[192,193,194,195,196,197,198,199];t.processJPEG=function(i,a,c,l,h,m){var x,y=this.decode.DCT_DECODE,v=null;if(typeof i=="string"||this.__addimage__.isArrayBuffer(i)||this.__addimage__.isArrayBufferView(i)){switch(i=h||i,i=this.__addimage__.isArrayBuffer(i)?new Uint8Array(i):i,(x=function(C){for(var T,A=256*C.charCodeAt(4)+C.charCodeAt(5),D=C.length,_={width:0,height:0,numcomponents:1},M=4;M<D;M+=2){if(M+=A,r.indexOf(C.charCodeAt(M+1))!==-1){T=256*C.charCodeAt(M+5)+C.charCodeAt(M+6),_={width:256*C.charCodeAt(M+7)+C.charCodeAt(M+8),height:T,numcomponents:C.charCodeAt(M+9)};break}A=256*C.charCodeAt(M+2)+C.charCodeAt(M+3)}return _}(i=this.__addimage__.isArrayBufferView(i)?this.__addimage__.arrayBufferToBinaryString(i):i)).numcomponents){case 1:m=this.color_spaces.DEVICE_GRAY;break;case 4:m=this.color_spaces.DEVICE_CMYK;break;case 3:m=this.color_spaces.DEVICE_RGB}v={data:i,width:x.width,height:x.height,colorSpace:m,bitsPerComponent:8,filter:y,index:a,alias:c}}return v}}(_t.API);var Ra,sl,t0,r0,n0,wx=function(){var t,r,i;function a(l){var h,m,x,y,v,C,T,A,D,_,M,I,j,B;for(this.data=l,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},C=null;;){switch(h=this.readUInt32(),D=(function(){var Z,Q;for(Q=[],Z=0;Z<4;++Z)Q.push(String.fromCharCode(this.data[this.pos++]));return Q}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(h);break;case"fcTL":C&&this.animation.frames.push(C),this.pos+=4,C={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},v=this.readUInt16(),y=this.readUInt16()||100,C.delay=1e3*v/y,C.disposeOp=this.data[this.pos++],C.blendOp=this.data[this.pos++],C.data=[];break;case"IDAT":case"fdAT":for(D==="fdAT"&&(this.pos+=4,h-=4),l=(C!=null?C.data:void 0)||this.imgData,I=0;0<=h?I<h:I>h;0<=h?++I:--I)l.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(x=this.palette.length/3,this.transparency.indexed=this.read(h),this.transparency.indexed.length>x)throw new Error("More transparent colors than palette size");if((_=x-this.transparency.indexed.length)>0)for(j=0;0<=_?j<_:j>_;0<=_?++j:--j)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(h)[0];break;case 2:this.transparency.rgb=this.read(h)}break;case"tEXt":T=(M=this.read(h)).indexOf(0),A=String.fromCharCode.apply(String,M.slice(0,T)),this.text[A]=String.fromCharCode.apply(String,M.slice(T+1));break;case"IEND":return C&&this.animation.frames.push(C),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(B=this.colorType)===4||B===6,m=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*m,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=h}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}a.prototype.read=function(l){var h,m;for(m=[],h=0;0<=l?h<l:h>l;0<=l?++h:--h)m.push(this.data[this.pos++]);return m},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(l){var h=this.pixelBitlength/8,m=new Uint8Array(this.width*this.height*h),x=0,y=this;if(l==null&&(l=this.imgData),l.length===0)return new Uint8Array(0);function v(C,T,A,D){var _,M,I,j,B,Z,Q,xe,$,ie,ce,De,Y,V,oe,le,ne,Te,Se,Ie,se,be=Math.ceil((y.width-C)/A),Ge=Math.ceil((y.height-T)/D),O=y.width==be&&y.height==Ge;for(V=h*be,De=O?m:new Uint8Array(V*Ge),Z=l.length,Y=0,M=0;Y<Ge&&x<Z;){switch(l[x++]){case 0:for(j=ne=0;ne<V;j=ne+=1)De[M++]=l[x++];break;case 1:for(j=Te=0;Te<V;j=Te+=1)_=l[x++],B=j<h?0:De[M-h],De[M++]=(_+B)%256;break;case 2:for(j=Se=0;Se<V;j=Se+=1)_=l[x++],I=(j-j%h)/h,oe=Y&&De[(Y-1)*V+I*h+j%h],De[M++]=(oe+_)%256;break;case 3:for(j=Ie=0;Ie<V;j=Ie+=1)_=l[x++],I=(j-j%h)/h,B=j<h?0:De[M-h],oe=Y&&De[(Y-1)*V+I*h+j%h],De[M++]=(_+Math.floor((B+oe)/2))%256;break;case 4:for(j=se=0;se<V;j=se+=1)_=l[x++],I=(j-j%h)/h,B=j<h?0:De[M-h],Y===0?oe=le=0:(oe=De[(Y-1)*V+I*h+j%h],le=I&&De[(Y-1)*V+(I-1)*h+j%h]),Q=B+oe-le,xe=Math.abs(Q-B),ie=Math.abs(Q-oe),ce=Math.abs(Q-le),$=xe<=ie&&xe<=ce?B:ie<=ce?oe:le,De[M++]=(_+$)%256;break;default:throw new Error("Invalid filter algorithm: "+l[x-1])}if(!O){var W=((T+Y*D)*y.width+C)*h,K=Y*V;for(j=0;j<be;j+=1){for(var ue=0;ue<h;ue+=1)m[W++]=De[K++];W+=(A-1)*h}}Y++}}return l=Qp(l),y.interlaceMethod==1?(v(0,0,8,8),v(4,0,8,8),v(0,4,4,8),v(2,0,4,4),v(0,2,2,4),v(1,0,2,2),v(0,1,1,2)):v(0,0,1,1),m},a.prototype.decodePalette=function(){var l,h,m,x,y,v,C,T,A;for(m=this.palette,v=this.transparency.indexed||[],y=new Uint8Array((v.length||0)+m.length),x=0,l=0,h=C=0,T=m.length;C<T;h=C+=3)y[x++]=m[h],y[x++]=m[h+1],y[x++]=m[h+2],y[x++]=(A=v[l++])!=null?A:255;return y},a.prototype.copyToImageData=function(l,h){var m,x,y,v,C,T,A,D,_,M,I;if(x=this.colors,_=null,m=this.hasAlphaChannel,this.palette.length&&(_=(I=this._decodedPalette)!=null?I:this._decodedPalette=this.decodePalette(),x=4,m=!0),D=(y=l.data||l).length,C=_||h,v=T=0,x===1)for(;v<D;)A=_?4*h[v/4]:T,M=C[A++],y[v++]=M,y[v++]=M,y[v++]=M,y[v++]=m?C[A++]:255,T=A;else for(;v<D;)A=_?4*h[v/4]:T,y[v++]=C[A++],y[v++]=C[A++],y[v++]=C[A++],y[v++]=m?C[A++]:255,T=A},a.prototype.decode=function(){var l;return l=new Uint8Array(this.width*this.height*4),this.copyToImageData(l,this.decodePixels()),l};var c=function(){if(Object.prototype.toString.call(Lt)==="[object Window]"){try{r=Lt.document.createElement("canvas"),i=r.getContext("2d")}catch{return!1}return!0}return!1};return c(),t=function(l){var h;if(c()===!0)return i.width=l.width,i.height=l.height,i.clearRect(0,0,l.width,l.height),i.putImageData(l,0,0),(h=new Image).src=r.toDataURL(),h;throw new Error("This method requires a Browser with Canvas-capability.")},a.prototype.decodeFrames=function(l){var h,m,x,y,v,C,T,A;if(this.animation){for(A=[],m=v=0,C=(T=this.animation.frames).length;v<C;m=++v)h=T[m],x=l.createImageData(h.width,h.height),y=this.decodePixels(new Uint8Array(h.data)),this.copyToImageData(x,y),h.imageData=x,A.push(h.image=t(x));return A}},a.prototype.renderFrame=function(l,h){var m,x,y;return m=(x=this.animation.frames)[h],y=x[h-1],h===0&&l.clearRect(0,0,this.width,this.height),(y!=null?y.disposeOp:void 0)===1?l.clearRect(y.xOffset,y.yOffset,y.width,y.height):(y!=null?y.disposeOp:void 0)===2&&l.putImageData(y.imageData,y.xOffset,y.yOffset),m.blendOp===0&&l.clearRect(m.xOffset,m.yOffset,m.width,m.height),l.drawImage(m.image,m.xOffset,m.yOffset)},a.prototype.animate=function(l){var h,m,x,y,v,C,T=this;return m=0,C=this.animation,y=C.numFrames,x=C.frames,v=C.numPlays,(h=function(){var A,D;if(A=m++%y,D=x[A],T.renderFrame(l,A),y>1&&m/y<v)return T.animation._timeout=setTimeout(h,D.delay)})()},a.prototype.stopAnimation=function(){var l;return clearTimeout((l=this.animation)!=null?l._timeout:void 0)},a.prototype.render=function(l){var h,m;return l._png&&l._png.stopAnimation(),l._png=this,l.width=this.width,l.height=this.height,h=l.getContext("2d"),this.animation?(this.decodeFrames(h),this.animate(h)):(m=h.createImageData(this.width,this.height),this.copyToImageData(m,this.decodePixels()),h.putImageData(m,0,0))},a}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function vx(t){var r=0;if(t[r++]!==71||t[r++]!==73||t[r++]!==70||t[r++]!==56||(t[r++]+1&253)!=56||t[r++]!==97)throw new Error("Invalid GIF 87a/89a header.");var i=t[r++]|t[r++]<<8,a=t[r++]|t[r++]<<8,c=t[r++],l=c>>7,h=1<<(7&c)+1;t[r++],t[r++];var m=null,x=null;l&&(m=r,x=h,r+=3*h);var y=!0,v=[],C=0,T=null,A=0,D=null;for(this.width=i,this.height=a;y&&r<t.length;)switch(t[r++]){case 33:switch(t[r++]){case 255:if(t[r]!==11||t[r+1]==78&&t[r+2]==69&&t[r+3]==84&&t[r+4]==83&&t[r+5]==67&&t[r+6]==65&&t[r+7]==80&&t[r+8]==69&&t[r+9]==50&&t[r+10]==46&&t[r+11]==48&&t[r+12]==3&&t[r+13]==1&&t[r+16]==0)r+=14,D=t[r++]|t[r++]<<8,r++;else for(r+=12;;){if(!((Y=t[r++])>=0))throw Error("Invalid block size");if(Y===0)break;r+=Y}break;case 249:if(t[r++]!==4||t[r+4]!==0)throw new Error("Invalid graphics extension block.");var _=t[r++];C=t[r++]|t[r++]<<8,T=t[r++],!(1&_)&&(T=null),A=_>>2&7,r++;break;case 254:for(;;){if(!((Y=t[r++])>=0))throw Error("Invalid block size");if(Y===0)break;r+=Y}break;default:throw new Error("Unknown graphic control label: 0x"+t[r-1].toString(16))}break;case 44:var M=t[r++]|t[r++]<<8,I=t[r++]|t[r++]<<8,j=t[r++]|t[r++]<<8,B=t[r++]|t[r++]<<8,Z=t[r++],Q=Z>>6&1,xe=1<<(7&Z)+1,$=m,ie=x,ce=!1;Z>>7&&(ce=!0,$=r,ie=xe,r+=3*xe);var De=r;for(r++;;){var Y;if(!((Y=t[r++])>=0))throw Error("Invalid block size");if(Y===0)break;r+=Y}v.push({x:M,y:I,width:j,height:B,has_local_palette:ce,palette_offset:$,palette_size:ie,data_offset:De,data_length:r-De,transparent_index:T,interlaced:!!Q,delay:C,disposal:A});break;case 59:y=!1;break;default:throw new Error("Unknown gif block: 0x"+t[r-1].toString(16))}this.numFrames=function(){return v.length},this.loopCount=function(){return D},this.frameInfo=function(V){if(V<0||V>=v.length)throw new Error("Frame index out of range.");return v[V]},this.decodeAndBlitFrameBGRA=function(V,oe){var le=this.frameInfo(V),ne=le.width*le.height,Te=new Uint8Array(ne);i0(t,le.data_offset,Te,ne);var Se=le.palette_offset,Ie=le.transparent_index;Ie===null&&(Ie=256);var se=le.width,be=i-se,Ge=se,O=4*(le.y*i+le.x),W=4*((le.y+le.height)*i+le.x),K=O,ue=4*be;le.interlaced===!0&&(ue+=4*i*7);for(var ae=8,Ee=0,Ae=Te.length;Ee<Ae;++Ee){var ke=Te[Ee];if(Ge===0&&(Ge=se,(K+=ue)>=W&&(ue=4*be+4*i*(ae-1),K=O+(se+be)*(ae<<1),ae>>=1)),ke===Ie)K+=4;else{var ze=t[Se+3*ke],Be=t[Se+3*ke+1],et=t[Se+3*ke+2];oe[K++]=et,oe[K++]=Be,oe[K++]=ze,oe[K++]=255}--Ge}},this.decodeAndBlitFrameRGBA=function(V,oe){var le=this.frameInfo(V),ne=le.width*le.height,Te=new Uint8Array(ne);i0(t,le.data_offset,Te,ne);var Se=le.palette_offset,Ie=le.transparent_index;Ie===null&&(Ie=256);var se=le.width,be=i-se,Ge=se,O=4*(le.y*i+le.x),W=4*((le.y+le.height)*i+le.x),K=O,ue=4*be;le.interlaced===!0&&(ue+=4*i*7);for(var ae=8,Ee=0,Ae=Te.length;Ee<Ae;++Ee){var ke=Te[Ee];if(Ge===0&&(Ge=se,(K+=ue)>=W&&(ue=4*be+4*i*(ae-1),K=O+(se+be)*(ae<<1),ae>>=1)),ke===Ie)K+=4;else{var ze=t[Se+3*ke],Be=t[Se+3*ke+1],et=t[Se+3*ke+2];oe[K++]=ze,oe[K++]=Be,oe[K++]=et,oe[K++]=255}--Ge}}}function i0(t,r,i,a){for(var c=t[r++],l=1<<c,h=l+1,m=h+1,x=c+1,y=(1<<x)-1,v=0,C=0,T=0,A=t[r++],D=new Int32Array(4096),_=null;;){for(;v<16&&A!==0;)C|=t[r++]<<v,v+=8,A===1?A=t[r++]:--A;if(v<x)break;var M=C&y;if(C>>=x,v-=x,M!==l){if(M===h)break;for(var I=M<m?M:_,j=0,B=I;B>l;)B=D[B]>>8,++j;var Z=B;if(T+j+(I!==M?1:0)>a)return void Nr.log("Warning, gif stream longer than expected.");i[T++]=Z;var Q=T+=j;for(I!==M&&(i[T++]=Z),B=I;j--;)B=D[B],i[--Q]=255&B,B>>=8;_!==null&&m<4096&&(D[m++]=_<<8|Z,m>=y+1&&x<12&&(++x,y=y<<1|1)),_=M}else m=h+1,y=(1<<(x=c+1))-1,_=null}return T!==a&&Nr.log("Warning, gif stream shorter than expected."),i}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function xc(t){var r,i,a,c,l,h=Math.floor,m=new Array(64),x=new Array(64),y=new Array(64),v=new Array(64),C=new Array(65535),T=new Array(65535),A=new Array(64),D=new Array(64),_=[],M=0,I=7,j=new Array(64),B=new Array(64),Z=new Array(64),Q=new Array(256),xe=new Array(2048),$=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ie=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],ce=[0,1,2,3,4,5,6,7,8,9,10,11],De=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Y=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],V=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],oe=[0,1,2,3,4,5,6,7,8,9,10,11],le=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ne=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Te(O,W){for(var K=0,ue=0,ae=new Array,Ee=1;Ee<=16;Ee++){for(var Ae=1;Ae<=O[Ee];Ae++)ae[W[ue]]=[],ae[W[ue]][0]=K,ae[W[ue]][1]=Ee,ue++,K++;K*=2}return ae}function Se(O){for(var W=O[0],K=O[1]-1;K>=0;)W&1<<K&&(M|=1<<I),K--,--I<0&&(M==255?(Ie(255),Ie(0)):Ie(M),I=7,M=0)}function Ie(O){_.push(O)}function se(O){Ie(O>>8&255),Ie(255&O)}function be(O,W,K,ue,ae){for(var Ee,Ae=ae[0],ke=ae[240],ze=function(He,st){var Re,rt,ht,dt,It,At,Vt,Rt,ft,Bt,at=0;for(ft=0;ft<8;++ft){Re=He[at],rt=He[at+1],ht=He[at+2],dt=He[at+3],It=He[at+4],At=He[at+5],Vt=He[at+6];var Ar=Re+(Rt=He[at+7]),St=Re-Rt,it=rt+Vt,Dt=rt-Vt,Tt=ht+At,sr=ht-At,Qt=dt+It,Ti=dt-It,jr=Ar+Qt,qt=Ar-Qt,Cn=it+Tt,_r=it-Tt;He[at]=jr+Cn,He[at+4]=jr-Cn;var Ot=.707106781*(_r+qt);He[at+2]=qt+Ot,He[at+6]=qt-Ot;var Gt=.382683433*((jr=Ti+sr)-(_r=Dt+St)),ji=.5411961*jr+Gt,nr=1.306562965*_r+Gt,Sn=.707106781*(Cn=sr+Dt),Hn=St+Sn,wt=St-Sn;He[at+5]=wt+ji,He[at+3]=wt-ji,He[at+1]=Hn+nr,He[at+7]=Hn-nr,at+=8}for(at=0,ft=0;ft<8;++ft){Re=He[at],rt=He[at+8],ht=He[at+16],dt=He[at+24],It=He[at+32],At=He[at+40],Vt=He[at+48];var ni=Re+(Rt=He[at+56]),xn=Re-Rt,yn=rt+Vt,ir=rt-Vt,yr=ht+At,Cr=ht-At,ut=dt+It,Ln=dt-It,Vn=ni+ut,Sr=ni-ut,bn=yn+yr,Gn=yn-yr;He[at]=Vn+bn,He[at+32]=Vn-bn;var En=.707106781*(Gn+Sr);He[at+16]=Sr+En,He[at+48]=Sr-En;var Kr=.382683433*((Vn=Ln+Cr)-(Gn=ir+xn)),ns=.5411961*Vn+Kr,ws=1.306562965*Gn+Kr,In=.707106781*(bn=Cr+ir),Gr=xn+In,dr=xn-In;He[at+40]=dr+ns,He[at+24]=dr-ns,He[at+8]=Gr+ws,He[at+56]=Gr-ws,at++}for(ft=0;ft<64;++ft)Bt=He[ft]*st[ft],A[ft]=Bt>0?Bt+.5|0:Bt-.5|0;return A}(O,W),Be=0;Be<64;++Be)D[$[Be]]=ze[Be];var et=D[0]-K;K=D[0],et==0?Se(ue[0]):(Se(ue[T[Ee=32767+et]]),Se(C[Ee]));for(var Fe=63;Fe>0&&D[Fe]==0;)Fe--;if(Fe==0)return Se(Ae),K;for(var mt,Pe=1;Pe<=Fe;){for(var de=Pe;D[Pe]==0&&Pe<=Fe;)++Pe;var pt=Pe-de;if(pt>=16){mt=pt>>4;for(var nt=1;nt<=mt;++nt)Se(ke);pt&=15}Ee=32767+D[Pe],Se(ae[(pt<<4)+T[Ee]]),Se(C[Ee]),Pe++}return Fe!=63&&Se(Ae),K}function Ge(O){O=Math.min(Math.max(O,1),100),l!=O&&(function(W){for(var K=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ue=0;ue<64;ue++){var ae=h((K[ue]*W+50)/100);ae=Math.min(Math.max(ae,1),255),m[$[ue]]=ae}for(var Ee=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ae=0;Ae<64;Ae++){var ke=h((Ee[Ae]*W+50)/100);ke=Math.min(Math.max(ke,1),255),x[$[Ae]]=ke}for(var ze=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Be=0,et=0;et<8;et++)for(var Fe=0;Fe<8;Fe++)y[Be]=1/(m[$[Be]]*ze[et]*ze[Fe]*8),v[Be]=1/(x[$[Be]]*ze[et]*ze[Fe]*8),Be++}(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),l=O)}this.encode=function(O,W){W&&Ge(W),_=new Array,M=0,I=7,se(65496),se(65504),se(16),Ie(74),Ie(70),Ie(73),Ie(70),Ie(0),Ie(1),Ie(1),Ie(0),se(1),se(1),Ie(0),Ie(0),function(){se(65499),se(132),Ie(0);for(var rt=0;rt<64;rt++)Ie(m[rt]);Ie(1);for(var ht=0;ht<64;ht++)Ie(x[ht])}(),function(rt,ht){se(65472),se(17),Ie(8),se(ht),se(rt),Ie(3),Ie(1),Ie(17),Ie(0),Ie(2),Ie(17),Ie(1),Ie(3),Ie(17),Ie(1)}(O.width,O.height),function(){se(65476),se(418),Ie(0);for(var rt=0;rt<16;rt++)Ie(ie[rt+1]);for(var ht=0;ht<=11;ht++)Ie(ce[ht]);Ie(16);for(var dt=0;dt<16;dt++)Ie(De[dt+1]);for(var It=0;It<=161;It++)Ie(Y[It]);Ie(1);for(var At=0;At<16;At++)Ie(V[At+1]);for(var Vt=0;Vt<=11;Vt++)Ie(oe[Vt]);Ie(17);for(var Rt=0;Rt<16;Rt++)Ie(le[Rt+1]);for(var ft=0;ft<=161;ft++)Ie(ne[ft])}(),se(65498),se(12),Ie(3),Ie(1),Ie(0),Ie(2),Ie(17),Ie(3),Ie(17),Ie(0),Ie(63),Ie(0);var K=0,ue=0,ae=0;M=0,I=7,this.encode.displayName="_encode_";for(var Ee,Ae,ke,ze,Be,et,Fe,mt,Pe,de=O.data,pt=O.width,nt=O.height,He=4*pt,st=0;st<nt;){for(Ee=0;Ee<He;){for(Be=He*st+Ee,Fe=-1,mt=0,Pe=0;Pe<64;Pe++)et=Be+(mt=Pe>>3)*He+(Fe=4*(7&Pe)),st+mt>=nt&&(et-=He*(st+1+mt-nt)),Ee+Fe>=He&&(et-=Ee+Fe-He+4),Ae=de[et++],ke=de[et++],ze=de[et++],j[Pe]=(xe[Ae]+xe[ke+256>>0]+xe[ze+512>>0]>>16)-128,B[Pe]=(xe[Ae+768>>0]+xe[ke+1024>>0]+xe[ze+1280>>0]>>16)-128,Z[Pe]=(xe[Ae+1280>>0]+xe[ke+1536>>0]+xe[ze+1792>>0]>>16)-128;K=be(j,y,K,r,a),ue=be(B,v,ue,i,c),ae=be(Z,v,ae,i,c),Ee+=32}st+=8}if(I>=0){var Re=[];Re[1]=I+1,Re[0]=(1<<I+1)-1,Se(Re)}return se(65497),new Uint8Array(_)},t=t||50,function(){for(var O=String.fromCharCode,W=0;W<256;W++)Q[W]=O(W)}(),r=Te(ie,ce),i=Te(V,oe),a=Te(De,Y),c=Te(le,ne),function(){for(var O=1,W=2,K=1;K<=15;K++){for(var ue=O;ue<W;ue++)T[32767+ue]=K,C[32767+ue]=[],C[32767+ue][1]=K,C[32767+ue][0]=ue;for(var ae=-(W-1);ae<=-O;ae++)T[32767+ae]=K,C[32767+ae]=[],C[32767+ae][1]=K,C[32767+ae][0]=W-1+ae;O<<=1,W<<=1}}(),function(){for(var O=0;O<256;O++)xe[O]=19595*O,xe[O+256>>0]=38470*O,xe[O+512>>0]=7471*O+32768,xe[O+768>>0]=-11059*O,xe[O+1024>>0]=-21709*O,xe[O+1280>>0]=32768*O+8421375,xe[O+1536>>0]=-27439*O,xe[O+1792>>0]=-5329*O}(),Ge(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Pi(t,r){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!r,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function s0(t){function r(ie){if(!ie)throw Error("assert :P")}function i(ie,ce,De){for(var Y=0;4>Y;Y++)if(ie[ce+Y]!=De.charCodeAt(Y))return!0;return!1}function a(ie,ce,De,Y,V){for(var oe=0;oe<V;oe++)ie[ce+oe]=De[Y+oe]}function c(ie,ce,De,Y){for(var V=0;V<Y;V++)ie[ce+V]=De}function l(ie){return new Int32Array(ie)}function h(ie,ce){for(var De=[],Y=0;Y<ie;Y++)De.push(new ce);return De}function m(ie,ce){var De=[];return function Y(V,oe,le){for(var ne=le[oe],Te=0;Te<ne&&(V.push(le.length>oe+1?[]:new ce),!(le.length<oe+1));Te++)Y(V[Te],oe+1,le)}(De,0,ie),De}var x=function(){var ie=this;function ce(g,b){for(var E=1<<b-1>>>0;g&E;)E>>>=1;return E?(g&E-1)+E:g}function De(g,b,E,L,F){r(!(L%E));do g[b+(L-=E)]=F;while(0<L)}function Y(g,b,E,L,F){if(r(2328>=F),512>=F)var z=l(512);else if((z=l(F))==null)return 0;return function(H,G,X,re,me,_e){var Le,Ne,Ze=G,Ue=1<<X,pe=l(16),ye=l(16);for(r(me!=0),r(re!=null),r(H!=null),r(0<X),Ne=0;Ne<me;++Ne){if(15<re[Ne])return 0;++pe[re[Ne]]}if(pe[0]==me)return 0;for(ye[1]=0,Le=1;15>Le;++Le){if(pe[Le]>1<<Le)return 0;ye[Le+1]=ye[Le]+pe[Le]}for(Ne=0;Ne<me;++Ne)Le=re[Ne],0<re[Ne]&&(_e[ye[Le]++]=Ne);if(ye[15]==1)return(re=new V).g=0,re.value=_e[0],De(H,Ze,1,Ue,re),Ue;var We,Je=-1,Ye=Ue-1,gt=0,ot=1,jt=1,lt=1<<X;for(Ne=0,Le=1,me=2;Le<=X;++Le,me<<=1){if(ot+=jt<<=1,0>(jt-=pe[Le]))return 0;for(;0<pe[Le];--pe[Le])(re=new V).g=Le,re.value=_e[Ne++],De(H,Ze+gt,me,lt,re),gt=ce(gt,Le)}for(Le=X+1,me=2;15>=Le;++Le,me<<=1){if(ot+=jt<<=1,0>(jt-=pe[Le]))return 0;for(;0<pe[Le];--pe[Le]){if(re=new V,(gt&Ye)!=Je){for(Ze+=lt,We=1<<(Je=Le)-X;15>Je&&!(0>=(We-=pe[Je]));)++Je,We<<=1;Ue+=lt=1<<(We=Je-X),H[G+(Je=gt&Ye)].g=We+X,H[G+Je].value=Ze-G-Je}re.g=Le-X,re.value=_e[Ne++],De(H,Ze+(gt>>X),me,lt,re),gt=ce(gt,Le)}}return ot!=2*ye[15]-1?0:Ue}(g,b,E,L,F,z)}function V(){this.value=this.g=0}function oe(){this.value=this.g=0}function le(){this.G=h(5,V),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=h(br,oe)}function ne(g,b,E,L){r(g!=null),r(b!=null),r(2147483648>L),g.Ca=254,g.I=0,g.b=-8,g.Ka=0,g.oa=b,g.pa=E,g.Jd=b,g.Yc=E+L,g.Zc=4<=L?E+L-4+1:E,Ee(g)}function Te(g,b){for(var E=0;0<b--;)E|=ke(g,128)<<b;return E}function Se(g,b){var E=Te(g,b);return Ae(g)?-E:E}function Ie(g,b,E,L){var F,z=0;for(r(g!=null),r(b!=null),r(4294967288>L),g.Sb=L,g.Ra=0,g.u=0,g.h=0,4<L&&(L=4),F=0;F<L;++F)z+=b[E+F]<<8*F;g.Ra=z,g.bb=L,g.oa=b,g.pa=E}function se(g){for(;8<=g.u&&g.bb<g.Sb;)g.Ra>>>=8,g.Ra+=g.oa[g.pa+g.bb]<<wi-8>>>0,++g.bb,g.u-=8;K(g)&&(g.h=1,g.u=0)}function be(g,b){if(r(0<=b),!g.h&&b<=Yi){var E=W(g)&js[b];return g.u+=b,se(g),E}return g.h=1,g.u=0}function Ge(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function O(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function W(g){return g.Ra>>>(g.u&wi-1)>>>0}function K(g){return r(g.bb<=g.Sb),g.h||g.bb==g.Sb&&g.u>wi}function ue(g,b){g.u=b,g.h=K(g)}function ae(g){g.u>=Zt&&(r(g.u>=Zt),se(g))}function Ee(g){r(g!=null&&g.oa!=null),g.pa<g.Zc?(g.I=(g.oa[g.pa++]|g.I<<8)>>>0,g.b+=8):(r(g!=null&&g.oa!=null),g.pa<g.Yc?(g.b+=8,g.I=g.oa[g.pa++]|g.I<<8):g.Ka?g.b=0:(g.I<<=8,g.b+=8,g.Ka=1))}function Ae(g){return Te(g,1)}function ke(g,b){var E=g.Ca;0>g.b&&Ee(g);var L=g.b,F=E*b>>>8,z=(g.I>>>L>F)+0;for(z?(E-=F,g.I-=F+1<<L>>>0):E=F+1,L=E,F=0;256<=L;)F+=8,L>>=8;return L=7^F+hn[L],g.b-=L,g.Ca=(E<<L)-1,z}function ze(g,b,E){g[b+0]=E>>24&255,g[b+1]=E>>16&255,g[b+2]=E>>8&255,g[b+3]=E>>0&255}function Be(g,b){return g[b+0]<<0|g[b+1]<<8}function et(g,b){return Be(g,b)|g[b+2]<<16}function Fe(g,b){return Be(g,b)|Be(g,b+2)<<16}function mt(g,b){var E=1<<b;return r(g!=null),r(0<b),g.X=l(E),g.X==null?0:(g.Mb=32-b,g.Xa=b,1)}function Pe(g,b){r(g!=null),r(b!=null),r(g.Xa==b.Xa),a(b.X,0,g.X,0,1<<b.Xa)}function de(){this.X=[],this.Xa=this.Mb=0}function pt(g,b,E,L){r(E!=null),r(L!=null);var F=E[0],z=L[0];return F==0&&(F=(g*z+b/2)/b),z==0&&(z=(b*F+g/2)/g),0>=F||0>=z?0:(E[0]=F,L[0]=z,1)}function nt(g,b){return g+(1<<b)-1>>>b}function He(g,b){return((4278255360&g)+(4278255360&b)>>>0&4278255360)+((16711935&g)+(16711935&b)>>>0&16711935)>>>0}function st(g,b){ie[b]=function(E,L,F,z,H,G,X){var re;for(re=0;re<H;++re){var me=ie[g](G[X+re-1],F,z+re);G[X+re]=He(E[L+re],me)}}}function Re(){this.ud=this.hd=this.jd=0}function rt(g,b){return((4278124286&(g^b))>>>1)+(g&b)>>>0}function ht(g){return 0<=g&&256>g?g:0>g?0:255<g?255:void 0}function dt(g,b){return ht(g+(g-b+.5>>1))}function It(g,b,E){return Math.abs(b-E)-Math.abs(g-E)}function At(g,b,E,L,F,z,H){for(L=z[H-1],E=0;E<F;++E)z[H+E]=L=He(g[b+E],L)}function Vt(g,b,E,L,F){var z;for(z=0;z<E;++z){var H=g[b+z],G=H>>8&255,X=16711935&(X=(X=16711935&H)+((G<<16)+G));L[F+z]=(4278255360&H)+X>>>0}}function Rt(g,b){b.jd=g>>0&255,b.hd=g>>8&255,b.ud=g>>16&255}function ft(g,b,E,L,F,z){var H;for(H=0;H<L;++H){var G=b[E+H],X=G>>>8,re=G,me=255&(me=(me=G>>>16)+((g.jd<<24>>24)*(X<<24>>24)>>>5));re=255&(re=(re=re+((g.hd<<24>>24)*(X<<24>>24)>>>5))+((g.ud<<24>>24)*(me<<24>>24)>>>5)),F[z+H]=(4278255360&G)+(me<<16)+re}}function Bt(g,b,E,L,F){ie[b]=function(z,H,G,X,re,me,_e,Le,Ne){for(X=_e;X<Le;++X)for(_e=0;_e<Ne;++_e)re[me++]=F(G[L(z[H++])])},ie[g]=function(z,H,G,X,re,me,_e){var Le=8>>z.b,Ne=z.Ea,Ze=z.K[0],Ue=z.w;if(8>Le)for(z=(1<<z.b)-1,Ue=(1<<Le)-1;H<G;++H){var pe,ye=0;for(pe=0;pe<Ne;++pe)pe&z||(ye=L(X[re++])),me[_e++]=F(Ze[ye&Ue]),ye>>=Le}else ie["VP8LMapColor"+E](X,re,Ze,Ue,me,_e,H,G,Ne)}}function at(g,b,E,L,F){for(E=b+E;b<E;){var z=g[b++];L[F++]=z>>16&255,L[F++]=z>>8&255,L[F++]=z>>0&255}}function Ar(g,b,E,L,F){for(E=b+E;b<E;){var z=g[b++];L[F++]=z>>16&255,L[F++]=z>>8&255,L[F++]=z>>0&255,L[F++]=z>>24&255}}function St(g,b,E,L,F){for(E=b+E;b<E;){var z=(H=g[b++])>>16&240|H>>12&15,H=H>>0&240|H>>28&15;L[F++]=z,L[F++]=H}}function it(g,b,E,L,F){for(E=b+E;b<E;){var z=(H=g[b++])>>16&248|H>>13&7,H=H>>5&224|H>>3&31;L[F++]=z,L[F++]=H}}function Dt(g,b,E,L,F){for(E=b+E;b<E;){var z=g[b++];L[F++]=z>>0&255,L[F++]=z>>8&255,L[F++]=z>>16&255}}function Tt(g,b,E,L,F,z){if(z==0)for(E=b+E;b<E;)ze(L,((z=g[b++])[0]>>24|z[1]>>8&65280|z[2]<<8&16711680|z[3]<<24)>>>0),F+=32;else a(L,F,g,b,E)}function sr(g,b){ie[b][0]=ie[g+"0"],ie[b][1]=ie[g+"1"],ie[b][2]=ie[g+"2"],ie[b][3]=ie[g+"3"],ie[b][4]=ie[g+"4"],ie[b][5]=ie[g+"5"],ie[b][6]=ie[g+"6"],ie[b][7]=ie[g+"7"],ie[b][8]=ie[g+"8"],ie[b][9]=ie[g+"9"],ie[b][10]=ie[g+"10"],ie[b][11]=ie[g+"11"],ie[b][12]=ie[g+"12"],ie[b][13]=ie[g+"13"],ie[b][14]=ie[g+"0"],ie[b][15]=ie[g+"0"]}function Qt(g){return g==Hl||g==Vl||g==Uo||g==Gl}function Ti(){this.eb=[],this.size=this.A=this.fb=0}function jr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function qt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ti,this.f.kb=new jr,this.sd=null}function Cn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function _r(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ot(g){return alert("todo:WebPSamplerProcessPlane"),g.T}function Gt(g,b){var E=g.T,L=b.ba.f.RGBA,F=L.eb,z=L.fb+g.ka*L.A,H=Ai[b.ba.S],G=g.y,X=g.O,re=g.f,me=g.N,_e=g.ea,Le=g.W,Ne=b.cc,Ze=b.dc,Ue=b.Mc,pe=b.Nc,ye=g.ka,We=g.ka+g.T,Je=g.U,Ye=Je+1>>1;for(ye==0?H(G,X,null,null,re,me,_e,Le,re,me,_e,Le,F,z,null,null,Je):(H(b.ec,b.fc,G,X,Ne,Ze,Ue,pe,re,me,_e,Le,F,z-L.A,F,z,Je),++E);ye+2<We;ye+=2)Ne=re,Ze=me,Ue=_e,pe=Le,me+=g.Rc,Le+=g.Rc,z+=2*L.A,H(G,(X+=2*g.fa)-g.fa,G,X,Ne,Ze,Ue,pe,re,me,_e,Le,F,z-L.A,F,z,Je);return X+=g.fa,g.j+We<g.o?(a(b.ec,b.fc,G,X,Je),a(b.cc,b.dc,re,me,Ye),a(b.Mc,b.Nc,_e,Le,Ye),E--):1&We||H(G,X,null,null,re,me,_e,Le,re,me,_e,Le,F,z+L.A,null,null,Je),E}function ji(g,b,E){var L=g.F,F=[g.J];if(L!=null){var z=g.U,H=b.ba.S,G=H==Fo||H==Uo;b=b.ba.f.RGBA;var X=[0],re=g.ka;X[0]=g.T,g.Kb&&(re==0?--X[0]:(--re,F[0]-=g.width),g.j+g.ka+g.T==g.o&&(X[0]=g.o-g.j-re));var me=b.eb;re=b.fb+re*b.A,g=Tr(L,F[0],g.width,z,X,me,re+(G?0:3),b.A),r(E==X),g&&Qt(H)&&Jn(me,re,G,z,X,b.A)}return 0}function nr(g){var b=g.ma,E=b.ba.S,L=11>E,F=E==Ro||E==Bo||E==Fo||E==ql||E==12||Qt(E);if(b.memory=null,b.Ib=null,b.Jb=null,b.Nd=null,!os(b.Oa,g,F?11:12))return 0;if(F&&Qt(E)&&$e(),g.da)alert("todo:use_scaling");else{if(L){if(b.Ib=Ot,g.Kb){if(E=g.U+1>>1,b.memory=l(g.U+2*E),b.memory==null)return 0;b.ec=b.memory,b.fc=0,b.cc=b.ec,b.dc=b.fc+g.U,b.Mc=b.cc,b.Nc=b.dc+E,b.Ib=Gt,$e()}}else alert("todo:EmitYUV");F&&(b.Jb=ji,L&&Ce())}if(L&&!Od){for(g=0;256>g;++g)l1[g]=89858*(g-128)+qo>>zo,u1[g]=-22014*(g-128)+qo,d1[g]=-45773*(g-128),c1[g]=113618*(g-128)+qo>>zo;for(g=oo;g<Xl;++g)b=76283*(g-16)+qo>>zo,h1[g-oo]=Wr(b,255),f1[g-oo]=Wr(b+8>>4,15);Od=1}return 1}function Sn(g){var b=g.ma,E=g.U,L=g.T;return r(!(1&g.ka)),0>=E||0>=L?0:(E=b.Ib(g,b),b.Jb!=null&&b.Jb(g,b,E),b.Dc+=E,1)}function Hn(g){g.ma.memory=null}function wt(g,b,E,L){return be(g,8)!=47?0:(b[0]=be(g,14)+1,E[0]=be(g,14)+1,L[0]=be(g,1),be(g,3)!=0?0:!g.h)}function ni(g,b){if(4>g)return g+1;var E=g-2>>1;return(2+(1&g)<<E)+be(b,E)+1}function xn(g,b){return 120<b?b-120:1<=(E=((E=Xh[b-1])>>4)*g+(8-(15&E)))?E:1;var E}function yn(g,b,E){var L=W(E),F=g[b+=255&L].g-8;return 0<F&&(ue(E,E.u+8),L=W(E),b+=g[b].value,b+=L&(1<<F)-1),ue(E,E.u+g[b].g),g[b].value}function ir(g,b,E){return E.g+=g.g,E.value+=g.value<<b>>>0,r(8>=E.g),g.g}function yr(g,b,E){var L=g.xc;return r((b=L==0?0:g.vc[g.md*(E>>L)+(b>>L)])<g.Wb),g.Ya[b]}function Cr(g,b,E,L){var F=g.ab,z=g.c*b,H=g.C;b=H+b;var G=E,X=L;for(L=g.Ta,E=g.Ua;0<F--;){var re=g.gc[F],me=H,_e=b,Le=G,Ne=X,Ze=(X=L,G=E,re.Ea);switch(r(me<_e),r(_e<=re.nc),re.hc){case 2:n(Le,Ne,(_e-me)*Ze,X,G);break;case 0:var Ue=me,pe=_e,ye=X,We=G,Je=(lt=re).Ea;Ue==0&&(R(Le,Ne,null,null,1,ye,We),At(Le,Ne+1,0,0,Je-1,ye,We+1),Ne+=Je,We+=Je,++Ue);for(var Ye=1<<lt.b,gt=Ye-1,ot=nt(Je,lt.b),jt=lt.K,lt=lt.w+(Ue>>lt.b)*ot;Ue<pe;){var ur=jt,gr=lt,lr=1;for(e(Le,Ne,ye,We-Je,1,ye,We);lr<Je;){var Jt=(lr&~gt)+Ye;Jt>Je&&(Jt=Je),(0,p[ur[gr++]>>8&15])(Le,Ne+ +lr,ye,We+lr-Je,Jt-lr,ye,We+lr),lr=Jt}Ne+=Je,We+=Je,++Ue&gt||(lt+=ot)}_e!=re.nc&&a(X,G-Ze,X,G+(_e-me-1)*Ze,Ze);break;case 1:for(Ze=Le,pe=Ne,Je=(Le=re.Ea)-(We=Le&~(ye=(Ne=1<<re.b)-1)),Ue=nt(Le,re.b),Ye=re.K,re=re.w+(me>>re.b)*Ue;me<_e;){for(gt=Ye,ot=re,jt=new Re,lt=pe+We,ur=pe+Le;pe<lt;)Rt(gt[ot++],jt),w(jt,Ze,pe,Ne,X,G),pe+=Ne,G+=Ne;pe<ur&&(Rt(gt[ot++],jt),w(jt,Ze,pe,Je,X,G),pe+=Je,G+=Je),++me&ye||(re+=Ue)}break;case 3:if(Le==X&&Ne==G&&0<re.b){for(pe=X,Le=Ze=G+(_e-me)*Ze-(We=(_e-me)*nt(re.Ea,re.b)),Ne=X,ye=G,Ue=[],We=(Je=We)-1;0<=We;--We)Ue[We]=Ne[ye+We];for(We=Je-1;0<=We;--We)pe[Le+We]=Ue[We];s(re,me,_e,X,Ze,X,G)}else s(re,me,_e,Le,Ne,X,G)}G=L,X=E}X!=E&&a(L,E,G,X,z)}function ut(g,b){var E=g.V,L=g.Ba+g.c*g.C,F=b-g.C;if(r(b<=g.l.o),r(16>=F),0<F){var z=g.l,H=g.Ta,G=g.Ua,X=z.width;if(Cr(g,F,E,L),F=G=[G],r((E=g.C)<(L=b)),r(z.v<z.va),L>z.o&&(L=z.o),E<z.j){var re=z.j-E;E=z.j,F[0]+=re*X}if(E>=L?E=0:(F[0]+=4*z.v,z.ka=E-z.j,z.U=z.va-z.v,z.T=L-E,E=1),E){if(G=G[0],11>(E=g.ca).S){var me=E.f.RGBA,_e=(L=E.S,F=z.U,z=z.T,re=me.eb,me.A),Le=z;for(me=me.fb+g.Ma*me.A;0<Le--;){var Ne=H,Ze=G,Ue=F,pe=re,ye=me;switch(L){case Po:S(Ne,Ze,Ue,pe,ye);break;case Ro:k(Ne,Ze,Ue,pe,ye);break;case Hl:k(Ne,Ze,Ue,pe,ye),Jn(pe,ye,0,Ue,1,0);break;case Sd:te(Ne,Ze,Ue,pe,ye);break;case Bo:Tt(Ne,Ze,Ue,pe,ye,1);break;case Vl:Tt(Ne,Ze,Ue,pe,ye,1),Jn(pe,ye,0,Ue,1,0);break;case Fo:Tt(Ne,Ze,Ue,pe,ye,0);break;case Uo:Tt(Ne,Ze,Ue,pe,ye,0),Jn(pe,ye,1,Ue,1,0);break;case ql:P(Ne,Ze,Ue,pe,ye);break;case Gl:P(Ne,Ze,Ue,pe,ye),Ir(pe,ye,Ue,1,0);break;case Ed:q(Ne,Ze,Ue,pe,ye);break;default:r(0)}G+=X,me+=_e}g.Ma+=z}else alert("todo:EmitRescaledRowsYUVA");r(g.Ma<=E.height)}}g.C=b,r(g.C<=g.i)}function Ln(g){var b;if(0<g.ua)return 0;for(b=0;b<g.Wb;++b){var E=g.Ya[b].G,L=g.Ya[b].H;if(0<E[1][L[1]+0].g||0<E[2][L[2]+0].g||0<E[3][L[3]+0].g)return 0}return 1}function Vn(g,b,E,L,F,z){if(g.Z!=0){var H=g.qd,G=g.rd;for(r(Ls[g.Z]!=null);b<E;++b)Ls[g.Z](H,G,L,F,L,F,z),H=L,G=F,F+=z;g.qd=H,g.rd=G}}function Sr(g,b){var E=g.l.ma,L=E.Z==0||E.Z==1?g.l.j:g.C;if(L=g.C<L?L:g.C,r(b<=g.l.o),b>L){var F=g.l.width,z=E.ca,H=E.tb+F*L,G=g.V,X=g.Ba+g.c*L,re=g.gc;r(g.ab==1),r(re[0].hc==3),u(re[0],L,b,G,X,z,H),Vn(E,L,b,z,H,F)}g.C=g.Ma=b}function bn(g,b,E,L,F,z,H){var G=g.$/L,X=g.$%L,re=g.m,me=g.s,_e=E+g.$,Le=_e;F=E+L*F;var Ne=E+L*z,Ze=280+me.ua,Ue=g.Pb?G:16777216,pe=0<me.ua?me.Wa:null,ye=me.wc,We=_e<Ne?yr(me,X,G):null;r(g.C<z),r(Ne<=F);var Je=!1;e:for(;;){for(;Je||_e<Ne;){var Ye=0;if(G>=Ue){var gt=_e-E;r((Ue=g).Pb),Ue.wd=Ue.m,Ue.xd=gt,0<Ue.s.ua&&Pe(Ue.s.Wa,Ue.s.vb),Ue=G+$h}if(X&ye||(We=yr(me,X,G)),r(We!=null),We.Qb&&(b[_e]=We.qb,Je=!0),!Je)if(ae(re),We.jc){Ye=re,gt=b;var ot=_e,jt=We.pd[W(Ye)&br-1];r(We.jc),256>jt.g?(ue(Ye,Ye.u+jt.g),gt[ot]=jt.value,Ye=0):(ue(Ye,Ye.u+jt.g-256),r(256<=jt.value),Ye=jt.value),Ye==0&&(Je=!0)}else Ye=yn(We.G[0],We.H[0],re);if(re.h)break;if(Je||256>Ye){if(!Je)if(We.nd)b[_e]=(We.qb|Ye<<8)>>>0;else{if(ae(re),Je=yn(We.G[1],We.H[1],re),ae(re),gt=yn(We.G[2],We.H[2],re),ot=yn(We.G[3],We.H[3],re),re.h)break;b[_e]=(ot<<24|Je<<16|Ye<<8|gt)>>>0}if(Je=!1,++_e,++X>=L&&(X=0,++G,H!=null&&G<=z&&!(G%16)&&H(g,G),pe!=null))for(;Le<_e;)Ye=b[Le++],pe.X[(506832829*Ye&4294967295)>>>pe.Mb]=Ye}else if(280>Ye){if(Ye=ni(Ye-256,re),gt=yn(We.G[4],We.H[4],re),ae(re),gt=xn(L,gt=ni(gt,re)),re.h)break;if(_e-E<gt||F-_e<Ye)break e;for(ot=0;ot<Ye;++ot)b[_e+ot]=b[_e+ot-gt];for(_e+=Ye,X+=Ye;X>=L;)X-=L,++G,H!=null&&G<=z&&!(G%16)&&H(g,G);if(r(_e<=F),X&ye&&(We=yr(me,X,G)),pe!=null)for(;Le<_e;)Ye=b[Le++],pe.X[(506832829*Ye&4294967295)>>>pe.Mb]=Ye}else{if(!(Ye<Ze))break e;for(Je=Ye-280,r(pe!=null);Le<_e;)Ye=b[Le++],pe.X[(506832829*Ye&4294967295)>>>pe.Mb]=Ye;Ye=_e,r(!(Je>>>(gt=pe).Xa)),b[Ye]=gt.X[Je],Je=!0}Je||r(re.h==K(re))}if(g.Pb&&re.h&&_e<F)r(g.m.h),g.a=5,g.m=g.wd,g.$=g.xd,0<g.s.ua&&Pe(g.s.vb,g.s.Wa);else{if(re.h)break e;H!=null&&H(g,G>z?z:G),g.a=0,g.$=_e-E}return 1}return g.a=3,0}function Gn(g){r(g!=null),g.vc=null,g.yc=null,g.Ya=null;var b=g.Wa;b!=null&&(b.X=null),g.vb=null,r(g!=null)}function En(){var g=new Hr;return g==null?null:(g.a=0,g.xb=jd,sr("Predictor","VP8LPredictors"),sr("Predictor","VP8LPredictors_C"),sr("PredictorAdd","VP8LPredictorsAdd"),sr("PredictorAdd","VP8LPredictorsAdd_C"),n=Vt,w=ft,S=at,k=Ar,P=St,q=it,te=Dt,ie.VP8LMapColor32b=d,ie.VP8LMapColor8b=f,g)}function Kr(g,b,E,L,F){var z=1,H=[g],G=[b],X=L.m,re=L.s,me=null,_e=0;e:for(;;){if(E)for(;z&&be(X,1);){var Le=H,Ne=G,Ze=L,Ue=1,pe=Ze.m,ye=Ze.gc[Ze.ab],We=be(pe,2);if(Ze.Oc&1<<We)z=0;else{switch(Ze.Oc|=1<<We,ye.hc=We,ye.Ea=Le[0],ye.nc=Ne[0],ye.K=[null],++Ze.ab,r(4>=Ze.ab),We){case 0:case 1:ye.b=be(pe,3)+2,Ue=Kr(nt(ye.Ea,ye.b),nt(ye.nc,ye.b),0,Ze,ye.K),ye.K=ye.K[0];break;case 3:var Je,Ye=be(pe,8)+1,gt=16<Ye?0:4<Ye?1:2<Ye?2:3;if(Le[0]=nt(ye.Ea,gt),ye.b=gt,Je=Ue=Kr(Ye,1,0,Ze,ye.K)){var ot,jt=Ye,lt=ye,ur=1<<(8>>lt.b),gr=l(ur);if(gr==null)Je=0;else{var lr=lt.K[0],Jt=lt.w;for(gr[0]=lt.K[0][0],ot=1;ot<1*jt;++ot)gr[ot]=He(lr[Jt+ot],gr[ot-1]);for(;ot<4*ur;++ot)gr[ot]=0;lt.K[0]=null,lt.K[0]=gr,Je=1}}Ue=Je;break;case 2:break;default:r(0)}z=Ue}}if(H=H[0],G=G[0],z&&be(X,1)&&!(z=1<=(_e=be(X,4))&&11>=_e)){L.a=3;break e}var vr;if(vr=z)t:{var wr,Yt,cn,ei=L,dn=H,ti=G,mr=_e,li=E,ci=ei.m,vn=ei.s,jn=[null],Xn=1,Ci=0,Xi=Zh[mr];r:for(;;){if(li&&be(ci,1)){var Nn=be(ci,3)+2,us=nt(dn,Nn),xa=nt(ti,Nn),La=us*xa;if(!Kr(us,xa,0,ei,jn))break r;for(jn=jn[0],vn.xc=Nn,wr=0;wr<La;++wr){var ks=jn[wr]>>8&65535;jn[wr]=ks,ks>=Xn&&(Xn=ks+1)}}if(ci.h)break r;for(Yt=0;5>Yt;++Yt){var Xr=Id[Yt];!Yt&&0<mr&&(Xr+=1<<mr),Ci<Xr&&(Ci=Xr)}var Zl=h(Xn*Xi,V),Rd=Xn,Bd=h(Rd,le);if(Bd==null)var Vo=null;else r(65536>=Rd),Vo=Bd;var lo=l(Ci);if(Vo==null||lo==null||Zl==null){ei.a=1;break r}var Go=Zl;for(wr=cn=0;wr<Xn;++wr){var Oi=Vo[wr],ka=Oi.G,Da=Oi.H,Fd=0,Wo=1,Ud=0;for(Yt=0;5>Yt;++Yt){Xr=Id[Yt],ka[Yt]=Go,Da[Yt]=cn,!Yt&&0<mr&&(Xr+=1<<mr);i:{var Yo,$l=Xr,Xo=ei,co=lo,p1=Go,x1=cn,Kl=0,Ds=Xo.m,y1=be(Ds,1);if(c(co,0,0,$l),y1){var b1=be(Ds,1)+1,w1=be(Ds,1),zd=be(Ds,w1==0?1:8);co[zd]=1,b1==2&&(co[zd=be(Ds,8)]=1);var Zo=1}else{var qd=l(19),Hd=be(Ds,4)+4;if(19<Hd){Xo.a=3;var $o=0;break i}for(Yo=0;Yo<Hd;++Yo)qd[Yh[Yo]]=be(Ds,3);var Ql=void 0,uo=void 0,Vd=Xo,v1=qd,Ko=$l,Gd=co,Jl=0,Os=Vd.m,Wd=8,Yd=h(128,V);n:for(;Y(Yd,0,7,v1,19);){if(be(Os,1)){var N1=2+2*be(Os,3);if((Ql=2+be(Os,N1))>Ko)break n}else Ql=Ko;for(uo=0;uo<Ko&&Ql--;){ae(Os);var Xd=Yd[0+(127&W(Os))];ue(Os,Os.u+Xd.g);var Oa=Xd.value;if(16>Oa)Gd[uo++]=Oa,Oa!=0&&(Wd=Oa);else{var A1=Oa==16,Zd=Oa-16,C1=Gh[Zd],$d=be(Os,Vh[Zd])+C1;if(uo+$d>Ko)break n;for(var S1=A1?Wd:0;0<$d--;)Gd[uo++]=S1}}Jl=1;break n}Jl||(Vd.a=3),Zo=Jl}(Zo=Zo&&!Ds.h)&&(Kl=Y(p1,x1,8,co,$l)),Zo&&Kl!=0?$o=Kl:(Xo.a=3,$o=0)}if($o==0)break r;if(Wo&&Wh[Yt]==1&&(Wo=Go[cn].g==0),Fd+=Go[cn].g,cn+=$o,3>=Yt){var ho,ec=lo[0];for(ho=1;ho<Xr;++ho)lo[ho]>ec&&(ec=lo[ho]);Ud+=ec}}if(Oi.nd=Wo,Oi.Qb=0,Wo&&(Oi.qb=(ka[3][Da[3]+0].value<<24|ka[1][Da[1]+0].value<<16|ka[2][Da[2]+0].value)>>>0,Fd==0&&256>ka[0][Da[0]+0].value&&(Oi.Qb=1,Oi.qb+=ka[0][Da[0]+0].value<<8)),Oi.jc=!Oi.Qb&&6>Ud,Oi.jc){var Qo,hs=Oi;for(Qo=0;Qo<br;++Qo){var Ms=Qo,Ps=hs.pd[Ms],Jo=hs.G[0][hs.H[0]+Ms];256<=Jo.value?(Ps.g=Jo.g+256,Ps.value=Jo.value):(Ps.g=0,Ps.value=0,Ms>>=ir(Jo,8,Ps),Ms>>=ir(hs.G[1][hs.H[1]+Ms],16,Ps),Ms>>=ir(hs.G[2][hs.H[2]+Ms],0,Ps),ir(hs.G[3][hs.H[3]+Ms],24,Ps))}}}vn.vc=jn,vn.Wb=Xn,vn.Ya=Vo,vn.yc=Zl,vr=1;break t}vr=0}if(!(z=vr)){L.a=3;break e}if(0<_e){if(re.ua=1<<_e,!mt(re.Wa,_e)){L.a=1,z=0;break e}}else re.ua=0;var tc=L,Kd=H,E1=G,rc=tc.s,nc=rc.xc;if(tc.c=Kd,tc.i=E1,rc.md=nt(Kd,nc),rc.wc=nc==0?-1:(1<<nc)-1,E){L.xb=n1;break e}if((me=l(H*G))==null){L.a=1,z=0;break e}z=(z=bn(L,me,0,H,G,G,null))&&!X.h;break e}return z?(F!=null?F[0]=me:(r(me==null),r(E)),L.$=0,E||Gn(re)):Gn(re),z}function ns(g,b){var E=g.c*g.i,L=E+b+16*b;return r(g.c<=b),g.V=l(L),g.V==null?(g.Ta=null,g.Ua=0,g.a=1,0):(g.Ta=g.V,g.Ua=g.Ba+E+b,1)}function ws(g,b){var E=g.C,L=b-E,F=g.V,z=g.Ba+g.c*E;for(r(b<=g.l.o);0<L;){var H=16<L?16:L,G=g.l.ma,X=g.l.width,re=X*H,me=G.ca,_e=G.tb+X*E,Le=g.Ta,Ne=g.Ua;Cr(g,H,F,z),rn(Le,Ne,me,_e,re),Vn(G,E,E+H,me,_e,X),L-=H,F+=H*g.c,E+=H}r(E==b),g.C=g.Ma=b}function In(){this.ub=this.yd=this.td=this.Rb=0}function Gr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function dr(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function ea(){this.Yb=function(){var g=[];return function b(E,L,F){for(var z=F[L],H=0;H<z&&(E.push(F.length>L+1?[]:0),!(F.length<L+1));H++)b(E[H],L+1,F)}(g,0,[3,11]),g}()}function mi(){this.jb=l(3),this.Wc=m([4,8],ea),this.Xc=m([4,17],ea)}function ta(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function Xe(){this.ld=this.La=this.dd=this.tc=0}function Ea(){this.Na=this.la=0}function Er(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function pi(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ro(){this.uc=this.M=this.Nb=0,this.wa=Array(new Xe),this.Y=0,this.ya=Array(new pi),this.aa=0,this.l=new Wt}function er(){this.y=l(16),this.f=l(8),this.ea=l(8)}function tr(){this.cb=this.a=0,this.sc="",this.m=new Ge,this.Od=new In,this.Kc=new Gr,this.ed=new ta,this.Qa=new dr,this.Ic=this.$c=this.Aa=0,this.D=new ro,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=h(8,Ge),this.ia=0,this.pb=h(4,Er),this.Pa=new mi,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new er),this.Hd=0,this.rb=Array(new Ea),this.sb=0,this.wa=Array(new Xe),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new pi),this.L=this.aa=0,this.gd=m([4,2],Xe),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Wt(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ra(){var g=new tr;return g!=null&&(g.a=0,g.sc="OK",g.cb=0,g.Xb=0,ao||(ao=ii)),g}function Lr(g,b,E){return g.a==0&&(g.a=b,g.sc=E,g.cb=0),0}function vs(g,b,E){return 3<=E&&g[b+0]==157&&g[b+1]==1&&g[b+2]==42}function Pr(g,b){if(g==null)return 0;if(g.a=0,g.sc="OK",b==null)return Lr(g,2,"null VP8Io passed to VP8GetHeaders()");var E=b.data,L=b.w,F=b.ha;if(4>F)return Lr(g,7,"Truncated header.");var z=E[L+0]|E[L+1]<<8|E[L+2]<<16,H=g.Od;if(H.Rb=!(1&z),H.td=z>>1&7,H.yd=z>>4&1,H.ub=z>>5,3<H.td)return Lr(g,3,"Incorrect keyframe parameters.");if(!H.yd)return Lr(g,4,"Frame not displayable.");L+=3,F-=3;var G=g.Kc;if(H.Rb){if(7>F)return Lr(g,7,"cannot parse picture header");if(!vs(E,L,F))return Lr(g,3,"Bad code word");G.c=16383&(E[L+4]<<8|E[L+3]),G.Td=E[L+4]>>6,G.i=16383&(E[L+6]<<8|E[L+5]),G.Ud=E[L+6]>>6,L+=7,F-=7,g.za=G.c+15>>4,g.Ub=G.i+15>>4,b.width=G.c,b.height=G.i,b.Da=0,b.j=0,b.v=0,b.va=b.width,b.o=b.height,b.da=0,b.ib=b.width,b.hb=b.height,b.U=b.width,b.T=b.height,c((z=g.Pa).jb,0,255,z.jb.length),r((z=g.Qa)!=null),z.Cb=0,z.Bb=0,z.Fb=1,c(z.Zb,0,0,z.Zb.length),c(z.Lb,0,0,z.Lb)}if(H.ub>F)return Lr(g,7,"bad partition length");ne(z=g.m,E,L,H.ub),L+=H.ub,F-=H.ub,H.Rb&&(G.Ld=Ae(z),G.Kd=Ae(z)),G=g.Qa;var X,re=g.Pa;if(r(z!=null),r(G!=null),G.Cb=Ae(z),G.Cb){if(G.Bb=Ae(z),Ae(z)){for(G.Fb=Ae(z),X=0;4>X;++X)G.Zb[X]=Ae(z)?Se(z,7):0;for(X=0;4>X;++X)G.Lb[X]=Ae(z)?Se(z,6):0}if(G.Bb)for(X=0;3>X;++X)re.jb[X]=Ae(z)?Te(z,8):255}else G.Bb=0;if(z.Ka)return Lr(g,3,"cannot parse segment header");if((G=g.ed).zd=Ae(z),G.Tb=Te(z,6),G.wb=Te(z,3),G.Pc=Ae(z),G.Pc&&Ae(z)){for(re=0;4>re;++re)Ae(z)&&(G.vd[re]=Se(z,6));for(re=0;4>re;++re)Ae(z)&&(G.od[re]=Se(z,6))}if(g.L=G.Tb==0?0:G.zd?1:2,z.Ka)return Lr(g,3,"cannot parse filter header");var me=F;if(F=X=L,L=X+me,G=me,g.Xb=(1<<Te(g.m,2))-1,me<3*(re=g.Xb))E=7;else{for(X+=3*re,G-=3*re,me=0;me<re;++me){var _e=E[F+0]|E[F+1]<<8|E[F+2]<<16;_e>G&&(_e=G),ne(g.Jc[+me],E,X,_e),X+=_e,G-=_e,F+=3}ne(g.Jc[+re],E,X,G),E=X<L?0:5}if(E!=0)return Lr(g,E,"cannot parse partitions");for(E=Te(X=g.m,7),F=Ae(X)?Se(X,4):0,L=Ae(X)?Se(X,4):0,G=Ae(X)?Se(X,4):0,re=Ae(X)?Se(X,4):0,X=Ae(X)?Se(X,4):0,me=g.Qa,_e=0;4>_e;++_e){if(me.Cb){var Le=me.Zb[_e];me.Fb||(Le+=E)}else{if(0<_e){g.pb[_e]=g.pb[0];continue}Le=E}var Ne=g.pb[_e];Ne.Sc[0]=Wl[Wr(Le+F,127)],Ne.Sc[1]=Yl[Wr(Le+0,127)],Ne.Eb[0]=2*Wl[Wr(Le+L,127)],Ne.Eb[1]=101581*Yl[Wr(Le+G,127)]>>16,8>Ne.Eb[1]&&(Ne.Eb[1]=8),Ne.Qc[0]=Wl[Wr(Le+re,117)],Ne.Qc[1]=Yl[Wr(Le+X,127)],Ne.lc=Le+X}if(!H.Rb)return Lr(g,4,"Not a key frame.");for(Ae(z),H=g.Pa,E=0;4>E;++E){for(F=0;8>F;++F)for(L=0;3>L;++L)for(G=0;11>G;++G)re=ke(z,t1[E][F][L][G])?Te(z,8):Jh[E][F][L][G],H.Wc[E][F].Yb[L][G]=re;for(F=0;17>F;++F)H.Xc[E][F]=H.Wc[E][r1[F]]}return g.kc=Ae(z),g.kc&&(g.Bd=Te(z,8)),g.cb=1}function ii(g,b,E,L,F,z,H){var G=b[F].Yb[E];for(E=0;16>F;++F){if(!ke(g,G[E+0]))return F;for(;!ke(g,G[E+1]);)if(G=b[++F].Yb[0],E=0,F==16)return 16;var X=b[F+1].Yb;if(ke(g,G[E+2])){var re=g,me=0;if(ke(re,(Le=G)[(_e=E)+3]))if(ke(re,Le[_e+6])){for(G=0,_e=2*(me=ke(re,Le[_e+8]))+(Le=ke(re,Le[_e+9+me])),me=0,Le=Kh[_e];Le[G];++G)me+=me+ke(re,Le[G]);me+=3+(8<<_e)}else ke(re,Le[_e+7])?(me=7+2*ke(re,165),me+=ke(re,145)):me=5+ke(re,159);else me=ke(re,Le[_e+4])?3+ke(re,Le[_e+5]):2;G=X[2]}else me=1,G=X[1];X=H+Qh[F],0>(re=g).b&&Ee(re);var _e,Le=re.b,Ne=(_e=re.Ca>>1)-(re.I>>Le)>>31;--re.b,re.Ca+=Ne,re.Ca|=1,re.I-=(_e+1&Ne)<<Le,z[X]=((me^Ne)-Ne)*L[(0<F)+0]}return 16}function na(g){var b=g.rb[g.sb-1];b.la=0,b.Na=0,c(g.zc,0,0,g.zc.length),g.ja=0}function kr(g,b){if(g==null)return 0;if(b==null)return Lr(g,2,"NULL VP8Io parameter in VP8Decode().");if(!g.cb&&!Pr(g,b))return 0;if(r(g.cb),b.ac==null||b.ac(b)){b.ob&&(g.L=0);var E=Ho[g.L];if(g.L==2?(g.yb=0,g.zb=0):(g.yb=b.v-E>>4,g.zb=b.j-E>>4,0>g.yb&&(g.yb=0),0>g.zb&&(g.zb=0)),g.Va=b.o+15+E>>4,g.Hb=b.va+15+E>>4,g.Hb>g.za&&(g.Hb=g.za),g.Va>g.Ub&&(g.Va=g.Ub),0<g.L){var L=g.ed;for(E=0;4>E;++E){var F;if(g.Qa.Cb){var z=g.Qa.Lb[E];g.Qa.Fb||(z+=L.Tb)}else z=L.Tb;for(F=0;1>=F;++F){var H=g.gd[E][F],G=z;if(L.Pc&&(G+=L.vd[0],F&&(G+=L.od[0])),0<(G=0>G?0:63<G?63:G)){var X=G;0<L.wb&&(X=4<L.wb?X>>2:X>>1)>9-L.wb&&(X=9-L.wb),1>X&&(X=1),H.dd=X,H.tc=2*G+X,H.ld=40<=G?2:15<=G?1:0}else H.tc=0;H.La=F}}}E=0}else Lr(g,6,"Frame setup failed"),E=g.a;if(E=E==0){if(E){g.$c=0,0<g.Aa||(g.Ic=m1);e:{E=g.Ic,L=4*(X=g.za);var re=32*X,me=X+1,_e=0<g.L?X*(0<g.Aa?2:1):0,Le=(g.Aa==2?2:1)*X;if((H=L+832+(F=3*(16*E+Ho[g.L])/2*re)+(z=g.Fa!=null&&0<g.Fa.length?g.Kc.c*g.Kc.i:0))!=H)E=0;else{if(H>g.Vb){if(g.Vb=0,g.Ec=l(H),g.Fc=0,g.Ec==null){E=Lr(g,1,"no memory during frame initialization.");break e}g.Vb=H}H=g.Ec,G=g.Fc,g.Ac=H,g.Bc=G,G+=L,g.Gd=h(re,er),g.Hd=0,g.rb=h(me+1,Ea),g.sb=1,g.wa=_e?h(_e,Xe):null,g.Y=0,g.D.Nb=0,g.D.wa=g.wa,g.D.Y=g.Y,0<g.Aa&&(g.D.Y+=X),r(!0),g.oc=H,g.pc=G,G+=832,g.ya=h(Le,pi),g.aa=0,g.D.ya=g.ya,g.D.aa=g.aa,g.Aa==2&&(g.D.aa+=X),g.R=16*X,g.B=8*X,X=(re=Ho[g.L])*g.R,re=re/2*g.B,g.sa=H,g.ta=G+X,g.qa=g.sa,g.ra=g.ta+16*E*g.R+re,g.Ha=g.qa,g.Ia=g.ra+8*E*g.B+re,g.$c=0,G+=F,g.mb=z?H:null,g.nb=z?G:null,r(G+z<=g.Fc+g.Vb),na(g),c(g.Ac,g.Bc,0,L),E=1}}if(E){if(b.ka=0,b.y=g.sa,b.O=g.ta,b.f=g.qa,b.N=g.ra,b.ea=g.Ha,b.Vd=g.Ia,b.fa=g.R,b.Rc=g.B,b.F=null,b.J=0,!Oo){for(E=-255;255>=E;++E)gn[255+E]=0>E?-E:E;for(E=-1020;1020>=E;++E)cs[1020+E]=-128>E?-128:127<E?127:E;for(E=-112;112>=E;++E)so[112+E]=-16>E?-16:15<E?15:E;for(E=-255;510>=E;++E)_a[255+E]=0>E?0:255<E?255:E;Oo=1}he=kn,ge=je,Me=J,Ke=vt,tt=zr,we=Jr,Qe=Hi,Xt=On,kt=Ht,Yr=qr,fn=io,Vr=Oe,rr=Vi,Ur=fa,tn=ha,Yn=bi,vi=ki,Qn=no,Di[0]=Nt,Di[1]=sa,Di[2]=ss,Di[3]=xi,Di[4]=Ta,Di[5]=Rr,Di[6]=Ft,Di[7]=oa,Di[8]=ja,Di[9]=la,_s[0]=Cs,_s[1]=Et,_s[2]=ar,_s[3]=is,_s[4]=en,_s[5]=aa,_s[6]=Ia,ds[0]=$n,ds[1]=Dn,ds[2]=_i,ds[3]=ca,ds[4]=qi,ds[5]=as,ds[6]=Li,E=1}else E=0}E&&(E=function(Ne,Ze){for(Ne.M=0;Ne.M<Ne.Va;++Ne.M){var Ue,pe=Ne.Jc[Ne.M&Ne.Xb],ye=Ne.m,We=Ne;for(Ue=0;Ue<We.za;++Ue){var Je=ye,Ye=We,gt=Ye.Ac,ot=Ye.Bc+4*Ue,jt=Ye.zc,lt=Ye.ya[Ye.aa+Ue];if(Ye.Qa.Bb?lt.$b=ke(Je,Ye.Pa.jb[0])?2+ke(Je,Ye.Pa.jb[2]):ke(Je,Ye.Pa.jb[1]):lt.$b=0,Ye.kc&&(lt.Ad=ke(Je,Ye.Bd)),lt.Za=!ke(Je,145)+0,lt.Za){var ur=lt.Ob,gr=0;for(Ye=0;4>Ye;++Ye){var lr,Jt=jt[0+Ye];for(lr=0;4>lr;++lr){Jt=e1[gt[ot+lr]][Jt];for(var vr=Td[ke(Je,Jt[0])];0<vr;)vr=Td[2*vr+ke(Je,Jt[vr])];Jt=-vr,gt[ot+lr]=Jt}a(ur,gr,gt,ot,4),gr+=4,jt[0+Ye]=Jt}}else Jt=ke(Je,156)?ke(Je,128)?1:3:ke(Je,163)?2:0,lt.Ob[0]=Jt,c(gt,ot,Jt,4),c(jt,0,Jt,4);lt.Dd=ke(Je,142)?ke(Je,114)?ke(Je,183)?1:3:2:0}if(We.m.Ka)return Lr(Ne,7,"Premature end-of-partition0 encountered.");for(;Ne.ja<Ne.za;++Ne.ja){if(We=pe,Je=(ye=Ne).rb[ye.sb-1],gt=ye.rb[ye.sb+ye.ja],Ue=ye.ya[ye.aa+ye.ja],ot=ye.kc?Ue.Ad:0)Je.la=gt.la=0,Ue.Za||(Je.Na=gt.Na=0),Ue.Hc=0,Ue.Gc=0,Ue.ia=0;else{var wr,Yt;if(Je=gt,gt=We,ot=ye.Pa.Xc,jt=ye.ya[ye.aa+ye.ja],lt=ye.pb[jt.$b],Ye=jt.ad,ur=0,gr=ye.rb[ye.sb-1],Jt=lr=0,c(Ye,ur,0,384),jt.Za)var cn=0,ei=ot[3];else{vr=l(16);var dn=Je.Na+gr.Na;if(dn=ao(gt,ot[1],dn,lt.Eb,0,vr,0),Je.Na=gr.Na=(0<dn)+0,1<dn)he(vr,0,Ye,ur);else{var ti=vr[0]+3>>3;for(vr=0;256>vr;vr+=16)Ye[ur+vr]=ti}cn=1,ei=ot[0]}var mr=15&Je.la,li=15&gr.la;for(vr=0;4>vr;++vr){var ci=1&li;for(ti=Yt=0;4>ti;++ti)mr=mr>>1|(ci=(dn=ao(gt,ei,dn=ci+(1&mr),lt.Sc,cn,Ye,ur))>cn)<<7,Yt=Yt<<2|(3<dn?3:1<dn?2:Ye[ur+0]!=0),ur+=16;mr>>=4,li=li>>1|ci<<7,lr=(lr<<8|Yt)>>>0}for(ei=mr,cn=li>>4,wr=0;4>wr;wr+=2){for(Yt=0,mr=Je.la>>4+wr,li=gr.la>>4+wr,vr=0;2>vr;++vr){for(ci=1&li,ti=0;2>ti;++ti)dn=ci+(1&mr),mr=mr>>1|(ci=0<(dn=ao(gt,ot[2],dn,lt.Qc,0,Ye,ur)))<<3,Yt=Yt<<2|(3<dn?3:1<dn?2:Ye[ur+0]!=0),ur+=16;mr>>=2,li=li>>1|ci<<5}Jt|=Yt<<4*wr,ei|=mr<<4<<wr,cn|=(240&li)<<wr}Je.la=ei,gr.la=cn,jt.Hc=lr,jt.Gc=Jt,jt.ia=43690&Jt?0:lt.ia,ot=!(lr|Jt)}if(0<ye.L&&(ye.wa[ye.Y+ye.ja]=ye.gd[Ue.$b][Ue.Za],ye.wa[ye.Y+ye.ja].La|=!ot),We.Ka)return Lr(Ne,7,"Premature end-of-file encountered.")}if(na(Ne),ye=Ze,We=1,Ue=(pe=Ne).D,Je=0<pe.L&&pe.M>=pe.zb&&pe.M<=pe.Va,pe.Aa==0)e:{if(Ue.M=pe.M,Ue.uc=Je,Pn(pe,Ue),We=1,Ue=(Yt=pe.D).Nb,Je=(Jt=Ho[pe.L])*pe.R,gt=Jt/2*pe.B,vr=16*Ue*pe.R,ti=8*Ue*pe.B,ot=pe.sa,jt=pe.ta-Je+vr,lt=pe.qa,Ye=pe.ra-gt+ti,ur=pe.Ha,gr=pe.Ia-gt+ti,li=(mr=Yt.M)==0,lr=mr>=pe.Va-1,pe.Aa==2&&Pn(pe,Yt),Yt.uc)for(ci=(dn=pe).D.M,r(dn.D.uc),Yt=dn.yb;Yt<dn.Hb;++Yt){cn=Yt,ei=ci;var vn=(jn=(Xr=dn).D).Nb;wr=Xr.R;var jn=jn.wa[jn.Y+cn],Xn=Xr.sa,Ci=Xr.ta+16*vn*wr+16*cn,Xi=jn.dd,Nn=jn.tc;if(Nn!=0)if(r(3<=Nn),Xr.L==1)0<cn&&Yn(Xn,Ci,wr,Nn+4),jn.La&&Qn(Xn,Ci,wr,Nn),0<ei&&tn(Xn,Ci,wr,Nn+4),jn.La&&vi(Xn,Ci,wr,Nn);else{var us=Xr.B,xa=Xr.qa,La=Xr.ra+8*vn*us+8*cn,ks=Xr.Ha,Xr=Xr.Ia+8*vn*us+8*cn;vn=jn.ld,0<cn&&(Xt(Xn,Ci,wr,Nn+4,Xi,vn),Yr(xa,La,ks,Xr,us,Nn+4,Xi,vn)),jn.La&&(Vr(Xn,Ci,wr,Nn,Xi,vn),Ur(xa,La,ks,Xr,us,Nn,Xi,vn)),0<ei&&(Qe(Xn,Ci,wr,Nn+4,Xi,vn),kt(xa,La,ks,Xr,us,Nn+4,Xi,vn)),jn.La&&(fn(Xn,Ci,wr,Nn,Xi,vn),rr(xa,La,ks,Xr,us,Nn,Xi,vn))}}if(pe.ia&&alert("todo:DitherRow"),ye.put!=null){if(Yt=16*mr,mr=16*(mr+1),li?(ye.y=pe.sa,ye.O=pe.ta+vr,ye.f=pe.qa,ye.N=pe.ra+ti,ye.ea=pe.Ha,ye.W=pe.Ia+ti):(Yt-=Jt,ye.y=ot,ye.O=jt,ye.f=lt,ye.N=Ye,ye.ea=ur,ye.W=gr),lr||(mr-=Jt),mr>ye.o&&(mr=ye.o),ye.F=null,ye.J=null,pe.Fa!=null&&0<pe.Fa.length&&Yt<mr&&(ye.J=or(pe,ye,Yt,mr-Yt),ye.F=pe.mb,ye.F==null&&ye.F.length==0)){We=Lr(pe,3,"Could not decode alpha data.");break e}Yt<ye.j&&(Jt=ye.j-Yt,Yt=ye.j,r(!(1&Jt)),ye.O+=pe.R*Jt,ye.N+=pe.B*(Jt>>1),ye.W+=pe.B*(Jt>>1),ye.F!=null&&(ye.J+=ye.width*Jt)),Yt<mr&&(ye.O+=ye.v,ye.N+=ye.v>>1,ye.W+=ye.v>>1,ye.F!=null&&(ye.J+=ye.v),ye.ka=Yt-ye.j,ye.U=ye.va-ye.v,ye.T=mr-Yt,We=ye.put(ye))}Ue+1!=pe.Ic||lr||(a(pe.sa,pe.ta-Je,ot,jt+16*pe.R,Je),a(pe.qa,pe.ra-gt,lt,Ye+8*pe.B,gt),a(pe.Ha,pe.Ia-gt,ur,gr+8*pe.B,gt))}if(!We)return Lr(Ne,6,"Output aborted.")}return 1}(g,b)),b.bc!=null&&b.bc(b),E&=1}return E?(g.cb=0,E):0}function ln(g,b,E,L,F){F=g[b+E+32*L]+(F>>3),g[b+E+32*L]=-256&F?0>F?0:255:F}function Ns(g,b,E,L,F,z){ln(g,b,0,E,L+F),ln(g,b,1,E,L+z),ln(g,b,2,E,L-z),ln(g,b,3,E,L-F)}function Qr(g){return(20091*g>>16)+g}function cr(g,b,E,L){var F,z=0,H=l(16);for(F=0;4>F;++F){var G=g[b+0]+g[b+8],X=g[b+0]-g[b+8],re=(35468*g[b+4]>>16)-Qr(g[b+12]),me=Qr(g[b+4])+(35468*g[b+12]>>16);H[z+0]=G+me,H[z+1]=X+re,H[z+2]=X-re,H[z+3]=G-me,z+=4,b++}for(F=z=0;4>F;++F)G=(g=H[z+0]+4)+H[z+8],X=g-H[z+8],re=(35468*H[z+4]>>16)-Qr(H[z+12]),ln(E,L,0,0,G+(me=Qr(H[z+4])+(35468*H[z+12]>>16))),ln(E,L,1,0,X+re),ln(E,L,2,0,X-re),ln(E,L,3,0,G-me),z++,L+=32}function Jr(g,b,E,L){var F=g[b+0]+4,z=35468*g[b+4]>>16,H=Qr(g[b+4]),G=35468*g[b+1]>>16;Ns(E,L,0,F+H,g=Qr(g[b+1]),G),Ns(E,L,1,F+z,g,G),Ns(E,L,2,F-z,g,G),Ns(E,L,3,F-H,g,G)}function je(g,b,E,L,F){cr(g,b,E,L),F&&cr(g,b+16,E,L+4)}function J(g,b,E,L){ge(g,b+0,E,L,1),ge(g,b+32,E,L+128,1)}function vt(g,b,E,L){var F;for(g=g[b+0]+4,F=0;4>F;++F)for(b=0;4>b;++b)ln(E,L,b,F,g)}function zr(g,b,E,L){g[b+0]&&Ke(g,b+0,E,L),g[b+16]&&Ke(g,b+16,E,L+4),g[b+32]&&Ke(g,b+32,E,L+128),g[b+48]&&Ke(g,b+48,E,L+128+4)}function kn(g,b,E,L){var F,z=l(16);for(F=0;4>F;++F){var H=g[b+0+F]+g[b+12+F],G=g[b+4+F]+g[b+8+F],X=g[b+4+F]-g[b+8+F],re=g[b+0+F]-g[b+12+F];z[0+F]=H+G,z[8+F]=H-G,z[4+F]=re+X,z[12+F]=re-X}for(F=0;4>F;++F)H=(g=z[0+4*F]+3)+z[3+4*F],G=z[1+4*F]+z[2+4*F],X=z[1+4*F]-z[2+4*F],re=g-z[3+4*F],E[L+0]=H+G>>3,E[L+16]=re+X>>3,E[L+32]=H-G>>3,E[L+48]=re-X>>3,L+=64}function ia(g,b,E){var L,F=b-32,z=oi,H=255-g[F-1];for(L=0;L<E;++L){var G,X=z,re=H+g[b-1];for(G=0;G<E;++G)g[b+G]=X[re+g[F+G]];b+=32}}function sa(g,b){ia(g,b,4)}function Dn(g,b){ia(g,b,8)}function Et(g,b){ia(g,b,16)}function ar(g,b){var E;for(E=0;16>E;++E)a(g,b+32*E,g,b-32,16)}function is(g,b){var E;for(E=16;0<E;--E)c(g,b,g[b-1],16),b+=32}function As(g,b,E){var L;for(L=0;16>L;++L)c(b,E+32*L,g,16)}function Cs(g,b){var E,L=16;for(E=0;16>E;++E)L+=g[b-1+32*E]+g[b+E-32];As(L>>5,g,b)}function en(g,b){var E,L=8;for(E=0;16>E;++E)L+=g[b-1+32*E];As(L>>4,g,b)}function aa(g,b){var E,L=8;for(E=0;16>E;++E)L+=g[b+E-32];As(L>>4,g,b)}function Ia(g,b){As(128,g,b)}function yt(g,b,E){return g+2*b+E+2>>2}function ss(g,b){var E,L=b-32;for(L=new Uint8Array([yt(g[L-1],g[L+0],g[L+1]),yt(g[L+0],g[L+1],g[L+2]),yt(g[L+1],g[L+2],g[L+3]),yt(g[L+2],g[L+3],g[L+4])]),E=0;4>E;++E)a(g,b+32*E,L,0,L.length)}function xi(g,b){var E=g[b-1],L=g[b-1+32],F=g[b-1+64],z=g[b-1+96];ze(g,b+0,16843009*yt(g[b-1-32],E,L)),ze(g,b+32,16843009*yt(E,L,F)),ze(g,b+64,16843009*yt(L,F,z)),ze(g,b+96,16843009*yt(F,z,z))}function Nt(g,b){var E,L=4;for(E=0;4>E;++E)L+=g[b+E-32]+g[b-1+32*E];for(L>>=3,E=0;4>E;++E)c(g,b+32*E,L,4)}function Ta(g,b){var E=g[b-1+0],L=g[b-1+32],F=g[b-1+64],z=g[b-1-32],H=g[b+0-32],G=g[b+1-32],X=g[b+2-32],re=g[b+3-32];g[b+0+96]=yt(L,F,g[b-1+96]),g[b+1+96]=g[b+0+64]=yt(E,L,F),g[b+2+96]=g[b+1+64]=g[b+0+32]=yt(z,E,L),g[b+3+96]=g[b+2+64]=g[b+1+32]=g[b+0+0]=yt(H,z,E),g[b+3+64]=g[b+2+32]=g[b+1+0]=yt(G,H,z),g[b+3+32]=g[b+2+0]=yt(X,G,H),g[b+3+0]=yt(re,X,G)}function Ft(g,b){var E=g[b+1-32],L=g[b+2-32],F=g[b+3-32],z=g[b+4-32],H=g[b+5-32],G=g[b+6-32],X=g[b+7-32];g[b+0+0]=yt(g[b+0-32],E,L),g[b+1+0]=g[b+0+32]=yt(E,L,F),g[b+2+0]=g[b+1+32]=g[b+0+64]=yt(L,F,z),g[b+3+0]=g[b+2+32]=g[b+1+64]=g[b+0+96]=yt(F,z,H),g[b+3+32]=g[b+2+64]=g[b+1+96]=yt(z,H,G),g[b+3+64]=g[b+2+96]=yt(H,G,X),g[b+3+96]=yt(G,X,X)}function Rr(g,b){var E=g[b-1+0],L=g[b-1+32],F=g[b-1+64],z=g[b-1-32],H=g[b+0-32],G=g[b+1-32],X=g[b+2-32],re=g[b+3-32];g[b+0+0]=g[b+1+64]=z+H+1>>1,g[b+1+0]=g[b+2+64]=H+G+1>>1,g[b+2+0]=g[b+3+64]=G+X+1>>1,g[b+3+0]=X+re+1>>1,g[b+0+96]=yt(F,L,E),g[b+0+64]=yt(L,E,z),g[b+0+32]=g[b+1+96]=yt(E,z,H),g[b+1+32]=g[b+2+96]=yt(z,H,G),g[b+2+32]=g[b+3+96]=yt(H,G,X),g[b+3+32]=yt(G,X,re)}function oa(g,b){var E=g[b+0-32],L=g[b+1-32],F=g[b+2-32],z=g[b+3-32],H=g[b+4-32],G=g[b+5-32],X=g[b+6-32],re=g[b+7-32];g[b+0+0]=E+L+1>>1,g[b+1+0]=g[b+0+64]=L+F+1>>1,g[b+2+0]=g[b+1+64]=F+z+1>>1,g[b+3+0]=g[b+2+64]=z+H+1>>1,g[b+0+32]=yt(E,L,F),g[b+1+32]=g[b+0+96]=yt(L,F,z),g[b+2+32]=g[b+1+96]=yt(F,z,H),g[b+3+32]=g[b+2+96]=yt(z,H,G),g[b+3+64]=yt(H,G,X),g[b+3+96]=yt(G,X,re)}function la(g,b){var E=g[b-1+0],L=g[b-1+32],F=g[b-1+64],z=g[b-1+96];g[b+0+0]=E+L+1>>1,g[b+2+0]=g[b+0+32]=L+F+1>>1,g[b+2+32]=g[b+0+64]=F+z+1>>1,g[b+1+0]=yt(E,L,F),g[b+3+0]=g[b+1+32]=yt(L,F,z),g[b+3+32]=g[b+1+64]=yt(F,z,z),g[b+3+64]=g[b+2+64]=g[b+0+96]=g[b+1+96]=g[b+2+96]=g[b+3+96]=z}function ja(g,b){var E=g[b-1+0],L=g[b-1+32],F=g[b-1+64],z=g[b-1+96],H=g[b-1-32],G=g[b+0-32],X=g[b+1-32],re=g[b+2-32];g[b+0+0]=g[b+2+32]=E+H+1>>1,g[b+0+32]=g[b+2+64]=L+E+1>>1,g[b+0+64]=g[b+2+96]=F+L+1>>1,g[b+0+96]=z+F+1>>1,g[b+3+0]=yt(G,X,re),g[b+2+0]=yt(H,G,X),g[b+1+0]=g[b+3+32]=yt(E,H,G),g[b+1+32]=g[b+3+64]=yt(L,E,H),g[b+1+64]=g[b+3+96]=yt(F,L,E),g[b+1+96]=yt(z,F,L)}function _i(g,b){var E;for(E=0;8>E;++E)a(g,b+32*E,g,b-32,8)}function ca(g,b){var E;for(E=0;8>E;++E)c(g,b,g[b-1],8),b+=32}function si(g,b,E){var L;for(L=0;8>L;++L)c(b,E+32*L,g,8)}function $n(g,b){var E,L=8;for(E=0;8>E;++E)L+=g[b+E-32]+g[b-1+32*E];si(L>>4,g,b)}function as(g,b){var E,L=4;for(E=0;8>E;++E)L+=g[b+E-32];si(L>>3,g,b)}function qi(g,b){var E,L=4;for(E=0;8>E;++E)L+=g[b-1+32*E];si(L>>3,g,b)}function Li(g,b){si(128,g,b)}function yi(g,b,E){var L=g[b-E],F=g[b+0],z=3*(F-L)+zl[1020+g[b-2*E]-g[b+E]],H=Mo[112+(z+4>>3)];g[b-E]=oi[255+L+Mo[112+(z+3>>3)]],g[b+0]=oi[255+F-H]}function un(g,b,E,L){var F=g[b+0],z=g[b+E];return Ni[255+g[b-2*E]-g[b-E]]>L||Ni[255+z-F]>L}function da(g,b,E,L){return 4*Ni[255+g[b-E]-g[b+0]]+Ni[255+g[b-2*E]-g[b+E]]<=L}function ua(g,b,E,L,F){var z=g[b-3*E],H=g[b-2*E],G=g[b-E],X=g[b+0],re=g[b+E],me=g[b+2*E],_e=g[b+3*E];return 4*Ni[255+G-X]+Ni[255+H-re]>L?0:Ni[255+g[b-4*E]-z]<=F&&Ni[255+z-H]<=F&&Ni[255+H-G]<=F&&Ni[255+_e-me]<=F&&Ni[255+me-re]<=F&&Ni[255+re-X]<=F}function ha(g,b,E,L){var F=2*L+1;for(L=0;16>L;++L)da(g,b+L,E,F)&&yi(g,b+L,E)}function bi(g,b,E,L){var F=2*L+1;for(L=0;16>L;++L)da(g,b+L*E,1,F)&&yi(g,b+L*E,1)}function ki(g,b,E,L){var F;for(F=3;0<F;--F)ha(g,b+=4*E,E,L)}function no(g,b,E,L){var F;for(F=3;0<F;--F)bi(g,b+=4,E,L)}function $t(g,b,E,L,F,z,H,G){for(z=2*z+1;0<F--;){if(ua(g,b,E,z,H))if(un(g,b,E,G))yi(g,b,E);else{var X=g,re=b,me=E,_e=X[re-2*me],Le=X[re-me],Ne=X[re+0],Ze=X[re+me],Ue=X[re+2*me],pe=27*(We=zl[1020+3*(Ne-Le)+zl[1020+_e-Ze]])+63>>7,ye=18*We+63>>7,We=9*We+63>>7;X[re-3*me]=oi[255+X[re-3*me]+We],X[re-2*me]=oi[255+_e+ye],X[re-me]=oi[255+Le+pe],X[re+0]=oi[255+Ne-pe],X[re+me]=oi[255+Ze-ye],X[re+2*me]=oi[255+Ue-We]}b+=L}}function Kn(g,b,E,L,F,z,H,G){for(z=2*z+1;0<F--;){if(ua(g,b,E,z,H))if(un(g,b,E,G))yi(g,b,E);else{var X=g,re=b,me=E,_e=X[re-me],Le=X[re+0],Ne=X[re+me],Ze=Mo[112+((Ue=3*(Le-_e))+4>>3)],Ue=Mo[112+(Ue+3>>3)],pe=Ze+1>>1;X[re-2*me]=oi[255+X[re-2*me]+pe],X[re-me]=oi[255+_e+Ue],X[re+0]=oi[255+Le-Ze],X[re+me]=oi[255+Ne-pe]}b+=L}}function Hi(g,b,E,L,F,z){$t(g,b,E,1,16,L,F,z)}function On(g,b,E,L,F,z){$t(g,b,1,E,16,L,F,z)}function io(g,b,E,L,F,z){var H;for(H=3;0<H;--H)Kn(g,b+=4*E,E,1,16,L,F,z)}function Oe(g,b,E,L,F,z){var H;for(H=3;0<H;--H)Kn(g,b+=4,1,E,16,L,F,z)}function Ht(g,b,E,L,F,z,H,G){$t(g,b,F,1,8,z,H,G),$t(E,L,F,1,8,z,H,G)}function qr(g,b,E,L,F,z,H,G){$t(g,b,1,F,8,z,H,G),$t(E,L,1,F,8,z,H,G)}function Vi(g,b,E,L,F,z,H,G){Kn(g,b+4*F,F,1,8,z,H,G),Kn(E,L+4*F,F,1,8,z,H,G)}function fa(g,b,E,L,F,z,H,G){Kn(g,b+4,1,F,8,z,H,G),Kn(E,L+4,1,F,8,z,H,G)}function Ss(){this.ba=new qt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new _r,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ga(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ma(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Es(){this.ua=0,this.Wa=new de,this.vb=new de,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new le,this.yc=new V}function Hr(){this.xb=this.a=0,this.l=new Wt,this.ca=new qt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new O,this.Pb=0,this.wd=new O,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Es,this.ab=0,this.gc=h(4,ma),this.Oc=0}function Gi(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Wt,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function hr(g,b,E,L,F,z,H){for(g=g==null?0:g[b+0],b=0;b<H;++b)F[z+b]=g+E[L+b]&255,g=F[z+b]}function Wi(g,b,E,L,F,z,H){var G;if(g==null)hr(null,null,E,L,F,z,H);else for(G=0;G<H;++G)F[z+G]=g[b+G]+E[L+G]&255}function Mn(g,b,E,L,F,z,H){if(g==null)hr(null,null,E,L,F,z,H);else{var G,X=g[b+0],re=X,me=X;for(G=0;G<H;++G)re=me+(X=g[b+G])-re,me=E[L+G]+(-256&re?0>re?0:255:re)&255,re=X,F[z+G]=me}}function or(g,b,E,L){var F=b.width,z=b.o;if(r(g!=null&&b!=null),0>E||0>=L||E+L>z)return null;if(!g.Cc){if(g.ga==null){var H;if(g.ga=new Gi,(H=g.ga==null)||(H=b.width*b.o,r(g.Gb.length==0),g.Gb=l(H),g.Uc=0,g.Gb==null?H=0:(g.mb=g.Gb,g.nb=g.Uc,g.rc=null,H=1),H=!H),!H){H=g.ga;var G=g.Fa,X=g.P,re=g.qc,me=g.mb,_e=g.nb,Le=X+1,Ne=re-1,Ze=H.l;if(r(G!=null&&me!=null&&b!=null),Ls[0]=null,Ls[1]=hr,Ls[2]=Wi,Ls[3]=Mn,H.ca=me,H.tb=_e,H.c=b.width,H.i=b.height,r(0<H.c&&0<H.i),1>=re)b=0;else if(H.$a=G[X+0]>>0&3,H.Z=G[X+0]>>2&3,H.Lc=G[X+0]>>4&3,X=G[X+0]>>6&3,0>H.$a||1<H.$a||4<=H.Z||1<H.Lc||X)b=0;else if(Ze.put=Sn,Ze.ac=nr,Ze.bc=Hn,Ze.ma=H,Ze.width=b.width,Ze.height=b.height,Ze.Da=b.Da,Ze.v=b.v,Ze.va=b.va,Ze.j=b.j,Ze.o=b.o,H.$a)e:{r(H.$a==1),b=En();t:for(;;){if(b==null){b=0;break e}if(r(H!=null),H.mc=b,b.c=H.c,b.i=H.i,b.l=H.l,b.l.ma=H,b.l.width=H.c,b.l.height=H.i,b.a=0,Ie(b.m,G,Le,Ne),!Kr(H.c,H.i,1,b,null)||(b.ab==1&&b.gc[0].hc==3&&Ln(b.s)?(H.ic=1,G=b.c*b.i,b.Ta=null,b.Ua=0,b.V=l(G),b.Ba=0,b.V==null?(b.a=1,b=0):b=1):(H.ic=0,b=ns(b,H.c)),!b))break t;b=1;break e}H.mc=null,b=0}else b=Ne>=H.c*H.i;H=!b}if(H)return null;g.ga.Lc!=1?g.Ga=0:L=z-E}r(g.ga!=null),r(E+L<=z);e:{if(b=(G=g.ga).c,z=G.l.o,G.$a==0){if(Le=g.rc,Ne=g.Vc,Ze=g.Fa,X=g.P+1+E*b,re=g.mb,me=g.nb+E*b,r(X<=g.P+g.qc),G.Z!=0)for(r(Ls[G.Z]!=null),H=0;H<L;++H)Ls[G.Z](Le,Ne,Ze,X,re,me,b),Le=re,Ne=me,me+=b,X+=b;else for(H=0;H<L;++H)a(re,me,Ze,X,b),Le=re,Ne=me,me+=b,X+=b;g.rc=Le,g.Vc=Ne}else{if(r(G.mc!=null),b=E+L,r((H=G.mc)!=null),r(b<=H.i),H.C>=b)b=1;else if(G.ic||Ce(),G.ic){G=H.V,Le=H.Ba,Ne=H.c;var Ue=H.i,pe=(Ze=1,X=H.$/Ne,re=H.$%Ne,me=H.m,_e=H.s,H.$),ye=Ne*Ue,We=Ne*b,Je=_e.wc,Ye=pe<We?yr(_e,re,X):null;r(pe<=ye),r(b<=Ue),r(Ln(_e));t:for(;;){for(;!me.h&&pe<We;){if(re&Je||(Ye=yr(_e,re,X)),r(Ye!=null),ae(me),256>(Ue=yn(Ye.G[0],Ye.H[0],me)))G[Le+pe]=Ue,++pe,++re>=Ne&&(re=0,++X<=b&&!(X%16)&&Sr(H,X));else{if(!(280>Ue)){Ze=0;break t}Ue=ni(Ue-256,me);var gt,ot=yn(Ye.G[4],Ye.H[4],me);if(ae(me),!(pe>=(ot=xn(Ne,ot=ni(ot,me)))&&ye-pe>=Ue)){Ze=0;break t}for(gt=0;gt<Ue;++gt)G[Le+pe+gt]=G[Le+pe+gt-ot];for(pe+=Ue,re+=Ue;re>=Ne;)re-=Ne,++X<=b&&!(X%16)&&Sr(H,X);pe<We&&re&Je&&(Ye=yr(_e,re,X))}r(me.h==K(me))}Sr(H,X>b?b:X);break t}!Ze||me.h&&pe<ye?(Ze=0,H.a=me.h?5:3):H.$=pe,b=Ze}else b=bn(H,H.V,H.Ba,H.c,H.i,b,ws);if(!b){L=0;break e}}E+L>=z&&(g.Cc=1),L=1}if(!L)return null;if(g.Cc&&((L=g.ga)!=null&&(L.mc=null),g.ga=null,0<g.Ga))return alert("todo:WebPDequantizeLevels"),null}return g.nb+E*F}function N(g,b,E,L,F,z){for(;0<F--;){var H,G=g,X=b+(E?1:0),re=g,me=b+(E?0:3);for(H=0;H<L;++H){var _e=re[me+4*H];_e!=255&&(_e*=32897,G[X+4*H+0]=G[X+4*H+0]*_e>>23,G[X+4*H+1]=G[X+4*H+1]*_e>>23,G[X+4*H+2]=G[X+4*H+2]*_e>>23)}b+=z}}function U(g,b,E,L,F){for(;0<L--;){var z;for(z=0;z<E;++z){var H=g[b+2*z+0],G=15&(re=g[b+2*z+1]),X=4369*G,re=(240&re|re>>4)*X>>16;g[b+2*z+0]=(240&H|H>>4)*X>>16&240|(15&H|H<<4)*X>>16>>4&15,g[b+2*z+1]=240&re|G}b+=F}}function ee(g,b,E,L,F,z,H,G){var X,re,me=255;for(re=0;re<F;++re){for(X=0;X<L;++X){var _e=g[b+X];z[H+4*X]=_e,me&=_e}b+=E,H+=G}return me!=255}function fe(g,b,E,L,F){var z;for(z=0;z<F;++z)E[L+z]=g[b+z]>>8}function Ce(){Jn=N,Ir=U,Tr=ee,rn=fe}function Ve(g,b,E){ie[g]=function(L,F,z,H,G,X,re,me,_e,Le,Ne,Ze,Ue,pe,ye,We,Je){var Ye,gt=Je-1>>1,ot=G[X+0]|re[me+0]<<16,jt=_e[Le+0]|Ne[Ze+0]<<16;r(L!=null);var lt=3*ot+jt+131074>>2;for(b(L[F+0],255&lt,lt>>16,Ue,pe),z!=null&&(lt=3*jt+ot+131074>>2,b(z[H+0],255&lt,lt>>16,ye,We)),Ye=1;Ye<=gt;++Ye){var ur=G[X+Ye]|re[me+Ye]<<16,gr=_e[Le+Ye]|Ne[Ze+Ye]<<16,lr=ot+ur+jt+gr+524296,Jt=lr+2*(ur+jt)>>3;lt=Jt+ot>>1,ot=(lr=lr+2*(ot+gr)>>3)+ur>>1,b(L[F+2*Ye-1],255&lt,lt>>16,Ue,pe+(2*Ye-1)*E),b(L[F+2*Ye-0],255&ot,ot>>16,Ue,pe+(2*Ye-0)*E),z!=null&&(lt=lr+jt>>1,ot=Jt+gr>>1,b(z[H+2*Ye-1],255&lt,lt>>16,ye,We+(2*Ye-1)*E),b(z[H+2*Ye+0],255&ot,ot>>16,ye,We+(2*Ye+0)*E)),ot=ur,jt=gr}1&Je||(lt=3*ot+jt+131074>>2,b(L[F+Je-1],255&lt,lt>>16,Ue,pe+(Je-1)*E),z!=null&&(lt=3*jt+ot+131074>>2,b(z[H+Je-1],255&lt,lt>>16,ye,We+(Je-1)*E)))}}function $e(){Ai[Po]=i1,Ai[Ro]=_d,Ai[Sd]=s1,Ai[Bo]=Ld,Ai[Fo]=kd,Ai[ql]=Dd,Ai[Ed]=a1,Ai[Hl]=_d,Ai[Vl]=Ld,Ai[Uo]=kd,Ai[Gl]=Dd}function ct(g){return g&-16384?0>g?0:255:g>>o1}function Ct(g,b){return ct((19077*g>>8)+(26149*b>>8)-14234)}function Mt(g,b,E){return ct((19077*g>>8)-(6419*b>>8)-(13320*E>>8)+8708)}function Pt(g,b){return ct((19077*g>>8)+(33050*b>>8)-17685)}function Kt(g,b,E,L,F){L[F+0]=Ct(g,E),L[F+1]=Mt(g,b,E),L[F+2]=Pt(g,b)}function Dr(g,b,E,L,F){L[F+0]=Pt(g,b),L[F+1]=Mt(g,b,E),L[F+2]=Ct(g,E)}function fr(g,b,E,L,F){var z=Mt(g,b,E);b=z<<3&224|Pt(g,b)>>3,L[F+0]=248&Ct(g,E)|z>>5,L[F+1]=b}function Br(g,b,E,L,F){var z=240&Pt(g,b)|15;L[F+0]=240&Ct(g,E)|Mt(g,b,E)>>4,L[F+1]=z}function wn(g,b,E,L,F){L[F+0]=255,Kt(g,b,E,L,F+1)}function Fr(g,b,E,L,F){Dr(g,b,E,L,F),L[F+3]=255}function ai(g,b,E,L,F){Kt(g,b,E,L,F),L[F+3]=255}function Wr(g,b){return 0>g?0:g>b?b:g}function Wn(g,b,E){ie[g]=function(L,F,z,H,G,X,re,me,_e){for(var Le=me+(-2&_e)*E;me!=Le;)b(L[F+0],z[H+0],G[X+0],re,me),b(L[F+1],z[H+0],G[X+0],re,me+E),F+=2,++H,++X,me+=2*E;1&_e&&b(L[F+0],z[H+0],G[X+0],re,me)}}function Tn(g,b,E){return E==0?g==0?b==0?6:5:b==0?4:0:E}function Is(g,b,E,L,F){switch(g>>>30){case 3:ge(b,E,L,F,0);break;case 2:we(b,E,L,F);break;case 1:Ke(b,E,L,F)}}function Pn(g,b){var E,L,F=b.M,z=b.Nb,H=g.oc,G=g.pc+40,X=g.oc,re=g.pc+584,me=g.oc,_e=g.pc+600;for(E=0;16>E;++E)H[G+32*E-1]=129;for(E=0;8>E;++E)X[re+32*E-1]=129,me[_e+32*E-1]=129;for(0<F?H[G-1-32]=X[re-1-32]=me[_e-1-32]=129:(c(H,G-32-1,127,21),c(X,re-32-1,127,9),c(me,_e-32-1,127,9)),L=0;L<g.za;++L){var Le=b.ya[b.aa+L];if(0<L){for(E=-1;16>E;++E)a(H,G+32*E-4,H,G+32*E+12,4);for(E=-1;8>E;++E)a(X,re+32*E-4,X,re+32*E+4,4),a(me,_e+32*E-4,me,_e+32*E+4,4)}var Ne=g.Gd,Ze=g.Hd+L,Ue=Le.ad,pe=Le.Hc;if(0<F&&(a(H,G-32,Ne[Ze].y,0,16),a(X,re-32,Ne[Ze].f,0,8),a(me,_e-32,Ne[Ze].ea,0,8)),Le.Za){var ye=H,We=G-32+16;for(0<F&&(L>=g.za-1?c(ye,We,Ne[Ze].y[15],4):a(ye,We,Ne[Ze+1].y,0,4)),E=0;4>E;E++)ye[We+128+E]=ye[We+256+E]=ye[We+384+E]=ye[We+0+E];for(E=0;16>E;++E,pe<<=2)ye=H,We=G+Md[E],Di[Le.Ob[E]](ye,We),Is(pe,Ue,16*+E,ye,We)}else if(ye=Tn(L,F,Le.Ob[0]),_s[ye](H,G),pe!=0)for(E=0;16>E;++E,pe<<=2)Is(pe,Ue,16*+E,H,G+Md[E]);for(E=Le.Gc,ye=Tn(L,F,Le.Dd),ds[ye](X,re),ds[ye](me,_e),pe=Ue,ye=X,We=re,255&(Le=E>>0)&&(170&Le?Me(pe,256,ye,We):tt(pe,256,ye,We)),Le=me,pe=_e,255&(E>>=8)&&(170&E?Me(Ue,320,Le,pe):tt(Ue,320,Le,pe)),F<g.Ub-1&&(a(Ne[Ze].y,0,H,G+480,16),a(Ne[Ze].f,0,X,re+224,8),a(Ne[Ze].ea,0,me,_e+224,8)),E=8*z*g.B,Ne=g.sa,Ze=g.ta+16*L+16*z*g.R,Ue=g.qa,Le=g.ra+8*L+E,pe=g.Ha,ye=g.Ia+8*L+E,E=0;16>E;++E)a(Ne,Ze+E*g.R,H,G+32*E,16);for(E=0;8>E;++E)a(Ue,Le+E*g.B,X,re+32*E,8),a(pe,ye+E*g.B,me,_e+32*E,8)}}function Ts(g,b,E,L,F,z,H,G,X){var re=[0],me=[0],_e=0,Le=X!=null?X.kd:0,Ne=X??new ga;if(g==null||12>E)return 7;Ne.data=g,Ne.w=b,Ne.ha=E,b=[b],E=[E],Ne.gb=[Ne.gb];e:{var Ze=b,Ue=E,pe=Ne.gb;if(r(g!=null),r(Ue!=null),r(pe!=null),pe[0]=0,12<=Ue[0]&&!i(g,Ze[0],"RIFF")){if(i(g,Ze[0]+8,"WEBP")){pe=3;break e}var ye=Fe(g,Ze[0]+4);if(12>ye||4294967286<ye){pe=3;break e}if(Le&&ye>Ue[0]-8){pe=7;break e}pe[0]=ye,Ze[0]+=12,Ue[0]-=12}pe=0}if(pe!=0)return pe;for(ye=0<Ne.gb[0],E=E[0];;){e:{var We=g;Ue=b,pe=E;var Je=re,Ye=me,gt=Ze=[0];if((lt=_e=[_e])[0]=0,8>pe[0])pe=7;else{if(!i(We,Ue[0],"VP8X")){if(Fe(We,Ue[0]+4)!=10){pe=3;break e}if(18>pe[0]){pe=7;break e}var ot=Fe(We,Ue[0]+8),jt=1+et(We,Ue[0]+12);if(2147483648<=jt*(We=1+et(We,Ue[0]+15))){pe=3;break e}gt!=null&&(gt[0]=ot),Je!=null&&(Je[0]=jt),Ye!=null&&(Ye[0]=We),Ue[0]+=18,pe[0]-=18,lt[0]=1}pe=0}}if(_e=_e[0],Ze=Ze[0],pe!=0)return pe;if(Ue=!!(2&Ze),!ye&&_e)return 3;if(z!=null&&(z[0]=!!(16&Ze)),H!=null&&(H[0]=Ue),G!=null&&(G[0]=0),H=re[0],Ze=me[0],_e&&Ue&&X==null){pe=0;break}if(4>E){pe=7;break}if(ye&&_e||!ye&&!_e&&!i(g,b[0],"ALPH")){E=[E],Ne.na=[Ne.na],Ne.P=[Ne.P],Ne.Sa=[Ne.Sa];e:{ot=g,pe=b,ye=E;var lt=Ne.gb;Je=Ne.na,Ye=Ne.P,gt=Ne.Sa,jt=22,r(ot!=null),r(ye!=null),We=pe[0];var ur=ye[0];for(r(Je!=null),r(gt!=null),Je[0]=null,Ye[0]=null,gt[0]=0;;){if(pe[0]=We,ye[0]=ur,8>ur){pe=7;break e}var gr=Fe(ot,We+4);if(4294967286<gr){pe=3;break e}var lr=8+gr+1&-2;if(jt+=lr,0<lt&&jt>lt){pe=3;break e}if(!i(ot,We,"VP8 ")||!i(ot,We,"VP8L")){pe=0;break e}if(ur[0]<lr){pe=7;break e}i(ot,We,"ALPH")||(Je[0]=ot,Ye[0]=We+8,gt[0]=gr),We+=lr,ur-=lr}}if(E=E[0],Ne.na=Ne.na[0],Ne.P=Ne.P[0],Ne.Sa=Ne.Sa[0],pe!=0)break}E=[E],Ne.Ja=[Ne.Ja],Ne.xa=[Ne.xa];e:if(lt=g,pe=b,ye=E,Je=Ne.gb[0],Ye=Ne.Ja,gt=Ne.xa,ot=pe[0],We=!i(lt,ot,"VP8 "),jt=!i(lt,ot,"VP8L"),r(lt!=null),r(ye!=null),r(Ye!=null),r(gt!=null),8>ye[0])pe=7;else{if(We||jt){if(lt=Fe(lt,ot+4),12<=Je&&lt>Je-12){pe=3;break e}if(Le&&lt>ye[0]-8){pe=7;break e}Ye[0]=lt,pe[0]+=8,ye[0]-=8,gt[0]=jt}else gt[0]=5<=ye[0]&&lt[ot+0]==47&&!(lt[ot+4]>>5),Ye[0]=ye[0];pe=0}if(E=E[0],Ne.Ja=Ne.Ja[0],Ne.xa=Ne.xa[0],b=b[0],pe!=0)break;if(4294967286<Ne.Ja)return 3;if(G==null||Ue||(G[0]=Ne.xa?2:1),H=[H],Ze=[Ze],Ne.xa){if(5>E){pe=7;break}G=H,Le=Ze,Ue=z,g==null||5>E?g=0:5<=E&&g[b+0]==47&&!(g[b+4]>>5)?(ye=[0],lt=[0],Je=[0],Ie(Ye=new O,g,b,E),wt(Ye,ye,lt,Je)?(G!=null&&(G[0]=ye[0]),Le!=null&&(Le[0]=lt[0]),Ue!=null&&(Ue[0]=Je[0]),g=1):g=0):g=0}else{if(10>E){pe=7;break}G=Ze,g==null||10>E||!vs(g,b+3,E-3)?g=0:(Le=g[b+0]|g[b+1]<<8|g[b+2]<<16,Ue=16383&(g[b+7]<<8|g[b+6]),g=16383&(g[b+9]<<8|g[b+8]),1&Le||3<(Le>>1&7)||!(Le>>4&1)||Le>>5>=Ne.Ja||!Ue||!g?g=0:(H&&(H[0]=Ue),G&&(G[0]=g),g=1))}if(!g||(H=H[0],Ze=Ze[0],_e&&(re[0]!=H||me[0]!=Ze)))return 3;X!=null&&(X[0]=Ne,X.offset=b-X.w,r(4294967286>b-X.w),r(X.offset==X.ha-E));break}return pe==0||pe==7&&_e&&X==null?(z!=null&&(z[0]|=Ne.na!=null&&0<Ne.na.length),L!=null&&(L[0]=H),F!=null&&(F[0]=Ze),0):pe}function os(g,b,E){var L=b.width,F=b.height,z=0,H=0,G=L,X=F;if(b.Da=g!=null&&0<g.Da,b.Da&&(G=g.cd,X=g.bd,z=g.v,H=g.j,11>E||(z&=-2,H&=-2),0>z||0>H||0>=G||0>=X||z+G>L||H+X>F))return 0;if(b.v=z,b.j=H,b.va=z+G,b.o=H+X,b.U=G,b.T=X,b.da=g!=null&&0<g.da,b.da){if(!pt(G,X,E=[g.ib],z=[g.hb]))return 0;b.ib=E[0],b.hb=z[0]}return b.ob=g!=null&&g.ob,b.Kb=g==null||!g.Sd,b.da&&(b.ob=b.ib<3*L/4&&b.hb<3*F/4,b.Kb=0),1}function pa(g){if(g==null)return 2;if(11>g.S){var b=g.f.RGBA;b.fb+=(g.height-1)*b.A,b.A=-b.A}else b=g.f.kb,g=g.height,b.O+=(g-1)*b.fa,b.fa=-b.fa,b.N+=(g-1>>1)*b.Ab,b.Ab=-b.Ab,b.W+=(g-1>>1)*b.Db,b.Db=-b.Db,b.F!=null&&(b.J+=(g-1)*b.lb,b.lb=-b.lb);return 0}function ls(g,b,E,L){if(L==null||0>=g||0>=b)return 2;if(E!=null){if(E.Da){var F=E.cd,z=E.bd,H=-2&E.v,G=-2&E.j;if(0>H||0>G||0>=F||0>=z||H+F>g||G+z>b)return 2;g=F,b=z}if(E.da){if(!pt(g,b,F=[E.ib],z=[E.hb]))return 2;g=F[0],b=z[0]}}L.width=g,L.height=b;e:{var X=L.width,re=L.height;if(g=L.S,0>=X||0>=re||!(g>=Po&&13>g))g=2;else{if(0>=L.Rd&&L.sd==null){H=z=F=b=0;var me=(G=X*Pd[g])*re;if(11>g||(z=(re+1)/2*(b=(X+1)/2),g==12&&(H=(F=X)*re)),(re=l(me+2*z+H))==null){g=1;break e}L.sd=re,11>g?((X=L.f.RGBA).eb=re,X.fb=0,X.A=G,X.size=me):((X=L.f.kb).y=re,X.O=0,X.fa=G,X.Fd=me,X.f=re,X.N=0+me,X.Ab=b,X.Cd=z,X.ea=re,X.W=0+me+z,X.Db=b,X.Ed=z,g==12&&(X.F=re,X.J=0+me+2*z),X.Tc=H,X.lb=F)}if(b=1,F=L.S,z=L.width,H=L.height,F>=Po&&13>F)if(11>F)g=L.f.RGBA,b&=(G=Math.abs(g.A))*(H-1)+z<=g.size,b&=G>=z*Pd[F],b&=g.eb!=null;else{g=L.f.kb,G=(z+1)/2,me=(H+1)/2,X=Math.abs(g.fa),re=Math.abs(g.Ab);var _e=Math.abs(g.Db),Le=Math.abs(g.lb),Ne=Le*(H-1)+z;b&=X*(H-1)+z<=g.Fd,b&=re*(me-1)+G<=g.Cd,b=(b&=_e*(me-1)+G<=g.Ed)&X>=z&re>=G&_e>=G,b&=g.y!=null,b&=g.f!=null,b&=g.ea!=null,F==12&&(b&=Le>=z,b&=Ne<=g.Tc,b&=g.F!=null)}else b=0;g=b?0:2}}return g!=0||E!=null&&E.fd&&(g=pa(L)),g}var br=64,js=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Yi=24,wi=32,Zt=8,hn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];st("Predictor0","PredictorAdd0"),ie.Predictor0=function(){return 4278190080},ie.Predictor1=function(g){return g},ie.Predictor2=function(g,b,E){return b[E+0]},ie.Predictor3=function(g,b,E){return b[E+1]},ie.Predictor4=function(g,b,E){return b[E-1]},ie.Predictor5=function(g,b,E){return rt(rt(g,b[E+1]),b[E+0])},ie.Predictor6=function(g,b,E){return rt(g,b[E-1])},ie.Predictor7=function(g,b,E){return rt(g,b[E+0])},ie.Predictor8=function(g,b,E){return rt(b[E-1],b[E+0])},ie.Predictor9=function(g,b,E){return rt(b[E+0],b[E+1])},ie.Predictor10=function(g,b,E){return rt(rt(g,b[E-1]),rt(b[E+0],b[E+1]))},ie.Predictor11=function(g,b,E){var L=b[E+0];return 0>=It(L>>24&255,g>>24&255,(b=b[E-1])>>24&255)+It(L>>16&255,g>>16&255,b>>16&255)+It(L>>8&255,g>>8&255,b>>8&255)+It(255&L,255&g,255&b)?L:g},ie.Predictor12=function(g,b,E){var L=b[E+0];return(ht((g>>24&255)+(L>>24&255)-((b=b[E-1])>>24&255))<<24|ht((g>>16&255)+(L>>16&255)-(b>>16&255))<<16|ht((g>>8&255)+(L>>8&255)-(b>>8&255))<<8|ht((255&g)+(255&L)-(255&b)))>>>0},ie.Predictor13=function(g,b,E){var L=b[E-1];return(dt((g=rt(g,b[E+0]))>>24&255,L>>24&255)<<24|dt(g>>16&255,L>>16&255)<<16|dt(g>>8&255,L>>8&255)<<8|dt(g>>0&255,L>>0&255))>>>0};var R=ie.PredictorAdd0;ie.PredictorAdd1=At,st("Predictor2","PredictorAdd2"),st("Predictor3","PredictorAdd3"),st("Predictor4","PredictorAdd4"),st("Predictor5","PredictorAdd5"),st("Predictor6","PredictorAdd6"),st("Predictor7","PredictorAdd7"),st("Predictor8","PredictorAdd8"),st("Predictor9","PredictorAdd9"),st("Predictor10","PredictorAdd10"),st("Predictor11","PredictorAdd11"),st("Predictor12","PredictorAdd12"),st("Predictor13","PredictorAdd13");var e=ie.PredictorAdd2;Bt("ColorIndexInverseTransform","MapARGB","32b",function(g){return g>>8&255},function(g){return g}),Bt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(g){return g},function(g){return g>>8&255});var n,s=ie.ColorIndexInverseTransform,d=ie.MapARGB,u=ie.VP8LColorIndexInverseTransformAlpha,f=ie.MapAlpha,p=ie.VP8LPredictorsAdd=[];p.length=16,(ie.VP8LPredictors=[]).length=16,(ie.VP8LPredictorsAdd_C=[]).length=16,(ie.VP8LPredictors_C=[]).length=16;var w,S,k,P,q,te,he,ge,we,Me,Ke,tt,Qe,Xt,kt,Yr,fn,Vr,rr,Ur,tn,Yn,vi,Qn,Jn,Ir,Tr,rn,gn=l(511),cs=l(2041),so=l(225),_a=l(767),Oo=0,zl=cs,Mo=so,oi=_a,Ni=gn,Po=0,Ro=1,Sd=2,Bo=3,Fo=4,ql=5,Ed=6,Hl=7,Vl=8,Uo=9,Gl=10,Vh=[2,3,7],Gh=[3,3,11],Id=[280,256,256,256,40],Wh=[0,1,1,1,0],Yh=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Xh=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Zh=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],$h=8,Wl=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Yl=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ao=null,Kh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Qh=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Td=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Jh=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],e1=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],t1=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],r1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],_s=[],Di=[],ds=[],n1=1,jd=2,Ls=[],Ai=[];Ve("UpsampleRgbLinePair",Kt,3),Ve("UpsampleBgrLinePair",Dr,3),Ve("UpsampleRgbaLinePair",ai,4),Ve("UpsampleBgraLinePair",Fr,4),Ve("UpsampleArgbLinePair",wn,4),Ve("UpsampleRgba4444LinePair",Br,2),Ve("UpsampleRgb565LinePair",fr,2);var i1=ie.UpsampleRgbLinePair,s1=ie.UpsampleBgrLinePair,_d=ie.UpsampleRgbaLinePair,Ld=ie.UpsampleBgraLinePair,kd=ie.UpsampleArgbLinePair,Dd=ie.UpsampleRgba4444LinePair,a1=ie.UpsampleRgb565LinePair,zo=16,qo=1<<zo-1,oo=-227,Xl=482,o1=6,Od=0,l1=l(256),c1=l(256),d1=l(256),u1=l(256),h1=l(Xl-oo),f1=l(Xl-oo);Wn("YuvToRgbRow",Kt,3),Wn("YuvToBgrRow",Dr,3),Wn("YuvToRgbaRow",ai,4),Wn("YuvToBgraRow",Fr,4),Wn("YuvToArgbRow",wn,4),Wn("YuvToRgba4444Row",Br,2),Wn("YuvToRgb565Row",fr,2);var Md=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ho=[0,2,8],g1=[8,7,6,4,4,2,2,2,1,1,1,1],m1=1;this.WebPDecodeRGBA=function(g,b,E,L,F){var z=Ro,H=new Ss,G=new qt;H.ba=G,G.S=z,G.width=[G.width],G.height=[G.height];var X=G.width,re=G.height,me=new Cn;if(me==null||g==null)var _e=2;else r(me!=null),_e=Ts(g,b,E,me.width,me.height,me.Pd,me.Qd,me.format,null);if(_e!=0?X=0:(X!=null&&(X[0]=me.width[0]),re!=null&&(re[0]=me.height[0]),X=1),X){G.width=G.width[0],G.height=G.height[0],L!=null&&(L[0]=G.width),F!=null&&(F[0]=G.height);e:{if(L=new Wt,(F=new ga).data=g,F.w=b,F.ha=E,F.kd=1,b=[0],r(F!=null),((g=Ts(F.data,F.w,F.ha,null,null,null,b,null,F))==0||g==7)&&b[0]&&(g=4),(b=g)==0){if(r(H!=null),L.data=F.data,L.w=F.w+F.offset,L.ha=F.ha-F.offset,L.put=Sn,L.ac=nr,L.bc=Hn,L.ma=H,F.xa){if((g=En())==null){H=1;break e}if(function(Le,Ne){var Ze=[0],Ue=[0],pe=[0];t:for(;;){if(Le==null)return 0;if(Ne==null)return Le.a=2,0;if(Le.l=Ne,Le.a=0,Ie(Le.m,Ne.data,Ne.w,Ne.ha),!wt(Le.m,Ze,Ue,pe)){Le.a=3;break t}if(Le.xb=jd,Ne.width=Ze[0],Ne.height=Ue[0],!Kr(Ze[0],Ue[0],1,Le,null))break t;return 1}return r(Le.a!=0),0}(g,L)){if(L=(b=ls(L.width,L.height,H.Oa,H.ba))==0){t:{L=g;r:for(;;){if(L==null){L=0;break t}if(r(L.s.yc!=null),r(L.s.Ya!=null),r(0<L.s.Wb),r((E=L.l)!=null),r((F=E.ma)!=null),L.xb!=0){if(L.ca=F.ba,L.tb=F.tb,r(L.ca!=null),!os(F.Oa,E,Bo)){L.a=2;break r}if(!ns(L,E.width)||E.da)break r;if((E.da||Qt(L.ca.S))&&Ce(),11>L.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),L.ca.f.kb.F!=null&&Ce()),L.Pb&&0<L.s.ua&&L.s.vb.X==null&&!mt(L.s.vb,L.s.Wa.Xa)){L.a=1;break r}L.xb=0}if(!bn(L,L.V,L.Ba,L.c,L.i,E.o,ut))break r;F.Dc=L.Ma,L=1;break t}r(L.a!=0),L=0}L=!L}L&&(b=g.a)}else b=g.a}else{if((g=new ra)==null){H=1;break e}if(g.Fa=F.na,g.P=F.P,g.qc=F.Sa,Pr(g,L)){if((b=ls(L.width,L.height,H.Oa,H.ba))==0){if(g.Aa=0,E=H.Oa,r((F=g)!=null),E!=null){if(0<(X=0>(X=E.Md)?0:100<X?255:255*X/100)){for(re=me=0;4>re;++re)12>(_e=F.pb[re]).lc&&(_e.ia=X*g1[0>_e.lc?0:_e.lc]>>3),me|=_e.ia;me&&(alert("todo:VP8InitRandom"),F.ia=1)}F.Ga=E.Id,100<F.Ga?F.Ga=100:0>F.Ga&&(F.Ga=0)}kr(g,L)||(b=g.a)}}else b=g.a}b==0&&H.Oa!=null&&H.Oa.fd&&(b=pa(H.ba))}H=b}z=H!=0?null:11>z?G.f.RGBA.eb:G.f.kb.y}else z=null;return z};var Pd=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function y(ie,ce){for(var De="",Y=0;Y<4;Y++)De+=String.fromCharCode(ie[ce++]);return De}function v(ie,ce){return(ie[ce+0]<<0|ie[ce+1]<<8|ie[ce+2]<<16)>>>0}function C(ie,ce){return(ie[ce+0]<<0|ie[ce+1]<<8|ie[ce+2]<<16|ie[ce+3]<<24)>>>0}new x;var T=[0],A=[0],D=[],_=new x,M=t,I=function(ie,ce){var De={},Y=0,V=!1,oe=0,le=0;if(De.frames=[],!function(W,K,ue,ae){for(var Ee=0;Ee<ae;Ee++)if(W[K+Ee]!=ue.charCodeAt(Ee))return!0;return!1}(ie,ce,"RIFF",4)){var ne,Te;for(C(ie,ce+=4),ce+=8;ce<ie.length;){var Se=y(ie,ce),Ie=C(ie,ce+=4);ce+=4;var se=Ie+(1&Ie);switch(Se){case"VP8 ":case"VP8L":De.frames[Y]===void 0&&(De.frames[Y]={}),(O=De.frames[Y]).src_off=V?le:ce-8,O.src_size=oe+Ie+8,Y++,V&&(V=!1,oe=0,le=0);break;case"VP8X":(O=De.header={}).feature_flags=ie[ce];var be=ce+4;O.canvas_width=1+v(ie,be),be+=3,O.canvas_height=1+v(ie,be),be+=3;break;case"ALPH":V=!0,oe=se+8,le=ce-8;break;case"ANIM":(O=De.header).bgcolor=C(ie,ce),be=ce+4,O.loop_count=(ne=ie)[(Te=be)+0]<<0|ne[Te+1]<<8,be+=2;break;case"ANMF":var Ge,O;(O=De.frames[Y]={}).offset_x=2*v(ie,ce),ce+=3,O.offset_y=2*v(ie,ce),ce+=3,O.width=1+v(ie,ce),ce+=3,O.height=1+v(ie,ce),ce+=3,O.duration=v(ie,ce),ce+=3,Ge=ie[ce++],O.dispose=1&Ge,O.blend=Ge>>1&1}Se!="ANMF"&&(ce+=se)}return De}}(M,0);I.response=M,I.rgbaoutput=!0,I.dataurl=!1;var j=I.header?I.header:null,B=I.frames?I.frames:null;if(j){j.loop_counter=j.loop_count,T=[j.canvas_height],A=[j.canvas_width];for(var Z=0;Z<B.length&&B[Z].blend!=0;Z++);}var Q=B[0],xe=_.WebPDecodeRGBA(M,Q.src_off,Q.src_size,A,T);Q.rgba=xe,Q.imgwidth=A[0],Q.imgheight=T[0];for(var $=0;$<A[0]*T[0]*4;$++)D[$]=xe[$];return this.width=A,this.height=T,this.data=D,this}(function(t){var r=function(){return typeof Wc=="function"},i=function(T,A,D,_){var M=4,I=h;switch(_){case t.image_compression.FAST:M=1,I=l;break;case t.image_compression.MEDIUM:M=6,I=m;break;case t.image_compression.SLOW:M=9,I=x}T=a(T,A,D,I);var j=Wc(T,{level:M});return t.__addimage__.arrayBufferToBinaryString(j)},a=function(T,A,D,_){for(var M,I,j,B=T.length/A,Z=new Uint8Array(T.length+B),Q=v(),xe=0;xe<B;xe+=1){if(j=xe*A,M=T.subarray(j,j+A),_)Z.set(_(M,D,I),j+xe);else{for(var $,ie=Q.length,ce=[];$<ie;$+=1)ce[$]=Q[$](M,D,I);var De=C(ce.concat());Z.set(ce[De],j+xe)}I=M}return Z},c=function(T){var A=Array.apply([],T);return A.unshift(0),A},l=function(T,A){var D,_=[],M=T.length;_[0]=1;for(var I=0;I<M;I+=1)D=T[I-A]||0,_[I+1]=T[I]-D+256&255;return _},h=function(T,A,D){var _,M=[],I=T.length;M[0]=2;for(var j=0;j<I;j+=1)_=D&&D[j]||0,M[j+1]=T[j]-_+256&255;return M},m=function(T,A,D){var _,M,I=[],j=T.length;I[0]=3;for(var B=0;B<j;B+=1)_=T[B-A]||0,M=D&&D[B]||0,I[B+1]=T[B]+256-(_+M>>>1)&255;return I},x=function(T,A,D){var _,M,I,j,B=[],Z=T.length;B[0]=4;for(var Q=0;Q<Z;Q+=1)_=T[Q-A]||0,M=D&&D[Q]||0,I=D&&D[Q-A]||0,j=y(_,M,I),B[Q+1]=T[Q]-j+256&255;return B},y=function(T,A,D){if(T===A&&A===D)return T;var _=Math.abs(A-D),M=Math.abs(T-D),I=Math.abs(T+A-D-D);return _<=M&&_<=I?T:M<=I?A:D},v=function(){return[c,l,h,m,x]},C=function(T){var A=T.map(function(D){return D.reduce(function(_,M){return _+Math.abs(M)},0)});return A.indexOf(Math.min.apply(null,A))};t.processPNG=function(T,A,D,_){var M,I,j,B,Z,Q,xe,$,ie,ce,De,Y,V,oe,le,ne=this.decode.FLATE_DECODE,Te="";if(this.__addimage__.isArrayBuffer(T)&&(T=new Uint8Array(T)),this.__addimage__.isArrayBufferView(T)){if(T=(j=new wx(T)).imgData,I=j.bits,M=j.colorSpace,Z=j.colors,[4,6].indexOf(j.colorType)!==-1){if(j.bits===8){ie=($=j.pixelBitlength==32?new Uint32Array(j.decodePixels().buffer):j.pixelBitlength==16?new Uint16Array(j.decodePixels().buffer):new Uint8Array(j.decodePixels().buffer)).length,De=new Uint8Array(ie*j.colors),ce=new Uint8Array(ie);var Se,Ie=j.pixelBitlength-j.bits;for(oe=0,le=0;oe<ie;oe++){for(V=$[oe],Se=0;Se<Ie;)De[le++]=V>>>Se&255,Se+=j.bits;ce[oe]=V>>>Se&255}}if(j.bits===16){ie=($=new Uint32Array(j.decodePixels().buffer)).length,De=new Uint8Array(ie*(32/j.pixelBitlength)*j.colors),ce=new Uint8Array(ie*(32/j.pixelBitlength)),Y=j.colors>1,oe=0,le=0;for(var se=0;oe<ie;)V=$[oe++],De[le++]=V>>>0&255,Y&&(De[le++]=V>>>16&255,V=$[oe++],De[le++]=V>>>0&255),ce[se++]=V>>>16&255;I=8}_!==t.image_compression.NONE&&r()?(T=i(De,j.width*j.colors,j.colors,_),xe=i(ce,j.width,1,_)):(T=De,xe=ce,ne=void 0)}if(j.colorType===3&&(M=this.color_spaces.INDEXED,Q=j.palette,j.transparency.indexed)){var be=j.transparency.indexed,Ge=0;for(oe=0,ie=be.length;oe<ie;++oe)Ge+=be[oe];if((Ge/=255)===ie-1&&be.indexOf(0)!==-1)B=[be.indexOf(0)];else if(Ge!==ie){for($=j.decodePixels(),ce=new Uint8Array($.length),oe=0,ie=$.length;oe<ie;oe++)ce[oe]=be[$[oe]];xe=i(ce,j.width,1)}}var O=function(W){var K;switch(W){case t.image_compression.FAST:K=11;break;case t.image_compression.MEDIUM:K=13;break;case t.image_compression.SLOW:K=14;break;default:K=12}return K}(_);return ne===this.decode.FLATE_DECODE&&(Te="/Predictor "+O+" "),Te+="/Colors "+Z+" /BitsPerComponent "+I+" /Columns "+j.width,(this.__addimage__.isArrayBuffer(T)||this.__addimage__.isArrayBufferView(T))&&(T=this.__addimage__.arrayBufferToBinaryString(T)),(xe&&this.__addimage__.isArrayBuffer(xe)||this.__addimage__.isArrayBufferView(xe))&&(xe=this.__addimage__.arrayBufferToBinaryString(xe)),{alias:D,data:T,index:A,filter:ne,decodeParameters:Te,transparency:B,palette:Q,sMask:xe,predictor:O,width:j.width,height:j.height,bitsPerComponent:I,colorSpace:M}}}})(_t.API),function(t){t.processGIF89A=function(r,i,a,c){var l=new vx(r),h=l.width,m=l.height,x=[];l.decodeAndBlitFrameRGBA(0,x);var y={data:x,width:h,height:m},v=new xc(100).encode(y,100);return t.processJPEG.call(this,v,i,a,c)},t.processGIF87A=t.processGIF89A}(_t.API),Pi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var r=0;r<t;r++){var i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[r]={red:c,green:a,blue:i,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Pi.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,r=this.width*this.height*4;this.data=new Uint8Array(r),this[t]()}catch(i){Nr.log("bit decode error:"+i)}},Pi.prototype.bit1=function(){var t,r=Math.ceil(this.width/8),i=r%4;for(t=this.height-1;t>=0;t--){for(var a=this.bottom_up?t:this.height-1-t,c=0;c<r;c++)for(var l=this.datav.getUint8(this.pos++,!0),h=a*this.width*4+8*c*4,m=0;m<8&&8*c+m<this.width;m++){var x=this.palette[l>>7-m&1];this.data[h+4*m]=x.blue,this.data[h+4*m+1]=x.green,this.data[h+4*m+2]=x.red,this.data[h+4*m+3]=255}i!==0&&(this.pos+=4-i)}},Pi.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),r=t%4,i=this.height-1;i>=0;i--){for(var a=this.bottom_up?i:this.height-1-i,c=0;c<t;c++){var l=this.datav.getUint8(this.pos++,!0),h=a*this.width*4+2*c*4,m=l>>4,x=15&l,y=this.palette[m];if(this.data[h]=y.blue,this.data[h+1]=y.green,this.data[h+2]=y.red,this.data[h+3]=255,2*c+1>=this.width)break;y=this.palette[x],this.data[h+4]=y.blue,this.data[h+4+1]=y.green,this.data[h+4+2]=y.red,this.data[h+4+3]=255}r!==0&&(this.pos+=4-r)}},Pi.prototype.bit8=function(){for(var t=this.width%4,r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var c=this.datav.getUint8(this.pos++,!0),l=i*this.width*4+4*a;if(c<this.palette.length){var h=this.palette[c];this.data[l]=h.red,this.data[l+1]=h.green,this.data[l+2]=h.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}t!==0&&(this.pos+=4-t)}},Pi.prototype.bit15=function(){for(var t=this.width%3,r=parseInt("11111",2),i=this.height-1;i>=0;i--){for(var a=this.bottom_up?i:this.height-1-i,c=0;c<this.width;c++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var h=(l&r)/r*255|0,m=(l>>5&r)/r*255|0,x=(l>>10&r)/r*255|0,y=l>>15?255:0,v=a*this.width*4+4*c;this.data[v]=x,this.data[v+1]=m,this.data[v+2]=h,this.data[v+3]=y}this.pos+=t}},Pi.prototype.bit16=function(){for(var t=this.width%3,r=parseInt("11111",2),i=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var c=this.bottom_up?a:this.height-1-a,l=0;l<this.width;l++){var h=this.datav.getUint16(this.pos,!0);this.pos+=2;var m=(h&r)/r*255|0,x=(h>>5&i)/i*255|0,y=(h>>11)/r*255|0,v=c*this.width*4+4*l;this.data[v]=y,this.data[v+1]=x,this.data[v+2]=m,this.data[v+3]=255}this.pos+=t}},Pi.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var a=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),h=r*this.width*4+4*i;this.data[h]=l,this.data[h+1]=c,this.data[h+2]=a,this.data[h+3]=255}this.pos+=this.width%4}},Pi.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var a=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),h=this.datav.getUint8(this.pos++,!0),m=r*this.width*4+4*i;this.data[m]=l,this.data[m+1]=c,this.data[m+2]=a,this.data[m+3]=h}},Pi.prototype.getData=function(){return this.data},function(t){t.processBMP=function(r,i,a,c){var l=new Pi(r,!1),h=l.width,m=l.height,x={data:l.getData(),width:h,height:m},y=new xc(100).encode(x,100);return t.processJPEG.call(this,y,i,a,c)}}(_t.API),s0.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(r,i,a,c){var l=new s0(r),h=l.width,m=l.height,x={data:l.getData(),width:h,height:m},y=new xc(100).encode(x,100);return t.processJPEG.call(this,y,i,a,c)}}(_t.API),_t.API.processRGBA=function(t,r,i){for(var a=t.data,c=a.length,l=new Uint8Array(c/4*3),h=new Uint8Array(c/4),m=0,x=0,y=0;y<c;y+=4){var v=a[y],C=a[y+1],T=a[y+2],A=a[y+3];l[m++]=v,l[m++]=C,l[m++]=T,h[x++]=A}var D=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(h),data:D,index:r,alias:i,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},_t.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ra=_t.API,sl=Ra.getCharWidthsArray=function(t,r){var i,a,c=(r=r||{}).font||this.internal.getFont(),l=r.fontSize||this.internal.getFontSize(),h=r.charSpace||this.internal.getCharSpace(),m=r.widths?r.widths:c.metadata.Unicode.widths,x=m.fof?m.fof:1,y=r.kerning?r.kerning:c.metadata.Unicode.kerning,v=y.fof?y.fof:1,C=r.doKerning!==!1,T=0,A=t.length,D=0,_=m[0]||x,M=[];for(i=0;i<A;i++)a=t.charCodeAt(i),typeof c.metadata.widthOfString=="function"?M.push((c.metadata.widthOfGlyph(c.metadata.characterToGlyph(a))+h*(1e3/l)||0)/1e3):(T=C&&xr(y[a])==="object"&&!isNaN(parseInt(y[a][D],10))?y[a][D]/v:0,M.push((m[a]||_)/x+T)),D=a;return M},t0=Ra.getStringUnitWidth=function(t,r){var i=(r=r||{}).fontSize||this.internal.getFontSize(),a=r.font||this.internal.getFont(),c=r.charSpace||this.internal.getCharSpace();return Ra.processArabic&&(t=Ra.processArabic(t)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(t,i,c)/i:sl.apply(this,arguments).reduce(function(l,h){return l+h},0)},r0=function(t,r,i,a){for(var c=[],l=0,h=t.length,m=0;l!==h&&m+r[l]<i;)m+=r[l],l++;c.push(t.slice(0,l));var x=l;for(m=0;l!==h;)m+r[l]>a&&(c.push(t.slice(x,l)),m=0,x=l),m+=r[l],l++;return x!==l&&c.push(t.slice(x,l)),c},n0=function(t,r,i){i||(i={});var a,c,l,h,m,x,y,v=[],C=[v],T=i.textIndent||0,A=0,D=0,_=t.split(" "),M=sl.apply(this,[" ",i])[0];if(x=i.lineIndent===-1?_[0].length+2:i.lineIndent||0){var I=Array(x).join(" "),j=[];_.map(function(Z){(Z=Z.split(/\s*\n/)).length>1?j=j.concat(Z.map(function(Q,xe){return(xe&&Q.length?`
`:"")+Q})):j.push(Z[0])}),_=j,x=t0.apply(this,[I,i])}for(l=0,h=_.length;l<h;l++){var B=0;if(a=_[l],x&&a[0]==`
`&&(a=a.substr(1),B=1),T+A+(D=(c=sl.apply(this,[a,i])).reduce(function(Z,Q){return Z+Q},0))>r||B){if(D>r){for(m=r0.apply(this,[a,c,r-(T+A),r]),v.push(m.shift()),v=[m.pop()];m.length;)C.push([m.shift()]);D=c.slice(a.length-(v[0]?v[0].length:0)).reduce(function(Z,Q){return Z+Q},0)}else v=[a];C.push(v),T=D+x,A=M}else v.push(a),T+=A+D,A=M}return y=x?function(Z,Q){return(Q?I:"")+Z.join(" ")}:function(Z){return Z.join(" ")},C.map(y)},Ra.splitTextToSize=function(t,r,i){var a,c=(i=i||{}).fontSize||this.internal.getFontSize(),l=(function(v){if(v.widths&&v.kerning)return{widths:v.widths,kerning:v.kerning};var C=this.internal.getFont(v.fontName,v.fontStyle);return C.metadata.Unicode?{widths:C.metadata.Unicode.widths||{0:1},kerning:C.metadata.Unicode.kerning||{}}:{font:C.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,i);a=Array.isArray(t)?t:String(t).split(/\r?\n/);var h=1*this.internal.scaleFactor*r/c;l.textIndent=i.textIndent?1*i.textIndent*this.internal.scaleFactor/c:0,l.lineIndent=i.lineIndent;var m,x,y=[];for(m=0,x=a.length;m<x;m++)y=y.concat(n0.apply(this,[a[m],h,l]));return y},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var r="klmnopqrstuvwxyz",i={},a={},c=0;c<r.length;c++)i[r[c]]="0123456789abcdef"[c],a["0123456789abcdef"[c]]=r[c];var l=function(C){return"0x"+parseInt(C,10).toString(16)},h=t.__fontmetrics__.compress=function(C){var T,A,D,_,M=["{"];for(var I in C){if(T=C[I],isNaN(parseInt(I,10))?A="'"+I+"'":(I=parseInt(I,10),A=(A=l(I).slice(2)).slice(0,-1)+a[A.slice(-1)]),typeof T=="number")T<0?(D=l(T).slice(3),_="-"):(D=l(T).slice(2),_=""),D=_+D.slice(0,-1)+a[D.slice(-1)];else{if(xr(T)!=="object")throw new Error("Don't know what to do with value type "+xr(T)+".");D=h(T)}M.push(A+D)}return M.push("}"),M.join("")},m=t.__fontmetrics__.uncompress=function(C){if(typeof C!="string")throw new Error("Invalid argument passed to uncompress.");for(var T,A,D,_,M={},I=1,j=M,B=[],Z="",Q="",xe=C.length-1,$=1;$<xe;$+=1)(_=C[$])=="'"?T?(D=T.join(""),T=void 0):T=[]:T?T.push(_):_=="{"?(B.push([j,D]),j={},D=void 0):_=="}"?((A=B.pop())[0][A[1]]=j,D=void 0,j=A[0]):_=="-"?I=-1:D===void 0?i.hasOwnProperty(_)?(Z+=i[_],D=parseInt(Z,16)*I,I=1,Z=""):Z+=_:i.hasOwnProperty(_)?(Q+=i[_],j[D]=parseInt(Q,16)*I,I=1,D=void 0,Q=""):Q+=_;return M},x={codePages:["WinAnsiEncoding"],WinAnsiEncoding:m("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},y={Unicode:{Courier:x,"Courier-Bold":x,"Courier-BoldOblique":x,"Courier-Oblique":x,Helvetica:x,"Helvetica-Bold":x,"Helvetica-BoldOblique":x,"Helvetica-Oblique":x,"Times-Roman":x,"Times-Bold":x,"Times-BoldItalic":x,"Times-Italic":x}},v={Unicode:{"Courier-Oblique":m("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":m("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":m("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:m("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":m("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":m("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:m("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:m("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":m("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:m("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":m("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":m("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":m("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":m("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(C){var T=C.font,A=v.Unicode[T.postScriptName];A&&(T.metadata.Unicode={},T.metadata.Unicode.widths=A.widths,T.metadata.Unicode.kerning=A.kerning);var D=y.Unicode[T.postScriptName];D&&(T.metadata.Unicode.encoding=D,T.encoding=D.codePages[0])}])}(_t.API),function(t){var r=function(i){for(var a=i.length,c=new Uint8Array(a),l=0;l<a;l++)c[l]=i.charCodeAt(l);return c};t.API.events.push(["addFont",function(i){var a=void 0,c=i.font,l=i.instance;if(!c.isStandardFont){if(l===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+c.postScriptName+"').");if(typeof(a=l.existsFileInVFS(c.postScriptName)===!1?l.loadFile(c.postScriptName):l.getFileFromVFS(c.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+c.postScriptName+"').");(function(h,m){m=/^\x00\x01\x00\x00/.test(m)?r(m):r(bo(m)),h.metadata=t.API.TTFFont.open(m),h.metadata.Unicode=h.metadata.Unicode||{encoding:{},kerning:{},widths:[]},h.metadata.glyIdsUsed=[0]})(c,a)}}])}(_t),function(t){function r(){return(Lt.canvg?Promise.resolve(Lt.canvg):Ic(()=>import("./index.es-7KsgRs5O.js"),__vite__mapDeps([0,1,2,3,4,5]))).catch(function(i){return Promise.reject(new Error("Could not load canvg: "+i))}).then(function(i){return i.default?i.default:i})}_t.API.addSvgAsImage=function(i,a,c,l,h,m,x,y){if(isNaN(a)||isNaN(c))throw Nr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(l)||isNaN(h))throw Nr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var v=document.createElement("canvas");v.width=l,v.height=h;var C=v.getContext("2d");C.fillStyle="#fff",C.fillRect(0,0,v.width,v.height);var T={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},A=this;return r().then(function(D){return D.fromString(C,i,T)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(D){return D.render(T)}).then(function(){A.addImage(v.toDataURL("image/jpeg",1),a,c,l,h,x,y)})}}(),_t.API.putTotalPages=function(t){var r,i=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(r=new RegExp(t,"g"),i=this.internal.getNumberOfPages()):(r=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),i=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var c=0;c<this.internal.pages[a].length;c++)this.internal.pages[a][c]=this.internal.pages[a][c].replace(r,i);return this},_t.API.viewerPreferences=function(t,r){var i;t=t||{},r=r||!1;var a,c,l,h={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},m=Object.keys(h),x=[],y=0,v=0,C=0;function T(D,_){var M,I=!1;for(M=0;M<D.length;M+=1)D[M]===_&&(I=!0);return I}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(h)),this.internal.viewerpreferences.isSubscribed=!1),i=this.internal.viewerpreferences.configuration,t==="reset"||r===!0){var A=m.length;for(C=0;C<A;C+=1)i[m[C]].value=i[m[C]].defaultValue,i[m[C]].explicitSet=!1}if(xr(t)==="object"){for(c in t)if(l=t[c],T(m,c)&&l!==void 0){if(i[c].type==="boolean"&&typeof l=="boolean")i[c].value=l;else if(i[c].type==="name"&&T(i[c].valueSet,l))i[c].value=l;else if(i[c].type==="integer"&&Number.isInteger(l))i[c].value=l;else if(i[c].type==="array"){for(y=0;y<l.length;y+=1)if(a=!0,l[y].length===1&&typeof l[y][0]=="number")x.push(String(l[y]-1));else if(l[y].length>1){for(v=0;v<l[y].length;v+=1)typeof l[y][v]!="number"&&(a=!1);a===!0&&x.push([l[y][0]-1,l[y][1]-1].join(" "))}i[c].value="["+x.join(" ")+"]"}else i[c].value=i[c].defaultValue;i[c].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var D,_=[];for(D in i)i[D].explicitSet===!0&&(i[D].type==="name"?_.push("/"+D+" /"+i[D].value):_.push("/"+D+" "+i[D].value));_.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+_.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=i,this},function(t){var r=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',c=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),l=unescape(encodeURIComponent(a)),h=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),m=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),x=unescape(encodeURIComponent("</x:xmpmeta>")),y=l.length+h.length+m.length+c.length+x.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+y+" >>"),this.internal.write("stream"),this.internal.write(c+l+h+m+x),this.internal.write("endstream"),this.internal.write("endobj")},i=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(a,c){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:c||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",i),this.internal.events.subscribe("postPutResources",r)),this}}(_t.API),function(t){var r=t.API,i=r.pdfEscape16=function(l,h){for(var m,x=h.metadata.Unicode.widths,y=["","0","00","000","0000"],v=[""],C=0,T=l.length;C<T;++C){if(m=h.metadata.characterToGlyph(l.charCodeAt(C)),h.metadata.glyIdsUsed.push(m),h.metadata.toUnicode[m]=l.charCodeAt(C),x.indexOf(m)==-1&&(x.push(m),x.push([parseInt(h.metadata.widthOfGlyph(m),10)])),m=="0")return v.join("");m=m.toString(16),v.push(y[4-m.length],m)}return v.join("")},a=function(l){var h,m,x,y,v,C,T;for(v=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,x=[],C=0,T=(m=Object.keys(l).sort(function(A,D){return A-D})).length;C<T;C++)h=m[C],x.length>=100&&(v+=`
`+x.length+` beginbfchar
`+x.join(`
`)+`
endbfchar`,x=[]),l[h]!==void 0&&l[h]!==null&&typeof l[h].toString=="function"&&(y=("0000"+l[h].toString(16)).slice(-4),h=("0000"+(+h).toString(16)).slice(-4),x.push("<"+h+"><"+y+">"));return x.length&&(v+=`
`+x.length+` beginbfchar
`+x.join(`
`)+`
endbfchar
`),v+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};r.events.push(["putFont",function(l){(function(h){var m=h.font,x=h.out,y=h.newObject,v=h.putStream;if(m.metadata instanceof t.API.TTFFont&&m.encoding==="Identity-H"){for(var C=m.metadata.Unicode.widths,T=m.metadata.subset.encode(m.metadata.glyIdsUsed,1),A="",D=0;D<T.length;D++)A+=String.fromCharCode(T[D]);var _=y();v({data:A,addLength1:!0,objectId:_}),x("endobj");var M=y();v({data:a(m.metadata.toUnicode),addLength1:!0,objectId:M}),x("endobj");var I=y();x("<<"),x("/Type /FontDescriptor"),x("/FontName /"+Fa(m.fontName)),x("/FontFile2 "+_+" 0 R"),x("/FontBBox "+t.API.PDFObject.convert(m.metadata.bbox)),x("/Flags "+m.metadata.flags),x("/StemV "+m.metadata.stemV),x("/ItalicAngle "+m.metadata.italicAngle),x("/Ascent "+m.metadata.ascender),x("/Descent "+m.metadata.decender),x("/CapHeight "+m.metadata.capHeight),x(">>"),x("endobj");var j=y();x("<<"),x("/Type /Font"),x("/BaseFont /"+Fa(m.fontName)),x("/FontDescriptor "+I+" 0 R"),x("/W "+t.API.PDFObject.convert(C)),x("/CIDToGIDMap /Identity"),x("/DW 1000"),x("/Subtype /CIDFontType2"),x("/CIDSystemInfo"),x("<<"),x("/Supplement 0"),x("/Registry (Adobe)"),x("/Ordering ("+m.encoding+")"),x(">>"),x(">>"),x("endobj"),m.objectNumber=y(),x("<<"),x("/Type /Font"),x("/Subtype /Type0"),x("/ToUnicode "+M+" 0 R"),x("/BaseFont /"+Fa(m.fontName)),x("/Encoding /"+m.encoding),x("/DescendantFonts ["+j+" 0 R]"),x(">>"),x("endobj"),m.isAlreadyPutted=!0}})(l)}]),r.events.push(["putFont",function(l){(function(h){var m=h.font,x=h.out,y=h.newObject,v=h.putStream;if(m.metadata instanceof t.API.TTFFont&&m.encoding==="WinAnsiEncoding"){for(var C=m.metadata.rawData,T="",A=0;A<C.length;A++)T+=String.fromCharCode(C[A]);var D=y();v({data:T,addLength1:!0,objectId:D}),x("endobj");var _=y();v({data:a(m.metadata.toUnicode),addLength1:!0,objectId:_}),x("endobj");var M=y();x("<<"),x("/Descent "+m.metadata.decender),x("/CapHeight "+m.metadata.capHeight),x("/StemV "+m.metadata.stemV),x("/Type /FontDescriptor"),x("/FontFile2 "+D+" 0 R"),x("/Flags 96"),x("/FontBBox "+t.API.PDFObject.convert(m.metadata.bbox)),x("/FontName /"+Fa(m.fontName)),x("/ItalicAngle "+m.metadata.italicAngle),x("/Ascent "+m.metadata.ascender),x(">>"),x("endobj"),m.objectNumber=y();for(var I=0;I<m.metadata.hmtx.widths.length;I++)m.metadata.hmtx.widths[I]=parseInt(m.metadata.hmtx.widths[I]*(1e3/m.metadata.head.unitsPerEm));x("<</Subtype/TrueType/Type/Font/ToUnicode "+_+" 0 R/BaseFont/"+Fa(m.fontName)+"/FontDescriptor "+M+" 0 R/Encoding/"+m.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(m.metadata.hmtx.widths)+">>"),x("endobj"),m.isAlreadyPutted=!0}})(l)}]);var c=function(l){var h,m=l.text||"",x=l.x,y=l.y,v=l.options||{},C=l.mutex||{},T=C.pdfEscape,A=C.activeFontKey,D=C.fonts,_=A,M="",I=0,j="",B=D[_].encoding;if(D[_].encoding!=="Identity-H")return{text:m,x,y,options:v,mutex:C};for(j=m,_=A,Array.isArray(m)&&(j=m[0]),I=0;I<j.length;I+=1)D[_].metadata.hasOwnProperty("cmap")&&(h=D[_].metadata.cmap.unicode.codeMap[j[I].charCodeAt(0)]),h||j[I].charCodeAt(0)<256&&D[_].metadata.hasOwnProperty("Unicode")?M+=j[I]:M+="";var Z="";return parseInt(_.slice(1))<14||B==="WinAnsiEncoding"?Z=T(M,_).split("").map(function(Q){return Q.charCodeAt(0).toString(16)}).join(""):B==="Identity-H"&&(Z=i(M,D[_])),C.isHex=!0,{text:Z,x,y,options:v,mutex:C}};r.events.push(["postProcessText",function(l){var h=l.text||"",m=[],x={text:h,x:l.x,y:l.y,options:l.options,mutex:l.mutex};if(Array.isArray(h)){var y=0;for(y=0;y<h.length;y+=1)Array.isArray(h[y])&&h[y].length===3?m.push([c(Object.assign({},x,{text:h[y][0]})).text,h[y][1],h[y][2]]):m.push(c(Object.assign({},x,{text:h[y]})).text);l.text=m}else l.text=c(Object.assign({},x,{text:h})).text}])}(_t),function(t){var r=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(i){return r.call(this),this.internal.vFS[i]!==void 0},t.addFileToVFS=function(i,a){return r.call(this),this.internal.vFS[i]=a,this},t.getFileFromVFS=function(i){return r.call(this),this.internal.vFS[i]!==void 0?this.internal.vFS[i]:null}}(_t.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(a){var c,l,h,m,x,y,v,C=r,T=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],A=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],D={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},_={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},M=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],I=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),j=!1,B=0;this.__bidiEngine__={};var Z=function(Y){var V=Y.charCodeAt(),oe=V>>8,le=_[oe];return le!==void 0?C[256*le+(255&V)]:oe===252||oe===253?"AL":I.test(oe)?"L":oe===8?"R":"N"},Q=function(Y){for(var V,oe=0;oe<Y.length;oe++){if((V=Z(Y.charAt(oe)))==="L")return!1;if(V==="R")return!0}return!1},xe=function(Y,V,oe,le){var ne,Te,Se,Ie,se=V[le];switch(se){case"L":case"R":j=!1;break;case"N":case"AN":break;case"EN":j&&(se="AN");break;case"AL":j=!0,se="R";break;case"WS":se="N";break;case"CS":le<1||le+1>=V.length||(ne=oe[le-1])!=="EN"&&ne!=="AN"||(Te=V[le+1])!=="EN"&&Te!=="AN"?se="N":j&&(Te="AN"),se=Te===ne?Te:"N";break;case"ES":se=(ne=le>0?oe[le-1]:"B")==="EN"&&le+1<V.length&&V[le+1]==="EN"?"EN":"N";break;case"ET":if(le>0&&oe[le-1]==="EN"){se="EN";break}if(j){se="N";break}for(Se=le+1,Ie=V.length;Se<Ie&&V[Se]==="ET";)Se++;se=Se<Ie&&V[Se]==="EN"?"EN":"N";break;case"NSM":if(h&&!m){for(Ie=V.length,Se=le+1;Se<Ie&&V[Se]==="NSM";)Se++;if(Se<Ie){var be=Y[le],Ge=be>=1425&&be<=2303||be===64286;if(ne=V[Se],Ge&&(ne==="R"||ne==="AL")){se="R";break}}}se=le<1||(ne=V[le-1])==="B"?"N":oe[le-1];break;case"B":j=!1,c=!0,se=B;break;case"S":l=!0,se="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":j=!1;break;case"BN":se="N"}return se},$=function(Y,V,oe){var le=Y.split("");return oe&&ie(le,oe,{hiLevel:B}),le.reverse(),V&&V.reverse(),le.join("")},ie=function(Y,V,oe){var le,ne,Te,Se,Ie,se=-1,be=Y.length,Ge=0,O=[],W=B?A:T,K=[];for(j=!1,c=!1,l=!1,ne=0;ne<be;ne++)K[ne]=Z(Y[ne]);for(Te=0;Te<be;Te++){if(Ie=Ge,O[Te]=xe(Y,K,O,Te),le=240&(Ge=W[Ie][D[O[Te]]]),Ge&=15,V[Te]=Se=W[Ge][5],le>0)if(le===16){for(ne=se;ne<Te;ne++)V[ne]=1;se=-1}else se=-1;if(W[Ge][6])se===-1&&(se=Te);else if(se>-1){for(ne=se;ne<Te;ne++)V[ne]=Se;se=-1}K[Te]==="B"&&(V[Te]=0),oe.hiLevel|=Se}l&&function(ue,ae,Ee){for(var Ae=0;Ae<Ee;Ae++)if(ue[Ae]==="S"){ae[Ae]=B;for(var ke=Ae-1;ke>=0&&ue[ke]==="WS";ke--)ae[ke]=B}}(K,V,be)},ce=function(Y,V,oe,le,ne){if(!(ne.hiLevel<Y)){if(Y===1&&B===1&&!c)return V.reverse(),void(oe&&oe.reverse());for(var Te,Se,Ie,se,be=V.length,Ge=0;Ge<be;){if(le[Ge]>=Y){for(Ie=Ge+1;Ie<be&&le[Ie]>=Y;)Ie++;for(se=Ge,Se=Ie-1;se<Se;se++,Se--)Te=V[se],V[se]=V[Se],V[Se]=Te,oe&&(Te=oe[se],oe[se]=oe[Se],oe[Se]=Te);Ge=Ie}Ge++}}},De=function(Y,V,oe){var le=Y.split(""),ne={hiLevel:B};return oe||(oe=[]),ie(le,oe,ne),function(Te,Se,Ie){if(Ie.hiLevel!==0&&v)for(var se,be=0;be<Te.length;be++)Se[be]===1&&(se=M.indexOf(Te[be]))>=0&&(Te[be]=M[se+1])}(le,oe,ne),ce(2,le,V,oe,ne),ce(1,le,V,oe,ne),le.join("")};return this.__bidiEngine__.doBidiReorder=function(Y,V,oe){if(function(ne,Te){if(Te)for(var Se=0;Se<ne.length;Se++)Te[Se]=Se;m===void 0&&(m=Q(ne)),y===void 0&&(y=Q(ne))}(Y,V),h||!x||y)if(h&&x&&m^y)B=m?1:0,Y=$(Y,V,oe);else if(!h&&x&&y)B=m?1:0,Y=De(Y,V,oe),Y=$(Y,V);else if(!h||m||x||y){if(h&&!x&&m^y)Y=$(Y,V),m?(B=0,Y=De(Y,V,oe)):(B=1,Y=De(Y,V,oe),Y=$(Y,V));else if(h&&m&&!x&&y)B=1,Y=De(Y,V,oe),Y=$(Y,V);else if(!h&&!x&&m^y){var le=v;m?(B=1,Y=De(Y,V,oe),B=0,v=!1,Y=De(Y,V,oe),v=le):(B=0,Y=De(Y,V,oe),Y=$(Y,V),B=1,v=!1,Y=De(Y,V,oe),v=le,Y=$(Y,V))}}else B=0,Y=De(Y,V,oe);else B=m?1:0,Y=De(Y,V,oe);return Y},this.__bidiEngine__.setOptions=function(Y){Y&&(h=Y.isInputVisual,x=Y.isOutputVisual,m=Y.isInputRtl,y=Y.isOutputRtl,v=Y.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var r=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],i=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(a){var c=a.text,l=(a.x,a.y,a.options||{}),h=(a.mutex,l.lang,[]);if(l.isInputVisual=typeof l.isInputVisual!="boolean"||l.isInputVisual,i.setOptions(l),Object.prototype.toString.call(c)==="[object Array]"){var m=0;for(h=[],m=0;m<c.length;m+=1)Object.prototype.toString.call(c[m])==="[object Array]"?h.push([i.doBidiReorder(c[m][0]),c[m][1],c[m][2]]):h.push([i.doBidiReorder(c[m])]);a.text=h}else a.text=i.doBidiReorder(c);i.setOptions({isInputVisual:!0})}])}(_t),_t.API.TTFFont=function(){function t(r){var i;if(this.rawData=r,i=this.contents=new Xs(r),this.contents.pos=4,i.readString(4)==="ttcf")throw new Error("TTCF not supported.");i.pos=0,this.parse(),this.subset=new Px(this),this.registerTTF()}return t.open=function(r){return new t(r)},t.prototype.parse=function(){return this.directory=new Nx(this.contents),this.head=new Cx(this),this.name=new jx(this),this.cmap=new Eh(this),this.toUnicode={},this.hhea=new Sx(this),this.maxp=new _x(this),this.hmtx=new Lx(this),this.post=new Ix(this),this.os2=new Ex(this),this.loca=new Mx(this),this.glyf=new kx(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var r,i,a,c,l;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var h,m,x,y;for(y=[],h=0,m=(x=this.bbox).length;h<m;h++)r=x[h],y.push(Math.round(r*this.scaleFactor));return y}).call(this),this.stemV=0,this.post.exists?(a=255&(c=this.post.italic_angle),32768&(i=c>>16)&&(i=-(1+(65535^i))),this.italicAngle=+(i+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(l=this.familyClass)===1||l===2||l===3||l===4||l===5||l===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(r){var i;return((i=this.cmap.unicode)!=null?i.codeMap[r]:void 0)||0},t.prototype.widthOfGlyph=function(r){var i;return i=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(r).advance*i},t.prototype.widthOfString=function(r,i,a){var c,l,h,m;for(h=0,l=0,m=(r=""+r).length;0<=m?l<m:l>m;l=0<=m?++l:--l)c=r.charCodeAt(l),h+=this.widthOfGlyph(this.characterToGlyph(c))+a*(1e3/i)||0;return h*(i/1e3)},t.prototype.lineHeight=function(r,i){var a;return i==null&&(i=!1),a=i?this.lineGap:0,(this.ascender+a-this.decender)/1e3*r},t}();var zi,Xs=function(){function t(r){this.data=r??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(r){return this.data[this.pos++]=r},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(r){return this.writeByte(r>>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt32=function(){var r;return(r=this.readUInt32())>=2147483648?r-4294967296:r},t.prototype.writeInt32=function(r){return r<0&&(r+=4294967296),this.writeUInt32(r)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(r){return this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt16=function(){var r;return(r=this.readUInt16())>=32768?r-65536:r},t.prototype.writeInt16=function(r){return r<0&&(r+=65536),this.writeUInt16(r)},t.prototype.readString=function(r){var i,a;for(a=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)a[i]=String.fromCharCode(this.readByte());return a.join("")},t.prototype.writeString=function(r){var i,a,c;for(c=[],i=0,a=r.length;0<=a?i<a:i>a;i=0<=a?++i:--i)c.push(this.writeByte(r.charCodeAt(i)));return c},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(r){return this.writeInt16(r)},t.prototype.readLongLong=function(){var r,i,a,c,l,h,m,x;return r=this.readByte(),i=this.readByte(),a=this.readByte(),c=this.readByte(),l=this.readByte(),h=this.readByte(),m=this.readByte(),x=this.readByte(),128&r?-1*(72057594037927940*(255^r)+281474976710656*(255^i)+1099511627776*(255^a)+4294967296*(255^c)+16777216*(255^l)+65536*(255^h)+256*(255^m)+(255^x)+1):72057594037927940*r+281474976710656*i+1099511627776*a+4294967296*c+16777216*l+65536*h+256*m+x},t.prototype.writeLongLong=function(r){var i,a;return i=Math.floor(r/4294967296),a=4294967295&r,this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(r){return this.writeInt32(r)},t.prototype.read=function(r){var i,a;for(i=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push(this.readByte());return i},t.prototype.write=function(r){var i,a,c,l;for(l=[],a=0,c=r.length;a<c;a++)i=r[a],l.push(this.writeByte(i));return l},t}(),Nx=function(){var t;function r(i){var a,c,l;for(this.scalarType=i.readInt(),this.tableCount=i.readShort(),this.searchRange=i.readShort(),this.entrySelector=i.readShort(),this.rangeShift=i.readShort(),this.tables={},c=0,l=this.tableCount;0<=l?c<l:c>l;c=0<=l?++c:--c)a={tag:i.readString(4),checksum:i.readInt(),offset:i.readInt(),length:i.readInt()},this.tables[a.tag]=a}return r.prototype.encode=function(i){var a,c,l,h,m,x,y,v,C,T,A,D,_;for(_ in A=Object.keys(i).length,x=Math.log(2),C=16*Math.floor(Math.log(A)/x),h=Math.floor(C/x),v=16*A-C,(c=new Xs).writeInt(this.scalarType),c.writeShort(A),c.writeShort(C),c.writeShort(h),c.writeShort(v),l=16*A,y=c.pos+l,m=null,D=[],i)for(T=i[_],c.writeString(_),c.writeInt(t(T)),c.writeInt(y),c.writeInt(T.length),D=D.concat(T),_==="head"&&(m=y),y+=T.length;y%4;)D.push(0),y++;return c.write(D),a=2981146554-t(c.data),c.pos=m+8,c.writeUInt32(a),c.data},t=function(i){var a,c,l,h;for(i=Ih.call(i);i.length%4;)i.push(0);for(l=new Xs(i),c=0,a=0,h=i.length;a<h;a=a+=4)c+=l.readUInt32();return 4294967295&c},r}(),Ax={}.hasOwnProperty,ts=function(t,r){for(var i in r)Ax.call(r,i)&&(t[i]=r[i]);function a(){this.constructor=t}return a.prototype=r.prototype,t.prototype=new a,t.__super__=r.prototype,t};zi=function(){function t(r){var i;this.file=r,i=this.file.directory.tables[this.tag],this.exists=!!i,i&&(this.offset=i.offset,this.length=i.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var Cx=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return ts(r,zi),r.prototype.tag="head",r.prototype.parse=function(i){return i.pos=this.offset,this.version=i.readInt(),this.revision=i.readInt(),this.checkSumAdjustment=i.readInt(),this.magicNumber=i.readInt(),this.flags=i.readShort(),this.unitsPerEm=i.readShort(),this.created=i.readLongLong(),this.modified=i.readLongLong(),this.xMin=i.readShort(),this.yMin=i.readShort(),this.xMax=i.readShort(),this.yMax=i.readShort(),this.macStyle=i.readShort(),this.lowestRecPPEM=i.readShort(),this.fontDirectionHint=i.readShort(),this.indexToLocFormat=i.readShort(),this.glyphDataFormat=i.readShort()},r.prototype.encode=function(i){var a;return(a=new Xs).writeInt(this.version),a.writeInt(this.revision),a.writeInt(this.checkSumAdjustment),a.writeInt(this.magicNumber),a.writeShort(this.flags),a.writeShort(this.unitsPerEm),a.writeLongLong(this.created),a.writeLongLong(this.modified),a.writeShort(this.xMin),a.writeShort(this.yMin),a.writeShort(this.xMax),a.writeShort(this.yMax),a.writeShort(this.macStyle),a.writeShort(this.lowestRecPPEM),a.writeShort(this.fontDirectionHint),a.writeShort(i),a.writeShort(this.glyphDataFormat),a.data},r}(),a0=function(){function t(r,i){var a,c,l,h,m,x,y,v,C,T,A,D,_,M,I,j,B;switch(this.platformID=r.readUInt16(),this.encodingID=r.readShort(),this.offset=i+r.readInt(),C=r.pos,r.pos=this.offset,this.format=r.readUInt16(),this.length=r.readUInt16(),this.language=r.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(x=0;x<256;++x)this.codeMap[x]=r.readByte();break;case 4:for(A=r.readUInt16(),T=A/2,r.pos+=6,l=function(){var Z,Q;for(Q=[],x=Z=0;0<=T?Z<T:Z>T;x=0<=T?++Z:--Z)Q.push(r.readUInt16());return Q}(),r.pos+=2,_=function(){var Z,Q;for(Q=[],x=Z=0;0<=T?Z<T:Z>T;x=0<=T?++Z:--Z)Q.push(r.readUInt16());return Q}(),y=function(){var Z,Q;for(Q=[],x=Z=0;0<=T?Z<T:Z>T;x=0<=T?++Z:--Z)Q.push(r.readUInt16());return Q}(),v=function(){var Z,Q;for(Q=[],x=Z=0;0<=T?Z<T:Z>T;x=0<=T?++Z:--Z)Q.push(r.readUInt16());return Q}(),c=(this.length-r.pos+this.offset)/2,m=function(){var Z,Q;for(Q=[],x=Z=0;0<=c?Z<c:Z>c;x=0<=c?++Z:--Z)Q.push(r.readUInt16());return Q}(),x=I=0,B=l.length;I<B;x=++I)for(M=l[x],a=j=D=_[x];D<=M?j<=M:j>=M;a=D<=M?++j:--j)v[x]===0?h=a+y[x]:(h=m[v[x]/2+(a-D)-(T-x)]||0)!==0&&(h+=y[x]),this.codeMap[a]=65535&h}r.pos=C}return t.encode=function(r,i){var a,c,l,h,m,x,y,v,C,T,A,D,_,M,I,j,B,Z,Q,xe,$,ie,ce,De,Y,V,oe,le,ne,Te,Se,Ie,se,be,Ge,O,W,K,ue,ae,Ee,Ae,ke,ze,Be,et;switch(le=new Xs,h=Object.keys(r).sort(function(Fe,mt){return Fe-mt}),i){case"macroman":for(_=0,M=function(){var Fe=[];for(D=0;D<256;++D)Fe.push(0);return Fe}(),j={0:0},l={},ne=0,se=h.length;ne<se;ne++)j[ke=r[c=h[ne]]]==null&&(j[ke]=++_),l[c]={old:r[c],new:j[r[c]]},M[c]=j[r[c]];return le.writeUInt16(1),le.writeUInt16(0),le.writeUInt32(12),le.writeUInt16(0),le.writeUInt16(262),le.writeUInt16(0),le.write(M),{charMap:l,subtable:le.data,maxGlyphID:_+1};case"unicode":for(V=[],C=[],B=0,j={},a={},I=y=null,Te=0,be=h.length;Te<be;Te++)j[Q=r[c=h[Te]]]==null&&(j[Q]=++B),a[c]={old:Q,new:j[Q]},m=j[Q]-c,I!=null&&m===y||(I&&C.push(I),V.push(c),y=m),I=c;for(I&&C.push(I),C.push(65535),V.push(65535),De=2*(ce=V.length),ie=2*Math.pow(Math.log(ce)/Math.LN2,2),T=Math.log(ie/2)/Math.LN2,$=2*ce-ie,x=[],xe=[],A=[],D=Se=0,Ge=V.length;Se<Ge;D=++Se){if(Y=V[D],v=C[D],Y===65535){x.push(0),xe.push(0);break}if(Y-(oe=a[Y].new)>=32768)for(x.push(0),xe.push(2*(A.length+ce-D)),c=Ie=Y;Y<=v?Ie<=v:Ie>=v;c=Y<=v?++Ie:--Ie)A.push(a[c].new);else x.push(oe-Y),xe.push(0)}for(le.writeUInt16(3),le.writeUInt16(1),le.writeUInt32(12),le.writeUInt16(4),le.writeUInt16(16+8*ce+2*A.length),le.writeUInt16(0),le.writeUInt16(De),le.writeUInt16(ie),le.writeUInt16(T),le.writeUInt16($),Ee=0,O=C.length;Ee<O;Ee++)c=C[Ee],le.writeUInt16(c);for(le.writeUInt16(0),Ae=0,W=V.length;Ae<W;Ae++)c=V[Ae],le.writeUInt16(c);for(ze=0,K=x.length;ze<K;ze++)m=x[ze],le.writeUInt16(m);for(Be=0,ue=xe.length;Be<ue;Be++)Z=xe[Be],le.writeUInt16(Z);for(et=0,ae=A.length;et<ae;et++)_=A[et],le.writeUInt16(_);return{charMap:a,subtable:le.data,maxGlyphID:B+1}}},t}(),Eh=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return ts(r,zi),r.prototype.tag="cmap",r.prototype.parse=function(i){var a,c,l;for(i.pos=this.offset,this.version=i.readUInt16(),l=i.readUInt16(),this.tables=[],this.unicode=null,c=0;0<=l?c<l:c>l;c=0<=l?++c:--c)a=new a0(i,this.offset),this.tables.push(a),a.isUnicode&&this.unicode==null&&(this.unicode=a);return!0},r.encode=function(i,a){var c,l;return a==null&&(a="macroman"),c=a0.encode(i,a),(l=new Xs).writeUInt16(0),l.writeUInt16(1),c.table=l.data.concat(c.subtable),c},r}(),Sx=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return ts(r,zi),r.prototype.tag="hhea",r.prototype.parse=function(i){return i.pos=this.offset,this.version=i.readInt(),this.ascender=i.readShort(),this.decender=i.readShort(),this.lineGap=i.readShort(),this.advanceWidthMax=i.readShort(),this.minLeftSideBearing=i.readShort(),this.minRightSideBearing=i.readShort(),this.xMaxExtent=i.readShort(),this.caretSlopeRise=i.readShort(),this.caretSlopeRun=i.readShort(),this.caretOffset=i.readShort(),i.pos+=8,this.metricDataFormat=i.readShort(),this.numberOfMetrics=i.readUInt16()},r}(),Ex=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return ts(r,zi),r.prototype.tag="OS/2",r.prototype.parse=function(i){if(i.pos=this.offset,this.version=i.readUInt16(),this.averageCharWidth=i.readShort(),this.weightClass=i.readUInt16(),this.widthClass=i.readUInt16(),this.type=i.readShort(),this.ySubscriptXSize=i.readShort(),this.ySubscriptYSize=i.readShort(),this.ySubscriptXOffset=i.readShort(),this.ySubscriptYOffset=i.readShort(),this.ySuperscriptXSize=i.readShort(),this.ySuperscriptYSize=i.readShort(),this.ySuperscriptXOffset=i.readShort(),this.ySuperscriptYOffset=i.readShort(),this.yStrikeoutSize=i.readShort(),this.yStrikeoutPosition=i.readShort(),this.familyClass=i.readShort(),this.panose=function(){var a,c;for(c=[],a=0;a<10;++a)c.push(i.readByte());return c}(),this.charRange=function(){var a,c;for(c=[],a=0;a<4;++a)c.push(i.readInt());return c}(),this.vendorID=i.readString(4),this.selection=i.readShort(),this.firstCharIndex=i.readShort(),this.lastCharIndex=i.readShort(),this.version>0&&(this.ascent=i.readShort(),this.descent=i.readShort(),this.lineGap=i.readShort(),this.winAscent=i.readShort(),this.winDescent=i.readShort(),this.codePageRange=function(){var a,c;for(c=[],a=0;a<2;a=++a)c.push(i.readInt());return c}(),this.version>1))return this.xHeight=i.readShort(),this.capHeight=i.readShort(),this.defaultChar=i.readShort(),this.breakChar=i.readShort(),this.maxContext=i.readShort()},r}(),Ix=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return ts(r,zi),r.prototype.tag="post",r.prototype.parse=function(i){var a,c,l;switch(i.pos=this.offset,this.format=i.readInt(),this.italicAngle=i.readInt(),this.underlinePosition=i.readShort(),this.underlineThickness=i.readShort(),this.isFixedPitch=i.readInt(),this.minMemType42=i.readInt(),this.maxMemType42=i.readInt(),this.minMemType1=i.readInt(),this.maxMemType1=i.readInt(),this.format){case 65536:break;case 131072:var h;for(c=i.readUInt16(),this.glyphNameIndex=[],h=0;0<=c?h<c:h>c;h=0<=c?++h:--h)this.glyphNameIndex.push(i.readUInt16());for(this.names=[],l=[];i.pos<this.offset+this.length;)a=i.readByte(),l.push(this.names.push(i.readString(a)));return l;case 151552:return c=i.readUInt16(),this.offsets=i.read(c);case 196608:break;case 262144:return this.map=(function(){var m,x,y;for(y=[],h=m=0,x=this.file.maxp.numGlyphs;0<=x?m<x:m>x;h=0<=x?++m:--m)y.push(i.readUInt32());return y}).call(this)}},r}(),Tx=function(t,r){this.raw=t,this.length=t.length,this.platformID=r.platformID,this.encodingID=r.encodingID,this.languageID=r.languageID},jx=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return ts(r,zi),r.prototype.tag="name",r.prototype.parse=function(i){var a,c,l,h,m,x,y,v,C,T,A;for(i.pos=this.offset,i.readShort(),a=i.readShort(),x=i.readShort(),c=[],h=0;0<=a?h<a:h>a;h=0<=a?++h:--h)c.push({platformID:i.readShort(),encodingID:i.readShort(),languageID:i.readShort(),nameID:i.readShort(),length:i.readShort(),offset:this.offset+x+i.readShort()});for(y={},h=C=0,T=c.length;C<T;h=++C)l=c[h],i.pos=l.offset,v=i.readString(l.length),m=new Tx(v,l),y[A=l.nameID]==null&&(y[A]=[]),y[l.nameID].push(m);this.strings=y,this.copyright=y[0],this.fontFamily=y[1],this.fontSubfamily=y[2],this.uniqueSubfamily=y[3],this.fontName=y[4],this.version=y[5];try{this.postscriptName=y[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=y[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=y[7],this.manufacturer=y[8],this.designer=y[9],this.description=y[10],this.vendorUrl=y[11],this.designerUrl=y[12],this.license=y[13],this.licenseUrl=y[14],this.preferredFamily=y[15],this.preferredSubfamily=y[17],this.compatibleFull=y[18],this.sampleText=y[19]},r}(),_x=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return ts(r,zi),r.prototype.tag="maxp",r.prototype.parse=function(i){return i.pos=this.offset,this.version=i.readInt(),this.numGlyphs=i.readUInt16(),this.maxPoints=i.readUInt16(),this.maxContours=i.readUInt16(),this.maxCompositePoints=i.readUInt16(),this.maxComponentContours=i.readUInt16(),this.maxZones=i.readUInt16(),this.maxTwilightPoints=i.readUInt16(),this.maxStorage=i.readUInt16(),this.maxFunctionDefs=i.readUInt16(),this.maxInstructionDefs=i.readUInt16(),this.maxStackElements=i.readUInt16(),this.maxSizeOfInstructions=i.readUInt16(),this.maxComponentElements=i.readUInt16(),this.maxComponentDepth=i.readUInt16()},r}(),Lx=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return ts(r,zi),r.prototype.tag="hmtx",r.prototype.parse=function(i){var a,c,l,h,m,x,y;for(i.pos=this.offset,this.metrics=[],a=0,x=this.file.hhea.numberOfMetrics;0<=x?a<x:a>x;a=0<=x?++a:--a)this.metrics.push({advance:i.readUInt16(),lsb:i.readInt16()});for(l=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var v,C;for(C=[],a=v=0;0<=l?v<l:v>l;a=0<=l?++v:--v)C.push(i.readInt16());return C}(),this.widths=(function(){var v,C,T,A;for(A=[],v=0,C=(T=this.metrics).length;v<C;v++)h=T[v],A.push(h.advance);return A}).call(this),c=this.widths[this.widths.length-1],y=[],a=m=0;0<=l?m<l:m>l;a=0<=l?++m:--m)y.push(this.widths.push(c));return y},r.prototype.forGlyph=function(i){return i in this.metrics?this.metrics[i]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[i-this.metrics.length]}},r}(),Ih=[].slice,kx=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return ts(r,zi),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(i){var a,c,l,h,m,x,y,v,C,T;return i in this.cache?this.cache[i]:(h=this.file.loca,a=this.file.contents,c=h.indexOf(i),(l=h.lengthOf(i))===0?this.cache[i]=null:(a.pos=this.offset+c,m=(x=new Xs(a.read(l))).readShort(),v=x.readShort(),T=x.readShort(),y=x.readShort(),C=x.readShort(),this.cache[i]=m===-1?new Ox(x,v,T,y,C):new Dx(x,m,v,T,y,C),this.cache[i]))},r.prototype.encode=function(i,a,c){var l,h,m,x,y;for(m=[],h=[],x=0,y=a.length;x<y;x++)l=i[a[x]],h.push(m.length),l&&(m=m.concat(l.encode(c)));return h.push(m.length),{table:m,offsets:h}},r}(),Dx=function(){function t(r,i,a,c,l,h){this.raw=r,this.numberOfContours=i,this.xMin=a,this.yMin=c,this.xMax=l,this.yMax=h,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Ox=function(){function t(r,i,a,c,l){var h,m;for(this.raw=r,this.xMin=i,this.yMin=a,this.xMax=c,this.yMax=l,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],h=this.raw;m=h.readShort(),this.glyphOffsets.push(h.pos),this.glyphIDs.push(h.readUInt16()),32&m;)h.pos+=1&m?4:2,128&m?h.pos+=8:64&m?h.pos+=4:8&m&&(h.pos+=2)}return t.prototype.encode=function(){var r,i,a;for(i=new Xs(Ih.call(this.raw.data)),r=0,a=this.glyphIDs.length;r<a;++r)i.pos=this.glyphOffsets[r];return i.data},t}(),Mx=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return ts(r,zi),r.prototype.tag="loca",r.prototype.parse=function(i){var a,c;return i.pos=this.offset,a=this.file.head.indexToLocFormat,this.offsets=a===0?(function(){var l,h;for(h=[],c=0,l=this.length;c<l;c+=2)h.push(2*i.readUInt16());return h}).call(this):(function(){var l,h;for(h=[],c=0,l=this.length;c<l;c+=4)h.push(i.readUInt32());return h}).call(this)},r.prototype.indexOf=function(i){return this.offsets[i]},r.prototype.lengthOf=function(i){return this.offsets[i+1]-this.offsets[i]},r.prototype.encode=function(i,a){for(var c=new Uint32Array(this.offsets.length),l=0,h=0,m=0;m<c.length;++m)if(c[m]=l,h<a.length&&a[h]==m){++h,c[m]=l;var x=this.offsets[m],y=this.offsets[m+1]-x;y>0&&(l+=y)}for(var v=new Array(4*c.length),C=0;C<c.length;++C)v[4*C+3]=255&c[C],v[4*C+2]=(65280&c[C])>>8,v[4*C+1]=(16711680&c[C])>>16,v[4*C]=(4278190080&c[C])>>24;return v},r}(),Px=function(){function t(r){this.font=r,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var r,i,a,c,l;for(i in c=this.font.cmap.tables[0].codeMap,r={},l=this.subset)a=l[i],r[i]=c[a];return r},t.prototype.glyphsFor=function(r){var i,a,c,l,h,m,x;for(c={},h=0,m=r.length;h<m;h++)c[l=r[h]]=this.font.glyf.glyphFor(l);for(l in i=[],c)(a=c[l])!=null&&a.compound&&i.push.apply(i,a.glyphIDs);if(i.length>0)for(l in x=this.glyphsFor(i))a=x[l],c[l]=a;return c},t.prototype.encode=function(r,i){var a,c,l,h,m,x,y,v,C,T,A,D,_,M,I;for(c in a=Eh.encode(this.generateCmap(),"unicode"),h=this.glyphsFor(r),A={0:0},I=a.charMap)A[(x=I[c]).old]=x.new;for(D in T=a.maxGlyphID,h)D in A||(A[D]=T++);return v=function(j){var B,Z;for(B in Z={},j)Z[j[B]]=B;return Z}(A),C=Object.keys(v).sort(function(j,B){return j-B}),_=function(){var j,B,Z;for(Z=[],j=0,B=C.length;j<B;j++)m=C[j],Z.push(v[m]);return Z}(),l=this.font.glyf.encode(h,_,A),y=this.font.loca.encode(l.offsets,_),M={cmap:this.font.cmap.raw(),glyf:l.table,loca:y,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(i)},this.font.os2.exists&&(M["OS/2"]=this.font.os2.raw()),this.font.directory.encode(M)},t}();_t.API.PDFObject=function(){var t;function r(){}return t=function(i,a){return(Array(a+1).join("0")+i).slice(-a)},r.convert=function(i){var a,c,l,h;if(Array.isArray(i))return"["+function(){var m,x,y;for(y=[],m=0,x=i.length;m<x;m++)a=i[m],y.push(r.convert(a));return y}().join(" ")+"]";if(typeof i=="string")return"/"+i;if(i!=null&&i.isString)return"("+i+")";if(i instanceof Date)return"(D:"+t(i.getUTCFullYear(),4)+t(i.getUTCMonth(),2)+t(i.getUTCDate(),2)+t(i.getUTCHours(),2)+t(i.getUTCMinutes(),2)+t(i.getUTCSeconds(),2)+"Z)";if({}.toString.call(i)==="[object Object]"){for(c in l=["<<"],i)h=i[c],l.push("/"+c+" "+r.convert(h));return l.push(">>"),l.join(`
`)}return""+i},r}();var Lo={},Rx=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Th={},gi={};let wd;const Bx=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];gi.getSymbolSize=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return r*4+17};gi.getSymbolTotalCodewords=function(r){return Bx[r]};gi.getBCHDigit=function(t){let r=0;for(;t!==0;)r++,t>>>=1;return r};gi.setToSJISFunction=function(r){if(typeof r!="function")throw new Error('"toSJISFunc" is not a valid function.');wd=r};gi.isKanjiModeEnabled=function(){return typeof wd<"u"};gi.toSJIS=function(r){return wd(r)};var Rl={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+i)}}t.isValid=function(a){return a&&typeof a.bit<"u"&&a.bit>=0&&a.bit<4},t.from=function(a,c){if(t.isValid(a))return a;try{return r(a)}catch{return c}}})(Rl);function jh(){this.buffer=[],this.length=0}jh.prototype={get:function(t){const r=Math.floor(t/8);return(this.buffer[r]>>>7-t%8&1)===1},put:function(t,r){for(let i=0;i<r;i++)this.putBit((t>>>r-i-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),t&&(this.buffer[r]|=128>>>this.length%8),this.length++}};var Fx=jh;function ko(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}ko.prototype.set=function(t,r,i,a){const c=t*this.size+r;this.data[c]=i,a&&(this.reservedBit[c]=!0)};ko.prototype.get=function(t,r){return this.data[t*this.size+r]};ko.prototype.xor=function(t,r,i){this.data[t*this.size+r]^=i};ko.prototype.isReserved=function(t,r){return this.reservedBit[t*this.size+r]};var Ux=ko,_h={};(function(t){const r=gi.getSymbolSize;t.getRowColCoords=function(a){if(a===1)return[];const c=Math.floor(a/7)+2,l=r(a),h=l===145?26:Math.ceil((l-13)/(2*c-2))*2,m=[l-7];for(let x=1;x<c-1;x++)m[x]=m[x-1]-h;return m.push(6),m.reverse()},t.getPositions=function(a){const c=[],l=t.getRowColCoords(a),h=l.length;for(let m=0;m<h;m++)for(let x=0;x<h;x++)m===0&&x===0||m===0&&x===h-1||m===h-1&&x===0||c.push([l[m],l[x]]);return c}})(_h);var Lh={};const zx=gi.getSymbolSize,o0=7;Lh.getPositions=function(r){const i=zx(r);return[[0,0],[i-o0,0],[0,i-o0]]};var kh={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const r={N1:3,N2:3,N3:40,N4:10};t.isValid=function(c){return c!=null&&c!==""&&!isNaN(c)&&c>=0&&c<=7},t.from=function(c){return t.isValid(c)?parseInt(c,10):void 0},t.getPenaltyN1=function(c){const l=c.size;let h=0,m=0,x=0,y=null,v=null;for(let C=0;C<l;C++){m=x=0,y=v=null;for(let T=0;T<l;T++){let A=c.get(C,T);A===y?m++:(m>=5&&(h+=r.N1+(m-5)),y=A,m=1),A=c.get(T,C),A===v?x++:(x>=5&&(h+=r.N1+(x-5)),v=A,x=1)}m>=5&&(h+=r.N1+(m-5)),x>=5&&(h+=r.N1+(x-5))}return h},t.getPenaltyN2=function(c){const l=c.size;let h=0;for(let m=0;m<l-1;m++)for(let x=0;x<l-1;x++){const y=c.get(m,x)+c.get(m,x+1)+c.get(m+1,x)+c.get(m+1,x+1);(y===4||y===0)&&h++}return h*r.N2},t.getPenaltyN3=function(c){const l=c.size;let h=0,m=0,x=0;for(let y=0;y<l;y++){m=x=0;for(let v=0;v<l;v++)m=m<<1&2047|c.get(y,v),v>=10&&(m===1488||m===93)&&h++,x=x<<1&2047|c.get(v,y),v>=10&&(x===1488||x===93)&&h++}return h*r.N3},t.getPenaltyN4=function(c){let l=0;const h=c.data.length;for(let x=0;x<h;x++)l+=c.data[x];return Math.abs(Math.ceil(l*100/h/5)-10)*r.N4};function i(a,c,l){switch(a){case t.Patterns.PATTERN000:return(c+l)%2===0;case t.Patterns.PATTERN001:return c%2===0;case t.Patterns.PATTERN010:return l%3===0;case t.Patterns.PATTERN011:return(c+l)%3===0;case t.Patterns.PATTERN100:return(Math.floor(c/2)+Math.floor(l/3))%2===0;case t.Patterns.PATTERN101:return c*l%2+c*l%3===0;case t.Patterns.PATTERN110:return(c*l%2+c*l%3)%2===0;case t.Patterns.PATTERN111:return(c*l%3+(c+l)%2)%2===0;default:throw new Error("bad maskPattern:"+a)}}t.applyMask=function(c,l){const h=l.size;for(let m=0;m<h;m++)for(let x=0;x<h;x++)l.isReserved(x,m)||l.xor(x,m,i(c,x,m))},t.getBestMask=function(c,l){const h=Object.keys(t.Patterns).length;let m=0,x=1/0;for(let y=0;y<h;y++){l(y),t.applyMask(y,c);const v=t.getPenaltyN1(c)+t.getPenaltyN2(c)+t.getPenaltyN3(c)+t.getPenaltyN4(c);t.applyMask(y,c),v<x&&(x=v,m=y)}return m}})(kh);var Bl={};const Hs=Rl,al=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],ol=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Bl.getBlocksCount=function(r,i){switch(i){case Hs.L:return al[(r-1)*4+0];case Hs.M:return al[(r-1)*4+1];case Hs.Q:return al[(r-1)*4+2];case Hs.H:return al[(r-1)*4+3];default:return}};Bl.getTotalCodewordsCount=function(r,i){switch(i){case Hs.L:return ol[(r-1)*4+0];case Hs.M:return ol[(r-1)*4+1];case Hs.Q:return ol[(r-1)*4+2];case Hs.H:return ol[(r-1)*4+3];default:return}};var Dh={},Fl={};const wo=new Uint8Array(512),Sl=new Uint8Array(256);(function(){let r=1;for(let i=0;i<255;i++)wo[i]=r,Sl[r]=i,r<<=1,r&256&&(r^=285);for(let i=255;i<512;i++)wo[i]=wo[i-255]})();Fl.log=function(r){if(r<1)throw new Error("log("+r+")");return Sl[r]};Fl.exp=function(r){return wo[r]};Fl.mul=function(r,i){return r===0||i===0?0:wo[Sl[r]+Sl[i]]};(function(t){const r=Fl;t.mul=function(a,c){const l=new Uint8Array(a.length+c.length-1);for(let h=0;h<a.length;h++)for(let m=0;m<c.length;m++)l[h+m]^=r.mul(a[h],c[m]);return l},t.mod=function(a,c){let l=new Uint8Array(a);for(;l.length-c.length>=0;){const h=l[0];for(let x=0;x<c.length;x++)l[x]^=r.mul(c[x],h);let m=0;for(;m<l.length&&l[m]===0;)m++;l=l.slice(m)}return l},t.generateECPolynomial=function(a){let c=new Uint8Array([1]);for(let l=0;l<a;l++)c=t.mul(c,new Uint8Array([1,r.exp(l)]));return c}})(Dh);const Oh=Dh;function vd(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}vd.prototype.initialize=function(r){this.degree=r,this.genPoly=Oh.generateECPolynomial(this.degree)};vd.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(r.length+this.degree);i.set(r);const a=Oh.mod(i,this.genPoly),c=this.degree-a.length;if(c>0){const l=new Uint8Array(this.degree);return l.set(a,c),l}return a};var qx=vd,Mh={},Js={},Nd={};Nd.isValid=function(r){return!isNaN(r)&&r>=1&&r<=40};var rs={};const Ph="[0-9]+",Hx="[A-Z $%*+\\-./:]+";let To="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";To=To.replace(/u/g,"\\u");const Vx="(?:(?![A-Z0-9 $%*+\\-./:]|"+To+`)(?:.|[\r
]))+`;rs.KANJI=new RegExp(To,"g");rs.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");rs.BYTE=new RegExp(Vx,"g");rs.NUMERIC=new RegExp(Ph,"g");rs.ALPHANUMERIC=new RegExp(Hx,"g");const Gx=new RegExp("^"+To+"$"),Wx=new RegExp("^"+Ph+"$"),Yx=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");rs.testKanji=function(r){return Gx.test(r)};rs.testNumeric=function(r){return Wx.test(r)};rs.testAlphanumeric=function(r){return Yx.test(r)};(function(t){const r=Nd,i=rs;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(l,h){if(!l.ccBits)throw new Error("Invalid mode: "+l);if(!r.isValid(h))throw new Error("Invalid version: "+h);return h>=1&&h<10?l.ccBits[0]:h<27?l.ccBits[1]:l.ccBits[2]},t.getBestModeForData=function(l){return i.testNumeric(l)?t.NUMERIC:i.testAlphanumeric(l)?t.ALPHANUMERIC:i.testKanji(l)?t.KANJI:t.BYTE},t.toString=function(l){if(l&&l.id)return l.id;throw new Error("Invalid mode")},t.isValid=function(l){return l&&l.bit&&l.ccBits};function a(c){if(typeof c!="string")throw new Error("Param is not a string");switch(c.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+c)}}t.from=function(l,h){if(t.isValid(l))return l;try{return a(l)}catch{return h}}})(Js);(function(t){const r=gi,i=Bl,a=Rl,c=Js,l=Nd,h=7973,m=r.getBCHDigit(h);function x(T,A,D){for(let _=1;_<=40;_++)if(A<=t.getCapacity(_,D,T))return _}function y(T,A){return c.getCharCountIndicator(T,A)+4}function v(T,A){let D=0;return T.forEach(function(_){const M=y(_.mode,A);D+=M+_.getBitsLength()}),D}function C(T,A){for(let D=1;D<=40;D++)if(v(T,D)<=t.getCapacity(D,A,c.MIXED))return D}t.from=function(A,D){return l.isValid(A)?parseInt(A,10):D},t.getCapacity=function(A,D,_){if(!l.isValid(A))throw new Error("Invalid QR Code version");typeof _>"u"&&(_=c.BYTE);const M=r.getSymbolTotalCodewords(A),I=i.getTotalCodewordsCount(A,D),j=(M-I)*8;if(_===c.MIXED)return j;const B=j-y(_,A);switch(_){case c.NUMERIC:return Math.floor(B/10*3);case c.ALPHANUMERIC:return Math.floor(B/11*2);case c.KANJI:return Math.floor(B/13);case c.BYTE:default:return Math.floor(B/8)}},t.getBestVersionForData=function(A,D){let _;const M=a.from(D,a.M);if(Array.isArray(A)){if(A.length>1)return C(A,M);if(A.length===0)return 1;_=A[0]}else _=A;return x(_.mode,_.getLength(),M)},t.getEncodedBits=function(A){if(!l.isValid(A)||A<7)throw new Error("Invalid QR Code version");let D=A<<12;for(;r.getBCHDigit(D)-m>=0;)D^=h<<r.getBCHDigit(D)-m;return A<<12|D}})(Mh);var Rh={};const Jc=gi,Bh=1335,Xx=21522,l0=Jc.getBCHDigit(Bh);Rh.getEncodedBits=function(r,i){const a=r.bit<<3|i;let c=a<<10;for(;Jc.getBCHDigit(c)-l0>=0;)c^=Bh<<Jc.getBCHDigit(c)-l0;return(a<<10|c)^Xx};var Fh={};const Zx=Js;function $a(t){this.mode=Zx.NUMERIC,this.data=t.toString()}$a.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)};$a.prototype.getLength=function(){return this.data.length};$a.prototype.getBitsLength=function(){return $a.getBitsLength(this.data.length)};$a.prototype.write=function(r){let i,a,c;for(i=0;i+3<=this.data.length;i+=3)a=this.data.substr(i,3),c=parseInt(a,10),r.put(c,10);const l=this.data.length-i;l>0&&(a=this.data.substr(i),c=parseInt(a,10),r.put(c,l*3+1))};var $x=$a;const Kx=Js,yc=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Ka(t){this.mode=Kx.ALPHANUMERIC,this.data=t}Ka.getBitsLength=function(r){return 11*Math.floor(r/2)+6*(r%2)};Ka.prototype.getLength=function(){return this.data.length};Ka.prototype.getBitsLength=function(){return Ka.getBitsLength(this.data.length)};Ka.prototype.write=function(r){let i;for(i=0;i+2<=this.data.length;i+=2){let a=yc.indexOf(this.data[i])*45;a+=yc.indexOf(this.data[i+1]),r.put(a,11)}this.data.length%2&&r.put(yc.indexOf(this.data[i]),6)};var Qx=Ka;const Jx=Js;function Qa(t){this.mode=Jx.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}Qa.getBitsLength=function(r){return r*8};Qa.prototype.getLength=function(){return this.data.length};Qa.prototype.getBitsLength=function(){return Qa.getBitsLength(this.data.length)};Qa.prototype.write=function(t){for(let r=0,i=this.data.length;r<i;r++)t.put(this.data[r],8)};var e5=Qa;const t5=Js,r5=gi;function Ja(t){this.mode=t5.KANJI,this.data=t}Ja.getBitsLength=function(r){return r*13};Ja.prototype.getLength=function(){return this.data.length};Ja.prototype.getBitsLength=function(){return Ja.getBitsLength(this.data.length)};Ja.prototype.write=function(t){let r;for(r=0;r<this.data.length;r++){let i=r5.toSJIS(this.data[r]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw new Error("Invalid SJIS character: "+this.data[r]+`
Make sure your charset is UTF-8`);i=(i>>>8&255)*192+(i&255),t.put(i,13)}};var n5=Ja,Uh={exports:{}};(function(t){var r={single_source_shortest_paths:function(i,a,c){var l={},h={};h[a]=0;var m=r.PriorityQueue.make();m.push(a,0);for(var x,y,v,C,T,A,D,_,M;!m.empty();){x=m.pop(),y=x.value,C=x.cost,T=i[y]||{};for(v in T)T.hasOwnProperty(v)&&(A=T[v],D=C+A,_=h[v],M=typeof h[v]>"u",(M||_>D)&&(h[v]=D,m.push(v,D),l[v]=y))}if(typeof c<"u"&&typeof h[c]>"u"){var I=["Could not find a path from ",a," to ",c,"."].join("");throw new Error(I)}return l},extract_shortest_path_from_predecessor_list:function(i,a){for(var c=[],l=a;l;)c.push(l),i[l],l=i[l];return c.reverse(),c},find_path:function(i,a,c){var l=r.single_source_shortest_paths(i,a,c);return r.extract_shortest_path_from_predecessor_list(l,c)},PriorityQueue:{make:function(i){var a=r.PriorityQueue,c={},l;i=i||{};for(l in a)a.hasOwnProperty(l)&&(c[l]=a[l]);return c.queue=[],c.sorter=i.sorter||a.default_sorter,c},default_sorter:function(i,a){return i.cost-a.cost},push:function(i,a){var c={value:i,cost:a};this.queue.push(c),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=r})(Uh);var i5=Uh.exports;(function(t){const r=Js,i=$x,a=Qx,c=e5,l=n5,h=rs,m=gi,x=i5;function y(I){return unescape(encodeURIComponent(I)).length}function v(I,j,B){const Z=[];let Q;for(;(Q=I.exec(B))!==null;)Z.push({data:Q[0],index:Q.index,mode:j,length:Q[0].length});return Z}function C(I){const j=v(h.NUMERIC,r.NUMERIC,I),B=v(h.ALPHANUMERIC,r.ALPHANUMERIC,I);let Z,Q;return m.isKanjiModeEnabled()?(Z=v(h.BYTE,r.BYTE,I),Q=v(h.KANJI,r.KANJI,I)):(Z=v(h.BYTE_KANJI,r.BYTE,I),Q=[]),j.concat(B,Z,Q).sort(function($,ie){return $.index-ie.index}).map(function($){return{data:$.data,mode:$.mode,length:$.length}})}function T(I,j){switch(j){case r.NUMERIC:return i.getBitsLength(I);case r.ALPHANUMERIC:return a.getBitsLength(I);case r.KANJI:return l.getBitsLength(I);case r.BYTE:return c.getBitsLength(I)}}function A(I){return I.reduce(function(j,B){const Z=j.length-1>=0?j[j.length-1]:null;return Z&&Z.mode===B.mode?(j[j.length-1].data+=B.data,j):(j.push(B),j)},[])}function D(I){const j=[];for(let B=0;B<I.length;B++){const Z=I[B];switch(Z.mode){case r.NUMERIC:j.push([Z,{data:Z.data,mode:r.ALPHANUMERIC,length:Z.length},{data:Z.data,mode:r.BYTE,length:Z.length}]);break;case r.ALPHANUMERIC:j.push([Z,{data:Z.data,mode:r.BYTE,length:Z.length}]);break;case r.KANJI:j.push([Z,{data:Z.data,mode:r.BYTE,length:y(Z.data)}]);break;case r.BYTE:j.push([{data:Z.data,mode:r.BYTE,length:y(Z.data)}])}}return j}function _(I,j){const B={},Z={start:{}};let Q=["start"];for(let xe=0;xe<I.length;xe++){const $=I[xe],ie=[];for(let ce=0;ce<$.length;ce++){const De=$[ce],Y=""+xe+ce;ie.push(Y),B[Y]={node:De,lastCount:0},Z[Y]={};for(let V=0;V<Q.length;V++){const oe=Q[V];B[oe]&&B[oe].node.mode===De.mode?(Z[oe][Y]=T(B[oe].lastCount+De.length,De.mode)-T(B[oe].lastCount,De.mode),B[oe].lastCount+=De.length):(B[oe]&&(B[oe].lastCount=De.length),Z[oe][Y]=T(De.length,De.mode)+4+r.getCharCountIndicator(De.mode,j))}}Q=ie}for(let xe=0;xe<Q.length;xe++)Z[Q[xe]].end=0;return{map:Z,table:B}}function M(I,j){let B;const Z=r.getBestModeForData(I);if(B=r.from(j,Z),B!==r.BYTE&&B.bit<Z.bit)throw new Error('"'+I+'" cannot be encoded with mode '+r.toString(B)+`.
 Suggested mode is: `+r.toString(Z));switch(B===r.KANJI&&!m.isKanjiModeEnabled()&&(B=r.BYTE),B){case r.NUMERIC:return new i(I);case r.ALPHANUMERIC:return new a(I);case r.KANJI:return new l(I);case r.BYTE:return new c(I)}}t.fromArray=function(j){return j.reduce(function(B,Z){return typeof Z=="string"?B.push(M(Z,null)):Z.data&&B.push(M(Z.data,Z.mode)),B},[])},t.fromString=function(j,B){const Z=C(j,m.isKanjiModeEnabled()),Q=D(Z),xe=_(Q,B),$=x.find_path(xe.map,"start","end"),ie=[];for(let ce=1;ce<$.length-1;ce++)ie.push(xe.table[$[ce]].node);return t.fromArray(A(ie))},t.rawSplit=function(j){return t.fromArray(C(j,m.isKanjiModeEnabled()))}})(Fh);const Ul=gi,bc=Rl,s5=Fx,a5=Ux,o5=_h,l5=Lh,ed=kh,td=Bl,c5=qx,El=Mh,d5=Rh,u5=Js,wc=Fh;function h5(t,r){const i=t.size,a=l5.getPositions(r);for(let c=0;c<a.length;c++){const l=a[c][0],h=a[c][1];for(let m=-1;m<=7;m++)if(!(l+m<=-1||i<=l+m))for(let x=-1;x<=7;x++)h+x<=-1||i<=h+x||(m>=0&&m<=6&&(x===0||x===6)||x>=0&&x<=6&&(m===0||m===6)||m>=2&&m<=4&&x>=2&&x<=4?t.set(l+m,h+x,!0,!0):t.set(l+m,h+x,!1,!0))}}function f5(t){const r=t.size;for(let i=8;i<r-8;i++){const a=i%2===0;t.set(i,6,a,!0),t.set(6,i,a,!0)}}function g5(t,r){const i=o5.getPositions(r);for(let a=0;a<i.length;a++){const c=i[a][0],l=i[a][1];for(let h=-2;h<=2;h++)for(let m=-2;m<=2;m++)h===-2||h===2||m===-2||m===2||h===0&&m===0?t.set(c+h,l+m,!0,!0):t.set(c+h,l+m,!1,!0)}}function m5(t,r){const i=t.size,a=El.getEncodedBits(r);let c,l,h;for(let m=0;m<18;m++)c=Math.floor(m/3),l=m%3+i-8-3,h=(a>>m&1)===1,t.set(c,l,h,!0),t.set(l,c,h,!0)}function vc(t,r,i){const a=t.size,c=d5.getEncodedBits(r,i);let l,h;for(l=0;l<15;l++)h=(c>>l&1)===1,l<6?t.set(l,8,h,!0):l<8?t.set(l+1,8,h,!0):t.set(a-15+l,8,h,!0),l<8?t.set(8,a-l-1,h,!0):l<9?t.set(8,15-l-1+1,h,!0):t.set(8,15-l-1,h,!0);t.set(a-8,8,1,!0)}function p5(t,r){const i=t.size;let a=-1,c=i-1,l=7,h=0;for(let m=i-1;m>0;m-=2)for(m===6&&m--;;){for(let x=0;x<2;x++)if(!t.isReserved(c,m-x)){let y=!1;h<r.length&&(y=(r[h]>>>l&1)===1),t.set(c,m-x,y),l--,l===-1&&(h++,l=7)}if(c+=a,c<0||i<=c){c-=a,a=-a;break}}}function x5(t,r,i){const a=new s5;i.forEach(function(x){a.put(x.mode.bit,4),a.put(x.getLength(),u5.getCharCountIndicator(x.mode,t)),x.write(a)});const c=Ul.getSymbolTotalCodewords(t),l=td.getTotalCodewordsCount(t,r),h=(c-l)*8;for(a.getLengthInBits()+4<=h&&a.put(0,4);a.getLengthInBits()%8!==0;)a.putBit(0);const m=(h-a.getLengthInBits())/8;for(let x=0;x<m;x++)a.put(x%2?17:236,8);return y5(a,t,r)}function y5(t,r,i){const a=Ul.getSymbolTotalCodewords(r),c=td.getTotalCodewordsCount(r,i),l=a-c,h=td.getBlocksCount(r,i),m=a%h,x=h-m,y=Math.floor(a/h),v=Math.floor(l/h),C=v+1,T=y-v,A=new c5(T);let D=0;const _=new Array(h),M=new Array(h);let I=0;const j=new Uint8Array(t.buffer);for(let $=0;$<h;$++){const ie=$<x?v:C;_[$]=j.slice(D,D+ie),M[$]=A.encode(_[$]),D+=ie,I=Math.max(I,ie)}const B=new Uint8Array(a);let Z=0,Q,xe;for(Q=0;Q<I;Q++)for(xe=0;xe<h;xe++)Q<_[xe].length&&(B[Z++]=_[xe][Q]);for(Q=0;Q<T;Q++)for(xe=0;xe<h;xe++)B[Z++]=M[xe][Q];return B}function b5(t,r,i,a){let c;if(Array.isArray(t))c=wc.fromArray(t);else if(typeof t=="string"){let y=r;if(!y){const v=wc.rawSplit(t);y=El.getBestVersionForData(v,i)}c=wc.fromString(t,y||40)}else throw new Error("Invalid data");const l=El.getBestVersionForData(c,i);if(!l)throw new Error("The amount of data is too big to be stored in a QR Code");if(!r)r=l;else if(r<l)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+l+`.
`);const h=x5(r,i,c),m=Ul.getSymbolSize(r),x=new a5(m);return h5(x,r),f5(x),g5(x,r),vc(x,i,0),r>=7&&m5(x,r),p5(x,h),isNaN(a)&&(a=ed.getBestMask(x,vc.bind(null,x,i))),ed.applyMask(a,x),vc(x,i,a),{modules:x,version:r,errorCorrectionLevel:i,maskPattern:a,segments:c}}Th.create=function(r,i){if(typeof r>"u"||r==="")throw new Error("No input text");let a=bc.M,c,l;return typeof i<"u"&&(a=bc.from(i.errorCorrectionLevel,bc.M),c=El.from(i.version),l=ed.from(i.maskPattern),i.toSJISFunc&&Ul.setToSJISFunction(i.toSJISFunc)),b5(r,c,a,l)};var zh={},Ad={};(function(t){function r(i){if(typeof i=="number"&&(i=i.toString()),typeof i!="string")throw new Error("Color should be defined as hex string");let a=i.slice().replace("#","").split("");if(a.length<3||a.length===5||a.length>8)throw new Error("Invalid hex color: "+i);(a.length===3||a.length===4)&&(a=Array.prototype.concat.apply([],a.map(function(l){return[l,l]}))),a.length===6&&a.push("F","F");const c=parseInt(a.join(""),16);return{r:c>>24&255,g:c>>16&255,b:c>>8&255,a:c&255,hex:"#"+a.slice(0,6).join("")}}t.getOptions=function(a){a||(a={}),a.color||(a.color={});const c=typeof a.margin>"u"||a.margin===null||a.margin<0?4:a.margin,l=a.width&&a.width>=21?a.width:void 0,h=a.scale||4;return{width:l,scale:l?4:h,margin:c,color:{dark:r(a.color.dark||"#000000ff"),light:r(a.color.light||"#ffffffff")},type:a.type,rendererOpts:a.rendererOpts||{}}},t.getScale=function(a,c){return c.width&&c.width>=a+c.margin*2?c.width/(a+c.margin*2):c.scale},t.getImageWidth=function(a,c){const l=t.getScale(a,c);return Math.floor((a+c.margin*2)*l)},t.qrToImageData=function(a,c,l){const h=c.modules.size,m=c.modules.data,x=t.getScale(h,l),y=Math.floor((h+l.margin*2)*x),v=l.margin*x,C=[l.color.light,l.color.dark];for(let T=0;T<y;T++)for(let A=0;A<y;A++){let D=(T*y+A)*4,_=l.color.light;if(T>=v&&A>=v&&T<y-v&&A<y-v){const M=Math.floor((T-v)/x),I=Math.floor((A-v)/x);_=C[m[M*h+I]?1:0]}a[D++]=_.r,a[D++]=_.g,a[D++]=_.b,a[D]=_.a}}})(Ad);(function(t){const r=Ad;function i(c,l,h){c.clearRect(0,0,l.width,l.height),l.style||(l.style={}),l.height=h,l.width=h,l.style.height=h+"px",l.style.width=h+"px"}function a(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(l,h,m){let x=m,y=h;typeof x>"u"&&(!h||!h.getContext)&&(x=h,h=void 0),h||(y=a()),x=r.getOptions(x);const v=r.getImageWidth(l.modules.size,x),C=y.getContext("2d"),T=C.createImageData(v,v);return r.qrToImageData(T.data,l,x),i(C,y,v),C.putImageData(T,0,0),y},t.renderToDataURL=function(l,h,m){let x=m;typeof x>"u"&&(!h||!h.getContext)&&(x=h,h=void 0),x||(x={});const y=t.render(l,h,x),v=x.type||"image/png",C=x.rendererOpts||{};return y.toDataURL(v,C.quality)}})(zh);var qh={};const w5=Ad;function c0(t,r){const i=t.a/255,a=r+'="'+t.hex+'"';return i<1?a+" "+r+'-opacity="'+i.toFixed(2).slice(1)+'"':a}function Nc(t,r,i){let a=t+r;return typeof i<"u"&&(a+=" "+i),a}function v5(t,r,i){let a="",c=0,l=!1,h=0;for(let m=0;m<t.length;m++){const x=Math.floor(m%r),y=Math.floor(m/r);!x&&!l&&(l=!0),t[m]?(h++,m>0&&x>0&&t[m-1]||(a+=l?Nc("M",x+i,.5+y+i):Nc("m",c,0),c=0,l=!1),x+1<r&&t[m+1]||(a+=Nc("h",h),h=0)):c++}return a}qh.render=function(r,i,a){const c=w5.getOptions(i),l=r.modules.size,h=r.modules.data,m=l+c.margin*2,x=c.color.light.a?"<path "+c0(c.color.light,"fill")+' d="M0 0h'+m+"v"+m+'H0z"/>':"",y="<path "+c0(c.color.dark,"stroke")+' d="'+v5(h,l,c.margin)+'"/>',v='viewBox="0 0 '+m+" "+m+'"',T='<svg xmlns="http://www.w3.org/2000/svg" '+(c.width?'width="'+c.width+'" height="'+c.width+'" ':"")+v+' shape-rendering="crispEdges">'+x+y+`</svg>
`;return typeof a=="function"&&a(null,T),T};const N5=Rx,rd=Th,Hh=zh,A5=qh;function Cd(t,r,i,a,c){const l=[].slice.call(arguments,1),h=l.length,m=typeof l[h-1]=="function";if(!m&&!N5())throw new Error("Callback required as last argument");if(m){if(h<2)throw new Error("Too few arguments provided");h===2?(c=i,i=r,r=a=void 0):h===3&&(r.getContext&&typeof c>"u"?(c=a,a=void 0):(c=a,a=i,i=r,r=void 0))}else{if(h<1)throw new Error("Too few arguments provided");return h===1?(i=r,r=a=void 0):h===2&&!r.getContext&&(a=i,i=r,r=void 0),new Promise(function(x,y){try{const v=rd.create(i,a);x(t(v,r,a))}catch(v){y(v)}})}try{const x=rd.create(i,a);c(null,t(x,r,a))}catch(x){c(x)}}Lo.create=rd.create;Lo.toCanvas=Cd.bind(null,Hh.render);Lo.toDataURL=Cd.bind(null,Hh.renderToDataURL);Lo.toString=Cd.bind(null,function(t,r,i){return A5.render(t,i)});const C5=({order:t,onClose:r})=>{var h,m;const i=((h=t.tickets)==null?void 0:h.reduce((x,y)=>x+(y.quantity||0),0))||0,a=x=>{x.target===x.currentTarget&&r()},{events:c}=bs(),l=async()=>{var x,y;try{const v=new _t({unit:"pt",format:"a4"}),C=v.internal.pageSize.getWidth(),T=v.internal.pageSize.getHeight(),A=40;let D=A;v.setFillColor(17,24,39),v.rect(0,0,C,90,"F"),v.setTextColor(255,255,255),v.setFont("helvetica","bold"),v.setFontSize(22),v.text("Carnival LDN - Tickets",C/2,40,{align:"center"});const _=((x=c==null?void 0:c.find(I=>I.id===t.eventId))==null?void 0:x.title)||"Your Event";v.setFont("helvetica","normal"),v.setFontSize(13),v.text(_,C/2,62,{align:"center"}),D=110,v.setTextColor(55,65,81),v.setFontSize(12),v.text(`Order: ${t.id}`,A,D),D+=16,v.text(`Name: ${t.customerName||""}`,A,D),D+=16,v.text(`Email: ${t.customerEmail||""}`,A,D),D+=16,v.text(`Status: ${t.status}`,A,D),D+=16,v.text(`Total: £${((t.totalAmount||0)/100).toFixed(2)}`,A,D),D+=20;const M=t.tickets||[];for(let I=0;I<M.length;I++){const j=M[I];D+180>T-A&&(v.addPage(),D=A);const B=(()=>{var V;const De=c==null?void 0:c.find(oe=>oe.id===t.eventId),Y=(V=De==null?void 0:De.ticketTiers)==null?void 0:V.find(oe=>oe.id===j.ticketTierId);return(Y==null?void 0:Y.name)||j.ticketTierId})(),Z=A,Q=C-A*2,xe=150;v.setDrawColor(229,231,235),v.setFillColor(249,250,251),v.rect(Z,D,Q,xe,"FD");let $=D+24;v.setTextColor(31,41,55),v.setFont("helvetica","bold"),v.setFontSize(14),v.text(`Ticket ${I+1}`,Z+16,$),$+=18,v.setFont("helvetica","normal"),v.setFontSize(12),v.text(`Tier: ${B}`,Z+16,$),$+=14,v.text(`Quantity: ${j.quantity}`,Z+16,$),$+=14,v.text(`Unit: £${(j.unitPrice/100).toFixed(2)}   Total: £${(j.totalPrice/100).toFixed(2)}`,Z+16,$),$+=18,v.setTextColor(75,85,99),v.text(`Order Ref: ${(y=t.id)==null?void 0:y.slice(0,8)}...`,Z+16,$);const ie=JSON.stringify({orderId:t.id,ticketTierId:j.ticketTierId,quantity:j.quantity,customer:t.customerEmail}),ce=await Lo.toDataURL(ie,{width:120,margin:1,color:{dark:"#111827",light:"#FFFFFFFF"}});v.addImage(ce,"PNG",C-A-136,D+15,120,120),D+=xe+14}v.save(`tickets_${t.id}.pdf`)}catch(v){console.error("Failed to generate PDF:",v)}};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:a,children:o.jsxs(qe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6 text-center",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:o.jsx(Zn,{className:"h-8 w-8 text-green-600"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Payment Successful!"}),o.jsx("p",{className:"text-gray-600",children:"Your tickets have been purchased successfully! Check your email for the confirmation and attached PDF tickets."})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",children:[o.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Order Summary"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Order ID:"}),o.jsxs("span",{className:"font-mono text-gray-600",children:[((m=t.id)==null?void 0:m.slice(0,8))||"N/A","..."]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Total Tickets:"}),o.jsx("span",{className:"font-semibold",children:i})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Total Amount:"}),o.jsxs("span",{className:"font-semibold",children:["£",((t.totalAmount||0)/100).toFixed(2)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Status:"}),o.jsx("span",{className:"text-green-600 font-semibold capitalize",children:t.status||"completed"})]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"text-sm text-gray-600",children:["Confirmation & tickets sent to ",o.jsx("span",{className:"font-semibold text-black",children:t.customerEmail||"your email"})]}),o.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[o.jsx(Xa,{className:"h-4 w-4 flex-shrink-0"}),o.jsx("span",{children:"PDF tickets attached to your email"})]})]}),o.jsxs("div",{className:"flex gap-3 mt-6",children:[o.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Close"}),o.jsxs("button",{onClick:l,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[o.jsx(ad,{className:"h-4 w-4"}),"Download"]})]})]})})},S5=()=>{var B,Z;const{events:t,getEvents:r,isLoading:i}=bs(),[a,c]=ve.useState(null),[l,h]=ve.useState(!1),[m,x]=ve.useState(null),[y]=ag(),[v,C]=ve.useState(!1),[T,A]=ve.useState(null),[D,_]=ve.useState(!0),{glitchRef:M,isGlitching:I,glitchType:j}=ys();return ve.useEffect(()=>{(async()=>{try{await r(),console.log("Events loaded in EventsPage:",t)}catch(xe){console.error("Failed to load events:",xe)}})()},[r]),ve.useEffect(()=>{if(t.length>0){const Q=y.get("event");Q&&t.find($=>$.id===Q)&&(x(Q),setTimeout(()=>{var $;($=document.getElementById("events-grid"))==null||$.scrollIntoView({behavior:"smooth",block:"start"})},500))}},[t,y]),ve.useEffect(()=>{const Q=()=>{window.scrollY>100&&_(!1)};return window.addEventListener("scroll",Q),()=>window.removeEventListener("scroll",Q)},[]),o.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[o.jsx(fd,{}),o.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden pt-16 sm:pt-20 md:pt-32 pb-12 sm:pb-16 md:pb-24 px-2 sm:px-4",children:[o.jsxs("div",{className:"absolute inset-0 w-full h-full",children:[o.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover",children:o.jsx("source",{src:"https://res.cloudinary.com/dg9reru4s/video/upload/v1756197502/vid_mprror.mp4",type:"video/mp4"})}),o.jsx("div",{className:"absolute inset-0 bg-black/60"})]}),o.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-4 md:px-6 lg:px-8 text-center",children:o.jsxs(qe.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:"space-y-4 md:space-y-6 lg:space-y-8",children:[o.jsx(qe.h1,{ref:M,animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:8,repeat:1/0,ease:"linear"},className:`text-6xl sm:text-4xl md:text-5xl lg:text-6xl xl:text-8xl 2xl:text-8xl glitch-text ${I?`glitch-active glitch-${j}`:""}`,"data-text":"EVENTS",style:{textTransform:"uppercase",letterSpacing:"0.1em"},children:"EVENTS"}),o.jsx(qe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.2},className:"text-base sm:text-lg md:text-xl lg:text-xl font-light max-w-4xl mx-auto leading-relaxed px-2 text-white drop-shadow-lg",children:o.jsxs(qe.span,{className:"inline-block px-3 sm:px-4 md:px-6 py-2 sm:py-2.5 md:py-3 bg-black/20 backdrop-blur-sm rounded-full border border-white/20 text-sm sm:text-base md:text-lg",whileHover:{scale:1.05,boxShadow:"0 0 20px rgba(255, 255, 255, 0.3)",borderColor:"rgba(255, 255, 255, 0.5)"},animate:{boxShadow:["0 0 10px rgba(255, 255, 255, 0.1)","0 0 20px rgba(255, 255, 255, 0.2)","0 0 10px rgba(255, 255, 255, 0.1)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:[o.jsx("span",{className:"block sm:hidden",children:"⚡ Events that hit different ⚡"}),o.jsx("span",{className:"hidden sm:block",children:"⚡ From rooftop raves to underground vibes - events that hit different ⚡"})]})}),o.jsx(qe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.4},className:"text-white/80 text-base sm:text-lg md:text-xl",children:i?o.jsx("span",{children:"Loading events..."}):o.jsxs("span",{children:[((B=t==null?void 0:t.filter(Q=>!Q.isArchived))==null?void 0:B.length)||0," upcoming events"]})}),o.jsx(qe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.6},className:"flex flex-col sm:flex-row gap-3 sm:gap-4 md:gap-6 justify-center items-center pt-4 sm:pt-6 md:pt-8 px-2 sm:px-4",children:o.jsxs(qe.button,{onClick:()=>{var Q;(Q=document.getElementById("events-grid"))==null||Q.scrollIntoView({behavior:"smooth",block:"start"})},whileHover:{scale:1.05,boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},whileTap:{scale:.95},className:"bg-transparent hover:bg-white/90 text-white hover:text-gray-900 px-4 sm:px-6 md:px-8 py-2.5 sm:py-3 md:py-4 text-base sm:text-base md:text-lg font-semibold rounded-lg border-2 border-white/70 w-3/4 sm:w-auto transition-all backdrop-blur-sm group flex items-center justify-center gap-3",children:[o.jsx("span",{children:"Get Tickets"}),o.jsx(ml,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5 group-hover:translate-x-1 transition-transform"})]})})]})}),D&&o.jsx(qe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.8},className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 z-20 w-full flex justify-center",children:o.jsxs(qe.div,{animate:{y:[0,10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"flex flex-col items-center space-y-2 cursor-pointer",onClick:()=>{var Q;(Q=document.getElementById("events-grid"))==null||Q.scrollIntoView({behavior:"smooth",block:"start"})},children:[o.jsx(qe.div,{animate:{y:[0,8,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"w-6 h-10 border-2 border-white/50 rounded-full flex justify-center",children:o.jsx(qe.div,{animate:{y:[0,12,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"w-1 h-3 bg-white/70 rounded-full mt-2"})}),o.jsx(qe.p,{animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"text-white/70 text-xs font-medium",children:"Scroll to explore"})]})})]}),o.jsxs("section",{id:"events-grid",className:"py-16 md:py-20 relative px-4 overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 w-full h-full",children:[o.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover scale-150",children:o.jsx("source",{src:"https://res.cloudinary.com/dg9reru4s/video/upload/v1756198520/vid-ev_xlwkrd.mp4",type:"video/mp4"})}),o.jsx("div",{className:"absolute inset-0 bg-gray-900/70"})]}),o.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 md:px-6 lg:px-8",children:[o.jsxs(qe.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:"text-center mb-12 md:mb-16",children:[o.jsx(qe.h2,{className:`text-5xl sm:text-4xl md:text-5xl lg:text-6xl font-bold mb-4 md:mb-6 text-white glitch-text ${I?`glitch-active glitch-${j}`:""}`,"data-text":"WHAT'S ON",style:{textTransform:"uppercase",letterSpacing:"0.1em"},children:"WHAT'S ON"}),o.jsx("div",{className:"flex justify-center",children:o.jsx(qe.span,{className:"inline-block px-3 sm:px-4 md:px-6 py-2 sm:py-2.5 md:py-3 bg-black/20 backdrop-blur-sm rounded-full border border-white/20 text-sm sm:text-base md:text-lg text-white/80",whileHover:{scale:1.05,boxShadow:"0 0 20px rgba(255, 255, 255, 0.3)",borderColor:"rgba(255, 255, 255, 0.5)"},animate:{boxShadow:["0 0 10px rgba(255, 255, 255, 0.1)","0 0 20px rgba(255, 255, 255, 0.2)","0 0 10px rgba(255, 255, 255, 0.1)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:"🎭  Check out our upcoming events  🎭"})})]}),i?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-white text-lg mb-4",children:"Loading events..."}),o.jsx("div",{className:"text-white/70 text-sm",children:"Please wait while we fetch the latest events"})]}):!t||t.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-white text-lg mb-4",children:"No events available"}),o.jsx("div",{className:"text-white/70 text-sm",children:"Check back later for upcoming events"})]}):t.filter(Q=>!Q.isArchived).length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-white text-lg mb-4",children:"No upcoming events"}),o.jsx("div",{className:"text-white/70 text-sm",children:"All events are currently archived"})]}):o.jsx("div",{className:`grid gap-6 md:gap-8 ${t.filter(Q=>!Q.isArchived).length===1?"grid-cols-1 max-w-md mx-auto":t.filter(Q=>!Q.isArchived).length===2?"grid-cols-1 md:grid-cols-2 max-w-4xl mx-auto":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3"}`,children:t.filter(Q=>!Q.isArchived).map((Q,xe)=>o.jsxs(qe.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.6,delay:m===Q.id?.2:xe*.1},whileHover:{y:-4},className:`group relative bg-gradient-to-br from-white via-gray-50 to-white border rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden cursor-pointer backdrop-blur-sm ${m===Q.id?"border-blue-500 shadow-blue-500/25 scale-105 ring-2 ring-blue-500/20":"border-gray-100"}`,children:[o.jsxs("div",{className:"relative h-48 md:h-56 overflow-hidden",onClick:()=>{c(Q),h(!0)},children:[m===Q.id&&o.jsx("div",{className:"absolute top-4 right-4 z-10 bg-gradient-to-r from-blue-500 to-purple-600 text-white text-xs font-bold px-3 py-1.5 rounded-full shadow-lg animate-pulse",children:"⭐ Featured Event"}),o.jsx("img",{src:Q.image,alt:Q.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",onError:$=>{const ie=$.target;ie.src=`https://via.placeholder.com/400x300/6B7280/FFFFFF?text=${encodeURIComponent(Q.title)}`}}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"}),o.jsx("div",{className:"absolute top-4 left-4 flex flex-wrap gap-2",children:Q.tags.slice(0,2).map($=>o.jsx("span",{className:"bg-white/95 backdrop-blur-sm px-3 py-1.5 rounded-full text-xs font-semibold text-gray-800 shadow-sm border border-white/20",children:$},$))}),Q.ticketTiers&&Q.ticketTiers.length>0&&Q.ticketTiers.every($=>$.capacity-$.soldCount<=0||$.isActive===!1)&&o.jsx("div",{className:"absolute top-4 right-4 bg-red-500 text-white text-xs font-bold px-3 py-1.5 rounded-full shadow-lg",children:"Sold Out"}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:o.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white mb-2 leading-tight drop-shadow-lg",children:Q.title})})]}),o.jsxs("div",{className:"p-5 md:p-6 space-y-4",onClick:()=>{c(Q),h(!0)},children:[o.jsx("p",{className:"text-gray-600 text-sm leading-relaxed line-clamp-2",children:Q.description}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3 p-2.5 bg-gray-50 rounded-xl",children:[o.jsx(_n,{className:"w-4 h-4 text-gray-600 flex-shrink-0"}),o.jsx("span",{className:"text-sm font-semibold text-gray-900",children:Q.date})]}),o.jsxs("div",{className:"flex items-center justify-center gap-3 p-2.5 bg-gray-50 rounded-xl",children:[o.jsx(Ii,{className:"w-4 h-4 text-gray-600 flex-shrink-0"}),o.jsx("span",{className:"text-sm font-semibold text-gray-900",children:Q.time})]}),o.jsxs("div",{className:"flex items-center justify-center gap-3 p-2.5 bg-gray-50 rounded-xl",children:[o.jsx(Gs,{className:"w-4 h-4 text-gray-600 flex-shrink-0"}),o.jsx("span",{className:"text-sm font-semibold text-gray-900",children:Q.venue})]})]}),Q.ticketTiers&&Q.ticketTiers.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"Ticket Options"}),o.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:Math.min(...Q.ticketTiers.map($=>$.price))===0?"Free":`From £${(Math.min(...Q.ticketTiers.map($=>$.price))/100).toFixed(2)}`})]}),o.jsxs("div",{className:"space-y-1.5",children:[Q.ticketTiers.sort(($,ie)=>$.price-ie.price).slice(0,2).map($=>o.jsxs("div",{className:"flex items-center justify-between p-2.5 bg-gradient-to-r from-gray-50 to-white rounded-lg border border-gray-100",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),o.jsx("span",{className:"text-sm font-medium text-gray-800",children:$.name})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[$.originalPrice&&$.originalPrice>$.price&&o.jsxs("span",{className:"text-xs text-gray-400 line-through",children:["£",($.originalPrice/100).toFixed(2)]}),o.jsx("span",{className:"text-lg font-bold text-gray-900",children:$.price===0?"Free":`£${($.price/100).toFixed(2)}`})]})]},$.id)),Q.ticketTiers.length>2&&o.jsx("div",{className:"text-center",children:o.jsxs("span",{className:"text-xs text-gray-500 bg-gray-100 px-3 py-1.5 rounded-full",children:["+",Q.ticketTiers.length-2," more options"]})})]})]}),o.jsxs(qe.button,{onClick:$=>{$.stopPropagation(),c(Q),C(!0)},whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-gradient-to-r from-gray-900 via-gray-800 to-gray-800 hover:from-gray-800 hover:via-gray-700 hover:to-gray-800 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 text-sm md:text-base flex items-center justify-center gap-3 shadow-lg hover:shadow-xl group-hover:shadow-2xl",children:[Q.ticketTiers&&Q.ticketTiers.length>0?"Get Tickets":"Book Now",o.jsx(ml,{className:"w-4 h-4 transition-transform group-hover:translate-x-1"})]})]})]},Q.id))})]})]}),l&&a&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>h(!1),children:o.jsxs("div",{className:"bg-white rounded-xl max-w-lg w-full overflow-hidden",onClick:Q=>Q.stopPropagation(),children:[o.jsxs("div",{className:"relative h-48 overflow-hidden",children:[o.jsx("img",{src:a.image,alt:a.title,className:"w-full h-full object-cover"}),o.jsx("button",{className:"absolute top-3 right-3 bg-white/90 rounded-full p-1",onClick:()=>h(!1),children:o.jsx(Zs,{className:"w-5 h-5 text-gray-700"})})]}),o.jsxs("div",{className:"p-6 space-y-4 text-center",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-900",children:a.title}),o.jsx("p",{className:"text-gray-600 text-sm",children:a.description}),o.jsxs("div",{className:"space-y-3 text-sm text-black",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx(_n,{className:"w-4 h-4"}),o.jsx("span",{className:"font-semibold",children:a.date})]}),o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx(Ii,{className:"w-4 h-4"}),o.jsx("span",{className:"font-semibold",children:a.time})]}),o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx(Gs,{className:"w-4 h-4"}),o.jsx("span",{className:"font-semibold",children:a.venue})]})]}),a.ticketTiers&&a.ticketTiers.length>0&&o.jsxs("div",{className:"text-left",children:[o.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Ticket Tiers"}),o.jsx("div",{className:"space-y-2",children:a.ticketTiers.sort((Q,xe)=>Q.price-xe.price).map(Q=>{const $=Q.capacity-Q.soldCount<=0||Q.isActive===!1;return o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-700",children:Q.name}),$?o.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-red-100 text-red-700",children:"Sold out"}):o.jsxs("div",{className:"flex items-center gap-2",children:[Q.originalPrice&&Q.originalPrice>Q.price&&o.jsxs("span",{className:"text-gray-400 line-through",children:["£",(Q.originalPrice/100).toFixed(2)]}),o.jsx("span",{className:"font-semibold text-gray-900",children:Q.price===0?"Free":`£${(Q.price/100).toFixed(2)}`})]})]},Q.id)})})]}),o.jsx("button",{onClick:()=>{h(!1),c(a),C(!0)},disabled:(Z=a.ticketTiers)==null?void 0:Z.every(Q=>Q.capacity-Q.soldCount<=0||Q.isActive===!1),className:"w-full bg-gray-900 hover:bg-gray-800 disabled:bg-gray-300 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg text-sm",children:"Buy Tickets"})]})]})}),v&&a&&o.jsx(Fp,{event:a,onClose:()=>C(!1),onSuccess:Q=>{A(Q),C(!1)}}),T&&o.jsx(C5,{order:T,onClose:()=>A(null)}),o.jsx(gd,{})]})},E5=()=>o.jsx("div",{className:"min-h-screen bg-gray-50",children:o.jsx(Lp,{})}),I5=({className:t=""})=>{var T,A,D,_,M,I;const[r,i]=ve.useState(null),[a,c]=ve.useState(!0),[l,h]=ve.useState(new Date),[m,x]=ve.useState("24h"),[y,v]=ve.useState("overview");ve.useEffect(()=>{const j=()=>{c(!0),setTimeout(()=>{const Z={liveVisitors:Math.floor(Math.random()*50)+10,currentSessions:Math.floor(Math.random()*30)+5,totalSessions:Math.floor(Math.random()*1e3)+500,averageSessionDuration:Math.floor(Math.random()*300)+120,bounceRate:Math.random()*40+20,totalPageViews:Math.floor(Math.random()*3e3)+1500,averageTimeOnPage:Math.floor(Math.random()*180)+60,mostVisitedPages:[{page:"/",views:450,averageTime:120},{page:"/events",views:320,averageTime:180},{page:"/about",views:180,averageTime:90},{page:"/contact",views:120,averageTime:60}],totalEventsViewed:Math.floor(Math.random()*200)+100,mostViewedEvents:[{eventId:"1",views:85,uniqueViewers:65},{eventId:"2",views:72,uniqueViewers:58},{eventId:"3",views:68,uniqueViewers:52}],totalCheckouts:Math.floor(Math.random()*50)+20,totalPurchases:Math.floor(Math.random()*30)+15,conversionRate:Math.random()*15+5,averageOrderValue:Math.floor(Math.random()*50)+25,trafficSources:[{source:"Google",sessions:450,conversionRate:8.5},{source:"Direct",sessions:280,conversionRate:12.3},{source:"Social Media",sessions:180,conversionRate:6.2},{source:"Referral",sessions:90,conversionRate:4.1}],deviceBreakdown:[{device:"Mobile",sessions:520,percentage:52},{device:"Desktop",sessions:380,percentage:38},{device:"Tablet",sessions:100,percentage:10}],topLocations:[{location:"London",sessions:650,conversionRate:9.8},{location:"Manchester",sessions:120,conversionRate:7.2},{location:"Birmingham",sessions:85,conversionRate:6.5},{location:"Leeds",sessions:65,conversionRate:5.8}]};i(Z),h(new Date),c(!1)},1e3)};j();const B=setInterval(j,5*60*1e3);return()=>clearInterval(B)},[m]);const C=()=>{c(!0),setTimeout(()=>{h(new Date),c(!1)},1e3)};return a&&!r?o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-xl font-semibold text-gray-700",children:"Loading Analytics..."})]})}):o.jsxs("div",{className:`min-h-screen bg-gray-50 ${t}`,children:[o.jsx("div",{className:"bg-white shadow-sm border-b",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Analytics Dashboard"}),o.jsx("p",{className:"text-gray-600 mt-1",children:"Real-time insights into your Carnival LDN website performance"})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("select",{value:m,onChange:j=>x(j.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[o.jsx("option",{value:"1h",children:"Last Hour"}),o.jsx("option",{value:"24h",children:"Last 24 Hours"}),o.jsx("option",{value:"7d",children:"Last 7 Days"}),o.jsx("option",{value:"30d",children:"Last 30 Days"})]}),o.jsxs("button",{onClick:C,disabled:a,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[o.jsx(u0,{className:`h-4 w-4 ${a?"animate-spin":""}`}),o.jsx("span",{children:"Refresh"})]})]})]}),o.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Last updated: ",l.toLocaleTimeString()]})]})}),o.jsx("div",{className:"bg-white border-b",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsx("nav",{className:"flex space-x-8",children:[{id:"overview",label:"Overview",icon:yl},{id:"traffic",label:"Traffic",icon:m0},{id:"conversions",label:"Conversions",icon:z1},{id:"events",label:"Events",icon:_n},{id:"users",label:"Users",icon:pn}].map(j=>{const B=j.icon;return o.jsxs("button",{onClick:()=>v(j.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ${y===j.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[o.jsx(B,{className:"h-4 w-4"}),o.jsx("span",{children:j.label})]},j.id)})})})}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[y==="overview"&&o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:o.jsx(pn,{className:"h-6 w-6 text-blue-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Live Visitors"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r==null?void 0:r.liveVisitors})]})]})}),o.jsx(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:o.jsx(No,{className:"h-6 w-6 text-green-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Page Views"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(T=r==null?void 0:r.totalPageViews)==null?void 0:T.toLocaleString()})]})]})}),o.jsx(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:o.jsx(ru,{className:"h-6 w-6 text-purple-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Conversions"}),o.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[(A=r==null?void 0:r.conversionRate)==null?void 0:A.toFixed(1),"%"]})]})]})}),o.jsx(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:o.jsx(pl,{className:"h-6 w-6 text-orange-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Order Value"}),o.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["£",r==null?void 0:r.averageOrderValue]})]})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Traffic Sources"}),o.jsx("div",{className:"space-y-4",children:r==null?void 0:r.trafficSources.map((j,B)=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${B===0?"bg-blue-500":B===1?"bg-green-500":B===2?"bg-purple-500":"bg-gray-500"}`}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:j.source})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-sm font-semibold text-gray-900",children:j.sessions.toLocaleString()}),o.jsxs("p",{className:"text-xs text-gray-500",children:[j.conversionRate.toFixed(1),"% conversion"]})]})]},j.source))})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Device Breakdown"}),o.jsx("div",{className:"space-y-4",children:r==null?void 0:r.deviceBreakdown.map((j,B)=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${B===0?"bg-blue-500":B===1?"bg-green-500":"bg-purple-500"}`}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:j.device})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-sm font-semibold text-gray-900",children:j.sessions.toLocaleString()}),o.jsxs("p",{className:"text-xs text-gray-500",children:[j.percentage,"%"]})]})]},j.device))})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Most Visited Pages"}),o.jsx("div",{className:"space-y-3",children:r==null?void 0:r.mostVisitedPages.map((j,B)=>o.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["#",B+1]}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:j.page})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[j.views.toLocaleString()," views"]}),o.jsxs("p",{className:"text-xs text-gray-500",children:[j.averageTime,"s avg time"]})]})]},j.page))})]})]}),y==="traffic"&&o.jsx("div",{className:"space-y-8",children:o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Geographic Distribution"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r==null?void 0:r.topLocations.map((j,B)=>o.jsxs("div",{className:"border rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Gs,{className:"h-4 w-4 text-gray-500"}),o.jsx("span",{className:"font-medium text-gray-900",children:j.location})]}),o.jsxs("span",{className:"text-sm text-gray-500",children:["#",B+1]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Sessions:"}),o.jsx("span",{className:"font-medium",children:j.sessions.toLocaleString()})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Conversion Rate:"}),o.jsxs("span",{className:"font-medium text-green-600",children:[j.conversionRate.toFixed(1),"%"]})]})]})]},j.location))})]})}),y==="conversions"&&o.jsx("div",{className:"space-y-8",children:o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Conversion Funnel"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(No,{className:"h-5 w-5 text-blue-600"}),o.jsx("span",{className:"font-medium",children:"Page Views"})]}),o.jsx("span",{className:"text-lg font-bold text-gray-900",children:(D=r==null?void 0:r.totalPageViews)==null?void 0:D.toLocaleString()})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(ru,{className:"h-5 w-5 text-green-600"}),o.jsx("span",{className:"font-medium",children:"Checkouts Started"})]}),o.jsx("span",{className:"text-lg font-bold text-gray-900",children:r==null?void 0:r.totalCheckouts})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Zn,{className:"h-5 w-5 text-purple-600"}),o.jsx("span",{className:"font-medium",children:"Purchases Completed"})]}),o.jsx("span",{className:"text-lg font-bold text-gray-900",children:r==null?void 0:r.totalPurchases})]})]})]})}),y==="events"&&o.jsx("div",{className:"space-y-8",children:o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Event Performance"}),o.jsx("div",{className:"space-y-4",children:r==null?void 0:r.mostViewedEvents.map((j,B)=>o.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["#",B+1]}),o.jsxs("span",{className:"font-medium text-gray-900",children:["Event ",j.eventId]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[j.views," views"]}),o.jsxs("p",{className:"text-xs text-gray-500",children:[j.uniqueViewers," unique viewers"]})]})]},j.eventId))})]})}),y==="users"&&o.jsx("div",{className:"space-y-8",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Session Metrics"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Total Sessions:"}),o.jsx("span",{className:"font-medium",children:(_=r==null?void 0:r.totalSessions)==null?void 0:_.toLocaleString()})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Avg Duration:"}),o.jsxs("span",{className:"font-medium",children:[Math.floor(((r==null?void 0:r.averageSessionDuration)||0)/60),"m ",((r==null?void 0:r.averageSessionDuration)||0)%60,"s"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Bounce Rate:"}),o.jsxs("span",{className:"font-medium",children:[(M=r==null?void 0:r.bounceRate)==null?void 0:M.toFixed(1),"%"]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Page Engagement"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Total Page Views:"}),o.jsx("span",{className:"font-medium",children:(I=r==null?void 0:r.totalPageViews)==null?void 0:I.toLocaleString()})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Avg Time on Page:"}),o.jsxs("span",{className:"font-medium",children:[Math.floor(((r==null?void 0:r.averageTimeOnPage)||0)/60),"m ",((r==null?void 0:r.averageTimeOnPage)||0)%60,"s"]})]})]})]})]})})]})]})},T5=[{id:"1",src:"https://res.cloudinary.com/dg9reru4s/image/upload/v1756201990/_DSC8186-min_jzvcgg.jpg",alt:"Event photography - DSC8186"},{id:"2",src:"https://res.cloudinary.com/dg9reru4s/image/upload/v1756201990/_DSC8702-Edit_1_-min_mk9qdi.jpg",alt:"Event photography - DSC8702"},{id:"3",src:"https://res.cloudinary.com/dg9reru4s/image/upload/v1756201989/_DSC8327-Edit-min_ogv4qm.jpg",alt:"Event photography - DSC8327"},{id:"4",src:"https://res.cloudinary.com/dg9reru4s/image/upload/v1756201988/_DSC8059-min_xoupnm.jpg",alt:"Event photography - DSC8059"},{id:"5",src:"https://res.cloudinary.com/dg9reru4s/image/upload/v1756201987/_DSC7965-Edit-min_k5uqwc.jpg",alt:"Event photography - DSC7965"},{id:"6",src:"https://res.cloudinary.com/dg9reru4s/image/upload/v1756201457/IMG_6073_1_bpf2ic.jpg",alt:"Event photography - IMG_6073"},{id:"7",src:"https://res.cloudinary.com/dg9reru4s/image/upload/v1756201228/IMG_6075_v67xz7.jpg",alt:"Event photography - IMG_6075"},{id:"8",src:"https://res.cloudinary.com/dg9reru4s/image/upload/v1756201228/IMG_6070_1_w5mhof.jpg",alt:"Event photography - IMG_6070"},{id:"9",src:"https://res.cloudinary.com/dg9reru4s/image/upload/v1756201227/DSC02821_uw11th.jpg",alt:"Event photography - DSC02821"}],j5=()=>{const{glitchRef:t,isGlitching:r,glitchType:i}=ys();return o.jsxs("div",{className:"min-h-screen bg-black",children:[o.jsx("div",{className:"pt-40 pb-16 px-4",children:o.jsx("div",{className:"max-w-6xl mx-auto text-center",children:o.jsx(qe.h1,{ref:t,animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:8,repeat:1/0,ease:"linear"},className:`text-5xl sm:text-4xl md:text-5xl lg:text-6xl font-bold mb-6 pb-1 glitch-text ${r?`glitch-active glitch-${i}`:""}`,"data-text":"GALLERY",style:{textTransform:"uppercase",letterSpacing:"0.1em"},children:"GALLERY"})})}),o.jsx("div",{className:"px-4 pb-16",children:o.jsx("div",{className:"max-w-6xl mx-auto",children:o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:T5.map((a,c)=>o.jsx(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:c*.1},className:"group relative overflow-hidden rounded-lg cursor-pointer",children:o.jsx("div",{className:"aspect-[4/3] overflow-hidden",children:o.jsx("img",{src:a.src,alt:a.alt,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy"})})},a.id))})})}),o.jsx(gd,{})]})},Do=({title:t,description:r,keywords:i="Carnival LDN, London events, nightlife London, club nights London, Bollywood parties London, Diwali celebrations London, New Year parties London, corporate events London, private parties London, event planning London",image:a="/carnival-logo.svg",url:c="https://carnivalldn.com",type:l="website"})=>{const h=`${t} | Carnival LDN - London's Premier Events Company`;return o.jsxs(q2,{children:[o.jsx("title",{children:h}),o.jsx("meta",{name:"description",content:r}),o.jsx("meta",{name:"keywords",content:i}),o.jsx("meta",{name:"author",content:"Carnival LDN"}),o.jsx("meta",{name:"robots",content:"index, follow"}),o.jsx("link",{rel:"canonical",href:c}),o.jsx("meta",{property:"og:type",content:l}),o.jsx("meta",{property:"og:url",content:c}),o.jsx("meta",{property:"og:title",content:h}),o.jsx("meta",{property:"og:description",content:r}),o.jsx("meta",{property:"og:image",content:a}),o.jsx("meta",{property:"og:site_name",content:"Carnival LDN"}),o.jsx("meta",{property:"og:locale",content:"en_GB"}),o.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),o.jsx("meta",{name:"twitter:site",content:"@carnivalldn"}),o.jsx("meta",{name:"twitter:title",content:h}),o.jsx("meta",{name:"twitter:description",content:r}),o.jsx("meta",{name:"twitter:image",content:a}),o.jsx("meta",{name:"geo.region",content:"GB-LND"}),o.jsx("meta",{name:"geo.placename",content:"London"}),o.jsx("meta",{name:"geo.position",content:"51.5074;-0.1278"}),o.jsx("meta",{name:"ICBM",content:"51.5074, -0.1278"}),o.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"Event",name:"Carnival LDN Events",description:"London's premier professional events company, creating exceptional experiences that elevate your brand and strengthen business relationships.",url:"https://carnivalldn.com",logo:"https://carnivalldn.com/carnival-logo.svg",address:{"@type":"PostalAddress",streetAddress:"123 Event Street",addressLocality:"London",addressCountry:"GB"},contactPoint:{"@type":"ContactPoint",telephone:"+44-20-1234-5678",contactType:"customer service",email:"partnerships@carnivalldn.com"},sameAs:["https://instagram.com/carnivalldn","https://facebook.com/carnivalldn","https://twitter.com/carnivalldn"]})})]})},_5=()=>(ve.useEffect(()=>{X0(),Ll("/gallery","Carnival LDN - Gallery")},[]),o.jsxs("div",{className:"relative min-h-screen overflow-hidden",children:[o.jsx(Do,{title:"Gallery",description:"Explore our event gallery showcasing Carnival LDN's most memorable moments.",keywords:"Carnival LDN gallery, event photos, London events gallery"}),o.jsx(fd,{}),o.jsx(j5,{})]})),L5=()=>(ve.useEffect(()=>{Ll("/404","Carnival LDN - Page Not Found")},[]),o.jsxs("div",{className:"h-screen md:min-h-screen bg-black flex items-center justify-center px-4 relative overflow-hidden pt-0 md:pt-0",children:[o.jsx("div",{className:"absolute inset-0 opacity-5",children:o.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='1'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),o.jsxs("div",{className:"text-center relative z-10 max-w-2xl mx-auto -mt-16 md:mt-0",children:[o.jsx("div",{className:"mb-8 md:mb-12 flex justify-center",children:o.jsx("img",{src:"/carnival-logo-w.svg",alt:"Carnival LDN Logo",className:"w-16 h-16 md:w-24 md:h-24 object-contain"})}),o.jsx("div",{className:"text-6xl md:text-9xl font-bold text-white/30 mb-6 md:mb-8 select-none font-mono",children:"404"}),o.jsx("h1",{className:"text-2xl md:text-5xl font-bold text-white mb-4 md:mb-6 tracking-tight",children:"Page Not Found"}),o.jsx("p",{className:"text-base md:text-xl text-gray-400 mb-8 md:mb-10 max-w-md mx-auto leading-relaxed px-4",children:"The page you're looking for seems to have wandered off to join the carnival elsewhere."}),o.jsxs("div",{className:"flex flex-col gap-3 md:gap-4 justify-center items-center px-4",children:[o.jsx(uu,{to:"/",className:"w-full max-w-xs md:max-w-none px-8 py-3 md:py-4 bg-white text-black font-semibold rounded-lg hover:bg-gray-100 transform hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl border-2 border-white text-center",children:"Go Home"}),o.jsx(uu,{to:"/events",className:"w-full max-w-xs md:max-w-none px-8 py-3 md:py-4 border-2 border-white text-white font-semibold rounded-lg hover:bg-white hover:text-black transform hover:scale-105 transition-all duration-200 text-center",children:"Browse Events"})]})]})]})),k5=()=>{const{glitchRef:t,isGlitching:r,glitchType:i}=ys(),a=[{icon:No,title:"Information We Collect",content:["Personal information (name, email, phone number) when you contact us or book events","Event preferences and attendance history","Payment information processed securely through Stripe","Website usage data and analytics","Communication preferences and marketing consent"]},{icon:vo,title:"How We Use Your Information",content:["Process event bookings and payments","Send event confirmations and updates","Provide customer support and respond to inquiries","Improve our services and website experience","Send marketing communications (with your consent)","Comply with legal obligations"]},{icon:p0,title:"Data Storage & Security",content:["Data stored securely on Supabase cloud infrastructure","Encrypted transmission using HTTPS protocols","Regular security audits and updates","Limited access to authorized personnel only","Data retention policies in compliance with GDPR"]},{icon:pn,title:"Sharing Your Information",content:["We do not sell your personal information","Share with event venues and partners as necessary","Legal requirements and law enforcement","Business transfers (with privacy protection)","Aggregated, anonymized data for analytics"]},{icon:m0,title:"Your Rights & Choices",content:["Access and review your personal data","Request corrections or updates","Opt-out of marketing communications","Request data deletion (subject to legal requirements)","Data portability and transfer rights","Withdraw consent at any time"]}];return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-black text-white py-20 px-4",children:[o.jsx(Do,{title:"Privacy Policy",description:"Carnival LDN Privacy Policy - Learn how we collect, use, and protect your personal information. Your privacy is important to us.",keywords:"Carnival LDN privacy policy, data protection, GDPR compliance, London events privacy, personal data security"}),o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs(qe.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-16",children:[o.jsx(qe.h1,{ref:t,className:`text-5xl md:text-6xl font-bold mb-6 glitch-text ${r?`glitch-active glitch-${i}`:""}`,"data-text":"PRIVACY POLICY",style:{textTransform:"uppercase",letterSpacing:"0.1em"},children:"PRIVACY POLICY"}),o.jsx(qe.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-xl text-gray-300 max-w-2xl mx-auto",children:"Your privacy is important to us. This policy explains how we collect, use, and protect your information."}),o.jsxs(qe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-sm text-gray-400 mt-4",children:["Last updated: ",new Date().toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"})]})]}),o.jsxs(qe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-white/5 border border-white/20 rounded-2xl p-8 mb-12 backdrop-blur-sm",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:"Introduction"}),o.jsx("p",{className:"text-gray-300 leading-relaxed",children:'Carnival LDN ("we," "our," or "us") is committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you visit our website, use our services, or attend our events. By using our services, you consent to the data practices described in this policy.'})]}),o.jsx("div",{className:"space-y-8",children:a.map((c,l)=>o.jsxs(qe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.7+l*.1},className:"bg-white/5 border border-white/20 rounded-2xl p-8 backdrop-blur-sm hover:bg-white/10 transition-all duration-300",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-lg flex items-center justify-center mr-4",children:o.jsx(c.icon,{className:"w-6 h-6 text-white"})}),o.jsx("h3",{className:"text-2xl font-bold text-white",children:c.title})]}),o.jsx("ul",{className:"space-y-3",children:c.content.map((h,m)=>o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"w-2 h-2 bg-white rounded-full mt-2 mr-3 flex-shrink-0"}),o.jsx("span",{className:"text-gray-300 leading-relaxed",children:h})]},m))})]},c.title))}),o.jsxs(qe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:1.2},className:"bg-white/5 border border-white/20 rounded-2xl p-8 mt-12 backdrop-blur-sm",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:"Contact Us"}),o.jsx("p",{className:"text-gray-300 mb-4",children:"If you have any questions about this Privacy Policy or our data practices, please contact us:"}),o.jsxs("div",{className:"space-y-2 text-gray-300",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Email:"})," privacy@carnivalldn.com"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Phone:"})," +44 20 1234 5678"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Address:"})," 123 Event Street, London, UK"]})]})]}),o.jsx(qe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.4},className:"text-center mt-12",children:o.jsx("a",{href:"/",className:"inline-flex items-center px-6 py-3 bg-white/10 hover:bg-white/20 border border-white/20 rounded-lg text-white transition-all duration-300 hover:scale-105",children:"← Back to Home"})})]})]})},D5=()=>{const{glitchRef:t,isGlitching:r,glitchType:i}=ys(),a=[{icon:pn,title:"Acceptance of Terms",content:["By accessing and using Carnival LDN's website and services, you accept and agree to be bound by these terms","If you disagree with any part of these terms, you may not access our services","We reserve the right to modify these terms at any time with notice","Continued use after changes constitutes acceptance of new terms"]},{icon:_n,title:"Event Bookings & Services",content:["Event bookings are confirmed upon receipt of full payment","Cancellation policies vary by event and are clearly stated at booking","We reserve the right to modify or cancel events due to circumstances beyond our control","Refunds are processed according to our cancellation policy","Event details, times, and venues are subject to change with notice"]},{icon:f0,title:"Payment & Refunds",content:["All payments are processed securely through Stripe","Prices are quoted in British Pounds (GBP) and include applicable taxes","Payment is required in full at the time of booking for paid events","Refund requests must be submitted in writing within specified timeframes","Processing fees may apply to refunds and are non-refundable"]},{icon:Zn,title:"User Conduct & Responsibilities",content:["Attendees must be 18+ years old or accompanied by a legal guardian","Respect venue rules and other attendees","No illegal substances or weapons permitted at events","Photography and recording policies vary by event","Violation of conduct policies may result in removal without refund"]},{icon:q1,title:"Limitation of Liability",content:["Carnival LDN is not liable for personal injury or property damage","We are not responsible for lost or stolen personal items","Maximum liability is limited to the amount paid for the event","Force majeure events may result in event cancellation without liability","Venue-specific risks and requirements are the responsibility of attendees"]},{icon:xl,title:"Intellectual Property",content:["All content on our website is owned by Carnival LDN","Event photography and branding are protected by copyright","Unauthorized use of our intellectual property is prohibited","Attendees may be photographed for promotional purposes","Opt-out requests for photography must be submitted in advance"]}];return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-black text-white py-20 px-4",children:[o.jsx(Do,{title:"Terms of Service",description:"Carnival LDN Terms of Service - Read our terms and conditions for using our event services and website.",keywords:"Carnival LDN terms of service, event booking terms, London events terms, party planning terms, event company terms"}),o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs(qe.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-16",children:[o.jsx(qe.h1,{ref:t,className:`text-5xl md:text-6xl font-bold mb-6 glitch-text ${r?`glitch-active glitch-${i}`:""}`,"data-text":"TERMS OF SERVICE",style:{textTransform:"uppercase",letterSpacing:"0.1em"},children:"TERMS OF SERVICE"}),o.jsx(qe.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-xl text-gray-300 max-w-2xl mx-auto",children:"Please read these terms carefully before using our services. They govern your relationship with Carnival LDN."}),o.jsxs(qe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-sm text-gray-400 mt-4",children:["Last updated: ",new Date().toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"})]})]}),o.jsxs(qe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-white/5 border border-white/20 rounded-2xl p-8 mb-12 backdrop-blur-sm",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:"Agreement to Terms"}),o.jsx("p",{className:"text-gray-300 leading-relaxed",children:`These Terms of Service ("Terms") govern your use of Carnival LDN's website, services, and events. By accessing or using our services, you agree to be bound by these Terms. If you disagree with any part of these terms, then you may not access our services.`})]}),o.jsx("div",{className:"space-y-8",children:a.map((c,l)=>o.jsxs(qe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.7+l*.1},className:"bg-white/5 border border-white/20 rounded-2xl p-8 backdrop-blur-sm hover:bg-white/10 transition-all duration-300",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-lg flex items-center justify-center mr-4",children:o.jsx(c.icon,{className:"w-6 h-6 text-white"})}),o.jsx("h3",{className:"text-2xl font-bold text-white",children:c.title})]}),o.jsx("ul",{className:"space-y-3",children:c.content.map((h,m)=>o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"w-2 h-2 bg-white rounded-full mt-2 mr-3 flex-shrink-0"}),o.jsx("span",{className:"text-gray-300 leading-relaxed",children:h})]},m))})]},c.title))}),o.jsxs(qe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:1.3},className:"bg-white/5 border border-white/20 rounded-2xl p-8 mt-12 backdrop-blur-sm",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:"Additional Terms"}),o.jsxs("div",{className:"space-y-4 text-gray-300",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Governing Law:"})," These terms are governed by the laws of England and Wales."]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Dispute Resolution:"})," Any disputes will be resolved through mediation or in the courts of England and Wales."]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Severability:"})," If any provision is found to be unenforceable, the remaining provisions remain in effect."]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Entire Agreement:"})," These terms constitute the entire agreement between you and Carnival LDN."]})]})]}),o.jsxs(qe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:1.4},className:"bg-white/5 border border-white/20 rounded-2xl p-8 mt-12 backdrop-blur-sm",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:"Questions About These Terms?"}),o.jsx("p",{className:"text-gray-300 mb-4",children:"If you have any questions about these Terms of Service, please contact us:"}),o.jsxs("div",{className:"space-y-2 text-gray-300",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Email:"})," legal@carnivalldn.com"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Phone:"})," +44 20 1234 5678"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Address:"})," 123 Event Street, London, UK"]})]})]}),o.jsx(qe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.6},className:"text-center mt-12",children:o.jsx("a",{href:"/",className:"inline-flex items-center px-6 py-3 bg-white/10 hover:bg-white/20 border border-white/20 rounded-lg text-white transition-all duration-300 hover:scale-105",children:"← Back to Home"})})]})]})},O5=()=>{const{glitchRef:t,isGlitching:r,glitchType:i}=ys(),a=[{icon:H1,title:"Essential Cookies",description:"These cookies are necessary for the website to function properly and cannot be disabled.",examples:["Authentication and security cookies","Shopping cart functionality","Basic website navigation","Payment processing cookies"],duration:"Session or up to 1 year"},{icon:yl,title:"Analytics Cookies",description:"These cookies help us understand how visitors interact with our website.",examples:["Google Analytics tracking","Page view and user behavior data","Performance monitoring","Traffic source analysis"],duration:"Up to 2 years"},{icon:No,title:"Marketing Cookies",description:"These cookies are used to deliver relevant advertisements and track marketing campaigns.",examples:["Social media tracking pixels","Advertising network cookies","Retargeting campaigns","Conversion tracking"],duration:"Up to 1 year"},{icon:p0,title:"Preference Cookies",description:"These cookies remember your choices and preferences for a better user experience.",examples:["Language preferences","Theme and layout choices","Event preferences","Newsletter subscription status"],duration:"Up to 1 year"}];return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-black text-white py-20 px-4",children:[o.jsx(Do,{title:"Cookie Policy",description:"Carnival LDN Cookie Policy - Learn about how we use cookies to enhance your browsing experience and provide personalized content.",keywords:"Carnival LDN cookie policy, website cookies, London events cookies, privacy cookies, cookie management"}),o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs(qe.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-16",children:[o.jsx(qe.h1,{ref:t,className:`text-5xl md:text-6xl font-bold mb-6 glitch-text ${r?`glitch-active glitch-${i}`:""}`,"data-text":"COOKIE POLICY",style:{textTransform:"uppercase",letterSpacing:"0.1em"},children:"COOKIE POLICY"}),o.jsx(qe.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-xl text-gray-300 max-w-2xl mx-auto",children:"We use cookies to enhance your browsing experience and provide personalized content."}),o.jsxs(qe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-sm text-gray-400 mt-4",children:["Last updated: ",new Date().toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"})]})]}),o.jsxs(qe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-white/5 border border-white/20 rounded-2xl p-8 mb-12 backdrop-blur-sm",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:"What Are Cookies?"}),o.jsx("p",{className:"text-gray-300 leading-relaxed mb-4",children:"Cookies are small text files that are stored on your device when you visit our website. They help us provide you with a better experience by remembering your preferences, analyzing how you use our site, and personalizing content."}),o.jsx("p",{className:"text-gray-300 leading-relaxed",children:"By continuing to use our website, you consent to our use of cookies as described in this policy. You can manage your cookie preferences at any time through your browser settings or our cookie consent tool."})]}),o.jsxs("div",{className:"space-y-8 mb-12",children:[o.jsx(qe.h2,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.7},className:"text-3xl font-bold text-white text-center mb-8",children:"Types of Cookies We Use"}),a.map((c,l)=>o.jsxs(qe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.8+l*.1},className:"bg-white/5 border border-white/20 rounded-2xl p-8 backdrop-blur-sm hover:bg-white/10 transition-all duration-300",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-lg flex items-center justify-center mr-4",children:o.jsx(c.icon,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-bold text-white",children:c.title}),o.jsx("p",{className:"text-gray-400 text-sm",children:c.duration})]})]}),o.jsx("p",{className:"text-gray-300 mb-4 leading-relaxed",children:c.description}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-sm font-medium text-white mb-2",children:"Examples:"}),o.jsx("ul",{className:"space-y-2",children:c.examples.map((h,m)=>o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"w-2 h-2 bg-white rounded-full mt-2 mr-3 flex-shrink-0"}),o.jsx("span",{className:"text-gray-300 text-sm",children:h})]},m))})]})]},c.title))]}),o.jsxs(qe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:1.2},className:"bg-white/5 border border-white/20 rounded-2xl p-8 mb-12 backdrop-blur-sm",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:"Third-Party Cookies"}),o.jsx("p",{className:"text-gray-300 mb-4 leading-relaxed",children:"We work with trusted third-party services that may also place cookies on your device:"}),o.jsxs("div",{className:"space-y-3 text-gray-300",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Google Analytics:"})," Website analytics and performance tracking"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Stripe:"})," Secure payment processing"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Social Media:"})," Social sharing and engagement tracking"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Marketing Tools:"})," Campaign performance and conversion tracking"]})]})]}),o.jsxs(qe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:1.3},className:"bg-white/5 border border-white/20 rounded-2xl p-8 mb-12 backdrop-blur-sm",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:"Managing Your Cookie Preferences"}),o.jsxs("div",{className:"space-y-4 text-gray-300",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Browser Settings:"})," You can control cookies through your browser settings. Most browsers allow you to block or delete cookies."]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Cookie Consent Tool:"})," Use our cookie consent tool to manage your preferences for non-essential cookies."]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Opt-Out Links:"})," Some third-party services provide opt-out mechanisms for their cookies."]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Mobile Devices:"})," Cookie settings may vary on mobile devices and apps."]})]})]}),o.jsxs(qe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:1.4},className:"bg-white/5 border border-white/20 rounded-2xl p-8 mb-12 backdrop-blur-sm",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:"Impact of Disabling Cookies"}),o.jsx("p",{className:"text-gray-300 leading-relaxed",children:"While you can disable cookies, please note that some features of our website may not function properly without them. Essential cookies are required for basic functionality, and disabling others may affect your user experience."})]}),o.jsxs(qe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:1.5},className:"bg-white/5 border border-white/20 rounded-2xl p-8 mb-12 backdrop-blur-sm",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:"Questions About Cookies?"}),o.jsx("p",{className:"text-gray-300 mb-4",children:"If you have any questions about our use of cookies, please contact us:"}),o.jsxs("div",{className:"space-y-2 text-gray-300",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Email:"})," privacy@carnivalldn.com"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Phone:"})," +44 20 1234 5678"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Address:"})," 123 Event Street, London, UK"]})]})]}),o.jsx(qe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.7},className:"text-center",children:o.jsx("a",{href:"/",className:"inline-flex items-center px-6 py-3 bg-white/10 hover:bg-white/20 border border-white/20 rounded-lg text-white transition-all duration-300 hover:scale-105",children:"← Back to Home"})})]})]})};function M5(){const{getEvents:t,subscribeToEvents:r}=bs();return ve.useEffect(()=>{X0(),Ll("/","Carnival LDN - Home"),t();const i=r();return()=>{i==null||i.unsubscribe()}},[t,r]),o.jsxs("div",{className:"relative min-h-screen overflow-hidden",children:[o.jsx(Do,{title:"Home",description:"Carnival LDN - London's premier professional events company. From club nights to corporate events, Bollywood parties to Diwali celebrations. Creating unforgettable experiences since 2014.",keywords:"Carnival LDN, London events, nightlife London, club nights London, Bollywood parties London, Diwali celebrations London, New Year parties London, corporate events London, private parties London, event planning London, London nightlife, London party planning"}),o.jsx(Dm,{}),o.jsx(fd,{}),o.jsx(Y2,{}),o.jsx(_m,{}),o.jsx(Lm,{}),o.jsx(km,{}),o.jsx(gd,{})]})}function P5({children:t}){const{isAuthenticated:r}=bs();return r?o.jsx(o.Fragment,{children:t}):o.jsx(Wf,{to:"/admin",replace:!0})}function R5(){return o.jsx(W0,{children:o.jsxs(rg,{children:[o.jsxs(Xf,{children:[o.jsx(Si,{path:"/",element:o.jsx(M5,{})}),o.jsx(Si,{path:"/events",element:o.jsx(S5,{})}),o.jsx(Si,{path:"/gallery",element:o.jsx(_5,{})}),o.jsx(Si,{path:"/admin",element:o.jsx(Om,{})}),o.jsx(Si,{path:"/admin/dashboard",element:o.jsx(P5,{children:o.jsx(Pp,{})})}),o.jsx(Si,{path:"/scanner",element:o.jsx(E5,{})}),o.jsx(Si,{path:"/analytics",element:o.jsx(I5,{})}),o.jsx(Si,{path:"/privacy-policy",element:o.jsx(k5,{})}),o.jsx(Si,{path:"/terms-of-service",element:o.jsx(D5,{})}),o.jsx(Si,{path:"/cookie-policy",element:o.jsx(O5,{})}),o.jsx(Si,{path:"*",element:o.jsx(L5,{})})]}),o.jsx(pg,{}),o.jsx(Sg,{}),o.jsx(f2,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#1f2937",color:"#fff",borderRadius:"8px",padding:"12px 16px",fontSize:"14px",fontWeight:"500"},success:{iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})}Tc.createRoot(document.getElementById("root")).render(o.jsx(Ki.StrictMode,{children:o.jsx(R5,{})}));export{xr as _};
