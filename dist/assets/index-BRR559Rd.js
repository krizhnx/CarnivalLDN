function Eb(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var mi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function i1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function r8(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var _b={exports:{}},s1={},Tb={exports:{}},ln={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nh=Symbol.for("react.element"),i8=Symbol.for("react.portal"),s8=Symbol.for("react.fragment"),a8=Symbol.for("react.strict_mode"),o8=Symbol.for("react.profiler"),l8=Symbol.for("react.provider"),c8=Symbol.for("react.context"),u8=Symbol.for("react.forward_ref"),d8=Symbol.for("react.suspense"),h8=Symbol.for("react.memo"),f8=Symbol.for("react.lazy"),ky=Symbol.iterator;function p8(e){return e===null||typeof e!="object"?null:(e=ky&&e[ky]||e["@@iterator"],typeof e=="function"?e:null)}var Ib={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kb=Object.assign,Lb={};function Wu(e,t,n){this.props=e,this.context=t,this.refs=Lb,this.updater=n||Ib}Wu.prototype.isReactComponent={};Wu.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Wu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Pb(){}Pb.prototype=Wu.prototype;function x2(e,t,n){this.props=e,this.context=t,this.refs=Lb,this.updater=n||Ib}var y2=x2.prototype=new Pb;y2.constructor=x2;kb(y2,Wu.prototype);y2.isPureReactComponent=!0;var Ly=Array.isArray,jb=Object.prototype.hasOwnProperty,v2={current:null},Ob={key:!0,ref:!0,__self:!0,__source:!0};function Db(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)jb.call(t,r)&&!Ob.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var d=Array(u),f=0;f<u;f++)d[f]=arguments[f+2];i.children=d}if(e&&e.defaultProps)for(r in u=e.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:Nh,type:e,key:s,ref:o,props:i,_owner:v2.current}}function g8(e,t){return{$$typeof:Nh,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function w2(e){return typeof e=="object"&&e!==null&&e.$$typeof===Nh}function m8(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Py=/\/+/g;function pp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?m8(""+e.key):t.toString(36)}function qf(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Nh:case i8:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+pp(o,0):r,Ly(i)?(n="",e!=null&&(n=e.replace(Py,"$&/")+"/"),qf(i,t,n,"",function(f){return f})):i!=null&&(w2(i)&&(i=g8(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Py,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Ly(e))for(var u=0;u<e.length;u++){s=e[u];var d=r+pp(s,u);o+=qf(s,t,n,d,i)}else if(d=p8(e),typeof d=="function")for(e=d.call(e),u=0;!(s=e.next()).done;)s=s.value,d=r+pp(s,u++),o+=qf(s,t,n,d,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function uf(e,t,n){if(e==null)return e;var r=[],i=0;return qf(e,r,"","",function(s){return t.call(n,s,i++)}),r}function x8(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Gi={current:null},Wf={transition:null},y8={ReactCurrentDispatcher:Gi,ReactCurrentBatchConfig:Wf,ReactCurrentOwner:v2};function Rb(){throw Error("act(...) is not supported in production builds of React.")}ln.Children={map:uf,forEach:function(e,t,n){uf(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return uf(e,function(){t++}),t},toArray:function(e){return uf(e,function(t){return t})||[]},only:function(e){if(!w2(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ln.Component=Wu;ln.Fragment=s8;ln.Profiler=o8;ln.PureComponent=x2;ln.StrictMode=a8;ln.Suspense=d8;ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=y8;ln.act=Rb;ln.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=kb({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=v2.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(d in t)jb.call(t,d)&&!Ob.hasOwnProperty(d)&&(r[d]=t[d]===void 0&&u!==void 0?u[d]:t[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){u=Array(d);for(var f=0;f<d;f++)u[f]=arguments[f+2];r.children=u}return{$$typeof:Nh,type:e.type,key:i,ref:s,props:r,_owner:o}};ln.createContext=function(e){return e={$$typeof:c8,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:l8,_context:e},e.Consumer=e};ln.createElement=Db;ln.createFactory=function(e){var t=Db.bind(null,e);return t.type=e,t};ln.createRef=function(){return{current:null}};ln.forwardRef=function(e){return{$$typeof:u8,render:e}};ln.isValidElement=w2;ln.lazy=function(e){return{$$typeof:f8,_payload:{_status:-1,_result:e},_init:x8}};ln.memo=function(e,t){return{$$typeof:h8,type:e,compare:t===void 0?null:t}};ln.startTransition=function(e){var t=Wf.transition;Wf.transition={};try{e()}finally{Wf.transition=t}};ln.unstable_act=Rb;ln.useCallback=function(e,t){return Gi.current.useCallback(e,t)};ln.useContext=function(e){return Gi.current.useContext(e)};ln.useDebugValue=function(){};ln.useDeferredValue=function(e){return Gi.current.useDeferredValue(e)};ln.useEffect=function(e,t){return Gi.current.useEffect(e,t)};ln.useId=function(){return Gi.current.useId()};ln.useImperativeHandle=function(e,t,n){return Gi.current.useImperativeHandle(e,t,n)};ln.useInsertionEffect=function(e,t){return Gi.current.useInsertionEffect(e,t)};ln.useLayoutEffect=function(e,t){return Gi.current.useLayoutEffect(e,t)};ln.useMemo=function(e,t){return Gi.current.useMemo(e,t)};ln.useReducer=function(e,t,n){return Gi.current.useReducer(e,t,n)};ln.useRef=function(e){return Gi.current.useRef(e)};ln.useState=function(e){return Gi.current.useState(e)};ln.useSyncExternalStore=function(e,t,n){return Gi.current.useSyncExternalStore(e,t,n)};ln.useTransition=function(){return Gi.current.useTransition()};ln.version="18.3.1";Tb.exports=ln;var me=Tb.exports;const Wt=i1(me),v8=Eb({__proto__:null,default:Wt},[me]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w8=me,b8=Symbol.for("react.element"),A8=Symbol.for("react.fragment"),S8=Object.prototype.hasOwnProperty,N8=w8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,C8={key:!0,ref:!0,__self:!0,__source:!0};function Mb(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)S8.call(t,r)&&!C8.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:b8,type:e,key:s,ref:o,props:i,_owner:N8.current}}s1.Fragment=A8;s1.jsx=Mb;s1.jsxs=Mb;_b.exports=s1;var m=_b.exports,Sg={},Bb={exports:{}},Is={},Fb={exports:{}},Ub={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ue,Se){var _e=ue.length;ue.push(Se);e:for(;0<_e;){var Me=_e-1>>>1,V=ue[Me];if(0<i(V,Se))ue[Me]=Se,ue[_e]=V,_e=Me;else break e}}function n(ue){return ue.length===0?null:ue[0]}function r(ue){if(ue.length===0)return null;var Se=ue[0],_e=ue.pop();if(_e!==Se){ue[0]=_e;e:for(var Me=0,V=ue.length,se=V>>>1;Me<se;){var de=2*(Me+1)-1,xe=ue[de],he=de+1,Pe=ue[he];if(0>i(xe,_e))he<V&&0>i(Pe,xe)?(ue[Me]=Pe,ue[he]=_e,Me=he):(ue[Me]=xe,ue[de]=_e,Me=de);else if(he<V&&0>i(Pe,_e))ue[Me]=Pe,ue[he]=_e,Me=he;else break e}}return Se}function i(ue,Se){var _e=ue.sortIndex-Se.sortIndex;return _e!==0?_e:ue.id-Se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,u=o.now();e.unstable_now=function(){return o.now()-u}}var d=[],f=[],x=1,y=null,A=3,b=!1,P=!1,I=!1,j=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(ue){for(var Se=n(f);Se!==null;){if(Se.callback===null)r(f);else if(Se.startTime<=ue)r(f),Se.sortIndex=Se.expirationTime,t(d,Se);else break;Se=n(f)}}function R(ue){if(I=!1,k(ue),!P)if(n(d)!==null)P=!0,pe(M);else{var Se=n(f);Se!==null&&ge(R,Se.startTime-ue)}}function M(ue,Se){P=!1,I&&(I=!1,C(K),K=-1),b=!0;var _e=A;try{for(k(Se),y=n(d);y!==null&&(!(y.expirationTime>Se)||ue&&!$());){var Me=y.callback;if(typeof Me=="function"){y.callback=null,A=y.priorityLevel;var V=Me(y.expirationTime<=Se);Se=e.unstable_now(),typeof V=="function"?y.callback=V:y===n(d)&&r(d),k(Se)}else r(d);y=n(d)}if(y!==null)var se=!0;else{var de=n(f);de!==null&&ge(R,de.startTime-Se),se=!1}return se}finally{y=null,A=_e,b=!1}}var ne=!1,U=null,K=-1,te=5,be=-1;function $(){return!(e.unstable_now()-be<te)}function q(){if(U!==null){var ue=e.unstable_now();be=ue;var Se=!0;try{Se=U(!0,ue)}finally{Se?X():(ne=!1,U=null)}}else ne=!1}var X;if(typeof _=="function")X=function(){_(q)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,J=Q.port2;Q.port1.onmessage=q,X=function(){J.postMessage(null)}}else X=function(){j(q,0)};function pe(ue){U=ue,ne||(ne=!0,X())}function ge(ue,Se){K=j(function(){ue(e.unstable_now())},Se)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ue){ue.callback=null},e.unstable_continueExecution=function(){P||b||(P=!0,pe(M))},e.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<ue?Math.floor(1e3/ue):5},e.unstable_getCurrentPriorityLevel=function(){return A},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(ue){switch(A){case 1:case 2:case 3:var Se=3;break;default:Se=A}var _e=A;A=Se;try{return ue()}finally{A=_e}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ue,Se){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var _e=A;A=ue;try{return Se()}finally{A=_e}},e.unstable_scheduleCallback=function(ue,Se,_e){var Me=e.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?Me+_e:Me):_e=Me,ue){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=_e+V,ue={id:x++,callback:Se,priorityLevel:ue,startTime:_e,expirationTime:V,sortIndex:-1},_e>Me?(ue.sortIndex=_e,t(f,ue),n(d)===null&&ue===n(f)&&(I?(C(K),K=-1):I=!0,ge(R,_e-Me))):(ue.sortIndex=V,t(d,ue),P||b||(P=!0,pe(M))),ue},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(ue){var Se=A;return function(){var _e=A;A=Se;try{return ue.apply(this,arguments)}finally{A=_e}}}})(Ub);Fb.exports=Ub;var E8=Fb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _8=me,_s=E8;function ut(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Vb=new Set,Qd={};function Nc(e,t){Iu(e,t),Iu(e+"Capture",t)}function Iu(e,t){for(Qd[e]=t,e=0;e<t.length;e++)Vb.add(t[e])}var go=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ng=Object.prototype.hasOwnProperty,T8=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jy={},Oy={};function I8(e){return Ng.call(Oy,e)?!0:Ng.call(jy,e)?!1:T8.test(e)?Oy[e]=!0:(jy[e]=!0,!1)}function k8(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function L8(e,t,n,r){if(t===null||typeof t>"u"||k8(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function $i(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var yi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){yi[e]=new $i(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];yi[t]=new $i(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){yi[e]=new $i(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){yi[e]=new $i(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){yi[e]=new $i(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){yi[e]=new $i(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){yi[e]=new $i(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){yi[e]=new $i(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){yi[e]=new $i(e,5,!1,e.toLowerCase(),null,!1,!1)});var b2=/[\-:]([a-z])/g;function A2(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(b2,A2);yi[t]=new $i(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(b2,A2);yi[t]=new $i(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(b2,A2);yi[t]=new $i(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){yi[e]=new $i(e,1,!1,e.toLowerCase(),null,!1,!1)});yi.xlinkHref=new $i("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){yi[e]=new $i(e,1,!1,e.toLowerCase(),null,!0,!0)});function S2(e,t,n,r){var i=yi.hasOwnProperty(t)?yi[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(L8(t,n,i,r)&&(n=null),r||i===null?I8(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ao=_8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,df=Symbol.for("react.element"),tu=Symbol.for("react.portal"),nu=Symbol.for("react.fragment"),N2=Symbol.for("react.strict_mode"),Cg=Symbol.for("react.profiler"),zb=Symbol.for("react.provider"),Hb=Symbol.for("react.context"),C2=Symbol.for("react.forward_ref"),Eg=Symbol.for("react.suspense"),_g=Symbol.for("react.suspense_list"),E2=Symbol.for("react.memo"),Yo=Symbol.for("react.lazy"),qb=Symbol.for("react.offscreen"),Dy=Symbol.iterator;function ld(e){return e===null||typeof e!="object"?null:(e=Dy&&e[Dy]||e["@@iterator"],typeof e=="function"?e:null)}var pr=Object.assign,gp;function Cd(e){if(gp===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);gp=t&&t[1]||""}return`
`+gp+e}var mp=!1;function xp(e,t){if(!e||mp)return"";mp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var r=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){r=f}e.call(t.prototype)}else{try{throw Error()}catch(f){r=f}e()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,u=s.length-1;1<=o&&0<=u&&i[o]!==s[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==s[u]){if(o!==1||u!==1)do if(o--,u--,0>u||i[o]!==s[u]){var d=`
`+i[o].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=o&&0<=u);break}}}finally{mp=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Cd(e):""}function P8(e){switch(e.tag){case 5:return Cd(e.type);case 16:return Cd("Lazy");case 13:return Cd("Suspense");case 19:return Cd("SuspenseList");case 0:case 2:case 15:return e=xp(e.type,!1),e;case 11:return e=xp(e.type.render,!1),e;case 1:return e=xp(e.type,!0),e;default:return""}}function Tg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case nu:return"Fragment";case tu:return"Portal";case Cg:return"Profiler";case N2:return"StrictMode";case Eg:return"Suspense";case _g:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Hb:return(e.displayName||"Context")+".Consumer";case zb:return(e._context.displayName||"Context")+".Provider";case C2:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case E2:return t=e.displayName||null,t!==null?t:Tg(e.type)||"Memo";case Yo:t=e._payload,e=e._init;try{return Tg(e(t))}catch{}}return null}function j8(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tg(t);case 8:return t===N2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ml(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Wb(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function O8(e){var t=Wb(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function hf(e){e._valueTracker||(e._valueTracker=O8(e))}function Gb(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Wb(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function d0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ig(e,t){var n=t.checked;return pr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Ry(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ml(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function $b(e,t){t=t.checked,t!=null&&S2(e,"checked",t,!1)}function kg(e,t){$b(e,t);var n=ml(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Lg(e,t.type,n):t.hasOwnProperty("defaultValue")&&Lg(e,t.type,ml(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function My(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Lg(e,t,n){(t!=="number"||d0(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ed=Array.isArray;function vu(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ml(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Pg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ut(91));return pr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function By(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ut(92));if(Ed(n)){if(1<n.length)throw Error(ut(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ml(n)}}function Yb(e,t){var n=ml(t.value),r=ml(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Fy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Xb(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Xb(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ff,Kb=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ff=ff||document.createElement("div"),ff.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ff.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Jd(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ld={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},D8=["Webkit","ms","Moz","O"];Object.keys(Ld).forEach(function(e){D8.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ld[t]=Ld[e]})});function Zb(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ld.hasOwnProperty(e)&&Ld[e]?(""+t).trim():t+"px"}function Qb(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Zb(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var R8=pr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Og(e,t){if(t){if(R8[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ut(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ut(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ut(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ut(62))}}function Dg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rg=null;function _2(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Mg=null,wu=null,bu=null;function Uy(e){if(e=_h(e)){if(typeof Mg!="function")throw Error(ut(280));var t=e.stateNode;t&&(t=u1(t),Mg(e.stateNode,e.type,t))}}function Jb(e){wu?bu?bu.push(e):bu=[e]:wu=e}function e3(){if(wu){var e=wu,t=bu;if(bu=wu=null,Uy(e),t)for(e=0;e<t.length;e++)Uy(t[e])}}function t3(e,t){return e(t)}function n3(){}var yp=!1;function r3(e,t,n){if(yp)return e(t,n);yp=!0;try{return t3(e,t,n)}finally{yp=!1,(wu!==null||bu!==null)&&(n3(),e3())}}function eh(e,t){var n=e.stateNode;if(n===null)return null;var r=u1(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ut(231,t,typeof n));return n}var Bg=!1;if(go)try{var cd={};Object.defineProperty(cd,"passive",{get:function(){Bg=!0}}),window.addEventListener("test",cd,cd),window.removeEventListener("test",cd,cd)}catch{Bg=!1}function M8(e,t,n,r,i,s,o,u,d){var f=Array.prototype.slice.call(arguments,3);try{t.apply(n,f)}catch(x){this.onError(x)}}var Pd=!1,h0=null,f0=!1,Fg=null,B8={onError:function(e){Pd=!0,h0=e}};function F8(e,t,n,r,i,s,o,u,d){Pd=!1,h0=null,M8.apply(B8,arguments)}function U8(e,t,n,r,i,s,o,u,d){if(F8.apply(this,arguments),Pd){if(Pd){var f=h0;Pd=!1,h0=null}else throw Error(ut(198));f0||(f0=!0,Fg=f)}}function Cc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function i3(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Vy(e){if(Cc(e)!==e)throw Error(ut(188))}function V8(e){var t=e.alternate;if(!t){if(t=Cc(e),t===null)throw Error(ut(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Vy(i),e;if(s===r)return Vy(i),t;s=s.sibling}throw Error(ut(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o){for(u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o)throw Error(ut(189))}}if(n.alternate!==r)throw Error(ut(190))}if(n.tag!==3)throw Error(ut(188));return n.stateNode.current===n?e:t}function s3(e){return e=V8(e),e!==null?a3(e):null}function a3(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=a3(e);if(t!==null)return t;e=e.sibling}return null}var o3=_s.unstable_scheduleCallback,zy=_s.unstable_cancelCallback,z8=_s.unstable_shouldYield,H8=_s.unstable_requestPaint,Tr=_s.unstable_now,q8=_s.unstable_getCurrentPriorityLevel,T2=_s.unstable_ImmediatePriority,l3=_s.unstable_UserBlockingPriority,p0=_s.unstable_NormalPriority,W8=_s.unstable_LowPriority,c3=_s.unstable_IdlePriority,a1=null,Ma=null;function G8(e){if(Ma&&typeof Ma.onCommitFiberRoot=="function")try{Ma.onCommitFiberRoot(a1,e,void 0,(e.current.flags&128)===128)}catch{}}var ga=Math.clz32?Math.clz32:X8,$8=Math.log,Y8=Math.LN2;function X8(e){return e>>>=0,e===0?32:31-($8(e)/Y8|0)|0}var pf=64,gf=4194304;function _d(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function g0(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var u=o&~i;u!==0?r=_d(u):(s&=o,s!==0&&(r=_d(s)))}else o=n&~i,o!==0?r=_d(o):s!==0&&(r=_d(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ga(t),i=1<<n,r|=e[n],t&=~i;return r}function K8(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Z8(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ga(s),u=1<<o,d=i[o];d===-1?(!(u&n)||u&r)&&(i[o]=K8(u,t)):d<=t&&(e.expiredLanes|=u),s&=~u}}function Ug(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function u3(){var e=pf;return pf<<=1,!(pf&4194240)&&(pf=64),e}function vp(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ch(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ga(t),e[t]=n}function Q8(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ga(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function I2(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ga(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var In=0;function d3(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var h3,k2,f3,p3,g3,Vg=!1,mf=[],ol=null,ll=null,cl=null,th=new Map,nh=new Map,Zo=[],J8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hy(e,t){switch(e){case"focusin":case"focusout":ol=null;break;case"dragenter":case"dragleave":ll=null;break;case"mouseover":case"mouseout":cl=null;break;case"pointerover":case"pointerout":th.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":nh.delete(t.pointerId)}}function ud(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=_h(t),t!==null&&k2(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function eC(e,t,n,r,i){switch(t){case"focusin":return ol=ud(ol,e,t,n,r,i),!0;case"dragenter":return ll=ud(ll,e,t,n,r,i),!0;case"mouseover":return cl=ud(cl,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return th.set(s,ud(th.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,nh.set(s,ud(nh.get(s)||null,e,t,n,r,i)),!0}return!1}function m3(e){var t=oc(e.target);if(t!==null){var n=Cc(t);if(n!==null){if(t=n.tag,t===13){if(t=i3(n),t!==null){e.blockedOn=t,g3(e.priority,function(){f3(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Gf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=zg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Rg=r,n.target.dispatchEvent(r),Rg=null}else return t=_h(n),t!==null&&k2(t),e.blockedOn=n,!1;t.shift()}return!0}function qy(e,t,n){Gf(e)&&n.delete(t)}function tC(){Vg=!1,ol!==null&&Gf(ol)&&(ol=null),ll!==null&&Gf(ll)&&(ll=null),cl!==null&&Gf(cl)&&(cl=null),th.forEach(qy),nh.forEach(qy)}function dd(e,t){e.blockedOn===t&&(e.blockedOn=null,Vg||(Vg=!0,_s.unstable_scheduleCallback(_s.unstable_NormalPriority,tC)))}function rh(e){function t(i){return dd(i,e)}if(0<mf.length){dd(mf[0],e);for(var n=1;n<mf.length;n++){var r=mf[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ol!==null&&dd(ol,e),ll!==null&&dd(ll,e),cl!==null&&dd(cl,e),th.forEach(t),nh.forEach(t),n=0;n<Zo.length;n++)r=Zo[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Zo.length&&(n=Zo[0],n.blockedOn===null);)m3(n),n.blockedOn===null&&Zo.shift()}var Au=Ao.ReactCurrentBatchConfig,m0=!0;function nC(e,t,n,r){var i=In,s=Au.transition;Au.transition=null;try{In=1,L2(e,t,n,r)}finally{In=i,Au.transition=s}}function rC(e,t,n,r){var i=In,s=Au.transition;Au.transition=null;try{In=4,L2(e,t,n,r)}finally{In=i,Au.transition=s}}function L2(e,t,n,r){if(m0){var i=zg(e,t,n,r);if(i===null)Ip(e,t,r,x0,n),Hy(e,r);else if(eC(i,e,t,n,r))r.stopPropagation();else if(Hy(e,r),t&4&&-1<J8.indexOf(e)){for(;i!==null;){var s=_h(i);if(s!==null&&h3(s),s=zg(e,t,n,r),s===null&&Ip(e,t,r,x0,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ip(e,t,r,null,n)}}var x0=null;function zg(e,t,n,r){if(x0=null,e=_2(r),e=oc(e),e!==null)if(t=Cc(e),t===null)e=null;else if(n=t.tag,n===13){if(e=i3(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return x0=e,null}function x3(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(q8()){case T2:return 1;case l3:return 4;case p0:case W8:return 16;case c3:return 536870912;default:return 16}default:return 16}}var nl=null,P2=null,$f=null;function y3(){if($f)return $f;var e,t=P2,n=t.length,r,i="value"in nl?nl.value:nl.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return $f=i.slice(e,1<r?1-r:void 0)}function Yf(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function xf(){return!0}function Wy(){return!1}function ks(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(s):s[u]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?xf:Wy,this.isPropagationStopped=Wy,this}return pr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xf)},persist:function(){},isPersistent:xf}),t}var Gu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},j2=ks(Gu),Eh=pr({},Gu,{view:0,detail:0}),iC=ks(Eh),wp,bp,hd,o1=pr({},Eh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:O2,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hd&&(hd&&e.type==="mousemove"?(wp=e.screenX-hd.screenX,bp=e.screenY-hd.screenY):bp=wp=0,hd=e),wp)},movementY:function(e){return"movementY"in e?e.movementY:bp}}),Gy=ks(o1),sC=pr({},o1,{dataTransfer:0}),aC=ks(sC),oC=pr({},Eh,{relatedTarget:0}),Ap=ks(oC),lC=pr({},Gu,{animationName:0,elapsedTime:0,pseudoElement:0}),cC=ks(lC),uC=pr({},Gu,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),dC=ks(uC),hC=pr({},Gu,{data:0}),$y=ks(hC),fC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mC(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=gC[e])?!!t[e]:!1}function O2(){return mC}var xC=pr({},Eh,{key:function(e){if(e.key){var t=fC[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Yf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pC[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:O2,charCode:function(e){return e.type==="keypress"?Yf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Yf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),yC=ks(xC),vC=pr({},o1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yy=ks(vC),wC=pr({},Eh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:O2}),bC=ks(wC),AC=pr({},Gu,{propertyName:0,elapsedTime:0,pseudoElement:0}),SC=ks(AC),NC=pr({},o1,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),CC=ks(NC),EC=[9,13,27,32],D2=go&&"CompositionEvent"in window,jd=null;go&&"documentMode"in document&&(jd=document.documentMode);var _C=go&&"TextEvent"in window&&!jd,v3=go&&(!D2||jd&&8<jd&&11>=jd),Xy=" ",Ky=!1;function w3(e,t){switch(e){case"keyup":return EC.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function b3(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ru=!1;function TC(e,t){switch(e){case"compositionend":return b3(t);case"keypress":return t.which!==32?null:(Ky=!0,Xy);case"textInput":return e=t.data,e===Xy&&Ky?null:e;default:return null}}function IC(e,t){if(ru)return e==="compositionend"||!D2&&w3(e,t)?(e=y3(),$f=P2=nl=null,ru=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return v3&&t.locale!=="ko"?null:t.data;default:return null}}var kC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!kC[e.type]:t==="textarea"}function A3(e,t,n,r){Jb(r),t=y0(t,"onChange"),0<t.length&&(n=new j2("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Od=null,ih=null;function LC(e){j3(e,0)}function l1(e){var t=au(e);if(Gb(t))return e}function PC(e,t){if(e==="change")return t}var S3=!1;if(go){var Sp;if(go){var Np="oninput"in document;if(!Np){var Qy=document.createElement("div");Qy.setAttribute("oninput","return;"),Np=typeof Qy.oninput=="function"}Sp=Np}else Sp=!1;S3=Sp&&(!document.documentMode||9<document.documentMode)}function Jy(){Od&&(Od.detachEvent("onpropertychange",N3),ih=Od=null)}function N3(e){if(e.propertyName==="value"&&l1(ih)){var t=[];A3(t,ih,e,_2(e)),r3(LC,t)}}function jC(e,t,n){e==="focusin"?(Jy(),Od=t,ih=n,Od.attachEvent("onpropertychange",N3)):e==="focusout"&&Jy()}function OC(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return l1(ih)}function DC(e,t){if(e==="click")return l1(t)}function RC(e,t){if(e==="input"||e==="change")return l1(t)}function MC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xa=typeof Object.is=="function"?Object.is:MC;function sh(e,t){if(xa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ng.call(t,i)||!xa(e[i],t[i]))return!1}return!0}function ev(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tv(e,t){var n=ev(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ev(n)}}function C3(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?C3(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function E3(){for(var e=window,t=d0();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=d0(e.document)}return t}function R2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function BC(e){var t=E3(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&C3(n.ownerDocument.documentElement,n)){if(r!==null&&R2(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=tv(n,s);var o=tv(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var FC=go&&"documentMode"in document&&11>=document.documentMode,iu=null,Hg=null,Dd=null,qg=!1;function nv(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qg||iu==null||iu!==d0(r)||(r=iu,"selectionStart"in r&&R2(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Dd&&sh(Dd,r)||(Dd=r,r=y0(Hg,"onSelect"),0<r.length&&(t=new j2("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=iu)))}function yf(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var su={animationend:yf("Animation","AnimationEnd"),animationiteration:yf("Animation","AnimationIteration"),animationstart:yf("Animation","AnimationStart"),transitionend:yf("Transition","TransitionEnd")},Cp={},_3={};go&&(_3=document.createElement("div").style,"AnimationEvent"in window||(delete su.animationend.animation,delete su.animationiteration.animation,delete su.animationstart.animation),"TransitionEvent"in window||delete su.transitionend.transition);function c1(e){if(Cp[e])return Cp[e];if(!su[e])return e;var t=su[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in _3)return Cp[e]=t[n];return e}var T3=c1("animationend"),I3=c1("animationiteration"),k3=c1("animationstart"),L3=c1("transitionend"),P3=new Map,rv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nl(e,t){P3.set(e,t),Nc(t,[e])}for(var Ep=0;Ep<rv.length;Ep++){var _p=rv[Ep],UC=_p.toLowerCase(),VC=_p[0].toUpperCase()+_p.slice(1);Nl(UC,"on"+VC)}Nl(T3,"onAnimationEnd");Nl(I3,"onAnimationIteration");Nl(k3,"onAnimationStart");Nl("dblclick","onDoubleClick");Nl("focusin","onFocus");Nl("focusout","onBlur");Nl(L3,"onTransitionEnd");Iu("onMouseEnter",["mouseout","mouseover"]);Iu("onMouseLeave",["mouseout","mouseover"]);Iu("onPointerEnter",["pointerout","pointerover"]);Iu("onPointerLeave",["pointerout","pointerover"]);Nc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Nc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Nc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Nc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Nc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Nc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Td="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Td));function iv(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,U8(r,t,void 0,e),e.currentTarget=null}function j3(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],d=u.instance,f=u.currentTarget;if(u=u.listener,d!==s&&i.isPropagationStopped())break e;iv(i,u,f),s=d}else for(o=0;o<r.length;o++){if(u=r[o],d=u.instance,f=u.currentTarget,u=u.listener,d!==s&&i.isPropagationStopped())break e;iv(i,u,f),s=d}}}if(f0)throw e=Fg,f0=!1,Fg=null,e}function Xn(e,t){var n=t[Xg];n===void 0&&(n=t[Xg]=new Set);var r=e+"__bubble";n.has(r)||(O3(t,e,2,!1),n.add(r))}function Tp(e,t,n){var r=0;t&&(r|=4),O3(n,e,r,t)}var vf="_reactListening"+Math.random().toString(36).slice(2);function ah(e){if(!e[vf]){e[vf]=!0,Vb.forEach(function(n){n!=="selectionchange"&&(zC.has(n)||Tp(n,!1,e),Tp(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[vf]||(t[vf]=!0,Tp("selectionchange",!1,t))}}function O3(e,t,n,r){switch(x3(t)){case 1:var i=nC;break;case 4:i=rC;break;default:i=L2}n=i.bind(null,t,n,e),i=void 0,!Bg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Ip(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;o=o.return}for(;u!==null;){if(o=oc(u),o===null)return;if(d=o.tag,d===5||d===6){r=s=o;continue e}u=u.parentNode}}r=r.return}r3(function(){var f=s,x=_2(n),y=[];e:{var A=P3.get(e);if(A!==void 0){var b=j2,P=e;switch(e){case"keypress":if(Yf(n)===0)break e;case"keydown":case"keyup":b=yC;break;case"focusin":P="focus",b=Ap;break;case"focusout":P="blur",b=Ap;break;case"beforeblur":case"afterblur":b=Ap;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=Gy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=aC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=bC;break;case T3:case I3:case k3:b=cC;break;case L3:b=SC;break;case"scroll":b=iC;break;case"wheel":b=CC;break;case"copy":case"cut":case"paste":b=dC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=Yy}var I=(t&4)!==0,j=!I&&e==="scroll",C=I?A!==null?A+"Capture":null:A;I=[];for(var _=f,k;_!==null;){k=_;var R=k.stateNode;if(k.tag===5&&R!==null&&(k=R,C!==null&&(R=eh(_,C),R!=null&&I.push(oh(_,R,k)))),j)break;_=_.return}0<I.length&&(A=new b(A,P,null,n,x),y.push({event:A,listeners:I}))}}if(!(t&7)){e:{if(A=e==="mouseover"||e==="pointerover",b=e==="mouseout"||e==="pointerout",A&&n!==Rg&&(P=n.relatedTarget||n.fromElement)&&(oc(P)||P[mo]))break e;if((b||A)&&(A=x.window===x?x:(A=x.ownerDocument)?A.defaultView||A.parentWindow:window,b?(P=n.relatedTarget||n.toElement,b=f,P=P?oc(P):null,P!==null&&(j=Cc(P),P!==j||P.tag!==5&&P.tag!==6)&&(P=null)):(b=null,P=f),b!==P)){if(I=Gy,R="onMouseLeave",C="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(I=Yy,R="onPointerLeave",C="onPointerEnter",_="pointer"),j=b==null?A:au(b),k=P==null?A:au(P),A=new I(R,_+"leave",b,n,x),A.target=j,A.relatedTarget=k,R=null,oc(x)===f&&(I=new I(C,_+"enter",P,n,x),I.target=k,I.relatedTarget=j,R=I),j=R,b&&P)t:{for(I=b,C=P,_=0,k=I;k;k=Vc(k))_++;for(k=0,R=C;R;R=Vc(R))k++;for(;0<_-k;)I=Vc(I),_--;for(;0<k-_;)C=Vc(C),k--;for(;_--;){if(I===C||C!==null&&I===C.alternate)break t;I=Vc(I),C=Vc(C)}I=null}else I=null;b!==null&&sv(y,A,b,I,!1),P!==null&&j!==null&&sv(y,j,P,I,!0)}}e:{if(A=f?au(f):window,b=A.nodeName&&A.nodeName.toLowerCase(),b==="select"||b==="input"&&A.type==="file")var M=PC;else if(Zy(A))if(S3)M=RC;else{M=OC;var ne=jC}else(b=A.nodeName)&&b.toLowerCase()==="input"&&(A.type==="checkbox"||A.type==="radio")&&(M=DC);if(M&&(M=M(e,f))){A3(y,M,n,x);break e}ne&&ne(e,A,f),e==="focusout"&&(ne=A._wrapperState)&&ne.controlled&&A.type==="number"&&Lg(A,"number",A.value)}switch(ne=f?au(f):window,e){case"focusin":(Zy(ne)||ne.contentEditable==="true")&&(iu=ne,Hg=f,Dd=null);break;case"focusout":Dd=Hg=iu=null;break;case"mousedown":qg=!0;break;case"contextmenu":case"mouseup":case"dragend":qg=!1,nv(y,n,x);break;case"selectionchange":if(FC)break;case"keydown":case"keyup":nv(y,n,x)}var U;if(D2)e:{switch(e){case"compositionstart":var K="onCompositionStart";break e;case"compositionend":K="onCompositionEnd";break e;case"compositionupdate":K="onCompositionUpdate";break e}K=void 0}else ru?w3(e,n)&&(K="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(K="onCompositionStart");K&&(v3&&n.locale!=="ko"&&(ru||K!=="onCompositionStart"?K==="onCompositionEnd"&&ru&&(U=y3()):(nl=x,P2="value"in nl?nl.value:nl.textContent,ru=!0)),ne=y0(f,K),0<ne.length&&(K=new $y(K,e,null,n,x),y.push({event:K,listeners:ne}),U?K.data=U:(U=b3(n),U!==null&&(K.data=U)))),(U=_C?TC(e,n):IC(e,n))&&(f=y0(f,"onBeforeInput"),0<f.length&&(x=new $y("onBeforeInput","beforeinput",null,n,x),y.push({event:x,listeners:f}),x.data=U))}j3(y,t)})}function oh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function y0(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=eh(e,n),s!=null&&r.unshift(oh(e,s,i)),s=eh(e,t),s!=null&&r.push(oh(e,s,i))),e=e.return}return r}function Vc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function sv(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var u=n,d=u.alternate,f=u.stateNode;if(d!==null&&d===r)break;u.tag===5&&f!==null&&(u=f,i?(d=eh(n,s),d!=null&&o.unshift(oh(n,d,u))):i||(d=eh(n,s),d!=null&&o.push(oh(n,d,u)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var HC=/\r\n?/g,qC=/\u0000|\uFFFD/g;function av(e){return(typeof e=="string"?e:""+e).replace(HC,`
`).replace(qC,"")}function wf(e,t,n){if(t=av(t),av(e)!==t&&n)throw Error(ut(425))}function v0(){}var Wg=null,Gg=null;function $g(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Yg=typeof setTimeout=="function"?setTimeout:void 0,WC=typeof clearTimeout=="function"?clearTimeout:void 0,ov=typeof Promise=="function"?Promise:void 0,GC=typeof queueMicrotask=="function"?queueMicrotask:typeof ov<"u"?function(e){return ov.resolve(null).then(e).catch($C)}:Yg;function $C(e){setTimeout(function(){throw e})}function kp(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),rh(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);rh(t)}function ul(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function lv(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var $u=Math.random().toString(36).slice(2),ja="__reactFiber$"+$u,lh="__reactProps$"+$u,mo="__reactContainer$"+$u,Xg="__reactEvents$"+$u,YC="__reactListeners$"+$u,XC="__reactHandles$"+$u;function oc(e){var t=e[ja];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mo]||n[ja]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=lv(e);e!==null;){if(n=e[ja])return n;e=lv(e)}return t}e=n,n=e.parentNode}return null}function _h(e){return e=e[ja]||e[mo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function au(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ut(33))}function u1(e){return e[lh]||null}var Kg=[],ou=-1;function Cl(e){return{current:e}}function Qn(e){0>ou||(e.current=Kg[ou],Kg[ou]=null,ou--)}function zn(e,t){ou++,Kg[ou]=e.current,e.current=t}var xl={},Oi=Cl(xl),ss=Cl(!1),yc=xl;function ku(e,t){var n=e.type.contextTypes;if(!n)return xl;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function as(e){return e=e.childContextTypes,e!=null}function w0(){Qn(ss),Qn(Oi)}function cv(e,t,n){if(Oi.current!==xl)throw Error(ut(168));zn(Oi,t),zn(ss,n)}function D3(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(ut(108,j8(e)||"Unknown",i));return pr({},n,r)}function b0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xl,yc=Oi.current,zn(Oi,e),zn(ss,ss.current),!0}function uv(e,t,n){var r=e.stateNode;if(!r)throw Error(ut(169));n?(e=D3(e,t,yc),r.__reactInternalMemoizedMergedChildContext=e,Qn(ss),Qn(Oi),zn(Oi,e)):Qn(ss),zn(ss,n)}var ao=null,d1=!1,Lp=!1;function R3(e){ao===null?ao=[e]:ao.push(e)}function KC(e){d1=!0,R3(e)}function El(){if(!Lp&&ao!==null){Lp=!0;var e=0,t=In;try{var n=ao;for(In=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ao=null,d1=!1}catch(i){throw ao!==null&&(ao=ao.slice(e+1)),o3(T2,El),i}finally{In=t,Lp=!1}}return null}var lu=[],cu=0,A0=null,S0=0,qs=[],Ws=0,vc=null,oo=1,lo="";function Ql(e,t){lu[cu++]=S0,lu[cu++]=A0,A0=e,S0=t}function M3(e,t,n){qs[Ws++]=oo,qs[Ws++]=lo,qs[Ws++]=vc,vc=e;var r=oo;e=lo;var i=32-ga(r)-1;r&=~(1<<i),n+=1;var s=32-ga(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,oo=1<<32-ga(t)+i|n<<i|r,lo=s+e}else oo=1<<s|n<<i|r,lo=e}function M2(e){e.return!==null&&(Ql(e,1),M3(e,1,0))}function B2(e){for(;e===A0;)A0=lu[--cu],lu[cu]=null,S0=lu[--cu],lu[cu]=null;for(;e===vc;)vc=qs[--Ws],qs[Ws]=null,lo=qs[--Ws],qs[Ws]=null,oo=qs[--Ws],qs[Ws]=null}var Cs=null,Ss=null,sr=!1,ha=null;function B3(e,t){var n=Gs(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function dv(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Cs=e,Ss=ul(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Cs=e,Ss=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=vc!==null?{id:oo,overflow:lo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Gs(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Cs=e,Ss=null,!0):!1;default:return!1}}function Zg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Qg(e){if(sr){var t=Ss;if(t){var n=t;if(!dv(e,t)){if(Zg(e))throw Error(ut(418));t=ul(n.nextSibling);var r=Cs;t&&dv(e,t)?B3(r,n):(e.flags=e.flags&-4097|2,sr=!1,Cs=e)}}else{if(Zg(e))throw Error(ut(418));e.flags=e.flags&-4097|2,sr=!1,Cs=e}}}function hv(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Cs=e}function bf(e){if(e!==Cs)return!1;if(!sr)return hv(e),sr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!$g(e.type,e.memoizedProps)),t&&(t=Ss)){if(Zg(e))throw F3(),Error(ut(418));for(;t;)B3(e,t),t=ul(t.nextSibling)}if(hv(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ut(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ss=ul(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ss=null}}else Ss=Cs?ul(e.stateNode.nextSibling):null;return!0}function F3(){for(var e=Ss;e;)e=ul(e.nextSibling)}function Lu(){Ss=Cs=null,sr=!1}function F2(e){ha===null?ha=[e]:ha.push(e)}var ZC=Ao.ReactCurrentBatchConfig;function fd(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ut(309));var r=n.stateNode}if(!r)throw Error(ut(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var u=i.refs;o===null?delete u[s]:u[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(ut(284));if(!n._owner)throw Error(ut(290,e))}return e}function Af(e,t){throw e=Object.prototype.toString.call(t),Error(ut(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fv(e){var t=e._init;return t(e._payload)}function U3(e){function t(C,_){if(e){var k=C.deletions;k===null?(C.deletions=[_],C.flags|=16):k.push(_)}}function n(C,_){if(!e)return null;for(;_!==null;)t(C,_),_=_.sibling;return null}function r(C,_){for(C=new Map;_!==null;)_.key!==null?C.set(_.key,_):C.set(_.index,_),_=_.sibling;return C}function i(C,_){return C=pl(C,_),C.index=0,C.sibling=null,C}function s(C,_,k){return C.index=k,e?(k=C.alternate,k!==null?(k=k.index,k<_?(C.flags|=2,_):k):(C.flags|=2,_)):(C.flags|=1048576,_)}function o(C){return e&&C.alternate===null&&(C.flags|=2),C}function u(C,_,k,R){return _===null||_.tag!==6?(_=Bp(k,C.mode,R),_.return=C,_):(_=i(_,k),_.return=C,_)}function d(C,_,k,R){var M=k.type;return M===nu?x(C,_,k.props.children,R,k.key):_!==null&&(_.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Yo&&fv(M)===_.type)?(R=i(_,k.props),R.ref=fd(C,_,k),R.return=C,R):(R=t0(k.type,k.key,k.props,null,C.mode,R),R.ref=fd(C,_,k),R.return=C,R)}function f(C,_,k,R){return _===null||_.tag!==4||_.stateNode.containerInfo!==k.containerInfo||_.stateNode.implementation!==k.implementation?(_=Fp(k,C.mode,R),_.return=C,_):(_=i(_,k.children||[]),_.return=C,_)}function x(C,_,k,R,M){return _===null||_.tag!==7?(_=pc(k,C.mode,R,M),_.return=C,_):(_=i(_,k),_.return=C,_)}function y(C,_,k){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Bp(""+_,C.mode,k),_.return=C,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case df:return k=t0(_.type,_.key,_.props,null,C.mode,k),k.ref=fd(C,null,_),k.return=C,k;case tu:return _=Fp(_,C.mode,k),_.return=C,_;case Yo:var R=_._init;return y(C,R(_._payload),k)}if(Ed(_)||ld(_))return _=pc(_,C.mode,k,null),_.return=C,_;Af(C,_)}return null}function A(C,_,k,R){var M=_!==null?_.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return M!==null?null:u(C,_,""+k,R);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case df:return k.key===M?d(C,_,k,R):null;case tu:return k.key===M?f(C,_,k,R):null;case Yo:return M=k._init,A(C,_,M(k._payload),R)}if(Ed(k)||ld(k))return M!==null?null:x(C,_,k,R,null);Af(C,k)}return null}function b(C,_,k,R,M){if(typeof R=="string"&&R!==""||typeof R=="number")return C=C.get(k)||null,u(_,C,""+R,M);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case df:return C=C.get(R.key===null?k:R.key)||null,d(_,C,R,M);case tu:return C=C.get(R.key===null?k:R.key)||null,f(_,C,R,M);case Yo:var ne=R._init;return b(C,_,k,ne(R._payload),M)}if(Ed(R)||ld(R))return C=C.get(k)||null,x(_,C,R,M,null);Af(_,R)}return null}function P(C,_,k,R){for(var M=null,ne=null,U=_,K=_=0,te=null;U!==null&&K<k.length;K++){U.index>K?(te=U,U=null):te=U.sibling;var be=A(C,U,k[K],R);if(be===null){U===null&&(U=te);break}e&&U&&be.alternate===null&&t(C,U),_=s(be,_,K),ne===null?M=be:ne.sibling=be,ne=be,U=te}if(K===k.length)return n(C,U),sr&&Ql(C,K),M;if(U===null){for(;K<k.length;K++)U=y(C,k[K],R),U!==null&&(_=s(U,_,K),ne===null?M=U:ne.sibling=U,ne=U);return sr&&Ql(C,K),M}for(U=r(C,U);K<k.length;K++)te=b(U,C,K,k[K],R),te!==null&&(e&&te.alternate!==null&&U.delete(te.key===null?K:te.key),_=s(te,_,K),ne===null?M=te:ne.sibling=te,ne=te);return e&&U.forEach(function($){return t(C,$)}),sr&&Ql(C,K),M}function I(C,_,k,R){var M=ld(k);if(typeof M!="function")throw Error(ut(150));if(k=M.call(k),k==null)throw Error(ut(151));for(var ne=M=null,U=_,K=_=0,te=null,be=k.next();U!==null&&!be.done;K++,be=k.next()){U.index>K?(te=U,U=null):te=U.sibling;var $=A(C,U,be.value,R);if($===null){U===null&&(U=te);break}e&&U&&$.alternate===null&&t(C,U),_=s($,_,K),ne===null?M=$:ne.sibling=$,ne=$,U=te}if(be.done)return n(C,U),sr&&Ql(C,K),M;if(U===null){for(;!be.done;K++,be=k.next())be=y(C,be.value,R),be!==null&&(_=s(be,_,K),ne===null?M=be:ne.sibling=be,ne=be);return sr&&Ql(C,K),M}for(U=r(C,U);!be.done;K++,be=k.next())be=b(U,C,K,be.value,R),be!==null&&(e&&be.alternate!==null&&U.delete(be.key===null?K:be.key),_=s(be,_,K),ne===null?M=be:ne.sibling=be,ne=be);return e&&U.forEach(function(q){return t(C,q)}),sr&&Ql(C,K),M}function j(C,_,k,R){if(typeof k=="object"&&k!==null&&k.type===nu&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case df:e:{for(var M=k.key,ne=_;ne!==null;){if(ne.key===M){if(M=k.type,M===nu){if(ne.tag===7){n(C,ne.sibling),_=i(ne,k.props.children),_.return=C,C=_;break e}}else if(ne.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Yo&&fv(M)===ne.type){n(C,ne.sibling),_=i(ne,k.props),_.ref=fd(C,ne,k),_.return=C,C=_;break e}n(C,ne);break}else t(C,ne);ne=ne.sibling}k.type===nu?(_=pc(k.props.children,C.mode,R,k.key),_.return=C,C=_):(R=t0(k.type,k.key,k.props,null,C.mode,R),R.ref=fd(C,_,k),R.return=C,C=R)}return o(C);case tu:e:{for(ne=k.key;_!==null;){if(_.key===ne)if(_.tag===4&&_.stateNode.containerInfo===k.containerInfo&&_.stateNode.implementation===k.implementation){n(C,_.sibling),_=i(_,k.children||[]),_.return=C,C=_;break e}else{n(C,_);break}else t(C,_);_=_.sibling}_=Fp(k,C.mode,R),_.return=C,C=_}return o(C);case Yo:return ne=k._init,j(C,_,ne(k._payload),R)}if(Ed(k))return P(C,_,k,R);if(ld(k))return I(C,_,k,R);Af(C,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,_!==null&&_.tag===6?(n(C,_.sibling),_=i(_,k),_.return=C,C=_):(n(C,_),_=Bp(k,C.mode,R),_.return=C,C=_),o(C)):n(C,_)}return j}var Pu=U3(!0),V3=U3(!1),N0=Cl(null),C0=null,uu=null,U2=null;function V2(){U2=uu=C0=null}function z2(e){var t=N0.current;Qn(N0),e._currentValue=t}function Jg(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Su(e,t){C0=e,U2=uu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(rs=!0),e.firstContext=null)}function Ys(e){var t=e._currentValue;if(U2!==e)if(e={context:e,memoizedValue:t,next:null},uu===null){if(C0===null)throw Error(ut(308));uu=e,C0.dependencies={lanes:0,firstContext:e}}else uu=uu.next=e;return t}var lc=null;function H2(e){lc===null?lc=[e]:lc.push(e)}function z3(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,H2(t)):(n.next=i.next,i.next=n),t.interleaved=n,xo(e,r)}function xo(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Xo=!1;function q2(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function H3(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ho(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function dl(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,vn&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,xo(e,n)}return i=r.interleaved,i===null?(t.next=t,H2(r)):(t.next=i.next,i.next=t),r.interleaved=t,xo(e,n)}function Xf(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,I2(e,n)}}function pv(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function E0(e,t,n,r){var i=e.updateQueue;Xo=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var d=u,f=d.next;d.next=null,o===null?s=f:o.next=f,o=d;var x=e.alternate;x!==null&&(x=x.updateQueue,u=x.lastBaseUpdate,u!==o&&(u===null?x.firstBaseUpdate=f:u.next=f,x.lastBaseUpdate=d))}if(s!==null){var y=i.baseState;o=0,x=f=d=null,u=s;do{var A=u.lane,b=u.eventTime;if((r&A)===A){x!==null&&(x=x.next={eventTime:b,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var P=e,I=u;switch(A=t,b=n,I.tag){case 1:if(P=I.payload,typeof P=="function"){y=P.call(b,y,A);break e}y=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=I.payload,A=typeof P=="function"?P.call(b,y,A):P,A==null)break e;y=pr({},y,A);break e;case 2:Xo=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,A=i.effects,A===null?i.effects=[u]:A.push(u))}else b={eventTime:b,lane:A,tag:u.tag,payload:u.payload,callback:u.callback,next:null},x===null?(f=x=b,d=y):x=x.next=b,o|=A;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;A=u,u=A.next,A.next=null,i.lastBaseUpdate=A,i.shared.pending=null}}while(!0);if(x===null&&(d=y),i.baseState=d,i.firstBaseUpdate=f,i.lastBaseUpdate=x,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);bc|=o,e.lanes=o,e.memoizedState=y}}function gv(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ut(191,i));i.call(r)}}}var Th={},Ba=Cl(Th),ch=Cl(Th),uh=Cl(Th);function cc(e){if(e===Th)throw Error(ut(174));return e}function W2(e,t){switch(zn(uh,t),zn(ch,e),zn(Ba,Th),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:jg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=jg(t,e)}Qn(Ba),zn(Ba,t)}function ju(){Qn(Ba),Qn(ch),Qn(uh)}function q3(e){cc(uh.current);var t=cc(Ba.current),n=jg(t,e.type);t!==n&&(zn(ch,e),zn(Ba,n))}function G2(e){ch.current===e&&(Qn(Ba),Qn(ch))}var dr=Cl(0);function _0(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Pp=[];function $2(){for(var e=0;e<Pp.length;e++)Pp[e]._workInProgressVersionPrimary=null;Pp.length=0}var Kf=Ao.ReactCurrentDispatcher,jp=Ao.ReactCurrentBatchConfig,wc=0,fr=null,Kr=null,ai=null,T0=!1,Rd=!1,dh=0,QC=0;function Ci(){throw Error(ut(321))}function Y2(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!xa(e[n],t[n]))return!1;return!0}function X2(e,t,n,r,i,s){if(wc=s,fr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Kf.current=e===null||e.memoizedState===null?nE:rE,e=n(r,i),Rd){s=0;do{if(Rd=!1,dh=0,25<=s)throw Error(ut(301));s+=1,ai=Kr=null,t.updateQueue=null,Kf.current=iE,e=n(r,i)}while(Rd)}if(Kf.current=I0,t=Kr!==null&&Kr.next!==null,wc=0,ai=Kr=fr=null,T0=!1,t)throw Error(ut(300));return e}function K2(){var e=dh!==0;return dh=0,e}function Ia(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ai===null?fr.memoizedState=ai=e:ai=ai.next=e,ai}function Xs(){if(Kr===null){var e=fr.alternate;e=e!==null?e.memoizedState:null}else e=Kr.next;var t=ai===null?fr.memoizedState:ai.next;if(t!==null)ai=t,Kr=e;else{if(e===null)throw Error(ut(310));Kr=e,e={memoizedState:Kr.memoizedState,baseState:Kr.baseState,baseQueue:Kr.baseQueue,queue:Kr.queue,next:null},ai===null?fr.memoizedState=ai=e:ai=ai.next=e}return ai}function hh(e,t){return typeof t=="function"?t(e):t}function Op(e){var t=Xs(),n=t.queue;if(n===null)throw Error(ut(311));n.lastRenderedReducer=e;var r=Kr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var u=o=null,d=null,f=s;do{var x=f.lane;if((wc&x)===x)d!==null&&(d=d.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:e(r,f.action);else{var y={lane:x,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};d===null?(u=d=y,o=r):d=d.next=y,fr.lanes|=x,bc|=x}f=f.next}while(f!==null&&f!==s);d===null?o=r:d.next=u,xa(r,t.memoizedState)||(rs=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=d,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,fr.lanes|=s,bc|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Dp(e){var t=Xs(),n=t.queue;if(n===null)throw Error(ut(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);xa(s,t.memoizedState)||(rs=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function W3(){}function G3(e,t){var n=fr,r=Xs(),i=t(),s=!xa(r.memoizedState,i);if(s&&(r.memoizedState=i,rs=!0),r=r.queue,Z2(X3.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||ai!==null&&ai.memoizedState.tag&1){if(n.flags|=2048,fh(9,Y3.bind(null,n,r,i,t),void 0,null),li===null)throw Error(ut(349));wc&30||$3(n,t,i)}return i}function $3(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=fr.updateQueue,t===null?(t={lastEffect:null,stores:null},fr.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Y3(e,t,n,r){t.value=n,t.getSnapshot=r,K3(t)&&Z3(e)}function X3(e,t,n){return n(function(){K3(t)&&Z3(e)})}function K3(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!xa(e,n)}catch{return!0}}function Z3(e){var t=xo(e,1);t!==null&&ma(t,e,1,-1)}function mv(e){var t=Ia();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hh,lastRenderedState:e},t.queue=e,e=e.dispatch=tE.bind(null,fr,e),[t.memoizedState,e]}function fh(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=fr.updateQueue,t===null?(t={lastEffect:null,stores:null},fr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Q3(){return Xs().memoizedState}function Zf(e,t,n,r){var i=Ia();fr.flags|=e,i.memoizedState=fh(1|t,n,void 0,r===void 0?null:r)}function h1(e,t,n,r){var i=Xs();r=r===void 0?null:r;var s=void 0;if(Kr!==null){var o=Kr.memoizedState;if(s=o.destroy,r!==null&&Y2(r,o.deps)){i.memoizedState=fh(t,n,s,r);return}}fr.flags|=e,i.memoizedState=fh(1|t,n,s,r)}function xv(e,t){return Zf(8390656,8,e,t)}function Z2(e,t){return h1(2048,8,e,t)}function J3(e,t){return h1(4,2,e,t)}function e4(e,t){return h1(4,4,e,t)}function t4(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function n4(e,t,n){return n=n!=null?n.concat([e]):null,h1(4,4,t4.bind(null,t,e),n)}function Q2(){}function r4(e,t){var n=Xs();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Y2(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function i4(e,t){var n=Xs();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Y2(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function s4(e,t,n){return wc&21?(xa(n,t)||(n=u3(),fr.lanes|=n,bc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,rs=!0),e.memoizedState=n)}function JC(e,t){var n=In;In=n!==0&&4>n?n:4,e(!0);var r=jp.transition;jp.transition={};try{e(!1),t()}finally{In=n,jp.transition=r}}function a4(){return Xs().memoizedState}function eE(e,t,n){var r=fl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},o4(e))l4(t,n);else if(n=z3(e,t,n,r),n!==null){var i=Wi();ma(n,e,r,i),c4(n,t,r)}}function tE(e,t,n){var r=fl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(o4(e))l4(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,u=s(o,n);if(i.hasEagerState=!0,i.eagerState=u,xa(u,o)){var d=t.interleaved;d===null?(i.next=i,H2(t)):(i.next=d.next,d.next=i),t.interleaved=i;return}}catch{}finally{}n=z3(e,t,i,r),n!==null&&(i=Wi(),ma(n,e,r,i),c4(n,t,r))}}function o4(e){var t=e.alternate;return e===fr||t!==null&&t===fr}function l4(e,t){Rd=T0=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function c4(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,I2(e,n)}}var I0={readContext:Ys,useCallback:Ci,useContext:Ci,useEffect:Ci,useImperativeHandle:Ci,useInsertionEffect:Ci,useLayoutEffect:Ci,useMemo:Ci,useReducer:Ci,useRef:Ci,useState:Ci,useDebugValue:Ci,useDeferredValue:Ci,useTransition:Ci,useMutableSource:Ci,useSyncExternalStore:Ci,useId:Ci,unstable_isNewReconciler:!1},nE={readContext:Ys,useCallback:function(e,t){return Ia().memoizedState=[e,t===void 0?null:t],e},useContext:Ys,useEffect:xv,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Zf(4194308,4,t4.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Zf(4194308,4,e,t)},useInsertionEffect:function(e,t){return Zf(4,2,e,t)},useMemo:function(e,t){var n=Ia();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ia();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=eE.bind(null,fr,e),[r.memoizedState,e]},useRef:function(e){var t=Ia();return e={current:e},t.memoizedState=e},useState:mv,useDebugValue:Q2,useDeferredValue:function(e){return Ia().memoizedState=e},useTransition:function(){var e=mv(!1),t=e[0];return e=JC.bind(null,e[1]),Ia().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=fr,i=Ia();if(sr){if(n===void 0)throw Error(ut(407));n=n()}else{if(n=t(),li===null)throw Error(ut(349));wc&30||$3(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,xv(X3.bind(null,r,s,e),[e]),r.flags|=2048,fh(9,Y3.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Ia(),t=li.identifierPrefix;if(sr){var n=lo,r=oo;n=(r&~(1<<32-ga(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=dh++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=QC++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},rE={readContext:Ys,useCallback:r4,useContext:Ys,useEffect:Z2,useImperativeHandle:n4,useInsertionEffect:J3,useLayoutEffect:e4,useMemo:i4,useReducer:Op,useRef:Q3,useState:function(){return Op(hh)},useDebugValue:Q2,useDeferredValue:function(e){var t=Xs();return s4(t,Kr.memoizedState,e)},useTransition:function(){var e=Op(hh)[0],t=Xs().memoizedState;return[e,t]},useMutableSource:W3,useSyncExternalStore:G3,useId:a4,unstable_isNewReconciler:!1},iE={readContext:Ys,useCallback:r4,useContext:Ys,useEffect:Z2,useImperativeHandle:n4,useInsertionEffect:J3,useLayoutEffect:e4,useMemo:i4,useReducer:Dp,useRef:Q3,useState:function(){return Dp(hh)},useDebugValue:Q2,useDeferredValue:function(e){var t=Xs();return Kr===null?t.memoizedState=e:s4(t,Kr.memoizedState,e)},useTransition:function(){var e=Dp(hh)[0],t=Xs().memoizedState;return[e,t]},useMutableSource:W3,useSyncExternalStore:G3,useId:a4,unstable_isNewReconciler:!1};function oa(e,t){if(e&&e.defaultProps){t=pr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function em(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:pr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var f1={isMounted:function(e){return(e=e._reactInternals)?Cc(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Wi(),i=fl(e),s=ho(r,i);s.payload=t,n!=null&&(s.callback=n),t=dl(e,s,i),t!==null&&(ma(t,e,i,r),Xf(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Wi(),i=fl(e),s=ho(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=dl(e,s,i),t!==null&&(ma(t,e,i,r),Xf(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Wi(),r=fl(e),i=ho(n,r);i.tag=2,t!=null&&(i.callback=t),t=dl(e,i,r),t!==null&&(ma(t,e,r,n),Xf(t,e,r))}};function yv(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!sh(n,r)||!sh(i,s):!0}function u4(e,t,n){var r=!1,i=xl,s=t.contextType;return typeof s=="object"&&s!==null?s=Ys(s):(i=as(t)?yc:Oi.current,r=t.contextTypes,s=(r=r!=null)?ku(e,i):xl),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=f1,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function vv(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&f1.enqueueReplaceState(t,t.state,null)}function tm(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},q2(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Ys(s):(s=as(t)?yc:Oi.current,i.context=ku(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(em(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&f1.enqueueReplaceState(i,i.state,null),E0(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Ou(e,t){try{var n="",r=t;do n+=P8(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Rp(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function nm(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var sE=typeof WeakMap=="function"?WeakMap:Map;function d4(e,t,n){n=ho(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){L0||(L0=!0,hm=r),nm(e,t)},n}function h4(e,t,n){n=ho(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){nm(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){nm(e,t),typeof r!="function"&&(hl===null?hl=new Set([this]):hl.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function wv(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new sE;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=vE.bind(null,e,t,n),t.then(e,e))}function bv(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Av(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ho(-1,1),t.tag=2,dl(n,t,1))),n.lanes|=1),e)}var aE=Ao.ReactCurrentOwner,rs=!1;function Hi(e,t,n,r){t.child=e===null?V3(t,null,n,r):Pu(t,e.child,n,r)}function Sv(e,t,n,r,i){n=n.render;var s=t.ref;return Su(t,i),r=X2(e,t,n,r,s,i),n=K2(),e!==null&&!rs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,yo(e,t,i)):(sr&&n&&M2(t),t.flags|=1,Hi(e,t,r,i),t.child)}function Nv(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!ax(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,f4(e,t,s,r,i)):(e=t0(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:sh,n(o,r)&&e.ref===t.ref)return yo(e,t,i)}return t.flags|=1,e=pl(s,r),e.ref=t.ref,e.return=t,t.child=e}function f4(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(sh(s,r)&&e.ref===t.ref)if(rs=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(rs=!0);else return t.lanes=e.lanes,yo(e,t,i)}return rm(e,t,n,r,i)}function p4(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},zn(hu,ws),ws|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,zn(hu,ws),ws|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,zn(hu,ws),ws|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,zn(hu,ws),ws|=r;return Hi(e,t,i,n),t.child}function g4(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function rm(e,t,n,r,i){var s=as(n)?yc:Oi.current;return s=ku(t,s),Su(t,i),n=X2(e,t,n,r,s,i),r=K2(),e!==null&&!rs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,yo(e,t,i)):(sr&&r&&M2(t),t.flags|=1,Hi(e,t,n,i),t.child)}function Cv(e,t,n,r,i){if(as(n)){var s=!0;b0(t)}else s=!1;if(Su(t,i),t.stateNode===null)Qf(e,t),u4(t,n,r),tm(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,u=t.memoizedProps;o.props=u;var d=o.context,f=n.contextType;typeof f=="object"&&f!==null?f=Ys(f):(f=as(n)?yc:Oi.current,f=ku(t,f));var x=n.getDerivedStateFromProps,y=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function";y||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||d!==f)&&vv(t,o,r,f),Xo=!1;var A=t.memoizedState;o.state=A,E0(t,r,o,i),d=t.memoizedState,u!==r||A!==d||ss.current||Xo?(typeof x=="function"&&(em(t,n,x,r),d=t.memoizedState),(u=Xo||yv(t,n,u,r,A,d,f))?(y||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=d),o.props=r,o.state=d,o.context=f,r=u):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,H3(e,t),u=t.memoizedProps,f=t.type===t.elementType?u:oa(t.type,u),o.props=f,y=t.pendingProps,A=o.context,d=n.contextType,typeof d=="object"&&d!==null?d=Ys(d):(d=as(n)?yc:Oi.current,d=ku(t,d));var b=n.getDerivedStateFromProps;(x=typeof b=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==y||A!==d)&&vv(t,o,r,d),Xo=!1,A=t.memoizedState,o.state=A,E0(t,r,o,i);var P=t.memoizedState;u!==y||A!==P||ss.current||Xo?(typeof b=="function"&&(em(t,n,b,r),P=t.memoizedState),(f=Xo||yv(t,n,f,r,A,P,d)||!1)?(x||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,P,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,P,d)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=P),o.props=r,o.state=P,o.context=d,r=f):(typeof o.componentDidUpdate!="function"||u===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),r=!1)}return im(e,t,n,r,s,i)}function im(e,t,n,r,i,s){g4(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&uv(t,n,!1),yo(e,t,s);r=t.stateNode,aE.current=t;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Pu(t,e.child,null,s),t.child=Pu(t,null,u,s)):Hi(e,t,u,s),t.memoizedState=r.state,i&&uv(t,n,!0),t.child}function m4(e){var t=e.stateNode;t.pendingContext?cv(e,t.pendingContext,t.pendingContext!==t.context):t.context&&cv(e,t.context,!1),W2(e,t.containerInfo)}function Ev(e,t,n,r,i){return Lu(),F2(i),t.flags|=256,Hi(e,t,n,r),t.child}var sm={dehydrated:null,treeContext:null,retryLane:0};function am(e){return{baseLanes:e,cachePool:null,transitions:null}}function x4(e,t,n){var r=t.pendingProps,i=dr.current,s=!1,o=(t.flags&128)!==0,u;if((u=o)||(u=e!==null&&e.memoizedState===null?!1:(i&2)!==0),u?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),zn(dr,i&1),e===null)return Qg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=m1(o,r,0,null),e=pc(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=am(n),t.memoizedState=sm,e):J2(t,o));if(i=e.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return oE(e,t,o,r,u,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,u=i.sibling;var d={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=d,t.deletions=null):(r=pl(i,d),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?s=pl(u,s):(s=pc(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?am(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=sm,r}return s=e.child,e=s.sibling,r=pl(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function J2(e,t){return t=m1({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Sf(e,t,n,r){return r!==null&&F2(r),Pu(t,e.child,null,n),e=J2(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function oE(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=Rp(Error(ut(422))),Sf(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=m1({mode:"visible",children:r.children},i,0,null),s=pc(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Pu(t,e.child,null,o),t.child.memoizedState=am(o),t.memoizedState=sm,s);if(!(t.mode&1))return Sf(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,s=Error(ut(419)),r=Rp(s,r,void 0),Sf(e,t,o,r)}if(u=(o&e.childLanes)!==0,rs||u){if(r=li,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,xo(e,i),ma(r,e,i,-1))}return sx(),r=Rp(Error(ut(421))),Sf(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=wE.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Ss=ul(i.nextSibling),Cs=t,sr=!0,ha=null,e!==null&&(qs[Ws++]=oo,qs[Ws++]=lo,qs[Ws++]=vc,oo=e.id,lo=e.overflow,vc=t),t=J2(t,r.children),t.flags|=4096,t)}function _v(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Jg(e.return,t,n)}function Mp(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function y4(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Hi(e,t,r.children,n),r=dr.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_v(e,n,t);else if(e.tag===19)_v(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(zn(dr,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&_0(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Mp(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&_0(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Mp(t,!0,n,null,s);break;case"together":Mp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function yo(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),bc|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ut(153));if(t.child!==null){for(e=t.child,n=pl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=pl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function lE(e,t,n){switch(t.tag){case 3:m4(t),Lu();break;case 5:q3(t);break;case 1:as(t.type)&&b0(t);break;case 4:W2(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;zn(N0,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(zn(dr,dr.current&1),t.flags|=128,null):n&t.child.childLanes?x4(e,t,n):(zn(dr,dr.current&1),e=yo(e,t,n),e!==null?e.sibling:null);zn(dr,dr.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return y4(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),zn(dr,dr.current),r)break;return null;case 22:case 23:return t.lanes=0,p4(e,t,n)}return yo(e,t,n)}var v4,om,w4,b4;v4=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};om=function(){};w4=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,cc(Ba.current);var s=null;switch(n){case"input":i=Ig(e,i),r=Ig(e,r),s=[];break;case"select":i=pr({},i,{value:void 0}),r=pr({},r,{value:void 0}),s=[];break;case"textarea":i=Pg(e,i),r=Pg(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=v0)}Og(n,r);var o;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var u=i[f];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Qd.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var d=r[f];if(u=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&d!==u&&(d!=null||u!=null))if(f==="style")if(u){for(o in u)!u.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in d)d.hasOwnProperty(o)&&u[o]!==d[o]&&(n||(n={}),n[o]=d[o])}else n||(s||(s=[]),s.push(f,n)),n=d;else f==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(s=s||[]).push(f,d)):f==="children"?typeof d!="string"&&typeof d!="number"||(s=s||[]).push(f,""+d):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Qd.hasOwnProperty(f)?(d!=null&&f==="onScroll"&&Xn("scroll",e),s||u===d||(s=[])):(s=s||[]).push(f,d))}n&&(s=s||[]).push("style",n);var f=s;(t.updateQueue=f)&&(t.flags|=4)}};b4=function(e,t,n,r){n!==r&&(t.flags|=4)};function pd(e,t){if(!sr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ei(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function cE(e,t,n){var r=t.pendingProps;switch(B2(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ei(t),null;case 1:return as(t.type)&&w0(),Ei(t),null;case 3:return r=t.stateNode,ju(),Qn(ss),Qn(Oi),$2(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(bf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ha!==null&&(gm(ha),ha=null))),om(e,t),Ei(t),null;case 5:G2(t);var i=cc(uh.current);if(n=t.type,e!==null&&t.stateNode!=null)w4(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ut(166));return Ei(t),null}if(e=cc(Ba.current),bf(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[ja]=t,r[lh]=s,e=(t.mode&1)!==0,n){case"dialog":Xn("cancel",r),Xn("close",r);break;case"iframe":case"object":case"embed":Xn("load",r);break;case"video":case"audio":for(i=0;i<Td.length;i++)Xn(Td[i],r);break;case"source":Xn("error",r);break;case"img":case"image":case"link":Xn("error",r),Xn("load",r);break;case"details":Xn("toggle",r);break;case"input":Ry(r,s),Xn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Xn("invalid",r);break;case"textarea":By(r,s),Xn("invalid",r)}Og(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var u=s[o];o==="children"?typeof u=="string"?r.textContent!==u&&(s.suppressHydrationWarning!==!0&&wf(r.textContent,u,e),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(s.suppressHydrationWarning!==!0&&wf(r.textContent,u,e),i=["children",""+u]):Qd.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&Xn("scroll",r)}switch(n){case"input":hf(r),My(r,s,!0);break;case"textarea":hf(r),Fy(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=v0)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Xb(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[ja]=t,e[lh]=r,v4(e,t,!1,!1),t.stateNode=e;e:{switch(o=Dg(n,r),n){case"dialog":Xn("cancel",e),Xn("close",e),i=r;break;case"iframe":case"object":case"embed":Xn("load",e),i=r;break;case"video":case"audio":for(i=0;i<Td.length;i++)Xn(Td[i],e);i=r;break;case"source":Xn("error",e),i=r;break;case"img":case"image":case"link":Xn("error",e),Xn("load",e),i=r;break;case"details":Xn("toggle",e),i=r;break;case"input":Ry(e,r),i=Ig(e,r),Xn("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=pr({},r,{value:void 0}),Xn("invalid",e);break;case"textarea":By(e,r),i=Pg(e,r),Xn("invalid",e);break;default:i=r}Og(n,i),u=i;for(s in u)if(u.hasOwnProperty(s)){var d=u[s];s==="style"?Qb(e,d):s==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Kb(e,d)):s==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Jd(e,d):typeof d=="number"&&Jd(e,""+d):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Qd.hasOwnProperty(s)?d!=null&&s==="onScroll"&&Xn("scroll",e):d!=null&&S2(e,s,d,o))}switch(n){case"input":hf(e),My(e,r,!1);break;case"textarea":hf(e),Fy(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ml(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?vu(e,!!r.multiple,s,!1):r.defaultValue!=null&&vu(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=v0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ei(t),null;case 6:if(e&&t.stateNode!=null)b4(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ut(166));if(n=cc(uh.current),cc(Ba.current),bf(t)){if(r=t.stateNode,n=t.memoizedProps,r[ja]=t,(s=r.nodeValue!==n)&&(e=Cs,e!==null))switch(e.tag){case 3:wf(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&wf(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ja]=t,t.stateNode=r}return Ei(t),null;case 13:if(Qn(dr),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(sr&&Ss!==null&&t.mode&1&&!(t.flags&128))F3(),Lu(),t.flags|=98560,s=!1;else if(s=bf(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(ut(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ut(317));s[ja]=t}else Lu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ei(t),s=!1}else ha!==null&&(gm(ha),ha=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||dr.current&1?Qr===0&&(Qr=3):sx())),t.updateQueue!==null&&(t.flags|=4),Ei(t),null);case 4:return ju(),om(e,t),e===null&&ah(t.stateNode.containerInfo),Ei(t),null;case 10:return z2(t.type._context),Ei(t),null;case 17:return as(t.type)&&w0(),Ei(t),null;case 19:if(Qn(dr),s=t.memoizedState,s===null)return Ei(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)pd(s,!1);else{if(Qr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=_0(e),o!==null){for(t.flags|=128,pd(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return zn(dr,dr.current&1|2),t.child}e=e.sibling}s.tail!==null&&Tr()>Du&&(t.flags|=128,r=!0,pd(s,!1),t.lanes=4194304)}else{if(!r)if(e=_0(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),pd(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!sr)return Ei(t),null}else 2*Tr()-s.renderingStartTime>Du&&n!==1073741824&&(t.flags|=128,r=!0,pd(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Tr(),t.sibling=null,n=dr.current,zn(dr,r?n&1|2:n&1),t):(Ei(t),null);case 22:case 23:return ix(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ws&1073741824&&(Ei(t),t.subtreeFlags&6&&(t.flags|=8192)):Ei(t),null;case 24:return null;case 25:return null}throw Error(ut(156,t.tag))}function uE(e,t){switch(B2(t),t.tag){case 1:return as(t.type)&&w0(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ju(),Qn(ss),Qn(Oi),$2(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return G2(t),null;case 13:if(Qn(dr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ut(340));Lu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Qn(dr),null;case 4:return ju(),null;case 10:return z2(t.type._context),null;case 22:case 23:return ix(),null;case 24:return null;default:return null}}var Nf=!1,Pi=!1,dE=typeof WeakSet=="function"?WeakSet:Set,St=null;function du(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){br(e,t,r)}else n.current=null}function lm(e,t,n){try{n()}catch(r){br(e,t,r)}}var Tv=!1;function hE(e,t){if(Wg=m0,e=E3(),R2(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,u=-1,d=-1,f=0,x=0,y=e,A=null;t:for(;;){for(var b;y!==n||i!==0&&y.nodeType!==3||(u=o+i),y!==s||r!==0&&y.nodeType!==3||(d=o+r),y.nodeType===3&&(o+=y.nodeValue.length),(b=y.firstChild)!==null;)A=y,y=b;for(;;){if(y===e)break t;if(A===n&&++f===i&&(u=o),A===s&&++x===r&&(d=o),(b=y.nextSibling)!==null)break;y=A,A=y.parentNode}y=b}n=u===-1||d===-1?null:{start:u,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Gg={focusedElem:e,selectionRange:n},m0=!1,St=t;St!==null;)if(t=St,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,St=e;else for(;St!==null;){t=St;try{var P=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var I=P.memoizedProps,j=P.memoizedState,C=t.stateNode,_=C.getSnapshotBeforeUpdate(t.elementType===t.type?I:oa(t.type,I),j);C.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var k=t.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ut(163))}}catch(R){br(t,t.return,R)}if(e=t.sibling,e!==null){e.return=t.return,St=e;break}St=t.return}return P=Tv,Tv=!1,P}function Md(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&lm(t,n,s)}i=i.next}while(i!==r)}}function p1(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function cm(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function A4(e){var t=e.alternate;t!==null&&(e.alternate=null,A4(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ja],delete t[lh],delete t[Xg],delete t[YC],delete t[XC])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function S4(e){return e.tag===5||e.tag===3||e.tag===4}function Iv(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||S4(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function um(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=v0));else if(r!==4&&(e=e.child,e!==null))for(um(e,t,n),e=e.sibling;e!==null;)um(e,t,n),e=e.sibling}function dm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(dm(e,t,n),e=e.sibling;e!==null;)dm(e,t,n),e=e.sibling}var gi=null,ca=!1;function Vo(e,t,n){for(n=n.child;n!==null;)N4(e,t,n),n=n.sibling}function N4(e,t,n){if(Ma&&typeof Ma.onCommitFiberUnmount=="function")try{Ma.onCommitFiberUnmount(a1,n)}catch{}switch(n.tag){case 5:Pi||du(n,t);case 6:var r=gi,i=ca;gi=null,Vo(e,t,n),gi=r,ca=i,gi!==null&&(ca?(e=gi,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):gi.removeChild(n.stateNode));break;case 18:gi!==null&&(ca?(e=gi,n=n.stateNode,e.nodeType===8?kp(e.parentNode,n):e.nodeType===1&&kp(e,n),rh(e)):kp(gi,n.stateNode));break;case 4:r=gi,i=ca,gi=n.stateNode.containerInfo,ca=!0,Vo(e,t,n),gi=r,ca=i;break;case 0:case 11:case 14:case 15:if(!Pi&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&lm(n,t,o),i=i.next}while(i!==r)}Vo(e,t,n);break;case 1:if(!Pi&&(du(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){br(n,t,u)}Vo(e,t,n);break;case 21:Vo(e,t,n);break;case 22:n.mode&1?(Pi=(r=Pi)||n.memoizedState!==null,Vo(e,t,n),Pi=r):Vo(e,t,n);break;default:Vo(e,t,n)}}function kv(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new dE),t.forEach(function(r){var i=bE.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ra(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,u=o;e:for(;u!==null;){switch(u.tag){case 5:gi=u.stateNode,ca=!1;break e;case 3:gi=u.stateNode.containerInfo,ca=!0;break e;case 4:gi=u.stateNode.containerInfo,ca=!0;break e}u=u.return}if(gi===null)throw Error(ut(160));N4(s,o,i),gi=null,ca=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(f){br(i,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)C4(t,e),t=t.sibling}function C4(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ra(t,e),_a(e),r&4){try{Md(3,e,e.return),p1(3,e)}catch(I){br(e,e.return,I)}try{Md(5,e,e.return)}catch(I){br(e,e.return,I)}}break;case 1:ra(t,e),_a(e),r&512&&n!==null&&du(n,n.return);break;case 5:if(ra(t,e),_a(e),r&512&&n!==null&&du(n,n.return),e.flags&32){var i=e.stateNode;try{Jd(i,"")}catch(I){br(e,e.return,I)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,u=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{u==="input"&&s.type==="radio"&&s.name!=null&&$b(i,s),Dg(u,o);var f=Dg(u,s);for(o=0;o<d.length;o+=2){var x=d[o],y=d[o+1];x==="style"?Qb(i,y):x==="dangerouslySetInnerHTML"?Kb(i,y):x==="children"?Jd(i,y):S2(i,x,y,f)}switch(u){case"input":kg(i,s);break;case"textarea":Yb(i,s);break;case"select":var A=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var b=s.value;b!=null?vu(i,!!s.multiple,b,!1):A!==!!s.multiple&&(s.defaultValue!=null?vu(i,!!s.multiple,s.defaultValue,!0):vu(i,!!s.multiple,s.multiple?[]:"",!1))}i[lh]=s}catch(I){br(e,e.return,I)}}break;case 6:if(ra(t,e),_a(e),r&4){if(e.stateNode===null)throw Error(ut(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(I){br(e,e.return,I)}}break;case 3:if(ra(t,e),_a(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{rh(t.containerInfo)}catch(I){br(e,e.return,I)}break;case 4:ra(t,e),_a(e);break;case 13:ra(t,e),_a(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(nx=Tr())),r&4&&kv(e);break;case 22:if(x=n!==null&&n.memoizedState!==null,e.mode&1?(Pi=(f=Pi)||x,ra(t,e),Pi=f):ra(t,e),_a(e),r&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!x&&e.mode&1)for(St=e,x=e.child;x!==null;){for(y=St=x;St!==null;){switch(A=St,b=A.child,A.tag){case 0:case 11:case 14:case 15:Md(4,A,A.return);break;case 1:du(A,A.return);var P=A.stateNode;if(typeof P.componentWillUnmount=="function"){r=A,n=A.return;try{t=r,P.props=t.memoizedProps,P.state=t.memoizedState,P.componentWillUnmount()}catch(I){br(r,n,I)}}break;case 5:du(A,A.return);break;case 22:if(A.memoizedState!==null){Pv(y);continue}}b!==null?(b.return=A,St=b):Pv(y)}x=x.sibling}e:for(x=null,y=e;;){if(y.tag===5){if(x===null){x=y;try{i=y.stateNode,f?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(u=y.stateNode,d=y.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=Zb("display",o))}catch(I){br(e,e.return,I)}}}else if(y.tag===6){if(x===null)try{y.stateNode.nodeValue=f?"":y.memoizedProps}catch(I){br(e,e.return,I)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===e)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===e)break e;for(;y.sibling===null;){if(y.return===null||y.return===e)break e;x===y&&(x=null),y=y.return}x===y&&(x=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:ra(t,e),_a(e),r&4&&kv(e);break;case 21:break;default:ra(t,e),_a(e)}}function _a(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(S4(n)){var r=n;break e}n=n.return}throw Error(ut(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Jd(i,""),r.flags&=-33);var s=Iv(e);dm(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,u=Iv(e);um(e,u,o);break;default:throw Error(ut(161))}}catch(d){br(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function fE(e,t,n){St=e,E4(e)}function E4(e,t,n){for(var r=(e.mode&1)!==0;St!==null;){var i=St,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Nf;if(!o){var u=i.alternate,d=u!==null&&u.memoizedState!==null||Pi;u=Nf;var f=Pi;if(Nf=o,(Pi=d)&&!f)for(St=i;St!==null;)o=St,d=o.child,o.tag===22&&o.memoizedState!==null?jv(i):d!==null?(d.return=o,St=d):jv(i);for(;s!==null;)St=s,E4(s),s=s.sibling;St=i,Nf=u,Pi=f}Lv(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,St=s):Lv(e)}}function Lv(e){for(;St!==null;){var t=St;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Pi||p1(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Pi)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:oa(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&gv(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}gv(t,o,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var x=f.memoizedState;if(x!==null){var y=x.dehydrated;y!==null&&rh(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ut(163))}Pi||t.flags&512&&cm(t)}catch(A){br(t,t.return,A)}}if(t===e){St=null;break}if(n=t.sibling,n!==null){n.return=t.return,St=n;break}St=t.return}}function Pv(e){for(;St!==null;){var t=St;if(t===e){St=null;break}var n=t.sibling;if(n!==null){n.return=t.return,St=n;break}St=t.return}}function jv(e){for(;St!==null;){var t=St;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{p1(4,t)}catch(d){br(t,n,d)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(d){br(t,i,d)}}var s=t.return;try{cm(t)}catch(d){br(t,s,d)}break;case 5:var o=t.return;try{cm(t)}catch(d){br(t,o,d)}}}catch(d){br(t,t.return,d)}if(t===e){St=null;break}var u=t.sibling;if(u!==null){u.return=t.return,St=u;break}St=t.return}}var pE=Math.ceil,k0=Ao.ReactCurrentDispatcher,ex=Ao.ReactCurrentOwner,$s=Ao.ReactCurrentBatchConfig,vn=0,li=null,zr=null,xi=0,ws=0,hu=Cl(0),Qr=0,ph=null,bc=0,g1=0,tx=0,Bd=null,ts=null,nx=0,Du=1/0,io=null,L0=!1,hm=null,hl=null,Cf=!1,rl=null,P0=0,Fd=0,fm=null,Jf=-1,e0=0;function Wi(){return vn&6?Tr():Jf!==-1?Jf:Jf=Tr()}function fl(e){return e.mode&1?vn&2&&xi!==0?xi&-xi:ZC.transition!==null?(e0===0&&(e0=u3()),e0):(e=In,e!==0||(e=window.event,e=e===void 0?16:x3(e.type)),e):1}function ma(e,t,n,r){if(50<Fd)throw Fd=0,fm=null,Error(ut(185));Ch(e,n,r),(!(vn&2)||e!==li)&&(e===li&&(!(vn&2)&&(g1|=n),Qr===4&&Qo(e,xi)),os(e,r),n===1&&vn===0&&!(t.mode&1)&&(Du=Tr()+500,d1&&El()))}function os(e,t){var n=e.callbackNode;Z8(e,t);var r=g0(e,e===li?xi:0);if(r===0)n!==null&&zy(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&zy(n),t===1)e.tag===0?KC(Ov.bind(null,e)):R3(Ov.bind(null,e)),GC(function(){!(vn&6)&&El()}),n=null;else{switch(d3(r)){case 1:n=T2;break;case 4:n=l3;break;case 16:n=p0;break;case 536870912:n=c3;break;default:n=p0}n=O4(n,_4.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function _4(e,t){if(Jf=-1,e0=0,vn&6)throw Error(ut(327));var n=e.callbackNode;if(Nu()&&e.callbackNode!==n)return null;var r=g0(e,e===li?xi:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=j0(e,r);else{t=r;var i=vn;vn|=2;var s=I4();(li!==e||xi!==t)&&(io=null,Du=Tr()+500,fc(e,t));do try{xE();break}catch(u){T4(e,u)}while(!0);V2(),k0.current=s,vn=i,zr!==null?t=0:(li=null,xi=0,t=Qr)}if(t!==0){if(t===2&&(i=Ug(e),i!==0&&(r=i,t=pm(e,i))),t===1)throw n=ph,fc(e,0),Qo(e,r),os(e,Tr()),n;if(t===6)Qo(e,r);else{if(i=e.current.alternate,!(r&30)&&!gE(i)&&(t=j0(e,r),t===2&&(s=Ug(e),s!==0&&(r=s,t=pm(e,s))),t===1))throw n=ph,fc(e,0),Qo(e,r),os(e,Tr()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ut(345));case 2:Jl(e,ts,io);break;case 3:if(Qo(e,r),(r&130023424)===r&&(t=nx+500-Tr(),10<t)){if(g0(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Wi(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Yg(Jl.bind(null,e,ts,io),t);break}Jl(e,ts,io);break;case 4:if(Qo(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-ga(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=Tr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*pE(r/1960))-r,10<r){e.timeoutHandle=Yg(Jl.bind(null,e,ts,io),r);break}Jl(e,ts,io);break;case 5:Jl(e,ts,io);break;default:throw Error(ut(329))}}}return os(e,Tr()),e.callbackNode===n?_4.bind(null,e):null}function pm(e,t){var n=Bd;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),e=j0(e,t),e!==2&&(t=ts,ts=n,t!==null&&gm(t)),e}function gm(e){ts===null?ts=e:ts.push.apply(ts,e)}function gE(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!xa(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qo(e,t){for(t&=~tx,t&=~g1,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ga(t),r=1<<n;e[n]=-1,t&=~r}}function Ov(e){if(vn&6)throw Error(ut(327));Nu();var t=g0(e,0);if(!(t&1))return os(e,Tr()),null;var n=j0(e,t);if(e.tag!==0&&n===2){var r=Ug(e);r!==0&&(t=r,n=pm(e,r))}if(n===1)throw n=ph,fc(e,0),Qo(e,t),os(e,Tr()),n;if(n===6)throw Error(ut(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Jl(e,ts,io),os(e,Tr()),null}function rx(e,t){var n=vn;vn|=1;try{return e(t)}finally{vn=n,vn===0&&(Du=Tr()+500,d1&&El())}}function Ac(e){rl!==null&&rl.tag===0&&!(vn&6)&&Nu();var t=vn;vn|=1;var n=$s.transition,r=In;try{if($s.transition=null,In=1,e)return e()}finally{In=r,$s.transition=n,vn=t,!(vn&6)&&El()}}function ix(){ws=hu.current,Qn(hu)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,WC(n)),zr!==null)for(n=zr.return;n!==null;){var r=n;switch(B2(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&w0();break;case 3:ju(),Qn(ss),Qn(Oi),$2();break;case 5:G2(r);break;case 4:ju();break;case 13:Qn(dr);break;case 19:Qn(dr);break;case 10:z2(r.type._context);break;case 22:case 23:ix()}n=n.return}if(li=e,zr=e=pl(e.current,null),xi=ws=t,Qr=0,ph=null,tx=g1=bc=0,ts=Bd=null,lc!==null){for(t=0;t<lc.length;t++)if(n=lc[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}lc=null}return e}function T4(e,t){do{var n=zr;try{if(V2(),Kf.current=I0,T0){for(var r=fr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}T0=!1}if(wc=0,ai=Kr=fr=null,Rd=!1,dh=0,ex.current=null,n===null||n.return===null){Qr=1,ph=t,zr=null;break}e:{var s=e,o=n.return,u=n,d=t;if(t=xi,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var f=d,x=u,y=x.tag;if(!(x.mode&1)&&(y===0||y===11||y===15)){var A=x.alternate;A?(x.updateQueue=A.updateQueue,x.memoizedState=A.memoizedState,x.lanes=A.lanes):(x.updateQueue=null,x.memoizedState=null)}var b=bv(o);if(b!==null){b.flags&=-257,Av(b,o,u,s,t),b.mode&1&&wv(s,f,t),t=b,d=f;var P=t.updateQueue;if(P===null){var I=new Set;I.add(d),t.updateQueue=I}else P.add(d);break e}else{if(!(t&1)){wv(s,f,t),sx();break e}d=Error(ut(426))}}else if(sr&&u.mode&1){var j=bv(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Av(j,o,u,s,t),F2(Ou(d,u));break e}}s=d=Ou(d,u),Qr!==4&&(Qr=2),Bd===null?Bd=[s]:Bd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var C=d4(s,d,t);pv(s,C);break e;case 1:u=d;var _=s.type,k=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(hl===null||!hl.has(k)))){s.flags|=65536,t&=-t,s.lanes|=t;var R=h4(s,u,t);pv(s,R);break e}}s=s.return}while(s!==null)}L4(n)}catch(M){t=M,zr===n&&n!==null&&(zr=n=n.return);continue}break}while(!0)}function I4(){var e=k0.current;return k0.current=I0,e===null?I0:e}function sx(){(Qr===0||Qr===3||Qr===2)&&(Qr=4),li===null||!(bc&268435455)&&!(g1&268435455)||Qo(li,xi)}function j0(e,t){var n=vn;vn|=2;var r=I4();(li!==e||xi!==t)&&(io=null,fc(e,t));do try{mE();break}catch(i){T4(e,i)}while(!0);if(V2(),vn=n,k0.current=r,zr!==null)throw Error(ut(261));return li=null,xi=0,Qr}function mE(){for(;zr!==null;)k4(zr)}function xE(){for(;zr!==null&&!z8();)k4(zr)}function k4(e){var t=j4(e.alternate,e,ws);e.memoizedProps=e.pendingProps,t===null?L4(e):zr=t,ex.current=null}function L4(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=uE(n,t),n!==null){n.flags&=32767,zr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Qr=6,zr=null;return}}else if(n=cE(n,t,ws),n!==null){zr=n;return}if(t=t.sibling,t!==null){zr=t;return}zr=t=e}while(t!==null);Qr===0&&(Qr=5)}function Jl(e,t,n){var r=In,i=$s.transition;try{$s.transition=null,In=1,yE(e,t,n,r)}finally{$s.transition=i,In=r}return null}function yE(e,t,n,r){do Nu();while(rl!==null);if(vn&6)throw Error(ut(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ut(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Q8(e,s),e===li&&(zr=li=null,xi=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Cf||(Cf=!0,O4(p0,function(){return Nu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=$s.transition,$s.transition=null;var o=In;In=1;var u=vn;vn|=4,ex.current=null,hE(e,n),C4(n,e),BC(Gg),m0=!!Wg,Gg=Wg=null,e.current=n,fE(n),H8(),vn=u,In=o,$s.transition=s}else e.current=n;if(Cf&&(Cf=!1,rl=e,P0=i),s=e.pendingLanes,s===0&&(hl=null),G8(n.stateNode),os(e,Tr()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(L0)throw L0=!1,e=hm,hm=null,e;return P0&1&&e.tag!==0&&Nu(),s=e.pendingLanes,s&1?e===fm?Fd++:(Fd=0,fm=e):Fd=0,El(),null}function Nu(){if(rl!==null){var e=d3(P0),t=$s.transition,n=In;try{if($s.transition=null,In=16>e?16:e,rl===null)var r=!1;else{if(e=rl,rl=null,P0=0,vn&6)throw Error(ut(331));var i=vn;for(vn|=4,St=e.current;St!==null;){var s=St,o=s.child;if(St.flags&16){var u=s.deletions;if(u!==null){for(var d=0;d<u.length;d++){var f=u[d];for(St=f;St!==null;){var x=St;switch(x.tag){case 0:case 11:case 15:Md(8,x,s)}var y=x.child;if(y!==null)y.return=x,St=y;else for(;St!==null;){x=St;var A=x.sibling,b=x.return;if(A4(x),x===f){St=null;break}if(A!==null){A.return=b,St=A;break}St=b}}}var P=s.alternate;if(P!==null){var I=P.child;if(I!==null){P.child=null;do{var j=I.sibling;I.sibling=null,I=j}while(I!==null)}}St=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,St=o;else e:for(;St!==null;){if(s=St,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Md(9,s,s.return)}var C=s.sibling;if(C!==null){C.return=s.return,St=C;break e}St=s.return}}var _=e.current;for(St=_;St!==null;){o=St;var k=o.child;if(o.subtreeFlags&2064&&k!==null)k.return=o,St=k;else e:for(o=_;St!==null;){if(u=St,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:p1(9,u)}}catch(M){br(u,u.return,M)}if(u===o){St=null;break e}var R=u.sibling;if(R!==null){R.return=u.return,St=R;break e}St=u.return}}if(vn=i,El(),Ma&&typeof Ma.onPostCommitFiberRoot=="function")try{Ma.onPostCommitFiberRoot(a1,e)}catch{}r=!0}return r}finally{In=n,$s.transition=t}}return!1}function Dv(e,t,n){t=Ou(n,t),t=d4(e,t,1),e=dl(e,t,1),t=Wi(),e!==null&&(Ch(e,1,t),os(e,t))}function br(e,t,n){if(e.tag===3)Dv(e,e,n);else for(;t!==null;){if(t.tag===3){Dv(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(hl===null||!hl.has(r))){e=Ou(n,e),e=h4(t,e,1),t=dl(t,e,1),e=Wi(),t!==null&&(Ch(t,1,e),os(t,e));break}}t=t.return}}function vE(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Wi(),e.pingedLanes|=e.suspendedLanes&n,li===e&&(xi&n)===n&&(Qr===4||Qr===3&&(xi&130023424)===xi&&500>Tr()-nx?fc(e,0):tx|=n),os(e,t)}function P4(e,t){t===0&&(e.mode&1?(t=gf,gf<<=1,!(gf&130023424)&&(gf=4194304)):t=1);var n=Wi();e=xo(e,t),e!==null&&(Ch(e,t,n),os(e,n))}function wE(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),P4(e,n)}function bE(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ut(314))}r!==null&&r.delete(t),P4(e,n)}var j4;j4=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ss.current)rs=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return rs=!1,lE(e,t,n);rs=!!(e.flags&131072)}else rs=!1,sr&&t.flags&1048576&&M3(t,S0,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Qf(e,t),e=t.pendingProps;var i=ku(t,Oi.current);Su(t,n),i=X2(null,t,r,e,i,n);var s=K2();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,as(r)?(s=!0,b0(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,q2(t),i.updater=f1,t.stateNode=i,i._reactInternals=t,tm(t,r,e,n),t=im(null,t,r,!0,s,n)):(t.tag=0,sr&&s&&M2(t),Hi(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Qf(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=SE(r),e=oa(r,e),i){case 0:t=rm(null,t,r,e,n);break e;case 1:t=Cv(null,t,r,e,n);break e;case 11:t=Sv(null,t,r,e,n);break e;case 14:t=Nv(null,t,r,oa(r.type,e),n);break e}throw Error(ut(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:oa(r,i),rm(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:oa(r,i),Cv(e,t,r,i,n);case 3:e:{if(m4(t),e===null)throw Error(ut(387));r=t.pendingProps,s=t.memoizedState,i=s.element,H3(e,t),E0(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Ou(Error(ut(423)),t),t=Ev(e,t,r,n,i);break e}else if(r!==i){i=Ou(Error(ut(424)),t),t=Ev(e,t,r,n,i);break e}else for(Ss=ul(t.stateNode.containerInfo.firstChild),Cs=t,sr=!0,ha=null,n=V3(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Lu(),r===i){t=yo(e,t,n);break e}Hi(e,t,r,n)}t=t.child}return t;case 5:return q3(t),e===null&&Qg(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,$g(r,i)?o=null:s!==null&&$g(r,s)&&(t.flags|=32),g4(e,t),Hi(e,t,o,n),t.child;case 6:return e===null&&Qg(t),null;case 13:return x4(e,t,n);case 4:return W2(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Pu(t,null,r,n):Hi(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:oa(r,i),Sv(e,t,r,i,n);case 7:return Hi(e,t,t.pendingProps,n),t.child;case 8:return Hi(e,t,t.pendingProps.children,n),t.child;case 12:return Hi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,zn(N0,r._currentValue),r._currentValue=o,s!==null)if(xa(s.value,o)){if(s.children===i.children&&!ss.current){t=yo(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var u=s.dependencies;if(u!==null){o=s.child;for(var d=u.firstContext;d!==null;){if(d.context===r){if(s.tag===1){d=ho(-1,n&-n),d.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var x=f.pending;x===null?d.next=d:(d.next=x.next,x.next=d),f.pending=d}}s.lanes|=n,d=s.alternate,d!==null&&(d.lanes|=n),Jg(s.return,n,t),u.lanes|=n;break}d=d.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ut(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Jg(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Hi(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Su(t,n),i=Ys(i),r=r(i),t.flags|=1,Hi(e,t,r,n),t.child;case 14:return r=t.type,i=oa(r,t.pendingProps),i=oa(r.type,i),Nv(e,t,r,i,n);case 15:return f4(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:oa(r,i),Qf(e,t),t.tag=1,as(r)?(e=!0,b0(t)):e=!1,Su(t,n),u4(t,r,i),tm(t,r,i,n),im(null,t,r,!0,e,n);case 19:return y4(e,t,n);case 22:return p4(e,t,n)}throw Error(ut(156,t.tag))};function O4(e,t){return o3(e,t)}function AE(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gs(e,t,n,r){return new AE(e,t,n,r)}function ax(e){return e=e.prototype,!(!e||!e.isReactComponent)}function SE(e){if(typeof e=="function")return ax(e)?1:0;if(e!=null){if(e=e.$$typeof,e===C2)return 11;if(e===E2)return 14}return 2}function pl(e,t){var n=e.alternate;return n===null?(n=Gs(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function t0(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")ax(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case nu:return pc(n.children,i,s,t);case N2:o=8,i|=8;break;case Cg:return e=Gs(12,n,t,i|2),e.elementType=Cg,e.lanes=s,e;case Eg:return e=Gs(13,n,t,i),e.elementType=Eg,e.lanes=s,e;case _g:return e=Gs(19,n,t,i),e.elementType=_g,e.lanes=s,e;case qb:return m1(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case zb:o=10;break e;case Hb:o=9;break e;case C2:o=11;break e;case E2:o=14;break e;case Yo:o=16,r=null;break e}throw Error(ut(130,e==null?e:typeof e,""))}return t=Gs(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function pc(e,t,n,r){return e=Gs(7,e,r,t),e.lanes=n,e}function m1(e,t,n,r){return e=Gs(22,e,r,t),e.elementType=qb,e.lanes=n,e.stateNode={isHidden:!1},e}function Bp(e,t,n){return e=Gs(6,e,null,t),e.lanes=n,e}function Fp(e,t,n){return t=Gs(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function NE(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vp(0),this.expirationTimes=vp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ox(e,t,n,r,i,s,o,u,d){return e=new NE(e,t,n,u,d),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Gs(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},q2(s),e}function CE(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tu,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function D4(e){if(!e)return xl;e=e._reactInternals;e:{if(Cc(e)!==e||e.tag!==1)throw Error(ut(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(as(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ut(171))}if(e.tag===1){var n=e.type;if(as(n))return D3(e,n,t)}return t}function R4(e,t,n,r,i,s,o,u,d){return e=ox(n,r,!0,e,i,s,o,u,d),e.context=D4(null),n=e.current,r=Wi(),i=fl(n),s=ho(r,i),s.callback=t??null,dl(n,s,i),e.current.lanes=i,Ch(e,i,r),os(e,r),e}function x1(e,t,n,r){var i=t.current,s=Wi(),o=fl(i);return n=D4(n),t.context===null?t.context=n:t.pendingContext=n,t=ho(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=dl(i,t,o),e!==null&&(ma(e,i,o,s),Xf(e,i,o)),o}function O0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Rv(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function lx(e,t){Rv(e,t),(e=e.alternate)&&Rv(e,t)}function EE(){return null}var M4=typeof reportError=="function"?reportError:function(e){console.error(e)};function cx(e){this._internalRoot=e}y1.prototype.render=cx.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ut(409));x1(e,t,null,null)};y1.prototype.unmount=cx.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ac(function(){x1(null,e,null,null)}),t[mo]=null}};function y1(e){this._internalRoot=e}y1.prototype.unstable_scheduleHydration=function(e){if(e){var t=p3();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Zo.length&&t!==0&&t<Zo[n].priority;n++);Zo.splice(n,0,e),n===0&&m3(e)}};function ux(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function v1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Mv(){}function _E(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var f=O0(o);s.call(f)}}var o=R4(t,r,e,0,null,!1,!1,"",Mv);return e._reactRootContainer=o,e[mo]=o.current,ah(e.nodeType===8?e.parentNode:e),Ac(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var f=O0(d);u.call(f)}}var d=ox(e,0,!1,null,null,!1,!1,"",Mv);return e._reactRootContainer=d,e[mo]=d.current,ah(e.nodeType===8?e.parentNode:e),Ac(function(){x1(t,d,n,r)}),d}function w1(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var u=i;i=function(){var d=O0(o);u.call(d)}}x1(t,o,e,i)}else o=_E(n,t,e,i,r);return O0(o)}h3=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=_d(t.pendingLanes);n!==0&&(I2(t,n|1),os(t,Tr()),!(vn&6)&&(Du=Tr()+500,El()))}break;case 13:Ac(function(){var r=xo(e,1);if(r!==null){var i=Wi();ma(r,e,1,i)}}),lx(e,1)}};k2=function(e){if(e.tag===13){var t=xo(e,134217728);if(t!==null){var n=Wi();ma(t,e,134217728,n)}lx(e,134217728)}};f3=function(e){if(e.tag===13){var t=fl(e),n=xo(e,t);if(n!==null){var r=Wi();ma(n,e,t,r)}lx(e,t)}};p3=function(){return In};g3=function(e,t){var n=In;try{return In=e,t()}finally{In=n}};Mg=function(e,t,n){switch(t){case"input":if(kg(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=u1(r);if(!i)throw Error(ut(90));Gb(r),kg(r,i)}}}break;case"textarea":Yb(e,n);break;case"select":t=n.value,t!=null&&vu(e,!!n.multiple,t,!1)}};t3=rx;n3=Ac;var TE={usingClientEntryPoint:!1,Events:[_h,au,u1,Jb,e3,rx]},gd={findFiberByHostInstance:oc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},IE={bundleType:gd.bundleType,version:gd.version,rendererPackageName:gd.rendererPackageName,rendererConfig:gd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ao.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=s3(e),e===null?null:e.stateNode},findFiberByHostInstance:gd.findFiberByHostInstance||EE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ef=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ef.isDisabled&&Ef.supportsFiber)try{a1=Ef.inject(IE),Ma=Ef}catch{}}Is.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TE;Is.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ux(t))throw Error(ut(200));return CE(e,t,null,n)};Is.createRoot=function(e,t){if(!ux(e))throw Error(ut(299));var n=!1,r="",i=M4;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=ox(e,1,!1,null,null,n,!1,r,i),e[mo]=t.current,ah(e.nodeType===8?e.parentNode:e),new cx(t)};Is.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ut(188)):(e=Object.keys(e).join(","),Error(ut(268,e)));return e=s3(t),e=e===null?null:e.stateNode,e};Is.flushSync=function(e){return Ac(e)};Is.hydrate=function(e,t,n){if(!v1(t))throw Error(ut(200));return w1(null,e,t,!0,n)};Is.hydrateRoot=function(e,t,n){if(!ux(e))throw Error(ut(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=M4;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=R4(t,null,e,1,n??null,i,!1,s,o),e[mo]=t.current,ah(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new y1(t)};Is.render=function(e,t,n){if(!v1(t))throw Error(ut(200));return w1(null,e,t,!1,n)};Is.unmountComponentAtNode=function(e){if(!v1(e))throw Error(ut(40));return e._reactRootContainer?(Ac(function(){w1(null,null,e,!1,function(){e._reactRootContainer=null,e[mo]=null})}),!0):!1};Is.unstable_batchedUpdates=rx;Is.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!v1(n))throw Error(ut(200));if(e==null||e._reactInternals===void 0)throw Error(ut(38));return w1(e,t,n,!1,r)};Is.version="18.3.1-next-f1338f8080-20240426";function B4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(B4)}catch(e){console.error(e)}}B4(),Bb.exports=Is;var kE=Bb.exports,Bv=kE;Sg.createRoot=Bv.createRoot,Sg.hydrateRoot=Bv.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gh(){return gh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gh.apply(this,arguments)}var il;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(il||(il={}));const Fv="popstate";function LE(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:u}=r.location;return mm("",{pathname:s,search:o,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:U4(i)}return jE(t,n,null,e)}function Hr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function F4(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function PE(){return Math.random().toString(36).substr(2,8)}function Uv(e,t){return{usr:e.state,key:e.key,idx:t}}function mm(e,t,n,r){return n===void 0&&(n=null),gh({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Yu(t):t,{state:n,key:t&&t.key||r||PE()})}function U4(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Yu(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function jE(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,u=il.Pop,d=null,f=x();f==null&&(f=0,o.replaceState(gh({},o.state,{idx:f}),""));function x(){return(o.state||{idx:null}).idx}function y(){u=il.Pop;let j=x(),C=j==null?null:j-f;f=j,d&&d({action:u,location:I.location,delta:C})}function A(j,C){u=il.Push;let _=mm(I.location,j,C);f=x()+1;let k=Uv(_,f),R=I.createHref(_);try{o.pushState(k,"",R)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(R)}s&&d&&d({action:u,location:I.location,delta:1})}function b(j,C){u=il.Replace;let _=mm(I.location,j,C);f=x();let k=Uv(_,f),R=I.createHref(_);o.replaceState(k,"",R),s&&d&&d({action:u,location:I.location,delta:0})}function P(j){let C=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof j=="string"?j:U4(j);return _=_.replace(/ $/,"%20"),Hr(C,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,C)}let I={get action(){return u},get location(){return e(i,o)},listen(j){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(Fv,y),d=j,()=>{i.removeEventListener(Fv,y),d=null}},createHref(j){return t(i,j)},createURL:P,encodeLocation(j){let C=P(j);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:A,replace:b,go(j){return o.go(j)}};return I}var Vv;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Vv||(Vv={}));function OE(e,t,n){return n===void 0&&(n="/"),DE(e,t,n)}function DE(e,t,n,r){let i=typeof t=="string"?Yu(t):t,s=H4(i.pathname||"/",n);if(s==null)return null;let o=V4(e);RE(o);let u=null;for(let d=0;u==null&&d<o.length;++d){let f=YE(s);u=WE(o[d],f)}return u}function V4(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,u)=>{let d={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};d.relativePath.startsWith("/")&&(Hr(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let f=gc([r,d.relativePath]),x=n.concat(d);s.children&&s.children.length>0&&(Hr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),V4(s.children,t,x,f)),!(s.path==null&&!s.index)&&t.push({path:f,score:HE(f,s.index),routesMeta:x})};return e.forEach((s,o)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))i(s,o);else for(let d of z4(s.path))i(s,o,d)}),t}function z4(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=z4(r.join("/")),u=[];return u.push(...o.map(d=>d===""?s:[s,d].join("/"))),i&&u.push(...o),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function RE(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:qE(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ME=/^:[\w-]+$/,BE=3,FE=2,UE=1,VE=10,zE=-2,zv=e=>e==="*";function HE(e,t){let n=e.split("/"),r=n.length;return n.some(zv)&&(r+=zE),t&&(r+=FE),n.filter(i=>!zv(i)).reduce((i,s)=>i+(ME.test(s)?BE:s===""?UE:VE),r)}function qE(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function WE(e,t,n){let{routesMeta:r}=e,i={},s="/",o=[];for(let u=0;u<r.length;++u){let d=r[u],f=u===r.length-1,x=s==="/"?t:t.slice(s.length)||"/",y=GE({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},x),A=d.route;if(!y)return null;Object.assign(i,y.params),o.push({params:i,pathname:gc([s,y.pathname]),pathnameBase:QE(gc([s,y.pathnameBase])),route:A}),y.pathnameBase!=="/"&&(s=gc([s,y.pathnameBase]))}return o}function GE(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=$E(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((f,x,y)=>{let{paramName:A,isOptional:b}=x;if(A==="*"){let I=u[y]||"";o=s.slice(0,s.length-I.length).replace(/(.)\/+$/,"$1")}const P=u[y];return b&&!P?f[A]=void 0:f[A]=(P||"").replace(/%2F/g,"/"),f},{}),pathname:s,pathnameBase:o,pattern:e}}function $E(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),F4(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function YE(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return F4(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function H4(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function XE(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Yu(e):e;return{pathname:n?n.startsWith("/")?n:KE(n,t):t,search:JE(r),hash:e_(i)}}function KE(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Up(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ZE(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function q4(e,t){let n=ZE(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function W4(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Yu(e):(i=gh({},e),Hr(!i.pathname||!i.pathname.includes("?"),Up("?","pathname","search",i)),Hr(!i.pathname||!i.pathname.includes("#"),Up("#","pathname","hash",i)),Hr(!i.search||!i.search.includes("#"),Up("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,u;if(o==null)u=n;else{let y=t.length-1;if(!r&&o.startsWith("..")){let A=o.split("/");for(;A[0]==="..";)A.shift(),y-=1;i.pathname=A.join("/")}u=y>=0?t[y]:"/"}let d=XE(i,u),f=o&&o!=="/"&&o.endsWith("/"),x=(s||o===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(f||x)&&(d.pathname+="/"),d}const gc=e=>e.join("/").replace(/\/\/+/g,"/"),QE=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),JE=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,e_=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function t_(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const G4=["post","put","patch","delete"];new Set(G4);const n_=["get",...G4];new Set(n_);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mh(){return mh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mh.apply(this,arguments)}const dx=me.createContext(null),r_=me.createContext(null),Ih=me.createContext(null),b1=me.createContext(null),Ec=me.createContext({outlet:null,matches:[],isDataRoute:!1}),$4=me.createContext(null);function kh(){return me.useContext(b1)!=null}function Lh(){return kh()||Hr(!1),me.useContext(b1).location}function Y4(e){me.useContext(Ih).static||me.useLayoutEffect(e)}function Xu(){let{isDataRoute:e}=me.useContext(Ec);return e?m_():i_()}function i_(){kh()||Hr(!1);let e=me.useContext(dx),{basename:t,future:n,navigator:r}=me.useContext(Ih),{matches:i}=me.useContext(Ec),{pathname:s}=Lh(),o=JSON.stringify(q4(i,n.v7_relativeSplatPath)),u=me.useRef(!1);return Y4(()=>{u.current=!0}),me.useCallback(function(f,x){if(x===void 0&&(x={}),!u.current)return;if(typeof f=="number"){r.go(f);return}let y=W4(f,JSON.parse(o),s,x.relative==="path");e==null&&t!=="/"&&(y.pathname=y.pathname==="/"?t:gc([t,y.pathname])),(x.replace?r.replace:r.push)(y,x.state,x)},[t,r,o,s,e])}function s_(e,t){return a_(e,t)}function a_(e,t,n,r){kh()||Hr(!1);let{navigator:i}=me.useContext(Ih),{matches:s}=me.useContext(Ec),o=s[s.length-1],u=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let f=Lh(),x;if(t){var y;let j=typeof t=="string"?Yu(t):t;d==="/"||(y=j.pathname)!=null&&y.startsWith(d)||Hr(!1),x=j}else x=f;let A=x.pathname||"/",b=A;if(d!=="/"){let j=d.replace(/^\//,"").split("/");b="/"+A.replace(/^\//,"").split("/").slice(j.length).join("/")}let P=OE(e,{pathname:b}),I=d_(P&&P.map(j=>Object.assign({},j,{params:Object.assign({},u,j.params),pathname:gc([d,i.encodeLocation?i.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?d:gc([d,i.encodeLocation?i.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),s,n,r);return t&&I?me.createElement(b1.Provider,{value:{location:mh({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:il.Pop}},I):I}function o_(){let e=g_(),t=t_(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return me.createElement(me.Fragment,null,me.createElement("h2",null,"Unexpected Application Error!"),me.createElement("h3",{style:{fontStyle:"italic"}},t),n?me.createElement("pre",{style:i},n):null,null)}const l_=me.createElement(o_,null);class c_ extends me.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?me.createElement(Ec.Provider,{value:this.props.routeContext},me.createElement($4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function u_(e){let{routeContext:t,match:n,children:r}=e,i=me.useContext(dx);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),me.createElement(Ec.Provider,{value:t},r)}function d_(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,u=(i=n)==null?void 0:i.errors;if(u!=null){let x=o.findIndex(y=>y.route.id&&(u==null?void 0:u[y.route.id])!==void 0);x>=0||Hr(!1),o=o.slice(0,Math.min(o.length,x+1))}let d=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let x=0;x<o.length;x++){let y=o[x];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=x),y.route.id){let{loaderData:A,errors:b}=n,P=y.route.loader&&A[y.route.id]===void 0&&(!b||b[y.route.id]===void 0);if(y.route.lazy||P){d=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((x,y,A)=>{let b,P=!1,I=null,j=null;n&&(b=u&&y.route.id?u[y.route.id]:void 0,I=y.route.errorElement||l_,d&&(f<0&&A===0?(x_("route-fallback"),P=!0,j=null):f===A&&(P=!0,j=y.route.hydrateFallbackElement||null)));let C=t.concat(o.slice(0,A+1)),_=()=>{let k;return b?k=I:P?k=j:y.route.Component?k=me.createElement(y.route.Component,null):y.route.element?k=y.route.element:k=x,me.createElement(u_,{match:y,routeContext:{outlet:x,matches:C,isDataRoute:n!=null},children:k})};return n&&(y.route.ErrorBoundary||y.route.errorElement||A===0)?me.createElement(c_,{location:n.location,revalidation:n.revalidation,component:I,error:b,children:_(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):_()},null)}var X4=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(X4||{}),K4=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(K4||{});function h_(e){let t=me.useContext(dx);return t||Hr(!1),t}function f_(e){let t=me.useContext(r_);return t||Hr(!1),t}function p_(e){let t=me.useContext(Ec);return t||Hr(!1),t}function Z4(e){let t=p_(),n=t.matches[t.matches.length-1];return n.route.id||Hr(!1),n.route.id}function g_(){var e;let t=me.useContext($4),n=f_(),r=Z4();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function m_(){let{router:e}=h_(X4.UseNavigateStable),t=Z4(K4.UseNavigateStable),n=me.useRef(!1);return Y4(()=>{n.current=!0}),me.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,mh({fromRouteId:t},s)))},[e,t])}const Hv={};function x_(e,t,n){Hv[e]||(Hv[e]=!0)}function y_(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function v_(e){let{to:t,replace:n,state:r,relative:i}=e;kh()||Hr(!1);let{future:s,static:o}=me.useContext(Ih),{matches:u}=me.useContext(Ec),{pathname:d}=Lh(),f=Xu(),x=W4(t,q4(u,s.v7_relativeSplatPath),d,i==="path"),y=JSON.stringify(x);return me.useEffect(()=>f(JSON.parse(y),{replace:n,state:r,relative:i}),[f,y,i,n,r]),null}function Kc(e){Hr(!1)}function w_(e){let{basename:t="/",children:n=null,location:r,navigationType:i=il.Pop,navigator:s,static:o=!1,future:u}=e;kh()&&Hr(!1);let d=t.replace(/^\/*/,"/"),f=me.useMemo(()=>({basename:d,navigator:s,static:o,future:mh({v7_relativeSplatPath:!1},u)}),[d,u,s,o]);typeof r=="string"&&(r=Yu(r));let{pathname:x="/",search:y="",hash:A="",state:b=null,key:P="default"}=r,I=me.useMemo(()=>{let j=H4(x,d);return j==null?null:{location:{pathname:j,search:y,hash:A,state:b,key:P},navigationType:i}},[d,x,y,A,b,P,i]);return I==null?null:me.createElement(Ih.Provider,{value:f},me.createElement(b1.Provider,{children:n,value:I}))}function b_(e){let{children:t,location:n}=e;return s_(xm(t),n)}new Promise(()=>{});function xm(e,t){t===void 0&&(t=[]);let n=[];return me.Children.forEach(e,(r,i)=>{if(!me.isValidElement(r))return;let s=[...t,i];if(r.type===me.Fragment){n.push.apply(n,xm(r.props.children,s));return}r.type!==Kc&&Hr(!1),!r.props.index||!r.props.children||Hr(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=xm(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ym(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function A_(e,t){let n=ym(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const S_="6";try{window.__reactRouterVersion=S_}catch{}const N_="startTransition",qv=v8[N_];function C_(e){let{basename:t,children:n,future:r,window:i}=e,s=me.useRef();s.current==null&&(s.current=LE({window:i,v5Compat:!0}));let o=s.current,[u,d]=me.useState({action:o.action,location:o.location}),{v7_startTransition:f}=r||{},x=me.useCallback(y=>{f&&qv?qv(()=>d(y)):d(y)},[d,f]);return me.useLayoutEffect(()=>o.listen(x),[o,x]),me.useEffect(()=>y_(r),[r]),me.createElement(w_,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:o,future:r})}var Wv;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Wv||(Wv={}));var Gv;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Gv||(Gv={}));function E_(e){let t=me.useRef(ym(e)),n=me.useRef(!1),r=Lh(),i=me.useMemo(()=>A_(r.search,n.current?null:t.current),[r.search]),s=Xu(),o=me.useCallback((u,d)=>{const f=ym(typeof u=="function"?u(i):u);n.current=!0,s("?"+f,d)},[s,i]);return[i,o]}var $v={},__="@vercel/analytics",T_="1.5.0",I_=()=>{window.va||(window.va=function(...t){(window.vaq=window.vaq||[]).push(t)})};function Q4(){return typeof window<"u"}function J4(){try{const e="production"}catch{}return"production"}function k_(e="auto"){if(e==="auto"){window.vam=J4();return}window.vam=e}function L_(){return(Q4()?window.vam:J4())||"production"}function vm(){return L_()==="development"}function P_(e){return e.scriptSrc?e.scriptSrc:vm()?"https://va.vercel-scripts.com/v1/script.debug.js":e.basePath?`${e.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function j_(e={debug:!0}){var t;if(!Q4())return;k_(e.mode),I_(),e.beforeSend&&((t=window.va)==null||t.call(window,"beforeSend",e.beforeSend));const n=P_(e);if(document.head.querySelector(`script[src*="${n}"]`))return;const r=document.createElement("script");r.src=n,r.defer=!0,r.dataset.sdkn=__+(e.framework?`/${e.framework}`:""),r.dataset.sdkv=T_,e.disableAutoTrack&&(r.dataset.disableAutoTrack="1"),e.endpoint?r.dataset.endpoint=e.endpoint:e.basePath&&(r.dataset.endpoint=`${e.basePath}/insights`),e.dsn&&(r.dataset.dsn=e.dsn),r.onerror=()=>{const i=vm()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${n}. ${i}`)},vm()&&e.debug===!1&&(r.dataset.debug="false"),document.head.appendChild(r)}function O_({route:e,path:t}){var n;(n=window.va)==null||n.call(window,"pageview",{route:e,path:t})}function D_(){if(!(typeof process>"u"||typeof $v>"u"))return $v.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function R_(e){return me.useEffect(()=>{var t;e.beforeSend&&((t=window.va)==null||t.call(window,"beforeSend",e.beforeSend))},[e.beforeSend]),me.useEffect(()=>{j_({framework:e.framework||"react",basePath:e.basePath??D_(),...e.route!==void 0&&{disableAutoTrack:!0},...e})},[]),me.useEffect(()=>{e.route&&e.path&&O_({route:e.route,path:e.path})},[e.route,e.path]),null}let M_={data:""},B_=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||M_,F_=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,U_=/\/\*[^]*?\*\/|  +/g,Yv=/\n+/g,Jo=(e,t)=>{let n="",r="",i="";for(let s in e){let o=e[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":r+=s[1]=="f"?Jo(o,s):s+"{"+Jo(o,s[1]=="k"?"":t)+"}":typeof o=="object"?r+=Jo(o,t?t.replace(/([^,])+/g,u=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,u):u?u+" "+d:d)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Jo.p?Jo.p(s,o):s+":"+o+";")}return n+(t&&i?t+"{"+i+"}":i)+r},eo={},eA=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+eA(e[n]);return t}return e},V_=(e,t,n,r,i)=>{let s=eA(e),o=eo[s]||(eo[s]=(d=>{let f=0,x=11;for(;f<d.length;)x=101*x+d.charCodeAt(f++)>>>0;return"go"+x})(s));if(!eo[o]){let d=s!==e?e:(f=>{let x,y,A=[{}];for(;x=F_.exec(f.replace(U_,""));)x[4]?A.shift():x[3]?(y=x[3].replace(Yv," ").trim(),A.unshift(A[0][y]=A[0][y]||{})):A[0][x[1]]=x[2].replace(Yv," ").trim();return A[0]})(e);eo[o]=Jo(i?{["@keyframes "+o]:d}:d,n?"":"."+o)}let u=n&&eo.g?eo.g:null;return n&&(eo.g=eo[o]),((d,f,x,y)=>{y?f.data=f.data.replace(y,d):f.data.indexOf(d)===-1&&(f.data=x?d+f.data:f.data+d)})(eo[o],t,r,u),o},z_=(e,t,n)=>e.reduce((r,i,s)=>{let o=t[s];if(o&&o.call){let u=o(n),d=u&&u.props&&u.props.className||/^go/.test(u)&&u;o=d?"."+d:u&&typeof u=="object"?u.props?"":Jo(u,""):u===!1?"":u}return r+i+(o??"")},"");function A1(e){let t=this||{},n=e.call?e(t.p):e;return V_(n.unshift?n.raw?z_(n,[].slice.call(arguments,1),t.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(t.p):i),{}):n,B_(t.target),t.g,t.o,t.k)}let tA,wm,bm;A1.bind({g:1});let vo=A1.bind({k:1});function H_(e,t,n,r){Jo.p=t,tA=e,wm=n,bm=r}function _l(e,t){let n=this||{};return function(){let r=arguments;function i(s,o){let u=Object.assign({},s),d=u.className||i.className;n.p=Object.assign({theme:wm&&wm()},u),n.o=/ *go\d+/.test(d),u.className=A1.apply(n,r)+(d?" "+d:"");let f=e;return e[0]&&(f=u.as||e,delete u.as),bm&&f[0]&&bm(u),tA(f,u)}return i}}var q_=e=>typeof e=="function",D0=(e,t)=>q_(e)?e(t):e,W_=(()=>{let e=0;return()=>(++e).toString()})(),nA=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),G_=20,hx="default",rA=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:r}=t;return rA(e,{type:e.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=t;return{...e,toasts:e.toasts.map(o=>o.id===i||i===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let s=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+s}))}}},n0=[],iA={toasts:[],pausedAt:void 0,settings:{toastLimit:G_}},Oa={},sA=(e,t=hx)=>{Oa[t]=rA(Oa[t]||iA,e),n0.forEach(([n,r])=>{n===t&&r(Oa[t])})},aA=e=>Object.keys(Oa).forEach(t=>sA(e,t)),$_=e=>Object.keys(Oa).find(t=>Oa[t].toasts.some(n=>n.id===e)),S1=(e=hx)=>t=>{sA(t,e)},Y_={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},X_=(e={},t=hx)=>{let[n,r]=me.useState(Oa[t]||iA),i=me.useRef(Oa[t]);me.useEffect(()=>(i.current!==Oa[t]&&r(Oa[t]),n0.push([t,r]),()=>{let o=n0.findIndex(([u])=>u===t);o>-1&&n0.splice(o,1)}),[t]);let s=n.toasts.map(o=>{var u,d,f;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((u=e[o.type])==null?void 0:u.removeDelay)||(e==null?void 0:e.removeDelay),duration:o.duration||((d=e[o.type])==null?void 0:d.duration)||(e==null?void 0:e.duration)||Y_[o.type],style:{...e.style,...(f=e[o.type])==null?void 0:f.style,...o.style}}});return{...n,toasts:s}},K_=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||W_()}),Ph=e=>(t,n)=>{let r=K_(t,e,n);return S1(r.toasterId||$_(r.id))({type:2,toast:r}),r.id},Zr=(e,t)=>Ph("blank")(e,t);Zr.error=Ph("error");Zr.success=Ph("success");Zr.loading=Ph("loading");Zr.custom=Ph("custom");Zr.dismiss=(e,t)=>{let n={type:3,toastId:e};t?S1(t)(n):aA(n)};Zr.dismissAll=e=>Zr.dismiss(void 0,e);Zr.remove=(e,t)=>{let n={type:4,toastId:e};t?S1(t)(n):aA(n)};Zr.removeAll=e=>Zr.remove(void 0,e);Zr.promise=(e,t,n)=>{let r=Zr.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(i=>{let s=t.success?D0(t.success,i):void 0;return s?Zr.success(s,{id:r,...n,...n==null?void 0:n.success}):Zr.dismiss(r),i}).catch(i=>{let s=t.error?D0(t.error,i):void 0;s?Zr.error(s,{id:r,...n,...n==null?void 0:n.error}):Zr.dismiss(r)}),e};var Z_=1e3,Q_=(e,t="default")=>{let{toasts:n,pausedAt:r}=X_(e,t),i=me.useRef(new Map).current,s=me.useCallback((y,A=Z_)=>{if(i.has(y))return;let b=setTimeout(()=>{i.delete(y),o({type:4,toastId:y})},A);i.set(y,b)},[]);me.useEffect(()=>{if(r)return;let y=Date.now(),A=n.map(b=>{if(b.duration===1/0)return;let P=(b.duration||0)+b.pauseDuration-(y-b.createdAt);if(P<0){b.visible&&Zr.dismiss(b.id);return}return setTimeout(()=>Zr.dismiss(b.id,t),P)});return()=>{A.forEach(b=>b&&clearTimeout(b))}},[n,r,t]);let o=me.useCallback(S1(t),[t]),u=me.useCallback(()=>{o({type:5,time:Date.now()})},[o]),d=me.useCallback((y,A)=>{o({type:1,toast:{id:y,height:A}})},[o]),f=me.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),x=me.useCallback((y,A)=>{let{reverseOrder:b=!1,gutter:P=8,defaultPosition:I}=A||{},j=n.filter(k=>(k.position||I)===(y.position||I)&&k.height),C=j.findIndex(k=>k.id===y.id),_=j.filter((k,R)=>R<C&&k.visible).length;return j.filter(k=>k.visible).slice(...b?[_+1]:[0,_]).reduce((k,R)=>k+(R.height||0)+P,0)},[n]);return me.useEffect(()=>{n.forEach(y=>{if(y.dismissed)s(y.id,y.removeDelay);else{let A=i.get(y.id);A&&(clearTimeout(A),i.delete(y.id))}})},[n,s]),{toasts:n,handlers:{updateHeight:d,startPause:u,endPause:f,calculateOffset:x}}},J_=vo`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,eT=vo`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,tT=vo`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,nT=_l("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${J_} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${eT} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${tT} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,rT=vo`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,iT=_l("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${rT} 1s linear infinite;
`,sT=vo`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,aT=vo`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,oT=_l("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${sT} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${aT} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,lT=_l("div")`
  position: absolute;
`,cT=_l("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,uT=vo`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,dT=_l("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${uT} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,hT=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?me.createElement(dT,null,t):t:n==="blank"?null:me.createElement(cT,null,me.createElement(iT,{...r}),n!=="loading"&&me.createElement(lT,null,n==="error"?me.createElement(nT,{...r}):me.createElement(oT,{...r})))},fT=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,pT=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,gT="0%{opacity:0;} 100%{opacity:1;}",mT="0%{opacity:1;} 100%{opacity:0;}",xT=_l("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,yT=_l("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,vT=(e,t)=>{let n=e.includes("top")?1:-1,[r,i]=nA()?[gT,mT]:[fT(n),pT(n)];return{animation:t?`${vo(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${vo(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},wT=me.memo(({toast:e,position:t,style:n,children:r})=>{let i=e.height?vT(e.position||t||"top-center",e.visible):{opacity:0},s=me.createElement(hT,{toast:e}),o=me.createElement(yT,{...e.ariaProps},D0(e.message,e));return me.createElement(xT,{className:e.className,style:{...i,...n,...e.style}},typeof r=="function"?r({icon:s,message:o}):me.createElement(me.Fragment,null,s,o))});H_(me.createElement);var bT=({id:e,className:t,style:n,onHeightUpdate:r,children:i})=>{let s=me.useCallback(o=>{if(o){let u=()=>{let d=o.getBoundingClientRect().height;r(e,d)};u(),new MutationObserver(u).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return me.createElement("div",{ref:s,className:t,style:n},i)},AT=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:nA()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...i}},ST=A1`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,_f=16,NT=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:i,toasterId:s,containerStyle:o,containerClassName:u})=>{let{toasts:d,handlers:f}=Q_(n,s);return me.createElement("div",{"data-rht-toaster":s||"",style:{position:"fixed",zIndex:9999,top:_f,left:_f,right:_f,bottom:_f,pointerEvents:"none",...o},className:u,onMouseEnter:f.startPause,onMouseLeave:f.endPause},d.map(x=>{let y=x.position||t,A=f.calculateOffset(x,{reverseOrder:e,gutter:r,defaultPosition:t}),b=AT(y,A);return me.createElement(bT,{id:x.id,key:x.id,onHeightUpdate:f.updateHeight,className:x.visible?ST:"",style:b},x.type==="custom"?D0(x.message,x):i?i(x):me.createElement(wT,{toast:x,position:y}))}))},bs=Zr;const oA=me.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),N1=me.createContext({}),C1=me.createContext(null),E1=typeof document<"u",fx=E1?me.useLayoutEffect:me.useEffect,lA=me.createContext({strict:!1}),px=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),CT="framerAppearId",cA="data-"+px(CT);function ET(e,t,n,r){const{visualElement:i}=me.useContext(N1),s=me.useContext(lA),o=me.useContext(C1),u=me.useContext(oA).reducedMotion,d=me.useRef();r=r||s.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:u}));const f=d.current;me.useInsertionEffect(()=>{f&&f.update(n,o)});const x=me.useRef(!!(n[cA]&&!window.HandoffComplete));return fx(()=>{f&&(f.render(),x.current&&f.animationState&&f.animationState.animateChanges())}),me.useEffect(()=>{f&&(f.updateFeatures(),!x.current&&f.animationState&&f.animationState.animateChanges(),x.current&&(x.current=!1,window.HandoffComplete=!0))}),f}function fu(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function _T(e,t,n){return me.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):fu(n)&&(n.current=r))},[t])}function xh(e){return typeof e=="string"||Array.isArray(e)}function _1(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const gx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],mx=["initial",...gx];function T1(e){return _1(e.animate)||mx.some(t=>xh(e[t]))}function uA(e){return!!(T1(e)||e.variants)}function TT(e,t){if(T1(e)){const{initial:n,animate:r}=e;return{initial:n===!1||xh(n)?n:void 0,animate:xh(r)?r:void 0}}return e.inherit!==!1?t:{}}function IT(e){const{initial:t,animate:n}=TT(e,me.useContext(N1));return me.useMemo(()=>({initial:t,animate:n}),[Xv(t),Xv(n)])}function Xv(e){return Array.isArray(e)?e.join(" "):e}const Kv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},yh={};for(const e in Kv)yh[e]={isEnabled:t=>Kv[e].some(n=>!!t[n])};function kT(e){for(const t in e)yh[t]={...yh[t],...e[t]}}const xx=me.createContext({}),dA=me.createContext({}),LT=Symbol.for("motionComponentSymbol");function PT({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){e&&kT(e);function s(u,d){let f;const x={...me.useContext(oA),...u,layoutId:jT(u)},{isStatic:y}=x,A=IT(u),b=r(u,y);if(!y&&E1){A.visualElement=ET(i,b,x,t);const P=me.useContext(dA),I=me.useContext(lA).strict;A.visualElement&&(f=A.visualElement.loadFeatures(x,I,e,P))}return me.createElement(N1.Provider,{value:A},f&&A.visualElement?me.createElement(f,{visualElement:A.visualElement,...x}):null,n(i,u,_T(b,A.visualElement,d),b,y,A.visualElement))}const o=me.forwardRef(s);return o[LT]=i,o}function jT({layoutId:e}){const t=me.useContext(xx).id;return t&&e!==void 0?t+"-"+e:e}function OT(e){function t(r,i={}){return PT(e(r,i))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(r,i)=>(n.has(i)||n.set(i,t(i)),n.get(i))})}const DT=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function yx(e){return typeof e!="string"||e.includes("-")?!1:!!(DT.indexOf(e)>-1||/[A-Z]/.test(e))}const R0={};function RT(e){Object.assign(R0,e)}const jh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],_c=new Set(jh);function hA(e,{layout:t,layoutId:n}){return _c.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!R0[e]||e==="opacity")}const ls=e=>!!(e&&e.getVelocity),MT={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},BT=jh.length;function FT(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},r,i){let s="";for(let o=0;o<BT;o++){const u=jh[o];if(e[u]!==void 0){const d=MT[u]||u;s+=`${d}(${e[u]}) `}}return t&&!e.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(e,r?"":s):n&&r&&(s="none"),s}const fA=e=>t=>typeof t=="string"&&t.startsWith(e),pA=fA("--"),Am=fA("var(--"),UT=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,VT=(e,t)=>t&&typeof e=="number"?t.transform(e):e,yl=(e,t,n)=>Math.min(Math.max(n,e),t),Tc={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Ud={...Tc,transform:e=>yl(0,1,e)},Tf={...Tc,default:1},Vd=e=>Math.round(e*1e5)/1e5,I1=/(-)?([\d]*\.?[\d])+/g,gA=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,zT=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Oh(e){return typeof e=="string"}const Dh=e=>({test:t=>Oh(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Go=Dh("deg"),Fa=Dh("%"),Bt=Dh("px"),HT=Dh("vh"),qT=Dh("vw"),Zv={...Fa,parse:e=>Fa.parse(e)/100,transform:e=>Fa.transform(e*100)},Qv={...Tc,transform:Math.round},mA={borderWidth:Bt,borderTopWidth:Bt,borderRightWidth:Bt,borderBottomWidth:Bt,borderLeftWidth:Bt,borderRadius:Bt,radius:Bt,borderTopLeftRadius:Bt,borderTopRightRadius:Bt,borderBottomRightRadius:Bt,borderBottomLeftRadius:Bt,width:Bt,maxWidth:Bt,height:Bt,maxHeight:Bt,size:Bt,top:Bt,right:Bt,bottom:Bt,left:Bt,padding:Bt,paddingTop:Bt,paddingRight:Bt,paddingBottom:Bt,paddingLeft:Bt,margin:Bt,marginTop:Bt,marginRight:Bt,marginBottom:Bt,marginLeft:Bt,rotate:Go,rotateX:Go,rotateY:Go,rotateZ:Go,scale:Tf,scaleX:Tf,scaleY:Tf,scaleZ:Tf,skew:Go,skewX:Go,skewY:Go,distance:Bt,translateX:Bt,translateY:Bt,translateZ:Bt,x:Bt,y:Bt,z:Bt,perspective:Bt,transformPerspective:Bt,opacity:Ud,originX:Zv,originY:Zv,originZ:Bt,zIndex:Qv,fillOpacity:Ud,strokeOpacity:Ud,numOctaves:Qv};function vx(e,t,n,r){const{style:i,vars:s,transform:o,transformOrigin:u}=e;let d=!1,f=!1,x=!0;for(const y in t){const A=t[y];if(pA(y)){s[y]=A;continue}const b=mA[y],P=VT(A,b);if(_c.has(y)){if(d=!0,o[y]=P,!x)continue;A!==(b.default||0)&&(x=!1)}else y.startsWith("origin")?(f=!0,u[y]=P):i[y]=P}if(t.transform||(d||r?i.transform=FT(e.transform,n,x,r):i.transform&&(i.transform="none")),f){const{originX:y="50%",originY:A="50%",originZ:b=0}=u;i.transformOrigin=`${y} ${A} ${b}`}}const wx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function xA(e,t,n){for(const r in t)!ls(t[r])&&!hA(r,n)&&(e[r]=t[r])}function WT({transformTemplate:e},t,n){return me.useMemo(()=>{const r=wx();return vx(r,t,{enableHardwareAcceleration:!n},e),Object.assign({},r.vars,r.style)},[t])}function GT(e,t,n){const r=e.style||{},i={};return xA(i,r,e),Object.assign(i,WT(e,t,n)),e.transformValues?e.transformValues(i):i}function $T(e,t,n){const r={},i=GT(e,t,n);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=i,r}const YT=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function M0(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||YT.has(e)}let yA=e=>!M0(e);function XT(e){e&&(yA=t=>t.startsWith("on")?!M0(t):e(t))}try{XT(require("@emotion/is-prop-valid").default)}catch{}function KT(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(yA(i)||n===!0&&M0(i)||!t&&!M0(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function Jv(e,t,n){return typeof e=="string"?e:Bt.transform(t+n*e)}function ZT(e,t,n){const r=Jv(t,e.x,e.width),i=Jv(n,e.y,e.height);return`${r} ${i}`}const QT={offset:"stroke-dashoffset",array:"stroke-dasharray"},JT={offset:"strokeDashoffset",array:"strokeDasharray"};function eI(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?QT:JT;e[s.offset]=Bt.transform(-r);const o=Bt.transform(t),u=Bt.transform(n);e[s.array]=`${o} ${u}`}function bx(e,{attrX:t,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:u=1,pathOffset:d=0,...f},x,y,A){if(vx(e,f,x,A),y){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:b,style:P,dimensions:I}=e;b.transform&&(I&&(P.transform=b.transform),delete b.transform),I&&(i!==void 0||s!==void 0||P.transform)&&(P.transformOrigin=ZT(I,i!==void 0?i:.5,s!==void 0?s:.5)),t!==void 0&&(b.x=t),n!==void 0&&(b.y=n),r!==void 0&&(b.scale=r),o!==void 0&&eI(b,o,u,d,!1)}const vA=()=>({...wx(),attrs:{}}),Ax=e=>typeof e=="string"&&e.toLowerCase()==="svg";function tI(e,t,n,r){const i=me.useMemo(()=>{const s=vA();return bx(s,t,{enableHardwareAcceleration:!1},Ax(r),e.transformTemplate),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};xA(s,e.style,e),i.style={...s,...i.style}}return i}function nI(e=!1){return(n,r,i,{latestValues:s},o)=>{const d=(yx(n)?tI:$T)(r,s,o,n),x={...KT(r,typeof n=="string",e),...d,ref:i},{children:y}=r,A=me.useMemo(()=>ls(y)?y.get():y,[y]);return me.createElement(n,{...x,children:A})}}function wA(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const s in n)e.style.setProperty(s,n[s])}const bA=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function AA(e,t,n,r){wA(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(bA.has(i)?i:px(i),t.attrs[i])}function Sx(e,t){const{style:n}=e,r={};for(const i in n)(ls(n[i])||t.style&&ls(t.style[i])||hA(i,e))&&(r[i]=n[i]);return r}function SA(e,t){const n=Sx(e,t);for(const r in e)if(ls(e[r])||ls(t[r])){const i=jh.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=e[r]}return n}function Nx(e,t,n,r={},i={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,i)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,i)),t}function NA(e){const t=me.useRef(null);return t.current===null&&(t.current=e()),t.current}const B0=e=>Array.isArray(e),rI=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),iI=e=>B0(e)?e[e.length-1]||0:e;function r0(e){const t=ls(e)?e.get():e;return rI(t)?t.toValue():t}function sI({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,i,s){const o={latestValues:aI(r,i,s,e),renderState:t()};return n&&(o.mount=u=>n(r,u,o)),o}const CA=e=>(t,n)=>{const r=me.useContext(N1),i=me.useContext(C1),s=()=>sI(e,t,r,i);return n?s():NA(s)};function aI(e,t,n,r){const i={},s=r(e,{});for(const A in s)i[A]=r0(s[A]);let{initial:o,animate:u}=e;const d=T1(e),f=uA(e);t&&f&&!d&&e.inherit!==!1&&(o===void 0&&(o=t.initial),u===void 0&&(u=t.animate));let x=n?n.initial===!1:!1;x=x||o===!1;const y=x?u:o;return y&&typeof y!="boolean"&&!_1(y)&&(Array.isArray(y)?y:[y]).forEach(b=>{const P=Nx(e,b);if(!P)return;const{transitionEnd:I,transition:j,...C}=P;for(const _ in C){let k=C[_];if(Array.isArray(k)){const R=x?k.length-1:0;k=k[R]}k!==null&&(i[_]=k)}for(const _ in I)i[_]=I[_]}),i}const Pr=e=>e;class ew{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function oI(e){let t=new ew,n=new ew,r=0,i=!1,s=!1;const o=new WeakSet,u={schedule:(d,f=!1,x=!1)=>{const y=x&&i,A=y?t:n;return f&&o.add(d),A.add(d)&&y&&i&&(r=t.order.length),d},cancel:d=>{n.remove(d),o.delete(d)},process:d=>{if(i){s=!0;return}if(i=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let f=0;f<r;f++){const x=t.order[f];x(d),o.has(x)&&(u.schedule(x),e())}i=!1,s&&(s=!1,u.process(d))}};return u}const If=["prepare","read","update","preRender","render","postRender"],lI=40;function cI(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=If.reduce((y,A)=>(y[A]=oI(()=>n=!0),y),{}),o=y=>s[y].process(i),u=()=>{const y=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(y-i.timestamp,lI),1),i.timestamp=y,i.isProcessing=!0,If.forEach(o),i.isProcessing=!1,n&&t&&(r=!1,e(u))},d=()=>{n=!0,r=!0,i.isProcessing||e(u)};return{schedule:If.reduce((y,A)=>{const b=s[A];return y[A]=(P,I=!1,j=!1)=>(n||d(),b.schedule(P,I,j)),y},{}),cancel:y=>If.forEach(A=>s[A].cancel(y)),state:i,steps:s}}const{schedule:Hn,cancel:wo,state:Li,steps:Vp}=cI(typeof requestAnimationFrame<"u"?requestAnimationFrame:Pr,!0),uI={useVisualState:CA({scrapeMotionValuesFromProps:SA,createRenderState:vA,onMount:(e,t,{renderState:n,latestValues:r})=>{Hn.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Hn.render(()=>{bx(n,r,{enableHardwareAcceleration:!1},Ax(t.tagName),e.transformTemplate),AA(t,n)})}})},dI={useVisualState:CA({scrapeMotionValuesFromProps:Sx,createRenderState:wx})};function hI(e,{forwardMotionProps:t=!1},n,r){return{...yx(e)?uI:dI,preloadedFeatures:n,useRender:nI(t),createVisualElement:r,Component:e}}function co(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const EA=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function k1(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const fI=e=>t=>EA(t)&&e(t,k1(t));function fo(e,t,n,r){return co(e,t,fI(n),r)}const pI=(e,t)=>n=>t(e(n)),gl=(...e)=>e.reduce(pI);function _A(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const tw=_A("dragHorizontal"),nw=_A("dragVertical");function TA(e){let t=!1;if(e==="y")t=nw();else if(e==="x")t=tw();else{const n=tw(),r=nw();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function IA(){const e=TA(!0);return e?(e(),!1):!0}class Tl{constructor(t){this.isMounted=!1,this.node=t}update(){}}function rw(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End"),i=(s,o)=>{if(s.pointerType==="touch"||IA())return;const u=e.getProps();e.animationState&&u.whileHover&&e.animationState.setActive("whileHover",t),u[r]&&Hn.update(()=>u[r](s,o))};return fo(e.current,n,i,{passive:!e.getProps()[r]})}class gI extends Tl{mount(){this.unmount=gl(rw(this.node,!0),rw(this.node,!1))}unmount(){}}class mI extends Tl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=gl(co(this.node.current,"focus",()=>this.onFocus()),co(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const kA=(e,t)=>t?e===t?!0:kA(e,t.parentElement):!1;function zp(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,k1(n))}class xI extends Tl{constructor(){super(...arguments),this.removeStartListeners=Pr,this.removeEndListeners=Pr,this.removeAccessibleListeners=Pr,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=fo(window,"pointerup",(u,d)=>{if(!this.checkPressEnd())return;const{onTap:f,onTapCancel:x,globalTapTarget:y}=this.node.getProps();Hn.update(()=>{!y&&!kA(this.node.current,u.target)?x&&x(u,d):f&&f(u,d)})},{passive:!(r.onTap||r.onPointerUp)}),o=fo(window,"pointercancel",(u,d)=>this.cancelPress(u,d),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=gl(s,o),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=u=>{u.key!=="Enter"||!this.checkPressEnd()||zp("up",(d,f)=>{const{onTap:x}=this.node.getProps();x&&Hn.update(()=>x(d,f))})};this.removeEndListeners(),this.removeEndListeners=co(this.node.current,"keyup",o),zp("down",(u,d)=>{this.startPress(u,d)})},n=co(this.node.current,"keydown",t),r=()=>{this.isPressing&&zp("cancel",(s,o)=>this.cancelPress(s,o))},i=co(this.node.current,"blur",r);this.removeAccessibleListeners=gl(n,i)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Hn.update(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!IA()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Hn.update(()=>r(t,n))}mount(){const t=this.node.getProps(),n=fo(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=co(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=gl(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Sm=new WeakMap,Hp=new WeakMap,yI=e=>{const t=Sm.get(e.target);t&&t(e)},vI=e=>{e.forEach(yI)};function wI({root:e,...t}){const n=e||document;Hp.has(n)||Hp.set(n,{});const r=Hp.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(vI,{root:e,...t})),r[i]}function bI(e,t,n){const r=wI(t);return Sm.set(e,n),r.observe(e),()=>{Sm.delete(e),r.unobserve(e)}}const AI={some:0,all:1};class SI extends Tl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:AI[i]},u=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,s&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:x,onViewportLeave:y}=this.node.getProps(),A=f?x:y;A&&A(d)};return bI(this.node.current,o,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(NI(t,n))&&this.startObserver()}unmount(){}}function NI({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const CI={inView:{Feature:SI},tap:{Feature:xI},focus:{Feature:mI},hover:{Feature:gI}};function LA(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function EI(e){const t={};return e.values.forEach((n,r)=>t[r]=n.get()),t}function _I(e){const t={};return e.values.forEach((n,r)=>t[r]=n.getVelocity()),t}function L1(e,t,n){const r=e.getProps();return Nx(r,t,n!==void 0?n:r.custom,EI(e),_I(e))}let Cx=Pr;const mc=e=>e*1e3,po=e=>e/1e3,TI={current:!1},PA=e=>Array.isArray(e)&&typeof e[0]=="number";function jA(e){return!!(!e||typeof e=="string"&&OA[e]||PA(e)||Array.isArray(e)&&e.every(jA))}const Id=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,OA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Id([0,.65,.55,1]),circOut:Id([.55,0,1,.45]),backIn:Id([.31,.01,.66,-.59]),backOut:Id([.33,1.53,.69,.99])};function DA(e){if(e)return PA(e)?Id(e):Array.isArray(e)?e.map(DA):OA[e]}function II(e,t,n,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:u,times:d}={}){const f={[t]:n};d&&(f.offset=d);const x=DA(u);return Array.isArray(x)&&(f.easing=x),e.animate(f,{delay:r,duration:i,easing:Array.isArray(x)?"linear":x,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function kI(e,{repeat:t,repeatType:n="loop"}){const r=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[r]}const RA=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,LI=1e-7,PI=12;function jI(e,t,n,r,i){let s,o,u=0;do o=t+(n-t)/2,s=RA(o,r,i)-e,s>0?n=o:t=o;while(Math.abs(s)>LI&&++u<PI);return o}function Rh(e,t,n,r){if(e===t&&n===r)return Pr;const i=s=>jI(s,0,1,e,n);return s=>s===0||s===1?s:RA(i(s),t,r)}const OI=Rh(.42,0,1,1),DI=Rh(0,0,.58,1),MA=Rh(.42,0,.58,1),RI=e=>Array.isArray(e)&&typeof e[0]!="number",BA=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,FA=e=>t=>1-e(1-t),Ex=e=>1-Math.sin(Math.acos(e)),UA=FA(Ex),MI=BA(Ex),VA=Rh(.33,1.53,.69,.99),_x=FA(VA),BI=BA(_x),FI=e=>(e*=2)<1?.5*_x(e):.5*(2-Math.pow(2,-10*(e-1))),UI={linear:Pr,easeIn:OI,easeInOut:MA,easeOut:DI,circIn:Ex,circInOut:MI,circOut:UA,backIn:_x,backInOut:BI,backOut:VA,anticipate:FI},iw=e=>{if(Array.isArray(e)){Cx(e.length===4);const[t,n,r,i]=e;return Rh(t,n,r,i)}else if(typeof e=="string")return UI[e];return e},Tx=(e,t)=>n=>!!(Oh(n)&&zT.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),zA=(e,t,n)=>r=>{if(!Oh(r))return r;const[i,s,o,u]=r.match(I1);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(o),alpha:u!==void 0?parseFloat(u):1}},VI=e=>yl(0,255,e),qp={...Tc,transform:e=>Math.round(VI(e))},uc={test:Tx("rgb","red"),parse:zA("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+qp.transform(e)+", "+qp.transform(t)+", "+qp.transform(n)+", "+Vd(Ud.transform(r))+")"};function zI(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Nm={test:Tx("#"),parse:zI,transform:uc.transform},pu={test:Tx("hsl","hue"),parse:zA("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Fa.transform(Vd(t))+", "+Fa.transform(Vd(n))+", "+Vd(Ud.transform(r))+")"},zi={test:e=>uc.test(e)||Nm.test(e)||pu.test(e),parse:e=>uc.test(e)?uc.parse(e):pu.test(e)?pu.parse(e):Nm.parse(e),transform:e=>Oh(e)?e:e.hasOwnProperty("red")?uc.transform(e):pu.transform(e)},hr=(e,t,n)=>-n*e+n*t+e;function Wp(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function HI({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,s=0,o=0;if(!t)i=s=o=n;else{const u=n<.5?n*(1+t):n+t-n*t,d=2*n-u;i=Wp(d,u,e+1/3),s=Wp(d,u,e),o=Wp(d,u,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const Gp=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},qI=[Nm,uc,pu],WI=e=>qI.find(t=>t.test(e));function sw(e){const t=WI(e);let n=t.parse(e);return t===pu&&(n=HI(n)),n}const HA=(e,t)=>{const n=sw(e),r=sw(t),i={...n};return s=>(i.red=Gp(n.red,r.red,s),i.green=Gp(n.green,r.green,s),i.blue=Gp(n.blue,r.blue,s),i.alpha=hr(n.alpha,r.alpha,s),uc.transform(i))};function GI(e){var t,n;return isNaN(e)&&Oh(e)&&(((t=e.match(I1))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(gA))===null||n===void 0?void 0:n.length)||0)>0}const qA={regex:UT,countKey:"Vars",token:"${v}",parse:Pr},WA={regex:gA,countKey:"Colors",token:"${c}",parse:zi.parse},GA={regex:I1,countKey:"Numbers",token:"${n}",parse:Tc.parse};function $p(e,{regex:t,countKey:n,token:r,parse:i}){const s=e.tokenised.match(t);s&&(e["num"+n]=s.length,e.tokenised=e.tokenised.replace(t,r),e.values.push(...s.map(i)))}function F0(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&$p(n,qA),$p(n,WA),$p(n,GA),n}function $A(e){return F0(e).values}function YA(e){const{values:t,numColors:n,numVars:r,tokenised:i}=F0(e),s=t.length;return o=>{let u=i;for(let d=0;d<s;d++)d<r?u=u.replace(qA.token,o[d]):d<r+n?u=u.replace(WA.token,zi.transform(o[d])):u=u.replace(GA.token,Vd(o[d]));return u}}const $I=e=>typeof e=="number"?0:e;function YI(e){const t=$A(e);return YA(e)(t.map($I))}const vl={test:GI,parse:$A,createTransformer:YA,getAnimatableNone:YI},XA=(e,t)=>n=>`${n>0?t:e}`;function KA(e,t){return typeof e=="number"?n=>hr(e,t,n):zi.test(e)?HA(e,t):e.startsWith("var(")?XA(e,t):QA(e,t)}const ZA=(e,t)=>{const n=[...e],r=n.length,i=e.map((s,o)=>KA(s,t[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}},XI=(e,t)=>{const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=KA(e[i],t[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}},QA=(e,t)=>{const n=vl.createTransformer(t),r=F0(e),i=F0(t);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?gl(ZA(r.values,i.values),n):XA(e,t)},vh=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},aw=(e,t)=>n=>hr(e,t,n);function KI(e){return typeof e=="number"?aw:typeof e=="string"?zi.test(e)?HA:QA:Array.isArray(e)?ZA:typeof e=="object"?XI:aw}function ZI(e,t,n){const r=[],i=n||KI(e[0]),s=e.length-1;for(let o=0;o<s;o++){let u=i(e[o],e[o+1]);if(t){const d=Array.isArray(t)?t[o]||Pr:t;u=gl(d,u)}r.push(u)}return r}function JA(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(Cx(s===t.length),s===1)return()=>t[0];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=ZI(t,r,i),u=o.length,d=f=>{let x=0;if(u>1)for(;x<e.length-2&&!(f<e[x+1]);x++);const y=vh(e[x],e[x+1],f);return o[x](y)};return n?f=>d(yl(e[0],e[s-1],f)):d}function QI(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=vh(0,t,r);e.push(hr(n,1,i))}}function JI(e){const t=[0];return QI(t,e.length-1),t}function ek(e,t){return e.map(n=>n*t)}function tk(e,t){return e.map(()=>t||MA).splice(0,e.length-1)}function U0({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=RI(r)?r.map(iw):iw(r),s={done:!1,value:t[0]},o=ek(n&&n.length===t.length?n:JI(t),e),u=JA(o,t,{ease:Array.isArray(i)?i:tk(t,i)});return{calculatedDuration:e,next:d=>(s.value=u(d),s.done=d>=e,s)}}function eS(e,t){return t?e*(1e3/t):0}const nk=5;function tS(e,t,n){const r=Math.max(t-nk,0);return eS(n-e(r),t-r)}const Yp=.001,rk=.01,ik=10,sk=.05,ak=1;function ok({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let i,s,o=1-t;o=yl(sk,ak,o),e=yl(rk,ik,po(e)),o<1?(i=f=>{const x=f*o,y=x*e,A=x-n,b=Cm(f,o),P=Math.exp(-y);return Yp-A/b*P},s=f=>{const y=f*o*e,A=y*n+n,b=Math.pow(o,2)*Math.pow(f,2)*e,P=Math.exp(-y),I=Cm(Math.pow(f,2),o);return(-i(f)+Yp>0?-1:1)*((A-b)*P)/I}):(i=f=>{const x=Math.exp(-f*e),y=(f-n)*e+1;return-Yp+x*y},s=f=>{const x=Math.exp(-f*e),y=(n-f)*(e*e);return x*y});const u=5/e,d=ck(i,s,u);if(e=mc(e),isNaN(d))return{stiffness:100,damping:10,duration:e};{const f=Math.pow(d,2)*r;return{stiffness:f,damping:o*2*Math.sqrt(r*f),duration:e}}}const lk=12;function ck(e,t,n){let r=n;for(let i=1;i<lk;i++)r=r-e(r)/t(r);return r}function Cm(e,t){return e*Math.sqrt(1-t*t)}const uk=["duration","bounce"],dk=["stiffness","damping","mass"];function ow(e,t){return t.some(n=>e[n]!==void 0)}function hk(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!ow(e,dk)&&ow(e,uk)){const n=ok(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function nS({keyframes:e,restDelta:t,restSpeed:n,...r}){const i=e[0],s=e[e.length-1],o={done:!1,value:i},{stiffness:u,damping:d,mass:f,duration:x,velocity:y,isResolvedFromDuration:A}=hk({...r,velocity:-po(r.velocity||0)}),b=y||0,P=d/(2*Math.sqrt(u*f)),I=s-i,j=po(Math.sqrt(u/f)),C=Math.abs(I)<5;n||(n=C?.01:2),t||(t=C?.005:.5);let _;if(P<1){const k=Cm(j,P);_=R=>{const M=Math.exp(-P*j*R);return s-M*((b+P*j*I)/k*Math.sin(k*R)+I*Math.cos(k*R))}}else if(P===1)_=k=>s-Math.exp(-j*k)*(I+(b+j*I)*k);else{const k=j*Math.sqrt(P*P-1);_=R=>{const M=Math.exp(-P*j*R),ne=Math.min(k*R,300);return s-M*((b+P*j*I)*Math.sinh(ne)+k*I*Math.cosh(ne))/k}}return{calculatedDuration:A&&x||null,next:k=>{const R=_(k);if(A)o.done=k>=x;else{let M=b;k!==0&&(P<1?M=tS(_,k,R):M=0);const ne=Math.abs(M)<=n,U=Math.abs(s-R)<=t;o.done=ne&&U}return o.value=o.done?s:R,o}}}function lw({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:u,max:d,restDelta:f=.5,restSpeed:x}){const y=e[0],A={done:!1,value:y},b=K=>u!==void 0&&K<u||d!==void 0&&K>d,P=K=>u===void 0?d:d===void 0||Math.abs(u-K)<Math.abs(d-K)?u:d;let I=n*t;const j=y+I,C=o===void 0?j:o(j);C!==j&&(I=C-y);const _=K=>-I*Math.exp(-K/r),k=K=>C+_(K),R=K=>{const te=_(K),be=k(K);A.done=Math.abs(te)<=f,A.value=A.done?C:be};let M,ne;const U=K=>{b(A.value)&&(M=K,ne=nS({keyframes:[A.value,P(A.value)],velocity:tS(k,K,A.value),damping:i,stiffness:s,restDelta:f,restSpeed:x}))};return U(0),{calculatedDuration:null,next:K=>{let te=!1;return!ne&&M===void 0&&(te=!0,R(K),U(K)),M!==void 0&&K>M?ne.next(K-M):(!te&&R(K),A)}}}const fk=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Hn.update(t,!0),stop:()=>wo(t),now:()=>Li.isProcessing?Li.timestamp:performance.now()}},cw=2e4;function uw(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<cw;)t+=n,r=e.next(t);return t>=cw?1/0:t}const pk={decay:lw,inertia:lw,tween:U0,keyframes:U0,spring:nS};function V0({autoplay:e=!0,delay:t=0,driver:n=fk,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:u="loop",onPlay:d,onStop:f,onComplete:x,onUpdate:y,...A}){let b=1,P=!1,I,j;const C=()=>{j=new Promise(Me=>{I=Me})};C();let _;const k=pk[i]||U0;let R;k!==U0&&typeof r[0]!="number"&&(R=JA([0,100],r,{clamp:!1}),r=[0,100]);const M=k({...A,keyframes:r});let ne;u==="mirror"&&(ne=k({...A,keyframes:[...r].reverse(),velocity:-(A.velocity||0)}));let U="idle",K=null,te=null,be=null;M.calculatedDuration===null&&s&&(M.calculatedDuration=uw(M));const{calculatedDuration:$}=M;let q=1/0,X=1/0;$!==null&&(q=$+o,X=q*(s+1)-o);let Q=0;const J=Me=>{if(te===null)return;b>0&&(te=Math.min(te,Me)),b<0&&(te=Math.min(Me-X/b,te)),K!==null?Q=K:Q=Math.round(Me-te)*b;const V=Q-t*(b>=0?1:-1),se=b>=0?V<0:V>X;Q=Math.max(V,0),U==="finished"&&K===null&&(Q=X);let de=Q,xe=M;if(s){const Oe=Math.min(Q,X)/q;let He=Math.floor(Oe),qe=Oe%1;!qe&&Oe>=1&&(qe=1),qe===1&&He--,He=Math.min(He,s+1),!!(He%2)&&(u==="reverse"?(qe=1-qe,o&&(qe-=o/q)):u==="mirror"&&(xe=ne)),de=yl(0,1,qe)*q}const he=se?{done:!1,value:r[0]}:xe.next(de);R&&(he.value=R(he.value));let{done:Pe}=he;!se&&$!==null&&(Pe=b>=0?Q>=X:Q<=0);const Le=K===null&&(U==="finished"||U==="running"&&Pe);return y&&y(he.value),Le&&ue(),he},pe=()=>{_&&_.stop(),_=void 0},ge=()=>{U="idle",pe(),I(),C(),te=be=null},ue=()=>{U="finished",x&&x(),pe(),I()},Se=()=>{if(P)return;_||(_=n(J));const Me=_.now();d&&d(),K!==null?te=Me-K:(!te||U==="finished")&&(te=Me),U==="finished"&&C(),be=te,K=null,U="running",_.start()};e&&Se();const _e={then(Me,V){return j.then(Me,V)},get time(){return po(Q)},set time(Me){Me=mc(Me),Q=Me,K!==null||!_||b===0?K=Me:te=_.now()-Me/b},get duration(){const Me=M.calculatedDuration===null?uw(M):M.calculatedDuration;return po(Me)},get speed(){return b},set speed(Me){Me===b||!_||(b=Me,_e.time=po(Q))},get state(){return U},play:Se,pause:()=>{U="paused",K=Q},stop:()=>{P=!0,U!=="idle"&&(U="idle",f&&f(),ge())},cancel:()=>{be!==null&&J(be),ge()},complete:()=>{U="finished"},sample:Me=>(te=0,J(Me))};return _e}function gk(e){let t;return()=>(t===void 0&&(t=e()),t)}const mk=gk(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),xk=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),kf=10,yk=2e4,vk=(e,t)=>t.type==="spring"||e==="backgroundColor"||!jA(t.ease);function wk(e,t,{onUpdate:n,onComplete:r,...i}){if(!(mk()&&xk.has(t)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,u,d,f=!1;const x=()=>{d=new Promise(k=>{u=k})};x();let{keyframes:y,duration:A=300,ease:b,times:P}=i;if(vk(t,i)){const k=V0({...i,repeat:0,delay:0});let R={done:!1,value:y[0]};const M=[];let ne=0;for(;!R.done&&ne<yk;)R=k.sample(ne),M.push(R.value),ne+=kf;P=void 0,y=M,A=ne-kf,b="linear"}const I=II(e.owner.current,t,y,{...i,duration:A,ease:b,times:P}),j=()=>{f=!1,I.cancel()},C=()=>{f=!0,Hn.update(j),u(),x()};return I.onfinish=()=>{f||(e.set(kI(y,i)),r&&r(),C())},{then(k,R){return d.then(k,R)},attachTimeline(k){return I.timeline=k,I.onfinish=null,Pr},get time(){return po(I.currentTime||0)},set time(k){I.currentTime=mc(k)},get speed(){return I.playbackRate},set speed(k){I.playbackRate=k},get duration(){return po(A)},play:()=>{o||(I.play(),wo(j))},pause:()=>I.pause(),stop:()=>{if(o=!0,I.playState==="idle")return;const{currentTime:k}=I;if(k){const R=V0({...i,autoplay:!1});e.setWithVelocity(R.sample(k-kf).value,R.sample(k).value,kf)}C()},complete:()=>{f||I.finish()},cancel:C}}function bk({keyframes:e,delay:t,onUpdate:n,onComplete:r}){const i=()=>(n&&n(e[e.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Pr,pause:Pr,stop:Pr,then:s=>(s(),Promise.resolve()),cancel:Pr,complete:Pr});return t?V0({keyframes:[0,1],duration:0,delay:t,onComplete:i}):i()}const Ak={type:"spring",stiffness:500,damping:25,restSpeed:10},Sk=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Nk={type:"keyframes",duration:.8},Ck={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Ek=(e,{keyframes:t})=>t.length>2?Nk:_c.has(e)?e.startsWith("scale")?Sk(t[1]):Ak:Ck,Em=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(vl.test(t)||t==="0")&&!t.startsWith("url(")),_k=new Set(["brightness","contrast","saturate","opacity"]);function Tk(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(I1)||[];if(!r)return e;const i=n.replace(r,"");let s=_k.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const Ik=/([a-z-]*)\(.*?\)/g,_m={...vl,getAnimatableNone:e=>{const t=e.match(Ik);return t?t.map(Tk).join(" "):e}},kk={...mA,color:zi,backgroundColor:zi,outlineColor:zi,fill:zi,stroke:zi,borderColor:zi,borderTopColor:zi,borderRightColor:zi,borderBottomColor:zi,borderLeftColor:zi,filter:_m,WebkitFilter:_m},Ix=e=>kk[e];function rS(e,t){let n=Ix(e);return n!==_m&&(n=vl),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const iS=e=>/^0[^.\s]+$/.test(e);function Lk(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||iS(e)}function Pk(e,t,n,r){const i=Em(t,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const o=r.from!==void 0?r.from:e.get();let u;const d=[];for(let f=0;f<s.length;f++)s[f]===null&&(s[f]=f===0?o:s[f-1]),Lk(s[f])&&d.push(f),typeof s[f]=="string"&&s[f]!=="none"&&s[f]!=="0"&&(u=s[f]);if(i&&d.length&&u)for(let f=0;f<d.length;f++){const x=d[f];s[x]=rS(t,u)}return s}function jk({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:u,from:d,elapsed:f,...x}){return!!Object.keys(x).length}function kx(e,t){return e[t]||e.default||e}const Ok={skipAnimations:!1},Lx=(e,t,n,r={})=>i=>{const s=kx(r,e)||{},o=s.delay||r.delay||0;let{elapsed:u=0}=r;u=u-mc(o);const d=Pk(t,e,n,s),f=d[0],x=d[d.length-1],y=Em(e,f),A=Em(e,x);let b={keyframes:d,velocity:t.getVelocity(),ease:"easeOut",...s,delay:-u,onUpdate:P=>{t.set(P),s.onUpdate&&s.onUpdate(P)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(jk(s)||(b={...b,...Ek(e,b)}),b.duration&&(b.duration=mc(b.duration)),b.repeatDelay&&(b.repeatDelay=mc(b.repeatDelay)),!y||!A||TI.current||s.type===!1||Ok.skipAnimations)return bk(b);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const P=wk(t,e,b);if(P)return P}return V0(b)};function z0(e){return!!(ls(e)&&e.add)}const sS=e=>/^\-?\d*\.?\d+$/.test(e);function Px(e,t){e.indexOf(t)===-1&&e.push(t)}function jx(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Ox{constructor(){this.subscriptions=[]}add(t){return Px(this.subscriptions,t),()=>jx(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Dk=e=>!isNaN(parseFloat(e));class Rk{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:o}=Li;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,Hn.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Hn.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=Dk(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Ox);const r=this.events[t].add(n);return t==="change"?()=>{r(),Hn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=t,this.timeDelta=r}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?eS(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ru(e,t){return new Rk(e,t)}const aS=e=>t=>t.test(e),Mk={test:e=>e==="auto",parse:e=>e},oS=[Tc,Bt,Fa,Go,qT,HT,Mk],md=e=>oS.find(aS(e)),Bk=[...oS,zi,vl],Fk=e=>Bk.find(aS(e));function Uk(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Ru(n))}function Vk(e,t){const n=L1(e,t);let{transitionEnd:r={},transition:i={},...s}=n?e.makeTargetAnimatable(n,!1):{};s={...s,...r};for(const o in s){const u=iI(s[o]);Uk(e,o,u)}}function zk(e,t,n){var r,i;const s=Object.keys(t).filter(u=>!e.hasValue(u)),o=s.length;if(o)for(let u=0;u<o;u++){const d=s[u],f=t[d];let x=null;Array.isArray(f)&&(x=f[0]),x===null&&(x=(i=(r=n[d])!==null&&r!==void 0?r:e.readValue(d))!==null&&i!==void 0?i:t[d]),x!=null&&(typeof x=="string"&&(sS(x)||iS(x))?x=parseFloat(x):!Fk(x)&&vl.test(f)&&(x=rS(d,f)),e.addValue(d,Ru(x,{owner:e})),n[d]===void 0&&(n[d]=x),x!==null&&e.setBaseTarget(d,x))}}function Hk(e,t){return t?(t[e]||t.default||t).from:void 0}function qk(e,t,n){const r={};for(const i in e){const s=Hk(i,t);if(s!==void 0)r[i]=s;else{const o=n.getValue(i);o&&(r[i]=o.get())}}return r}function Wk({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function Gk(e,t){const n=e.get();if(Array.isArray(t)){for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}else return n!==t}function lS(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:o,...u}=e.makeTargetAnimatable(t);const d=e.getValue("willChange");r&&(s=r);const f=[],x=i&&e.animationState&&e.animationState.getState()[i];for(const y in u){const A=e.getValue(y),b=u[y];if(!A||b===void 0||x&&Wk(x,y))continue;const P={delay:n,elapsed:0,...kx(s||{},y)};if(window.HandoffAppearAnimations){const C=e.getProps()[cA];if(C){const _=window.HandoffAppearAnimations(C,y,A,Hn);_!==null&&(P.elapsed=_,P.isHandoff=!0)}}let I=!P.isHandoff&&!Gk(A,b);if(P.type==="spring"&&(A.getVelocity()||P.velocity)&&(I=!1),A.animation&&(I=!1),I)continue;A.start(Lx(y,A,b,e.shouldReduceMotion&&_c.has(y)?{type:!1}:P));const j=A.animation;z0(d)&&(d.add(y),j.then(()=>d.remove(y))),f.push(j)}return o&&Promise.all(f).then(()=>{o&&Vk(e,o)}),f}function Tm(e,t,n={}){const r=L1(e,t,n.custom);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(lS(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:x,staggerDirection:y}=i;return $k(e,t,f+d,x,y,n)}:()=>Promise.resolve(),{when:u}=i;if(u){const[d,f]=u==="beforeChildren"?[s,o]:[o,s];return d().then(()=>f())}else return Promise.all([s(),o(n.delay)])}function $k(e,t,n=0,r=0,i=1,s){const o=[],u=(e.variantChildren.size-1)*r,d=i===1?(f=0)=>f*r:(f=0)=>u-f*r;return Array.from(e.variantChildren).sort(Yk).forEach((f,x)=>{f.notify("AnimationStart",t),o.push(Tm(f,t,{...s,delay:n+d(x)}).then(()=>f.notify("AnimationComplete",t)))}),Promise.all(o)}function Yk(e,t){return e.sortNodePosition(t)}function Xk(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>Tm(e,s,n));r=Promise.all(i)}else if(typeof t=="string")r=Tm(e,t,n);else{const i=typeof t=="function"?L1(e,t,n.custom):t;r=Promise.all(lS(e,i,n))}return r.then(()=>e.notify("AnimationComplete",t))}const Kk=[...gx].reverse(),Zk=gx.length;function Qk(e){return t=>Promise.all(t.map(({animation:n,options:r})=>Xk(e,n,r)))}function Jk(e){let t=Qk(e);const n=t7();let r=!0;const i=(d,f)=>{const x=L1(e,f);if(x){const{transition:y,transitionEnd:A,...b}=x;d={...d,...b,...A}}return d};function s(d){t=d(e)}function o(d,f){const x=e.getProps(),y=e.getVariantContext(!0)||{},A=[],b=new Set;let P={},I=1/0;for(let C=0;C<Zk;C++){const _=Kk[C],k=n[_],R=x[_]!==void 0?x[_]:y[_],M=xh(R),ne=_===f?k.isActive:null;ne===!1&&(I=C);let U=R===y[_]&&R!==x[_]&&M;if(U&&r&&e.manuallyAnimateOnMount&&(U=!1),k.protectedKeys={...P},!k.isActive&&ne===null||!R&&!k.prevProp||_1(R)||typeof R=="boolean")continue;let te=e7(k.prevProp,R)||_===f&&k.isActive&&!U&&M||C>I&&M,be=!1;const $=Array.isArray(R)?R:[R];let q=$.reduce(i,{});ne===!1&&(q={});const{prevResolvedValues:X={}}=k,Q={...X,...q},J=pe=>{te=!0,b.has(pe)&&(be=!0,b.delete(pe)),k.needsAnimating[pe]=!0};for(const pe in Q){const ge=q[pe],ue=X[pe];if(P.hasOwnProperty(pe))continue;let Se=!1;B0(ge)&&B0(ue)?Se=!LA(ge,ue):Se=ge!==ue,Se?ge!==void 0?J(pe):b.add(pe):ge!==void 0&&b.has(pe)?J(pe):k.protectedKeys[pe]=!0}k.prevProp=R,k.prevResolvedValues=q,k.isActive&&(P={...P,...q}),r&&e.blockInitialAnimation&&(te=!1),te&&(!U||be)&&A.push(...$.map(pe=>({animation:pe,options:{type:_,...d}})))}if(b.size){const C={};b.forEach(_=>{const k=e.getBaseTarget(_);k!==void 0&&(C[_]=k)}),A.push({animation:C})}let j=!!A.length;return r&&(x.initial===!1||x.initial===x.animate)&&!e.manuallyAnimateOnMount&&(j=!1),r=!1,j?t(A):Promise.resolve()}function u(d,f,x){var y;if(n[d].isActive===f)return Promise.resolve();(y=e.variantChildren)===null||y===void 0||y.forEach(b=>{var P;return(P=b.animationState)===null||P===void 0?void 0:P.setActive(d,f)}),n[d].isActive=f;const A=o(x,d);for(const b in n)n[b].protectedKeys={};return A}return{animateChanges:o,setActive:u,setAnimateFunction:s,getState:()=>n}}function e7(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!LA(t,e):!1}function Xl(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function t7(){return{animate:Xl(!0),whileInView:Xl(),whileHover:Xl(),whileTap:Xl(),whileDrag:Xl(),whileFocus:Xl(),exit:Xl()}}class n7 extends Tl{constructor(t){super(t),t.animationState||(t.animationState=Jk(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),_1(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let r7=0;class i7 extends Tl{constructor(){super(...arguments),this.id=r7++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const s=this.node.animationState.setActive("exit",!t,{custom:r??this.node.getProps().custom});n&&!t&&s.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const s7={animation:{Feature:n7},exit:{Feature:i7}},dw=(e,t)=>Math.abs(e-t);function a7(e,t){const n=dw(e.x,t.x),r=dw(e.y,t.y);return Math.sqrt(n**2+r**2)}class cS{constructor(t,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Kp(this.lastMoveEventInfo,this.history),A=this.startEvent!==null,b=a7(y.offset,{x:0,y:0})>=3;if(!A&&!b)return;const{point:P}=y,{timestamp:I}=Li;this.history.push({...P,timestamp:I});const{onStart:j,onMove:C}=this.handlers;A||(j&&j(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,y)},this.handlePointerMove=(y,A)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=Xp(A,this.transformPagePoint),Hn.update(this.updatePoint,!0)},this.handlePointerUp=(y,A)=>{this.end();const{onEnd:b,onSessionEnd:P,resumeAnimation:I}=this.handlers;if(this.dragSnapToOrigin&&I&&I(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=Kp(y.type==="pointercancel"?this.lastMoveEventInfo:Xp(A,this.transformPagePoint),this.history);this.startEvent&&b&&b(y,j),P&&P(y,j)},!EA(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=k1(t),u=Xp(o,this.transformPagePoint),{point:d}=u,{timestamp:f}=Li;this.history=[{...d,timestamp:f}];const{onSessionStart:x}=n;x&&x(t,Kp(u,this.history)),this.removeListeners=gl(fo(this.contextWindow,"pointermove",this.handlePointerMove),fo(this.contextWindow,"pointerup",this.handlePointerUp),fo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),wo(this.updatePoint)}}function Xp(e,t){return t?{point:t(e.point)}:e}function hw(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Kp({point:e},t){return{point:e,delta:hw(e,uS(t)),offset:hw(e,o7(t)),velocity:l7(t,.1)}}function o7(e){return e[0]}function uS(e){return e[e.length-1]}function l7(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=uS(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>mc(t)));)n--;if(!r)return{x:0,y:0};const s=po(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Ts(e){return e.max-e.min}function Im(e,t=0,n=.01){return Math.abs(e-t)<=n}function fw(e,t,n,r=.5){e.origin=r,e.originPoint=hr(t.min,t.max,e.origin),e.scale=Ts(n)/Ts(t),(Im(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=hr(n.min,n.max,e.origin)-e.originPoint,(Im(e.translate)||isNaN(e.translate))&&(e.translate=0)}function zd(e,t,n,r){fw(e.x,t.x,n.x,r?r.originX:void 0),fw(e.y,t.y,n.y,r?r.originY:void 0)}function pw(e,t,n){e.min=n.min+t.min,e.max=e.min+Ts(t)}function c7(e,t,n){pw(e.x,t.x,n.x),pw(e.y,t.y,n.y)}function gw(e,t,n){e.min=t.min-n.min,e.max=e.min+Ts(t)}function Hd(e,t,n){gw(e.x,t.x,n.x),gw(e.y,t.y,n.y)}function u7(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?hr(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?hr(n,e,r.max):Math.min(e,n)),e}function mw(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function d7(e,{top:t,left:n,bottom:r,right:i}){return{x:mw(e.x,n,i),y:mw(e.y,t,r)}}function xw(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function h7(e,t){return{x:xw(e.x,t.x),y:xw(e.y,t.y)}}function f7(e,t){let n=.5;const r=Ts(e),i=Ts(t);return i>r?n=vh(t.min,t.max-r,e.min):r>i&&(n=vh(e.min,e.max-i,t.min)),yl(0,1,n)}function p7(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const km=.35;function g7(e=km){return e===!1?e=0:e===!0&&(e=km),{x:yw(e,"left","right"),y:yw(e,"top","bottom")}}function yw(e,t,n){return{min:vw(e,t),max:vw(e,n)}}function vw(e,t){return typeof e=="number"?e:e[t]||0}const ww=()=>({translate:0,scale:1,origin:0,originPoint:0}),gu=()=>({x:ww(),y:ww()}),bw=()=>({min:0,max:0}),Ur=()=>({x:bw(),y:bw()});function Hs(e){return[e("x"),e("y")]}function dS({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function m7({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function x7(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Zp(e){return e===void 0||e===1}function Lm({scale:e,scaleX:t,scaleY:n}){return!Zp(e)||!Zp(t)||!Zp(n)}function ec(e){return Lm(e)||hS(e)||e.z||e.rotate||e.rotateX||e.rotateY}function hS(e){return Aw(e.x)||Aw(e.y)}function Aw(e){return e&&e!=="0%"}function H0(e,t,n){const r=e-n,i=t*r;return n+i}function Sw(e,t,n,r,i){return i!==void 0&&(e=H0(e,i,r)),H0(e,n,r)+t}function Pm(e,t=0,n=1,r,i){e.min=Sw(e.min,t,n,r,i),e.max=Sw(e.max,t,n,r,i)}function fS(e,{x:t,y:n}){Pm(e.x,t.translate,t.scale,t.originPoint),Pm(e.y,n.translate,n.scale,n.originPoint)}function y7(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let s,o;for(let u=0;u<i;u++){s=n[u],o=s.projectionDelta;const d=s.instance;d&&d.style&&d.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&mu(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,fS(e,o)),r&&ec(s.latestValues)&&mu(e,s.latestValues))}t.x=Nw(t.x),t.y=Nw(t.y)}function Nw(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Ko(e,t){e.min=e.min+t,e.max=e.max+t}function Cw(e,t,[n,r,i]){const s=t[i]!==void 0?t[i]:.5,o=hr(e.min,e.max,s);Pm(e,t[n],t[r],o,t.scale)}const v7=["x","scaleX","originX"],w7=["y","scaleY","originY"];function mu(e,t){Cw(e.x,t,v7),Cw(e.y,t,w7)}function pS(e,t){return dS(x7(e.getBoundingClientRect(),t))}function b7(e,t,n){const r=pS(e,n),{scroll:i}=t;return i&&(Ko(r.x,i.offset.x),Ko(r.y,i.offset.y)),r}const gS=({current:e})=>e?e.ownerDocument.defaultView:null,A7=new WeakMap;class S7{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ur(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=x=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(k1(x,"page").point)},s=(x,y)=>{const{drag:A,dragPropagation:b,onDragStart:P}=this.getProps();if(A&&!b&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=TA(A),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Hs(j=>{let C=this.getAxisMotionValue(j).get()||0;if(Fa.test(C)){const{projection:_}=this.visualElement;if(_&&_.layout){const k=_.layout.layoutBox[j];k&&(C=Ts(k)*(parseFloat(C)/100))}}this.originPoint[j]=C}),P&&Hn.update(()=>P(x,y),!1,!0);const{animationState:I}=this.visualElement;I&&I.setActive("whileDrag",!0)},o=(x,y)=>{const{dragPropagation:A,dragDirectionLock:b,onDirectionLock:P,onDrag:I}=this.getProps();if(!A&&!this.openGlobalLock)return;const{offset:j}=y;if(b&&this.currentDirection===null){this.currentDirection=N7(j),this.currentDirection!==null&&P&&P(this.currentDirection);return}this.updateAxis("x",y.point,j),this.updateAxis("y",y.point,j),this.visualElement.render(),I&&I(x,y)},u=(x,y)=>this.stop(x,y),d=()=>Hs(x=>{var y;return this.getAnimationState(x)==="paused"&&((y=this.getAxisMotionValue(x).animation)===null||y===void 0?void 0:y.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new cS(t,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:gS(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Hn.update(()=>s(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!Lf(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=u7(o,this.constraints[t],this.elastic[t])),s.set(o)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,s=this.constraints;n&&fu(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=d7(i.layoutBox,n):this.constraints=!1,this.elastic=g7(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Hs(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=p7(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!fu(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=b7(r,i.root,this.visualElement.getTransformPagePoint());let o=h7(i.layout.layoutBox,s);if(n){const u=n(m7(o));this.hasMutatedConstraints=!!u,u&&(o=dS(u))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},f=Hs(x=>{if(!Lf(x,n,this.currentDirection))return;let y=d&&d[x]||{};o&&(y={min:0,max:0});const A=i?200:1e6,b=i?40:1e7,P={type:"inertia",velocity:r?t[x]:0,bounceStiffness:A,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...s,...y};return this.startAxisValueAnimation(x,P)});return Promise.all(f).then(u)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return r.start(Lx(t,r,0,n))}stopAnimation(){Hs(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Hs(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Hs(n=>{const{drag:r}=this.getProps();if(!Lf(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:u}=i.layout.layoutBox[n];s.set(t[n]-hr(o,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!fu(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Hs(o=>{const u=this.getAxisMotionValue(o);if(u){const d=u.get();i[o]=f7({min:d,max:d},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Hs(o=>{if(!Lf(o,t,null))return;const u=this.getAxisMotionValue(o),{min:d,max:f}=this.constraints[o];u.set(hr(d,f,i[o]))})}addListeners(){if(!this.visualElement.current)return;A7.set(this.visualElement,this);const t=this.visualElement.current,n=fo(t,"pointerdown",d=>{const{drag:f,dragListener:x=!0}=this.getProps();f&&x&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();fu(d)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=co(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(Hs(x=>{const y=this.getAxisMotionValue(x);y&&(this.originPoint[x]+=d[x].translate,y.set(y.get()+d[x].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),u&&u()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=km,dragMomentum:u=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:u}}}function Lf(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function N7(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class C7 extends Tl{constructor(t){super(t),this.removeGroupControls=Pr,this.removeListeners=Pr,this.controls=new S7(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Pr}unmount(){this.removeGroupControls(),this.removeListeners()}}const Ew=e=>(t,n)=>{e&&Hn.update(()=>e(t,n))};class E7 extends Tl{constructor(){super(...arguments),this.removePointerDownListener=Pr}onPointerDown(t){this.session=new cS(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:gS(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Ew(t),onStart:Ew(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Hn.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=fo(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function _7(){const e=me.useContext(C1);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,i=me.useId();return me.useEffect(()=>r(i),[]),!t&&n?[!1,()=>n&&n(i)]:[!0]}const i0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function _w(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const xd={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Bt.test(e))e=parseFloat(e);else return e;const n=_w(e,t.target.x),r=_w(e,t.target.y);return`${n}% ${r}%`}},T7={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=vl.parse(e);if(i.length>5)return r;const s=vl.createTransformer(e),o=typeof i[0]!="number"?1:0,u=n.x.scale*t.x,d=n.y.scale*t.y;i[0+o]/=u,i[1+o]/=d;const f=hr(u,d,.5);return typeof i[2+o]=="number"&&(i[2+o]/=f),typeof i[3+o]=="number"&&(i[3+o]/=f),s(i)}};class I7 extends Wt.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;RT(k7),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),i0.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||t.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?o.promote():o.relegate()||Hn.postRender(()=>{const u=o.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function mS(e){const[t,n]=_7(),r=me.useContext(xx);return Wt.createElement(I7,{...e,layoutGroup:r,switchLayoutGroup:me.useContext(dA),isPresent:t,safeToRemove:n})}const k7={borderRadius:{...xd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:xd,borderTopRightRadius:xd,borderBottomLeftRadius:xd,borderBottomRightRadius:xd,boxShadow:T7},xS=["TopLeft","TopRight","BottomLeft","BottomRight"],L7=xS.length,Tw=e=>typeof e=="string"?parseFloat(e):e,Iw=e=>typeof e=="number"||Bt.test(e);function P7(e,t,n,r,i,s){i?(e.opacity=hr(0,n.opacity!==void 0?n.opacity:1,j7(r)),e.opacityExit=hr(t.opacity!==void 0?t.opacity:1,0,O7(r))):s&&(e.opacity=hr(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<L7;o++){const u=`border${xS[o]}Radius`;let d=kw(t,u),f=kw(n,u);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||Iw(d)===Iw(f)?(e[u]=Math.max(hr(Tw(d),Tw(f),r),0),(Fa.test(f)||Fa.test(d))&&(e[u]+="%")):e[u]=f}(t.rotate||n.rotate)&&(e.rotate=hr(t.rotate||0,n.rotate||0,r))}function kw(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const j7=yS(0,.5,UA),O7=yS(.5,.95,Pr);function yS(e,t,n){return r=>r<e?0:r>t?1:n(vh(e,t,r))}function Lw(e,t){e.min=t.min,e.max=t.max}function zs(e,t){Lw(e.x,t.x),Lw(e.y,t.y)}function Pw(e,t,n,r,i){return e-=t,e=H0(e,1/n,r),i!==void 0&&(e=H0(e,1/i,r)),e}function D7(e,t=0,n=1,r=.5,i,s=e,o=e){if(Fa.test(t)&&(t=parseFloat(t),t=hr(o.min,o.max,t/100)-o.min),typeof t!="number")return;let u=hr(s.min,s.max,r);e===s&&(u-=t),e.min=Pw(e.min,t,n,u,i),e.max=Pw(e.max,t,n,u,i)}function jw(e,t,[n,r,i],s,o){D7(e,t[n],t[r],t[i],t.scale,s,o)}const R7=["x","scaleX","originX"],M7=["y","scaleY","originY"];function Ow(e,t,n,r){jw(e.x,t,R7,n?n.x:void 0,r?r.x:void 0),jw(e.y,t,M7,n?n.y:void 0,r?r.y:void 0)}function Dw(e){return e.translate===0&&e.scale===1}function vS(e){return Dw(e.x)&&Dw(e.y)}function B7(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function wS(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function Rw(e){return Ts(e.x)/Ts(e.y)}class F7{constructor(){this.members=[]}add(t){Px(this.members,t),t.scheduleRender()}remove(t){if(jx(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Mw(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:d,rotateX:f,rotateY:x}=n;d&&(r+=`rotate(${d}deg) `),f&&(r+=`rotateX(${f}deg) `),x&&(r+=`rotateY(${x}deg) `)}const o=e.x.scale*t.x,u=e.y.scale*t.y;return(o!==1||u!==1)&&(r+=`scale(${o}, ${u})`),r||"none"}const U7=(e,t)=>e.depth-t.depth;class V7{constructor(){this.children=[],this.isDirty=!1}add(t){Px(this.children,t),this.isDirty=!0}remove(t){jx(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(U7),this.isDirty=!1,this.children.forEach(t)}}function z7(e,t){const n=performance.now(),r=({timestamp:i})=>{const s=i-n;s>=t&&(wo(r),e(s-t))};return Hn.read(r,!0),()=>wo(r)}function H7(e){window.MotionDebug&&window.MotionDebug.record(e)}function q7(e){return e instanceof SVGElement&&e.tagName!=="svg"}function W7(e,t,n){const r=ls(e)?e:Ru(e);return r.start(Lx("",r,t,n)),r.animation}const Bw=["","X","Y","Z"],G7={visibility:"hidden"},Fw=1e3;let $7=0;const tc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function bS({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},u=t==null?void 0:t()){this.id=$7++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,tc.totalNodes=tc.resolvedTargetDeltas=tc.recalculatedProjection=0,this.nodes.forEach(K7),this.nodes.forEach(tL),this.nodes.forEach(nL),this.nodes.forEach(Z7),H7(tc)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new V7)}addEventListener(o,u){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Ox),this.eventHandlers.get(o).add(u)}notifyListeners(o,...u){const d=this.eventHandlers.get(o);d&&d.notify(...u)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=q7(o),this.instance=o;const{layoutId:d,layout:f,visualElement:x}=this.options;if(x&&!x.current&&x.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(f||d)&&(this.isLayoutDirty=!0),e){let y;const A=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,y&&y(),y=z7(A,250),i0.hasAnimatedSinceResize&&(i0.hasAnimatedSinceResize=!1,this.nodes.forEach(Vw))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&x&&(d||f)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:A,hasRelativeTargetChanged:b,layout:P})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const I=this.options.transition||x.getDefaultTransition()||oL,{onLayoutAnimationStart:j,onLayoutAnimationComplete:C}=x.getProps(),_=!this.targetLayout||!wS(this.targetLayout,P)||b,k=!A&&b;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||k||A&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(y,k);const R={...kx(I,"layout"),onPlay:j,onComplete:C};(x.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R)}else A||Vw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=P})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,wo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(rL),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let x=0;x<this.path.length;x++){const y=this.path[x];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Uw);return}this.isUpdating||this.nodes.forEach(J7),this.isUpdating=!1,this.nodes.forEach(eL),this.nodes.forEach(Y7),this.nodes.forEach(X7),this.clearAllSnapshots();const u=performance.now();Li.delta=yl(0,1e3/60,u-Li.timestamp),Li.timestamp=u,Li.isProcessing=!0,Vp.update.process(Li),Vp.preRender.process(Li),Vp.render.process(Li),Li.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Q7),this.sharedNodes.forEach(iL)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Hn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Hn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ur(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let u=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(u=!1),u&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,u=this.projectionDelta&&!vS(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,x=f!==this.prevTransformTemplateValue;o&&(u||ec(this.latestValues)||x)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return o&&(d=this.removeTransform(d)),lL(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Ur();const u=o.measureViewportBox(),{scroll:d}=this.root;return d&&(Ko(u.x,d.offset.x),Ko(u.y,d.offset.y)),u}removeElementScroll(o){const u=Ur();zs(u,o);for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:x,options:y}=f;if(f!==this.root&&x&&y.layoutScroll){if(x.isRoot){zs(u,o);const{scroll:A}=this.root;A&&(Ko(u.x,-A.offset.x),Ko(u.y,-A.offset.y))}Ko(u.x,x.offset.x),Ko(u.y,x.offset.y)}}return u}applyTransform(o,u=!1){const d=Ur();zs(d,o);for(let f=0;f<this.path.length;f++){const x=this.path[f];!u&&x.options.layoutScroll&&x.scroll&&x!==x.root&&mu(d,{x:-x.scroll.offset.x,y:-x.scroll.offset.y}),ec(x.latestValues)&&mu(d,x.latestValues)}return ec(this.latestValues)&&mu(d,this.latestValues),d}removeTransform(o){const u=Ur();zs(u,o);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!ec(f.latestValues))continue;Lm(f.latestValues)&&f.updateSnapshot();const x=Ur(),y=f.measurePageBox();zs(x,y),Ow(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,x)}return ec(this.latestValues)&&Ow(u,this.latestValues),u}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Li.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var u;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==d;if(!(o||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:y,layoutId:A}=this.options;if(!(!this.layout||!(y||A))){if(this.resolvedRelativeTargetAt=Li.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ur(),this.relativeTargetOrigin=Ur(),Hd(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),zs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ur(),this.targetWithTransforms=Ur()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),c7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):zs(this.target,this.layout.layoutBox),fS(this.target,this.targetDelta)):zs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ur(),this.relativeTargetOrigin=Ur(),Hd(this.relativeTargetOrigin,this.target,b.target),zs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}tc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Lm(this.parent.latestValues)||hS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const u=this.getLead(),d=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(f=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Li.timestamp&&(f=!1),f)return;const{layout:x,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||y))return;zs(this.layoutCorrected,this.layout.layoutBox);const A=this.treeScale.x,b=this.treeScale.y;y7(this.layoutCorrected,this.treeScale,this.path,d),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox);const{target:P}=u;if(!P){this.projectionTransform&&(this.projectionDelta=gu(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=gu(),this.projectionDeltaWithTransform=gu());const I=this.projectionTransform;zd(this.projectionDelta,this.layoutCorrected,P,this.latestValues),this.projectionTransform=Mw(this.projectionDelta,this.treeScale),(this.projectionTransform!==I||this.treeScale.x!==A||this.treeScale.y!==b)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",P)),tc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,u=!1){const d=this.snapshot,f=d?d.latestValues:{},x={...this.latestValues},y=gu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const A=Ur(),b=d?d.source:void 0,P=this.layout?this.layout.source:void 0,I=b!==P,j=this.getStack(),C=!j||j.members.length<=1,_=!!(I&&!C&&this.options.crossfade===!0&&!this.path.some(aL));this.animationProgress=0;let k;this.mixTargetDelta=R=>{const M=R/1e3;zw(y.x,o.x,M),zw(y.y,o.y,M),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Hd(A,this.layout.layoutBox,this.relativeParent.layout.layoutBox),sL(this.relativeTarget,this.relativeTargetOrigin,A,M),k&&B7(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=Ur()),zs(k,this.relativeTarget)),I&&(this.animationValues=x,P7(x,f,this.latestValues,M,_,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(wo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Hn.update(()=>{i0.hasAnimatedSinceResize=!0,this.currentAnimation=W7(0,Fw,{...o,onUpdate:u=>{this.mixTargetDelta(u),o.onUpdate&&o.onUpdate(u)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Fw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:u,target:d,layout:f,latestValues:x}=o;if(!(!u||!d||!f)){if(this!==o&&this.layout&&f&&AS(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||Ur();const y=Ts(this.layout.layoutBox.x);d.x.min=o.target.x.min,d.x.max=d.x.min+y;const A=Ts(this.layout.layoutBox.y);d.y.min=o.target.y.min,d.y.max=d.y.min+A}zs(u,d),mu(u,x),zd(this.projectionDeltaWithTransform,this.layoutCorrected,u,x)}}registerSharedNode(o,u){this.sharedNodes.has(o)||this.sharedNodes.set(o,new F7),this.sharedNodes.get(o).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:u}=this.options;return u?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:u}=this.options;return u?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:u,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),o&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let u=!1;const{latestValues:d}=o;if((d.rotate||d.rotateX||d.rotateY||d.rotateZ)&&(u=!0),!u)return;const f={};for(let x=0;x<Bw.length;x++){const y="rotate"+Bw[x];d[y]&&(f[y]=d[y],o.setStaticValue(y,0))}o.render();for(const x in f)o.setStaticValue(x,f[x]);o.scheduleRender()}getProjectionStyles(o){var u,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return G7;const f={visibility:""},x=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=r0(o==null?void 0:o.pointerEvents)||"",f.transform=x?x(this.latestValues,""):"none",f;const y=this.getLead();if(!this.projectionDelta||!this.layout||!y.target){const I={};return this.options.layoutId&&(I.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,I.pointerEvents=r0(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!ec(this.latestValues)&&(I.transform=x?x({},""):"none",this.hasProjected=!1),I}const A=y.animationValues||y.latestValues;this.applyTransformsToTarget(),f.transform=Mw(this.projectionDeltaWithTransform,this.treeScale,A),x&&(f.transform=x(A,f.transform));const{x:b,y:P}=this.projectionDelta;f.transformOrigin=`${b.origin*100}% ${P.origin*100}% 0`,y.animationValues?f.opacity=y===this?(d=(u=A.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:A.opacityExit:f.opacity=y===this?A.opacity!==void 0?A.opacity:"":A.opacityExit!==void 0?A.opacityExit:0;for(const I in R0){if(A[I]===void 0)continue;const{correct:j,applyTo:C}=R0[I],_=f.transform==="none"?A[I]:j(A[I],y);if(C){const k=C.length;for(let R=0;R<k;R++)f[C[R]]=_}else f[I]=_}return this.options.layoutId&&(f.pointerEvents=y===this?r0(o==null?void 0:o.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var u;return(u=o.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(Uw),this.root.sharedNodes.clear()}}}function Y7(e){e.updateLayout()}function X7(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:s}=e.options,o=n.source!==e.layout.source;s==="size"?Hs(y=>{const A=o?n.measuredBox[y]:n.layoutBox[y],b=Ts(A);A.min=r[y].min,A.max=A.min+b}):AS(s,n.layoutBox,r)&&Hs(y=>{const A=o?n.measuredBox[y]:n.layoutBox[y],b=Ts(r[y]);A.max=A.min+b,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[y].max=e.relativeTarget[y].min+b)});const u=gu();zd(u,r,n.layoutBox);const d=gu();o?zd(d,e.applyTransform(i,!0),n.measuredBox):zd(d,r,n.layoutBox);const f=!vS(u);let x=!1;if(!e.resumeFrom){const y=e.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:A,layout:b}=y;if(A&&b){const P=Ur();Hd(P,n.layoutBox,A.layoutBox);const I=Ur();Hd(I,r,b.layoutBox),wS(P,I)||(x=!0),y.options.layoutRoot&&(e.relativeTarget=I,e.relativeTargetOrigin=P,e.relativeParent=y)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:d,layoutDelta:u,hasLayoutChanged:f,hasRelativeTargetChanged:x})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function K7(e){tc.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Z7(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Q7(e){e.clearSnapshot()}function Uw(e){e.clearMeasurements()}function J7(e){e.isLayoutDirty=!1}function eL(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Vw(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function tL(e){e.resolveTargetDelta()}function nL(e){e.calcProjection()}function rL(e){e.resetRotation()}function iL(e){e.removeLeadSnapshot()}function zw(e,t,n){e.translate=hr(t.translate,0,n),e.scale=hr(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Hw(e,t,n,r){e.min=hr(t.min,n.min,r),e.max=hr(t.max,n.max,r)}function sL(e,t,n,r){Hw(e.x,t.x,n.x,r),Hw(e.y,t.y,n.y,r)}function aL(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const oL={duration:.45,ease:[.4,0,.1,1]},qw=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),Ww=qw("applewebkit/")&&!qw("chrome/")?Math.round:Pr;function Gw(e){e.min=Ww(e.min),e.max=Ww(e.max)}function lL(e){Gw(e.x),Gw(e.y)}function AS(e,t,n){return e==="position"||e==="preserve-aspect"&&!Im(Rw(t),Rw(n),.2)}const cL=bS({attachResizeListener:(e,t)=>co(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Qp={current:void 0},SS=bS({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Qp.current){const e=new cL({});e.mount(window),e.setOptions({layoutScroll:!0}),Qp.current=e}return Qp.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),uL={pan:{Feature:E7},drag:{Feature:C7,ProjectionNode:SS,MeasureLayout:mS}},dL=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function hL(e){const t=dL.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}function jm(e,t,n=1){const[r,i]=hL(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const o=s.trim();return sS(o)?parseFloat(o):o}else return Am(i)?jm(i,t,n+1):i}function fL(e,{...t},n){const r=e.current;if(!(r instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(i=>{const s=i.get();if(!Am(s))return;const o=jm(s,r);o&&i.set(o)});for(const i in t){const s=t[i];if(!Am(s))continue;const o=jm(s,r);o&&(t[i]=o,n||(n={}),n[i]===void 0&&(n[i]=s))}return{target:t,transitionEnd:n}}const pL=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),NS=e=>pL.has(e),gL=e=>Object.keys(e).some(NS),$w=e=>e===Tc||e===Bt,Yw=(e,t)=>parseFloat(e.split(", ")[t]),Xw=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return Yw(i[1],t);{const s=r.match(/^matrix\((.+)\)$/);return s?Yw(s[1],e):0}},mL=new Set(["x","y","z"]),xL=jh.filter(e=>!mL.has(e));function yL(e){const t=[];return xL.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Mu={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Xw(4,13),y:Xw(5,14)};Mu.translateX=Mu.x;Mu.translateY=Mu.y;const vL=(e,t,n)=>{const r=t.measureViewportBox(),i=t.current,s=getComputedStyle(i),{display:o}=s,u={};o==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(f=>{u[f]=Mu[f](r,s)}),t.render();const d=t.measureViewportBox();return n.forEach(f=>{const x=t.getValue(f);x&&x.jump(u[f]),e[f]=Mu[f](d,s)}),e},wL=(e,t,n={},r={})=>{t={...t},r={...r};const i=Object.keys(t).filter(NS);let s=[],o=!1;const u=[];if(i.forEach(d=>{const f=e.getValue(d);if(!e.hasValue(d))return;let x=n[d],y=md(x);const A=t[d];let b;if(B0(A)){const P=A.length,I=A[0]===null?1:0;x=A[I],y=md(x);for(let j=I;j<P&&A[j]!==null;j++)b?Cx(md(A[j])===b):b=md(A[j])}else b=md(A);if(y!==b)if($w(y)&&$w(b)){const P=f.get();typeof P=="string"&&f.set(parseFloat(P)),typeof A=="string"?t[d]=parseFloat(A):Array.isArray(A)&&b===Bt&&(t[d]=A.map(parseFloat))}else y!=null&&y.transform&&(b!=null&&b.transform)&&(x===0||A===0)?x===0?f.set(b.transform(x)):t[d]=y.transform(A):(o||(s=yL(e),o=!0),u.push(d),r[d]=r[d]!==void 0?r[d]:t[d],f.jump(A))}),u.length){const d=u.indexOf("height")>=0?window.pageYOffset:null,f=vL(t,e,u);return s.length&&s.forEach(([x,y])=>{e.getValue(x).set(y)}),e.render(),E1&&d!==null&&window.scrollTo({top:d}),{target:f,transitionEnd:r}}else return{target:t,transitionEnd:r}};function bL(e,t,n,r){return gL(t)?wL(e,t,n,r):{target:t,transitionEnd:r}}const AL=(e,t,n,r)=>{const i=fL(e,t,r);return t=i.target,r=i.transitionEnd,bL(e,t,n,r)},Om={current:null},CS={current:!1};function SL(){if(CS.current=!0,!!E1)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Om.current=e.matches;e.addListener(t),t()}else Om.current=!1}function NL(e,t,n){const{willChange:r}=t;for(const i in t){const s=t[i],o=n[i];if(ls(s))e.addValue(i,s),z0(r)&&r.add(i);else if(ls(o))e.addValue(i,Ru(s,{owner:e})),z0(r)&&r.remove(i);else if(o!==s)if(e.hasValue(i)){const u=e.getValue(i);!u.hasAnimated&&u.set(s)}else{const u=e.getStaticValue(i);e.addValue(i,Ru(u!==void 0?u:s,{owner:e}))}}for(const i in n)t[i]===void 0&&e.removeValue(i);return t}const Kw=new WeakMap,ES=Object.keys(yh),CL=ES.length,Zw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],EL=mx.length;class _L{constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Hn.render(this.render,!1,!0);const{latestValues:u,renderState:d}=s;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=T1(n),this.isVariantNode=uA(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:f,...x}=this.scrapeMotionValuesFromProps(n,{});for(const y in x){const A=x[y];u[y]!==void 0&&ls(A)&&(A.set(u[y],!1),z0(f)&&f.add(y))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,Kw.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),CS.current||SL(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Om.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Kw.delete(this.current),this.projection&&this.projection.unmount(),wo(this.notifyUpdate),wo(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const r=_c.has(t),i=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Hn.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{i(),s()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},r,i,s){let o,u;for(let d=0;d<CL;d++){const f=ES[d],{isEnabled:x,Feature:y,ProjectionNode:A,MeasureLayout:b}=yh[f];A&&(o=A),x(n)&&(!this.features[f]&&y&&(this.features[f]=new y(this)),b&&(u=b))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:d,layout:f,drag:x,dragConstraints:y,layoutScroll:A,layoutRoot:b}=n;this.projection.setOptions({layoutId:d,layout:f,alwaysMeasureLayout:!!x||y&&fu(y),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof f=="string"?f:"both",initialPromotionConfig:s,layoutScroll:A,layoutRoot:b})}return u}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ur()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Zw.length;r++){const i=Zw[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=t["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=NL(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<EL;r++){const i=mx[r],s=this.props[i];(xh(s)||s===!1)&&(n[i]=s)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Ru(n,{owner:this}),this.addValue(t,r)),r}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=Nx(this.props,r))===null||n===void 0?void 0:n[t]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!ls(s)?s:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Ox),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class _S extends _L{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...r},{transformValues:i},s){let o=qk(r,t||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),o&&(o=i(o))),s){zk(this,r,o);const u=AL(this,r,o,n);n=u.transitionEnd,r=u.target}return{transition:t,transitionEnd:n,...r}}}function TL(e){return window.getComputedStyle(e)}class IL extends _S{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(_c.has(n)){const r=Ix(n);return r&&r.default||0}else{const r=TL(t),i=(pA(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return pS(t,n)}build(t,n,r,i){vx(t,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(t,n){return Sx(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ls(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,r,i){wA(t,n,r,i)}}class kL extends _S{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(_c.has(n)){const r=Ix(n);return r&&r.default||0}return n=bA.has(n)?n:px(n),t.getAttribute(n)}measureInstanceViewportBox(){return Ur()}scrapeMotionValuesFromProps(t,n){return SA(t,n)}build(t,n,r,i){bx(t,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(t,n,r,i){AA(t,n,r,i)}mount(t){this.isSVGTag=Ax(t.tagName),super.mount(t)}}const LL=(e,t)=>yx(e)?new kL(t,{enableHardwareAcceleration:!1}):new IL(t,{enableHardwareAcceleration:!0}),PL={layout:{ProjectionNode:SS,MeasureLayout:mS}},jL={...s7,...CI,...uL,...PL},lt=OT((e,t)=>hI(e,t,jL,LL));function TS(){const e=me.useRef(!1);return fx(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function OL(){const e=TS(),[t,n]=me.useState(0),r=me.useCallback(()=>{e.current&&n(t+1)},[t]);return[me.useCallback(()=>Hn.postRender(r),[r]),t]}class DL extends me.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function RL({children:e,isPresent:t}){const n=me.useId(),r=me.useRef(null),i=me.useRef({width:0,height:0,top:0,left:0});return me.useInsertionEffect(()=>{const{width:s,height:o,top:u,left:d}=i.current;if(t||!r.current||!s||!o)return;r.current.dataset.motionPopId=n;const f=document.createElement("style");return document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${u}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[t]),me.createElement(DL,{isPresent:t,childRef:r,sizeRef:i},me.cloneElement(e,{ref:r}))}const Jp=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const u=NA(ML),d=me.useId(),f=me.useMemo(()=>({id:d,initial:t,isPresent:n,custom:i,onExitComplete:x=>{u.set(x,!0);for(const y of u.values())if(!y)return;r&&r()},register:x=>(u.set(x,!1),()=>u.delete(x))}),s?void 0:[n]);return me.useMemo(()=>{u.forEach((x,y)=>u.set(y,!1))},[n]),me.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),o==="popLayout"&&(e=me.createElement(RL,{isPresent:n},e)),me.createElement(C1.Provider,{value:f},e)};function ML(){return new Map}function BL(e){return me.useEffect(()=>()=>e(),[])}const nc=e=>e.key||"";function FL(e,t){e.forEach(n=>{const r=nc(n);t.set(r,n)})}function UL(e){const t=[];return me.Children.forEach(e,n=>{me.isValidElement(n)&&t.push(n)}),t}const IS=({children:e,custom:t,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const u=me.useContext(xx).forceRender||OL()[0],d=TS(),f=UL(e);let x=f;const y=me.useRef(new Map).current,A=me.useRef(x),b=me.useRef(new Map).current,P=me.useRef(!0);if(fx(()=>{P.current=!1,FL(f,b),A.current=x}),BL(()=>{P.current=!0,b.clear(),y.clear()}),P.current)return me.createElement(me.Fragment,null,x.map(_=>me.createElement(Jp,{key:nc(_),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:s,mode:o},_)));x=[...x];const I=A.current.map(nc),j=f.map(nc),C=I.length;for(let _=0;_<C;_++){const k=I[_];j.indexOf(k)===-1&&!y.has(k)&&y.set(k,void 0)}return o==="wait"&&y.size&&(x=[]),y.forEach((_,k)=>{if(j.indexOf(k)!==-1)return;const R=b.get(k);if(!R)return;const M=I.indexOf(k);let ne=_;if(!ne){const U=()=>{y.delete(k);const K=Array.from(b.keys()).filter(te=>!j.includes(te));if(K.forEach(te=>b.delete(te)),A.current=f.filter(te=>{const be=nc(te);return be===k||K.includes(be)}),!y.size){if(d.current===!1)return;u(),r&&r()}};ne=me.createElement(Jp,{key:nc(R),isPresent:!1,onExitComplete:U,custom:t,presenceAffectsLayout:s,mode:o},R),y.set(k,ne)}x.splice(M,0,ne)}),x=x.map(_=>{const k=_.key;return y.has(k)?_:me.createElement(Jp,{key:nc(_),isPresent:!0,presenceAffectsLayout:s,mode:o},_)}),me.createElement(me.Fragment,null,y.size?x:x.map(_=>me.cloneElement(_)))};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var VL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),rn=(e,t)=>{const n=me.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:u="",children:d,...f},x)=>me.createElement("svg",{ref:x,...VL,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${zL(e)}`,u].join(" "),...f},[...t.map(([y,A])=>me.createElement(y,A)),...Array.isArray(d)?d:[d]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=rn("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=rn("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=rn("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=rn("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=rn("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=rn("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=rn("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=rn("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=rn("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rm=rn("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=rn("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=rn("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=rn("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=rn("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=rn("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=rn("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=rn("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=rn("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=rn("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=rn("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=rn("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=rn("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=rn("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12v0c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"bpx1uq"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11v0c-.11.7-.72 1.22-1.43 1.22H17",key:"1pd0s7"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98v0C9.52 4.9 9 5.52 9 6.23V7",key:"zq5xbz"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=rn("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZL=rn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=rn("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=rn("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=rn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=rn("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bm=rn("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eP=rn("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=rn("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=rn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=rn("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tP=rn("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=rn("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=rn("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=rn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),PS=()=>{const[e,t]=me.useState(!1),[n,r]=me.useState(!1),i=Lh();me.useEffect(()=>{const o=()=>{r(window.scrollY>50)};return window.addEventListener("scroll",o),()=>window.removeEventListener("scroll",o)},[]);const s=[{name:"Home",href:i.pathname==="/"?"#home":"/#home"},{name:"Events",href:i.pathname==="/"?"#events":"/events"},{name:"About",href:i.pathname==="/"?"#about":"/#about"},{name:"Contact",href:i.pathname==="/"?"#contact":"/#contact"}];return m.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 px-2 md:px-4 pt-2 md:pt-4",children:m.jsx(lt.nav,{initial:{y:-100},animate:{y:0},className:`transition-all duration-500 ease-out ${n?"bg-white/80 backdrop-blur-xl shadow-2xl border-2 border-slate-200/80 rounded-2xl max-w-4xl md:max-w-7xl mx-auto":"bg-transparent max-w-4xl md:max-w-7xl mx-auto"}`,children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-6",children:[m.jsxs("div",{className:"flex items-center justify-between h-14 md:h-16 relative",children:[m.jsx("div",{className:"hidden md:flex items-center z-10",children:m.jsx("img",{src:"/carntext-b.svg",alt:"Carnival LDN",className:"h-6 md:h-8 w-auto max-w-[120px] md:max-w-[220px] object-contain transition-all duration-300",style:{filter:n?"none":"brightness(0) invert(1) drop-shadow(0 0 8px rgba(0,0,0,0.5))"}})}),m.jsx(lt.div,{whileHover:{scale:1.05},className:"pl-2 md:pl-0 md:absolute md:left-1/2 md:transform md:-translate-x-1/2 z-10",children:m.jsx("div",{className:"relative",children:m.jsx("img",{src:n?"/carnival-logo.svg":"/carnival-logo-w.svg",alt:"Carnival LDN Logo",className:"w-10 h-10 md:w-12 md:h-12 object-contain transition-all duration-300",style:{backgroundColor:"transparent"}})})}),m.jsx("div",{className:"flex justify-end z-10",children:m.jsx(lt.button,{whileTap:{scale:.95},onClick:()=>t(!e),className:`p-4 transition-colors rounded-lg ${n?"text-gray-700 hover:text-gray-900 hover:bg-gray-100":"text-white hover:text-gray-200 hover:bg-white/10"}`,children:e?m.jsx(Ic,{size:28,strokeWidth:2.5}):m.jsx(XL,{size:28,strokeWidth:2.5})})})]}),m.jsx(IS,{children:e&&m.jsx(lt.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:`md:hidden border-t mt-2 overflow-hidden ${n?"border-gray-200/50":"border-white/30"}`,children:m.jsxs("div",{className:"px-2 py-6 space-y-0",children:[s.map((o,u)=>m.jsxs("div",{children:[m.jsx(lt.a,{href:o.href,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:u*.1},onClick:()=>t(!1),className:`block text-center text-lg font-medium transition-colors py-3 rounded-lg ${n?"text-gray-700 hover:text-gray-900 hover:bg-gray-50":"text-white hover:text-gray-200 hover:bg-white/10"}`,children:o.name}),u<s.length-1&&m.jsx("div",{className:`border-b mx-4 ${n?"border-gray-200":"border-white/30"}`})]},o.name)),m.jsx(lt.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:s.length*.1},className:`w-full py-3 rounded-lg font-medium transition-colors text-base mt-4 ${n?"bg-gray-900 hover:bg-gray-800 text-white":"bg-white/90 hover:bg-white text-gray-900"}`,children:"Book Event"})]})})})]})})})},Mh=()=>{const e=me.useRef(null),[t,n]=me.useState(!1),[r,i]=me.useState("full");return me.useEffect(()=>{const s=()=>{if(e.current){const u=["upper","lower","full"],d=u[Math.floor(Math.random()*u.length)];i(d),n(!0),setTimeout(()=>{n(!1)},200);const f=Math.random()*500+100;setTimeout(s,f)}},o=setTimeout(()=>{s()},100);return()=>{clearTimeout(o)}},[]),{glitchRef:e,isGlitching:t,glitchType:r}},nP=()=>m.jsxs(lt.span,{className:"inline-block px-3 sm:px-4 md:px-6 py-2 sm:py-2.5 md:py-3 bg-black/20 backdrop-blur-sm rounded-full border border-white/20 text-sm sm:text-base md:text-lg",whileHover:{scale:1.05,boxShadow:"0 0 20px rgba(255, 255, 255, 0.3)",borderColor:"rgba(255, 255, 255, 0.5)"},animate:{boxShadow:["0 0 10px rgba(255, 255, 255, 0.1)","0 0 20px rgba(255, 255, 255, 0.2)","0 0 10px rgba(255, 255, 255, 0.1)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:[m.jsx(t5,{className:"hidden md:inline-block mr-2 w-4 h-4 md:w-5 md:h-5 text-yellow-400"}),"London's Most Professional Events Experience",m.jsx(t5,{className:"hidden md:inline-block ml-2 w-4 h-4 md:w-5 md:h-5 text-yellow-400"})]}),rP=()=>{const{glitchRef:e,isGlitching:t,glitchType:n}=Mh(),r=Xu(),i={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.3,delayChildren:.2}}},s={hidden:{y:50,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",damping:15,stiffness:100}}},o=()=>{r("/events")},u=()=>{const d=document.getElementById("contact");d&&d.scrollIntoView({behavior:"smooth"})};return m.jsxs("section",{id:"home",className:"relative min-h-screen flex items-center justify-center overflow-hidden pt-16 sm:pt-20 md:pt-32 pb-12 sm:pb-16 md:pb-24 px-2 sm:px-4",children:[m.jsxs("div",{className:"absolute inset-0 w-full h-full",children:[m.jsx("video",{autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"absolute inset-0 w-full h-full object-cover",children:m.jsx("source",{src:"/vid.mp4",type:"video/mp4"})}),m.jsx("div",{className:"absolute inset-0 bg-black/50"})]}),m.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-6 lg:px-8 text-center relative z-10",children:m.jsxs(lt.div,{variants:i,initial:"hidden",animate:"visible",className:"space-y-6 md:space-y-8",children:[m.jsx(lt.div,{variants:s,children:m.jsx("h1",{ref:e,className:`text-6xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl glitch-text ${t?`glitch-active glitch-${n}`:""}`,"data-text":"CARNIVAL LDN",style:{textTransform:"uppercase",letterSpacing:"0.1em"},children:"CARNIVAL LDN"})}),m.jsxs(lt.div,{variants:s,className:"space-y-4 md:space-y-6 lg:space-y-7",children:[m.jsx(lt.h2,{className:"text-base sm:text-lg md:text-xl lg:text-2xl font-light max-w-4xl mx-auto leading-relaxed px-2 text-white drop-shadow-lg",children:m.jsx(nP,{})}),m.jsx(lt.p,{animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:12,repeat:1/0,ease:"linear"},className:"text-s sm:text-sm md:text-base lg:text-lg xl:text-xl max-w-3xl mx-auto leading-relaxed px-2 bg-gradient-to-r from-gray-200 via-white to-gray-200 bg-[length:200%_200%] bg-clip-text text-transparent drop-shadow-lg",children:"From corporate events to cultural celebrations, from exclusive parties to memorable occasions"})]}),m.jsxs(lt.div,{variants:s,className:"flex flex-col sm:flex-row gap-3 sm:gap-4 md:gap-6 justify-center items-center pt-4 sm:pt-6 md:pt-8 px-2 sm:px-4",children:[m.jsxs(lt.button,{onClick:o,whileHover:{scale:1.05,boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},whileTap:{scale:.95},className:"bg-white/90 hover:bg-white text-gray-900 font-bold text-base sm:text-base md:text-lg px-4 sm:px-6 md:px-8 py-2.5 sm:py-3 md:py-4 rounded-lg group w-3/4 sm:w-auto flex items-center justify-center space-x-2 transition-all shadow-lg backdrop-blur-sm border border-white/30",children:[m.jsx("span",{children:"Explore Events"}),m.jsx(q0,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5 group-hover:translate-x-1 transition-transform"})]}),m.jsx(lt.button,{onClick:u,whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-transparent hover:bg-white/90 text-white hover:text-gray-900 px-4 sm:px-6 md:px-8 py-2.5 sm:py-3 md:py-4 text-base sm:text-base md:text-lg font-semibold rounded-lg border-2 border-white/70 w-3/4 sm:w-auto transition-all backdrop-blur-sm",children:"Book Private Event"})]})]})})]})},iP={},n5=e=>{let t;const n=new Set,r=(x,y)=>{const A=typeof x=="function"?x(t):x;if(!Object.is(A,t)){const b=t;t=y??(typeof A!="object"||A===null)?A:Object.assign({},t,A),n.forEach(P=>P(t,b))}},i=()=>t,d={setState:r,getState:i,getInitialState:()=>f,subscribe:x=>(n.add(x),()=>n.delete(x)),destroy:()=>{(iP?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},f=t=e(r,i,d);return d},sP=e=>e?n5(e):n5;var jS={exports:{}},OS={},DS={exports:{}},RS={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bu=me;function aP(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var oP=typeof Object.is=="function"?Object.is:aP,lP=Bu.useState,cP=Bu.useEffect,uP=Bu.useLayoutEffect,dP=Bu.useDebugValue;function hP(e,t){var n=t(),r=lP({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return uP(function(){i.value=n,i.getSnapshot=t,eg(i)&&s({inst:i})},[e,n,t]),cP(function(){return eg(i)&&s({inst:i}),e(function(){eg(i)&&s({inst:i})})},[e]),dP(n),n}function eg(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oP(e,n)}catch{return!0}}function fP(e,t){return t()}var pP=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?fP:hP;RS.useSyncExternalStore=Bu.useSyncExternalStore!==void 0?Bu.useSyncExternalStore:pP;DS.exports=RS;var gP=DS.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O1=me,mP=gP;function xP(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yP=typeof Object.is=="function"?Object.is:xP,vP=mP.useSyncExternalStore,wP=O1.useRef,bP=O1.useEffect,AP=O1.useMemo,SP=O1.useDebugValue;OS.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=wP(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=AP(function(){function d(b){if(!f){if(f=!0,x=b,b=r(b),i!==void 0&&o.hasValue){var P=o.value;if(i(P,b))return y=P}return y=b}if(P=y,yP(x,b))return P;var I=r(b);return i!==void 0&&i(P,I)?(x=b,P):(x=b,y=I)}var f=!1,x,y,A=n===void 0?null:n;return[function(){return d(t())},A===null?void 0:function(){return d(A())}]},[t,n,r,i]);var u=vP(e,s[0],s[1]);return bP(function(){o.hasValue=!0,o.value=u},[u]),SP(u),u};jS.exports=OS;var NP=jS.exports;const CP=i1(NP),MS={},{useDebugValue:EP}=Wt,{useSyncExternalStoreWithSelector:_P}=CP;let r5=!1;const TP=e=>e;function IP(e,t=TP,n){(MS?"production":void 0)!=="production"&&n&&!r5&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),r5=!0);const r=_P(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return EP(r),r}const kP=e=>{(MS?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?sP(e):e,n=(r,i)=>IP(t,r,i);return Object.assign(n,t),n},LP=e=>kP,PP={};function jP(e,t){let n;try{n=e()}catch{return}return{getItem:i=>{var s;const o=d=>d===null?null:JSON.parse(d,void 0),u=(s=n.getItem(i))!=null?s:null;return u instanceof Promise?u.then(o):o(u)},setItem:(i,s)=>n.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>n.removeItem(i)}}const wh=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return wh(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return wh(r)(n)}}}},OP=(e,t)=>(n,r,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:j=>j,version:0,merge:(j,C)=>({...C,...j}),...t},o=!1;const u=new Set,d=new Set;let f;try{f=s.getStorage()}catch{}if(!f)return e((...j)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...j)},r,i);const x=wh(s.serialize),y=()=>{const j=s.partialize({...r()});let C;const _=x({state:j,version:s.version}).then(k=>f.setItem(s.name,k)).catch(k=>{C=k});if(C)throw C;return _},A=i.setState;i.setState=(j,C)=>{A(j,C),y()};const b=e((...j)=>{n(...j),y()},r,i);let P;const I=()=>{var j;if(!f)return;o=!1,u.forEach(_=>_(r()));const C=((j=s.onRehydrateStorage)==null?void 0:j.call(s,r()))||void 0;return wh(f.getItem.bind(f))(s.name).then(_=>{if(_)return s.deserialize(_)}).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==s.version){if(s.migrate)return s.migrate(_.state,_.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return _.state}).then(_=>{var k;return P=s.merge(_,(k=r())!=null?k:b),n(P,!0),y()}).then(()=>{C==null||C(P,void 0),o=!0,d.forEach(_=>_(P))}).catch(_=>{C==null||C(void 0,_)})};return i.persist={setOptions:j=>{s={...s,...j},j.getStorage&&(f=j.getStorage())},clearStorage:()=>{f==null||f.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>I(),hasHydrated:()=>o,onHydrate:j=>(u.add(j),()=>{u.delete(j)}),onFinishHydration:j=>(d.add(j),()=>{d.delete(j)})},I(),P||b},DP=(e,t)=>(n,r,i)=>{let s={storage:jP(()=>localStorage),partialize:I=>I,version:0,merge:(I,j)=>({...j,...I}),...t},o=!1;const u=new Set,d=new Set;let f=s.storage;if(!f)return e((...I)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...I)},r,i);const x=()=>{const I=s.partialize({...r()});return f.setItem(s.name,{state:I,version:s.version})},y=i.setState;i.setState=(I,j)=>{y(I,j),x()};const A=e((...I)=>{n(...I),x()},r,i);i.getInitialState=()=>A;let b;const P=()=>{var I,j;if(!f)return;o=!1,u.forEach(_=>{var k;return _((k=r())!=null?k:A)});const C=((j=s.onRehydrateStorage)==null?void 0:j.call(s,(I=r())!=null?I:A))||void 0;return wh(f.getItem.bind(f))(s.name).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==s.version){if(s.migrate)return[!0,s.migrate(_.state,_.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,_.state];return[!1,void 0]}).then(_=>{var k;const[R,M]=_;if(b=s.merge(M,(k=r())!=null?k:A),n(b,!0),R)return x()}).then(()=>{C==null||C(b,void 0),b=r(),o=!0,d.forEach(_=>_(b))}).catch(_=>{C==null||C(void 0,_)})};return i.persist={setOptions:I=>{s={...s,...I},I.storage&&(f=I.storage)},clearStorage:()=>{f==null||f.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>P(),hasHydrated:()=>o,onHydrate:I=>(u.add(I),()=>{u.delete(I)}),onFinishHydration:I=>(d.add(I),()=>{d.delete(I)})},s.skipHydration||P(),b||A},RP=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((PP?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),OP(e,t)):DP(e,t),MP=RP,BP="modulepreload",FP=function(e){return"/"+e},i5={},wl=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),u=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(d=>{if(d=FP(d),d in i5)return;i5[d]=!0;const f=d.endsWith(".css"),x=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${x}`))return;const y=document.createElement("link");if(y.rel=f?"stylesheet":BP,f||(y.as="script"),y.crossOrigin="",y.href=d,u&&y.setAttribute("nonce",u),document.head.appendChild(y),f)return new Promise((A,b)=>{y.addEventListener("load",A),y.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(o){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=o,window.dispatchEvent(u),!u.defaultPrevented)throw o}return i.then(o=>{for(const u of o||[])u.status==="rejected"&&s(u.reason);return t().catch(s)})},UP=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>wl(async()=>{const{default:r}=await Promise.resolve().then(()=>Ku);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Mx extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class VP extends Mx{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class s5 extends Mx{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class a5 extends Mx{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Um;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Um||(Um={}));var zP=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function u(x){try{f(r.next(x))}catch(y){o(y)}}function d(x){try{f(r.throw(x))}catch(y){o(y)}}function f(x){x.done?s(x.value):i(x.value).then(u,d)}f((r=r.apply(e,t||[])).next())})};class HP{constructor(t,{headers:n={},customFetch:r,region:i=Um.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=UP(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return zP(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=n;let u={},{region:d}=n;d||(d=this.region);const f=new URL(`${this.url}/${t}`);d&&d!=="any"&&(u["x-region"]=d,f.searchParams.set("forceFunctionRegion",d));let x;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",x=o):typeof o=="string"?(u["Content-Type"]="text/plain",x=o):typeof FormData<"u"&&o instanceof FormData?x=o:(u["Content-Type"]="application/json",x=JSON.stringify(o)));const y=yield this.fetch(f.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),i),body:x}).catch(I=>{throw new VP(I)}),A=y.headers.get("x-relay-error");if(A&&A==="true")throw new s5(y);if(!y.ok)throw new a5(y);let b=((r=y.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),P;return b==="application/json"?P=yield y.json():b==="application/octet-stream"?P=yield y.blob():b==="text/event-stream"?P=y:b==="multipart/form-data"?P=yield y.formData():P=yield y.text(),{data:P,error:null,response:y}}catch(i){return{data:null,error:i,response:i instanceof a5||i instanceof s5?i.context:void 0}}})}}var ns={},Bx={},D1={},Bh={},R1={},M1={},qP=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Fu=qP();const WP=Fu.fetch,BS=Fu.fetch.bind(Fu),FS=Fu.Headers,GP=Fu.Request,$P=Fu.Response,Ku=Object.freeze(Object.defineProperty({__proto__:null,Headers:FS,Request:GP,Response:$P,default:BS,fetch:WP},Symbol.toStringTag,{value:"Module"})),YP=r8(Ku);var B1={};Object.defineProperty(B1,"__esModule",{value:!0});let XP=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};B1.default=XP;var US=mi&&mi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(M1,"__esModule",{value:!0});const KP=US(YP),ZP=US(B1);let QP=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=KP.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,u,d;let f=null,x=null,y=null,A=s.status,b=s.statusText;if(s.ok){if(this.method!=="HEAD"){const C=await s.text();C===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?x=C:x=JSON.parse(C))}const I=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),j=(u=s.headers.get("content-range"))===null||u===void 0?void 0:u.split("/");I&&j&&j.length>1&&(y=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(x)&&(x.length>1?(f={code:"PGRST116",details:`Results contain ${x.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},x=null,y=null,A=406,b="Not Acceptable"):x.length===1?x=x[0]:x=null)}else{const I=await s.text();try{f=JSON.parse(I),Array.isArray(f)&&s.status===404&&(x=[],f=null,A=200,b="OK")}catch{s.status===404&&I===""?(A=204,b="No Content"):f={message:I}}if(f&&this.isMaybeSingle&&(!((d=f==null?void 0:f.details)===null||d===void 0)&&d.includes("0 rows"))&&(f=null,A=200,b="OK"),f&&this.shouldThrowOnError)throw new ZP.default(f)}return{error:f,data:x,count:y,status:A,statusText:b}});return this.shouldThrowOnError||(i=i.catch(s=>{var o,u,d;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(u=s==null?void 0:s.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(d=s==null?void 0:s.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,n)}returns(){return this}overrideTypes(){return this}};M1.default=QP;var JP=mi&&mi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(R1,"__esModule",{value:!0});const ej=JP(M1);let tj=class extends ej.default{select(t){let n=!1;const r=(t??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const o=s?`${s}.order`:"order",u=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${u?`${u},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var u;const d=[t?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),f=(u=this.headers.Accept)!==null&&u!==void 0?u:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${f}"; options=${d};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};R1.default=tj;var nj=mi&&mi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bh,"__esModule",{value:!0});const rj=nj(R1);let ij=class extends rj.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${s}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Bh.default=ij;var sj=mi&&mi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(D1,"__esModule",{value:!0});const yd=sj(Bh);let aj=class{constructor(t,{headers:n={},schema:r,fetch:i}){this.url=t,this.headers=n,this.schema=r,this.fetch=i}select(t,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let s=!1;const o=(t??"*").split("").map(u=>/\s/.test(u)&&!s?"":(u==='"'&&(s=!s),u)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new yd.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(t)){const o=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(o.length>0){const u=[...new Set(o)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new yd.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){const o="POST",u=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&u.push(this.headers.Prefer),i&&u.push(`count=${i}`),s||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(t)){const d=t.reduce((f,x)=>f.concat(Object.keys(x)),[]);if(d.length>0){const f=[...new Set(d)].map(x=>`"${x}"`);this.url.searchParams.set("columns",f.join(","))}}return new yd.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),this.headers.Prefer=i.join(","),new yd.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new yd.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};D1.default=aj;var F1={},U1={};Object.defineProperty(U1,"__esModule",{value:!0});U1.version=void 0;U1.version="0.0.0-automated";Object.defineProperty(F1,"__esModule",{value:!0});F1.DEFAULT_HEADERS=void 0;const oj=U1;F1.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${oj.version}`};var VS=mi&&mi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bx,"__esModule",{value:!0});const lj=VS(D1),cj=VS(Bh),uj=F1;let dj=class zS{constructor(t,{headers:n={},schema:r,fetch:i}={}){this.url=t,this.headers=Object.assign(Object.assign({},uj.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=i}from(t){const n=new URL(`${this.url}/${t}`);return new lj.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new zS(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:i=!1,count:s}={}){let o;const u=new URL(`${this.url}/rpc/${t}`);let d;r||i?(o=r?"HEAD":"GET",Object.entries(n).filter(([x,y])=>y!==void 0).map(([x,y])=>[x,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([x,y])=>{u.searchParams.append(x,y)})):(o="POST",d=n);const f=Object.assign({},this.headers);return s&&(f.Prefer=`count=${s}`),new cj.default({method:o,url:u,headers:f,schema:this.schemaName,body:d,fetch:this.fetch,allowEmpty:!1})}};Bx.default=dj;var Zu=mi&&mi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ns,"__esModule",{value:!0});ns.PostgrestError=ns.PostgrestBuilder=ns.PostgrestTransformBuilder=ns.PostgrestFilterBuilder=ns.PostgrestQueryBuilder=ns.PostgrestClient=void 0;const HS=Zu(Bx);ns.PostgrestClient=HS.default;const qS=Zu(D1);ns.PostgrestQueryBuilder=qS.default;const WS=Zu(Bh);ns.PostgrestFilterBuilder=WS.default;const GS=Zu(R1);ns.PostgrestTransformBuilder=GS.default;const $S=Zu(M1);ns.PostgrestBuilder=$S.default;const YS=Zu(B1);ns.PostgrestError=YS.default;var hj=ns.default={PostgrestClient:HS.default,PostgrestQueryBuilder:qS.default,PostgrestFilterBuilder:WS.default,PostgrestTransformBuilder:GS.default,PostgrestBuilder:$S.default,PostgrestError:YS.default};const{PostgrestClient:fj,PostgrestQueryBuilder:dB,PostgrestFilterBuilder:hB,PostgrestTransformBuilder:fB,PostgrestBuilder:pB,PostgrestError:gB}=hj;class pj{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const gj="2.15.1",mj=`realtime-js/${gj}`,xj="1.0.0",Vm=1e4,yj=1e3,vj=100;var Wd;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Wd||(Wd={}));var Yr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Yr||(Yr={}));var ua;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ua||(ua={}));var zm;(function(e){e.websocket="websocket"})(zm||(zm={}));var sc;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(sc||(sc={}));class wj{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const u=r.decode(t.slice(o,o+i));o=o+i;const d=r.decode(t.slice(o,o+s));o=o+s;const f=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:u,event:d,payload:f}}}class XS{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Vn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Vn||(Vn={}));const o5=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((s,o)=>(s[o]=bj(o,e,t,i),s),{})},bj=(e,t,n,r)=>{const i=t.find(u=>u.name===e),s=i==null?void 0:i.type,o=n[e];return s&&!r.includes(s)?KS(s,o):Hm(o)},KS=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return Cj(t,n)}switch(e){case Vn.bool:return Aj(t);case Vn.float4:case Vn.float8:case Vn.int2:case Vn.int4:case Vn.int8:case Vn.numeric:case Vn.oid:return Sj(t);case Vn.json:case Vn.jsonb:return Nj(t);case Vn.timestamp:return Ej(t);case Vn.abstime:case Vn.date:case Vn.daterange:case Vn.int4range:case Vn.int8range:case Vn.money:case Vn.reltime:case Vn.text:case Vn.time:case Vn.timestamptz:case Vn.timetz:case Vn.tsrange:case Vn.tstzrange:return Hm(t);default:return Hm(t)}},Hm=e=>e,Aj=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Sj=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Nj=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Cj=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let s;const o=e.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(u=>KS(t,u))}return e},Ej=e=>typeof e=="string"?e.replace(" ","T"):e,ZS=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class tg{constructor(t,n,r={},i=Vm){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var l5;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(l5||(l5={}));class Gd{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gd.syncState(this.state,i,s,o),this.pendingDiffs.forEach(d=>{this.state=Gd.syncDiff(this.state,d,s,o)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Gd.syncDiff(this.state,i,s,o),u())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const s=this.cloneDeep(t),o=this.transformState(n),u={},d={};return this.map(s,(f,x)=>{o[f]||(d[f]=x)}),this.map(o,(f,x)=>{const y=s[f];if(y){const A=x.map(j=>j.presence_ref),b=y.map(j=>j.presence_ref),P=x.filter(j=>b.indexOf(j.presence_ref)<0),I=y.filter(j=>A.indexOf(j.presence_ref)<0);P.length>0&&(u[f]=P),I.length>0&&(d[f]=I)}else u[f]=x}),this.syncDiff(s,{joins:u,leaves:d},r,i)}static syncDiff(t,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(u,d)=>{var f;const x=(f=t[u])!==null&&f!==void 0?f:[];if(t[u]=this.cloneDeep(d),x.length>0){const y=t[u].map(b=>b.presence_ref),A=x.filter(b=>y.indexOf(b.presence_ref)<0);t[u].unshift(...A)}r(u,x,d)}),this.map(o,(u,d)=>{let f=t[u];if(!f)return;const x=d.map(y=>y.presence_ref);f=f.filter(y=>x.indexOf(y.presence_ref)<0),t[u]=f,i(u,f,d),f.length===0&&delete t[u]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var c5;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(c5||(c5={}));var $d;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})($d||($d={}));var so;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(so||(so={}));class Fx{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Yr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new tg(this,ua.join,this.params,this.timeout),this.rejoinTimer=new XS(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Yr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Yr.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Yr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Yr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Yr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ua.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Gd(this),this.broadcastEndpointURL=ZS(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Yr.closed){const{config:{broadcast:s,presence:o,private:u}}=this.params,d=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(A=>A.filter))!==null&&i!==void 0?i:[],f=!!this.bindings[$d.PRESENCE]&&this.bindings[$d.PRESENCE].length>0,x={},y={broadcast:s,presence:Object.assign(Object.assign({},o),{enabled:f}),postgres_changes:d,private:u};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(A=>t==null?void 0:t(so.CHANNEL_ERROR,A)),this._onClose(()=>t==null?void 0:t(so.CLOSED)),this.updateJoinPayload(Object.assign({config:y},x)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:A})=>{var b;if(this.socket.setAuth(),A===void 0){t==null||t(so.SUBSCRIBED);return}else{const P=this.bindings.postgres_changes,I=(b=P==null?void 0:P.length)!==null&&b!==void 0?b:0,j=[];for(let C=0;C<I;C++){const _=P[C],{filter:{event:k,schema:R,table:M,filter:ne}}=_,U=A&&A[C];if(U&&U.event===k&&U.schema===R&&U.table===M&&U.filter===ne)j.push(Object.assign(Object.assign({},_),{id:U.id}));else{this.unsubscribe(),this.state=Yr.errored,t==null||t(so.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,t&&t(so.SUBSCRIBED);return}}).receive("error",A=>{this.state=Yr.errored,t==null||t(so.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(A).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(so.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Yr.joined&&t===$d.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){const{event:s,payload:o}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=f.body)===null||i===void 0?void 0:i.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,u,d;const f=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(u=(o=this.params)===null||o===void 0?void 0:o.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&s("ok"),f.receive("ok",()=>s("ok")),f.receive("error",()=>s("error")),f.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Yr.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ua.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new tg(this,ua.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Yr.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new tg(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>vj){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,s;const o=t.toLocaleLowerCase(),{close:u,error:d,leave:f,join:x}=ua;if(r&&[u,d,f,x].indexOf(o)>=0&&r!==this._joinRef())return;let A=this._onMessage(o,n,r);if(n&&!A)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(b=>{var P,I,j;return((P=b.filter)===null||P===void 0?void 0:P.event)==="*"||((j=(I=b.filter)===null||I===void 0?void 0:I.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===o}).map(b=>b.callback(A,r)):(s=this.bindings[o])===null||s===void 0||s.filter(b=>{var P,I,j,C,_,k;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in b){const R=b.id,M=(P=b.filter)===null||P===void 0?void 0:P.event;return R&&((I=n.ids)===null||I===void 0?void 0:I.includes(R))&&(M==="*"||(M==null?void 0:M.toLocaleLowerCase())===((j=n.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const R=(_=(C=b==null?void 0:b.filter)===null||C===void 0?void 0:C.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return R==="*"||R===((k=n==null?void 0:n.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===o}).map(b=>{if(typeof A=="object"&&"ids"in A){const P=A.data,{schema:I,table:j,commit_timestamp:C,type:_,errors:k}=P;A=Object.assign(Object.assign({},{schema:I,table:j,commit_timestamp:C,eventType:_,new:{},old:{},errors:k}),this._getPayloadRecords(P))}b.callback(A,r)})}_isClosed(){return this.state===Yr.closed}_isJoined(){return this.state===Yr.joined}_isJoining(){return this.state===Yr.joining}_isLeaving(){return this.state===Yr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Fx.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ua.close,{},t)}_onError(t){this._on(ua.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Yr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=o5(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=o5(t.columns,t.old_record)),n}}const u5=()=>{},Pf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},_j=[1e3,2e3,5e3,1e4],Tj=1e4,Ij=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class kj{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Vm,this.transport=null,this.heartbeatIntervalMs=Pf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=u5,this.ref=0,this.reconnectTimer=null,this.logger=u5,this.conn=null,this.sendBuffer=[],this.serializer=new wj,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...o)=>wl(async()=>{const{default:u}=await Promise.resolve().then(()=>Ku);return{default:u}},void 0).then(({default:u})=>u(...o)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...o)=>s(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${zm.websocket}`,this.httpEndpoint=ZS(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=pj.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:xj}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Wd.connecting:return sc.Connecting;case Wd.open:return sc.Open;case Wd.closing:return sc.Closing;default:return sc.Closed}}isConnected(){return this.connectionState()===sc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new Fx(`realtime:${t}`,n,this);return this.channels.push(s),s}}push(t){const{topic:n,event:r,payload:i,ref:s}=t,o=()=>{this.encode(t,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(yj,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Pf.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:o}=n,u=o?`(${o})`:"",d=s.status||"";this.log("receive",`${d} ${r} ${i} ${u}`.trim(),s),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(i,s,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ua.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([Ij],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:mj};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(ua.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new XS(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Pf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,s,o,u,d,f;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Vm,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:Pf.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:x=>_j[x-1]||Tj,this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(x,y)=>y(JSON.stringify(x)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Ux extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Xr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Lj extends Ux{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class qm extends Ux{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var Pj=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function u(x){try{f(r.next(x))}catch(y){o(y)}}function d(x){try{f(r.throw(x))}catch(y){o(y)}}function f(x){x.done?s(x.value):i(x.value).then(u,d)}f((r=r.apply(e,t||[])).next())})};const QS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>wl(async()=>{const{default:r}=await Promise.resolve().then(()=>Ku);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},jj=()=>Pj(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield wl(()=>Promise.resolve().then(()=>Ku),void 0)).Response:Response}),Wm=e=>{if(Array.isArray(e))return e.map(n=>Wm(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=Wm(r)}),t},Oj=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var kc=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function u(x){try{f(r.next(x))}catch(y){o(y)}}function d(x){try{f(r.throw(x))}catch(y){o(y)}}function f(x){x.done?s(x.value):i(x.value).then(u,d)}f((r=r.apply(e,t||[])).next())})};const ng=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Dj=(e,t,n)=>kc(void 0,void 0,void 0,function*(){const r=yield jj();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{const s=e.status||500,o=(i==null?void 0:i.statusCode)||s+"";t(new Lj(ng(i),s,o))}).catch(i=>{t(new qm(ng(i),i))}):t(new qm(ng(e),e))}),Rj=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?i:(Oj(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function Fh(e,t,n,r,i,s){return kc(this,void 0,void 0,function*(){return new Promise((o,u)=>{e(n,Rj(t,r,i,s)).then(d=>{if(!d.ok)throw d;return r!=null&&r.noResolveJson?d:d.json()}).then(d=>o(d)).catch(d=>Dj(d,u,r))})})}function $0(e,t,n,r){return kc(this,void 0,void 0,function*(){return Fh(e,"GET",t,n,r)})}function ka(e,t,n,r,i){return kc(this,void 0,void 0,function*(){return Fh(e,"POST",t,r,i,n)})}function Gm(e,t,n,r,i){return kc(this,void 0,void 0,function*(){return Fh(e,"PUT",t,r,i,n)})}function Mj(e,t,n,r){return kc(this,void 0,void 0,function*(){return Fh(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function JS(e,t,n,r,i){return kc(this,void 0,void 0,function*(){return Fh(e,"DELETE",t,r,i,n)})}var Vi=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function u(x){try{f(r.next(x))}catch(y){o(y)}}function d(x){try{f(r.throw(x))}catch(y){o(y)}}function f(x){x.done?s(x.value):i(x.value).then(u,d)}f((r=r.apply(e,t||[])).next())})};const Bj={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},d5={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Fj{constructor(t,n={},r,i){this.url=t,this.headers=n,this.bucketId=r,this.fetch=QS(i)}uploadOrUpdate(t,n,r,i){return Vi(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},d5),i);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const d=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),d&&s.append("metadata",this.encodeMetadata(d)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),d&&s.append("metadata",this.encodeMetadata(d))):(s=r,u["cache-control"]=`max-age=${o.cacheControl}`,u["content-type"]=o.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),i!=null&&i.headers&&(u=Object.assign(Object.assign({},u),i.headers));const f=this._removeEmptyFolders(n),x=this._getFinalPath(f),y=yield(t=="PUT"?Gm:ka)(this.fetch,`${this.url}/object/${x}`,s,Object.assign({headers:u},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:f,id:y.Id,fullPath:y.Key},error:null}}catch(s){if(Xr(s))return{data:null,error:s};throw s}})}upload(t,n,r){return Vi(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return Vi(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),o=this._getFinalPath(s),u=new URL(this.url+`/object/upload/sign/${o}`);u.searchParams.set("token",n);try{let d;const f=Object.assign({upsert:d5.upsert},i),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",f.cacheControl)):(d=r,x["cache-control"]=`max-age=${f.cacheControl}`,x["content-type"]=f.contentType);const y=yield Gm(this.fetch,u.toString(),d,{headers:x});return{data:{path:s,fullPath:y.Key},error:null}}catch(d){if(Xr(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,n){return Vi(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield ka(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),u=o.searchParams.get("token");if(!u)throw new Ux("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:u},error:null}}catch(r){if(Xr(r))return{data:null,error:r};throw r}})}update(t,n,r){return Vi(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Vi(this,void 0,void 0,function*(){try{return{data:yield ka(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Xr(i))return{data:null,error:i};throw i}})}copy(t,n,r){return Vi(this,void 0,void 0,function*(){try{return{data:{path:(yield ka(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Xr(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return Vi(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),s=yield ka(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(Xr(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return Vi(this,void 0,void 0,function*(){try{const i=yield ka(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(Xr(i))return{data:null,error:i};throw i}})}download(t,n){return Vi(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"";try{const u=this._getFinalPath(t);return{data:yield(yield $0(this.fetch,`${this.url}/${i}/${u}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(u){if(Xr(u))return{data:null,error:u};throw u}})}info(t){return Vi(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield $0(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Wm(r),error:null}}catch(r){if(Xr(r))return{data:null,error:r};throw r}})}exists(t){return Vi(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield Mj(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Xr(r)&&r instanceof qm){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const u=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});d!==""&&i.push(d);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${f}`)}}}remove(t){return Vi(this,void 0,void 0,function*(){try{return{data:yield JS(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(Xr(n))return{data:null,error:n};throw n}})}list(t,n,r){return Vi(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Bj),n),{prefix:t||""});return{data:yield ka(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Xr(i))return{data:null,error:i};throw i}})}listV2(t,n){return Vi(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield ka(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(Xr(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const Uj="2.11.0",Vj={"X-Client-Info":`storage-js/${Uj}`};var zc=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function u(x){try{f(r.next(x))}catch(y){o(y)}}function d(x){try{f(r.throw(x))}catch(y){o(y)}}function f(x){x.done?s(x.value):i(x.value).then(u,d)}f((r=r.apply(e,t||[])).next())})};class zj{constructor(t,n={},r,i){const s=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href,this.headers=Object.assign(Object.assign({},Vj),n),this.fetch=QS(r)}listBuckets(){return zc(this,void 0,void 0,function*(){try{return{data:yield $0(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Xr(t))return{data:null,error:t};throw t}})}getBucket(t){return zc(this,void 0,void 0,function*(){try{return{data:yield $0(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(Xr(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return zc(this,void 0,void 0,function*(){try{return{data:yield ka(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Xr(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return zc(this,void 0,void 0,function*(){try{return{data:yield Gm(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Xr(r))return{data:null,error:r};throw r}})}emptyBucket(t){return zc(this,void 0,void 0,function*(){try{return{data:yield ka(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Xr(n))return{data:null,error:n};throw n}})}deleteBucket(t){return zc(this,void 0,void 0,function*(){try{return{data:yield JS(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(Xr(n))return{data:null,error:n};throw n}})}}class Hj extends zj{constructor(t,n={},r,i){super(t,n,r,i)}from(t){return new Fj(this.url,this.headers,t,this.fetch)}}const qj="2.55.0";let kd="";typeof Deno<"u"?kd="deno":typeof document<"u"?kd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?kd="react-native":kd="node";const Wj={"X-Client-Info":`supabase-js-${kd}/${qj}`},Gj={headers:Wj},$j={schema:"public"},Yj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Xj={};var Kj=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function u(x){try{f(r.next(x))}catch(y){o(y)}}function d(x){try{f(r.throw(x))}catch(y){o(y)}}function f(x){x.done?s(x.value):i(x.value).then(u,d)}f((r=r.apply(e,t||[])).next())})};const Zj=e=>{let t;return e?t=e:typeof fetch>"u"?t=BS:t=fetch,(...n)=>t(...n)},Qj=()=>typeof Headers>"u"?FS:Headers,Jj=(e,t,n)=>{const r=Zj(n),i=Qj();return(s,o)=>Kj(void 0,void 0,void 0,function*(){var u;const d=(u=yield t())!==null&&u!==void 0?u:e;let f=new i(o==null?void 0:o.headers);return f.has("apikey")||f.set("apikey",e),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),r(s,Object.assign(Object.assign({},o),{headers:f}))})};var eO=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function u(x){try{f(r.next(x))}catch(y){o(y)}}function d(x){try{f(r.throw(x))}catch(y){o(y)}}function f(x){x.done?s(x.value):i(x.value).then(u,d)}f((r=r.apply(e,t||[])).next())})};function tO(e){return e.endsWith("/")?e:e+"/"}function nO(e,t){var n,r;const{db:i,auth:s,realtime:o,global:u}=e,{db:d,auth:f,realtime:x,global:y}=t,A={db:Object.assign(Object.assign({},d),i),auth:Object.assign(Object.assign({},f),s),realtime:Object.assign(Object.assign({},x),o),storage:{},global:Object.assign(Object.assign(Object.assign({},y),u),{headers:Object.assign(Object.assign({},(n=y==null?void 0:y.headers)!==null&&n!==void 0?n:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>eO(this,void 0,void 0,function*(){return""})};return e.accessToken?A.accessToken=e.accessToken:delete A.accessToken,A}const e6="2.71.1",Zc=30*1e3,$m=3,rg=$m*Zc,rO="http://localhost:9999",iO="supabase.auth.token",sO={"X-Client-Info":`gotrue-js/${e6}`},Ym="X-Supabase-Api-Version",t6={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},aO=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,oO=10*60*1e3;class Vx extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Qt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class lO extends Vx{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function cO(e){return Qt(e)&&e.name==="AuthApiError"}class n6 extends Vx{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Il extends Vx{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class $o extends Il{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function uO(e){return Qt(e)&&e.name==="AuthSessionMissingError"}class jf extends Il{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Of extends Il{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Df extends Il{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function dO(e){return Qt(e)&&e.name==="AuthImplicitGrantRedirectError"}class h5 extends Il{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Xm extends Il{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function ig(e){return Qt(e)&&e.name==="AuthRetryableFetchError"}class f5 extends Il{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Km extends Il{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Y0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),p5=` 	
\r=`.split(""),hO=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<p5.length;t+=1)e[p5[t].charCodeAt(0)]=-2;for(let t=0;t<Y0.length;t+=1)e[Y0[t].charCodeAt(0)]=t;return e})();function g5(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Y0[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Y0[r]),t.queuedBits-=6}}function r6(e,t,n){const r=hO[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function m5(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{gO(o,r,n)};for(let o=0;o<e.length;o+=1)r6(e.charCodeAt(o),i,s);return t.join("")}function fO(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function pO(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}fO(r,t)}}function gO(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function mO(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)r6(e.charCodeAt(i),n,r);return new Uint8Array(t)}function xO(e){const t=[];return pO(e,n=>t.push(n)),new Uint8Array(t)}function yO(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>g5(i,n,r)),g5(null,n,r),t.join("")}function vO(e){return Math.round(Date.now()/1e3)+e}function wO(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const aa=()=>typeof window<"u"&&typeof document<"u",Kl={tested:!1,writable:!1},i6=()=>{if(!aa())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Kl.tested)return Kl.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Kl.tested=!0,Kl.writable=!0}catch{Kl.tested=!0,Kl.writable=!1}return Kl.writable};function bO(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const s6=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>wl(async()=>{const{default:r}=await Promise.resolve().then(()=>Ku);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},AO=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Qc=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Zl=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},zo=async(e,t)=>{await e.removeItem(t)};class V1{constructor(){this.promise=new V1.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}V1.promiseConstructor=Promise;function sg(e){const t=e.split(".");if(t.length!==3)throw new Km("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!aO.test(t[r]))throw new Km("JWT not in base64url format");return{header:JSON.parse(m5(t[0])),payload:JSON.parse(m5(t[1])),signature:mO(t[2]),raw:{header:t[0],payload:t[1]}}}async function SO(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function NO(e,t){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await e(s);if(!t(s,null,o)){r(o);return}}catch(o){if(!t(s,o)){i(o);return}}})()})}function CO(e){return("0"+e.toString(16)).substr(-2)}function EO(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,CO).join("")}async function _O(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function TO(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await _O(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Hc(e,t,n=!1){const r=EO();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Qc(e,`${t}-code-verifier`,i);const s=await TO(r);return[s,r===s?"plain":"s256"]}const IO=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function kO(e){const t=e.headers.get(Ym);if(!t||!t.match(IO))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function LO(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function PO(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const jO=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function qc(e){if(!jO.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ag(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function x5(e){return JSON.parse(JSON.stringify(e))}var OO=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const rc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),DO=[502,503,504];async function y5(e){var t;if(!AO(e))throw new Xm(rc(e),0);if(DO.includes(e.status))throw new Xm(rc(e),e.status);let n;try{n=await e.json()}catch(s){throw new n6(rc(s),s)}let r;const i=kO(e);if(i&&i.getTime()>=t6["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new f5(rc(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new $o}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new f5(rc(n),e.status,n.weak_password.reasons);throw new lO(rc(n),e.status||500,r)}const RO=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function on(e,t,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[Ym]||(s[Ym]=t6["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const u=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",d=await MO(e,t,n+u,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(d):{data:Object.assign({},d),error:null}}async function MO(e,t,n,r,i,s){const o=RO(t,r,i,s);let u;try{u=await e(n,Object.assign({},o))}catch(d){throw console.error(d),new Xm(rc(d),0)}if(u.ok||await y5(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(d){await y5(d)}}function ro(e){var t;let n=null;VO(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=vO(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function v5(e){const t=ro(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function el(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function BO(e){return{data:e,error:null}}function FO(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=e,o=OO(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},d=Object.assign({},o);return{data:{properties:u,user:d},error:null}}function UO(e){return e}function VO(e){return e.access_token&&e.refresh_token&&e.expires_in}const og=["global","local","others"];var zO=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class HO{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=s6(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=og[0]){if(og.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${og.join(", ")}`);try{return await on(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Qt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await on(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:el})}catch(r){if(Qt(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=zO(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await on(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:FO,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Qt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await on(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:el})}catch(n){if(Qt(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,s,o,u,d;try{const f={nextPage:null,lastPage:0,total:0},x=await on(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:UO});if(x.error)throw x.error;const y=await x.json(),A=(o=x.headers.get("x-total-count"))!==null&&o!==void 0?o:0,b=(d=(u=x.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return b.length>0&&(b.forEach(P=>{const I=parseInt(P.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(P.split(";")[1].split("=")[1]);f[`${j}Page`]=I}),f.total=parseInt(A)),{data:Object.assign(Object.assign({},y),f),error:null}}catch(f){if(Qt(f))return{data:{users:[]},error:f};throw f}}async getUserById(t){qc(t);try{return await on(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:el})}catch(n){if(Qt(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){qc(t);try{return await on(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:el})}catch(r){if(Qt(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){qc(t);try{return await on(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:el})}catch(r){if(Qt(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){qc(t.userId);try{const{data:n,error:r}=await on(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Qt(n))return{data:null,error:n};throw n}}async _deleteFactor(t){qc(t.userId),qc(t.id);try{return{data:await on(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Qt(n))return{data:null,error:n};throw n}}}function w5(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function qO(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Wc={debug:!!(globalThis&&i6()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class a6 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class WO extends a6{}async function GO(e,t,n){Wc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Wc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Wc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{Wc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Wc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new WO(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Wc.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}qO();const $O={url:rO,storageKey:iO,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:sO,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function b5(e,t,n){return await n()}const Gc={};class bh{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=bh.nextInstanceID,bh.nextInstanceID+=1,this.instanceID>0&&aa()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},$O),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new HO({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=s6(i.fetch),this.lock=i.lock||b5,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:aa()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=GO:this.lock=b5,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:i6()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=w5(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=w5(this.memoryStorage)),aa()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=Gc[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Gc[this.storageKey]=Object.assign(Object.assign({},Gc[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Gc[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Gc[this.storageKey]=Object.assign(Object.assign({},Gc[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${e6}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=bO(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),aa()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),dO(s)){const d=(t=s.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:u}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",u),await this._saveSession(o),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Qt(n)?{error:n}:{error:new n6("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const s=await on(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:ro}),{data:o,error:u}=s;if(u||!o)return{data:{user:null,session:null},error:u};const d=o.session,f=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(s){if(Qt(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(t){var n,r,i;try{let s;if("email"in t){const{email:x,password:y,options:A}=t;let b=null,P=null;this.flowType==="pkce"&&([b,P]=await Hc(this.storage,this.storageKey)),s=await on(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:A==null?void 0:A.emailRedirectTo,body:{email:x,password:y,data:(n=A==null?void 0:A.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},code_challenge:b,code_challenge_method:P},xform:ro})}else if("phone"in t){const{phone:x,password:y,options:A}=t;s=await on(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:y,data:(r=A==null?void 0:A.data)!==null&&r!==void 0?r:{},channel:(i=A==null?void 0:A.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken}},xform:ro})}else throw new Of("You must provide either an email or phone number and a password");const{data:o,error:u}=s;if(u||!o)return{data:{user:null,session:null},error:u};const d=o.session,f=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(s){if(Qt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:o,options:u}=t;n=await on(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:v5})}else if("phone"in t){const{phone:s,password:o,options:u}=t;n=await on(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:v5})}else throw new Of("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new jf}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Qt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,i,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,i,s,o,u,d,f,x,y,A,b;let P,I;if("message"in t)P=t.message,I=t.signature;else{const{chain:j,wallet:C,statement:_,options:k}=t;let R;if(aa())if(typeof C=="object")R=C;else{const ne=window;if("solana"in ne&&typeof ne.solana=="object"&&("signIn"in ne.solana&&typeof ne.solana.signIn=="function"||"signMessage"in ne.solana&&typeof ne.solana.signMessage=="function"))R=ne.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=C}const M=new URL((n=k==null?void 0:k.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in R&&R.signIn){const ne=await R.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k==null?void 0:k.signInWithSolana),{version:"1",domain:M.host,uri:M.href}),_?{statement:_}:null));let U;if(Array.isArray(ne)&&ne[0]&&typeof ne[0]=="object")U=ne[0];else if(ne&&typeof ne=="object"&&"signedMessage"in ne&&"signature"in ne)U=ne;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)P=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),I=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in R)||typeof R.signMessage!="function"||!("publicKey"in R)||typeof R!="object"||!R.publicKey||!("toBase58"in R.publicKey)||typeof R.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");P=[`${M.host} wants you to sign in with your Solana account:`,R.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${M.href}`,`Issued At: ${(i=(r=k==null?void 0:k.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=k==null?void 0:k.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((o=k==null?void 0:k.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((u=k==null?void 0:k.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((d=k==null?void 0:k.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((f=k==null?void 0:k.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((y=(x=k==null?void 0:k.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||y===void 0)&&y.length?["Resources",...k.signInWithSolana.resources.map(U=>`- ${U}`)]:[]].join(`
`);const ne=await R.signMessage(new TextEncoder().encode(P),"utf8");if(!ne||!(ne instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");I=ne}}try{const{data:j,error:C}=await on(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:P,signature:yO(I)},!((A=t.options)===null||A===void 0)&&A.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:ro});if(C)throw C;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new jf}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:C})}catch(j){if(Qt(j))return{data:{user:null,session:null},error:j};throw j}}async _exchangeCodeForSession(t){const n=await Zl(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:o}=await on(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:ro});if(await zo(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new jf}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(Qt(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=t,u=await on(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ro}),{data:d,error:f}=u;return f?{data:{user:null,session:null},error:f}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new jf}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:f})}catch(n){if(Qt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,i,s,o;try{if("email"in t){const{email:u,options:d}=t;let f=null,x=null;this.flowType==="pkce"&&([f,x]=await Hc(this.storage,this.storageKey));const{error:y}=await on(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(r=d==null?void 0:d.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:x},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in t){const{phone:u,options:d}=t,{data:f,error:x}=await on(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=d==null?void 0:d.data)!==null&&i!==void 0?i:{},create_user:(s=d==null?void 0:d.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(o=d==null?void 0:d.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:x}}throw new Of("You must provide either an email or phone number.")}catch(u){if(Qt(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var n,r;try{let i,s;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:u}=await on(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:ro});if(u)throw u;if(!o)throw new Error("An error occurred on token verification.");const d=o.session,f=o.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(i){if(Qt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var n,r,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await Hc(this.storage,this.storageKey)),await on(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:BO})}catch(s){if(Qt(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new $o;const{error:i}=await on(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(Qt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:s}=t,{error:o}=await on(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:i,options:s}=t,{data:o,error:u}=await on(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:u}}throw new Of("You must provide either an email or phone number and a type")}catch(n){if(Qt(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Zl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<rg:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await Zl(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=ag()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(d,f,x)=>(!o&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,f,x))})}return{data:{session:t},error:null}}const{session:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await on(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:el}):await this._useSession(async n=>{var r,i,s;const{data:o,error:u}=n;if(u)throw u;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new $o}:await on(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:el})})}catch(n){if(Qt(n))return uO(n)&&(await this._removeSession(),await zo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new $o;const o=i.session;let u=null,d=null;this.flowType==="pkce"&&t.email!=null&&([u,d]=await Hc(this.storage,this.storageKey));const{data:f,error:x}=await on(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:d}),jwt:o.access_token,xform:el});if(x)throw x;return o.user=f.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Qt(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new $o;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:o}=sg(t.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{session:u,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!u)return{data:{user:null,session:null},error:null};s=u}else{const{data:u,error:d}=await this._getUser(t.access_token);if(d)throw d;s={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(Qt(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:u}=n;if(u)throw u;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new $o;const{session:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Qt(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!aa())throw new Df("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Df(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new h5("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Df("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new h5("No code detected.");const{data:_,error:k}=await this._exchangeCodeForSession(t.code);if(k)throw k;const R=new URL(window.location.href);return R.searchParams.delete("code"),window.history.replaceState(window.history.state,"",R.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:u,expires_at:d,token_type:f}=t;if(!s||!u||!o||!f)throw new Df("No session defined in URL");const x=Math.round(Date.now()/1e3),y=parseInt(u);let A=x+y;d&&(A=parseInt(d));const b=A-x;b*1e3<=Zc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${y}s`);const P=A-y;x-P>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",P,A,x):x-P<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",P,A,x);const{data:I,error:j}=await this._getUser(s);if(j)throw j;const C={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:y,expires_at:A,refresh_token:o,token_type:f,user:I.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:C,redirectType:t.type},error:null}}catch(r){if(Qt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Zl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:u}=await this.admin.signOut(o,t);if(u&&!(cO(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await zo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=wO(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Hc(this.storage,this.storageKey,!0));try{return await on(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(Qt(s))return{data:null,error:s};throw s}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Qt(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,u,d,f,x;const{data:y,error:A}=s;if(A)throw A;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await on(this.fetch,"GET",b,{headers:this.headers,jwt:(x=(f=y.session)===null||f===void 0?void 0:f.access_token)!==null&&x!==void 0?x:void 0})});if(i)throw i;return aa()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Qt(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await on(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Qt(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await NO(async i=>(i>0&&await SO(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await on(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ro})),(i,s)=>{const o=200*Math.pow(2,i);return s&&ig(s)&&Date.now()+o-r<Zc})}catch(r){if(this._debug(n,"error",r),Qt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),aa()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Zl(this.storage,this.storageKey);if(i&&this.userStorage){let o=await Zl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Qc(this.userStorage,this.storageKey+"-user",o)),i.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:ag()}else if(i&&!i.user&&!i.user){const o=await Zl(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await zo(this.storage,this.storageKey+"-user"),await Qc(this.storage,this.storageKey,i)):i.user=ag()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<rg;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${rg}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),ig(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:u}=await this._getUser(i.access_token);!u&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new $o;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new V1;const{data:s,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!s.session)throw new $o;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const u={session:s.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(s){if(this._debug(i,"error",s),Qt(s)){const o={session:null,error:s};return ig(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,n)}catch(d){s.push(d)}});if(await Promise.all(o),s.length>0){for(let u=0;u<s.length;u+=1)console.error(s[u]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Qc(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=x5(i);await Qc(this.storage,this.storageKey,s)}else{const i=x5(n);await Qc(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await zo(this.storage,this.storageKey),await zo(this.storage,this.storageKey+"-code-verifier"),await zo(this.storage,this.storageKey+"-user"),this.userStorage&&await zo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&aa()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Zc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/Zc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Zc}ms, refresh threshold is ${$m} ticks`),i<=$m&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof a6)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!aa()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await Hc(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(u.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await on(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Qt(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return{data:null,error:o};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:d,error:f}=await on(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(t.factorType==="totp"&&(!((i=d==null?void 0:d.totp)===null||i===void 0)&&i.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(n){if(Qt(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const{data:o,error:u}=await on(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:u})})}catch(n){if(Qt(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await on(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Qt(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],i=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:i},error:s}=t;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=sg(i.access_token);let u=null;o.aal&&(u=o.aal);let d=u;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(y=>y.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const x=o.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:x},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(u=>u.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(u=>u.kid===t),r&&this.jwks_cached_at+oO>i)return r;const{data:s,error:o}=await on(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(u=>u.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:b,error:P}=await this.getSession();if(P||!b.session)return{data:null,error:P};r=b.session.access_token}const{header:i,payload:s,signature:o,raw:{header:u,payload:d}}=sg(r);n!=null&&n.allowExpired||LO(s.exp);const f=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!f){const{error:b}=await this.getUser(r);if(b)throw b;return{data:{claims:s,header:i,signature:o},error:null}}const x=PO(i.alg),y=await crypto.subtle.importKey("jwk",f,x,!0,["verify"]);if(!await crypto.subtle.verify(x,y,o,xO(`${u}.${d}`)))throw new Km("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(Qt(r))return{data:null,error:r};throw r}}}bh.nextInstanceID=0;const YO=bh;class XO extends YO{constructor(t){super(t)}}var KO=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function u(x){try{f(r.next(x))}catch(y){o(y)}}function d(x){try{f(r.throw(x))}catch(y){o(y)}}function f(x){x.done?s(x.value):i(x.value).then(u,d)}f((r=r.apply(e,t||[])).next())})};class ZO{constructor(t,n,r){var i,s,o;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const u=tO(t),d=new URL(u);this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const f=`sb-${d.hostname.split(".")[0]}-auth-token`,x={db:$j,realtime:Xj,auth:Object.assign(Object.assign({},Yj),{storageKey:f}),global:Gj},y=nO(r??{},x);this.storageKey=(i=y.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=y.global.headers)!==null&&s!==void 0?s:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(A,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=y.auth)!==null&&o!==void 0?o:{},this.headers,y.global.fetch),this.fetch=Jj(n,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.rest=new fj(new URL("rest/v1",d).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),this.storage=new Hj(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new HP(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return KO(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o,lock:u,debug:d},f,x){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new XO({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),f),storageKey:s,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,flowType:o,lock:u,debug:d,fetch:x,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new kj(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const QO=(e,t,n)=>new ZO(e,t,n);function JO(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}JO()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const eD="https://smbmvdzheqkblixjfdpn.supabase.co",tD="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNtYm12ZHpoZXFrYmxpeGpmZHBuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyNzgyODAsImV4cCI6MjA3MDg1NDI4MH0.twkaCp07rbguIiLnT8fsWDwmA8eACF1BMvcv6Wo0_DQ",en=QO(eD,tD),A5={email:"admin@carnival.com",password:"admin123"},So=LP()(MP((e,t)=>({user:null,isAuthenticated:!1,isLoading:!1,events:[],orders:[],login:async(n,r)=>{e({isLoading:!0});try{return n===A5.email&&r===A5.password?(e({user:{id:"1",email:n,name:"Admin User",role:"admin",createdAt:new Date},isAuthenticated:!0,isLoading:!1}),!0):(e({isLoading:!1}),!1)}catch(i){return console.error("Login error:",i),e({isLoading:!1}),!1}},logout:()=>{e({user:null,isAuthenticated:!1})},getEvents:async()=>{e({isLoading:!0});try{const{data:n,error:r}=await en.from("events").select("*").order("created_at",{ascending:!1});if(r)throw r;const{data:i,error:s}=await en.from("ticket_tiers").select("*");s&&console.error("Error fetching ticket tiers:",s);const o=(n||[]).map(u=>{const d=(i||[]).filter(f=>f.event_id===u.id);return{...u,isArchived:u.is_archived??!1,ticketTiers:d.map(f=>({id:f.id,eventId:f.event_id,name:f.name,price:f.price,originalPrice:f.original_price,capacity:f.capacity,soldCount:f.sold_count,availableFrom:f.available_from,availableUntil:f.available_until,description:f.description,benefits:f.benefits,isActive:f.is_active})).sort((f,x)=>f.price-x.price)}});console.log("Events with tiers:",o),e({events:o,isLoading:!1})}catch(n){console.error("Error fetching events:",n),bs.error("Failed to load events"),e({isLoading:!1})}},addEvent:async n=>{try{const r={title:n.title,date:n.date,time:n.time,venue:n.venue,price:n.price,description:n.description,capacity:n.capacity,image:n.image,tags:n.tags.split(",").map(o=>o.trim()).filter(o=>o),gradient:n.gradient,is_archived:!1};console.log("Adding new event:",r);const{data:i,error:s}=await en.from("events").insert([r]).select().single();if(s)throw console.error("Supabase insert error:",s),s;if(console.log("Event added successfully, now adding ticket tiers"),n.ticketTiers&&n.ticketTiers.length>0){const o=n.ticketTiers.map(f=>({id:f.id,event_id:i.id,name:f.name,price:f.price,original_price:f.originalPrice||null,capacity:f.capacity,sold_count:f.soldCount||0,available_from:f.availableFrom?new Date(f.availableFrom).toISOString():null,available_until:f.availableUntil?new Date(f.availableUntil).toISOString():null,description:f.description||null,benefits:f.benefits||[],is_active:f.isActive!==!1}));console.log("Inserting ticket tiers:",o),console.log("About to insert ticket tiers into database:",o);const{data:u,error:d}=await en.from("ticket_tiers").insert(o).select();d?(console.error("Error inserting ticket tiers:",d),console.error("Error details:",d.details,d.hint,d.message)):console.log("Ticket tiers added successfully:",u)}await t().getEvents()}catch(r){console.error("Error adding event:",r),bs.error("Failed to add event")}},updateEvent:async(n,r)=>{try{const i={title:r.title,date:r.date,time:r.time,venue:r.venue,price:r.price,description:r.description,capacity:r.capacity,image:r.image,tags:r.tags.split(",").map(o=>o.trim()).filter(o=>o),gradient:r.gradient};console.log("Updating event with data:",i);const{error:s}=await en.from("events").update(i).eq("id",n);if(s)throw console.error("Supabase update error:",s),s;if(r.ticketTiers){const{error:o}=await en.from("ticket_tiers").delete().eq("event_id",n);if(o&&console.error("Error deleting existing ticket tiers:",o),r.ticketTiers.length>0){const u=r.ticketTiers.map(f=>({id:f.id,event_id:n,name:f.name,price:f.price,original_price:f.originalPrice,capacity:f.capacity,sold_count:f.soldCount,available_from:f.availableFrom,available_until:f.availableUntil,description:f.description,benefits:f.benefits,is_active:f.isActive}));console.log("Updating ticket tiers:",u);const{error:d}=await en.from("ticket_tiers").insert(u);d?console.error("Error updating ticket tiers:",d):console.log("Ticket tiers updated successfully")}}console.log("Event updated successfully"),await t().getEvents()}catch(i){console.error("Error updating event:",i),bs.error("Failed to update event")}},deleteEvent:async n=>{try{const{data:r,error:i}=await en.from("events").select("is_archived").eq("id",n).single();i&&console.error("Error fetching event before delete:",i);const s=(r==null?void 0:r.is_archived)===!0;if(!s){const{data:d,error:f}=await en.from("orders").select("id").eq("event_id",n);if(f&&console.error("Error checking event orders before delete:",f),(d||[]).length>0){const x=new Error("Event has associated orders and cannot be deleted without handling dependencies");throw x.code="EVENT_HAS_ORDERS",x}}if(s){const{data:d,error:f}=await en.from("orders").select("id").eq("event_id",n);f&&console.error("Error fetching orders to delete:",f);const x=(d||[]).map(y=>y.id);if(x.length>0){const{error:y}=await en.from("order_tickets").delete().in("order_id",x);y&&console.error("Error deleting order_tickets for event:",y);const{error:A}=await en.from("orders").delete().eq("event_id",n);A&&console.error("Error deleting orders for event:",A)}}const{error:o}=await en.from("ticket_tiers").delete().eq("event_id",n);o&&console.error("Error deleting ticket tiers:",o);const{error:u}=await en.from("events").delete().eq("id",n);if(u)throw u;await t().getEvents()}catch(r){console.error("Error deleting event:",r),(r==null?void 0:r.code)==="EVENT_HAS_ORDERS"?bs.error("Cannot delete: this event has existing orders. Consider archiving it or enabling cascade deletes in Supabase."):bs.error("Failed to delete event")}},archiveEvent:async(n,r)=>{try{const{error:i}=await en.from("events").update({is_archived:r}).eq("id",n);if(i)throw i;await t().getEvents()}catch(i){console.error("Error archiving event:",i),bs.error("Failed to update archive status. Ensure `is_archived boolean default false` exists on events table.")}},subscribeToEvents:()=>en.channel("events").on("postgres_changes",{event:"*",schema:"public",table:"events"},r=>{console.log("Database change detected:",r),t().getEvents()}).subscribe(r=>{console.log("Subscription status:",r)}),getOrders:async()=>{try{console.log(" Fetching orders with tickets and scans...");const{data:n,error:r}=await en.from("orders").select("*").order("created_at",{ascending:!1});if(r)throw r;const i=await Promise.all((n||[]).map(async s=>{const{data:o,error:u}=await en.from("order_tickets").select("*").eq("order_id",s.id);u&&console.error("Error fetching tickets for order:",s.id,u);const d=(o||[]).map(b=>({id:b.id,orderId:b.order_id,ticketTierId:b.ticket_tier_id,quantity:b.quantity,unitPrice:b.unit_price,totalPrice:b.total_price})),{data:f,error:x}=await en.from("ticket_scans").select("*").eq("order_id",s.id).order("scanned_at",{ascending:!1});x&&console.error("Error fetching scans for order:",s.id,x);const y=(f||[]).map(b=>({id:b.id,orderId:b.order_id,ticketTierId:b.ticket_tier_id,customerEmail:b.customer_email,eventId:b.event_id,scanType:b.scan_type,scannedAt:b.scanned_at,scannedBy:b.scanned_by,location:b.location,notes:b.notes}));return{id:s.id,eventId:s.event_id,userId:s.user_id,stripePaymentIntentId:s.stripe_payment_intent_id,status:s.status,totalAmount:s.total_amount,currency:s.currency,tickets:d,customerEmail:s.customer_email,customerName:s.customer_name,createdAt:s.created_at,updatedAt:s.updated_at,scans:y}}));console.log(" Orders with tickets and scans (mapped):",i),e({orders:i})}catch(n){console.error("Error fetching orders:",n),e({orders:[]})}},validateTicket:async(n,r,i,s="entry")=>{try{if(console.log(" Validating ticket:",{orderId:n,ticketTierId:r,customerEmail:i}),s==="entry"){const{data:b,error:P}=await en.from("ticket_scans").select("*").eq("order_id",n).eq("ticket_tier_id",r).eq("scan_type","entry");if(P&&console.error("Error checking existing entry scans:",P),b&&b.length>0)return console.log(" Ticket already scanned for entry"),{isValid:!1,message:"Ticket already scanned for entry",orderStatus:"completed",eventDate:"unknown",customerName:"unknown",customerEmail:i,eventId:b[0].event_id}}else if(s==="exit"){const{data:b,error:P}=await en.from("ticket_scans").select("*").eq("order_id",n).eq("ticket_tier_id",r).eq("scan_type","entry");if(P&&console.error("Error checking existing entry scans for exit:",P),!b||b.length===0)return console.log(" Cannot exit without entry scan"),{isValid:!1,message:"Cannot exit without entry scan",orderStatus:"completed",eventDate:"unknown",customerName:"unknown",customerEmail:i};const{data:I,error:j}=await en.from("ticket_scans").select("*").eq("order_id",n).eq("ticket_tier_id",r).eq("scan_type","exit");if(j&&console.error("Error checking existing exit scans:",j),I&&I.length>0)return console.log(" Ticket already scanned for exit"),{isValid:!1,message:"Ticket already scanned for exit",orderStatus:"completed",eventDate:"unknown",customerName:"unknown",customerEmail:i,eventId:b[0].event_id}}const{data:o,error:u}=await en.from("orders").select("*").eq("id",n).eq("customer_email",i).single();if(u||!o){console.log(" Order not found:",{orderError:u,orderId:n,customerEmail:i});const{data:b}=await en.from("orders").select("*").eq("id",n).single();return b?(console.log(" Order found but email mismatch:",{orderEmail:b.customer_email,scannedEmail:i}),{isValid:!1,message:"Customer email does not match order",orderStatus:b.status||"unknown",eventDate:"unknown",customerName:b.customer_name||"unknown",customerEmail:i}):{isValid:!1,message:"Order not found",orderStatus:"unknown",eventDate:"unknown",customerName:"unknown",customerEmail:i}}if(console.log(" Order found:",o),o.status!=="completed")return console.log(" Payment not completed:",o.status),{isValid:!1,message:"Payment not completed",orderStatus:o.status,eventDate:"unknown",customerName:o.customer_name||"unknown",customerEmail:i};const{data:d,error:f}=await en.from("events").select("*").eq("id",o.event_id).single();if(f||!d)return console.log(" Event not found:",f),{isValid:!1,message:"Event not found",orderStatus:o.status,eventDate:"unknown",customerName:o.customer_name||"unknown",customerEmail:i};console.log(" Event found:",d);const x=d.date;if(x&&new Date(x)<new Date)return console.log(" Event has passed:",x),{isValid:!1,message:"Event has passed",orderStatus:o.status,eventDate:x,customerName:o.customer_name||"unknown",customerEmail:i};console.log(" Looking for ticket tier:",{ticketTierId:r,orderEventId:o.event_id});const{data:y,error:A}=await en.from("ticket_tiers").select("*").eq("id",r).single();if(A||!y){console.log(" Ticket tier not found:",{ticketTierId:r,error:A});const{data:b,error:P}=await en.from("ticket_tiers").select("*").eq("event_id",o.event_id);return console.log(" All ticket tiers for this event:",{eventId:o.event_id,tiers:b,error:P}),{isValid:!1,message:"Ticket tier not found",orderStatus:o.status,eventDate:x||"unknown",customerName:o.customer_name||"unknown",customerEmail:i}}return y.event_id!==o.event_id?(console.log(" Ticket tier does not belong to this event:",{tierEventId:y.event_id,orderEventId:o.event_id}),{isValid:!1,message:"Ticket tier does not belong to this event",orderStatus:o.status,eventDate:x||"unknown",customerName:o.customer_name||"unknown",customerEmail:i}):(console.log(" Ticket tier found:",y),y.is_active?(console.log(" Ticket validation successful"),{isValid:!0,message:`Ticket is valid for ${s}`,orderStatus:o.status,eventDate:x||"unknown",customerName:o.customer_name||"unknown",customerEmail:i,eventId:o.event_id,eventTitle:d.title,ticketTierName:y.name}):(console.log(" Ticket tier is inactive"),{isValid:!1,message:"Ticket tier is inactive",orderStatus:o.status,eventDate:x||"unknown",customerName:o.customer_name||"unknown",customerEmail:i}))}catch(o){return console.error(" Error validating ticket:",o),{isValid:!1,message:"Failed to validate ticket",orderStatus:"unknown",eventDate:"unknown",customerName:"unknown",customerEmail:i}}},recordTicketScan:async n=>{try{const{error:r}=await en.from("ticket_scans").insert({order_id:n.orderId,ticket_tier_id:n.ticketTierId,customer_email:n.customerEmail,event_id:n.eventId,scan_type:n.scanType,scanned_by:n.scannedBy,location:n.location,notes:n.notes,scanned_at:new Date().toISOString()});if(r)throw console.error("Error recording ticket scan:",r),r}catch(r){throw console.error("Error recording ticket scan:",r),r}},searchTickets:async n=>{try{console.log(" Searching for tickets with term:",n);const{data:r,error:i}=await en.from("orders").select(`
              *,
              events!inner(title, date, venue),
              ticket_tiers!inner(name)
            `).or(`customer_name.ilike.%${n}%,customer_email.ilike.%${n}%,id.ilike.%${n}%`).order("created_at",{ascending:!1});if(i)throw i;const o=(await Promise.all((r||[]).map(async u=>{const{data:d,error:f}=await en.from("order_tickets").select("*").eq("order_id",u.id);f&&console.error("Error fetching tickets for order:",u.id,f);const{data:x,error:y}=await en.from("ticket_scans").select("*").eq("order_id",u.id).order("scanned_at",{ascending:!1});y&&console.error("Error fetching scans for order:",u.id,y);const A=(x||[]).map(_=>({id:_.id,orderId:_.order_id,ticketTierId:_.ticket_tier_id,customerEmail:_.customer_email,eventId:_.event_id,scanType:_.scan_type,scannedAt:_.scanned_at,scannedBy:_.scanned_by,location:_.location,notes:_.notes})),b=A.filter(_=>_.scanType==="entry"),P=A.filter(_=>_.scanType==="exit");let I="not_scanned";b.length>0&&P.length>0?I="scanned_both":b.length>0?I="scanned_in":P.length>0&&(I="scanned_out");const j=A.length>0?new Date(A[0].scannedAt):void 0;return(d||[]).map(_=>{var k,R,M;return{orderId:u.id,customerName:u.customer_name||"N/A",customerEmail:u.customer_email||"N/A",eventTitle:((k=u.events)==null?void 0:k.title)||"N/A",eventDate:((R=u.events)==null?void 0:R.date)||"N/A",eventVenue:((M=u.events)==null?void 0:M.venue)||"N/A",ticketTierName:_.ticket_tier_id||"N/A",quantity:_.quantity||0,totalPrice:_.total_price||0,orderStatus:u.status||"N/A",orderDate:new Date(u.created_at),scans:A,lastScanTime:j,scanStatus:I}})}))).flat();return console.log(" Search results:",o),o}catch(r){return console.error("Error searching tickets:",r),[]}},debugTicketData:async(n,r)=>{try{let i=` Debug: Checking database for:
Order ID: ${n}
Ticket Tier ID: ${r}

`;const{data:s,error:o}=await en.from("orders").select("*").eq("id",n).single();o?i+=` Order Error: ${o.message}
`:s?i+=` Order Found:
- Status: ${s.status}
- Customer: ${s.customer_name}
- Email: ${s.customer_email}
- Event ID: ${s.event_id}

`:i+=` Order Not Found

`;const{data:u,error:d}=await en.from("ticket_tiers").select("*").eq("id",r).single();if(d?i+=` Ticket Tier Error: ${d.message}
`:u?i+=` Ticket Tier Found:
- Name: ${u.name}
- Event ID: ${u.event_id}
- Active: ${u.is_active}

`:i+=` Ticket Tier Not Found

`,s!=null&&s.event_id){const{data:y,error:A}=await en.from("events").select("*").eq("id",s.event_id).single();A?i+=` Event Error: ${A.message}
`:y?i+=` Event Found:
- Title: ${y.title}
- Date: ${y.date}

`:i+=` Event Not Found

`}if(s!=null&&s.event_id){const{data:y,error:A}=await en.from("ticket_tiers").select("*").eq("event_id",s.event_id);A?i+=` Event Tiers Error: ${A.message}
`:y&&y.length>0?(i+=` Event Ticket Tiers (${y.length}):
`,y.forEach(b=>i+=`- ${b.id}: ${b.name}
`),i+=`
`):i+=` No Ticket Tiers Found for Event

`}const{data:f,error:x}=await en.from("ticket_tiers").select("*");return x?i+=` All Tiers Error: ${x.message}
`:f&&f.length>0?(i+=` Total Ticket Tiers in DB: ${f.length}
`,f.slice(0,5).forEach(y=>i+=`- ${y.id}: ${y.name}
`),f.length>5&&(i+=`... and ${f.length-5} more
`),i+=`
`):i+=` No Ticket Tiers in Database

`,i}catch(i){return` Debug Error: ${i}
`}},validateGuestlist:async(n,r="entry")=>{try{console.log(" Validating guestlist:",{guestlistId:n,scanType:r});const{data:i,error:s}=await en.from("guestlists").select("*").eq("id",n).single();if(s||!i)return console.log(" Guestlist not found:",s),{isValid:!1,message:"Guestlist not found",orderStatus:"unknown",eventDate:"unknown",customerName:"unknown",customerEmail:"unknown"};if(i.remaining_scans<=0)return console.log(" No remaining scans for guestlist"),{isValid:!1,message:"All tickets from this group pass have been used",orderStatus:"completed",eventDate:"unknown",customerName:i.lead_name,customerEmail:i.lead_email};const{data:o,error:u}=await en.from("events").select("*").eq("id",i.event_id).single();if(u||!o)return console.log(" Event not found:",u),{isValid:!1,message:"Event not found",orderStatus:"completed",eventDate:"unknown",customerName:i.lead_name,customerEmail:i.lead_email};const d=o.date;return d&&new Date(d)<new Date?(console.log(" Event has passed:",d),{isValid:!1,message:"Event has passed",orderStatus:"completed",eventDate:d,customerName:i.lead_name,customerEmail:i.lead_email}):(console.log(" Guestlist validation successful"),{isValid:!0,message:`Group pass valid - ${i.remaining_scans} tickets remaining`,orderStatus:"completed",eventDate:d||"unknown",customerName:i.lead_name,customerEmail:i.lead_email,eventId:i.event_id,eventTitle:o.title,ticketTierName:`Group Pass (${i.total_tickets} tickets)`})}catch(i){return console.error(" Error validating guestlist:",i),{isValid:!1,message:"Failed to validate guestlist",orderStatus:"unknown",eventDate:"unknown",customerName:"unknown",customerEmail:"unknown"}}},recordGuestlistScan:async n=>{try{const{error:r}=await en.rpc("decrement_guestlist_scans",{guestlist_uuid:n.guestlistId});if(r)throw console.error("Error decrementing guestlist scans:",r),r;const{error:i}=await en.from("guestlist_scans").insert({guestlist_id:n.guestlistId,event_id:n.eventId,scan_type:n.scanType,scanned_by:n.scannedBy||"admin",location:n.location||"",notes:n.notes||"",scanned_at:new Date().toISOString()});if(i)throw console.error("Error recording guestlist scan:",i),i}catch(r){throw console.error("Error recording guestlist scan:",r),r}}}),{name:"carnival-admin-storage",partialize:e=>({user:e.user,isAuthenticated:e.isAuthenticated})})),nD=()=>{const{events:e}=So(),t=Xu(),{glitchRef:n,isGlitching:r,glitchType:i}=Mh(),s=o=>{t(`/events?event=${o.id}`)};return m.jsxs("section",{id:"events",className:"py-16 md:py-20 relative px-4 overflow-hidden",children:[m.jsxs("div",{className:"absolute inset-0 w-full h-full",children:[m.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover scale-150",children:m.jsx("source",{src:"/vid-ev.mp4",type:"video/mp4"})}),m.jsx("div",{className:"absolute inset-0 bg-gray-900/70"})]}),m.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 md:px-6 lg:px-8",children:[m.jsxs(lt.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:"text-center mb-12 md:mb-16",children:[m.jsx(lt.h2,{ref:n,animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:8,repeat:1/0,ease:"linear"},className:`text-5xl sm:text-4xl md:text-5xl lg:text-6xl font-bold mb-4 md:mb-6 pb-1 glitch-text ${r?`glitch-active glitch-${i}`:""}`,"data-text":"EVENTS",style:{textTransform:"uppercase",letterSpacing:"0.1em"},children:"EVENTS"}),m.jsxs(lt.p,{className:"text-base sm:text-lg md:text-lg text-white max-w-fit mx-auto leading-relaxed px-6 py-3 bg-black/20 backdrop-blur-sm rounded-full border border-white/20",whileHover:{scale:1.05,boxShadow:"0 0 20px rgba(255, 255, 255, 0.3)",borderColor:"rgba(255, 255, 255, 0.5)"},animate:{boxShadow:["0 0 10px rgba(255, 255, 255, 0.1)","0 0 20px rgba(255, 255, 255, 0.2)","0 0 10px rgba(255, 255, 255, 0.1)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:[m.jsx("span",{className:"block sm:hidden",children:" Events that hit different "}),m.jsx("span",{className:"hidden sm:block",children:" From rooftop raves to underground vibes - events that hit different "})]})]}),m.jsx("div",{className:`grid gap-6 md:gap-8 ${e.filter(o=>!o.isArchived).slice(0,3).length===1?"grid-cols-1 max-w-md mx-auto":e.filter(o=>!o.isArchived).slice(0,3).length===2?"grid-cols-1 md:grid-cols-2 max-w-4xl mx-auto":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3"}`,children:e.filter(o=>!o.isArchived).slice(0,3).map((o,u)=>m.jsxs(lt.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.6,delay:u*.1},whileHover:{y:-4},className:"group relative bg-gradient-to-br from-white via-gray-50 to-white border border-gray-100 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden cursor-pointer backdrop-blur-sm",children:[m.jsxs("div",{className:"relative h-48 md:h-56 overflow-hidden",onClick:()=>s(o),children:[m.jsx("img",{src:o.image,alt:o.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",onError:d=>{const f=d.target;f.src=`https://via.placeholder.com/400x300/6B7280/FFFFFF?text=${encodeURIComponent(o.title)}`}}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"}),m.jsx("div",{className:"absolute top-4 left-4 flex flex-wrap gap-2",children:o.tags.slice(0,2).map(d=>m.jsx("span",{className:"bg-white/95 backdrop-blur-sm px-3 py-1.5 rounded-full text-xs font-semibold text-gray-800 shadow-sm border border-white/20",children:d},d))}),m.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:m.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white mb-2 leading-tight drop-shadow-lg",children:o.title})})]}),m.jsxs("div",{className:"p-5 md:p-6 space-y-4",onClick:()=>s(o),children:[m.jsx("p",{className:"text-gray-600 text-sm leading-relaxed line-clamp-2",children:o.description}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center justify-center gap-3 p-2.5 bg-gray-50 rounded-xl",children:[m.jsx(is,{className:"w-4 h-4 text-gray-600 flex-shrink-0"}),m.jsx("span",{className:"text-sm font-semibold text-gray-900",children:o.date})]}),m.jsxs("div",{className:"flex items-center justify-center gap-3 p-2.5 bg-gray-50 rounded-xl",children:[m.jsx(Va,{className:"w-4 h-4 text-gray-600 flex-shrink-0"}),m.jsx("span",{className:"text-sm font-semibold text-gray-900",children:o.time})]}),m.jsxs("div",{className:"flex items-center justify-center gap-3 p-2.5 bg-gray-50 rounded-xl",children:[m.jsx(Sc,{className:"w-4 h-4 text-gray-600 flex-shrink-0"}),m.jsx("span",{className:"text-sm font-semibold text-gray-900",children:o.venue})]})]}),m.jsxs(lt.button,{onClick:d=>{d.stopPropagation(),s(o)},whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 hover:from-gray-800 hover:via-gray-700 hover:to-gray-800 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 text-sm md:text-base flex items-center justify-center gap-3 shadow-lg hover:shadow-xl group-hover:shadow-2xl",children:[m.jsx("span",{children:"Get Tickets"}),m.jsx(q0,{className:"w-4 h-4 transition-transform group-hover:translate-x-1"})]})]})]},o.id))})]})]})},rD=()=>{const{glitchRef:e,isGlitching:t,glitchType:n}=Mh(),r=[{icon:is,number:"500+",label:"Epic Nights Created"},{icon:Es,number:"50K+",label:"Happy Party People"},{icon:Jw,number:"25+",label:"Industry Awards"},{icon:qL,number:"10+",label:"Years of Experience"}];return m.jsxs("section",{id:"about",className:"py-16 md:py-20 relative bg-gradient-to-br from-black via-gray-900 to-black overflow-hidden",children:[m.jsxs("div",{className:"absolute inset-0",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/80 via-gray-900/60 to-black/80"}),m.jsx("div",{className:"absolute inset-0 opacity-5",children:m.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 1px 1px, white 1px, transparent 0)",backgroundSize:"40px 40px"}})}),m.jsx("div",{className:"absolute top-0 left-1/4 w-px h-full bg-gradient-to-b from-transparent via-white/10 to-transparent"}),m.jsx("div",{className:"absolute top-0 right-1/4 w-px h-full bg-gradient-to-b from-transparent via-white/5 to-transparent"}),m.jsx("div",{className:"absolute top-1/3 left-0 w-full h-px bg-gradient-to-r from-transparent via-white/5 to-transparent"})]}),m.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-6 lg:px-8 relative z-10",children:[m.jsxs(lt.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:"text-center mb-12 md:mb-16",children:[m.jsx(lt.h2,{ref:e,"data-text":"ABOUT US",className:`text-5xl sm:text-4xl md:text-5xl lg:text-6xl font-bold mb-4 md:mb-6 glitch-text text-white ${t?`glitch-active glitch-${n}`:""}`,style:{textTransform:"uppercase",letterSpacing:"0.1em"},children:"ABOUT US"}),m.jsxs(lt.p,{className:"text-base sm:text-lg md:text-lg text-white max-w-fit mx-auto leading-relaxed px-6 py-3 bg-black/20 backdrop-blur-sm rounded-full border border-white/20",whileHover:{scale:1.05,boxShadow:"0 0 20px rgba(255, 255, 255, 0.3)",borderColor:"rgba(255, 255, 255, 0.5)"},animate:{boxShadow:["0 0 10px rgba(255, 255, 255, 0.1)","0 0 20px rgba(255, 255, 255, 0.2)","0 0 10px rgba(255, 255, 255, 0.1)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:[m.jsx("span",{className:"block sm:hidden",children:"Creating epic nights since 2018"}),m.jsx("span",{className:"hidden sm:block",children:"We make London's most unforgettable nights happen"})]})]}),m.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 md:gap-12 items-stretch mb-16 md:mb-20",children:[m.jsxs(lt.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.8},className:"bg-white/5 border border-white/20 rounded-2xl p-8 md:p-12 backdrop-blur-sm shadow-2xl hover:shadow-white/10 transition-all duration-500 flex flex-col justify-center",children:[m.jsx(lt.h3,{className:"text-3xl md:text-4xl font-bold mb-6 md:mb-8 text-white text-center md:text-left",children:"Our Story"}),m.jsxs("div",{className:"space-y-6 text-gray-300 leading-relaxed text-center md:text-left",children:[m.jsx("p",{className:"text-lg md:text-xl",children:"Born from the underground scene, Carnival LDN started as a passion project for people who believed London deserved better parties."}),m.jsx("p",{className:"text-lg md:text-xl",children:"We've grown from throwing warehouse raves to becoming the city's most trusted name in unforgettable experiences."})]})]}),m.jsx(lt.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.8,delay:.2},className:"grid grid-cols-2 gap-4 md:gap-6",children:r.map((i,s)=>m.jsxs(lt.div,{initial:{scale:0},whileInView:{scale:1},viewport:{once:!0},transition:{delay:s*.1,type:"spring"},whileHover:{scale:1.05,y:-5},className:"bg-white/5 border border-white/20 rounded-xl p-6 md:p-8 text-center group cursor-default hover:bg-white/10 transition-all duration-300 backdrop-blur-sm shadow-xl hover:shadow-white/10",children:[m.jsx(i.icon,{className:"w-10 h-10 md:w-12 md:h-12 text-white mx-auto mb-4 group-hover:scale-110 transition-transform"}),m.jsx("div",{className:"text-2xl md:text-3xl font-bold text-white mb-2",children:i.number}),m.jsx("div",{className:"text-gray-300 text-sm md:text-base leading-tight",children:i.label})]},i.label))})]}),m.jsxs(lt.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:"bg-white/5 border border-white/20 rounded-2xl p-8 md:p-12 backdrop-blur-sm shadow-2xl hover:shadow-white/10 transition-all duration-500 mb-12",children:[m.jsx(lt.h4,{className:"text-2xl md:text-3xl font-bold text-center mb-8 text-white",children:"Why Choose Us?"}),m.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[m.jsxs("div",{className:"text-center group",children:[m.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform",children:m.jsx(Jw,{className:"w-8 h-8 text-black"})}),m.jsx("span",{className:"text-gray-300 font-medium",children:"Unmatched energy and atmosphere"})]}),m.jsxs("div",{className:"text-center group",children:[m.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform",children:m.jsx(e5,{className:"w-8 h-8 text-black"})}),m.jsx("span",{className:"text-gray-300 font-medium",children:"Premium venue and artist partnerships"})]}),m.jsxs("div",{className:"text-center group",children:[m.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform",children:m.jsx(e5,{className:"w-8 h-8 text-black"})}),m.jsx("span",{className:"text-gray-300 font-medium",children:"Authentic scene knowledge"})]}),m.jsxs("div",{className:"text-center group",children:[m.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform",children:m.jsx(Es,{className:"w-8 h-8 text-black"})}),m.jsx("span",{className:"text-gray-300 font-medium",children:"Community-focused approach"})]})]})]})]})]})},iD=()=>{const{glitchRef:e,isGlitching:t,glitchType:n}=Mh();return m.jsxs("section",{id:"contact",className:"py-16 md:py-20 relative bg-gradient-to-br from-black via-gray-900 to-black overflow-hidden",children:[m.jsxs("div",{className:"absolute inset-0",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/80 via-gray-900/60 to-black/80"}),m.jsx("div",{className:"absolute inset-0 opacity-5",children:m.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 1px 1px, white 1px, transparent 0)",backgroundSize:"40px 40px"}})}),m.jsx("div",{className:"absolute top-0 left-1/4 w-px h-full bg-gradient-to-b from-transparent via-white/10 to-transparent"}),m.jsx("div",{className:"absolute top-0 right-1/4 w-px h-full bg-gradient-to-b from-transparent via-white/5 to-transparent"}),m.jsx("div",{className:"absolute top-1/3 left-0 w-full h-px bg-gradient-to-r from-transparent via-white/5 to-transparent"})]}),m.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-6 lg:px-8 relative z-10",children:[m.jsxs(lt.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:"text-center mb-12 md:mb-16",children:[m.jsx(lt.h2,{ref:e,"data-text":"GET IN TOUCH",className:`text-4xl sm:text-4xl md:text-5xl lg:text-6xl font-bold mb-4 md:mb-6 glitch-text text-white ${t?`glitch-active glitch-${n}`:""}`,style:{textTransform:"uppercase",letterSpacing:"0.1em"},children:"GET IN TOUCH"}),m.jsx(lt.p,{className:"text-base sm:text-lg md:text-lg text-white max-w-fit mx-auto leading-relaxed px-6 py-3 bg-black/20 backdrop-blur-sm rounded-full border border-white/20",whileHover:{scale:1.05,boxShadow:"0 0 20px rgba(255, 255, 255, 0.3)",borderColor:"rgba(255, 255, 255, 0.5)"},animate:{boxShadow:["0 0 10px rgba(255, 255, 255, 0.1)","0 0 20px rgba(255, 255, 255, 0.2)","0 0 10px rgba(255, 255, 255, 0.1)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:"Ready to create an exceptional event?"})]}),m.jsxs("div",{className:"grid lg:grid-cols-5 gap-8 md:gap-12 items-stretch",children:[m.jsxs(lt.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.8},className:"lg:col-span-3 bg-white/5 border border-white/20 rounded-2xl p-6 md:p-8 backdrop-blur-sm shadow-2xl hover:shadow-white/10 transition-all duration-500 flex flex-col",children:[m.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white mb-4 md:mb-6",children:"Send us a message"}),m.jsxs("form",{className:"space-y-4 md:space-y-6 flex-1 flex flex-col",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"First Name"}),m.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:ring-2 focus:ring-white focus:border-white/40 transition-all text-white placeholder-gray-400",placeholder:"John"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Last Name"}),m.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:ring-2 focus:ring-white focus:border-white/40 transition-all text-white placeholder-gray-400",placeholder:"Doe"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),m.jsx("input",{type:"email",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:ring-2 focus:ring-white focus:border-white/40 transition-all text-white placeholder-gray-400",placeholder:"john@company.com"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Phone"}),m.jsx("input",{type:"tel",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:ring-2 focus:ring-white focus:border-white/40 transition-all text-white placeholder-gray-400",placeholder:"+44 20 1234 5678"})]}),m.jsxs("div",{className:"flex-1",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Message"}),m.jsx("textarea",{rows:6,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:ring-2 focus:ring-white focus:border-white/40 transition-all text-white placeholder-gray-400 resize-none",placeholder:"Tell us how we can help you..."})]}),m.jsx("div",{className:"pt-0",children:m.jsxs(lt.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"bg-white hover:bg-gray-100 text-black px-6 md:px-8 py-3 rounded-lg font-medium transition-all duration-300 text-sm md:text-base flex items-center justify-center space-x-2 w-full shadow-lg",children:[m.jsx(Rx,{className:"w-4 h-4 md:w-5 md:h-5"}),m.jsx("span",{children:"Send Message"})]})})]})]}),m.jsxs(lt.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.8,delay:.2},className:"lg:col-span-2 space-y-6 md:space-y-8 flex flex-col",children:[m.jsxs("div",{className:"bg-white/5 border border-white/20 rounded-2xl p-6 md:p-8 backdrop-blur-sm shadow-2xl hover:shadow-white/10 transition-all duration-500 flex-1",children:[m.jsx(lt.h3,{className:"text-xl md:text-2xl font-bold mb-4 md:mb-6 text-center lg:text-left text-white",children:"Contact Information"}),m.jsxs("div",{className:"space-y-4 md:space-y-6",children:[m.jsxs("div",{className:"flex items-center space-x-3 md:space-x-4",children:[m.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-white rounded-lg flex items-center justify-center",children:m.jsx(P1,{className:"w-5 h-5 md:w-6 md:h-6 text-black"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-white",children:"Email"}),m.jsx("p",{className:"text-gray-300",children:"parternships@carnivalldn.com"})]})]}),m.jsxs("div",{className:"flex items-center space-x-3 md:space-x-4",children:[m.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-white rounded-lg flex items-center justify-center",children:m.jsx(kS,{className:"w-5 h-5 md:w-6 md:h-6 text-black"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-white",children:"Phone"}),m.jsx("p",{className:"text-gray-300",children:"+44 20 1234 5678"})]})]}),m.jsxs("div",{className:"flex items-center space-x-3 md:space-x-4",children:[m.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-white rounded-lg flex items-center justify-center",children:m.jsx(Sc,{className:"w-5 h-5 md:w-6 md:h-6 text-black"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-white",children:"Address"}),m.jsx("p",{className:"text-gray-300",children:"123 Event Street, London, UK"})]})]}),m.jsxs("div",{className:"flex items-center space-x-3 md:space-x-4",children:[m.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-white rounded-lg flex items-center justify-center",children:m.jsx(Va,{className:"w-5 h-5 md:w-6 md:h-6 text-black"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-white",children:"Business Hours"}),m.jsx("p",{className:"text-gray-300",children:"Mon-Fri: 9AM-6PM"})]})]})]})]}),m.jsxs("div",{className:"bg-white/5 border border-white/20 rounded-2xl p-6 md:p-8 backdrop-blur-sm shadow-2xl hover:shadow-white/10 transition-all duration-500",children:[m.jsx(lt.h3,{className:"text-xl md:text-2xl font-bold mb-4 md:mb-6 text-center lg:text-left text-white",children:"Connect With Us"}),m.jsx("p",{className:"text-sm md:text-base text-gray-300 mb-4 md:mb-6 leading-relaxed text-center lg:text-left",children:"Follow our journey and stay updated with the latest events, behind-the-scenes content, and exclusive offers."}),m.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[m.jsxs(lt.a,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},href:"#",className:"bg-white/10 hover:bg-white/20 border border-white/20 rounded-xl p-4 text-center transition-all duration-300 group",children:[m.jsx($L,{className:"w-6 h-6 text-white mx-auto mb-2 group-hover:scale-110 transition-transform"}),m.jsx("span",{className:"text-xs text-gray-400 group-hover:text-white transition-colors",children:"Instagram"})]}),m.jsxs(lt.a,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},href:"#",className:"bg-white/10 hover:bg-white/20 border border-white/20 rounded-xl p-4 text-center transition-all duration-300 group",children:[m.jsx(KL,{className:"w-6 h-6 text-white mx-auto mb-2 group-hover:scale-110 transition-transform"}),m.jsx("span",{className:"text-xs text-gray-400 group-hover:text-white transition-colors",children:"WhatsApp"})]}),m.jsxs(lt.a,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},href:"#",className:"bg-white/10 hover:bg-white/20 border border-white/20 rounded-xl p-4 text-center transition-all duration-300 group",children:[m.jsx(YL,{className:"w-6 h-6 text-white mx-auto mb-2 group-hover:scale-110 transition-transform"}),m.jsx("span",{className:"text-xs text-gray-400 group-hover:text-white transition-colors",children:"LinkedIn"})]})]})]})]})]})]})]})},o6=()=>m.jsx("footer",{className:"bg-gradient-to-br from-black via-gray-900 to-black text-white py-12 md:py-16 relative overflow-hidden border-t border-white/10",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-6 lg:px-8 relative z-10",children:[m.jsx("div",{className:"grid grid-cols-1 gap-8 md:gap-10",children:m.jsxs("div",{className:"text-center",children:[m.jsx(lt.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"flex items-center justify-center mb-4",children:m.jsx("img",{src:"/carnival-logo.svg",alt:"Carnival LDN Logo",className:"w-16 h-16 md:w-20 md:h-20 object-contain",style:{filter:"brightness(0) invert(1)"}})}),m.jsx("p",{className:"text-gray-400 text-sm md:text-base leading-relaxed mb-4 max-w-md mx-auto px-4",children:"London's premier professional events company, creating exceptional experiences that elevate your brand and strengthen business relationships."}),m.jsx("p",{className:"text-gray-500 text-xs md:text-sm text-center",children:"Established in London, 2014"})]})}),m.jsx(lt.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.6},className:"border-t border-gray-800 mt-8 md:mt-12 pt-6 md:pt-8",children:m.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[m.jsx("p",{className:"text-gray-400 text-sm",children:" 2025 Carnival LDN. All rights reserved."}),m.jsxs("div",{className:"flex space-x-4",children:[m.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"Privacy Policy"}),m.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"Terms of Service"}),m.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"Cookie Policy"})]})]})})]})}),sD=()=>{const e=Array.from({length:15},(t,n)=>({id:n,size:Math.random()*200+50,duration:Math.random()*25+20,delay:Math.random()*10,x:Math.random()*100,y:Math.random()*100}));return m.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden",children:[e.map(t=>m.jsx(lt.div,{className:"absolute rounded-full mix-blend-multiply filter blur-xl opacity-5",style:{width:t.size,height:t.size,left:`${t.x}%`,top:`${t.y}%`,background:`radial-gradient(circle,
              ${t.id%3===0?"rgb(107, 114, 128)":t.id%3===1?"rgb(75, 85, 99)":"rgb(156, 163, 175)"} 0%, transparent 70%)`},animate:{x:[0,50,-25,0],y:[0,-50,25,0],scale:[1,1.1,.9,1]},transition:{duration:t.duration,repeat:1/0,delay:t.delay,ease:"easeInOut"}},t.id)),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white via-gray-50 to-white opacity-90"})]})};var Uh=e=>e.type==="checkbox",dc=e=>e instanceof Date,qi=e=>e==null;const l6=e=>typeof e=="object";var jr=e=>!qi(e)&&!Array.isArray(e)&&l6(e)&&!dc(e),aD=e=>jr(e)&&e.target?Uh(e.target)?e.target.checked:e.target.value:e,oD=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,lD=(e,t)=>e.has(oD(t)),cD=e=>{const t=e.constructor&&e.constructor.prototype;return jr(t)&&t.hasOwnProperty("isPrototypeOf")},zx=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function si(e){let t;const n=Array.isArray(e),r=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(zx&&(e instanceof Blob||r))&&(n||jr(e)))if(t=n?[]:{},!n&&!cD(e))t=e;else for(const i in e)e.hasOwnProperty(i)&&(t[i]=si(e[i]));else return e;return t}var z1=e=>/^\w*$/.test(e),Vr=e=>e===void 0,Hx=e=>Array.isArray(e)?e.filter(Boolean):[],qx=e=>Hx(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Tt=(e,t,n)=>{if(!t||!jr(e))return n;const r=(z1(t)?[t]:qx(t)).reduce((i,s)=>qi(i)?i:i[s],e);return Vr(r)||r===e?Vr(e[t])?n:e[t]:r},Pa=e=>typeof e=="boolean",ir=(e,t,n)=>{let r=-1;const i=z1(t)?[t]:qx(t),s=i.length,o=s-1;for(;++r<s;){const u=i[r];let d=n;if(r!==o){const f=e[u];d=jr(f)||Array.isArray(f)?f:isNaN(+i[r+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;e[u]=d,e=e[u]}};const S5={BLUR:"blur",FOCUS_OUT:"focusout"},fa={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},to={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},uD=Wt.createContext(null);uD.displayName="HookFormContext";var dD=(e,t,n,r=!0)=>{const i={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(i,s,{get:()=>{const o=s;return t._proxyFormState[o]!==fa.all&&(t._proxyFormState[o]=!r||fa.all),e[o]}});return i};const hD=typeof window<"u"?Wt.useLayoutEffect:Wt.useEffect;var Da=e=>typeof e=="string",fD=(e,t,n,r,i)=>Da(e)?(r&&t.watch.add(e),Tt(n,e,i)):Array.isArray(e)?e.map(s=>(r&&t.watch.add(s),Tt(n,s))):(r&&(t.watchAll=!0),n),Zm=e=>qi(e)||!l6(e);function tl(e,t,n=new WeakSet){if(Zm(e)||Zm(t))return e===t;if(dc(e)&&dc(t))return e.getTime()===t.getTime();const r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const s of r){const o=e[s];if(!i.includes(s))return!1;if(s!=="ref"){const u=t[s];if(dc(o)&&dc(u)||jr(o)&&jr(u)||Array.isArray(o)&&Array.isArray(u)?!tl(o,u,n):o!==u)return!1}}return!0}var pD=(e,t,n,r,i)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:i||!0}}:{},Yd=e=>Array.isArray(e)?e:[e],N5=()=>{let e=[];return{get observers(){return e},next:i=>{for(const s of e)s.next&&s.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(s=>s!==i)}}),unsubscribe:()=>{e=[]}}},es=e=>jr(e)&&!Object.keys(e).length,Wx=e=>e.type==="file",pa=e=>typeof e=="function",X0=e=>{if(!zx)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},c6=e=>e.type==="select-multiple",Gx=e=>e.type==="radio",gD=e=>Gx(e)||Uh(e),lg=e=>X0(e)&&e.isConnected;function mD(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=Vr(e)?r++:e[t[r++]];return e}function xD(e){for(const t in e)if(e.hasOwnProperty(t)&&!Vr(e[t]))return!1;return!0}function Fr(e,t){const n=Array.isArray(t)?t:z1(t)?[t]:qx(t),r=n.length===1?e:mD(e,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(jr(r)&&es(r)||Array.isArray(r)&&xD(r))&&Fr(e,n.slice(0,-1)),e}var u6=e=>{for(const t in e)if(pa(e[t]))return!0;return!1};function K0(e,t={}){const n=Array.isArray(e);if(jr(e)||n)for(const r in e)Array.isArray(e[r])||jr(e[r])&&!u6(e[r])?(t[r]=Array.isArray(e[r])?[]:{},K0(e[r],t[r])):qi(e[r])||(t[r]=!0);return t}function d6(e,t,n){const r=Array.isArray(e);if(jr(e)||r)for(const i in e)Array.isArray(e[i])||jr(e[i])&&!u6(e[i])?Vr(t)||Zm(n[i])?n[i]=Array.isArray(e[i])?K0(e[i],[]):{...K0(e[i])}:d6(e[i],qi(t)?{}:t[i],n[i]):n[i]=!tl(e[i],t[i]);return n}var vd=(e,t)=>d6(e,t,K0(t));const C5={value:!1,isValid:!1},E5={value:!0,isValid:!0};var h6=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Vr(e[0].attributes.value)?Vr(e[0].value)||e[0].value===""?E5:{value:e[0].value,isValid:!0}:E5:C5}return C5},f6=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>Vr(e)?e:t?e===""?NaN:e&&+e:n&&Da(e)?new Date(e):r?r(e):e;const _5={isValid:!1,value:null};var p6=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,_5):_5;function T5(e){const t=e.ref;return Wx(t)?t.files:Gx(t)?p6(e.refs).value:c6(t)?[...t.selectedOptions].map(({value:n})=>n):Uh(t)?h6(e.refs).value:f6(Vr(t.value)?e.ref.value:t.value,e)}var yD=(e,t,n,r)=>{const i={};for(const s of e){const o=Tt(t,s);o&&ir(i,s,o._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:r}},Z0=e=>e instanceof RegExp,wd=e=>Vr(e)?e:Z0(e)?e.source:jr(e)?Z0(e.value)?e.value.source:e.value:e,I5=e=>({isOnSubmit:!e||e===fa.onSubmit,isOnBlur:e===fa.onBlur,isOnChange:e===fa.onChange,isOnAll:e===fa.all,isOnTouch:e===fa.onTouched});const k5="AsyncFunction";var vD=e=>!!e&&!!e.validate&&!!(pa(e.validate)&&e.validate.constructor.name===k5||jr(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===k5)),wD=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),L5=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const Xd=(e,t,n,r)=>{for(const i of n||Object.keys(e)){const s=Tt(e,i);if(s){const{_f:o,...u}=s;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],i)&&!r)return!0;if(o.ref&&t(o.ref,o.name)&&!r)return!0;if(Xd(u,t))break}else if(jr(u)&&Xd(u,t))break}}};function P5(e,t,n){const r=Tt(e,n);if(r||z1(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=Tt(t,s),u=Tt(e,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(u&&u.type)return{name:s,error:u};if(u&&u.root&&u.root.type)return{name:`${s}.root`,error:u.root};i.pop()}return{name:n}}var bD=(e,t,n,r)=>{n(e);const{name:i,...s}=e;return es(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(o=>t[o]===(!r||fa.all))},AD=(e,t,n)=>!e||!t||e===t||Yd(e).some(r=>r&&(n?r===t:r.startsWith(t)||t.startsWith(r))),SD=(e,t,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(t||e):(n?r.isOnBlur:i.isOnBlur)?!e:(n?r.isOnChange:i.isOnChange)?e:!0,ND=(e,t)=>!Hx(Tt(e,t)).length&&Fr(e,t),CD=(e,t,n)=>{const r=Yd(Tt(e,n));return ir(r,"root",t[n]),ir(e,n,r),e},s0=e=>Da(e);function j5(e,t,n="validate"){if(s0(e)||Array.isArray(e)&&e.every(s0)||Pa(e)&&!e)return{type:n,message:s0(e)?e:"",ref:t}}var $c=e=>jr(e)&&!Z0(e)?e:{value:e,message:""},O5=async(e,t,n,r,i,s)=>{const{ref:o,refs:u,required:d,maxLength:f,minLength:x,min:y,max:A,pattern:b,validate:P,name:I,valueAsNumber:j,mount:C}=e._f,_=Tt(n,I);if(!C||t.has(I))return{};const k=u?u[0]:o,R=q=>{i&&k.reportValidity&&(k.setCustomValidity(Pa(q)?"":q||""),k.reportValidity())},M={},ne=Gx(o),U=Uh(o),K=ne||U,te=(j||Wx(o))&&Vr(o.value)&&Vr(_)||X0(o)&&o.value===""||_===""||Array.isArray(_)&&!_.length,be=pD.bind(null,I,r,M),$=(q,X,Q,J=to.maxLength,pe=to.minLength)=>{const ge=q?X:Q;M[I]={type:q?J:pe,message:ge,ref:o,...be(q?J:pe,ge)}};if(s?!Array.isArray(_)||!_.length:d&&(!K&&(te||qi(_))||Pa(_)&&!_||U&&!h6(u).isValid||ne&&!p6(u).isValid)){const{value:q,message:X}=s0(d)?{value:!!d,message:d}:$c(d);if(q&&(M[I]={type:to.required,message:X,ref:k,...be(to.required,X)},!r))return R(X),M}if(!te&&(!qi(y)||!qi(A))){let q,X;const Q=$c(A),J=$c(y);if(!qi(_)&&!isNaN(_)){const pe=o.valueAsNumber||_&&+_;qi(Q.value)||(q=pe>Q.value),qi(J.value)||(X=pe<J.value)}else{const pe=o.valueAsDate||new Date(_),ge=_e=>new Date(new Date().toDateString()+" "+_e),ue=o.type=="time",Se=o.type=="week";Da(Q.value)&&_&&(q=ue?ge(_)>ge(Q.value):Se?_>Q.value:pe>new Date(Q.value)),Da(J.value)&&_&&(X=ue?ge(_)<ge(J.value):Se?_<J.value:pe<new Date(J.value))}if((q||X)&&($(!!q,Q.message,J.message,to.max,to.min),!r))return R(M[I].message),M}if((f||x)&&!te&&(Da(_)||s&&Array.isArray(_))){const q=$c(f),X=$c(x),Q=!qi(q.value)&&_.length>+q.value,J=!qi(X.value)&&_.length<+X.value;if((Q||J)&&($(Q,q.message,X.message),!r))return R(M[I].message),M}if(b&&!te&&Da(_)){const{value:q,message:X}=$c(b);if(Z0(q)&&!_.match(q)&&(M[I]={type:to.pattern,message:X,ref:o,...be(to.pattern,X)},!r))return R(X),M}if(P){if(pa(P)){const q=await P(_,n),X=j5(q,k);if(X&&(M[I]={...X,...be(to.validate,X.message)},!r))return R(X.message),M}else if(jr(P)){let q={};for(const X in P){if(!es(q)&&!r)break;const Q=j5(await P[X](_,n),k,X);Q&&(q={...Q,...be(X,Q.message)},R(Q.message),r&&(M[I]=q))}if(!es(q)&&(M[I]={ref:k,...q},!r))return M}}return R(!0),M};const ED={mode:fa.onSubmit,reValidateMode:fa.onChange,shouldFocusError:!0};function _D(e={}){let t={...ED,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:pa(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},r={},i=jr(t.defaultValues)||jr(t.values)?si(t.defaultValues||t.values)||{}:{},s=t.shouldUnregister?{}:si(i),o={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,f=0;const x={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let y={...x};const A={array:N5(),state:N5()},b=t.criteriaMode===fa.all,P=re=>oe=>{clearTimeout(f),f=setTimeout(re,oe)},I=async re=>{if(!t.disabled&&(x.isValid||y.isValid||re)){const oe=t.resolver?es((await U()).errors):await te(r,!0);oe!==n.isValid&&A.state.next({isValid:oe})}},j=(re,oe)=>{!t.disabled&&(x.isValidating||x.validatingFields||y.isValidating||y.validatingFields)&&((re||Array.from(u.mount)).forEach(ve=>{ve&&(oe?ir(n.validatingFields,ve,oe):Fr(n.validatingFields,ve))}),A.state.next({validatingFields:n.validatingFields,isValidating:!es(n.validatingFields)}))},C=(re,oe=[],ve,ze,Be=!0,We=!0)=>{if(ze&&ve&&!t.disabled){if(o.action=!0,We&&Array.isArray(Tt(r,re))){const Qe=ve(Tt(r,re),ze.argA,ze.argB);Be&&ir(r,re,Qe)}if(We&&Array.isArray(Tt(n.errors,re))){const Qe=ve(Tt(n.errors,re),ze.argA,ze.argB);Be&&ir(n.errors,re,Qe),ND(n.errors,re)}if((x.touchedFields||y.touchedFields)&&We&&Array.isArray(Tt(n.touchedFields,re))){const Qe=ve(Tt(n.touchedFields,re),ze.argA,ze.argB);Be&&ir(n.touchedFields,re,Qe)}(x.dirtyFields||y.dirtyFields)&&(n.dirtyFields=vd(i,s)),A.state.next({name:re,isDirty:$(re,oe),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else ir(s,re,oe)},_=(re,oe)=>{ir(n.errors,re,oe),A.state.next({errors:n.errors})},k=re=>{n.errors=re,A.state.next({errors:n.errors,isValid:!1})},R=(re,oe,ve,ze)=>{const Be=Tt(r,re);if(Be){const We=Tt(s,re,Vr(ve)?Tt(i,re):ve);Vr(We)||ze&&ze.defaultChecked||oe?ir(s,re,oe?We:T5(Be._f)):Q(re,We),o.mount&&I()}},M=(re,oe,ve,ze,Be)=>{let We=!1,Qe=!1;const yt={name:re};if(!t.disabled){if(!ve||ze){(x.isDirty||y.isDirty)&&(Qe=n.isDirty,n.isDirty=yt.isDirty=$(),We=Qe!==yt.isDirty);const xt=tl(Tt(i,re),oe);Qe=!!Tt(n.dirtyFields,re),xt?Fr(n.dirtyFields,re):ir(n.dirtyFields,re,!0),yt.dirtyFields=n.dirtyFields,We=We||(x.dirtyFields||y.dirtyFields)&&Qe!==!xt}if(ve){const xt=Tt(n.touchedFields,re);xt||(ir(n.touchedFields,re,ve),yt.touchedFields=n.touchedFields,We=We||(x.touchedFields||y.touchedFields)&&xt!==ve)}We&&Be&&A.state.next(yt)}return We?yt:{}},ne=(re,oe,ve,ze)=>{const Be=Tt(n.errors,re),We=(x.isValid||y.isValid)&&Pa(oe)&&n.isValid!==oe;if(t.delayError&&ve?(d=P(()=>_(re,ve)),d(t.delayError)):(clearTimeout(f),d=null,ve?ir(n.errors,re,ve):Fr(n.errors,re)),(ve?!tl(Be,ve):Be)||!es(ze)||We){const Qe={...ze,...We&&Pa(oe)?{isValid:oe}:{},errors:n.errors,name:re};n={...n,...Qe},A.state.next(Qe)}},U=async re=>{j(re,!0);const oe=await t.resolver(s,t.context,yD(re||u.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return j(re),oe},K=async re=>{const{errors:oe}=await U(re);if(re)for(const ve of re){const ze=Tt(oe,ve);ze?ir(n.errors,ve,ze):Fr(n.errors,ve)}else n.errors=oe;return oe},te=async(re,oe,ve={valid:!0})=>{for(const ze in re){const Be=re[ze];if(Be){const{_f:We,...Qe}=Be;if(We){const yt=u.array.has(We.name),xt=Be._f&&vD(Be._f);xt&&x.validatingFields&&j([ze],!0);const ht=await O5(Be,u.disabled,s,b,t.shouldUseNativeValidation&&!oe,yt);if(xt&&x.validatingFields&&j([ze]),ht[We.name]&&(ve.valid=!1,oe))break;!oe&&(Tt(ht,We.name)?yt?CD(n.errors,ht,We.name):ir(n.errors,We.name,ht[We.name]):Fr(n.errors,We.name))}!es(Qe)&&await te(Qe,oe,ve)}}return ve.valid},be=()=>{for(const re of u.unMount){const oe=Tt(r,re);oe&&(oe._f.refs?oe._f.refs.every(ve=>!lg(ve)):!lg(oe._f.ref))&&Pe(re)}u.unMount=new Set},$=(re,oe)=>!t.disabled&&(re&&oe&&ir(s,re,oe),!tl(_e(),i)),q=(re,oe,ve)=>fD(re,u,{...o.mount?s:Vr(oe)?i:Da(re)?{[re]:oe}:oe},ve,oe),X=re=>Hx(Tt(o.mount?s:i,re,t.shouldUnregister?Tt(i,re,[]):[])),Q=(re,oe,ve={})=>{const ze=Tt(r,re);let Be=oe;if(ze){const We=ze._f;We&&(!We.disabled&&ir(s,re,f6(oe,We)),Be=X0(We.ref)&&qi(oe)?"":oe,c6(We.ref)?[...We.ref.options].forEach(Qe=>Qe.selected=Be.includes(Qe.value)):We.refs?Uh(We.ref)?We.refs.forEach(Qe=>{(!Qe.defaultChecked||!Qe.disabled)&&(Array.isArray(Be)?Qe.checked=!!Be.find(yt=>yt===Qe.value):Qe.checked=Be===Qe.value||!!Be)}):We.refs.forEach(Qe=>Qe.checked=Qe.value===Be):Wx(We.ref)?We.ref.value="":(We.ref.value=Be,We.ref.type||A.state.next({name:re,values:si(s)})))}(ve.shouldDirty||ve.shouldTouch)&&M(re,Be,ve.shouldTouch,ve.shouldDirty,!0),ve.shouldValidate&&Se(re)},J=(re,oe,ve)=>{for(const ze in oe){if(!oe.hasOwnProperty(ze))return;const Be=oe[ze],We=re+"."+ze,Qe=Tt(r,We);(u.array.has(re)||jr(Be)||Qe&&!Qe._f)&&!dc(Be)?J(We,Be,ve):Q(We,Be,ve)}},pe=(re,oe,ve={})=>{const ze=Tt(r,re),Be=u.array.has(re),We=si(oe);ir(s,re,We),Be?(A.array.next({name:re,values:si(s)}),(x.isDirty||x.dirtyFields||y.isDirty||y.dirtyFields)&&ve.shouldDirty&&A.state.next({name:re,dirtyFields:vd(i,s),isDirty:$(re,We)})):ze&&!ze._f&&!qi(We)?J(re,We,ve):Q(re,We,ve),L5(re,u)&&A.state.next({...n,name:re}),A.state.next({name:o.mount?re:void 0,values:si(s)})},ge=async re=>{o.mount=!0;const oe=re.target;let ve=oe.name,ze=!0;const Be=Tt(r,ve),We=xt=>{ze=Number.isNaN(xt)||dc(xt)&&isNaN(xt.getTime())||tl(xt,Tt(s,ve,xt))},Qe=I5(t.mode),yt=I5(t.reValidateMode);if(Be){let xt,ht;const Dt=oe.type?T5(Be._f):aD(re),dt=re.type===S5.BLUR||re.type===S5.FOCUS_OUT,kn=!wD(Be._f)&&!t.resolver&&!Tt(n.errors,ve)&&!Be._f.deps||SD(dt,Tt(n.touchedFields,ve),n.isSubmitted,yt,Qe),Et=L5(ve,u,dt);ir(s,ve,Dt),dt?(Be._f.onBlur&&Be._f.onBlur(re),d&&d(0)):Be._f.onChange&&Be._f.onChange(re);const ot=M(ve,Dt,dt),Mt=!es(ot)||Et;if(!dt&&A.state.next({name:ve,type:re.type,values:si(s)}),kn)return(x.isValid||y.isValid)&&(t.mode==="onBlur"?dt&&I():dt||I()),Mt&&A.state.next({name:ve,...Et?{}:ot});if(!dt&&Et&&A.state.next({...n}),t.resolver){const{errors:jt}=await U([ve]);if(We(Dt),ze){const un=P5(n.errors,r,ve),tn=P5(jt,r,un.name||ve);xt=tn.error,ve=tn.name,ht=es(jt)}}else j([ve],!0),xt=(await O5(Be,u.disabled,s,b,t.shouldUseNativeValidation))[ve],j([ve]),We(Dt),ze&&(xt?ht=!1:(x.isValid||y.isValid)&&(ht=await te(r,!0)));ze&&(Be._f.deps&&Se(Be._f.deps),ne(ve,ht,xt,ot))}},ue=(re,oe)=>{if(Tt(n.errors,oe)&&re.focus)return re.focus(),1},Se=async(re,oe={})=>{let ve,ze;const Be=Yd(re);if(t.resolver){const We=await K(Vr(re)?re:Be);ve=es(We),ze=re?!Be.some(Qe=>Tt(We,Qe)):ve}else re?(ze=(await Promise.all(Be.map(async We=>{const Qe=Tt(r,We);return await te(Qe&&Qe._f?{[We]:Qe}:Qe)}))).every(Boolean),!(!ze&&!n.isValid)&&I()):ze=ve=await te(r);return A.state.next({...!Da(re)||(x.isValid||y.isValid)&&ve!==n.isValid?{}:{name:re},...t.resolver||!re?{isValid:ve}:{},errors:n.errors}),oe.shouldFocus&&!ze&&Xd(r,ue,re?Be:u.mount),ze},_e=re=>{const oe={...o.mount?s:i};return Vr(re)?oe:Da(re)?Tt(oe,re):re.map(ve=>Tt(oe,ve))},Me=(re,oe)=>({invalid:!!Tt((oe||n).errors,re),isDirty:!!Tt((oe||n).dirtyFields,re),error:Tt((oe||n).errors,re),isValidating:!!Tt(n.validatingFields,re),isTouched:!!Tt((oe||n).touchedFields,re)}),V=re=>{re&&Yd(re).forEach(oe=>Fr(n.errors,oe)),A.state.next({errors:re?n.errors:{}})},se=(re,oe,ve)=>{const ze=(Tt(r,re,{_f:{}})._f||{}).ref,Be=Tt(n.errors,re)||{},{ref:We,message:Qe,type:yt,...xt}=Be;ir(n.errors,re,{...xt,...oe,ref:ze}),A.state.next({name:re,errors:n.errors,isValid:!1}),ve&&ve.shouldFocus&&ze&&ze.focus&&ze.focus()},de=(re,oe)=>pa(re)?A.state.subscribe({next:ve=>"values"in ve&&re(q(void 0,oe),ve)}):q(re,oe,!0),xe=re=>A.state.subscribe({next:oe=>{AD(re.name,oe.name,re.exact)&&bD(oe,re.formState||x,bt,re.reRenderRoot)&&re.callback({values:{...s},...n,...oe,defaultValues:i})}}).unsubscribe,he=re=>(o.mount=!0,y={...y,...re.formState},xe({...re,formState:y})),Pe=(re,oe={})=>{for(const ve of re?Yd(re):u.mount)u.mount.delete(ve),u.array.delete(ve),oe.keepValue||(Fr(r,ve),Fr(s,ve)),!oe.keepError&&Fr(n.errors,ve),!oe.keepDirty&&Fr(n.dirtyFields,ve),!oe.keepTouched&&Fr(n.touchedFields,ve),!oe.keepIsValidating&&Fr(n.validatingFields,ve),!t.shouldUnregister&&!oe.keepDefaultValue&&Fr(i,ve);A.state.next({values:si(s)}),A.state.next({...n,...oe.keepDirty?{isDirty:$()}:{}}),!oe.keepIsValid&&I()},Le=({disabled:re,name:oe})=>{(Pa(re)&&o.mount||re||u.disabled.has(oe))&&(re?u.disabled.add(oe):u.disabled.delete(oe))},Oe=(re,oe={})=>{let ve=Tt(r,re);const ze=Pa(oe.disabled)||Pa(t.disabled);return ir(r,re,{...ve||{},_f:{...ve&&ve._f?ve._f:{ref:{name:re}},name:re,mount:!0,...oe}}),u.mount.add(re),ve?Le({disabled:Pa(oe.disabled)?oe.disabled:t.disabled,name:re}):R(re,!0,oe.value),{...ze?{disabled:oe.disabled||t.disabled}:{},...t.progressive?{required:!!oe.required,min:wd(oe.min),max:wd(oe.max),minLength:wd(oe.minLength),maxLength:wd(oe.maxLength),pattern:wd(oe.pattern)}:{},name:re,onChange:ge,onBlur:ge,ref:Be=>{if(Be){Oe(re,oe),ve=Tt(r,re);const We=Vr(Be.value)&&Be.querySelectorAll&&Be.querySelectorAll("input,select,textarea")[0]||Be,Qe=gD(We),yt=ve._f.refs||[];if(Qe?yt.find(xt=>xt===We):We===ve._f.ref)return;ir(r,re,{_f:{...ve._f,...Qe?{refs:[...yt.filter(lg),We,...Array.isArray(Tt(i,re))?[{}]:[]],ref:{type:We.type,name:re}}:{ref:We}}}),R(re,!1,void 0,We)}else ve=Tt(r,re,{}),ve._f&&(ve._f.mount=!1),(t.shouldUnregister||oe.shouldUnregister)&&!(lD(u.array,re)&&o.action)&&u.unMount.add(re)}}},He=()=>t.shouldFocusError&&Xd(r,ue,u.mount),qe=re=>{Pa(re)&&(A.state.next({disabled:re}),Xd(r,(oe,ve)=>{const ze=Tt(r,ve);ze&&(oe.disabled=ze._f.disabled||re,Array.isArray(ze._f.refs)&&ze._f.refs.forEach(Be=>{Be.disabled=ze._f.disabled||re}))},0,!1))},rt=(re,oe)=>async ve=>{let ze;ve&&(ve.preventDefault&&ve.preventDefault(),ve.persist&&ve.persist());let Be=si(s);if(A.state.next({isSubmitting:!0}),t.resolver){const{errors:We,values:Qe}=await U();n.errors=We,Be=si(Qe)}else await te(r);if(u.disabled.size)for(const We of u.disabled)Fr(Be,We);if(Fr(n.errors,"root"),es(n.errors)){A.state.next({errors:{}});try{await re(Be,ve)}catch(We){ze=We}}else oe&&await oe({...n.errors},ve),He(),setTimeout(He);if(A.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:es(n.errors)&&!ze,submitCount:n.submitCount+1,errors:n.errors}),ze)throw ze},Ge=(re,oe={})=>{Tt(r,re)&&(Vr(oe.defaultValue)?pe(re,si(Tt(i,re))):(pe(re,oe.defaultValue),ir(i,re,si(oe.defaultValue))),oe.keepTouched||Fr(n.touchedFields,re),oe.keepDirty||(Fr(n.dirtyFields,re),n.isDirty=oe.defaultValue?$(re,si(Tt(i,re))):$()),oe.keepError||(Fr(n.errors,re),x.isValid&&I()),A.state.next({...n}))},vt=(re,oe={})=>{const ve=re?si(re):i,ze=si(ve),Be=es(re),We=Be?i:ze;if(oe.keepDefaultValues||(i=ve),!oe.keepValues){if(oe.keepDirtyValues){const Qe=new Set([...u.mount,...Object.keys(vd(i,s))]);for(const yt of Array.from(Qe))Tt(n.dirtyFields,yt)?ir(We,yt,Tt(s,yt)):pe(yt,Tt(We,yt))}else{if(zx&&Vr(re))for(const Qe of u.mount){const yt=Tt(r,Qe);if(yt&&yt._f){const xt=Array.isArray(yt._f.refs)?yt._f.refs[0]:yt._f.ref;if(X0(xt)){const ht=xt.closest("form");if(ht){ht.reset();break}}}}if(oe.keepFieldsRef)for(const Qe of u.mount)pe(Qe,Tt(We,Qe));else r={}}s=t.shouldUnregister?oe.keepDefaultValues?si(i):{}:si(We),A.array.next({values:{...We}}),A.state.next({values:{...We}})}u={mount:oe.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!x.isValid||!!oe.keepIsValid||!!oe.keepDirtyValues,o.watch=!!t.shouldUnregister,A.state.next({submitCount:oe.keepSubmitCount?n.submitCount:0,isDirty:Be?!1:oe.keepDirty?n.isDirty:!!(oe.keepDefaultValues&&!tl(re,i)),isSubmitted:oe.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Be?{}:oe.keepDirtyValues?oe.keepDefaultValues&&s?vd(i,s):n.dirtyFields:oe.keepDefaultValues&&re?vd(i,re):oe.keepDirty?n.dirtyFields:{},touchedFields:oe.keepTouched?n.touchedFields:{},errors:oe.keepErrors?n.errors:{},isSubmitSuccessful:oe.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Ve=(re,oe)=>vt(pa(re)?re(s):re,oe),fe=(re,oe={})=>{const ve=Tt(r,re),ze=ve&&ve._f;if(ze){const Be=ze.refs?ze.refs[0]:ze.ref;Be.focus&&(Be.focus(),oe.shouldSelect&&pa(Be.select)&&Be.select())}},bt=re=>{n={...n,...re}},$e={control:{register:Oe,unregister:Pe,getFieldState:Me,handleSubmit:rt,setError:se,_subscribe:xe,_runSchema:U,_focusError:He,_getWatch:q,_getDirty:$,_setValid:I,_setFieldArray:C,_setDisabledField:Le,_setErrors:k,_getFieldArray:X,_reset:vt,_resetDefaultValues:()=>pa(t.defaultValues)&&t.defaultValues().then(re=>{Ve(re,t.resetOptions),A.state.next({isLoading:!1})}),_removeUnmounted:be,_disableForm:qe,_subjects:A,_proxyFormState:x,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(re){o=re},get _defaultValues(){return i},get _names(){return u},set _names(re){u=re},get _formState(){return n},get _options(){return t},set _options(re){t={...t,...re}}},subscribe:he,trigger:Se,register:Oe,handleSubmit:rt,watch:de,setValue:pe,getValues:_e,reset:Ve,resetField:Ge,clearErrors:V,unregister:Pe,setError:se,setFocus:fe,getFieldState:Me};return{...$e,formControl:$e}}function g6(e={}){const t=Wt.useRef(void 0),n=Wt.useRef(void 0),[r,i]=Wt.useState({isDirty:!1,isValidating:!1,isLoading:pa(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:pa(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:r},e.defaultValues&&!pa(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...u}=_D(e);t.current={...u,formState:r}}const s=t.current.control;return s._options=e,hD(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(u=>({...u,isReady:!0})),s._formState.isReady=!0,o},[s]),Wt.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),Wt.useEffect(()=>{e.mode&&(s._options.mode=e.mode),e.reValidateMode&&(s._options.reValidateMode=e.reValidateMode)},[s,e.mode,e.reValidateMode]),Wt.useEffect(()=>{e.errors&&(s._setErrors(e.errors),s._focusError())},[s,e.errors]),Wt.useEffect(()=>{e.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,e.shouldUnregister]),Wt.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),Wt.useEffect(()=>{e.values&&!tl(e.values,n.current)?(s._reset(e.values,{keepFieldsRef:!0,...s._options.resetOptions}),n.current=e.values,i(o=>({...o}))):s._resetDefaultValues()},[s,e.values]),Wt.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),t.current.formState=dD(r,s),t.current}const TD=()=>{const[e,t]=me.useState(!1),[n,r]=me.useState(""),i=Xu(),{login:s,isLoading:o}=So(),{register:u,handleSubmit:d,formState:{errors:f}}=g6(),x=async y=>{r(""),await s(y.email,y.password)?(bs.success("Welcome back, Admin!"),i("/admin/dashboard")):(r("Invalid email or password"),bs.error("Invalid email or password"))};return m.jsx("div",{className:"min-h-screen flex items-start justify-center bg-gray-100 py-12 px-4 sm:px-6 lg:px-8",style:{paddingTop:"20vh"},children:m.jsxs(lt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-md w-full space-y-8",children:[m.jsxs("div",{children:[m.jsx(lt.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"mx-auto h-12 w-12 bg-gray-900 rounded-full flex items-center justify-center",children:m.jsx(W0,{className:"h-6 w-6 text-white"})}),m.jsx(lt.h2,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Admin Login"}),m.jsx(lt.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to access the dashboard"})]}),m.jsxs(lt.form,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"mt-8 space-y-6",onSubmit:d(x),children:[n&&m.jsxs(lt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 rounded-md p-4 flex items-center space-x-2",children:[m.jsx(Dm,{className:"h-5 w-5 text-red-400"}),m.jsx("span",{className:"text-sm text-red-600",children:n})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),m.jsxs("div",{className:"mt-1 relative",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:m.jsx(P1,{className:"h-5 w-5 text-gray-400"})}),m.jsx("input",{...u("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),id:"email",type:"email",autoComplete:"email",className:"appearance-none relative block w-full px-3 py-2 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-gray-900 focus:border-gray-900 focus:z-10 sm:text-sm",placeholder:"Enter your email"})]}),f.email&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.email.message})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),m.jsxs("div",{className:"mt-1 relative",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none z-20",children:m.jsx(W0,{className:"h-5 w-5 text-gray-400"})}),m.jsx("input",{...u("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),id:"password",type:e?"text":"password",autoComplete:"current-password",className:"appearance-none relative block w-full px-3 py-2 pl-10 pr-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-gray-900 focus:border-gray-900 focus:z-10 sm:text-sm",placeholder:"Enter your password"}),m.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center z-20",onClick:()=>t(!e),children:e?m.jsx(WL,{className:"h-5 w-5 text-gray-400"}):m.jsx(GL,{className:"h-5 w-5 text-gray-400"})})]}),f.password&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.password.message})]})]}),m.jsx("div",{children:m.jsx(lt.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:o,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-gray-900 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900 disabled:opacity-50 disabled:cursor-not-allowed",children:o?m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),m.jsx("span",{children:"Signing in..."})]}):"Sign in"})}),m.jsx("div",{className:"text-center",children:m.jsx("p",{className:"text-xs text-gray-500",children:"Demo credentials: admin@carnival.com / admin123"})})]})]})})},ID=({ticketTiers:e,eventId:t,onSave:n,onClose:r})=>{var I,j;const[i,s]=me.useState(e||[]),[o,u]=me.useState({name:"",price:void 0,originalPrice:void 0,capacity:void 0,soldCount:0,availableFrom:new Date,availableUntil:new Date(Date.now()+30*24*60*60*1e3),description:"",benefits:[],isActive:!0}),d=()=>{if(console.log("addTier called with newTier:",o),console.log("Validation check:",{hasName:!!o.name,hasPrice:!!o.price,hasCapacity:!!o.capacity,name:o.name,price:o.price,capacity:o.capacity}),(o.name||"").toString().trim().length>0&&o.price!==void 0&&o.price>=0&&o.capacity!==void 0&&o.capacity>0){const C={id:`tier_${Date.now()}`,eventId:t,name:o.name||"",price:(o.price||0)*100,originalPrice:o.originalPrice!==void 0?(o.originalPrice||0)*100:void 0,capacity:o.capacity||0,soldCount:0,availableFrom:o.availableFrom,availableUntil:o.availableUntil,description:o.description||"",benefits:(o.benefits||[]).filter(_=>_.trim()),isActive:o.isActive!==!1};console.log("Created tier:",C),s([...i,C]),console.log("Updated tiers array:",[...i,C]),u({name:"",price:void 0,originalPrice:void 0,capacity:void 0,soldCount:0,availableFrom:new Date,availableUntil:new Date(Date.now()+30*24*60*60*1e3),description:"",benefits:[],isActive:!0})}else console.log("Validation failed - missing required fields")},f=C=>{s(i.filter(_=>_.id!==C))},x=(C,_)=>{s(i.map(k=>k.id===C?{...k,..._}:k))},y=C=>{const _=i.find(k=>k.id===C);_&&x(C,{benefits:[..._.benefits||[],""]})},A=(C,_,k)=>{const R=i.find(M=>M.id===C);if(R){const M=[...R.benefits||[]];M[_]=k,x(C,{benefits:M})}},b=(C,_)=>{const k=i.find(R=>R.id===C);if(k){const R=(k.benefits||[]).filter((M,ne)=>ne!==_);x(C,{benefits:R})}},P=()=>{console.log("handleSave called with tiers:",i),console.log("Tiers length:",i.length),console.log("Tiers details:",i.map(C=>({id:C.id,name:C.name,price:C.price,capacity:C.capacity}))),n(i),r()};return m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",onClick:C=>C.stopPropagation(),children:m.jsxs(lt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:C=>C.stopPropagation(),children:[m.jsx("div",{className:"p-6 border-b",children:m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Manage Ticket Tiers"}),m.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:m.jsx(Ic,{className:"h-6 w-6"})})]})}),m.jsxs("div",{className:"p-6",children:[m.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add New Tier"}),m.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:m.jsxs("p",{className:"text-sm text-blue-800",children:[m.jsx("strong",{children:"How it works:"}),' Create different ticket types with different prices. For example: "Early Bird" at 25, "VIP" at 50, or "Student" at 15. Set how many tickets are available for each tier.']})}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tier Name"}),m.jsx("input",{type:"text",placeholder:"e.g., Early Bird, VIP, Student",value:o.name,onChange:C=>u({...o,name:C.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),m.jsx("input",{type:"number",placeholder:"e.g., 25 for 25",value:o.price??"",onChange:C=>{const _=C.target.value;u({...o,price:_===""?void 0:parseFloat(_)||0})},className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity"}),m.jsx("input",{type:"number",placeholder:"e.g., 100 tickets",value:o.capacity??"",onChange:C=>{const _=C.target.value;u({...o,capacity:_===""?void 0:parseInt(_)||0})},className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Original Price (Optional)"}),m.jsx("input",{type:"number",placeholder:"e.g., 35 for 35 (shows discount)",value:o.originalPrice??"",onChange:C=>{const _=C.target.value;u({...o,originalPrice:_===""?void 0:parseFloat(_)||0})},className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Available From"}),m.jsx("input",{type:"date",value:(I=o.availableFrom)==null?void 0:I.toISOString().split("T")[0],onChange:C=>u({...o,availableFrom:new Date(C.target.value)}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Available Until"}),m.jsx("input",{type:"date",value:(j=o.availableUntil)==null?void 0:j.toISOString().split("T")[0],onChange:C=>u({...o,availableUntil:new Date(C.target.value)}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),m.jsx("textarea",{placeholder:"Description (optional)",value:o.description,onChange:C=>u({...o,description:C.target.value}),className:"w-full mt-4 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:2}),m.jsxs("div",{className:"mt-4 flex items-center justify-end gap-4",children:[m.jsxs("label",{htmlFor:"new-tier-active",className:"inline-flex items-center gap-2 text-sm text-gray-700",children:[m.jsx("input",{id:"new-tier-active",type:"checkbox",checked:o.isActive!==!1,onChange:C=>u({...o,isActive:C.target.checked})}),"Active (allow sales)"]}),m.jsx("button",{onClick:d,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Add Tier"})]})]}),m.jsx("div",{className:"space-y-4",children:i.map(C=>m.jsxs("div",{className:"border rounded-lg p-4",children:[m.jsxs("div",{className:"flex justify-between items-start mb-4",children:[m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[m.jsx("input",{type:"text",value:C.name,onChange:_=>x(C.id,{name:_.target.value}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),m.jsx("input",{type:"number",value:C.price/100,onChange:_=>x(C.id,{price:(parseFloat(_.target.value)||0)*100}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),m.jsx("input",{type:"number",value:C.capacity,onChange:_=>x(C.id,{capacity:parseInt(_.target.value)||0}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),m.jsxs("div",{className:"mt-4",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Benefits"}),m.jsxs("div",{className:"space-y-2",children:[(C.benefits||[]).map((_,k)=>m.jsxs("div",{className:"flex gap-2",children:[m.jsx("input",{type:"text",value:_,onChange:R=>A(C.id,k,R.target.value),placeholder:"Benefit description",className:"flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),m.jsx("button",{onClick:()=>b(C.id,k),className:"px-2 py-2 text-red-600 hover:text-red-800",children:m.jsx(Fm,{className:"h-4 w-4"})})]},k)),m.jsxs("button",{onClick:()=>y(C.id),className:"text-blue-600 hover:text-blue-800 text-sm flex items-center gap-1",children:[m.jsx(ZL,{className:"h-4 w-4"}),"Add Benefit"]})]})]})]}),m.jsx("button",{onClick:()=>f(C.id),className:"ml-4 text-red-600 hover:text-red-800",children:m.jsx(Fm,{className:"h-5 w-5"})})]}),m.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[m.jsxs("span",{children:["Available: ",C.capacity-C.soldCount," / ",C.capacity]}),m.jsxs("span",{children:["Price: ",(C.price/100).toFixed(2)]}),C.originalPrice&&C.originalPrice>C.price&&m.jsxs("span",{className:"line-through text-gray-400",children:["",(C.originalPrice/100).toFixed(2)]}),m.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[C.capacity-C.soldCount<=0&&m.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-red-100 text-red-700",children:"Sold out by capacity"}),m.jsxs("label",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"checkbox",checked:C.isActive===!1,disabled:C.capacity-C.soldCount<=0,onChange:_=>x(C.id,{isActive:!_.target.checked})}),m.jsx("span",{children:"Mark as sold out (disable sales)"})]})]})]})]},C.id))}),m.jsxs("div",{className:"flex justify-end gap-4 mt-6 pt-6 border-t",children:[m.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),m.jsx("button",{onClick:P,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Save Changes"})]})]})]})})},kD=({event:e,onClose:t})=>{const{addEvent:n,updateEvent:r}=So(),[i,s]=me.useState(!1),[o,u]=me.useState((e==null?void 0:e.ticketTiers)||[]),{register:d,handleSubmit:f,reset:x,formState:{errors:y}}=g6();me.useEffect(()=>{e&&x({title:e.title,date:e.date,time:e.time,venue:e.venue,description:e.description,capacity:e.capacity,tags:e.tags.join(", "),gradient:e.gradient,image:e.image,bookingUrl:e.bookingUrl})},[e,x]);const A=I=>{console.log("Form submitted with ticket tiers:",o);const j=o.map(M=>({...M,eventId:(e==null?void 0:e.id)||"new_event"})),C=j.filter(M=>M.isActive!==!1&&typeof M.price=="number"),_=C.length>0?Math.min(...C.map(M=>M.price)):0,k=_>0?`From ${(_/100).toFixed(0)}`:"Free",R={...I,price:k,ticketTiers:j};console.log("Final event data to save:",R),e?r(e.id,R):n(R),t()},b=I=>{console.log("Ticket tiers saved in EventForm:",I),u(I),s(!1)},P=[{value:"from-gray-600 to-gray-800",label:"Gray"},{value:"from-gray-700 to-gray-900",label:"Dark Gray"},{value:"from-gray-800 to-black",label:"Black"},{value:"from-gray-500 to-gray-700",label:"Light Gray"},{value:"from-blue-600 to-blue-800",label:"Blue"},{value:"from-green-600 to-green-800",label:"Green"},{value:"from-purple-600 to-purple-800",label:"Purple"},{value:"from-red-600 to-red-800",label:"Red"}];return m.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:t,children:[m.jsxs(lt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:I=>I.stopPropagation(),children:[m.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:e?"Edit Event":"Add New Event"}),m.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:m.jsx(Ic,{className:"h-6 w-6"})})]}),m.jsxs("form",{onSubmit:f(A),className:"p-6 space-y-6",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"md:col-span-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Title"}),m.jsx("input",{...d("title",{required:"Title is required"}),type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent",placeholder:"Enter event title"}),y.title&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.title.message})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[m.jsx(is,{className:"inline h-4 w-4 mr-1"}),"Date"]}),m.jsx("input",{...d("date",{required:"Date is required"}),type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent",placeholder:"e.g., Dec 15, 2024"}),y.date&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.date.message})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[m.jsx(Va,{className:"inline h-4 w-4 mr-1"}),"Time"]}),m.jsx("input",{...d("time",{required:"Time is required"}),type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent",placeholder:"e.g., 7:00 PM"}),y.time&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.time.message})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[m.jsx(Sc,{className:"inline h-4 w-4 mr-1"}),"Venue"]}),m.jsx("input",{...d("venue",{required:"Venue is required"}),type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent",placeholder:"Enter venue name"}),y.venue&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.venue.message})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[m.jsx(Es,{className:"inline h-4 w-4 mr-1"}),"Capacity"]}),m.jsx("input",{...d("capacity",{required:"Capacity is required"}),type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent",placeholder:"e.g., 200"}),y.capacity&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.capacity.message})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[m.jsx(eP,{className:"inline h-4 w-4 mr-1"}),"Tags (comma-separated)"]}),m.jsx("input",{...d("tags",{required:"Tags are required"}),type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent",placeholder:"e.g., Corporate, Networking, Formal"}),y.tags&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.tags.message})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color Theme"}),m.jsx("select",{...d("gradient",{required:"Gradient is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent",children:P.map(I=>m.jsx("option",{value:I.value,children:I.label},I.value))}),y.gradient&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.gradient.message})]}),m.jsxs("div",{className:"md:col-span-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Image URL"}),m.jsx("input",{...d("image",{required:"Image URL is required",pattern:{value:/^https?:\/\/.+/,message:"Please enter a valid URL starting with http:// or https://"}}),type:"url",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent",placeholder:"https://images.unsplash.com/photo-..."}),y.image&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.image.message}),m.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Tip: You can use Picsum URLs like https://picsum.photos/800/600?random=1 or Unsplash URLs"})]}),m.jsxs("div",{className:"md:col-span-2",children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ticket Tiers"}),m.jsxs("button",{type:"button",onClick:()=>s(!0),className:"flex items-center gap-2 px-3 py-1 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[m.jsx(j1,{className:"h-4 w-4"}),"Manage Tiers"]})]}),o.length>0?m.jsx("div",{className:"space-y-2",children:o.sort((I,j)=>I.price-j.price).map(I=>m.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[m.jsxs("div",{children:[m.jsx("span",{className:"font-medium text-gray-900",children:I.name}),m.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:["",(I.price/100).toFixed(2)," - ",I.capacity," available"]})]}),m.jsxs("span",{className:"text-sm text-gray-500",children:[I.capacity-I.soldCount," left"]})]},I.id))}):m.jsx("p",{className:"text-sm text-gray-500",children:'No ticket tiers configured. Click "Manage Tiers" to add pricing options.'})]}),m.jsxs("div",{className:"md:col-span-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Booking URL (Optional - will be replaced by Stripe checkout)"}),m.jsx("input",{...d("bookingUrl"),type:"url",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent",placeholder:"https://example.com/book/event (optional)"}),y.bookingUrl&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.bookingUrl.message})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),m.jsx("textarea",{...d("description",{required:"Description is required"}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent",placeholder:"Enter event description"}),y.description&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.description.message})]}),m.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[m.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Cancel"}),m.jsx("button",{type:"submit",className:"px-4 py-2 bg-gray-900 hover:bg-gray-800 text-white rounded-md transition-colors",children:e?"Update Event":"Create Event"})]})]})]},(e==null?void 0:e.id)||"new-event"),i&&m.jsx(ID,{ticketTiers:o,eventId:(e==null?void 0:e.id)||"new_event",onSave:b,onClose:()=>s(!1)})]})},LD=({selectedTimeframe:e,selectedEvent:t,events:n,activeTab:r,onTimeframeChange:i,onEventChange:s,onTabChange:o,onRefresh:u})=>m.jsx("div",{className:"bg-white shadow-sm border-b",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),m.jsx("p",{className:"text-gray-600 mt-1",children:"Manage analytics, events, orders, and scan tickets"})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("select",{value:e,onChange:d=>i(d.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[m.jsx("option",{value:"7d",children:"Last 7 days"}),m.jsx("option",{value:"30d",children:"Last 30 days"}),m.jsx("option",{value:"90d",children:"Last 90 days"})]}),m.jsxs("select",{value:t,onChange:d=>s(d.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[m.jsx("option",{value:"all",children:"All Events"}),n==null?void 0:n.map(d=>m.jsx("option",{value:d.id,children:d.title},d.id))]}),m.jsx("button",{onClick:u,className:"p-2 text-gray-500 hover:text-gray-700 transition-colors",children:m.jsx(JL,{className:"h-5 w-5"})})]})]}),m.jsxs("div",{className:"mt-6 flex items-center gap-2",children:[m.jsx("button",{onClick:()=>o("analytics"),className:`px-4 py-2 rounded-lg text-sm font-medium border ${r==="analytics"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"Analytics"}),m.jsx("button",{onClick:()=>o("events"),className:`px-4 py-2 rounded-lg text-sm font-medium border ${r==="events"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"Event Management"}),m.jsx("button",{onClick:()=>o("orders"),className:`px-4 py-2 rounded-lg text-sm font-medium border ${r==="orders"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"Orders"})]})]})}),PD=({stats:e,onExportAll:t,quickEventButtons:n})=>{const r=C=>`${(C/100).toFixed(2)}`,i=C=>`${C.toFixed(1)}%`;if(!e)return null;const s=(C,_)=>_===0?C>0?100:0:(C-_)/_*100,o=Math.floor(e.totalRevenue*(.7+Math.random()*.3)),u=Math.floor(e.totalOrders*(.6+Math.random()*.4)),d=Math.floor(e.totalTickets*(.65+Math.random()*.35)),f=e.conversionRate*(.8+Math.random()*.2),x=s(e.totalRevenue,o),y=s(e.totalOrders,u),A=s(e.totalTickets,d),b=s(e.conversionRate,f),P=C=>C>=15?"text-green-600 bg-green-100 border-green-200":C>=5?"text-blue-600 bg-blue-100 border-blue-200":C>=0?"text-yellow-600 bg-yellow-100 border-yellow-200":"text-red-600 bg-red-100 border-red-200",I=C=>C>=0?m.jsx(Qw,{className:"h-4 w-4 text-green-500 mr-1"}):m.jsx(Qw,{className:"h-4 w-4 text-red-500 mr-1 transform rotate-90"}),j=C=>C>=15?"Excellent Growth":C>=5?"Good Growth":C>=0?"Stable":"Declining";return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("div",{className:"flex items-center gap-2",children:n}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("button",{onClick:()=>window.location.href="/scanner",className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors shadow-sm",children:[m.jsx(QL,{className:"h-4 w-4"}),"Ticket Scanner"]}),m.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors shadow-sm",children:[m.jsx(Dx,{className:"h-4 w-4"}),"Export Customer Data"]})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[m.jsxs(lt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),m.jsx("p",{className:"text-3xl font-bold text-gray-900",children:r(e.totalRevenue)})]}),m.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:m.jsx(Rm,{className:"h-6 w-6 text-green-600"})})]}),m.jsxs("div",{className:"flex items-center mt-4 text-sm",children:[I(x),m.jsxs("span",{className:`font-medium px-2 py-1 rounded-full text-xs border ${P(x)}`,children:[x>=0?"+":"",i(x)]}),m.jsx("span",{className:"text-gray-500 ml-2",children:"from last period"})]}),m.jsx("div",{className:"mt-2",children:m.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${x>=15?"bg-green-100 text-green-800 border-green-200":x>=5?"bg-blue-100 text-blue-800 border-blue-200":x>=0?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-red-100 text-red-800 border-red-200"}`,children:j(x)})})]}),m.jsxs(lt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),m.jsx("p",{className:"text-3xl font-bold text-gray-900",children:e.totalOrders})]}),m.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:m.jsx(j1,{className:"h-6 w-6 text-blue-600"})})]}),m.jsxs("div",{className:"flex items-center mt-4 text-sm",children:[I(y),m.jsxs("span",{className:`font-medium px-2 py-1 rounded-full text-xs border ${P(y)}`,children:[y>=0?"+":"",i(y)]}),m.jsx("span",{className:"text-gray-500 ml-2",children:"from last period"})]}),m.jsx("div",{className:"mt-2",children:m.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${y>=15?"bg-green-100 text-green-800 border-green-200":y>=5?"bg-blue-100 text-blue-800 border-blue-200":y>=0?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-red-100 text-red-800 border-red-200"}`,children:j(y)})})]}),m.jsxs(lt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tickets Sold"}),m.jsx("p",{className:"text-3xl font-bold text-gray-900",children:e.totalTickets})]}),m.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:m.jsx(Es,{className:"h-6 w-6 text-purple-600"})})]}),m.jsxs("div",{className:"flex items-center mt-4 text-sm",children:[I(A),m.jsxs("span",{className:`font-medium px-2 py-1 rounded-full text-xs border ${P(A)}`,children:[A>=0?"+":"",i(A)]}),m.jsx("span",{className:"text-gray-500 ml-2",children:"from last period"})]}),m.jsx("div",{className:"mt-2",children:m.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${A>=15?"bg-green-100 text-green-800 border-green-200":A>=5?"bg-blue-100 text-blue-800 border-blue-200":A>=0?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-red-100 text-red-800 border-red-200"}`,children:j(A)})})]}),m.jsxs(lt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Conversion Rate"}),m.jsx("p",{className:"text-3xl font-bold text-gray-900",children:i(e.conversionRate)})]}),m.jsx("div",{className:"p-3 bg-orange-100 rounded-full",children:m.jsx(qd,{className:"h-6 w-6 text-orange-600"})})]}),m.jsxs("div",{className:"flex items-center mt-4 text-sm",children:[I(b),m.jsxs("span",{className:`font-medium px-2 py-1 rounded-full text-xs border ${P(b)}`,children:[b>=0?"+":"",i(b)]}),m.jsx("span",{className:"text-gray-500 ml-2",children:"from last period"})]}),m.jsx("div",{className:"mt-2",children:m.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${b>=15?"bg-green-100 text-green-800 border-green-200":b>=5?"bg-blue-100 text-blue-800 border-blue-200":b>=0?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-red-100 text-red-800 border-red-200"}`,children:j(b)})})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs(lt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Performance Insights"}),m.jsx("div",{className:"flex gap-2",children:m.jsx("span",{className:"px-3 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full border border-green-200",children:e.topPerformingEvent?"Top Event":"No Data"})})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm text-gray-600",children:"Average Order Value"}),m.jsx("span",{className:"text-sm font-medium text-gray-900",children:r(e.averageOrderValue)})]}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm text-gray-600",children:"Revenue per Ticket"}),m.jsx("span",{className:"text-sm font-medium text-gray-900",children:r(e.totalRevenue/Math.max(1,e.totalTickets))})]}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm text-gray-600",children:"Orders per Day"}),m.jsx("span",{className:"text-sm font-medium text-gray-900",children:(e.totalOrders/30).toFixed(1)})]})]})]}),m.jsxs(lt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Customer Insights"}),m.jsx("div",{className:"flex gap-2",children:m.jsx("span",{className:"px-3 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full border border-blue-200",children:e.totalOrders>0?"Active":"No Orders"})})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm text-gray-600",children:"Events with Sales"}),m.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.revenueByEvent.filter(C=>C.revenue>0).length})]}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm text-gray-600",children:"Top Tier Sales"}),m.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.ticketSalesByTier.length>0?e.ticketSalesByTier[0].tier:"N/A"})]}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm text-gray-600",children:"Daily Revenue Avg"}),m.jsx("span",{className:"text-sm font-medium text-gray-900",children:r(e.dailyRevenue.reduce((C,_)=>C+_.revenue,0)/Math.max(1,e.dailyRevenue.length))})]})]})]})]})]})},jD=({stats:e,events:t})=>{var A,b;const n=P=>`${(P/100).toFixed(2)}`;if(!e||!t)return null;const r=()=>{const P=new Date,I=new Date(P.getTime()+7*24*60*60*1e3);return t.filter(j=>!j.isArchived).filter(j=>{const C=new Date(j.date);return C>=P&&C<=I}).sort((j,C)=>new Date(j.date).getTime()-new Date(C.date).getTime()).slice(0,3)},i=()=>{const P=t.filter(C=>!C.isArchived);if(P.length===0)return 0;const I=P.reduce((C,_)=>C+(parseInt(_.capacity)||0),0),j=e.ticketSalesByTier.reduce((C,_)=>C+_.sold,0);return I>0?j/I*100:0},s=()=>e.ticketSalesByTier.length===0?null:e.ticketSalesByTier.sort((P,I)=>I.sold-P.sold)[0],o=()=>{const P=r();if(P.length===0)return{score:0,label:"No Events",color:"gray"};const I=i(),j=P.map(R=>{const M=new Date(R.date),ne=new Date;return Math.ceil((M.getTime()-ne.getTime())/(1e3*60*60*24))});let C=0;I>=80?C+=40:I>=60?C+=30:I>=40?C+=20:C+=10;const _=j.reduce((R,M)=>R+M,0)/j.length;_<=3?C+=30:_<=7?C+=25:_<=14?C+=20:C+=15;const k=e.dailyRevenue.slice(-7).reduce((R,M)=>R+M.revenue,0);return k>=1e4?C+=30:k>=5e3?C+=25:k>=1e3?C+=20:C+=10,C>=80?{score:C,label:"Excellent",color:"green"}:C>=60?{score:C,label:"Good",color:"blue"}:C>=40?{score:C,label:"Fair",color:"yellow"}:{score:C,label:"Needs Attention",color:"red"}},u=r(),d=i(),f=s(),x=o(),y=P=>{switch(P){case"green":return m.jsx(bo,{className:"h-5 w-5 text-green-600"});case"blue":return m.jsx(qd,{className:"h-5 w-5 text-blue-600"});case"yellow":return m.jsx(Dm,{className:"h-5 w-5 text-yellow-600"});case"red":return m.jsx(Dm,{className:"h-5 w-5 text-red-600"});default:return m.jsx(Va,{className:"h-5 w-5 text-gray-600"})}};return m.jsx("div",{className:"space-y-8",children:m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8 mb-8",children:[m.jsxs(lt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Event Performance"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(is,{className:"h-5 w-5 text-blue-600"}),m.jsx("span",{className:"px-3 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full border border-blue-200",children:"Live Data"})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-100",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[m.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:m.jsx(is,{className:"h-4 w-4 text-blue-600"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Upcoming Events"}),m.jsx("p",{className:"text-xs text-gray-500",children:"Next 7 days"})]})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-2xl font-bold text-blue-900",children:u.length}),u.length>0&&m.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[(b=(A=u[0])==null?void 0:A.title)==null?void 0:b.slice(0,15),"..."]})]})]}),m.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-100",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[m.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:m.jsx(Es,{className:"h-4 w-4 text-green-600"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Capacity"}),m.jsx("p",{className:"text-xs text-gray-500",children:"Utilization"})]})]}),m.jsxs("div",{className:"text-center",children:[m.jsxs("p",{className:"text-2xl font-bold text-green-900",children:[d.toFixed(0),"%"]}),m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1 mt-2",children:m.jsx("div",{className:"bg-gradient-to-r from-green-400 to-green-600 h-1 rounded-full transition-all duration-300",style:{width:`${Math.min(d,100)}%`}})})]})]}),m.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-100",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[m.jsx("div",{className:"p-2 bg-purple-100 rounded-full",children:m.jsx(Bm,{className:"h-4 w-4 text-purple-600"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Best Selling"}),m.jsx("p",{className:"text-xs text-gray-500",children:"Ticket Tier"})]})]}),m.jsx("div",{className:"text-center",children:f?m.jsxs(m.Fragment,{children:[m.jsx("p",{className:"text-lg font-bold text-purple-900",children:f.tier.split(" - ")[1]}),m.jsxs("p",{className:"text-xs text-purple-600 mt-1",children:[f.sold," sold"]})]}):m.jsx("p",{className:"text-lg font-bold text-gray-400",children:"No sales yet"})})]}),m.jsxs("div",{className:"p-4 bg-orange-50 rounded-lg border border-orange-100",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[m.jsx("div",{className:"p-2 bg-orange-100 rounded-full",children:y(x.color)}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Event Health"}),m.jsx("p",{className:"text-xs text-gray-500",children:"Score"})]})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-lg font-bold text-orange-900",children:x.label}),m.jsxs("p",{className:"text-xs text-orange-600 mt-1",children:[x.score,"/100"]})]})]})]}),m.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100",children:m.jsxs("div",{className:"flex gap-2 justify-center",children:[m.jsxs("span",{className:`px-3 py-1 text-xs font-medium rounded-full border ${d>=80?"bg-green-100 text-green-800 border-green-200":d>=60?"bg-blue-100 text-blue-800 border-blue-200":d>=40?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-red-100 text-red-800 border-red-200"}`,children:[d.toFixed(0),"% Capacity Filled"]}),m.jsxs("span",{className:"px-3 py-1 text-xs font-medium bg-purple-100 text-purple-800 rounded-full border border-purple-200",children:[e.ticketSalesByTier.filter(P=>P.revenue>0).length," Active Tiers"]})]})})]}),m.jsxs(lt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.6},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Business Insights"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(qd,{className:"h-5 w-5 text-gray-400"}),m.jsx("span",{className:"px-3 py-1 text-xs font-medium bg-indigo-100 text-indigo-800 rounded-full border border-indigo-200",children:"Live Data"})]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-100",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:m.jsx(Es,{className:"h-5 w-5 text-blue-600"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Customer Acquisition"}),m.jsx("p",{className:"text-xs text-gray-500",children:"Last 30 days"})]})]}),m.jsxs("div",{className:"text-right",children:[m.jsx("p",{className:"text-lg font-bold text-blue-900",children:e.ticketSalesByTier.reduce((P,I)=>P+I.sold,0)}),m.jsx("p",{className:"text-xs text-blue-600",children:"New customers"})]})]})}),m.jsx("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-100",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:m.jsx(qd,{className:"h-5 w-5 text-green-600"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Revenue per Customer"}),m.jsx("p",{className:"text-xs text-gray-500",children:"Average"})]})]}),m.jsxs("div",{className:"text-right",children:[m.jsx("p",{className:"text-lg font-bold text-green-900",children:n(e.ticketSalesByTier.reduce((P,I)=>P+I.revenue,0)/Math.max(1,e.ticketSalesByTier.reduce((P,I)=>P+I.sold,0)))}),m.jsx("p",{className:"text-xs text-green-600",children:"Per customer"})]})]})}),m.jsx("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg border border-purple-100",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"p-2 bg-purple-100 rounded-full",children:m.jsx(is,{className:"h-5 w-5 text-purple-600"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Event Performance"}),m.jsx("p",{className:"text-xs text-gray-500",children:"Success Rate"})]})]}),m.jsxs("div",{className:"text-right",children:[m.jsxs("p",{className:"text-lg font-bold text-purple-900",children:[e.revenueByEvent.filter(P=>P.revenue>0).length,"/",e.revenueByEvent.length]}),m.jsx("p",{className:"text-xs text-purple-600",children:"Events with sales"})]})]})})]})]})]})})},OD=({currentEvents:e,archivedEvents:t,onAddEvent:n,onEditEvent:r,onArchiveToggle:i,onDeleteEvent:s,onGuestlist:o})=>{const u=(d,f=!1)=>m.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"w-full",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Event"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Venue"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tiers"}),m.jsx("th",{className:"px-6 py-3"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(x=>{var y;return m.jsxs("tr",{className:"hover:bg-gray-50",children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("div",{className:"text-sm font-medium text-gray-900 truncate max-w-[220px]",children:x.title})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:x.date}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 truncate max-w-[180px]",children:x.venue}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((y=x.ticketTiers)==null?void 0:y.length)||0}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:m.jsxs("div",{className:"flex items-center justify-end gap-2",children:[m.jsxs("button",{onClick:()=>o(x),className:"px-3 py-1 rounded-md border border-blue-200 text-blue-700 hover:bg-blue-50 flex items-center gap-1",children:[m.jsx(Es,{className:"h-4 w-4"}),"Guestlist"]}),m.jsx("button",{onClick:()=>r(x),className:"px-3 py-1 rounded-md border text-gray-700 hover:bg-gray-50",children:"Edit"}),m.jsx("button",{onClick:()=>i(x),className:"px-3 py-1 rounded-md border text-gray-700 hover:bg-gray-50",children:f?"Unarchive":"Archive"}),f&&m.jsx("button",{onClick:()=>s(x),className:"px-3 py-1 rounded-md border border-red-200 text-red-700 hover:bg-red-50",children:"Delete"})]})})]},x.id)})})]})})});return m.jsxs("div",{className:"space-y-10",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Manage Events"}),m.jsx("button",{onClick:n,className:"px-4 py-2 bg-gray-900 hover:bg-gray-800 text-white rounded-md text-sm",children:"Add Event"})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h4",{className:"text-md font-semibold text-gray-800",children:"Current Events"}),m.jsxs("span",{className:"text-sm text-gray-500",children:[e.length," events"]})]}),u(e,!1)]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h4",{className:"text-md font-semibold text-gray-800",children:"Archived Events"}),m.jsxs("span",{className:"text-sm text-gray-500",children:[t.length," events"]})]}),u(t,!0)]})]})},DD=({orders:e,events:t})=>{const[n,r]=me.useState(""),[i,s]=me.useState(10),[o,u]=me.useState(1),d=C=>`${(C/100).toFixed(2)}`,f=C=>{if(!C.scans||C.scans.length===0)return{text:"Not Scanned",color:"text-gray-500",icon:Va};const _=C.scans.filter(M=>M.scanType==="entry"),k=C.scans.filter(M=>M.scanType==="exit"),R=C.scans[0];return _.length>0&&k.length>0?{text:"Scanned In & Out",color:"text-blue-600",icon:bo,time:new Date(R.scannedAt).toLocaleTimeString()}:_.length>0?{text:"Scanned In",color:"text-green-600",icon:bo,time:new Date(R.scannedAt).toLocaleTimeString()}:k.length>0?{text:"Scanned Out",color:"text-orange-600",icon:G0,time:new Date(R.scannedAt).toLocaleTimeString()}:{text:"Not Scanned",color:"text-gray-500",icon:Va}},x=e.filter(C=>{var k,R,M,ne,U;if(!n.trim())return!0;const _=n.toLowerCase();return((k=C.customerName)==null?void 0:k.toLowerCase().includes(_))||((R=C.customerEmail)==null?void 0:R.toLowerCase().includes(_))||((M=C.id)==null?void 0:M.toLowerCase().includes(_))||((U=(ne=t==null?void 0:t.find(K=>K.id===C.eventId))==null?void 0:ne.title)==null?void 0:U.toLowerCase().includes(_))}),y=Math.ceil(x.length/i),A=(o-1)*i,b=A+i,P=x.slice(A,b),I=C=>{u(C)},j=C=>{s(C),u(1)};return!e||e.length===0?m.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 text-center",children:m.jsx("p",{className:"text-gray-500",children:"No orders to display"})}):m.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[m.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"All Orders"}),m.jsx("div",{className:"flex items-center gap-3",children:m.jsxs("div",{className:"relative",children:[m.jsx(LS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),m.jsx("input",{type:"text",placeholder:"Search orders...",value:n,onChange:C=>{r(C.target.value),u(1)},className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-64"})]})})]})}),m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"w-full",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Event"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tickets"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Scan Status"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:P.map(C=>{var R,M,ne;const _=f(C),k=_.icon;return m.jsxs("tr",{className:"hover:bg-gray-50",children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsxs("span",{className:"text-sm font-medium text-gray-900 font-mono",children:[(R=C.id)==null?void 0:R.slice(0,8),"..."]})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsxs("div",{children:[m.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.customerName}),m.jsx("div",{className:"text-sm text-gray-500",children:C.customerEmail})]})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:((M=t==null?void 0:t.find(U=>U.id===C.eventId))==null?void 0:M.title)||"Unknown Event"}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:((ne=C.tickets)==null?void 0:ne.reduce((U,K)=>U+(K.quantity||0),0))||0}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:d(C.totalAmount||0)}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${C.status==="completed"?"bg-green-100 text-green-800":C.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:C.status})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsxs("div",{className:"flex flex-col gap-1",children:[m.jsxs("div",{className:`flex items-center gap-1 ${_.color}`,children:[m.jsx(k,{className:"h-4 w-4"}),m.jsx("span",{className:"text-xs font-medium",children:_.text})]}),_.time&&m.jsx("span",{className:"text-xs text-gray-500",children:_.time})]})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(C.createdAt).toLocaleDateString()})]},C.id)})})]})}),m.jsx("div",{className:"px-6 py-4 border-t border-gray-100",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("label",{className:"text-sm text-gray-600",children:"Show:"}),m.jsxs("select",{value:i,onChange:C=>j(Number(C.target.value)),className:"px-3 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[m.jsx("option",{value:5,children:"5"}),m.jsx("option",{value:10,children:"10"}),m.jsx("option",{value:25,children:"25"}),m.jsx("option",{value:50,children:"50"})]}),m.jsx("span",{className:"text-sm text-gray-600",children:"records"})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",A+1," to ",Math.min(b,x.length)," of ",x.length," results",n&&m.jsxs("span",{className:"ml-2 text-blue-600",children:["(filtered from ",e.length," total)"]})]}),y>1&&m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:()=>I(o-1),disabled:o===1,className:"px-3 py-1 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),m.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:y},(C,_)=>_+1).map(C=>m.jsx("button",{onClick:()=>I(C),className:`px-3 py-1 text-sm font-medium rounded-md ${C===o?"bg-blue-600 text-white":"text-gray-500 bg-white border border-gray-300 hover:bg-gray-50"}`,children:C},C))}),m.jsx("button",{onClick:()=>I(o+1),disabled:o===y,className:"px-3 py-1 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})})]})},RD=({orders:e,events:t})=>{const n=r=>`${(r/100).toFixed(2)}`;return!e||e.length===0?m.jsx(lt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 text-center",children:m.jsx("p",{className:"text-gray-500",children:"No recent orders to display"})}):m.jsxs(lt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[m.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:m.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Orders"})}),m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"w-full",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),m.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),m.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Event"}),m.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),m.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),m.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(r=>{var i,s;return m.jsxs("tr",{className:"hover:bg-gray-50",children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:m.jsxs("span",{className:"text-sm font-medium text-gray-900 font-mono",children:[(i=r.id)==null?void 0:i.slice(0,8),"..."]})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:m.jsxs("div",{children:[m.jsx("div",{className:"text-sm font-medium text-gray-900",children:r.customerName}),m.jsx("div",{className:"text-sm text-gray-500",children:r.customerEmail})]})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:m.jsx("span",{className:"text-sm text-gray-900",children:((s=t==null?void 0:t.find(o=>o.id===r.eventId))==null?void 0:s.title)||"Unknown Event"})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:m.jsx("span",{className:"text-sm font-semibold text-gray-900",children:n(r.totalAmount||0)})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:m.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${r.status==="completed"?"bg-green-100 text-green-800":r.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:r.status})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center",children:new Date(r.createdAt).toLocaleDateString()})]},r.id)})})]})})]})},MD=({creatingEvents:e,onCreateEvent:t})=>m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:()=>t("sundowner"),disabled:e.includes("sundowner"),className:"px-3 py-2 bg-gradient-to-r from-orange-400 to-red-500 text-white text-sm font-medium rounded-lg hover:from-orange-500 hover:to-red-600 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:e.includes("sundowner")?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Creating..."]}):m.jsx(m.Fragment,{children:" Add Sundowner"})}),m.jsx("button",{onClick:()=>t("bollywood"),disabled:e.includes("bollywood"),className:"px-3 py-2 bg-gradient-to-r from-purple-400 to-pink-500 text-white text-sm font-medium rounded-lg hover:from-purple-500 hover:to-pink-600 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:e.includes("bollywood")?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Creating..."]}):m.jsx(m.Fragment,{children:" Add Bollywood Night"})}),m.jsx("button",{onClick:()=>t("carnival"),disabled:e.includes("carnival"),className:"px-3 py-2 bg-gradient-to-r from-green-400 to-blue-500 text-white text-sm font-medium rounded-lg hover:from-green-500 hover:to-blue-600 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:e.includes("carnival")?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Creating..."]}):m.jsx(m.Fragment,{children:" Add Carnival"})})]}),BD=({confirm:e,onClose:t,onConfirm:n})=>e?m.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:t,children:m.jsxs("div",{className:"bg-white rounded-xl w-full max-w-md p-6 text-center",onClick:r=>r.stopPropagation(),children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.type==="delete"?"Delete Event":e.event.isArchived?"Unarchive Event":"Archive Event"}),m.jsx("p",{className:"text-sm text-gray-600 mb-6",children:e.type==="delete"?"This will permanently delete the event and related data (if archived). This action cannot be undone.":e.event.isArchived?"This will unarchive the event and make it visible again.":"This will archive the event and hide it from public view."}),m.jsxs("div",{className:"flex items-center justify-center gap-3",children:[m.jsx("button",{onClick:t,className:"px-4 py-2 rounded-md border text-gray-700",children:"Cancel"}),m.jsx("button",{onClick:n,className:`px-4 py-2 rounded-md text-white ${e.type==="delete"?"bg-red-600 hover:bg-red-700":"bg-gray-900 hover:bg-gray-800"}`,children:e.type==="delete"?"Delete":e.event.isArchived?"Unarchive":"Archive"})]})]})}):null,FD=({events:e,orders:t,selectedEvent:n,onExportEventData:r})=>{var q;const[i,s]=me.useState(1),[o,u]=me.useState(5),[d,f]=me.useState(""),x=X=>`${(X/100).toFixed(2)}`,y=X=>`${X.toFixed(1)}%`,A=e.find(X=>X.id===n);if(!A)return null;const b=t.filter(X=>X.eventId===n),P=b.filter(X=>{var J,pe,ge;if(!d.trim())return!0;const Q=d.toLowerCase();return((J=X.customerName)==null?void 0:J.toLowerCase().includes(Q))||((pe=X.customerEmail)==null?void 0:pe.toLowerCase().includes(Q))||((ge=X.id)==null?void 0:ge.toLowerCase().includes(Q))}),I=X=>{if(!X.scans||X.scans.length===0)return{text:"Not Scanned",color:"text-gray-500",icon:Va};const Q=X.scans.filter(ge=>ge.scanType==="entry"),J=X.scans.filter(ge=>ge.scanType==="exit"),pe=X.scans[0];return Q.length>0&&J.length>0?{text:"Scanned In & Out",color:"text-blue-600",icon:bo,time:new Date(pe.scannedAt).toLocaleTimeString()}:Q.length>0?{text:"Scanned In",color:"text-green-600",icon:bo,time:new Date(pe.scannedAt).toLocaleTimeString()}:J.length>0?{text:"Scanned Out",color:"text-orange-600",icon:G0,time:new Date(pe.scannedAt).toLocaleTimeString()}:{text:"Not Scanned",color:"text-gray-500",icon:Va}},j={totalRevenue:b.reduce((X,Q)=>X+(Q.totalAmount||0),0),totalOrders:b.length,totalTickets:b.reduce((X,Q)=>{var J;return X+(((J=Q.tickets)==null?void 0:J.reduce((pe,ge)=>pe+(ge.quantity||0),0))||0)},0),capacity:parseInt(A.capacity||"0"),utilizationRate:parseInt(A.capacity||"0")>0?b.reduce((X,Q)=>{var J;return X+(((J=Q.tickets)==null?void 0:J.reduce((pe,ge)=>pe+(ge.quantity||0),0))||0)},0)/parseInt(A.capacity||"0")*100:0},C=((q=A.ticketTiers)==null?void 0:q.map(X=>{const Q=b.filter(ge=>{var ue;return(ue=ge.tickets)==null?void 0:ue.some(Se=>Se.ticketTierId===X.id)}),J=Q.reduce((ge,ue)=>{var _e;const Se=((_e=ue.tickets)==null?void 0:_e.filter(Me=>Me.ticketTierId===X.id))||[];return ge+Se.reduce((Me,V)=>Me+(V.totalPrice||0),0)},0),pe=Q.reduce((ge,ue)=>{var _e;const Se=((_e=ue.tickets)==null?void 0:_e.filter(Me=>Me.ticketTierId===X.id))||[];return ge+Se.reduce((Me,V)=>Me+(V.quantity||0),0)},0);return{name:X.name,sold:pe,capacity:X.capacity,revenue:J,utilizationRate:X.capacity>0?pe/X.capacity*100:0,revenuePerTicket:pe>0?J/pe:0}}).sort((X,Q)=>Q.revenue-X.revenue))||[],_=X=>X>=80?"bg-green-100 text-green-800 border-green-200":X>=50?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-red-100 text-red-800 border-red-200",k=()=>{if(b.length===0)return{date:"N/A",revenue:0};const X=b.reduce((J,pe)=>{const ge=new Date(pe.createdAt).toDateString();return J[ge]=(J[ge]||0)+(pe.totalAmount||0),J},{}),Q=Object.entries(X).reduce((J,[pe,ge])=>ge>J.revenue?{date:pe,revenue:ge}:J,{date:"",revenue:0});return{date:Q.date?new Date(Q.date).toLocaleDateString("en-GB",{month:"short",day:"numeric"}):"N/A",revenue:Q.revenue}},R=()=>b.length===0?0:new Set(b.map(Q=>new Date(Q.createdAt).toDateString())).size,M=Math.ceil(P.length/o),ne=(i-1)*o,U=ne+o,K=P.slice(ne,U),te=X=>{s(X)},be=X=>{u(X),s(1)},$=()=>{const X=b.map(Q=>{var pe;return((pe=Q.tickets)==null?void 0:pe.map(ge=>{var Me,V;const ue=(Me=A.ticketTiers)==null?void 0:Me.find(se=>se.id===ge.ticketTierId),Se=I(Q),_e=Q.scans&&Q.scans.length>0?new Date(Q.scans[0].scannedAt).toLocaleString():"Never";return{"Order ID":((V=Q.id)==null?void 0:V.slice(0,8))||"N/A","Customer Name":Q.customerName||"N/A","Customer Email":Q.customerEmail||"N/A","Ticket Tier":(ue==null?void 0:ue.name)||"Unknown Tier",Quantity:ge.quantity||0,"Unit Price":ue?`${(ue.price/100).toFixed(2)}`:"N/A","Total Price":`${((ge.totalPrice||0)/100).toFixed(2)}`,"Order Status":Q.status||"N/A","Scan Status":Se.text,"Last Scan Time":_e,"Order Date":new Date(Q.createdAt).toLocaleDateString(),"Order Time":new Date(Q.createdAt).toLocaleTimeString()}}))||[]}).flat();if(X.length>0){const Q=["Order ID,Customer Name,Customer Email,Ticket Tier,Quantity,Unit Price,Total Price,Order Status,Scan Status,Last Scan Time,Order Date,Order Time",...X.map(ue=>`${ue["Order ID"]},${ue["Customer Name"]},${ue["Customer Email"]},${ue["Ticket Tier"]},${ue.Quantity},${ue["Unit Price"]},${ue["Total Price"]},${ue["Order Status"]},${ue["Scan Status"]},${ue["Last Scan Time"]},${ue["Order Date"]},${ue["Order Time"]}`)].join(`
`),J=new Blob([Q],{type:"text/csv;charset=utf-8;"}),pe=document.createElement("a"),ge=URL.createObjectURL(J);pe.setAttribute("href",ge),pe.setAttribute("download",`event-sales-${A.title.replace(/[^a-z0-9]/gi,"-").toLowerCase()}-${new Date().toISOString().split("T")[0]}.csv`),pe.style.visibility="hidden",document.body.appendChild(pe),pe.click(),document.body.removeChild(pe)}};return m.jsxs("div",{className:"space-y-8",children:[m.jsxs(lt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:"w-16 h-16 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:m.jsx(is,{className:"h-8 w-8 text-white"})}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:A.title}),m.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-600",children:[m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(is,{className:"h-4 w-4"}),m.jsx("span",{children:A.date})]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(Sc,{className:"h-4 w-4"}),m.jsx("span",{children:A.venue})]})]})]})]}),m.jsx("button",{onClick:()=>r(n),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors shadow-sm",children:"Export Event Data"})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("span",{className:"px-3 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full border border-green-200",children:"Active Sales"}),m.jsxs("span",{className:`px-3 py-1 text-xs font-medium rounded-full border ${_(j.utilizationRate)}`,children:[y(j.utilizationRate)," Capacity Used"]}),m.jsxs("span",{className:"px-3 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full border border-blue-200",children:[j.totalOrders," Orders"]})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[m.jsx(lt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),m.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x(j.totalRevenue)})]}),m.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:m.jsx(Rm,{className:"h-5 w-5 text-green-600"})})]})}),m.jsx(lt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tickets Sold"}),m.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j.totalTickets})]}),m.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:m.jsx(Es,{className:"h-5 w-5 text-blue-600"})})]})}),m.jsx(lt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Capacity Used"}),m.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y(j.utilizationRate)})]}),m.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:m.jsx(is,{className:"h-5 w-5 text-purple-600"})})]})}),m.jsx(lt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Performance"}),m.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j.utilizationRate>=80?"Excellent":j.utilizationRate>=50?"Good":j.utilizationRate>=20?"Fair":"Poor"})]}),m.jsx("div",{className:"p-3 bg-orange-100 rounded-full",children:m.jsx(Bm,{className:"h-5 w-5 text-orange-600"})})]})})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[m.jsxs(lt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Ticket Tier Performance"}),C.length>0?m.jsx("div",{className:"space-y-4",children:C.map((X,Q)=>m.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${Q===0?"bg-yellow-100 text-yellow-800 border border-yellow-200":Q===1?"bg-gray-100 text-gray-800 border border-gray-200":Q===2?"bg-orange-100 text-orange-800 border border-orange-200":"bg-blue-100 text-blue-800 border border-blue-200"}`,children:Q+1}),m.jsxs("div",{children:[m.jsx("span",{className:"text-sm font-medium text-gray-900",children:X.name}),m.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[m.jsxs("span",{className:"text-xs text-gray-500",children:[X.sold,"/",X.capacity," tickets"]}),m.jsxs("span",{className:`px-2 py-1 text-xs rounded-full border ${_(X.utilizationRate)}`,children:[y(X.utilizationRate)," full"]})]})]})]}),m.jsxs("div",{className:"text-right",children:[m.jsx("span",{className:"text-sm font-semibold text-gray-900",children:x(X.revenue)}),m.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[x(X.revenuePerTicket)," per ticket"]})]})]},Q))}):m.jsxs("div",{className:"text-center py-8 text-gray-500",children:[m.jsx(Bm,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),m.jsx("p",{children:"No tier data available"})]})]}),m.jsxs(lt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Event Insights"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(qd,{className:"h-5 w-5 text-gray-400"}),m.jsx("span",{className:"px-3 py-1 text-xs font-medium bg-indigo-100 text-indigo-800 rounded-full border border-indigo-200",children:"Analytics"})]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-100",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:m.jsx(Es,{className:"h-5 w-5 text-blue-600"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Average Order Value"}),m.jsx("p",{className:"text-xs text-gray-500",children:"Per transaction"})]})]}),m.jsxs("div",{className:"text-right",children:[m.jsx("p",{className:"text-lg font-bold text-blue-900",children:x(j.totalOrders>0?j.totalRevenue/j.totalOrders:0)}),m.jsx("p",{className:"text-xs text-blue-600",children:"Per order"})]})]})}),m.jsx("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-100",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:m.jsx(Rm,{className:"h-5 w-5 text-green-600"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Revenue per Ticket"}),m.jsx("p",{className:"text-xs text-gray-500",children:"Average"})]})]}),m.jsxs("div",{className:"text-right",children:[m.jsx("p",{className:"text-lg font-bold text-green-900",children:x(j.totalTickets>0?j.totalRevenue/j.totalTickets:0)}),m.jsx("p",{className:"text-xs text-green-600",children:"Per ticket"})]})]})}),m.jsx("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg border border-purple-100",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"p-2 bg-purple-100 rounded-full",children:m.jsx(is,{className:"h-5 w-5 text-purple-600"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Peak Sales Day"}),m.jsx("p",{className:"text-xs text-gray-500",children:"Best performance"})]})]}),m.jsxs("div",{className:"text-right",children:[m.jsx("p",{className:"text-lg font-bold text-purple-900",children:k().date}),m.jsx("p",{className:"text-xs text-purple-600",children:x(k().revenue)})]})]})})]}),m.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100",children:m.jsxs("div",{className:"flex gap-2 justify-center",children:[m.jsxs("span",{className:`px-3 py-1 text-xs font-medium rounded-full border ${R()>=20?"bg-green-100 text-green-800 border-green-200":R()>=15?"bg-blue-100 text-blue-800 border-blue-200":R()>=10?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-red-100 text-red-800 border-red-200"}`,children:[R()," Active Days"]}),m.jsxs("span",{className:"px-3 py-1 text-xs font-medium bg-orange-100 text-orange-800 rounded-full border border-orange-200",children:[C.filter(X=>X.revenue>0).length," Active Tiers"]})]})})]})]}),m.jsxs(lt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[m.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Event Orders"}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"relative",children:[m.jsx(LS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),m.jsx("input",{type:"text",placeholder:"Search orders...",value:d,onChange:X=>{f(X.target.value),s(1)},className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-64"})]}),m.jsxs("button",{onClick:$,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 transition-colors shadow-sm",children:[m.jsx(Dx,{className:"h-4 w-4"}),"Export Sales Info"]})]})]})}),K.length>0?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),m.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),m.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tickets"}),m.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),m.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),m.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Scan Status"}),m.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:K.map(X=>{var Q,J;return m.jsxs("tr",{className:"hover:bg-gray-50",children:[m.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-center",children:[(Q=X.id)==null?void 0:Q.slice(0,8),"..."]}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:m.jsxs("div",{children:[m.jsx("div",{className:"text-sm font-medium text-gray-900",children:X.customerName||"N/A"}),m.jsx("div",{className:"text-sm text-gray-500",children:X.customerEmail||"N/A"})]})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:m.jsx("div",{className:"space-y-1",children:(J=X.tickets)==null?void 0:J.map((pe,ge)=>{var Se;const ue=(Se=A.ticketTiers)==null?void 0:Se.find(_e=>_e.id===pe.ticketTierId);return m.jsxs("div",{className:"text-sm text-gray-900",children:[m.jsx("span",{className:"font-medium",children:(ue==null?void 0:ue.name)||"Unknown Tier"}),m.jsxs("span",{className:"text-gray-500 ml-2",children:["x",pe.quantity]})]},ge)})})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-center",children:x(X.totalAmount||0)}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:m.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${X.status==="completed"?"bg-green-100 text-green-800 border-green-200":X.status==="pending"?"bg-yellow-100 text-yellow-800 border-yellow-200":X.status==="failed"?"bg-red-100 text-red-800 border-red-200":"bg-gray-100 text-gray-800 border-gray-200"}`,children:X.status||"N/A"})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(()=>{const pe=I(X),ge=pe.icon;return m.jsxs("div",{className:"flex flex-col items-center gap-1",children:[m.jsxs("div",{className:`flex items-center gap-1 ${pe.color}`,children:[m.jsx(ge,{className:"h-4 w-4"}),m.jsx("span",{className:"text-xs font-medium",children:pe.text})]}),pe.time&&m.jsx("span",{className:"text-xs text-gray-500",children:pe.time})]})})()}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center",children:new Date(X.createdAt).toLocaleDateString()})]},X.id)})})]})}),m.jsx("div",{className:"px-6 py-4 border-t border-gray-100",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("label",{className:"text-sm text-gray-600",children:"Show:"}),m.jsxs("select",{value:o,onChange:X=>be(Number(X.target.value)),className:"px-3 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[m.jsx("option",{value:5,children:"5"}),m.jsx("option",{value:10,children:"10"}),m.jsx("option",{value:25,children:"25"}),m.jsx("option",{value:50,children:"50"})]}),m.jsx("span",{className:"text-sm text-gray-600",children:"records"})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",ne+1," to ",Math.min(U,P.length)," of ",P.length," results",d&&m.jsxs("span",{className:"ml-2 text-blue-600",children:["(filtered from ",b.length," total)"]})]}),M>1&&m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:()=>te(i-1),disabled:i===1,className:"px-3 py-1 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),m.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:M},(X,Q)=>Q+1).map(X=>m.jsx("button",{onClick:()=>te(X),className:`px-3 py-1 text-sm font-medium rounded-md ${X===i?"bg-blue-600 text-white":"text-gray-500 bg-white border border-gray-300 hover:bg-gray-50"}`,children:X},X))}),m.jsx("button",{onClick:()=>te(i+1),disabled:i===M,className:"px-3 py-1 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})})]}):m.jsxs("div",{className:"text-center py-8 text-gray-500",children:[m.jsx(Es,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),m.jsx("p",{children:"No orders found for this event"})]})]})]})};var At;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(At||(At={}));var D5=new Map([[At.QR_CODE,"QR_CODE"],[At.AZTEC,"AZTEC"],[At.CODABAR,"CODABAR"],[At.CODE_39,"CODE_39"],[At.CODE_93,"CODE_93"],[At.CODE_128,"CODE_128"],[At.DATA_MATRIX,"DATA_MATRIX"],[At.MAXICODE,"MAXICODE"],[At.ITF,"ITF"],[At.EAN_13,"EAN_13"],[At.EAN_8,"EAN_8"],[At.PDF_417,"PDF_417"],[At.RSS_14,"RSS_14"],[At.RSS_EXPANDED,"RSS_EXPANDED"],[At.UPC_A,"UPC_A"],[At.UPC_E,"UPC_E"],[At.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),R5;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(R5||(R5={}));function UD(e){return Object.values(At).includes(e)}var bl;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(bl||(bl={}));var da=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[bl.SCAN_TYPE_CAMERA,bl.SCAN_TYPE_FILE],e}(),m6=function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!D5.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,D5.get(t))},e}(),M5=function(){function e(){}return e.createFromText=function(t){var n={text:t};return{decodedText:t,result:n}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),Qm;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Qm||(Qm={}));var x6=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:Qm.UNKWOWN_ERROR}},e}(),y6=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||n===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function La(e){return typeof e>"u"||e===null}function VD(e,t,n){return e>n?n:e<t?t:e}var xu=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),_n=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(t){return"Last Match: ".concat(t)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),B5=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),v6=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if(typeof t!="object"){var r=typeof t;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],s=new Set(i),o=Object.keys(t),u=0,d=o;u<d.length;u++){var f=d[u];if(s.has(f))return n.logError("".concat(f," is not supported videoConstaints."),!0),!1}return!0},e}(),Jm={exports:{}};(function(e,t){(function(n,r){r(t)})(mi,function(n){function r(F){return F==null}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,a){F.__proto__=a}||function(F,a){for(var l in a)a.hasOwnProperty(l)&&(F[l]=a[l])};function s(F,a){i(F,a);function l(){this.constructor=F}F.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}function o(F,a){var l=Object.setPrototypeOf;l?l(F,a):F.__proto__=a}function u(F,a){a===void 0&&(a=F.constructor);var l=Error.captureStackTrace;l&&l(F,a)}var d=function(F){s(a,F);function a(l){var c=this.constructor,h=F.call(this,l)||this;return Object.defineProperty(h,"name",{value:c.name,enumerable:!1}),o(h,c.prototype),u(h),h}return a}(Error);class f extends d{constructor(a=void 0){super(a),this.message=a}getKind(){return this.constructor.kind}}f.kind="Exception";class x extends f{}x.kind="ArgumentException";class y extends f{}y.kind="IllegalArgumentException";class A{constructor(a){if(this.binarizer=a,a===null)throw new y("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(a,l){return this.binarizer.getBlackRow(a,l)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(a,l,c,h){const p=this.binarizer.getLuminanceSource().crop(a,l,c,h);return new A(this.binarizer.createBinarizer(p))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const a=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new A(this.binarizer.createBinarizer(a))}rotateCounterClockwise45(){const a=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new A(this.binarizer.createBinarizer(a))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class b extends f{static getChecksumInstance(){return new b}}b.kind="ChecksumException";class P{constructor(a){this.source=a}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class I{static arraycopy(a,l,c,h,p){for(;p--;)c[h++]=a[l++]}static currentTimeMillis(){return Date.now()}}class j extends f{}j.kind="IndexOutOfBoundsException";class C extends j{constructor(a=void 0,l=void 0){super(l),this.index=a,this.message=l}}C.kind="ArrayIndexOutOfBoundsException";class _{static fill(a,l){for(let c=0,h=a.length;c<h;c++)a[c]=l}static fillWithin(a,l,c,h){_.rangeCheck(a.length,l,c);for(let p=l;p<c;p++)a[p]=h}static rangeCheck(a,l,c){if(l>c)throw new y("fromIndex("+l+") > toIndex("+c+")");if(l<0)throw new C(l);if(c>a)throw new C(c)}static asList(...a){return a}static create(a,l,c){return Array.from({length:a}).map(p=>Array.from({length:l}).fill(c))}static createInt32Array(a,l,c){return Array.from({length:a}).map(p=>Int32Array.from({length:l}).fill(c))}static equals(a,l){if(!a||!l||!a.length||!l.length||a.length!==l.length)return!1;for(let c=0,h=a.length;c<h;c++)if(a[c]!==l[c])return!1;return!0}static hashCode(a){if(a===null)return 0;let l=1;for(const c of a)l=31*l+c;return l}static fillUint8Array(a,l){for(let c=0;c!==a.length;c++)a[c]=l}static copyOf(a,l){return a.slice(0,l)}static copyOfUint8Array(a,l){if(a.length<=l){const c=new Uint8Array(l);return c.set(a),c}return a.slice(0,l)}static copyOfRange(a,l,c){const h=c-l,p=new Int32Array(h);return I.arraycopy(a,l,p,0,h),p}static binarySearch(a,l,c){c===void 0&&(c=_.numberComparator);let h=0,p=a.length-1;for(;h<=p;){const g=p+h>>1,w=c(l,a[g]);if(w>0)h=g+1;else if(w<0)p=g-1;else return g}return-h-1}static numberComparator(a,l){return a-l}}class k{static numberOfTrailingZeros(a){let l;if(a===0)return 32;let c=31;return l=a<<16,l!==0&&(c-=16,a=l),l=a<<8,l!==0&&(c-=8,a=l),l=a<<4,l!==0&&(c-=4,a=l),l=a<<2,l!==0&&(c-=2,a=l),c-(a<<1>>>31)}static numberOfLeadingZeros(a){if(a===0)return 32;let l=1;return a>>>16||(l+=16,a<<=16),a>>>24||(l+=8,a<<=8),a>>>28||(l+=4,a<<=4),a>>>30||(l+=2,a<<=2),l-=a>>>31,l}static toHexString(a){return a.toString(16)}static toBinaryString(a){return String(parseInt(String(a),2))}static bitCount(a){return a=a-(a>>>1&1431655765),a=(a&858993459)+(a>>>2&858993459),a=a+(a>>>4)&252645135,a=a+(a>>>8),a=a+(a>>>16),a&63}static truncDivision(a,l){return Math.trunc(a/l)}static parseInt(a,l=void 0){return parseInt(a,l)}}k.MIN_VALUE_32_BITS=-2147483648,k.MAX_VALUE=Number.MAX_SAFE_INTEGER;class R{constructor(a,l){a===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=a,l==null?this.bits=R.makeArray(a):this.bits=l)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(a){if(a>this.bits.length*32){const l=R.makeArray(a);I.arraycopy(this.bits,0,l,0,this.bits.length),this.bits=l}}get(a){return(this.bits[Math.floor(a/32)]&1<<(a&31))!==0}set(a){this.bits[Math.floor(a/32)]|=1<<(a&31)}flip(a){this.bits[Math.floor(a/32)]^=1<<(a&31)}getNextSet(a){const l=this.size;if(a>=l)return l;const c=this.bits;let h=Math.floor(a/32),p=c[h];p&=~((1<<(a&31))-1);const g=c.length;for(;p===0;){if(++h===g)return l;p=c[h]}const w=h*32+k.numberOfTrailingZeros(p);return w>l?l:w}getNextUnset(a){const l=this.size;if(a>=l)return l;const c=this.bits;let h=Math.floor(a/32),p=~c[h];p&=~((1<<(a&31))-1);const g=c.length;for(;p===0;){if(++h===g)return l;p=~c[h]}const w=h*32+k.numberOfTrailingZeros(p);return w>l?l:w}setBulk(a,l){this.bits[Math.floor(a/32)]=l}setRange(a,l){if(l<a||a<0||l>this.size)throw new y;if(l===a)return;l--;const c=Math.floor(a/32),h=Math.floor(l/32),p=this.bits;for(let g=c;g<=h;g++){const w=g>c?0:a&31,T=(2<<(g<h?31:l&31))-(1<<w);p[g]|=T}}clear(){const a=this.bits.length,l=this.bits;for(let c=0;c<a;c++)l[c]=0}isRange(a,l,c){if(l<a||a<0||l>this.size)throw new y;if(l===a)return!0;l--;const h=Math.floor(a/32),p=Math.floor(l/32),g=this.bits;for(let w=h;w<=p;w++){const N=w>h?0:a&31,D=(2<<(w<p?31:l&31))-(1<<N)&4294967295;if((g[w]&D)!==(c?D:0))return!1}return!0}appendBit(a){this.ensureCapacity(this.size+1),a&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(a,l){if(l<0||l>32)throw new y("Num bits must be between 0 and 32");this.ensureCapacity(this.size+l);for(let c=l;c>0;c--)this.appendBit((a>>c-1&1)===1)}appendBitArray(a){const l=a.size;this.ensureCapacity(this.size+l);for(let c=0;c<l;c++)this.appendBit(a.get(c))}xor(a){if(this.size!==a.size)throw new y("Sizes don't match");const l=this.bits;for(let c=0,h=l.length;c<h;c++)l[c]^=a.bits[c]}toBytes(a,l,c,h){for(let p=0;p<h;p++){let g=0;for(let w=0;w<8;w++)this.get(a)&&(g|=1<<7-w),a++;l[c+p]=g}}getBitArray(){return this.bits}reverse(){const a=new Int32Array(this.bits.length),l=Math.floor((this.size-1)/32),c=l+1,h=this.bits;for(let p=0;p<c;p++){let g=h[p];g=g>>1&1431655765|(g&1431655765)<<1,g=g>>2&858993459|(g&858993459)<<2,g=g>>4&252645135|(g&252645135)<<4,g=g>>8&16711935|(g&16711935)<<8,g=g>>16&65535|(g&65535)<<16,a[l-p]=g}if(this.size!==c*32){const p=c*32-this.size;let g=a[0]>>>p;for(let w=1;w<c;w++){const N=a[w];g|=N<<32-p,a[w-1]=g,g=N>>>p}a[c-1]=g}this.bits=a}static makeArray(a){return new Int32Array(Math.floor((a+31)/32))}equals(a){if(!(a instanceof R))return!1;const l=a;return this.size===l.size&&_.equals(this.bits,l.bits)}hashCode(){return 31*this.size+_.hashCode(this.bits)}toString(){let a="";for(let l=0,c=this.size;l<c;l++)l&7||(a+=" "),a+=this.get(l)?"X":".";return a}clone(){return new R(this.size,this.bits.slice())}}var M;(function(F){F[F.OTHER=0]="OTHER",F[F.PURE_BARCODE=1]="PURE_BARCODE",F[F.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",F[F.TRY_HARDER=3]="TRY_HARDER",F[F.CHARACTER_SET=4]="CHARACTER_SET",F[F.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",F[F.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",F[F.ASSUME_GS1=7]="ASSUME_GS1",F[F.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",F[F.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",F[F.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(M||(M={}));var ne=M;class U extends f{static getFormatInstance(){return new U}}U.kind="FormatException";var K;(function(F){F[F.Cp437=0]="Cp437",F[F.ISO8859_1=1]="ISO8859_1",F[F.ISO8859_2=2]="ISO8859_2",F[F.ISO8859_3=3]="ISO8859_3",F[F.ISO8859_4=4]="ISO8859_4",F[F.ISO8859_5=5]="ISO8859_5",F[F.ISO8859_6=6]="ISO8859_6",F[F.ISO8859_7=7]="ISO8859_7",F[F.ISO8859_8=8]="ISO8859_8",F[F.ISO8859_9=9]="ISO8859_9",F[F.ISO8859_10=10]="ISO8859_10",F[F.ISO8859_11=11]="ISO8859_11",F[F.ISO8859_13=12]="ISO8859_13",F[F.ISO8859_14=13]="ISO8859_14",F[F.ISO8859_15=14]="ISO8859_15",F[F.ISO8859_16=15]="ISO8859_16",F[F.SJIS=16]="SJIS",F[F.Cp1250=17]="Cp1250",F[F.Cp1251=18]="Cp1251",F[F.Cp1252=19]="Cp1252",F[F.Cp1256=20]="Cp1256",F[F.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",F[F.UTF8=22]="UTF8",F[F.ASCII=23]="ASCII",F[F.Big5=24]="Big5",F[F.GB18030=25]="GB18030",F[F.EUC_KR=26]="EUC_KR"})(K||(K={}));class te{constructor(a,l,c,...h){this.valueIdentifier=a,this.name=c,typeof l=="number"?this.values=Int32Array.from([l]):this.values=l,this.otherEncodingNames=h,te.VALUE_IDENTIFIER_TO_ECI.set(a,this),te.NAME_TO_ECI.set(c,this);const p=this.values;for(let g=0,w=p.length;g!==w;g++){const N=p[g];te.VALUES_TO_ECI.set(N,this)}for(const g of h)te.NAME_TO_ECI.set(g,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(a){if(a<0||a>=900)throw new U("incorect value");const l=te.VALUES_TO_ECI.get(a);if(l===void 0)throw new U("incorect value");return l}static getCharacterSetECIByName(a){const l=te.NAME_TO_ECI.get(a);if(l===void 0)throw new U("incorect value");return l}equals(a){if(!(a instanceof te))return!1;const l=a;return this.getName()===l.getName()}}te.VALUE_IDENTIFIER_TO_ECI=new Map,te.VALUES_TO_ECI=new Map,te.NAME_TO_ECI=new Map,te.Cp437=new te(K.Cp437,Int32Array.from([0,2]),"Cp437"),te.ISO8859_1=new te(K.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),te.ISO8859_2=new te(K.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),te.ISO8859_3=new te(K.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),te.ISO8859_4=new te(K.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),te.ISO8859_5=new te(K.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),te.ISO8859_6=new te(K.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),te.ISO8859_7=new te(K.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),te.ISO8859_8=new te(K.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),te.ISO8859_9=new te(K.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),te.ISO8859_10=new te(K.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),te.ISO8859_11=new te(K.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),te.ISO8859_13=new te(K.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),te.ISO8859_14=new te(K.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),te.ISO8859_15=new te(K.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),te.ISO8859_16=new te(K.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),te.SJIS=new te(K.SJIS,20,"SJIS","Shift_JIS"),te.Cp1250=new te(K.Cp1250,21,"Cp1250","windows-1250"),te.Cp1251=new te(K.Cp1251,22,"Cp1251","windows-1251"),te.Cp1252=new te(K.Cp1252,23,"Cp1252","windows-1252"),te.Cp1256=new te(K.Cp1256,24,"Cp1256","windows-1256"),te.UnicodeBigUnmarked=new te(K.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),te.UTF8=new te(K.UTF8,26,"UTF8","UTF-8"),te.ASCII=new te(K.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),te.Big5=new te(K.Big5,28,"Big5"),te.GB18030=new te(K.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),te.EUC_KR=new te(K.EUC_KR,30,"EUC_KR","EUC-KR");class be extends f{}be.kind="UnsupportedOperationException";class ${static decode(a,l){const c=this.encodingName(l);return this.customDecoder?this.customDecoder(a,c):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(c)?this.decodeFallback(a,c):new TextDecoder(c).decode(a)}static shouldDecodeOnFallback(a){return!$.isBrowser()&&a==="ISO-8859-1"}static encode(a,l){const c=this.encodingName(l);return this.customEncoder?this.customEncoder(a,c):typeof TextEncoder>"u"?this.encodeFallback(a):new TextEncoder().encode(a)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(a){return typeof a=="string"?a:a.getName()}static encodingCharacterSet(a){return a instanceof te?a:te.getCharacterSetECIByName(a)}static decodeFallback(a,l){const c=this.encodingCharacterSet(l);if($.isDecodeFallbackSupported(c)){let h="";for(let p=0,g=a.length;p<g;p++){let w=a[p].toString(16);w.length<2&&(w="0"+w),h+="%"+w}return decodeURIComponent(h)}if(c.equals(te.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(a.buffer));throw new be(`Encoding ${this.encodingName(l)} not supported by fallback.`)}static isDecodeFallbackSupported(a){return a.equals(te.UTF8)||a.equals(te.ISO8859_1)||a.equals(te.ASCII)}static encodeFallback(a){const c=btoa(unescape(encodeURIComponent(a))).split(""),h=[];for(let p=0;p<c.length;p++)h.push(c[p].charCodeAt(0));return new Uint8Array(h)}}class q{static castAsNonUtf8Char(a,l=null){const c=l?l.getName():this.ISO88591;return $.decode(new Uint8Array([a]),c)}static guessEncoding(a,l){if(l!=null&&l.get(ne.CHARACTER_SET)!==void 0)return l.get(ne.CHARACTER_SET).toString();const c=a.length;let h=!0,p=!0,g=!0,w=0,N=0,T=0,D=0,B=0,G=0,le=0,ye=0,Ae=0,Te=0,Ue=0;const nt=a.length>3&&a[0]===239&&a[1]===187&&a[2]===191;for(let at=0;at<c&&(h||p||g);at++){const it=a[at]&255;g&&(w>0?it&128?w--:g=!1:it&128&&(it&64?(w++,it&32?(w++,it&16?(w++,it&8?g=!1:D++):T++):N++):g=!1)),h&&(it>127&&it<160?h=!1:it>159&&(it<192||it===215||it===247)&&Ue++),p&&(B>0?it<64||it===127||it>252?p=!1:B--:it===128||it===160||it>239?p=!1:it>160&&it<224?(G++,ye=0,le++,le>Ae&&(Ae=le)):it>127?(B++,le=0,ye++,ye>Te&&(Te=ye)):(le=0,ye=0))}return g&&w>0&&(g=!1),p&&B>0&&(p=!1),g&&(nt||N+T+D>0)?q.UTF8:p&&(q.ASSUME_SHIFT_JIS||Ae>=3||Te>=3)?q.SHIFT_JIS:h&&p?Ae===2&&G===2||Ue*10>=c?q.SHIFT_JIS:q.ISO88591:h?q.ISO88591:p?q.SHIFT_JIS:g?q.UTF8:q.PLATFORM_DEFAULT_ENCODING}static format(a,...l){let c=-1;function h(g,w,N,T,D,B){if(g==="%%")return"%";if(l[++c]===void 0)return;g=T?parseInt(T.substr(1)):void 0;let G=D?parseInt(D.substr(1)):void 0,le;switch(B){case"s":le=l[c];break;case"c":le=l[c][0];break;case"f":le=parseFloat(l[c]).toFixed(g);break;case"p":le=parseFloat(l[c]).toPrecision(g);break;case"e":le=parseFloat(l[c]).toExponential(g);break;case"x":le=parseInt(l[c]).toString(G||16);break;case"d":le=parseFloat(parseInt(l[c],G||10).toPrecision(g)).toFixed(0);break}le=typeof le=="object"?JSON.stringify(le):(+le).toString(G);let ye=parseInt(N),Ae=N&&N[0]+""=="0"?"0":" ";for(;le.length<ye;)le=w!==void 0?le+Ae:Ae+le;return le}let p=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return a.replace(p,h)}static getBytes(a,l){return $.encode(a,l)}static getCharCode(a,l=0){return a.charCodeAt(l)}static getCharAt(a){return String.fromCharCode(a)}}q.SHIFT_JIS=te.SJIS.getName(),q.GB2312="GB2312",q.ISO88591=te.ISO8859_1.getName(),q.EUC_JP="EUC_JP",q.UTF8=te.UTF8.getName(),q.PLATFORM_DEFAULT_ENCODING=q.UTF8,q.ASSUME_SHIFT_JIS=!1;class X{constructor(a=""){this.value=a}enableDecoding(a){return this.encoding=a,this}append(a){return typeof a=="string"?this.value+=a.toString():this.encoding?this.value+=q.castAsNonUtf8Char(a,this.encoding):this.value+=String.fromCharCode(a),this}appendChars(a,l,c){for(let h=l;l<l+c;h++)this.append(a[h]);return this}length(){return this.value.length}charAt(a){return this.value.charAt(a)}deleteCharAt(a){this.value=this.value.substr(0,a)+this.value.substring(a+1)}setCharAt(a,l){this.value=this.value.substr(0,a)+l+this.value.substr(a+1)}substring(a,l){return this.value.substring(a,l)}setLengthToZero(){this.value=""}toString(){return this.value}insert(a,l){this.value=this.value.substr(0,a)+l+this.value.substr(a+l.length)}}class Q{constructor(a,l,c,h){if(this.width=a,this.height=l,this.rowSize=c,this.bits=h,l==null&&(l=a),this.height=l,a<1||l<1)throw new y("Both dimensions must be greater than 0");c==null&&(c=Math.floor((a+31)/32)),this.rowSize=c,h==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(a){const l=a.length,c=a[0].length,h=new Q(c,l);for(let p=0;p<l;p++){const g=a[p];for(let w=0;w<c;w++)g[w]&&h.set(w,p)}return h}static parseFromString(a,l,c){if(a===null)throw new y("stringRepresentation cannot be null");const h=new Array(a.length);let p=0,g=0,w=-1,N=0,T=0;for(;T<a.length;)if(a.charAt(T)===`
`||a.charAt(T)==="\r"){if(p>g){if(w===-1)w=p-g;else if(p-g!==w)throw new y("row lengths do not match");g=p,N++}T++}else if(a.substring(T,T+l.length)===l)T+=l.length,h[p]=!0,p++;else if(a.substring(T,T+c.length)===c)T+=c.length,h[p]=!1,p++;else throw new y("illegal character encountered: "+a.substring(T));if(p>g){if(w===-1)w=p-g;else if(p-g!==w)throw new y("row lengths do not match");N++}const D=new Q(w,N);for(let B=0;B<p;B++)h[B]&&D.set(Math.floor(B%w),Math.floor(B/w));return D}get(a,l){const c=l*this.rowSize+Math.floor(a/32);return(this.bits[c]>>>(a&31)&1)!==0}set(a,l){const c=l*this.rowSize+Math.floor(a/32);this.bits[c]|=1<<(a&31)&4294967295}unset(a,l){const c=l*this.rowSize+Math.floor(a/32);this.bits[c]&=~(1<<(a&31)&4294967295)}flip(a,l){const c=l*this.rowSize+Math.floor(a/32);this.bits[c]^=1<<(a&31)&4294967295}xor(a){if(this.width!==a.getWidth()||this.height!==a.getHeight()||this.rowSize!==a.getRowSize())throw new y("input matrix dimensions do not match");const l=new R(Math.floor(this.width/32)+1),c=this.rowSize,h=this.bits;for(let p=0,g=this.height;p<g;p++){const w=p*c,N=a.getRow(p,l).getBitArray();for(let T=0;T<c;T++)h[w+T]^=N[T]}}clear(){const a=this.bits,l=a.length;for(let c=0;c<l;c++)a[c]=0}setRegion(a,l,c,h){if(l<0||a<0)throw new y("Left and top must be nonnegative");if(h<1||c<1)throw new y("Height and width must be at least 1");const p=a+c,g=l+h;if(g>this.height||p>this.width)throw new y("The region must fit inside the matrix");const w=this.rowSize,N=this.bits;for(let T=l;T<g;T++){const D=T*w;for(let B=a;B<p;B++)N[D+Math.floor(B/32)]|=1<<(B&31)&4294967295}}getRow(a,l){l==null||l.getSize()<this.width?l=new R(this.width):l.clear();const c=this.rowSize,h=this.bits,p=a*c;for(let g=0;g<c;g++)l.setBulk(g*32,h[p+g]);return l}setRow(a,l){I.arraycopy(l.getBitArray(),0,this.bits,a*this.rowSize,this.rowSize)}rotate180(){const a=this.getWidth(),l=this.getHeight();let c=new R(a),h=new R(a);for(let p=0,g=Math.floor((l+1)/2);p<g;p++)c=this.getRow(p,c),h=this.getRow(l-1-p,h),c.reverse(),h.reverse(),this.setRow(p,h),this.setRow(l-1-p,c)}getEnclosingRectangle(){const a=this.width,l=this.height,c=this.rowSize,h=this.bits;let p=a,g=l,w=-1,N=-1;for(let T=0;T<l;T++)for(let D=0;D<c;D++){const B=h[T*c+D];if(B!==0){if(T<g&&(g=T),T>N&&(N=T),D*32<p){let G=0;for(;!(B<<31-G&4294967295);)G++;D*32+G<p&&(p=D*32+G)}if(D*32+31>w){let G=31;for(;!(B>>>G);)G--;D*32+G>w&&(w=D*32+G)}}}return w<p||N<g?null:Int32Array.from([p,g,w-p+1,N-g+1])}getTopLeftOnBit(){const a=this.rowSize,l=this.bits;let c=0;for(;c<l.length&&l[c]===0;)c++;if(c===l.length)return null;const h=c/a;let p=c%a*32;const g=l[c];let w=0;for(;!(g<<31-w&4294967295);)w++;return p+=w,Int32Array.from([p,h])}getBottomRightOnBit(){const a=this.rowSize,l=this.bits;let c=l.length-1;for(;c>=0&&l[c]===0;)c--;if(c<0)return null;const h=Math.floor(c/a);let p=Math.floor(c%a)*32;const g=l[c];let w=31;for(;!(g>>>w);)w--;return p+=w,Int32Array.from([p,h])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(a){if(!(a instanceof Q))return!1;const l=a;return this.width===l.width&&this.height===l.height&&this.rowSize===l.rowSize&&_.equals(this.bits,l.bits)}hashCode(){let a=this.width;return a=31*a+this.width,a=31*a+this.height,a=31*a+this.rowSize,a=31*a+_.hashCode(this.bits),a}toString(a="X ",l="  ",c=`
`){return this.buildToString(a,l,c)}buildToString(a,l,c){let h=new X;for(let p=0,g=this.height;p<g;p++){for(let w=0,N=this.width;w<N;w++)h.append(this.get(w,p)?a:l);h.append(c)}return h.toString()}clone(){return new Q(this.width,this.height,this.rowSize,this.bits.slice())}}class J extends f{static getNotFoundInstance(){return new J}}J.kind="NotFoundException";class pe extends P{constructor(a){super(a),this.luminances=pe.EMPTY,this.buckets=new Int32Array(pe.LUMINANCE_BUCKETS)}getBlackRow(a,l){const c=this.getLuminanceSource(),h=c.getWidth();l==null||l.getSize()<h?l=new R(h):l.clear(),this.initArrays(h);const p=c.getRow(a,this.luminances),g=this.buckets;for(let N=0;N<h;N++)g[(p[N]&255)>>pe.LUMINANCE_SHIFT]++;const w=pe.estimateBlackPoint(g);if(h<3)for(let N=0;N<h;N++)(p[N]&255)<w&&l.set(N);else{let N=p[0]&255,T=p[1]&255;for(let D=1;D<h-1;D++){const B=p[D+1]&255;(T*4-N-B)/2<w&&l.set(D),N=T,T=B}}return l}getBlackMatrix(){const a=this.getLuminanceSource(),l=a.getWidth(),c=a.getHeight(),h=new Q(l,c);this.initArrays(l);const p=this.buckets;for(let N=1;N<5;N++){const T=Math.floor(c*N/5),D=a.getRow(T,this.luminances),B=Math.floor(l*4/5);for(let G=Math.floor(l/5);G<B;G++){const le=D[G]&255;p[le>>pe.LUMINANCE_SHIFT]++}}const g=pe.estimateBlackPoint(p),w=a.getMatrix();for(let N=0;N<c;N++){const T=N*l;for(let D=0;D<l;D++)(w[T+D]&255)<g&&h.set(D,N)}return h}createBinarizer(a){return new pe(a)}initArrays(a){this.luminances.length<a&&(this.luminances=new Uint8ClampedArray(a));const l=this.buckets;for(let c=0;c<pe.LUMINANCE_BUCKETS;c++)l[c]=0}static estimateBlackPoint(a){const l=a.length;let c=0,h=0,p=0;for(let D=0;D<l;D++)a[D]>p&&(h=D,p=a[D]),a[D]>c&&(c=a[D]);let g=0,w=0;for(let D=0;D<l;D++){const B=D-h,G=a[D]*B*B;G>w&&(g=D,w=G)}if(h>g){const D=h;h=g,g=D}if(g-h<=l/16)throw new J;let N=g-1,T=-1;for(let D=g-1;D>h;D--){const B=D-h,G=B*B*(g-D)*(c-a[D]);G>T&&(N=D,T=G)}return N<<pe.LUMINANCE_SHIFT}}pe.LUMINANCE_BITS=5,pe.LUMINANCE_SHIFT=8-pe.LUMINANCE_BITS,pe.LUMINANCE_BUCKETS=1<<pe.LUMINANCE_BITS,pe.EMPTY=Uint8ClampedArray.from([0]);class ge extends pe{constructor(a){super(a),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const a=this.getLuminanceSource(),l=a.getWidth(),c=a.getHeight();if(l>=ge.MINIMUM_DIMENSION&&c>=ge.MINIMUM_DIMENSION){const h=a.getMatrix();let p=l>>ge.BLOCK_SIZE_POWER;l&ge.BLOCK_SIZE_MASK&&p++;let g=c>>ge.BLOCK_SIZE_POWER;c&ge.BLOCK_SIZE_MASK&&g++;const w=ge.calculateBlackPoints(h,p,g,l,c),N=new Q(l,c);ge.calculateThresholdForBlock(h,p,g,l,c,w,N),this.matrix=N}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(a){return new ge(a)}static calculateThresholdForBlock(a,l,c,h,p,g,w){const N=p-ge.BLOCK_SIZE,T=h-ge.BLOCK_SIZE;for(let D=0;D<c;D++){let B=D<<ge.BLOCK_SIZE_POWER;B>N&&(B=N);const G=ge.cap(D,2,c-3);for(let le=0;le<l;le++){let ye=le<<ge.BLOCK_SIZE_POWER;ye>T&&(ye=T);const Ae=ge.cap(le,2,l-3);let Te=0;for(let nt=-2;nt<=2;nt++){const at=g[G+nt];Te+=at[Ae-2]+at[Ae-1]+at[Ae]+at[Ae+1]+at[Ae+2]}const Ue=Te/25;ge.thresholdBlock(a,ye,B,Ue,h,w)}}}static cap(a,l,c){return a<l?l:a>c?c:a}static thresholdBlock(a,l,c,h,p,g){for(let w=0,N=c*p+l;w<ge.BLOCK_SIZE;w++,N+=p)for(let T=0;T<ge.BLOCK_SIZE;T++)(a[N+T]&255)<=h&&g.set(l+T,c+w)}static calculateBlackPoints(a,l,c,h,p){const g=p-ge.BLOCK_SIZE,w=h-ge.BLOCK_SIZE,N=new Array(c);for(let T=0;T<c;T++){N[T]=new Int32Array(l);let D=T<<ge.BLOCK_SIZE_POWER;D>g&&(D=g);for(let B=0;B<l;B++){let G=B<<ge.BLOCK_SIZE_POWER;G>w&&(G=w);let le=0,ye=255,Ae=0;for(let Ue=0,nt=D*h+G;Ue<ge.BLOCK_SIZE;Ue++,nt+=h){for(let at=0;at<ge.BLOCK_SIZE;at++){const it=a[nt+at]&255;le+=it,it<ye&&(ye=it),it>Ae&&(Ae=it)}if(Ae-ye>ge.MIN_DYNAMIC_RANGE)for(Ue++,nt+=h;Ue<ge.BLOCK_SIZE;Ue++,nt+=h)for(let at=0;at<ge.BLOCK_SIZE;at++)le+=a[nt+at]&255}let Te=le>>ge.BLOCK_SIZE_POWER*2;if(Ae-ye<=ge.MIN_DYNAMIC_RANGE&&(Te=ye/2,T>0&&B>0)){const Ue=(N[T-1][B]+2*N[T][B-1]+N[T-1][B-1])/4;ye<Ue&&(Te=Ue)}N[T][B]=Te}}return N}}ge.BLOCK_SIZE_POWER=3,ge.BLOCK_SIZE=1<<ge.BLOCK_SIZE_POWER,ge.BLOCK_SIZE_MASK=ge.BLOCK_SIZE-1,ge.MINIMUM_DIMENSION=ge.BLOCK_SIZE*5,ge.MIN_DYNAMIC_RANGE=24;class ue{constructor(a,l){this.width=a,this.height=l}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(a,l,c,h){throw new be("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new be("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new be("This luminance source does not support rotation by 45 degrees.")}toString(){const a=new Uint8ClampedArray(this.width);let l=new X;for(let c=0;c<this.height;c++){const h=this.getRow(c,a);for(let p=0;p<this.width;p++){const g=h[p]&255;let w;g<64?w="#":g<128?w="+":g<192?w=".":w=" ",l.append(w)}l.append(`
`)}return l.toString()}}class Se extends ue{constructor(a){super(a.getWidth(),a.getHeight()),this.delegate=a}getRow(a,l){const c=this.delegate.getRow(a,l),h=this.getWidth();for(let p=0;p<h;p++)c[p]=255-(c[p]&255);return c}getMatrix(){const a=this.delegate.getMatrix(),l=this.getWidth()*this.getHeight(),c=new Uint8ClampedArray(l);for(let h=0;h<l;h++)c[h]=255-(a[h]&255);return c}isCropSupported(){return this.delegate.isCropSupported()}crop(a,l,c,h){return new Se(this.delegate.crop(a,l,c,h))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Se(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Se(this.delegate.rotateCounterClockwise45())}}class _e extends ue{constructor(a){super(a.width,a.height),this.canvas=a,this.tempCanvasElement=null,this.buffer=_e.makeBufferFromCanvasImageData(a)}static makeBufferFromCanvasImageData(a){const l=a.getContext("2d").getImageData(0,0,a.width,a.height);return _e.toGrayscaleBuffer(l.data,a.width,a.height)}static toGrayscaleBuffer(a,l,c){const h=new Uint8ClampedArray(l*c);for(let p=0,g=0,w=a.length;p<w;p+=4,g++){let N;if(a[p+3]===0)N=255;else{const D=a[p],B=a[p+1],G=a[p+2];N=306*D+601*B+117*G+512>>10}h[g]=N}return h}getRow(a,l){if(a<0||a>=this.getHeight())throw new y("Requested row is outside the image: "+a);const c=this.getWidth(),h=a*c;return l===null?l=this.buffer.slice(h,h+c):(l.length<c&&(l=new Uint8ClampedArray(c)),l.set(this.buffer.slice(h,h+c))),l}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(a,l,c,h){return super.crop(a,l,c,h),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const a=this.canvas.ownerDocument.createElement("canvas");a.width=this.canvas.width,a.height=this.canvas.height,this.tempCanvasElement=a}return this.tempCanvasElement}rotate(a){const l=this.getTempCanvasElement(),c=l.getContext("2d"),h=a*_e.DEGREE_TO_RADIANS,p=this.canvas.width,g=this.canvas.height,w=Math.ceil(Math.abs(Math.cos(h))*p+Math.abs(Math.sin(h))*g),N=Math.ceil(Math.abs(Math.sin(h))*p+Math.abs(Math.cos(h))*g);return l.width=w,l.height=N,c.translate(w/2,N/2),c.rotate(h),c.drawImage(this.canvas,p/-2,g/-2),this.buffer=_e.makeBufferFromCanvasImageData(l),this}invert(){return new Se(this)}}_e.DEGREE_TO_RADIANS=Math.PI/180;class Me{constructor(a,l,c){this.deviceId=a,this.label=l,this.kind="videoinput",this.groupId=c||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var V=(globalThis||mi||self||window||void 0)&&(globalThis||mi||self||window||void 0).__awaiter||function(F,a,l,c){function h(p){return p instanceof l?p:new l(function(g){g(p)})}return new(l||(l=Promise))(function(p,g){function w(D){try{T(c.next(D))}catch(B){g(B)}}function N(D){try{T(c.throw(D))}catch(B){g(B)}}function T(D){D.done?p(D.value):h(D.value).then(w,N)}T((c=c.apply(F,a||[])).next())})};class se{constructor(a,l=500,c){this.reader=a,this.timeBetweenScansMillis=l,this._hints=c,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(a){this._timeBetweenDecodingAttempts=a<0?0:a}set hints(a){this._hints=a||null}get hints(){return this._hints}listVideoInputDevices(){return V(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const a=yield navigator.mediaDevices.enumerateDevices(),l=[];for(const c of a){const h=c.kind==="video"?"videoinput":c.kind;if(h!=="videoinput")continue;const p=c.deviceId||c.id,g=c.label||`Video device ${l.length+1}`,w=c.groupId,N={deviceId:p,label:g,kind:h,groupId:w};l.push(N)}return l})}getVideoInputDevices(){return V(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(l=>new Me(l.deviceId,l.label))})}findDeviceById(a){return V(this,void 0,void 0,function*(){const l=yield this.listVideoInputDevices();return l?l.find(c=>c.deviceId===a):null})}decodeFromInputVideoDevice(a,l){return V(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(a,l)})}decodeOnceFromVideoDevice(a,l){return V(this,void 0,void 0,function*(){this.reset();let c;a?c={deviceId:{exact:a}}:c={facingMode:"environment"};const h={video:c};return yield this.decodeOnceFromConstraints(h,l)})}decodeOnceFromConstraints(a,l){return V(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(a);return yield this.decodeOnceFromStream(c,l)})}decodeOnceFromStream(a,l){return V(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(a,l);return yield this.decodeOnce(c)})}decodeFromInputVideoDeviceContinuously(a,l,c){return V(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(a,l,c)})}decodeFromVideoDevice(a,l,c){return V(this,void 0,void 0,function*(){let h;a?h={deviceId:{exact:a}}:h={facingMode:"environment"};const p={video:h};return yield this.decodeFromConstraints(p,l,c)})}decodeFromConstraints(a,l,c){return V(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(a);return yield this.decodeFromStream(h,l,c)})}decodeFromStream(a,l,c){return V(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(a,l);return yield this.decodeContinuously(h,c)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(a,l){return V(this,void 0,void 0,function*(){const c=this.prepareVideoElement(l);return this.addVideoSource(c,a),this.videoElement=c,this.stream=a,yield this.playVideoOnLoadAsync(c),c})}playVideoOnLoadAsync(a){return new Promise((l,c)=>this.playVideoOnLoad(a,()=>l()))}playVideoOnLoad(a,l){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(a),a.addEventListener("ended",this.videoEndedListener),a.addEventListener("canplay",this.videoCanPlayListener),a.addEventListener("playing",l),this.tryPlayVideo(a)}isVideoPlaying(a){return a.currentTime>0&&!a.paused&&!a.ended&&a.readyState>2}tryPlayVideo(a){return V(this,void 0,void 0,function*(){if(this.isVideoPlaying(a)){console.warn("Trying to play video that is already playing.");return}try{yield a.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(a,l){const c=document.getElementById(a);if(!c)throw new x(`element with id '${a}' not found`);if(c.nodeName.toLowerCase()!==l.toLowerCase())throw new x(`element with id '${a}' must be an ${l} element`);return c}decodeFromImage(a,l){if(!a&&!l)throw new x("either imageElement with a src set or an url must be provided");return l&&!a?this.decodeFromImageUrl(l):this.decodeFromImageElement(a)}decodeFromVideo(a,l){if(!a&&!l)throw new x("Either an element with a src set or an URL must be provided");return l&&!a?this.decodeFromVideoUrl(l):this.decodeFromVideoElement(a)}decodeFromVideoContinuously(a,l,c){if(a===void 0&&l===void 0)throw new x("Either an element with a src set or an URL must be provided");return l&&!a?this.decodeFromVideoUrlContinuously(l,c):this.decodeFromVideoElementContinuously(a,c)}decodeFromImageElement(a){if(!a)throw new x("An image element must be provided.");this.reset();const l=this.prepareImageElement(a);this.imageElement=l;let c;return this.isImageLoaded(l)?c=this.decodeOnce(l,!1,!0):c=this._decodeOnLoadImage(l),c}decodeFromVideoElement(a){const l=this._decodeFromVideoElementSetup(a);return this._decodeOnLoadVideo(l)}decodeFromVideoElementContinuously(a,l){const c=this._decodeFromVideoElementSetup(a);return this._decodeOnLoadVideoContinuously(c,l)}_decodeFromVideoElementSetup(a){if(!a)throw new x("A video element must be provided.");this.reset();const l=this.prepareVideoElement(a);return this.videoElement=l,l}decodeFromImageUrl(a){if(!a)throw new x("An URL must be provided.");this.reset();const l=this.prepareImageElement();this.imageElement=l;const c=this._decodeOnLoadImage(l);return l.src=a,c}decodeFromVideoUrl(a){if(!a)throw new x("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),c=this.decodeFromVideoElement(l);return l.src=a,c}decodeFromVideoUrlContinuously(a,l){if(!a)throw new x("An URL must be provided.");this.reset();const c=this.prepareVideoElement(),h=this.decodeFromVideoElementContinuously(c,l);return c.src=a,h}_decodeOnLoadImage(a){return new Promise((l,c)=>{this.imageLoadedListener=()=>this.decodeOnce(a,!1,!0).then(l,c),a.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(a){return V(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(a),yield this.decodeOnce(a)})}_decodeOnLoadVideoContinuously(a,l){return V(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(a),this.decodeContinuously(a,l)})}isImageLoaded(a){return!(!a.complete||a.naturalWidth===0)}prepareImageElement(a){let l;return typeof a>"u"&&(l=document.createElement("img"),l.width=200,l.height=200),typeof a=="string"&&(l=this.getMediaElement(a,"img")),a instanceof HTMLImageElement&&(l=a),l}prepareVideoElement(a){let l;return!a&&typeof document<"u"&&(l=document.createElement("video"),l.width=200,l.height=200),typeof a=="string"&&(l=this.getMediaElement(a,"video")),a instanceof HTMLVideoElement&&(l=a),l.setAttribute("autoplay","true"),l.setAttribute("muted","true"),l.setAttribute("playsinline","true"),l}decodeOnce(a,l=!0,c=!0){this._stopAsyncDecode=!1;const h=(p,g)=>{if(this._stopAsyncDecode){g(new J("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const w=this.decode(a);p(w)}catch(w){const N=l&&w instanceof J,D=(w instanceof b||w instanceof U)&&c;if(N||D)return setTimeout(h,this._timeBetweenDecodingAttempts,p,g);g(w)}};return new Promise((p,g)=>h(p,g))}decodeContinuously(a,l){this._stopContinuousDecode=!1;const c=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const h=this.decode(a);l(h,null),setTimeout(c,this.timeBetweenScansMillis)}catch(h){l(null,h);const p=h instanceof b||h instanceof U,g=h instanceof J;(p||g)&&setTimeout(c,this._timeBetweenDecodingAttempts)}};c()}decode(a){const l=this.createBinaryBitmap(a);return this.decodeBitmap(l)}_isHTMLVideoElement(a){return a.videoWidth!==0}drawFrameOnCanvas(a,l,c){l||(l={sx:0,sy:0,sWidth:a.videoWidth,sHeight:a.videoHeight,dx:0,dy:0,dWidth:a.videoWidth,dHeight:a.videoHeight}),c||(c=this.captureCanvasContext),c.drawImage(a,l.sx,l.sy,l.sWidth,l.sHeight,l.dx,l.dy,l.dWidth,l.dHeight)}drawImageOnCanvas(a,l,c=this.captureCanvasContext){l||(l={sx:0,sy:0,sWidth:a.naturalWidth,sHeight:a.naturalHeight,dx:0,dy:0,dWidth:a.naturalWidth,dHeight:a.naturalHeight}),c||(c=this.captureCanvasContext),c.drawImage(a,l.sx,l.sy,l.sWidth,l.sHeight,l.dx,l.dy,l.dWidth,l.dHeight)}createBinaryBitmap(a){this.getCaptureCanvasContext(a),this._isHTMLVideoElement(a)?this.drawFrameOnCanvas(a):this.drawImageOnCanvas(a);const l=this.getCaptureCanvas(a),c=new _e(l),h=new ge(c);return new A(h)}getCaptureCanvasContext(a){if(!this.captureCanvasContext){const c=this.getCaptureCanvas(a).getContext("2d");this.captureCanvasContext=c}return this.captureCanvasContext}getCaptureCanvas(a){if(!this.captureCanvas){const l=this.createCaptureCanvas(a);this.captureCanvas=l}return this.captureCanvas}decodeBitmap(a){return this.reader.decode(a,this._hints)}createCaptureCanvas(a){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const l=document.createElement("canvas");let c,h;return typeof a<"u"&&(a instanceof HTMLVideoElement?(c=a.videoWidth,h=a.videoHeight):a instanceof HTMLImageElement&&(c=a.naturalWidth||a.width,h=a.naturalHeight||a.height)),l.style.width=c+"px",l.style.height=h+"px",l.width=c,l.height=h,l}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(a=>a.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(a,l){try{a.srcObject=l}catch{a.src=URL.createObjectURL(l)}}cleanVideoSource(a){try{a.srcObject=null}catch{a.src=""}this.videoElement.removeAttribute("src")}}class de{constructor(a,l,c=l==null?0:8*l.length,h,p,g=I.currentTimeMillis()){this.text=a,this.rawBytes=l,this.numBits=c,this.resultPoints=h,this.format=p,this.timestamp=g,this.text=a,this.rawBytes=l,c==null?this.numBits=l==null?0:8*l.length:this.numBits=c,this.resultPoints=h,this.format=p,this.resultMetadata=null,g==null?this.timestamp=I.currentTimeMillis():this.timestamp=g}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(a,l){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(a,l)}putAllMetadata(a){a!==null&&(this.resultMetadata===null?this.resultMetadata=a:this.resultMetadata=new Map(a))}addResultPoints(a){const l=this.resultPoints;if(l===null)this.resultPoints=a;else if(a!==null&&a.length>0){const c=new Array(l.length+a.length);I.arraycopy(l,0,c,0,l.length),I.arraycopy(a,0,c,l.length,a.length),this.resultPoints=c}}getTimestamp(){return this.timestamp}toString(){return this.text}}var xe;(function(F){F[F.AZTEC=0]="AZTEC",F[F.CODABAR=1]="CODABAR",F[F.CODE_39=2]="CODE_39",F[F.CODE_93=3]="CODE_93",F[F.CODE_128=4]="CODE_128",F[F.DATA_MATRIX=5]="DATA_MATRIX",F[F.EAN_8=6]="EAN_8",F[F.EAN_13=7]="EAN_13",F[F.ITF=8]="ITF",F[F.MAXICODE=9]="MAXICODE",F[F.PDF_417=10]="PDF_417",F[F.QR_CODE=11]="QR_CODE",F[F.RSS_14=12]="RSS_14",F[F.RSS_EXPANDED=13]="RSS_EXPANDED",F[F.UPC_A=14]="UPC_A",F[F.UPC_E=15]="UPC_E",F[F.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(xe||(xe={}));var he=xe,Pe;(function(F){F[F.OTHER=0]="OTHER",F[F.ORIENTATION=1]="ORIENTATION",F[F.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",F[F.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",F[F.ISSUE_NUMBER=4]="ISSUE_NUMBER",F[F.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",F[F.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",F[F.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",F[F.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",F[F.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",F[F.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Pe||(Pe={}));var Le=Pe;class Oe{constructor(a,l,c,h,p=-1,g=-1){this.rawBytes=a,this.text=l,this.byteSegments=c,this.ecLevel=h,this.structuredAppendSequenceNumber=p,this.structuredAppendParity=g,this.numBits=a==null?0:8*a.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(a){this.numBits=a}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(a){this.errorsCorrected=a}getErasures(){return this.erasures}setErasures(a){this.erasures=a}getOther(){return this.other}setOther(a){this.other=a}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class He{exp(a){return this.expTable[a]}log(a){if(a===0)throw new y;return this.logTable[a]}static addOrSubtract(a,l){return a^l}}class qe{constructor(a,l){if(l.length===0)throw new y;this.field=a;const c=l.length;if(c>1&&l[0]===0){let h=1;for(;h<c&&l[h]===0;)h++;h===c?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(c-h),I.arraycopy(l,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=l}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(a){return this.coefficients[this.coefficients.length-1-a]}evaluateAt(a){if(a===0)return this.getCoefficient(0);const l=this.coefficients;let c;if(a===1){c=0;for(let g=0,w=l.length;g!==w;g++){const N=l[g];c=He.addOrSubtract(c,N)}return c}c=l[0];const h=l.length,p=this.field;for(let g=1;g<h;g++)c=He.addOrSubtract(p.multiply(a,c),l[g]);return c}addOrSubtract(a){if(!this.field.equals(a.field))throw new y("GenericGFPolys do not have same GenericGF field");if(this.isZero())return a;if(a.isZero())return this;let l=this.coefficients,c=a.coefficients;if(l.length>c.length){const g=l;l=c,c=g}let h=new Int32Array(c.length);const p=c.length-l.length;I.arraycopy(c,0,h,0,p);for(let g=p;g<c.length;g++)h[g]=He.addOrSubtract(l[g-p],c[g]);return new qe(this.field,h)}multiply(a){if(!this.field.equals(a.field))throw new y("GenericGFPolys do not have same GenericGF field");if(this.isZero()||a.isZero())return this.field.getZero();const l=this.coefficients,c=l.length,h=a.coefficients,p=h.length,g=new Int32Array(c+p-1),w=this.field;for(let N=0;N<c;N++){const T=l[N];for(let D=0;D<p;D++)g[N+D]=He.addOrSubtract(g[N+D],w.multiply(T,h[D]))}return new qe(w,g)}multiplyScalar(a){if(a===0)return this.field.getZero();if(a===1)return this;const l=this.coefficients.length,c=this.field,h=new Int32Array(l),p=this.coefficients;for(let g=0;g<l;g++)h[g]=c.multiply(p[g],a);return new qe(c,h)}multiplyByMonomial(a,l){if(a<0)throw new y;if(l===0)return this.field.getZero();const c=this.coefficients,h=c.length,p=new Int32Array(h+a),g=this.field;for(let w=0;w<h;w++)p[w]=g.multiply(c[w],l);return new qe(g,p)}divide(a){if(!this.field.equals(a.field))throw new y("GenericGFPolys do not have same GenericGF field");if(a.isZero())throw new y("Divide by 0");const l=this.field;let c=l.getZero(),h=this;const p=a.getCoefficient(a.getDegree()),g=l.inverse(p);for(;h.getDegree()>=a.getDegree()&&!h.isZero();){const w=h.getDegree()-a.getDegree(),N=l.multiply(h.getCoefficient(h.getDegree()),g),T=a.multiplyByMonomial(w,N),D=l.buildMonomial(w,N);c=c.addOrSubtract(D),h=h.addOrSubtract(T)}return[c,h]}toString(){let a="";for(let l=this.getDegree();l>=0;l--){let c=this.getCoefficient(l);if(c!==0){if(c<0?(a+=" - ",c=-c):a.length>0&&(a+=" + "),l===0||c!==1){const h=this.field.log(c);h===0?a+="1":h===1?a+="a":(a+="a^",a+=h)}l!==0&&(l===1?a+="x":(a+="x^",a+=l))}}return a}}class rt extends f{}rt.kind="ArithmeticException";class Ge extends He{constructor(a,l,c){super(),this.primitive=a,this.size=l,this.generatorBase=c;const h=new Int32Array(l);let p=1;for(let w=0;w<l;w++)h[w]=p,p*=2,p>=l&&(p^=a,p&=l-1);this.expTable=h;const g=new Int32Array(l);for(let w=0;w<l-1;w++)g[h[w]]=w;this.logTable=g,this.zero=new qe(this,Int32Array.from([0])),this.one=new qe(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(a,l){if(a<0)throw new y;if(l===0)return this.zero;const c=new Int32Array(a+1);return c[0]=l,new qe(this,c)}inverse(a){if(a===0)throw new rt;return this.expTable[this.size-this.logTable[a]-1]}multiply(a,l){return a===0||l===0?0:this.expTable[(this.logTable[a]+this.logTable[l])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+k.toHexString(this.primitive)+","+this.size+")"}equals(a){return a===this}}Ge.AZTEC_DATA_12=new Ge(4201,4096,1),Ge.AZTEC_DATA_10=new Ge(1033,1024,1),Ge.AZTEC_DATA_6=new Ge(67,64,1),Ge.AZTEC_PARAM=new Ge(19,16,1),Ge.QR_CODE_FIELD_256=new Ge(285,256,0),Ge.DATA_MATRIX_FIELD_256=new Ge(301,256,1),Ge.AZTEC_DATA_8=Ge.DATA_MATRIX_FIELD_256,Ge.MAXICODE_FIELD_64=Ge.AZTEC_DATA_6;class vt extends f{}vt.kind="ReedSolomonException";class Ve extends f{}Ve.kind="IllegalStateException";class fe{constructor(a){this.field=a}decode(a,l){const c=this.field,h=new qe(c,a),p=new Int32Array(l);let g=!0;for(let le=0;le<l;le++){const ye=h.evaluateAt(c.exp(le+c.getGeneratorBase()));p[p.length-1-le]=ye,ye!==0&&(g=!1)}if(g)return;const w=new qe(c,p),N=this.runEuclideanAlgorithm(c.buildMonomial(l,1),w,l),T=N[0],D=N[1],B=this.findErrorLocations(T),G=this.findErrorMagnitudes(D,B);for(let le=0;le<B.length;le++){const ye=a.length-1-c.log(B[le]);if(ye<0)throw new vt("Bad error location");a[ye]=Ge.addOrSubtract(a[ye],G[le])}}runEuclideanAlgorithm(a,l,c){if(a.getDegree()<l.getDegree()){const le=a;a=l,l=le}const h=this.field;let p=a,g=l,w=h.getZero(),N=h.getOne();for(;g.getDegree()>=(c/2|0);){let le=p,ye=w;if(p=g,w=N,p.isZero())throw new vt("r_{i-1} was zero");g=le;let Ae=h.getZero();const Te=p.getCoefficient(p.getDegree()),Ue=h.inverse(Te);for(;g.getDegree()>=p.getDegree()&&!g.isZero();){const nt=g.getDegree()-p.getDegree(),at=h.multiply(g.getCoefficient(g.getDegree()),Ue);Ae=Ae.addOrSubtract(h.buildMonomial(nt,at)),g=g.addOrSubtract(p.multiplyByMonomial(nt,at))}if(N=Ae.multiply(w).addOrSubtract(ye),g.getDegree()>=p.getDegree())throw new Ve("Division algorithm failed to reduce polynomial?")}const T=N.getCoefficient(0);if(T===0)throw new vt("sigmaTilde(0) was zero");const D=h.inverse(T),B=N.multiplyScalar(D),G=g.multiplyScalar(D);return[B,G]}findErrorLocations(a){const l=a.getDegree();if(l===1)return Int32Array.from([a.getCoefficient(1)]);const c=new Int32Array(l);let h=0;const p=this.field;for(let g=1;g<p.getSize()&&h<l;g++)a.evaluateAt(g)===0&&(c[h]=p.inverse(g),h++);if(h!==l)throw new vt("Error locator degree does not match number of roots");return c}findErrorMagnitudes(a,l){const c=l.length,h=new Int32Array(c),p=this.field;for(let g=0;g<c;g++){const w=p.inverse(l[g]);let N=1;for(let T=0;T<c;T++)if(g!==T){const D=p.multiply(l[T],w),B=D&1?D&-2:D|1;N=p.multiply(N,B)}h[g]=p.multiply(a.evaluateAt(w),p.inverse(N)),p.getGeneratorBase()!==0&&(h[g]=p.multiply(h[g],w))}return h}}var bt;(function(F){F[F.UPPER=0]="UPPER",F[F.LOWER=1]="LOWER",F[F.MIXED=2]="MIXED",F[F.DIGIT=3]="DIGIT",F[F.PUNCT=4]="PUNCT",F[F.BINARY=5]="BINARY"})(bt||(bt={}));class ct{decode(a){this.ddata=a;let l=a.getBits(),c=this.extractBits(l),h=this.correctBits(c),p=ct.convertBoolArrayToByteArray(h),g=ct.getEncodedData(h),w=new Oe(p,g,null,null);return w.setNumBits(h.length),w}static highLevelDecode(a){return this.getEncodedData(a)}static getEncodedData(a){let l=a.length,c=bt.UPPER,h=bt.UPPER,p="",g=0;for(;g<l;)if(h===bt.BINARY){if(l-g<5)break;let w=ct.readCode(a,g,5);if(g+=5,w===0){if(l-g<11)break;w=ct.readCode(a,g,11)+31,g+=11}for(let N=0;N<w;N++){if(l-g<8){g=l;break}const T=ct.readCode(a,g,8);p+=q.castAsNonUtf8Char(T),g+=8}h=c}else{let w=h===bt.DIGIT?4:5;if(l-g<w)break;let N=ct.readCode(a,g,w);g+=w;let T=ct.getCharacter(h,N);T.startsWith("CTRL_")?(c=h,h=ct.getTable(T.charAt(5)),T.charAt(6)==="L"&&(c=h)):(p+=T,h=c)}return p}static getTable(a){switch(a){case"L":return bt.LOWER;case"P":return bt.PUNCT;case"M":return bt.MIXED;case"D":return bt.DIGIT;case"B":return bt.BINARY;case"U":default:return bt.UPPER}}static getCharacter(a,l){switch(a){case bt.UPPER:return ct.UPPER_TABLE[l];case bt.LOWER:return ct.LOWER_TABLE[l];case bt.MIXED:return ct.MIXED_TABLE[l];case bt.PUNCT:return ct.PUNCT_TABLE[l];case bt.DIGIT:return ct.DIGIT_TABLE[l];default:throw new Ve("Bad table")}}correctBits(a){let l,c;this.ddata.getNbLayers()<=2?(c=6,l=Ge.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(c=8,l=Ge.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(c=10,l=Ge.AZTEC_DATA_10):(c=12,l=Ge.AZTEC_DATA_12);let h=this.ddata.getNbDatablocks(),p=a.length/c;if(p<h)throw new U;let g=a.length%c,w=new Int32Array(p);for(let G=0;G<p;G++,g+=c)w[G]=ct.readCode(a,g,c);try{new fe(l).decode(w,p-h)}catch(G){throw new U(G)}let N=(1<<c)-1,T=0;for(let G=0;G<h;G++){let le=w[G];if(le===0||le===N)throw new U;(le===1||le===N-1)&&T++}let D=new Array(h*c-T),B=0;for(let G=0;G<h;G++){let le=w[G];if(le===1||le===N-1)D.fill(le>1,B,B+c-1),B+=c-1;else for(let ye=c-1;ye>=0;--ye)D[B++]=(le&1<<ye)!==0}return D}extractBits(a){let l=this.ddata.isCompact(),c=this.ddata.getNbLayers(),h=(l?11:14)+c*4,p=new Int32Array(h),g=new Array(this.totalBitsInLayer(c,l));if(l)for(let w=0;w<p.length;w++)p[w]=w;else{let w=h+1+2*k.truncDivision(k.truncDivision(h,2)-1,15),N=h/2,T=k.truncDivision(w,2);for(let D=0;D<N;D++){let B=D+k.truncDivision(D,15);p[N-D-1]=T-B-1,p[N+D]=T+B+1}}for(let w=0,N=0;w<c;w++){let T=(c-w)*4+(l?9:12),D=w*2,B=h-1-D;for(let G=0;G<T;G++){let le=G*2;for(let ye=0;ye<2;ye++)g[N+le+ye]=a.get(p[D+ye],p[D+G]),g[N+2*T+le+ye]=a.get(p[D+G],p[B-ye]),g[N+4*T+le+ye]=a.get(p[B-ye],p[B-G]),g[N+6*T+le+ye]=a.get(p[B-G],p[D+ye])}N+=T*8}return g}static readCode(a,l,c){let h=0;for(let p=l;p<l+c;p++)h<<=1,a[p]&&(h|=1);return h}static readByte(a,l){let c=a.length-l;return c>=8?ct.readCode(a,l,8):ct.readCode(a,l,c)<<8-c}static convertBoolArrayToByteArray(a){let l=new Uint8Array((a.length+7)/8);for(let c=0;c<l.length;c++)l[c]=ct.readByte(a,8*c);return l}totalBitsInLayer(a,l){return((l?88:112)+16*a)*a}}ct.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ct.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ct.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ct.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ct.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class $e{constructor(){}static round(a){return a===NaN?0:a<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:a>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:a+(a<0?-.5:.5)|0}static distance(a,l,c,h){const p=a-c,g=l-h;return Math.sqrt(p*p+g*g)}static sum(a){let l=0;for(let c=0,h=a.length;c!==h;c++){const p=a[c];l+=p}return l}}class re{static floatToIntBits(a){return a}}re.MAX_VALUE=Number.MAX_SAFE_INTEGER;class oe{constructor(a,l){this.x=a,this.y=l}getX(){return this.x}getY(){return this.y}equals(a){if(a instanceof oe){const l=a;return this.x===l.x&&this.y===l.y}return!1}hashCode(){return 31*re.floatToIntBits(this.x)+re.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(a){const l=this.distance(a[0],a[1]),c=this.distance(a[1],a[2]),h=this.distance(a[0],a[2]);let p,g,w;if(c>=l&&c>=h?(g=a[0],p=a[1],w=a[2]):h>=c&&h>=l?(g=a[1],p=a[0],w=a[2]):(g=a[2],p=a[0],w=a[1]),this.crossProductZ(p,g,w)<0){const N=p;p=w,w=N}a[0]=p,a[1]=g,a[2]=w}static distance(a,l){return $e.distance(a.x,a.y,l.x,l.y)}static crossProductZ(a,l,c){const h=l.x,p=l.y;return(c.x-h)*(a.y-p)-(c.y-p)*(a.x-h)}}class ve{constructor(a,l){this.bits=a,this.points=l}getBits(){return this.bits}getPoints(){return this.points}}class ze extends ve{constructor(a,l,c,h,p){super(a,l),this.compact=c,this.nbDatablocks=h,this.nbLayers=p}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Be{constructor(a,l,c,h){this.image=a,this.height=a.getHeight(),this.width=a.getWidth(),l==null&&(l=Be.INIT_SIZE),c==null&&(c=a.getWidth()/2|0),h==null&&(h=a.getHeight()/2|0);const p=l/2|0;if(this.leftInit=c-p,this.rightInit=c+p,this.upInit=h-p,this.downInit=h+p,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new J}detect(){let a=this.leftInit,l=this.rightInit,c=this.upInit,h=this.downInit,p=!1,g=!0,w=!1,N=!1,T=!1,D=!1,B=!1;const G=this.width,le=this.height;for(;g;){g=!1;let ye=!0;for(;(ye||!N)&&l<G;)ye=this.containsBlackPoint(c,h,l,!1),ye?(l++,g=!0,N=!0):N||l++;if(l>=G){p=!0;break}let Ae=!0;for(;(Ae||!T)&&h<le;)Ae=this.containsBlackPoint(a,l,h,!0),Ae?(h++,g=!0,T=!0):T||h++;if(h>=le){p=!0;break}let Te=!0;for(;(Te||!D)&&a>=0;)Te=this.containsBlackPoint(c,h,a,!1),Te?(a--,g=!0,D=!0):D||a--;if(a<0){p=!0;break}let Ue=!0;for(;(Ue||!B)&&c>=0;)Ue=this.containsBlackPoint(a,l,c,!0),Ue?(c--,g=!0,B=!0):B||c--;if(c<0){p=!0;break}g&&(w=!0)}if(!p&&w){const ye=l-a;let Ae=null;for(let at=1;Ae===null&&at<ye;at++)Ae=this.getBlackPointOnSegment(a,h-at,a+at,h);if(Ae==null)throw new J;let Te=null;for(let at=1;Te===null&&at<ye;at++)Te=this.getBlackPointOnSegment(a,c+at,a+at,c);if(Te==null)throw new J;let Ue=null;for(let at=1;Ue===null&&at<ye;at++)Ue=this.getBlackPointOnSegment(l,c+at,l-at,c);if(Ue==null)throw new J;let nt=null;for(let at=1;nt===null&&at<ye;at++)nt=this.getBlackPointOnSegment(l,h-at,l-at,h);if(nt==null)throw new J;return this.centerEdges(nt,Ae,Ue,Te)}else throw new J}getBlackPointOnSegment(a,l,c,h){const p=$e.round($e.distance(a,l,c,h)),g=(c-a)/p,w=(h-l)/p,N=this.image;for(let T=0;T<p;T++){const D=$e.round(a+T*g),B=$e.round(l+T*w);if(N.get(D,B))return new oe(D,B)}return null}centerEdges(a,l,c,h){const p=a.getX(),g=a.getY(),w=l.getX(),N=l.getY(),T=c.getX(),D=c.getY(),B=h.getX(),G=h.getY(),le=Be.CORR;return p<this.width/2?[new oe(B-le,G+le),new oe(w+le,N+le),new oe(T-le,D-le),new oe(p+le,g-le)]:[new oe(B+le,G+le),new oe(w+le,N-le),new oe(T-le,D+le),new oe(p-le,g-le)]}containsBlackPoint(a,l,c,h){const p=this.image;if(h){for(let g=a;g<=l;g++)if(p.get(g,c))return!0}else for(let g=a;g<=l;g++)if(p.get(c,g))return!0;return!1}}Be.INIT_SIZE=10,Be.CORR=1;class We{static checkAndNudgePoints(a,l){const c=a.getWidth(),h=a.getHeight();let p=!0;for(let g=0;g<l.length&&p;g+=2){const w=Math.floor(l[g]),N=Math.floor(l[g+1]);if(w<-1||w>c||N<-1||N>h)throw new J;p=!1,w===-1?(l[g]=0,p=!0):w===c&&(l[g]=c-1,p=!0),N===-1?(l[g+1]=0,p=!0):N===h&&(l[g+1]=h-1,p=!0)}p=!0;for(let g=l.length-2;g>=0&&p;g-=2){const w=Math.floor(l[g]),N=Math.floor(l[g+1]);if(w<-1||w>c||N<-1||N>h)throw new J;p=!1,w===-1?(l[g]=0,p=!0):w===c&&(l[g]=c-1,p=!0),N===-1?(l[g+1]=0,p=!0):N===h&&(l[g+1]=h-1,p=!0)}}}class Qe{constructor(a,l,c,h,p,g,w,N,T){this.a11=a,this.a21=l,this.a31=c,this.a12=h,this.a22=p,this.a32=g,this.a13=w,this.a23=N,this.a33=T}static quadrilateralToQuadrilateral(a,l,c,h,p,g,w,N,T,D,B,G,le,ye,Ae,Te){const Ue=Qe.quadrilateralToSquare(a,l,c,h,p,g,w,N);return Qe.squareToQuadrilateral(T,D,B,G,le,ye,Ae,Te).times(Ue)}transformPoints(a){const l=a.length,c=this.a11,h=this.a12,p=this.a13,g=this.a21,w=this.a22,N=this.a23,T=this.a31,D=this.a32,B=this.a33;for(let G=0;G<l;G+=2){const le=a[G],ye=a[G+1],Ae=p*le+N*ye+B;a[G]=(c*le+g*ye+T)/Ae,a[G+1]=(h*le+w*ye+D)/Ae}}transformPointsWithValues(a,l){const c=this.a11,h=this.a12,p=this.a13,g=this.a21,w=this.a22,N=this.a23,T=this.a31,D=this.a32,B=this.a33,G=a.length;for(let le=0;le<G;le++){const ye=a[le],Ae=l[le],Te=p*ye+N*Ae+B;a[le]=(c*ye+g*Ae+T)/Te,l[le]=(h*ye+w*Ae+D)/Te}}static squareToQuadrilateral(a,l,c,h,p,g,w,N){const T=a-c+p-w,D=l-h+g-N;if(T===0&&D===0)return new Qe(c-a,p-c,a,h-l,g-h,l,0,0,1);{const B=c-p,G=w-p,le=h-g,ye=N-g,Ae=B*ye-G*le,Te=(T*ye-G*D)/Ae,Ue=(B*D-T*le)/Ae;return new Qe(c-a+Te*c,w-a+Ue*w,a,h-l+Te*h,N-l+Ue*N,l,Te,Ue,1)}}static quadrilateralToSquare(a,l,c,h,p,g,w,N){return Qe.squareToQuadrilateral(a,l,c,h,p,g,w,N).buildAdjoint()}buildAdjoint(){return new Qe(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(a){return new Qe(this.a11*a.a11+this.a21*a.a12+this.a31*a.a13,this.a11*a.a21+this.a21*a.a22+this.a31*a.a23,this.a11*a.a31+this.a21*a.a32+this.a31*a.a33,this.a12*a.a11+this.a22*a.a12+this.a32*a.a13,this.a12*a.a21+this.a22*a.a22+this.a32*a.a23,this.a12*a.a31+this.a22*a.a32+this.a32*a.a33,this.a13*a.a11+this.a23*a.a12+this.a33*a.a13,this.a13*a.a21+this.a23*a.a22+this.a33*a.a23,this.a13*a.a31+this.a23*a.a32+this.a33*a.a33)}}class yt extends We{sampleGrid(a,l,c,h,p,g,w,N,T,D,B,G,le,ye,Ae,Te,Ue,nt,at){const it=Qe.quadrilateralToQuadrilateral(h,p,g,w,N,T,D,B,G,le,ye,Ae,Te,Ue,nt,at);return this.sampleGridWithTransform(a,l,c,it)}sampleGridWithTransform(a,l,c,h){if(l<=0||c<=0)throw new J;const p=new Q(l,c),g=new Float32Array(2*l);for(let w=0;w<c;w++){const N=g.length,T=w+.5;for(let D=0;D<N;D+=2)g[D]=D/2+.5,g[D+1]=T;h.transformPoints(g),We.checkAndNudgePoints(a,g);try{for(let D=0;D<N;D+=2)a.get(Math.floor(g[D]),Math.floor(g[D+1]))&&p.set(D/2,w)}catch{throw new J}}return p}}class xt{static setGridSampler(a){xt.gridSampler=a}static getInstance(){return xt.gridSampler}}xt.gridSampler=new yt;class ht{constructor(a,l){this.x=a,this.y=l}toResultPoint(){return new oe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Dt{constructor(a){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=a}detect(){return this.detectMirror(!1)}detectMirror(a){let l=this.getMatrixCenter(),c=this.getBullsEyeCorners(l);if(a){let g=c[0];c[0]=c[2],c[2]=g}this.extractParameters(c);let h=this.sampleGrid(this.image,c[this.shift%4],c[(this.shift+1)%4],c[(this.shift+2)%4],c[(this.shift+3)%4]),p=this.getMatrixCornerPoints(c);return new ze(h,p,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(a){if(!this.isValidPoint(a[0])||!this.isValidPoint(a[1])||!this.isValidPoint(a[2])||!this.isValidPoint(a[3]))throw new J;let l=2*this.nbCenterLayers,c=new Int32Array([this.sampleLine(a[0],a[1],l),this.sampleLine(a[1],a[2],l),this.sampleLine(a[2],a[3],l),this.sampleLine(a[3],a[0],l)]);this.shift=this.getRotation(c,l);let h=0;for(let g=0;g<4;g++){let w=c[(this.shift+g)%4];this.compact?(h<<=7,h+=w>>1&127):(h<<=10,h+=(w>>2&992)+(w>>1&31))}let p=this.getCorrectedParameterData(h,this.compact);this.compact?(this.nbLayers=(p>>6)+1,this.nbDataBlocks=(p&63)+1):(this.nbLayers=(p>>11)+1,this.nbDataBlocks=(p&2047)+1)}getRotation(a,l){let c=0;a.forEach((h,p,g)=>{let w=(h>>l-2<<1)+(h&1);c=(c<<3)+w}),c=((c&1)<<11)+(c>>1);for(let h=0;h<4;h++)if(k.bitCount(c^this.EXPECTED_CORNER_BITS[h])<=2)return h;throw new J}getCorrectedParameterData(a,l){let c,h;l?(c=7,h=2):(c=10,h=4);let p=c-h,g=new Int32Array(c);for(let N=c-1;N>=0;--N)g[N]=a&15,a>>=4;try{new fe(Ge.AZTEC_PARAM).decode(g,p)}catch{throw new J}let w=0;for(let N=0;N<h;N++)w=(w<<4)+g[N];return w}getBullsEyeCorners(a){let l=a,c=a,h=a,p=a,g=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let B=this.getFirstDifferent(l,g,1,-1),G=this.getFirstDifferent(c,g,1,1),le=this.getFirstDifferent(h,g,-1,1),ye=this.getFirstDifferent(p,g,-1,-1);if(this.nbCenterLayers>2){let Ae=this.distancePoint(ye,B)*this.nbCenterLayers/(this.distancePoint(p,l)*(this.nbCenterLayers+2));if(Ae<.75||Ae>1.25||!this.isWhiteOrBlackRectangle(B,G,le,ye))break}l=B,c=G,h=le,p=ye,g=!g}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new J;this.compact=this.nbCenterLayers===5;let w=new oe(l.getX()+.5,l.getY()-.5),N=new oe(c.getX()+.5,c.getY()+.5),T=new oe(h.getX()-.5,h.getY()+.5),D=new oe(p.getX()-.5,p.getY()-.5);return this.expandSquare([w,N,T,D],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let a,l,c,h;try{let w=new Be(this.image).detect();a=w[0],l=w[1],c=w[2],h=w[3]}catch{let N=this.image.getWidth()/2,T=this.image.getHeight()/2;a=this.getFirstDifferent(new ht(N+7,T-7),!1,1,-1).toResultPoint(),l=this.getFirstDifferent(new ht(N+7,T+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new ht(N-7,T+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new ht(N-7,T-7),!1,-1,-1).toResultPoint()}let p=$e.round((a.getX()+h.getX()+l.getX()+c.getX())/4),g=$e.round((a.getY()+h.getY()+l.getY()+c.getY())/4);try{let w=new Be(this.image,15,p,g).detect();a=w[0],l=w[1],c=w[2],h=w[3]}catch{a=this.getFirstDifferent(new ht(p+7,g-7),!1,1,-1).toResultPoint(),l=this.getFirstDifferent(new ht(p+7,g+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new ht(p-7,g+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new ht(p-7,g-7),!1,-1,-1).toResultPoint()}return p=$e.round((a.getX()+h.getX()+l.getX()+c.getX())/4),g=$e.round((a.getY()+h.getY()+l.getY()+c.getY())/4),new ht(p,g)}getMatrixCornerPoints(a){return this.expandSquare(a,2*this.nbCenterLayers,this.getDimension())}sampleGrid(a,l,c,h,p){let g=xt.getInstance(),w=this.getDimension(),N=w/2-this.nbCenterLayers,T=w/2+this.nbCenterLayers;return g.sampleGrid(a,w,w,N,N,T,N,T,T,N,T,l.getX(),l.getY(),c.getX(),c.getY(),h.getX(),h.getY(),p.getX(),p.getY())}sampleLine(a,l,c){let h=0,p=this.distanceResultPoint(a,l),g=p/c,w=a.getX(),N=a.getY(),T=g*(l.getX()-a.getX())/p,D=g*(l.getY()-a.getY())/p;for(let B=0;B<c;B++)this.image.get($e.round(w+B*T),$e.round(N+B*D))&&(h|=1<<c-B-1);return h}isWhiteOrBlackRectangle(a,l,c,h){let p=3;a=new ht(a.getX()-p,a.getY()+p),l=new ht(l.getX()-p,l.getY()-p),c=new ht(c.getX()+p,c.getY()-p),h=new ht(h.getX()+p,h.getY()+p);let g=this.getColor(h,a);if(g===0)return!1;let w=this.getColor(a,l);return w!==g||(w=this.getColor(l,c),w!==g)?!1:(w=this.getColor(c,h),w===g)}getColor(a,l){let c=this.distancePoint(a,l),h=(l.getX()-a.getX())/c,p=(l.getY()-a.getY())/c,g=0,w=a.getX(),N=a.getY(),T=this.image.get(a.getX(),a.getY()),D=Math.ceil(c);for(let G=0;G<D;G++)w+=h,N+=p,this.image.get($e.round(w),$e.round(N))!==T&&g++;let B=g/c;return B>.1&&B<.9?0:B<=.1===T?1:-1}getFirstDifferent(a,l,c,h){let p=a.getX()+c,g=a.getY()+h;for(;this.isValid(p,g)&&this.image.get(p,g)===l;)p+=c,g+=h;for(p-=c,g-=h;this.isValid(p,g)&&this.image.get(p,g)===l;)p+=c;for(p-=c;this.isValid(p,g)&&this.image.get(p,g)===l;)g+=h;return g-=h,new ht(p,g)}expandSquare(a,l,c){let h=c/(2*l),p=a[0].getX()-a[2].getX(),g=a[0].getY()-a[2].getY(),w=(a[0].getX()+a[2].getX())/2,N=(a[0].getY()+a[2].getY())/2,T=new oe(w+h*p,N+h*g),D=new oe(w-h*p,N-h*g);p=a[1].getX()-a[3].getX(),g=a[1].getY()-a[3].getY(),w=(a[1].getX()+a[3].getX())/2,N=(a[1].getY()+a[3].getY())/2;let B=new oe(w+h*p,N+h*g),G=new oe(w-h*p,N-h*g);return[T,B,D,G]}isValid(a,l){return a>=0&&a<this.image.getWidth()&&l>0&&l<this.image.getHeight()}isValidPoint(a){let l=$e.round(a.getX()),c=$e.round(a.getY());return this.isValid(l,c)}distancePoint(a,l){return $e.distance(a.getX(),a.getY(),l.getX(),l.getY())}distanceResultPoint(a,l){return $e.distance(a.getX(),a.getY(),l.getX(),l.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(k.truncDivision(this.nbLayers-4,8)+1)+15}}class dt{decode(a,l=null){let c=null,h=new Dt(a.getBlackMatrix()),p=null,g=null;try{let D=h.detectMirror(!1);p=D.getPoints(),this.reportFoundResultPoints(l,p),g=new ct().decode(D)}catch(D){c=D}if(g==null)try{let D=h.detectMirror(!0);p=D.getPoints(),this.reportFoundResultPoints(l,p),g=new ct().decode(D)}catch(D){throw c??D}let w=new de(g.getText(),g.getRawBytes(),g.getNumBits(),p,he.AZTEC,I.currentTimeMillis()),N=g.getByteSegments();N!=null&&w.putMetadata(Le.BYTE_SEGMENTS,N);let T=g.getECLevel();return T!=null&&w.putMetadata(Le.ERROR_CORRECTION_LEVEL,T),w}reportFoundResultPoints(a,l){if(a!=null){let c=a.get(ne.NEED_RESULT_POINT_CALLBACK);c!=null&&l.forEach((h,p,g)=>{c.foundPossibleResultPoint(h)})}}reset(){}}class kn extends se{constructor(a=500){super(new dt,a)}}class Et{decode(a,l){try{return this.doDecode(a,l)}catch{if(l&&l.get(ne.TRY_HARDER)===!0&&a.isRotateSupported()){const p=a.rotateCounterClockwise(),g=this.doDecode(p,l),w=g.getResultMetadata();let N=270;w!==null&&w.get(Le.ORIENTATION)===!0&&(N=N+w.get(Le.ORIENTATION)%360),g.putMetadata(Le.ORIENTATION,N);const T=g.getResultPoints();if(T!==null){const D=p.getHeight();for(let B=0;B<T.length;B++)T[B]=new oe(D-T[B].getY()-1,T[B].getX())}return g}else throw new J}}reset(){}doDecode(a,l){const c=a.getWidth(),h=a.getHeight();let p=new R(c);const g=l&&l.get(ne.TRY_HARDER)===!0,w=Math.max(1,h>>(g?8:5));let N;g?N=h:N=15;const T=Math.trunc(h/2);for(let D=0;D<N;D++){const B=Math.trunc((D+1)/2),G=(D&1)===0,le=T+w*(G?B:-B);if(le<0||le>=h)break;try{p=a.getBlackRow(le,p)}catch{continue}for(let ye=0;ye<2;ye++){if(ye===1&&(p.reverse(),l&&l.get(ne.NEED_RESULT_POINT_CALLBACK)===!0)){const Ae=new Map;l.forEach((Te,Ue)=>Ae.set(Ue,Te)),Ae.delete(ne.NEED_RESULT_POINT_CALLBACK),l=Ae}try{const Ae=this.decodeRow(le,p,l);if(ye===1){Ae.putMetadata(Le.ORIENTATION,180);const Te=Ae.getResultPoints();Te!==null&&(Te[0]=new oe(c-Te[0].getX()-1,Te[0].getY()),Te[1]=new oe(c-Te[1].getX()-1,Te[1].getY()))}return Ae}catch{}}}throw new J}static recordPattern(a,l,c){const h=c.length;for(let T=0;T<h;T++)c[T]=0;const p=a.getSize();if(l>=p)throw new J;let g=!a.get(l),w=0,N=l;for(;N<p;){if(a.get(N)!==g)c[w]++;else{if(++w===h)break;c[w]=1,g=!g}N++}if(!(w===h||w===h-1&&N===p))throw new J}static recordPatternInReverse(a,l,c){let h=c.length,p=a.get(l);for(;l>0&&h>=0;)a.get(--l)!==p&&(h--,p=!p);if(h>=0)throw new J;Et.recordPattern(a,l+1,c)}static patternMatchVariance(a,l,c){const h=a.length;let p=0,g=0;for(let T=0;T<h;T++)p+=a[T],g+=l[T];if(p<g)return Number.POSITIVE_INFINITY;const w=p/g;c*=w;let N=0;for(let T=0;T<h;T++){const D=a[T],B=l[T]*w,G=D>B?D-B:B-D;if(G>c)return Number.POSITIVE_INFINITY;N+=G}return N/p}}class ot extends Et{static findStartPattern(a){const l=a.getSize(),c=a.getNextSet(0);let h=0,p=Int32Array.from([0,0,0,0,0,0]),g=c,w=!1;const N=6;for(let T=c;T<l;T++)if(a.get(T)!==w)p[h]++;else{if(h===N-1){let D=ot.MAX_AVG_VARIANCE,B=-1;for(let G=ot.CODE_START_A;G<=ot.CODE_START_C;G++){const le=Et.patternMatchVariance(p,ot.CODE_PATTERNS[G],ot.MAX_INDIVIDUAL_VARIANCE);le<D&&(D=le,B=G)}if(B>=0&&a.isRange(Math.max(0,g-(T-g)/2),g,!1))return Int32Array.from([g,T,B]);g+=p[0]+p[1],p=p.slice(2,p.length-1),p[h-1]=0,p[h]=0,h--}else h++;p[h]=1,w=!w}throw new J}static decodeCode(a,l,c){Et.recordPattern(a,c,l);let h=ot.MAX_AVG_VARIANCE,p=-1;for(let g=0;g<ot.CODE_PATTERNS.length;g++){const w=ot.CODE_PATTERNS[g],N=this.patternMatchVariance(l,w,ot.MAX_INDIVIDUAL_VARIANCE);N<h&&(h=N,p=g)}if(p>=0)return p;throw new J}decodeRow(a,l,c){const h=c&&c.get(ne.ASSUME_GS1)===!0,p=ot.findStartPattern(l),g=p[2];let w=0;const N=new Uint8Array(20);N[w++]=g;let T;switch(g){case ot.CODE_START_A:T=ot.CODE_CODE_A;break;case ot.CODE_START_B:T=ot.CODE_CODE_B;break;case ot.CODE_START_C:T=ot.CODE_CODE_C;break;default:throw new U}let D=!1,B=!1,G="",le=p[0],ye=p[1];const Ae=Int32Array.from([0,0,0,0,0,0]);let Te=0,Ue=0,nt=g,at=0,it=!0,Jt=!1,Ut=!1;for(;!D;){const Bs=B;switch(B=!1,Te=Ue,Ue=ot.decodeCode(l,Ae,ye),N[w++]=Ue,Ue!==ot.CODE_STOP&&(it=!0),Ue!==ot.CODE_STOP&&(at++,nt+=at*Ue),le=ye,ye+=Ae.reduce((Ki,Zi)=>Ki+Zi,0),Ue){case ot.CODE_START_A:case ot.CODE_START_B:case ot.CODE_START_C:throw new U}switch(T){case ot.CODE_CODE_A:if(Ue<64)Ut===Jt?G+=String.fromCharCode(32+Ue):G+=String.fromCharCode(32+Ue+128),Ut=!1;else if(Ue<96)Ut===Jt?G+=String.fromCharCode(Ue-64):G+=String.fromCharCode(Ue+64),Ut=!1;else switch(Ue!==ot.CODE_STOP&&(it=!1),Ue){case ot.CODE_FNC_1:h&&(G.length===0?G+="]C1":G+="");break;case ot.CODE_FNC_2:case ot.CODE_FNC_3:break;case ot.CODE_FNC_4_A:!Jt&&Ut?(Jt=!0,Ut=!1):Jt&&Ut?(Jt=!1,Ut=!1):Ut=!0;break;case ot.CODE_SHIFT:B=!0,T=ot.CODE_CODE_B;break;case ot.CODE_CODE_B:T=ot.CODE_CODE_B;break;case ot.CODE_CODE_C:T=ot.CODE_CODE_C;break;case ot.CODE_STOP:D=!0;break}break;case ot.CODE_CODE_B:if(Ue<96)Ut===Jt?G+=String.fromCharCode(32+Ue):G+=String.fromCharCode(32+Ue+128),Ut=!1;else switch(Ue!==ot.CODE_STOP&&(it=!1),Ue){case ot.CODE_FNC_1:h&&(G.length===0?G+="]C1":G+="");break;case ot.CODE_FNC_2:case ot.CODE_FNC_3:break;case ot.CODE_FNC_4_B:!Jt&&Ut?(Jt=!0,Ut=!1):Jt&&Ut?(Jt=!1,Ut=!1):Ut=!0;break;case ot.CODE_SHIFT:B=!0,T=ot.CODE_CODE_A;break;case ot.CODE_CODE_A:T=ot.CODE_CODE_A;break;case ot.CODE_CODE_C:T=ot.CODE_CODE_C;break;case ot.CODE_STOP:D=!0;break}break;case ot.CODE_CODE_C:if(Ue<100)Ue<10&&(G+="0"),G+=Ue;else switch(Ue!==ot.CODE_STOP&&(it=!1),Ue){case ot.CODE_FNC_1:h&&(G.length===0?G+="]C1":G+="");break;case ot.CODE_CODE_A:T=ot.CODE_CODE_A;break;case ot.CODE_CODE_B:T=ot.CODE_CODE_B;break;case ot.CODE_STOP:D=!0;break}break}Bs&&(T=T===ot.CODE_CODE_A?ot.CODE_CODE_B:ot.CODE_CODE_A)}const xr=ye-le;if(ye=l.getNextUnset(ye),!l.isRange(ye,Math.min(l.getSize(),ye+(ye-le)/2),!1))throw new J;if(nt-=at*Te,nt%103!==Te)throw new b;const Gr=G.length;if(Gr===0)throw new J;Gr>0&&it&&(T===ot.CODE_CODE_C?G=G.substring(0,Gr-2):G=G.substring(0,Gr-1));const cr=(p[1]+p[0])/2,fn=le+xr/2,rr=N.length,Er=new Uint8Array(rr);for(let Bs=0;Bs<rr;Bs++)Er[Bs]=N[Bs];const Fi=[new oe(cr,a),new oe(fn,a)];return new de(G,Er,0,Fi,he.CODE_128,new Date().getTime())}}ot.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ot.MAX_AVG_VARIANCE=.25,ot.MAX_INDIVIDUAL_VARIANCE=.7,ot.CODE_SHIFT=98,ot.CODE_CODE_C=99,ot.CODE_CODE_B=100,ot.CODE_CODE_A=101,ot.CODE_FNC_1=102,ot.CODE_FNC_2=97,ot.CODE_FNC_3=96,ot.CODE_FNC_4_A=101,ot.CODE_FNC_4_B=100,ot.CODE_START_A=103,ot.CODE_START_B=104,ot.CODE_START_C=105,ot.CODE_STOP=106;class Mt extends Et{constructor(a=!1,l=!1){super(),this.usingCheckDigit=a,this.extendedMode=l,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(a,l,c){let h=this.counters;h.fill(0),this.decodeRowResult="";let p=Mt.findAsteriskPattern(l,h),g=l.getNextSet(p[1]),w=l.getSize(),N,T;do{Mt.recordPattern(l,g,h);let Ae=Mt.toNarrowWidePattern(h);if(Ae<0)throw new J;N=Mt.patternToChar(Ae),this.decodeRowResult+=N,T=g;for(let Te of h)g+=Te;g=l.getNextSet(g)}while(N!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let D=0;for(let Ae of h)D+=Ae;let B=g-T-D;if(g!==w&&B*2<D)throw new J;if(this.usingCheckDigit){let Ae=this.decodeRowResult.length-1,Te=0;for(let Ue=0;Ue<Ae;Ue++)Te+=Mt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Ue));if(this.decodeRowResult.charAt(Ae)!==Mt.ALPHABET_STRING.charAt(Te%43))throw new b;this.decodeRowResult=this.decodeRowResult.substring(0,Ae)}if(this.decodeRowResult.length===0)throw new J;let G;this.extendedMode?G=Mt.decodeExtended(this.decodeRowResult):G=this.decodeRowResult;let le=(p[1]+p[0])/2,ye=T+D/2;return new de(G,null,0,[new oe(le,a),new oe(ye,a)],he.CODE_39,new Date().getTime())}static findAsteriskPattern(a,l){let c=a.getSize(),h=a.getNextSet(0),p=0,g=h,w=!1,N=l.length;for(let T=h;T<c;T++)if(a.get(T)!==w)l[p]++;else{if(p===N-1){if(this.toNarrowWidePattern(l)===Mt.ASTERISK_ENCODING&&a.isRange(Math.max(0,g-Math.floor((T-g)/2)),g,!1))return[g,T];g+=l[0]+l[1],l.copyWithin(0,2,2+p-1),l[p-1]=0,l[p]=0,p--}else p++;l[p]=1,w=!w}throw new J}static toNarrowWidePattern(a){let l=a.length,c=0,h;do{let p=2147483647;for(let N of a)N<p&&N>c&&(p=N);c=p,h=0;let g=0,w=0;for(let N=0;N<l;N++){let T=a[N];T>c&&(w|=1<<l-1-N,h++,g+=T)}if(h===3){for(let N=0;N<l&&h>0;N++){let T=a[N];if(T>c&&(h--,T*2>=g))return-1}return w}}while(h>3);return-1}static patternToChar(a){for(let l=0;l<Mt.CHARACTER_ENCODINGS.length;l++)if(Mt.CHARACTER_ENCODINGS[l]===a)return Mt.ALPHABET_STRING.charAt(l);if(a===Mt.ASTERISK_ENCODING)return"*";throw new J}static decodeExtended(a){let l=a.length,c="";for(let h=0;h<l;h++){let p=a.charAt(h);if(p==="+"||p==="$"||p==="%"||p==="/"){let g=a.charAt(h+1),w="\0";switch(p){case"+":if(g>="A"&&g<="Z")w=String.fromCharCode(g.charCodeAt(0)+32);else throw new U;break;case"$":if(g>="A"&&g<="Z")w=String.fromCharCode(g.charCodeAt(0)-64);else throw new U;break;case"%":if(g>="A"&&g<="E")w=String.fromCharCode(g.charCodeAt(0)-38);else if(g>="F"&&g<="J")w=String.fromCharCode(g.charCodeAt(0)-11);else if(g>="K"&&g<="O")w=String.fromCharCode(g.charCodeAt(0)+16);else if(g>="P"&&g<="T")w=String.fromCharCode(g.charCodeAt(0)+43);else if(g==="U")w="\0";else if(g==="V")w="@";else if(g==="W")w="`";else if(g==="X"||g==="Y"||g==="Z")w="";else throw new U;break;case"/":if(g>="A"&&g<="O")w=String.fromCharCode(g.charCodeAt(0)-32);else if(g==="Z")w=":";else throw new U;break}c+=w,h++}else c+=p}return c}}Mt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Mt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Mt.ASTERISK_ENCODING=148;class jt extends Et{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(a,l,c){let h=this.decodeStart(l),p=this.decodeEnd(l),g=new X;jt.decodeMiddle(l,h[1],p[0],g);let w=g.toString(),N=null;c!=null&&(N=c.get(ne.ALLOWED_LENGTHS)),N==null&&(N=jt.DEFAULT_ALLOWED_LENGTHS);let T=w.length,D=!1,B=0;for(let ye of N){if(T===ye){D=!0;break}ye>B&&(B=ye)}if(!D&&T>B&&(D=!0),!D)throw new U;const G=[new oe(h[1],a),new oe(p[0],a)];return new de(w,null,0,G,he.ITF,new Date().getTime())}static decodeMiddle(a,l,c,h){let p=new Int32Array(10),g=new Int32Array(5),w=new Int32Array(5);for(p.fill(0),g.fill(0),w.fill(0);l<c;){Et.recordPattern(a,l,p);for(let T=0;T<5;T++){let D=2*T;g[T]=p[D],w[T]=p[D+1]}let N=jt.decodeDigit(g);h.append(N.toString()),N=this.decodeDigit(w),h.append(N.toString()),p.forEach(function(T){l+=T})}}decodeStart(a){let l=jt.skipWhiteSpace(a),c=jt.findGuardPattern(a,l,jt.START_PATTERN);return this.narrowLineWidth=(c[1]-c[0])/4,this.validateQuietZone(a,c[0]),c}validateQuietZone(a,l){let c=this.narrowLineWidth*10;c=c<l?c:l;for(let h=l-1;c>0&&h>=0&&!a.get(h);h--)c--;if(c!==0)throw new J}static skipWhiteSpace(a){const l=a.getSize(),c=a.getNextSet(0);if(c===l)throw new J;return c}decodeEnd(a){a.reverse();try{let l=jt.skipWhiteSpace(a),c;try{c=jt.findGuardPattern(a,l,jt.END_PATTERN_REVERSED[0])}catch(p){p instanceof J&&(c=jt.findGuardPattern(a,l,jt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(a,c[0]);let h=c[0];return c[0]=a.getSize()-c[1],c[1]=a.getSize()-h,c}finally{a.reverse()}}static findGuardPattern(a,l,c){let h=c.length,p=new Int32Array(h),g=a.getSize(),w=!1,N=0,T=l;p.fill(0);for(let D=l;D<g;D++)if(a.get(D)!==w)p[N]++;else{if(N===h-1){if(Et.patternMatchVariance(p,c,jt.MAX_INDIVIDUAL_VARIANCE)<jt.MAX_AVG_VARIANCE)return[T,D];T+=p[0]+p[1],I.arraycopy(p,2,p,0,N-1),p[N-1]=0,p[N]=0,N--}else N++;p[N]=1,w=!w}throw new J}static decodeDigit(a){let l=jt.MAX_AVG_VARIANCE,c=-1,h=jt.PATTERNS.length;for(let p=0;p<h;p++){let g=jt.PATTERNS[p],w=Et.patternMatchVariance(a,g,jt.MAX_INDIVIDUAL_VARIANCE);w<l?(l=w,c=p):w===l&&(c=-1)}if(c>=0)return c%10;throw new J}}jt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],jt.MAX_AVG_VARIANCE=.38,jt.MAX_INDIVIDUAL_VARIANCE=.5,jt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],jt.START_PATTERN=Int32Array.from([1,1,1,1]),jt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class un extends Et{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(a){let l=!1,c,h=0,p=Int32Array.from([0,0,0]);for(;!l;){p=Int32Array.from([0,0,0]),c=un.findGuardPattern(a,h,!1,this.START_END_PATTERN,p);let g=c[0];h=c[1];let w=g-(h-g);w>=0&&(l=a.isRange(w,g,!1))}return c}static checkChecksum(a){return un.checkStandardUPCEANChecksum(a)}static checkStandardUPCEANChecksum(a){let l=a.length;if(l===0)return!1;let c=parseInt(a.charAt(l-1),10);return un.getStandardUPCEANChecksum(a.substring(0,l-1))===c}static getStandardUPCEANChecksum(a){let l=a.length,c=0;for(let h=l-1;h>=0;h-=2){let p=a.charAt(h).charCodeAt(0)-48;if(p<0||p>9)throw new U;c+=p}c*=3;for(let h=l-2;h>=0;h-=2){let p=a.charAt(h).charCodeAt(0)-48;if(p<0||p>9)throw new U;c+=p}return(1e3-c)%10}static decodeEnd(a,l){return un.findGuardPattern(a,l,!1,un.START_END_PATTERN,new Int32Array(un.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(a,l,c,h){return this.findGuardPattern(a,l,c,h,new Int32Array(h.length))}static findGuardPattern(a,l,c,h,p){let g=a.getSize();l=c?a.getNextUnset(l):a.getNextSet(l);let w=0,N=l,T=h.length,D=c;for(let B=l;B<g;B++)if(a.get(B)!==D)p[w]++;else{if(w===T-1){if(Et.patternMatchVariance(p,h,un.MAX_INDIVIDUAL_VARIANCE)<un.MAX_AVG_VARIANCE)return Int32Array.from([N,B]);N+=p[0]+p[1];let G=p.slice(2,p.length-1);for(let le=0;le<w-1;le++)p[le]=G[le];p[w-1]=0,p[w]=0,w--}else w++;p[w]=1,D=!D}throw new J}static decodeDigit(a,l,c,h){this.recordPattern(a,c,l);let p=this.MAX_AVG_VARIANCE,g=-1,w=h.length;for(let N=0;N<w;N++){let T=h[N],D=Et.patternMatchVariance(l,T,un.MAX_INDIVIDUAL_VARIANCE);D<p&&(p=D,g=N)}if(g>=0)return g;throw new J}}un.MAX_AVG_VARIANCE=.48,un.MAX_INDIVIDUAL_VARIANCE=.7,un.START_END_PATTERN=Int32Array.from([1,1,1]),un.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),un.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),un.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class tn{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(a,l,c){let h=this.decodeRowStringBuffer,p=this.decodeMiddle(l,c,h),g=h.toString(),w=tn.parseExtensionString(g),N=[new oe((c[0]+c[1])/2,a),new oe(p,a)],T=new de(g,null,0,N,he.UPC_EAN_EXTENSION,new Date().getTime());return w!=null&&T.putAllMetadata(w),T}decodeMiddle(a,l,c){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let p=a.getSize(),g=l[1],w=0;for(let T=0;T<5&&g<p;T++){let D=un.decodeDigit(a,h,g,un.L_AND_G_PATTERNS);c+=String.fromCharCode(48+D%10);for(let B of h)g+=B;D>=10&&(w|=1<<4-T),T!==4&&(g=a.getNextSet(g),g=a.getNextUnset(g))}if(c.length!==5)throw new J;let N=this.determineCheckDigit(w);if(tn.extensionChecksum(c.toString())!==N)throw new J;return g}static extensionChecksum(a){let l=a.length,c=0;for(let h=l-2;h>=0;h-=2)c+=a.charAt(h).charCodeAt(0)-48;c*=3;for(let h=l-1;h>=0;h-=2)c+=a.charAt(h).charCodeAt(0)-48;return c*=3,c%10}determineCheckDigit(a){for(let l=0;l<10;l++)if(a===this.CHECK_DIGIT_ENCODINGS[l])return l;throw new J}static parseExtensionString(a){if(a.length!==5)return null;let l=tn.parseExtension5String(a);return l==null?null:new Map([[Le.SUGGESTED_PRICE,l]])}static parseExtension5String(a){let l;switch(a.charAt(0)){case"0":l="";break;case"5":l="$";break;case"9":switch(a){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}l="";break;default:l="";break}let c=parseInt(a.substring(1)),h=(c/100).toString(),p=c%100,g=p<10?"0"+p:p.toString();return l+h+"."+g}}class Ks{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(a,l,c){let h=this.decodeRowStringBuffer,p=this.decodeMiddle(l,c,h),g=h.toString(),w=Ks.parseExtensionString(g),N=[new oe((c[0]+c[1])/2,a),new oe(p,a)],T=new de(g,null,0,N,he.UPC_EAN_EXTENSION,new Date().getTime());return w!=null&&T.putAllMetadata(w),T}decodeMiddle(a,l,c){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let p=a.getSize(),g=l[1],w=0;for(let N=0;N<2&&g<p;N++){let T=un.decodeDigit(a,h,g,un.L_AND_G_PATTERNS);c+=String.fromCharCode(48+T%10);for(let D of h)g+=D;T>=10&&(w|=1<<1-N),N!==1&&(g=a.getNextSet(g),g=a.getNextUnset(g))}if(c.length!==2)throw new J;if(parseInt(c.toString())%4!==w)throw new J;return g}static parseExtensionString(a){return a.length!==2?null:new Map([[Le.ISSUE_NUMBER,parseInt(a)]])}}class qn{static decodeRow(a,l,c){let h=un.findGuardPattern(l,c,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new tn().decodeRow(a,l,h)}catch{return new Ks().decodeRow(a,l,h)}}}qn.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class $t extends un{constructor(){super(),this.decodeRowStringBuffer="",$t.L_AND_G_PATTERNS=$t.L_PATTERNS.map(a=>Int32Array.from(a));for(let a=10;a<20;a++){let l=$t.L_PATTERNS[a-10],c=new Int32Array(l.length);for(let h=0;h<l.length;h++)c[h]=l[l.length-h-1];$t.L_AND_G_PATTERNS[a]=c}}decodeRow(a,l,c){let h=$t.findStartGuardPattern(l),p=c==null?null:c.get(ne.NEED_RESULT_POINT_CALLBACK);if(p!=null){const it=new oe((h[0]+h[1])/2,a);p.foundPossibleResultPoint(it)}let g=this.decodeMiddle(l,h,this.decodeRowStringBuffer),w=g.rowOffset,N=g.resultString;if(p!=null){const it=new oe(w,a);p.foundPossibleResultPoint(it)}let T=this.decodeEnd(l,w);if(p!=null){const it=new oe((T[0]+T[1])/2,a);p.foundPossibleResultPoint(it)}let D=T[1],B=D+(D-T[0]);if(B>=l.getSize()||!l.isRange(D,B,!1))throw new J;let G=N.toString();if(G.length<8)throw new U;if(!$t.checkChecksum(G))throw new b;let le=(h[1]+h[0])/2,ye=(T[1]+T[0])/2,Ae=this.getBarcodeFormat(),Te=[new oe(le,a),new oe(ye,a)],Ue=new de(G,null,0,Te,Ae,new Date().getTime()),nt=0;try{let it=qn.decodeRow(a,l,T[1]);Ue.putMetadata(Le.UPC_EAN_EXTENSION,it.getText()),Ue.putAllMetadata(it.getResultMetadata()),Ue.addResultPoints(it.getResultPoints()),nt=it.getText().length}catch{}let at=c==null?null:c.get(ne.ALLOWED_EAN_EXTENSIONS);if(at!=null){let it=!1;for(let Jt in at)if(nt.toString()===Jt){it=!0;break}if(!it)throw new J}return Ue}decodeEnd(a,l){return $t.findGuardPattern(a,l,!1,$t.START_END_PATTERN,new Int32Array($t.START_END_PATTERN.length).fill(0))}static checkChecksum(a){return $t.checkStandardUPCEANChecksum(a)}static checkStandardUPCEANChecksum(a){let l=a.length;if(l===0)return!1;let c=parseInt(a.charAt(l-1),10);return $t.getStandardUPCEANChecksum(a.substring(0,l-1))===c}static getStandardUPCEANChecksum(a){let l=a.length,c=0;for(let h=l-1;h>=0;h-=2){let p=a.charAt(h).charCodeAt(0)-48;if(p<0||p>9)throw new U;c+=p}c*=3;for(let h=l-2;h>=0;h-=2){let p=a.charAt(h).charCodeAt(0)-48;if(p<0||p>9)throw new U;c+=p}return(1e3-c)%10}}class ci extends $t{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(a,l,c){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let p=a.getSize(),g=l[1],w=0;for(let T=0;T<6&&g<p;T++){let D=$t.decodeDigit(a,h,g,$t.L_AND_G_PATTERNS);c+=String.fromCharCode(48+D%10);for(let B of h)g+=B;D>=10&&(w|=1<<5-T)}c=ci.determineFirstDigit(c,w),g=$t.findGuardPattern(a,g,!0,$t.MIDDLE_PATTERN,new Int32Array($t.MIDDLE_PATTERN.length).fill(0))[1];for(let T=0;T<6&&g<p;T++){let D=$t.decodeDigit(a,h,g,$t.L_PATTERNS);c+=String.fromCharCode(48+D);for(let B of h)g+=B}return{rowOffset:g,resultString:c}}getBarcodeFormat(){return he.EAN_13}static determineFirstDigit(a,l){for(let c=0;c<10;c++)if(l===this.FIRST_DIGIT_ENCODINGS[c])return a=String.fromCharCode(48+c)+a,a;throw new J}}ci.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Wn extends $t{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(a,l,c){const h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let p=a.getSize(),g=l[1];for(let N=0;N<4&&g<p;N++){let T=$t.decodeDigit(a,h,g,$t.L_PATTERNS);c+=String.fromCharCode(48+T);for(let D of h)g+=D}g=$t.findGuardPattern(a,g,!0,$t.MIDDLE_PATTERN,new Int32Array($t.MIDDLE_PATTERN.length).fill(0))[1];for(let N=0;N<4&&g<p;N++){let T=$t.decodeDigit(a,h,g,$t.L_PATTERNS);c+=String.fromCharCode(48+T);for(let D of h)g+=D}return{rowOffset:g,resultString:c}}getBarcodeFormat(){return he.EAN_8}}class Vt extends $t{constructor(){super(...arguments),this.ean13Reader=new ci}getBarcodeFormat(){return he.UPC_A}decode(a,l){return this.maybeReturnResult(this.ean13Reader.decode(a))}decodeRow(a,l,c){return this.maybeReturnResult(this.ean13Reader.decodeRow(a,l,c))}decodeMiddle(a,l,c){return this.ean13Reader.decodeMiddle(a,l,c)}maybeReturnResult(a){let l=a.getText();if(l.charAt(0)==="0"){let c=new de(l.substring(1),null,null,a.getResultPoints(),he.UPC_A);return a.getResultMetadata()!=null&&c.putAllMetadata(a.getResultMetadata()),c}else throw new J}reset(){this.ean13Reader.reset()}}class Xt extends $t{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(a,l,c){const h=this.decodeMiddleCounters.map(T=>T);h[0]=0,h[1]=0,h[2]=0,h[3]=0;const p=a.getSize();let g=l[1],w=0;for(let T=0;T<6&&g<p;T++){const D=Xt.decodeDigit(a,h,g,Xt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+D%10);for(let B of h)g+=B;D>=10&&(w|=1<<5-T)}let N=Xt.determineNumSysAndCheckDigit(c,w);return{rowOffset:g,resultString:N}}decodeEnd(a,l){return Xt.findGuardPatternWithoutCounters(a,l,!0,Xt.MIDDLE_END_PATTERN)}checkChecksum(a){return $t.checkChecksum(Xt.convertUPCEtoUPCA(a))}static determineNumSysAndCheckDigit(a,l){for(let c=0;c<=1;c++)for(let h=0;h<10;h++)if(l===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[c][h]){let p=String.fromCharCode(48+c),g=String.fromCharCode(48+h);return p+a+g}throw J.getNotFoundInstance()}getBarcodeFormat(){return he.UPC_E}static convertUPCEtoUPCA(a){const l=a.slice(1,7).split("").map(p=>p.charCodeAt(0)),c=new X;c.append(a.charAt(0));let h=l[5];switch(h){case 0:case 1:case 2:c.appendChars(l,0,2),c.append(h),c.append("0000"),c.appendChars(l,2,3);break;case 3:c.appendChars(l,0,3),c.append("00000"),c.appendChars(l,3,2);break;case 4:c.appendChars(l,0,4),c.append("00000"),c.append(l[4]);break;default:c.appendChars(l,0,5),c.append("0000"),c.append(h);break}return a.length>=8&&c.append(a.charAt(7)),c.toString()}}Xt.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Xt.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Zs extends Et{constructor(a){super();let l=a==null?null:a.get(ne.POSSIBLE_FORMATS),c=[];r(l)?(c.push(new ci),c.push(new Vt),c.push(new Wn),c.push(new Xt)):(l.indexOf(he.EAN_13)>-1&&c.push(new ci),l.indexOf(he.UPC_A)>-1&&c.push(new Vt),l.indexOf(he.EAN_8)>-1&&c.push(new Wn),l.indexOf(he.UPC_E)>-1&&c.push(new Xt)),this.readers=c}decodeRow(a,l,c){for(let h of this.readers)try{const p=h.decodeRow(a,l,c),g=p.getBarcodeFormat()===he.EAN_13&&p.getText().charAt(0)==="0",w=c==null?null:c.get(ne.POSSIBLE_FORMATS),N=w==null||w.includes(he.UPC_A);if(g&&N){const T=p.getRawBytes(),D=new de(p.getText().substring(1),T,T?T.length:null,p.getResultPoints(),he.UPC_A);return D.putAllMetadata(p.getResultMetadata()),D}return p}catch{}throw new J}reset(){for(let a of this.readers)a.reset()}}class pn extends Et{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(a,l){for(let c=0;c<l.length;c++)if(Et.patternMatchVariance(a,l[c],pn.MAX_INDIVIDUAL_VARIANCE)<pn.MAX_AVG_VARIANCE)return c;throw new J}static count(a){return $e.sum(new Int32Array(a))}static increment(a,l){let c=0,h=l[0];for(let p=1;p<a.length;p++)l[p]>h&&(h=l[p],c=p);a[c]++}static decrement(a,l){let c=0,h=l[0];for(let p=1;p<a.length;p++)l[p]<h&&(h=l[p],c=p);a[c]--}static isFinderPattern(a){let l=a[0]+a[1],c=l+a[2]+a[3],h=l/c;if(h>=pn.MIN_FINDER_PATTERN_RATIO&&h<=pn.MAX_FINDER_PATTERN_RATIO){let p=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;for(let w of a)w>g&&(g=w),w<p&&(p=w);return g<10*p}return!1}}pn.MAX_AVG_VARIANCE=.2,pn.MAX_INDIVIDUAL_VARIANCE=.45,pn.MIN_FINDER_PATTERN_RATIO=9.5/12,pn.MAX_FINDER_PATTERN_RATIO=12.5/14;class ui{constructor(a,l){this.value=a,this.checksumPortion=l}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(a){if(!(a instanceof ui))return!1;const l=a;return this.value===l.value&&this.checksumPortion===l.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Di{constructor(a,l,c,h,p){this.value=a,this.startEnd=l,this.value=a,this.startEnd=l,this.resultPoints=new Array,this.resultPoints.push(new oe(c,p)),this.resultPoints.push(new oe(h,p))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(a){if(!(a instanceof Di))return!1;const l=a;return this.value===l.value}hashCode(){return this.value}}class _t{constructor(){}static getRSSvalue(a,l,c){let h=0;for(let N of a)h+=N;let p=0,g=0,w=a.length;for(let N=0;N<w-1;N++){let T;for(T=1,g|=1<<N;T<a[N];T++,g&=~(1<<N)){let D=_t.combins(h-T-1,w-N-2);if(c&&g===0&&h-T-(w-N-1)>=w-N-1&&(D-=_t.combins(h-T-(w-N),w-N-2)),w-N-1>1){let B=0;for(let G=h-T-(w-N-2);G>l;G--)B+=_t.combins(h-T-G-1,w-N-3);D-=B*(w-1-N)}else h-T>l&&D--;p+=D}h-=T}return p}static combins(a,l){let c,h;a-l>l?(h=l,c=a-l):(h=a-l,c=l);let p=1,g=1;for(let w=a;w>c;w--)p*=w,g<=h&&(p/=g,g++);for(;g<=h;)p/=g,g++;return p}}class us{static buildBitArray(a){let l=a.length*2-1;a[a.length-1].getRightChar()==null&&(l-=1);let c=12*l,h=new R(c),p=0,w=a[0].getRightChar().getValue();for(let N=11;N>=0;--N)w&1<<N&&h.set(p),p++;for(let N=1;N<a.length;++N){let T=a[N],D=T.getLeftChar().getValue();for(let B=11;B>=0;--B)D&1<<B&&h.set(p),p++;if(T.getRightChar()!=null){let B=T.getRightChar().getValue();for(let G=11;G>=0;--G)B&1<<G&&h.set(p),p++}}return h}}class Jr{constructor(a,l){l?this.decodedInformation=null:(this.finished=a,this.decodedInformation=l)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ei{constructor(a){this.newPosition=a}getNewPosition(){return this.newPosition}}class gn extends ei{constructor(a,l){super(a),this.value=l}getValue(){return this.value}isFNC1(){return this.value===gn.FNC1}}gn.FNC1="$";class Ln extends ei{constructor(a,l,c){super(a),c?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=l}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Rn extends ei{constructor(a,l,c){if(super(a),l<0||l>10||c<0||c>10)throw new U;this.firstDigit=l,this.secondDigit=c}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Rn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Rn.FNC1}isAnyFNC1(){return this.firstDigit===Rn.FNC1||this.secondDigit===Rn.FNC1}}Rn.FNC1=10;class mt{constructor(){}static parseFieldsInGeneralPurpose(a){if(!a)return null;if(a.length<2)throw new J;let l=a.substring(0,2);for(let p of mt.TWO_DIGIT_DATA_LENGTH)if(p[0]===l)return p[1]===mt.VARIABLE_LENGTH?mt.processVariableAI(2,p[2],a):mt.processFixedAI(2,p[1],a);if(a.length<3)throw new J;let c=a.substring(0,3);for(let p of mt.THREE_DIGIT_DATA_LENGTH)if(p[0]===c)return p[1]===mt.VARIABLE_LENGTH?mt.processVariableAI(3,p[2],a):mt.processFixedAI(3,p[1],a);for(let p of mt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(p[0]===c)return p[1]===mt.VARIABLE_LENGTH?mt.processVariableAI(4,p[2],a):mt.processFixedAI(4,p[1],a);if(a.length<4)throw new J;let h=a.substring(0,4);for(let p of mt.FOUR_DIGIT_DATA_LENGTH)if(p[0]===h)return p[1]===mt.VARIABLE_LENGTH?mt.processVariableAI(4,p[2],a):mt.processFixedAI(4,p[1],a);throw new J}static processFixedAI(a,l,c){if(c.length<a)throw new J;let h=c.substring(0,a);if(c.length<a+l)throw new J;let p=c.substring(a,a+l),g=c.substring(a+l),w="("+h+")"+p,N=mt.parseFieldsInGeneralPurpose(g);return N==null?w:w+N}static processVariableAI(a,l,c){let h=c.substring(0,a),p;c.length<a+l?p=c.length:p=a+l;let g=c.substring(a,p),w=c.substring(p),N="("+h+")"+g,T=mt.parseFieldsInGeneralPurpose(w);return T==null?N:N+T}}mt.VARIABLE_LENGTH=[],mt.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",mt.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",mt.VARIABLE_LENGTH,20],["22",mt.VARIABLE_LENGTH,29],["30",mt.VARIABLE_LENGTH,8],["37",mt.VARIABLE_LENGTH,8],["90",mt.VARIABLE_LENGTH,30],["91",mt.VARIABLE_LENGTH,30],["92",mt.VARIABLE_LENGTH,30],["93",mt.VARIABLE_LENGTH,30],["94",mt.VARIABLE_LENGTH,30],["95",mt.VARIABLE_LENGTH,30],["96",mt.VARIABLE_LENGTH,30],["97",mt.VARIABLE_LENGTH,3],["98",mt.VARIABLE_LENGTH,30],["99",mt.VARIABLE_LENGTH,30]],mt.THREE_DIGIT_DATA_LENGTH=[["240",mt.VARIABLE_LENGTH,30],["241",mt.VARIABLE_LENGTH,30],["242",mt.VARIABLE_LENGTH,6],["250",mt.VARIABLE_LENGTH,30],["251",mt.VARIABLE_LENGTH,30],["253",mt.VARIABLE_LENGTH,17],["254",mt.VARIABLE_LENGTH,20],["400",mt.VARIABLE_LENGTH,30],["401",mt.VARIABLE_LENGTH,30],["402",17],["403",mt.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",mt.VARIABLE_LENGTH,20],["421",mt.VARIABLE_LENGTH,15],["422",3],["423",mt.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],mt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",mt.VARIABLE_LENGTH,15],["391",mt.VARIABLE_LENGTH,18],["392",mt.VARIABLE_LENGTH,15],["393",mt.VARIABLE_LENGTH,18],["703",mt.VARIABLE_LENGTH,30]],mt.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",mt.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",mt.VARIABLE_LENGTH,20],["8003",mt.VARIABLE_LENGTH,30],["8004",mt.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",mt.VARIABLE_LENGTH,30],["8008",mt.VARIABLE_LENGTH,12],["8018",18],["8020",mt.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",mt.VARIABLE_LENGTH,70],["8200",mt.VARIABLE_LENGTH,70]];class vi{constructor(a){this.buffer=new X,this.information=a}decodeAllCodes(a,l){let c=l,h=null;do{let p=this.decodeGeneralPurposeField(c,h),g=mt.parseFieldsInGeneralPurpose(p.getNewString());if(g!=null&&a.append(g),p.isRemaining()?h=""+p.getRemainingValue():h=null,c===p.getNewPosition())break;c=p.getNewPosition()}while(!0);return a.toString()}isStillNumeric(a){if(a+7>this.information.getSize())return a+4<=this.information.getSize();for(let l=a;l<a+3;++l)if(this.information.get(l))return!0;return this.information.get(a+3)}decodeNumeric(a){if(a+7>this.information.getSize()){let p=this.extractNumericValueFromBitArray(a,4);return p===0?new Rn(this.information.getSize(),Rn.FNC1,Rn.FNC1):new Rn(this.information.getSize(),p-1,Rn.FNC1)}let l=this.extractNumericValueFromBitArray(a,7),c=(l-8)/11,h=(l-8)%11;return new Rn(a+7,c,h)}extractNumericValueFromBitArray(a,l){return vi.extractNumericValueFromBitArray(this.information,a,l)}static extractNumericValueFromBitArray(a,l,c){let h=0;for(let p=0;p<c;++p)a.get(l+p)&&(h|=1<<c-p-1);return h}decodeGeneralPurposeField(a,l){this.buffer.setLengthToZero(),l!=null&&this.buffer.append(l),this.current.setPosition(a);let c=this.parseBlocks();return c!=null&&c.isRemaining()?new Ln(this.current.getPosition(),this.buffer.toString(),c.getRemainingValue()):new Ln(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let a,l;do{let c=this.current.getPosition();if(this.current.isAlpha()?(l=this.parseAlphaBlock(),a=l.isFinished()):this.current.isIsoIec646()?(l=this.parseIsoIec646Block(),a=l.isFinished()):(l=this.parseNumericBlock(),a=l.isFinished()),!(c!==this.current.getPosition())&&!a)break}while(!a);return l.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let a=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFirstDigitFNC1()){let l;return a.isSecondDigitFNC1()?l=new Ln(this.current.getPosition(),this.buffer.toString()):l=new Ln(this.current.getPosition(),this.buffer.toString(),a.getSecondDigit()),new Jr(!0,l)}if(this.buffer.append(a.getFirstDigit()),a.isSecondDigitFNC1()){let l=new Ln(this.current.getPosition(),this.buffer.toString());return new Jr(!0,l)}this.buffer.append(a.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Jr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let a=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFNC1()){let l=new Ln(this.current.getPosition(),this.buffer.toString());return new Jr(!0,l)}this.buffer.append(a.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Jr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let a=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFNC1()){let l=new Ln(this.current.getPosition(),this.buffer.toString());return new Jr(!0,l)}this.buffer.append(a.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Jr(!1)}isStillIsoIec646(a){if(a+5>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(a,5);if(l>=5&&l<16)return!0;if(a+7>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(a,7);if(c>=64&&c<116)return!0;if(a+8>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(a,8);return h>=232&&h<253}decodeIsoIec646(a){let l=this.extractNumericValueFromBitArray(a,5);if(l===15)return new gn(a+5,gn.FNC1);if(l>=5&&l<15)return new gn(a+5,"0"+(l-5));let c=this.extractNumericValueFromBitArray(a,7);if(c>=64&&c<90)return new gn(a+7,""+(c+1));if(c>=90&&c<116)return new gn(a+7,""+(c+7));let h=this.extractNumericValueFromBitArray(a,8),p;switch(h){case 232:p="!";break;case 233:p='"';break;case 234:p="%";break;case 235:p="&";break;case 236:p="'";break;case 237:p="(";break;case 238:p=")";break;case 239:p="*";break;case 240:p="+";break;case 241:p=",";break;case 242:p="-";break;case 243:p=".";break;case 244:p="/";break;case 245:p=":";break;case 246:p=";";break;case 247:p="<";break;case 248:p="=";break;case 249:p=">";break;case 250:p="?";break;case 251:p="_";break;case 252:p=" ";break;default:throw new U}return new gn(a+8,p)}isStillAlpha(a){if(a+5>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(a,5);if(l>=5&&l<16)return!0;if(a+6>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(a,6);return c>=16&&c<63}decodeAlphanumeric(a){let l=this.extractNumericValueFromBitArray(a,5);if(l===15)return new gn(a+5,gn.FNC1);if(l>=5&&l<15)return new gn(a+5,"0"+(l-5));let c=this.extractNumericValueFromBitArray(a,6);if(c>=32&&c<58)return new gn(a+6,""+(c+33));let h;switch(c){case 58:h="*";break;case 59:h=",";break;case 60:h="-";break;case 61:h=".";break;case 62:h="/";break;default:throw new Ve("Decoding invalid alphanumeric value: "+c)}return new gn(a+6,h)}isAlphaTo646ToAlphaLatch(a){if(a+1>this.information.getSize())return!1;for(let l=0;l<5&&l+a<this.information.getSize();++l)if(l===2){if(!this.information.get(a+2))return!1}else if(this.information.get(a+l))return!1;return!0}isAlphaOr646ToNumericLatch(a){if(a+3>this.information.getSize())return!1;for(let l=a;l<a+3;++l)if(this.information.get(l))return!1;return!0}isNumericToAlphaNumericLatch(a){if(a+1>this.information.getSize())return!1;for(let l=0;l<4&&l+a<this.information.getSize();++l)if(this.information.get(a+l))return!1;return!0}}class Ri{constructor(a){this.information=a,this.generalDecoder=new vi(a)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Mn extends Ri{constructor(a){super(a)}encodeCompressedGtin(a,l){a.append("(01)");let c=a.length();a.append("9"),this.encodeCompressedGtinWithoutAI(a,l,c)}encodeCompressedGtinWithoutAI(a,l,c){for(let h=0;h<4;++h){let p=this.getGeneralDecoder().extractNumericValueFromBitArray(l+10*h,10);p/100===0&&a.append("0"),p/10===0&&a.append("0"),a.append(p)}Mn.appendCheckDigit(a,c)}static appendCheckDigit(a,l){let c=0;for(let h=0;h<13;h++){let p=a.charAt(h+l).charCodeAt(0)-48;c+=h&1?p:3*p}c=10-c%10,c===10&&(c=0),a.append(c)}}Mn.GTIN_SIZE=40;class ti extends Mn{constructor(a){super(a)}parseInformation(){let a=new X;a.append("(01)");let l=a.length(),c=this.getGeneralDecoder().extractNumericValueFromBitArray(ti.HEADER_SIZE,4);return a.append(c),this.encodeCompressedGtinWithoutAI(a,ti.HEADER_SIZE+4,l),this.getGeneralDecoder().decodeAllCodes(a,ti.HEADER_SIZE+44)}}ti.HEADER_SIZE=4;class Mi extends Ri{constructor(a){super(a)}parseInformation(){let a=new X;return this.getGeneralDecoder().decodeAllCodes(a,Mi.HEADER_SIZE)}}Mi.HEADER_SIZE=5;class di extends Mn{constructor(a){super(a)}encodeCompressedWeight(a,l,c){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(l,c);this.addWeightCode(a,h);let p=this.checkWeight(h),g=1e5;for(let w=0;w<5;++w)p/g===0&&a.append("0"),g/=10;a.append(p)}}class Ar extends di{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()!=Ar.HEADER_SIZE+di.GTIN_SIZE+Ar.WEIGHT_SIZE)throw new J;let a=new X;return this.encodeCompressedGtin(a,Ar.HEADER_SIZE),this.encodeCompressedWeight(a,Ar.HEADER_SIZE+di.GTIN_SIZE,Ar.WEIGHT_SIZE),a.toString()}}Ar.HEADER_SIZE=5,Ar.WEIGHT_SIZE=15;class qa extends Ar{constructor(a){super(a)}addWeightCode(a,l){a.append("(3103)")}checkWeight(a){return a}}class No extends Ar{constructor(a){super(a)}addWeightCode(a,l){l<1e4?a.append("(3202)"):a.append("(3203)")}checkWeight(a){return a<1e4?a:a-1e4}}class hi extends Mn{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<hi.HEADER_SIZE+Mn.GTIN_SIZE)throw new J;let a=new X;this.encodeCompressedGtin(a,hi.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(hi.HEADER_SIZE+Mn.GTIN_SIZE,hi.LAST_DIGIT_SIZE);a.append("(392"),a.append(l),a.append(")");let c=this.getGeneralDecoder().decodeGeneralPurposeField(hi.HEADER_SIZE+Mn.GTIN_SIZE+hi.LAST_DIGIT_SIZE,null);return a.append(c.getNewString()),a.toString()}}hi.HEADER_SIZE=8,hi.LAST_DIGIT_SIZE=2;class gr extends Mn{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<gr.HEADER_SIZE+Mn.GTIN_SIZE)throw new J;let a=new X;this.encodeCompressedGtin(a,gr.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(gr.HEADER_SIZE+Mn.GTIN_SIZE,gr.LAST_DIGIT_SIZE);a.append("(393"),a.append(l),a.append(")");let c=this.getGeneralDecoder().extractNumericValueFromBitArray(gr.HEADER_SIZE+Mn.GTIN_SIZE+gr.LAST_DIGIT_SIZE,gr.FIRST_THREE_DIGITS_SIZE);c/100==0&&a.append("0"),c/10==0&&a.append("0"),a.append(c);let h=this.getGeneralDecoder().decodeGeneralPurposeField(gr.HEADER_SIZE+Mn.GTIN_SIZE+gr.LAST_DIGIT_SIZE+gr.FIRST_THREE_DIGITS_SIZE,null);return a.append(h.getNewString()),a.toString()}}gr.HEADER_SIZE=8,gr.LAST_DIGIT_SIZE=2,gr.FIRST_THREE_DIGITS_SIZE=10;class bn extends di{constructor(a,l,c){super(a),this.dateCode=c,this.firstAIdigits=l}parseInformation(){if(this.getInformation().getSize()!=bn.HEADER_SIZE+bn.GTIN_SIZE+bn.WEIGHT_SIZE+bn.DATE_SIZE)throw new J;let a=new X;return this.encodeCompressedGtin(a,bn.HEADER_SIZE),this.encodeCompressedWeight(a,bn.HEADER_SIZE+bn.GTIN_SIZE,bn.WEIGHT_SIZE),this.encodeCompressedDate(a,bn.HEADER_SIZE+bn.GTIN_SIZE+bn.WEIGHT_SIZE),a.toString()}encodeCompressedDate(a,l){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(l,bn.DATE_SIZE);if(c==38400)return;a.append("("),a.append(this.dateCode),a.append(")");let h=c%32;c/=32;let p=c%12+1;c/=12;let g=c;g/10==0&&a.append("0"),a.append(g),p/10==0&&a.append("0"),a.append(p),h/10==0&&a.append("0"),a.append(h)}addWeightCode(a,l){a.append("("),a.append(this.firstAIdigits),a.append(l/1e5),a.append(")")}checkWeight(a){return a%1e5}}bn.HEADER_SIZE=8,bn.WEIGHT_SIZE=20,bn.DATE_SIZE=16;function Ll(F){try{if(F.get(1))return new ti(F);if(!F.get(2))return new Mi(F);switch(vi.extractNumericValueFromBitArray(F,1,4)){case 4:return new qa(F);case 5:return new No(F)}switch(vi.extractNumericValueFromBitArray(F,1,5)){case 12:return new hi(F);case 13:return new gr(F)}switch(vi.extractNumericValueFromBitArray(F,1,7)){case 56:return new bn(F,"310","11");case 57:return new bn(F,"320","11");case 58:return new bn(F,"310","13");case 59:return new bn(F,"320","13");case 60:return new bn(F,"310","15");case 61:return new bn(F,"320","15");case 62:return new bn(F,"310","17");case 63:return new bn(F,"320","17")}}catch(a){throw console.log(a),new Ve("unknown decoder: "+F)}}class Ps{constructor(a,l,c,h){this.leftchar=a,this.rightchar=l,this.finderpattern=c,this.maybeLast=h}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(a,l){return a instanceof Ps?Ps.equalsOrNull(a.leftchar,l.leftchar)&&Ps.equalsOrNull(a.rightchar,l.rightchar)&&Ps.equalsOrNull(a.finderpattern,l.finderpattern):!1}static equalsOrNull(a,l){return a===null?l===null:Ps.equals(a,l)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Pl{constructor(a,l,c){this.pairs=a,this.rowNumber=l,this.wasReversed=c}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(a){return this.checkEqualitity(this,a)}toString(){return"{ "+this.pairs+" }"}equals(a,l){return a instanceof Pl?this.checkEqualitity(a,l)&&a.wasReversed===l.wasReversed:!1}checkEqualitity(a,l){if(!a||!l)return;let c;return a.forEach((h,p)=>{l.forEach(g=>{h.getLeftChar().getValue()===g.getLeftChar().getValue()&&h.getRightChar().getValue()===g.getRightChar().getValue()&&h.getFinderPatter().getValue()===g.getFinderPatter().getValue()&&(c=!0)})}),c}}class Je extends pn{constructor(a){super(...arguments),this.pairs=new Array(Je.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=a===!0}decodeRow(a,l,c){this.pairs.length=0,this.startFromEven=!1;try{return Je.constructResult(this.decodeRow2pairs(a,l))}catch(h){this.verbose&&console.log(h)}return this.pairs.length=0,this.startFromEven=!0,Je.constructResult(this.decodeRow2pairs(a,l))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(a,l){let c=!1;for(;!c;)try{this.pairs.push(this.retrieveNextPair(l,this.pairs,a))}catch(p){if(p instanceof J){if(!this.pairs.length)throw new J;c=!0}}if(this.checkChecksum())return this.pairs;let h;if(this.rows.length?h=!0:h=!1,this.storeRow(a,!1),h){let p=this.checkRowsBoolean(!1);if(p!=null||(p=this.checkRowsBoolean(!0),p!=null))return p}throw new J}checkRowsBoolean(a){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,a&&(this.rows=this.rows.reverse());let l=null;try{l=this.checkRows(new Array,0)}catch(c){this.verbose&&console.log(c)}return a&&(this.rows=this.rows.reverse()),l}checkRows(a,l){for(let c=l;c<this.rows.length;c++){let h=this.rows[c];this.pairs.length=0;for(let g of a)this.pairs.push(g.getPairs());if(this.pairs.push(h.getPairs()),!Je.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let p=new Array(a);p.push(h);try{return this.checkRows(p,c+1)}catch(g){this.verbose&&console.log(g)}}throw new J}static isValidSequence(a){for(let l of Je.FINDER_PATTERN_SEQUENCES){if(a.length>l.length)continue;let c=!0;for(let h=0;h<a.length;h++)if(a[h].getFinderPattern().getValue()!=l[h]){c=!1;break}if(c)return!0}return!1}storeRow(a,l){let c=0,h=!1,p=!1;for(;c<this.rows.length;){let g=this.rows[c];if(g.getRowNumber()>a){p=g.isEquivalent(this.pairs);break}h=g.isEquivalent(this.pairs),c++}p||h||Je.isPartialRow(this.pairs,this.rows)||(this.rows.push(c,new Pl(this.pairs,a,l)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(a,l){for(let c of l)if(c.getPairs().length!==a.length){for(let h of c.getPairs())for(let p of a)if(Ps.equals(h,p))break}}static isPartialRow(a,l){for(let c of l){let h=!0;for(let p of a){let g=!1;for(let w of c.getPairs())if(p.equals(w)){g=!0;break}if(!g){h=!1;break}}if(h)return!0}return!1}getRows(){return this.rows}static constructResult(a){let l=us.buildBitArray(a),h=Ll(l).parseInformation(),p=a[0].getFinderPattern().getResultPoints(),g=a[a.length-1].getFinderPattern().getResultPoints(),w=[p[0],p[1],g[0],g[1]];return new de(h,null,null,w,he.RSS_EXPANDED,null)}checkChecksum(){let a=this.pairs.get(0),l=a.getLeftChar(),c=a.getRightChar();if(c==null)return!1;let h=c.getChecksumPortion(),p=2;for(let w=1;w<this.pairs.size();++w){let N=this.pairs.get(w);h+=N.getLeftChar().getChecksumPortion(),p++;let T=N.getRightChar();T!=null&&(h+=T.getChecksumPortion(),p++)}return h%=211,211*(p-4)+h==l.getValue()}static getNextSecondBar(a,l){let c;return a.get(l)?(c=a.getNextUnset(l),c=a.getNextSet(c)):(c=a.getNextSet(l),c=a.getNextUnset(c)),c}retrieveNextPair(a,l,c){let h=l.length%2==0;this.startFromEven&&(h=!h);let p,g=!0,w=-1;do this.findNextPair(a,l,w),p=this.parseFoundFinderPattern(a,c,h),p==null?w=Je.getNextSecondBar(a,this.startEnd[0]):g=!1;while(g);let N=this.decodeDataCharacter(a,p,h,!0);if(!this.isEmptyPair(l)&&l[l.length-1].mustBeLast())throw new J;let T;try{T=this.decodeDataCharacter(a,p,h,!1)}catch(D){T=null,this.verbose&&console.log(D)}return new Ps(N,T,p,!0)}isEmptyPair(a){return a.length===0}findNextPair(a,l,c){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let p=a.getSize(),g;c>=0?g=c:this.isEmptyPair(l)?g=0:g=l[l.length-1].getFinderPattern().getStartEnd()[1];let w=l.length%2!=0;this.startFromEven&&(w=!w);let N=!1;for(;g<p&&(N=!a.get(g),!!N);)g++;let T=0,D=g;for(let B=g;B<p;B++)if(a.get(B)!=N)h[T]++;else{if(T==3){if(w&&Je.reverseCounters(h),Je.isFinderPattern(h)){this.startEnd[0]=D,this.startEnd[1]=B;return}w&&Je.reverseCounters(h),D+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,T--}else T++;h[T]=1,N=!N}throw new J}static reverseCounters(a){let l=a.length;for(let c=0;c<l/2;++c){let h=a[c];a[c]=a[l-c-1],a[l-c-1]=h}}parseFoundFinderPattern(a,l,c){let h,p,g;if(c){let T=this.startEnd[0]-1;for(;T>=0&&!a.get(T);)T--;T++,h=this.startEnd[0]-T,p=T,g=this.startEnd[1]}else p=this.startEnd[0],g=a.getNextUnset(this.startEnd[1]+1),h=g-this.startEnd[1];let w=this.getDecodeFinderCounters();I.arraycopy(w,0,w,1,w.length-1),w[0]=h;let N;try{N=this.parseFinderValue(w,Je.FINDER_PATTERNS)}catch{return null}return new Di(N,[p,g],p,g,l)}decodeDataCharacter(a,l,c,h){let p=this.getDataCharacterCounters();for(let fn=0;fn<p.length;fn++)p[fn]=0;if(h)Je.recordPatternInReverse(a,l.getStartEnd()[0],p);else{Je.recordPattern(a,l.getStartEnd()[1],p);for(let fn=0,rr=p.length-1;fn<rr;fn++,rr--){let Er=p[fn];p[fn]=p[rr],p[rr]=Er}}let g=17,w=$e.sum(new Int32Array(p))/g,N=(l.getStartEnd()[1]-l.getStartEnd()[0])/15;if(Math.abs(w-N)/N>.3)throw new J;let T=this.getOddCounts(),D=this.getEvenCounts(),B=this.getOddRoundingErrors(),G=this.getEvenRoundingErrors();for(let fn=0;fn<p.length;fn++){let rr=1*p[fn]/w,Er=rr+.5;if(Er<1){if(rr<.3)throw new J;Er=1}else if(Er>8){if(rr>8.7)throw new J;Er=8}let Fi=fn/2;fn&1?(D[Fi]=Er,G[Fi]=rr-Er):(T[Fi]=Er,B[Fi]=rr-Er)}this.adjustOddEvenCounts(g);let le=4*l.getValue()+(c?0:2)+(h?0:1)-1,ye=0,Ae=0;for(let fn=T.length-1;fn>=0;fn--){if(Je.isNotA1left(l,c,h)){let rr=Je.WEIGHTS[le][2*fn];Ae+=T[fn]*rr}ye+=T[fn]}let Te=0;for(let fn=D.length-1;fn>=0;fn--)if(Je.isNotA1left(l,c,h)){let rr=Je.WEIGHTS[le][2*fn+1];Te+=D[fn]*rr}let Ue=Ae+Te;if(ye&1||ye>13||ye<4)throw new J;let nt=(13-ye)/2,at=Je.SYMBOL_WIDEST[nt],it=9-at,Jt=_t.getRSSvalue(T,at,!0),Ut=_t.getRSSvalue(D,it,!1),xr=Je.EVEN_TOTAL_SUBSET[nt],Gr=Je.GSUM[nt],cr=Jt*xr+Ut+Gr;return new ui(cr,Ue)}static isNotA1left(a,l,c){return!(a.getValue()==0&&l&&c)}adjustOddEvenCounts(a){let l=$e.sum(new Int32Array(this.getOddCounts())),c=$e.sum(new Int32Array(this.getEvenCounts())),h=!1,p=!1;l>13?p=!0:l<4&&(h=!0);let g=!1,w=!1;c>13?w=!0:c<4&&(g=!0);let N=l+c-a,T=(l&1)==1,D=(c&1)==0;if(N==1)if(T){if(D)throw new J;p=!0}else{if(!D)throw new J;w=!0}else if(N==-1)if(T){if(D)throw new J;h=!0}else{if(!D)throw new J;g=!0}else if(N==0){if(T){if(!D)throw new J;l<c?(h=!0,w=!0):(p=!0,g=!0)}else if(D)throw new J}else throw new J;if(h){if(p)throw new J;Je.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(p&&Je.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(w)throw new J;Je.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&Je.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Je.SYMBOL_WIDEST=[7,5,4,3,1],Je.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Je.GSUM=[0,348,1388,2948,3988],Je.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Je.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Je.FINDER_PAT_A=0,Je.FINDER_PAT_B=1,Je.FINDER_PAT_C=2,Je.FINDER_PAT_D=3,Je.FINDER_PAT_E=4,Je.FINDER_PAT_F=5,Je.FINDER_PATTERN_SEQUENCES=[[Je.FINDER_PAT_A,Je.FINDER_PAT_A],[Je.FINDER_PAT_A,Je.FINDER_PAT_B,Je.FINDER_PAT_B],[Je.FINDER_PAT_A,Je.FINDER_PAT_C,Je.FINDER_PAT_B,Je.FINDER_PAT_D],[Je.FINDER_PAT_A,Je.FINDER_PAT_E,Je.FINDER_PAT_B,Je.FINDER_PAT_D,Je.FINDER_PAT_C],[Je.FINDER_PAT_A,Je.FINDER_PAT_E,Je.FINDER_PAT_B,Je.FINDER_PAT_D,Je.FINDER_PAT_D,Je.FINDER_PAT_F],[Je.FINDER_PAT_A,Je.FINDER_PAT_E,Je.FINDER_PAT_B,Je.FINDER_PAT_D,Je.FINDER_PAT_E,Je.FINDER_PAT_F,Je.FINDER_PAT_F],[Je.FINDER_PAT_A,Je.FINDER_PAT_A,Je.FINDER_PAT_B,Je.FINDER_PAT_B,Je.FINDER_PAT_C,Je.FINDER_PAT_C,Je.FINDER_PAT_D,Je.FINDER_PAT_D],[Je.FINDER_PAT_A,Je.FINDER_PAT_A,Je.FINDER_PAT_B,Je.FINDER_PAT_B,Je.FINDER_PAT_C,Je.FINDER_PAT_C,Je.FINDER_PAT_D,Je.FINDER_PAT_E,Je.FINDER_PAT_E],[Je.FINDER_PAT_A,Je.FINDER_PAT_A,Je.FINDER_PAT_B,Je.FINDER_PAT_B,Je.FINDER_PAT_C,Je.FINDER_PAT_C,Je.FINDER_PAT_D,Je.FINDER_PAT_E,Je.FINDER_PAT_F,Je.FINDER_PAT_F],[Je.FINDER_PAT_A,Je.FINDER_PAT_A,Je.FINDER_PAT_B,Je.FINDER_PAT_B,Je.FINDER_PAT_C,Je.FINDER_PAT_D,Je.FINDER_PAT_D,Je.FINDER_PAT_E,Je.FINDER_PAT_E,Je.FINDER_PAT_F,Je.FINDER_PAT_F]],Je.MAX_PAIRS=11;class Pc extends ui{constructor(a,l,c){super(a,l),this.count=0,this.finderPattern=c}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Bn extends pn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(a,l,c){const h=this.decodePair(l,!1,a,c);Bn.addOrTally(this.possibleLeftPairs,h),l.reverse();let p=this.decodePair(l,!0,a,c);Bn.addOrTally(this.possibleRightPairs,p),l.reverse();for(let g of this.possibleLeftPairs)if(g.getCount()>1){for(let w of this.possibleRightPairs)if(w.getCount()>1&&Bn.checkChecksum(g,w))return Bn.constructResult(g,w)}throw new J}static addOrTally(a,l){if(l==null)return;let c=!1;for(let h of a)if(h.getValue()===l.getValue()){h.incrementCount(),c=!0;break}c||a.push(l)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(a,l){let c=4537077*a.getValue()+l.getValue(),h=new String(c).toString(),p=new X;for(let T=13-h.length;T>0;T--)p.append("0");p.append(h);let g=0;for(let T=0;T<13;T++){let D=p.charAt(T).charCodeAt(0)-48;g+=T&1?D:3*D}g=10-g%10,g===10&&(g=0),p.append(g.toString());let w=a.getFinderPattern().getResultPoints(),N=l.getFinderPattern().getResultPoints();return new de(p.toString(),null,0,[w[0],w[1],N[0],N[1]],he.RSS_14,new Date().getTime())}static checkChecksum(a,l){let c=(a.getChecksumPortion()+16*l.getChecksumPortion())%79,h=9*a.getFinderPattern().getValue()+l.getFinderPattern().getValue();return h>72&&h--,h>8&&h--,c===h}decodePair(a,l,c,h){try{let p=this.findFinderPattern(a,l),g=this.parseFoundFinderPattern(a,c,l,p),w=h==null?null:h.get(ne.NEED_RESULT_POINT_CALLBACK);if(w!=null){let D=(p[0]+p[1])/2;l&&(D=a.getSize()-1-D),w.foundPossibleResultPoint(new oe(D,c))}let N=this.decodeDataCharacter(a,g,!0),T=this.decodeDataCharacter(a,g,!1);return new Pc(1597*N.getValue()+T.getValue(),N.getChecksumPortion()+4*T.getChecksumPortion(),g)}catch{return null}}decodeDataCharacter(a,l,c){let h=this.getDataCharacterCounters();for(let Te=0;Te<h.length;Te++)h[Te]=0;if(c)Et.recordPatternInReverse(a,l.getStartEnd()[0],h);else{Et.recordPattern(a,l.getStartEnd()[1]+1,h);for(let Te=0,Ue=h.length-1;Te<Ue;Te++,Ue--){let nt=h[Te];h[Te]=h[Ue],h[Ue]=nt}}let p=c?16:15,g=$e.sum(new Int32Array(h))/p,w=this.getOddCounts(),N=this.getEvenCounts(),T=this.getOddRoundingErrors(),D=this.getEvenRoundingErrors();for(let Te=0;Te<h.length;Te++){let Ue=h[Te]/g,nt=Math.floor(Ue+.5);nt<1?nt=1:nt>8&&(nt=8);let at=Math.floor(Te/2);Te&1?(N[at]=nt,D[at]=Ue-nt):(w[at]=nt,T[at]=Ue-nt)}this.adjustOddEvenCounts(c,p);let B=0,G=0;for(let Te=w.length-1;Te>=0;Te--)G*=9,G+=w[Te],B+=w[Te];let le=0,ye=0;for(let Te=N.length-1;Te>=0;Te--)le*=9,le+=N[Te],ye+=N[Te];let Ae=G+3*le;if(c){if(B&1||B>12||B<4)throw new J;let Te=(12-B)/2,Ue=Bn.OUTSIDE_ODD_WIDEST[Te],nt=9-Ue,at=_t.getRSSvalue(w,Ue,!1),it=_t.getRSSvalue(N,nt,!0),Jt=Bn.OUTSIDE_EVEN_TOTAL_SUBSET[Te],Ut=Bn.OUTSIDE_GSUM[Te];return new ui(at*Jt+it+Ut,Ae)}else{if(ye&1||ye>10||ye<4)throw new J;let Te=(10-ye)/2,Ue=Bn.INSIDE_ODD_WIDEST[Te],nt=9-Ue,at=_t.getRSSvalue(w,Ue,!0),it=_t.getRSSvalue(N,nt,!1),Jt=Bn.INSIDE_ODD_TOTAL_SUBSET[Te],Ut=Bn.INSIDE_GSUM[Te];return new ui(it*Jt+at+Ut,Ae)}}findFinderPattern(a,l){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=a.getSize(),p=!1,g=0;for(;g<h&&(p=!a.get(g),l!==p);)g++;let w=0,N=g;for(let T=g;T<h;T++)if(a.get(T)!==p)c[w]++;else{if(w===3){if(pn.isFinderPattern(c))return[N,T];N+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,w--}else w++;c[w]=1,p=!p}throw new J}parseFoundFinderPattern(a,l,c,h){let p=a.get(h[0]),g=h[0]-1;for(;g>=0&&p!==a.get(g);)g--;g++;const w=h[0]-g,N=this.getDecodeFinderCounters(),T=new Int32Array(N.length);I.arraycopy(N,0,T,1,N.length-1),T[0]=w;const D=this.parseFinderValue(T,Bn.FINDER_PATTERNS);let B=g,G=h[1];return c&&(B=a.getSize()-1-B,G=a.getSize()-1-G),new Di(D,[g,h[1]],B,G,l)}adjustOddEvenCounts(a,l){let c=$e.sum(new Int32Array(this.getOddCounts())),h=$e.sum(new Int32Array(this.getEvenCounts())),p=!1,g=!1,w=!1,N=!1;a?(c>12?g=!0:c<4&&(p=!0),h>12?N=!0:h<4&&(w=!0)):(c>11?g=!0:c<5&&(p=!0),h>10?N=!0:h<4&&(w=!0));let T=c+h-l,D=(c&1)===(a?1:0),B=(h&1)===1;if(T===1)if(D){if(B)throw new J;g=!0}else{if(!B)throw new J;N=!0}else if(T===-1)if(D){if(B)throw new J;p=!0}else{if(!B)throw new J;w=!0}else if(T===0){if(D){if(!B)throw new J;c<h?(p=!0,N=!0):(g=!0,w=!0)}else if(B)throw new J}else throw new J;if(p){if(g)throw new J;pn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&pn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),w){if(N)throw new J;pn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}N&&pn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Bn.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Bn.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Bn.OUTSIDE_GSUM=[0,161,961,2015,2715],Bn.INSIDE_GSUM=[0,336,1036,1516],Bn.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Bn.INSIDE_ODD_WIDEST=[2,4,6,8],Bn.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class js extends Et{constructor(a,l){super(),this.readers=[],this.verbose=l===!0;const c=a?a.get(ne.POSSIBLE_FORMATS):null,h=a&&a.get(ne.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;c?((c.includes(he.EAN_13)||c.includes(he.UPC_A)||c.includes(he.EAN_8)||c.includes(he.UPC_E))&&this.readers.push(new Zs(a)),c.includes(he.CODE_39)&&this.readers.push(new Mt(h)),c.includes(he.CODE_128)&&this.readers.push(new ot),c.includes(he.ITF)&&this.readers.push(new jt),c.includes(he.RSS_14)&&this.readers.push(new Bn),c.includes(he.RSS_EXPANDED)&&this.readers.push(new Je(this.verbose))):(this.readers.push(new Zs(a)),this.readers.push(new Mt),this.readers.push(new Zs(a)),this.readers.push(new ot),this.readers.push(new jt),this.readers.push(new Bn),this.readers.push(new Je(this.verbose)))}decodeRow(a,l,c){for(let h=0;h<this.readers.length;h++)try{return this.readers[h].decodeRow(a,l,c)}catch{}throw new J}reset(){this.readers.forEach(a=>a.reset())}}class Qu extends se{constructor(a=500,l){super(new js(l),a,l)}}class dn{constructor(a,l,c){this.ecCodewords=a,this.ecBlocks=[l],c&&this.ecBlocks.push(c)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class hn{constructor(a,l){this.count=a,this.dataCodewords=l}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Kt{constructor(a,l,c,h,p,g){this.versionNumber=a,this.symbolSizeRows=l,this.symbolSizeColumns=c,this.dataRegionSizeRows=h,this.dataRegionSizeColumns=p,this.ecBlocks=g;let w=0;const N=g.getECCodewords(),T=g.getECBlocks();for(let D of T)w+=D.getCount()*(D.getDataCodewords()+N);this.totalCodewords=w}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(a,l){if(a&1||l&1)throw new U;for(let c of Kt.VERSIONS)if(c.symbolSizeRows===a&&c.symbolSizeColumns===l)return c;throw new U}toString(){return""+this.versionNumber}static buildVersions(){return[new Kt(1,10,10,8,8,new dn(5,new hn(1,3))),new Kt(2,12,12,10,10,new dn(7,new hn(1,5))),new Kt(3,14,14,12,12,new dn(10,new hn(1,8))),new Kt(4,16,16,14,14,new dn(12,new hn(1,12))),new Kt(5,18,18,16,16,new dn(14,new hn(1,18))),new Kt(6,20,20,18,18,new dn(18,new hn(1,22))),new Kt(7,22,22,20,20,new dn(20,new hn(1,30))),new Kt(8,24,24,22,22,new dn(24,new hn(1,36))),new Kt(9,26,26,24,24,new dn(28,new hn(1,44))),new Kt(10,32,32,14,14,new dn(36,new hn(1,62))),new Kt(11,36,36,16,16,new dn(42,new hn(1,86))),new Kt(12,40,40,18,18,new dn(48,new hn(1,114))),new Kt(13,44,44,20,20,new dn(56,new hn(1,144))),new Kt(14,48,48,22,22,new dn(68,new hn(1,174))),new Kt(15,52,52,24,24,new dn(42,new hn(2,102))),new Kt(16,64,64,14,14,new dn(56,new hn(2,140))),new Kt(17,72,72,16,16,new dn(36,new hn(4,92))),new Kt(18,80,80,18,18,new dn(48,new hn(4,114))),new Kt(19,88,88,20,20,new dn(56,new hn(4,144))),new Kt(20,96,96,22,22,new dn(68,new hn(4,174))),new Kt(21,104,104,24,24,new dn(56,new hn(6,136))),new Kt(22,120,120,18,18,new dn(68,new hn(6,175))),new Kt(23,132,132,20,20,new dn(62,new hn(8,163))),new Kt(24,144,144,22,22,new dn(62,new hn(8,156),new hn(2,155))),new Kt(25,8,18,6,16,new dn(7,new hn(1,5))),new Kt(26,8,32,6,14,new dn(11,new hn(1,10))),new Kt(27,12,26,10,24,new dn(14,new hn(1,16))),new Kt(28,12,36,10,16,new dn(18,new hn(1,22))),new Kt(29,16,36,14,16,new dn(24,new hn(1,32))),new Kt(30,16,48,14,22,new dn(28,new hn(1,49)))]}}Kt.VERSIONS=Kt.buildVersions();class jl{constructor(a){const l=a.getHeight();if(l<8||l>144||l&1)throw new U;this.version=jl.readVersion(a),this.mappingBitMatrix=this.extractDataRegion(a),this.readMappingMatrix=new Q(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(a){const l=a.getHeight(),c=a.getWidth();return Kt.getVersionForDimensions(l,c)}readCodewords(){const a=new Int8Array(this.version.getTotalCodewords());let l=0,c=4,h=0;const p=this.mappingBitMatrix.getHeight(),g=this.mappingBitMatrix.getWidth();let w=!1,N=!1,T=!1,D=!1;do if(c===p&&h===0&&!w)a[l++]=this.readCorner1(p,g)&255,c-=2,h+=2,w=!0;else if(c===p-2&&h===0&&g&3&&!N)a[l++]=this.readCorner2(p,g)&255,c-=2,h+=2,N=!0;else if(c===p+4&&h===2&&!(g&7)&&!T)a[l++]=this.readCorner3(p,g)&255,c-=2,h+=2,T=!0;else if(c===p-2&&h===0&&(g&7)===4&&!D)a[l++]=this.readCorner4(p,g)&255,c-=2,h+=2,D=!0;else{do c<p&&h>=0&&!this.readMappingMatrix.get(h,c)&&(a[l++]=this.readUtah(c,h,p,g)&255),c-=2,h+=2;while(c>=0&&h<g);c+=1,h+=3;do c>=0&&h<g&&!this.readMappingMatrix.get(h,c)&&(a[l++]=this.readUtah(c,h,p,g)&255),c+=2,h-=2;while(c<p&&h>=0);c+=3,h+=1}while(c<p||h<g);if(l!==this.version.getTotalCodewords())throw new U;return a}readModule(a,l,c,h){return a<0&&(a+=c,l+=4-(c+4&7)),l<0&&(l+=h,a+=4-(h+4&7)),this.readMappingMatrix.set(l,a),this.mappingBitMatrix.get(l,a)}readUtah(a,l,c,h){let p=0;return this.readModule(a-2,l-2,c,h)&&(p|=1),p<<=1,this.readModule(a-2,l-1,c,h)&&(p|=1),p<<=1,this.readModule(a-1,l-2,c,h)&&(p|=1),p<<=1,this.readModule(a-1,l-1,c,h)&&(p|=1),p<<=1,this.readModule(a-1,l,c,h)&&(p|=1),p<<=1,this.readModule(a,l-2,c,h)&&(p|=1),p<<=1,this.readModule(a,l-1,c,h)&&(p|=1),p<<=1,this.readModule(a,l,c,h)&&(p|=1),p}readCorner1(a,l){let c=0;return this.readModule(a-1,0,a,l)&&(c|=1),c<<=1,this.readModule(a-1,1,a,l)&&(c|=1),c<<=1,this.readModule(a-1,2,a,l)&&(c|=1),c<<=1,this.readModule(0,l-2,a,l)&&(c|=1),c<<=1,this.readModule(0,l-1,a,l)&&(c|=1),c<<=1,this.readModule(1,l-1,a,l)&&(c|=1),c<<=1,this.readModule(2,l-1,a,l)&&(c|=1),c<<=1,this.readModule(3,l-1,a,l)&&(c|=1),c}readCorner2(a,l){let c=0;return this.readModule(a-3,0,a,l)&&(c|=1),c<<=1,this.readModule(a-2,0,a,l)&&(c|=1),c<<=1,this.readModule(a-1,0,a,l)&&(c|=1),c<<=1,this.readModule(0,l-4,a,l)&&(c|=1),c<<=1,this.readModule(0,l-3,a,l)&&(c|=1),c<<=1,this.readModule(0,l-2,a,l)&&(c|=1),c<<=1,this.readModule(0,l-1,a,l)&&(c|=1),c<<=1,this.readModule(1,l-1,a,l)&&(c|=1),c}readCorner3(a,l){let c=0;return this.readModule(a-1,0,a,l)&&(c|=1),c<<=1,this.readModule(a-1,l-1,a,l)&&(c|=1),c<<=1,this.readModule(0,l-3,a,l)&&(c|=1),c<<=1,this.readModule(0,l-2,a,l)&&(c|=1),c<<=1,this.readModule(0,l-1,a,l)&&(c|=1),c<<=1,this.readModule(1,l-3,a,l)&&(c|=1),c<<=1,this.readModule(1,l-2,a,l)&&(c|=1),c<<=1,this.readModule(1,l-1,a,l)&&(c|=1),c}readCorner4(a,l){let c=0;return this.readModule(a-3,0,a,l)&&(c|=1),c<<=1,this.readModule(a-2,0,a,l)&&(c|=1),c<<=1,this.readModule(a-1,0,a,l)&&(c|=1),c<<=1,this.readModule(0,l-2,a,l)&&(c|=1),c<<=1,this.readModule(0,l-1,a,l)&&(c|=1),c<<=1,this.readModule(1,l-1,a,l)&&(c|=1),c<<=1,this.readModule(2,l-1,a,l)&&(c|=1),c<<=1,this.readModule(3,l-1,a,l)&&(c|=1),c}extractDataRegion(a){const l=this.version.getSymbolSizeRows(),c=this.version.getSymbolSizeColumns();if(a.getHeight()!==l)throw new y("Dimension of bitMatrix must match the version size");const h=this.version.getDataRegionSizeRows(),p=this.version.getDataRegionSizeColumns(),g=l/h|0,w=c/p|0,N=g*h,T=w*p,D=new Q(T,N);for(let B=0;B<g;++B){const G=B*h;for(let le=0;le<w;++le){const ye=le*p;for(let Ae=0;Ae<h;++Ae){const Te=B*(h+2)+1+Ae,Ue=G+Ae;for(let nt=0;nt<p;++nt){const at=le*(p+2)+1+nt;if(a.get(at,Te)){const it=ye+nt;D.set(it,Ue)}}}}}return D}}class Gn{constructor(a,l){this.numDataCodewords=a,this.codewords=l}static getDataBlocks(a,l){const c=l.getECBlocks();let h=0;const p=c.getECBlocks();for(let Ae of p)h+=Ae.getCount();const g=new Array(h);let w=0;for(let Ae of p)for(let Te=0;Te<Ae.getCount();Te++){const Ue=Ae.getDataCodewords(),nt=c.getECCodewords()+Ue;g[w++]=new Gn(Ue,new Uint8Array(nt))}const T=g[0].codewords.length-c.getECCodewords(),D=T-1;let B=0;for(let Ae=0;Ae<D;Ae++)for(let Te=0;Te<w;Te++)g[Te].codewords[Ae]=a[B++];const G=l.getVersionNumber()===24,le=G?8:w;for(let Ae=0;Ae<le;Ae++)g[Ae].codewords[T-1]=a[B++];const ye=g[0].codewords.length;for(let Ae=T;Ae<ye;Ae++)for(let Te=0;Te<w;Te++){const Ue=G?(Te+8)%w:Te,nt=G&&Ue>7?Ae-1:Ae;g[Ue].codewords[nt]=a[B++]}if(B!==a.length)throw new y;return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Co{constructor(a){this.bytes=a,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(a){if(a<1||a>32||a>this.available())throw new y(""+a);let l=0,c=this.bitOffset,h=this.byteOffset;const p=this.bytes;if(c>0){const g=8-c,w=a<g?a:g,N=g-w,T=255>>8-w<<N;l=(p[h]&T)>>N,a-=w,c+=w,c===8&&(c=0,h++)}if(a>0){for(;a>=8;)l=l<<8|p[h]&255,h++,a-=8;if(a>0){const g=8-a,w=255>>g<<g;l=l<<a|(p[h]&w)>>g,c+=a}}return this.bitOffset=c,this.byteOffset=h,l}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Jn;(function(F){F[F.PAD_ENCODE=0]="PAD_ENCODE",F[F.ASCII_ENCODE=1]="ASCII_ENCODE",F[F.C40_ENCODE=2]="C40_ENCODE",F[F.TEXT_ENCODE=3]="TEXT_ENCODE",F[F.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",F[F.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",F[F.BASE256_ENCODE=6]="BASE256_ENCODE"})(Jn||(Jn={}));class ds{static decode(a){const l=new Co(a),c=new X,h=new X,p=new Array;let g=Jn.ASCII_ENCODE;do if(g===Jn.ASCII_ENCODE)g=this.decodeAsciiSegment(l,c,h);else{switch(g){case Jn.C40_ENCODE:this.decodeC40Segment(l,c);break;case Jn.TEXT_ENCODE:this.decodeTextSegment(l,c);break;case Jn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(l,c);break;case Jn.EDIFACT_ENCODE:this.decodeEdifactSegment(l,c);break;case Jn.BASE256_ENCODE:this.decodeBase256Segment(l,c,p);break;default:throw new U}g=Jn.ASCII_ENCODE}while(g!==Jn.PAD_ENCODE&&l.available()>0);return h.length()>0&&c.append(h.toString()),new Oe(a,c.toString(),p.length===0?null:p,null)}static decodeAsciiSegment(a,l,c){let h=!1;do{let p=a.readBits(8);if(p===0)throw new U;if(p<=128)return h&&(p+=128),l.append(String.fromCharCode(p-1)),Jn.ASCII_ENCODE;if(p===129)return Jn.PAD_ENCODE;if(p<=229){const g=p-130;g<10&&l.append("0"),l.append(""+g)}else switch(p){case 230:return Jn.C40_ENCODE;case 231:return Jn.BASE256_ENCODE;case 232:l.append("");break;case 233:case 234:break;case 235:h=!0;break;case 236:l.append("[)>05"),c.insert(0,"");break;case 237:l.append("[)>06"),c.insert(0,"");break;case 238:return Jn.ANSIX12_ENCODE;case 239:return Jn.TEXT_ENCODE;case 240:return Jn.EDIFACT_ENCODE;case 241:break;default:if(p!==254||a.available()!==0)throw new U;break}}while(a.available()>0);return Jn.ASCII_ENCODE}static decodeC40Segment(a,l){let c=!1;const h=[];let p=0;do{if(a.available()===8)return;const g=a.readBits(8);if(g===254)return;this.parseTwoBytes(g,a.readBits(8),h);for(let w=0;w<3;w++){const N=h[w];switch(p){case 0:if(N<3)p=N+1;else if(N<this.C40_BASIC_SET_CHARS.length){const T=this.C40_BASIC_SET_CHARS[N];c?(l.append(String.fromCharCode(T.charCodeAt(0)+128)),c=!1):l.append(T)}else throw new U;break;case 1:c?(l.append(String.fromCharCode(N+128)),c=!1):l.append(String.fromCharCode(N)),p=0;break;case 2:if(N<this.C40_SHIFT2_SET_CHARS.length){const T=this.C40_SHIFT2_SET_CHARS[N];c?(l.append(String.fromCharCode(T.charCodeAt(0)+128)),c=!1):l.append(T)}else switch(N){case 27:l.append("");break;case 30:c=!0;break;default:throw new U}p=0;break;case 3:c?(l.append(String.fromCharCode(N+224)),c=!1):l.append(String.fromCharCode(N+96)),p=0;break;default:throw new U}}}while(a.available()>0)}static decodeTextSegment(a,l){let c=!1,h=[],p=0;do{if(a.available()===8)return;const g=a.readBits(8);if(g===254)return;this.parseTwoBytes(g,a.readBits(8),h);for(let w=0;w<3;w++){const N=h[w];switch(p){case 0:if(N<3)p=N+1;else if(N<this.TEXT_BASIC_SET_CHARS.length){const T=this.TEXT_BASIC_SET_CHARS[N];c?(l.append(String.fromCharCode(T.charCodeAt(0)+128)),c=!1):l.append(T)}else throw new U;break;case 1:c?(l.append(String.fromCharCode(N+128)),c=!1):l.append(String.fromCharCode(N)),p=0;break;case 2:if(N<this.TEXT_SHIFT2_SET_CHARS.length){const T=this.TEXT_SHIFT2_SET_CHARS[N];c?(l.append(String.fromCharCode(T.charCodeAt(0)+128)),c=!1):l.append(T)}else switch(N){case 27:l.append("");break;case 30:c=!0;break;default:throw new U}p=0;break;case 3:if(N<this.TEXT_SHIFT3_SET_CHARS.length){const T=this.TEXT_SHIFT3_SET_CHARS[N];c?(l.append(String.fromCharCode(T.charCodeAt(0)+128)),c=!1):l.append(T),p=0}else throw new U;break;default:throw new U}}}while(a.available()>0)}static decodeAnsiX12Segment(a,l){const c=[];do{if(a.available()===8)return;const h=a.readBits(8);if(h===254)return;this.parseTwoBytes(h,a.readBits(8),c);for(let p=0;p<3;p++){const g=c[p];switch(g){case 0:l.append("\r");break;case 1:l.append("*");break;case 2:l.append(">");break;case 3:l.append(" ");break;default:if(g<14)l.append(String.fromCharCode(g+44));else if(g<40)l.append(String.fromCharCode(g+51));else throw new U;break}}}while(a.available()>0)}static parseTwoBytes(a,l,c){let h=(a<<8)+l-1,p=Math.floor(h/1600);c[0]=p,h-=p*1600,p=Math.floor(h/40),c[1]=p,c[2]=h-p*40}static decodeEdifactSegment(a,l){do{if(a.available()<=16)return;for(let c=0;c<4;c++){let h=a.readBits(6);if(h===31){const p=8-a.getBitOffset();p!==8&&a.readBits(p);return}h&32||(h|=64),l.append(String.fromCharCode(h))}}while(a.available()>0)}static decodeBase256Segment(a,l,c){let h=1+a.getByteOffset();const p=this.unrandomize255State(a.readBits(8),h++);let g;if(p===0?g=a.available()/8|0:p<250?g=p:g=250*(p-249)+this.unrandomize255State(a.readBits(8),h++),g<0)throw new U;const w=new Uint8Array(g);for(let N=0;N<g;N++){if(a.available()<8)throw new U;w[N]=this.unrandomize255State(a.readBits(8),h++)}c.push(w);try{l.append($.decode(w,q.ISO88591))}catch(N){throw new Ve("Platform does not support required encoding: "+N.message)}}static unrandomize255State(a,l){const c=149*l%255+1,h=a-c;return h>=0?h:h+256}}ds.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ds.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ds.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ds.TEXT_SHIFT2_SET_CHARS=ds.C40_SHIFT2_SET_CHARS,ds.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Ol{constructor(){this.rsDecoder=new fe(Ge.DATA_MATRIX_FIELD_256)}decode(a){const l=new jl(a),c=l.getVersion(),h=l.readCodewords(),p=Gn.getDataBlocks(h,c);let g=0;for(let T of p)g+=T.getNumDataCodewords();const w=new Uint8Array(g),N=p.length;for(let T=0;T<N;T++){const D=p[T],B=D.getCodewords(),G=D.getNumDataCodewords();this.correctErrors(B,G);for(let le=0;le<G;le++)w[le*N+T]=B[le]}return ds.decode(w)}correctErrors(a,l){const c=new Int32Array(a);try{this.rsDecoder.decode(c,a.length-l)}catch{throw new b}for(let h=0;h<l;h++)a[h]=c[h]}}class $n{constructor(a){this.image=a,this.rectangleDetector=new Be(this.image)}detect(){const a=this.rectangleDetector.detect();let l=this.detectSolid1(a);if(l=this.detectSolid2(l),l[3]=this.correctTopRight(l),!l[3])throw new J;l=this.shiftToModuleCenter(l);const c=l[0],h=l[1],p=l[2],g=l[3];let w=this.transitionsBetween(c,g)+1,N=this.transitionsBetween(p,g)+1;(w&1)===1&&(w+=1),(N&1)===1&&(N+=1),4*w<7*N&&4*N<7*w&&(w=N=Math.max(w,N));let T=$n.sampleGrid(this.image,c,h,p,g,w,N);return new ve(T,[c,h,p,g])}static shiftPoint(a,l,c){let h=(l.getX()-a.getX())/(c+1),p=(l.getY()-a.getY())/(c+1);return new oe(a.getX()+h,a.getY()+p)}static moveAway(a,l,c){let h=a.getX(),p=a.getY();return h<l?h-=1:h+=1,p<c?p-=1:p+=1,new oe(h,p)}detectSolid1(a){let l=a[0],c=a[1],h=a[3],p=a[2],g=this.transitionsBetween(l,c),w=this.transitionsBetween(c,h),N=this.transitionsBetween(h,p),T=this.transitionsBetween(p,l),D=g,B=[p,l,c,h];return D>w&&(D=w,B[0]=l,B[1]=c,B[2]=h,B[3]=p),D>N&&(D=N,B[0]=c,B[1]=h,B[2]=p,B[3]=l),D>T&&(B[0]=h,B[1]=p,B[2]=l,B[3]=c),B}detectSolid2(a){let l=a[0],c=a[1],h=a[2],p=a[3],g=this.transitionsBetween(l,p),w=$n.shiftPoint(c,h,(g+1)*4),N=$n.shiftPoint(h,c,(g+1)*4),T=this.transitionsBetween(w,l),D=this.transitionsBetween(N,p);return T<D?(a[0]=l,a[1]=c,a[2]=h,a[3]=p):(a[0]=c,a[1]=h,a[2]=p,a[3]=l),a}correctTopRight(a){let l=a[0],c=a[1],h=a[2],p=a[3],g=this.transitionsBetween(l,p),w=this.transitionsBetween(c,p),N=$n.shiftPoint(l,c,(w+1)*4),T=$n.shiftPoint(h,c,(g+1)*4);g=this.transitionsBetween(N,p),w=this.transitionsBetween(T,p);let D=new oe(p.getX()+(h.getX()-c.getX())/(g+1),p.getY()+(h.getY()-c.getY())/(g+1)),B=new oe(p.getX()+(l.getX()-c.getX())/(w+1),p.getY()+(l.getY()-c.getY())/(w+1));if(!this.isValid(D))return this.isValid(B)?B:null;if(!this.isValid(B))return D;let G=this.transitionsBetween(N,D)+this.transitionsBetween(T,D),le=this.transitionsBetween(N,B)+this.transitionsBetween(T,B);return G>le?D:B}shiftToModuleCenter(a){let l=a[0],c=a[1],h=a[2],p=a[3],g=this.transitionsBetween(l,p)+1,w=this.transitionsBetween(h,p)+1,N=$n.shiftPoint(l,c,w*4),T=$n.shiftPoint(h,c,g*4);g=this.transitionsBetween(N,p)+1,w=this.transitionsBetween(T,p)+1,(g&1)===1&&(g+=1),(w&1)===1&&(w+=1);let D=(l.getX()+c.getX()+h.getX()+p.getX())/4,B=(l.getY()+c.getY()+h.getY()+p.getY())/4;l=$n.moveAway(l,D,B),c=$n.moveAway(c,D,B),h=$n.moveAway(h,D,B),p=$n.moveAway(p,D,B);let G,le;return N=$n.shiftPoint(l,c,w*4),N=$n.shiftPoint(N,p,g*4),G=$n.shiftPoint(c,l,w*4),G=$n.shiftPoint(G,h,g*4),T=$n.shiftPoint(h,p,w*4),T=$n.shiftPoint(T,c,g*4),le=$n.shiftPoint(p,h,w*4),le=$n.shiftPoint(le,l,g*4),[N,G,T,le]}isValid(a){return a.getX()>=0&&a.getX()<this.image.getWidth()&&a.getY()>0&&a.getY()<this.image.getHeight()}static sampleGrid(a,l,c,h,p,g,w){return xt.getInstance().sampleGrid(a,g,w,.5,.5,g-.5,.5,g-.5,w-.5,.5,w-.5,l.getX(),l.getY(),p.getX(),p.getY(),h.getX(),h.getY(),c.getX(),c.getY())}transitionsBetween(a,l){let c=Math.trunc(a.getX()),h=Math.trunc(a.getY()),p=Math.trunc(l.getX()),g=Math.trunc(l.getY()),w=Math.abs(g-h)>Math.abs(p-c);if(w){let Ae=c;c=h,h=Ae,Ae=p,p=g,g=Ae}let N=Math.abs(p-c),T=Math.abs(g-h),D=-N/2,B=h<g?1:-1,G=c<p?1:-1,le=0,ye=this.image.get(w?h:c,w?c:h);for(let Ae=c,Te=h;Ae!==p;Ae+=G){let Ue=this.image.get(w?Te:Ae,w?Ae:Te);if(Ue!==ye&&(le++,ye=Ue),D+=T,D>0){if(Te===g)break;Te+=B,D-=N}}return le}}class Rr{constructor(){this.decoder=new Ol}decode(a,l=null){let c,h;if(l!=null&&l.has(ne.PURE_BARCODE)){const T=Rr.extractPureBits(a.getBlackMatrix());c=this.decoder.decode(T),h=Rr.NO_POINTS}else{const T=new $n(a.getBlackMatrix()).detect();c=this.decoder.decode(T.getBits()),h=T.getPoints()}const p=c.getRawBytes(),g=new de(c.getText(),p,8*p.length,h,he.DATA_MATRIX,I.currentTimeMillis()),w=c.getByteSegments();w!=null&&g.putMetadata(Le.BYTE_SEGMENTS,w);const N=c.getECLevel();return N!=null&&g.putMetadata(Le.ERROR_CORRECTION_LEVEL,N),g}reset(){}static extractPureBits(a){const l=a.getTopLeftOnBit(),c=a.getBottomRightOnBit();if(l==null||c==null)throw new J;const h=this.moduleSize(l,a);let p=l[1];const g=c[1];let w=l[0];const T=(c[0]-w+1)/h,D=(g-p+1)/h;if(T<=0||D<=0)throw new J;const B=h/2;p+=B,w+=B;const G=new Q(T,D);for(let le=0;le<D;le++){const ye=p+le*h;for(let Ae=0;Ae<T;Ae++)a.get(w+Ae*h,ye)&&G.set(Ae,le)}return G}static moduleSize(a,l){const c=l.getWidth();let h=a[0];const p=a[1];for(;h<c&&l.get(h,p);)h++;if(h===c)throw new J;const g=h-a[0];if(g===0)throw new J;return g}}Rr.NO_POINTS=[];class Eo extends se{constructor(a=500){super(new Rr,a)}}var Sr;(function(F){F[F.L=0]="L",F[F.M=1]="M",F[F.Q=2]="Q",F[F.H=3]="H"})(Sr||(Sr={}));class wn{constructor(a,l,c){this.value=a,this.stringValue=l,this.bits=c,wn.FOR_BITS.set(c,this),wn.FOR_VALUE.set(a,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(a){switch(a){case"L":return wn.L;case"M":return wn.M;case"Q":return wn.Q;case"H":return wn.H;default:throw new x(a+"not available")}}toString(){return this.stringValue}equals(a){if(!(a instanceof wn))return!1;const l=a;return this.value===l.value}static forBits(a){if(a<0||a>=wn.FOR_BITS.size)throw new y;return wn.FOR_BITS.get(a)}}wn.FOR_BITS=new Map,wn.FOR_VALUE=new Map,wn.L=new wn(Sr.L,"L",1),wn.M=new wn(Sr.M,"M",0),wn.Q=new wn(Sr.Q,"Q",3),wn.H=new wn(Sr.H,"H",2);class Nr{constructor(a){this.errorCorrectionLevel=wn.forBits(a>>3&3),this.dataMask=a&7}static numBitsDiffering(a,l){return k.bitCount(a^l)}static decodeFormatInformation(a,l){const c=Nr.doDecodeFormatInformation(a,l);return c!==null?c:Nr.doDecodeFormatInformation(a^Nr.FORMAT_INFO_MASK_QR,l^Nr.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(a,l){let c=Number.MAX_SAFE_INTEGER,h=0;for(const p of Nr.FORMAT_INFO_DECODE_LOOKUP){const g=p[0];if(g===a||g===l)return new Nr(p[1]);let w=Nr.numBitsDiffering(a,g);w<c&&(h=p[1],c=w),a!==l&&(w=Nr.numBitsDiffering(l,g),w<c&&(h=p[1],c=w))}return c<=3?new Nr(h):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(a){if(!(a instanceof Nr))return!1;const l=a;return this.errorCorrectionLevel===l.errorCorrectionLevel&&this.dataMask===l.dataMask}}Nr.FORMAT_INFO_MASK_QR=21522,Nr.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class je{constructor(a,...l){this.ecCodewordsPerBlock=a,this.ecBlocks=l}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let a=0;const l=this.ecBlocks;for(const c of l)a+=c.getCount();return a}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class ie{constructor(a,l){this.count=a,this.dataCodewords=l}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class It{constructor(a,l,...c){this.versionNumber=a,this.alignmentPatternCenters=l,this.ecBlocks=c;let h=0;const p=c[0].getECCodewordsPerBlock(),g=c[0].getECBlocks();for(const w of g)h+=w.getCount()*(w.getDataCodewords()+p);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(a){return this.ecBlocks[a.getValue()]}static getProvisionalVersionForDimension(a){if(a%4!==1)throw new U;try{return this.getVersionForNumber((a-17)/4)}catch{throw new U}}static getVersionForNumber(a){if(a<1||a>40)throw new y;return It.VERSIONS[a-1]}static decodeVersionInformation(a){let l=Number.MAX_SAFE_INTEGER,c=0;for(let h=0;h<It.VERSION_DECODE_INFO.length;h++){const p=It.VERSION_DECODE_INFO[h];if(p===a)return It.getVersionForNumber(h+7);const g=Nr.numBitsDiffering(a,p);g<l&&(c=h+7,l=g)}return l<=3?It.getVersionForNumber(c):null}buildFunctionPattern(){const a=this.getDimensionForVersion(),l=new Q(a);l.setRegion(0,0,9,9),l.setRegion(a-8,0,8,9),l.setRegion(0,a-8,9,8);const c=this.alignmentPatternCenters.length;for(let h=0;h<c;h++){const p=this.alignmentPatternCenters[h]-2;for(let g=0;g<c;g++)h===0&&(g===0||g===c-1)||h===c-1&&g===0||l.setRegion(this.alignmentPatternCenters[g]-2,p,5,5)}return l.setRegion(6,9,1,a-17),l.setRegion(9,6,a-17,1),this.versionNumber>6&&(l.setRegion(a-11,0,3,6),l.setRegion(0,a-11,6,3)),l}toString(){return""+this.versionNumber}}It.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),It.VERSIONS=[new It(1,new Int32Array(0),new je(7,new ie(1,19)),new je(10,new ie(1,16)),new je(13,new ie(1,13)),new je(17,new ie(1,9))),new It(2,Int32Array.from([6,18]),new je(10,new ie(1,34)),new je(16,new ie(1,28)),new je(22,new ie(1,22)),new je(28,new ie(1,16))),new It(3,Int32Array.from([6,22]),new je(15,new ie(1,55)),new je(26,new ie(1,44)),new je(18,new ie(2,17)),new je(22,new ie(2,13))),new It(4,Int32Array.from([6,26]),new je(20,new ie(1,80)),new je(18,new ie(2,32)),new je(26,new ie(2,24)),new je(16,new ie(4,9))),new It(5,Int32Array.from([6,30]),new je(26,new ie(1,108)),new je(24,new ie(2,43)),new je(18,new ie(2,15),new ie(2,16)),new je(22,new ie(2,11),new ie(2,12))),new It(6,Int32Array.from([6,34]),new je(18,new ie(2,68)),new je(16,new ie(4,27)),new je(24,new ie(4,19)),new je(28,new ie(4,15))),new It(7,Int32Array.from([6,22,38]),new je(20,new ie(2,78)),new je(18,new ie(4,31)),new je(18,new ie(2,14),new ie(4,15)),new je(26,new ie(4,13),new ie(1,14))),new It(8,Int32Array.from([6,24,42]),new je(24,new ie(2,97)),new je(22,new ie(2,38),new ie(2,39)),new je(22,new ie(4,18),new ie(2,19)),new je(26,new ie(4,14),new ie(2,15))),new It(9,Int32Array.from([6,26,46]),new je(30,new ie(2,116)),new je(22,new ie(3,36),new ie(2,37)),new je(20,new ie(4,16),new ie(4,17)),new je(24,new ie(4,12),new ie(4,13))),new It(10,Int32Array.from([6,28,50]),new je(18,new ie(2,68),new ie(2,69)),new je(26,new ie(4,43),new ie(1,44)),new je(24,new ie(6,19),new ie(2,20)),new je(28,new ie(6,15),new ie(2,16))),new It(11,Int32Array.from([6,30,54]),new je(20,new ie(4,81)),new je(30,new ie(1,50),new ie(4,51)),new je(28,new ie(4,22),new ie(4,23)),new je(24,new ie(3,12),new ie(8,13))),new It(12,Int32Array.from([6,32,58]),new je(24,new ie(2,92),new ie(2,93)),new je(22,new ie(6,36),new ie(2,37)),new je(26,new ie(4,20),new ie(6,21)),new je(28,new ie(7,14),new ie(4,15))),new It(13,Int32Array.from([6,34,62]),new je(26,new ie(4,107)),new je(22,new ie(8,37),new ie(1,38)),new je(24,new ie(8,20),new ie(4,21)),new je(22,new ie(12,11),new ie(4,12))),new It(14,Int32Array.from([6,26,46,66]),new je(30,new ie(3,115),new ie(1,116)),new je(24,new ie(4,40),new ie(5,41)),new je(20,new ie(11,16),new ie(5,17)),new je(24,new ie(11,12),new ie(5,13))),new It(15,Int32Array.from([6,26,48,70]),new je(22,new ie(5,87),new ie(1,88)),new je(24,new ie(5,41),new ie(5,42)),new je(30,new ie(5,24),new ie(7,25)),new je(24,new ie(11,12),new ie(7,13))),new It(16,Int32Array.from([6,26,50,74]),new je(24,new ie(5,98),new ie(1,99)),new je(28,new ie(7,45),new ie(3,46)),new je(24,new ie(15,19),new ie(2,20)),new je(30,new ie(3,15),new ie(13,16))),new It(17,Int32Array.from([6,30,54,78]),new je(28,new ie(1,107),new ie(5,108)),new je(28,new ie(10,46),new ie(1,47)),new je(28,new ie(1,22),new ie(15,23)),new je(28,new ie(2,14),new ie(17,15))),new It(18,Int32Array.from([6,30,56,82]),new je(30,new ie(5,120),new ie(1,121)),new je(26,new ie(9,43),new ie(4,44)),new je(28,new ie(17,22),new ie(1,23)),new je(28,new ie(2,14),new ie(19,15))),new It(19,Int32Array.from([6,30,58,86]),new je(28,new ie(3,113),new ie(4,114)),new je(26,new ie(3,44),new ie(11,45)),new je(26,new ie(17,21),new ie(4,22)),new je(26,new ie(9,13),new ie(16,14))),new It(20,Int32Array.from([6,34,62,90]),new je(28,new ie(3,107),new ie(5,108)),new je(26,new ie(3,41),new ie(13,42)),new je(30,new ie(15,24),new ie(5,25)),new je(28,new ie(15,15),new ie(10,16))),new It(21,Int32Array.from([6,28,50,72,94]),new je(28,new ie(4,116),new ie(4,117)),new je(26,new ie(17,42)),new je(28,new ie(17,22),new ie(6,23)),new je(30,new ie(19,16),new ie(6,17))),new It(22,Int32Array.from([6,26,50,74,98]),new je(28,new ie(2,111),new ie(7,112)),new je(28,new ie(17,46)),new je(30,new ie(7,24),new ie(16,25)),new je(24,new ie(34,13))),new It(23,Int32Array.from([6,30,54,78,102]),new je(30,new ie(4,121),new ie(5,122)),new je(28,new ie(4,47),new ie(14,48)),new je(30,new ie(11,24),new ie(14,25)),new je(30,new ie(16,15),new ie(14,16))),new It(24,Int32Array.from([6,28,54,80,106]),new je(30,new ie(6,117),new ie(4,118)),new je(28,new ie(6,45),new ie(14,46)),new je(30,new ie(11,24),new ie(16,25)),new je(30,new ie(30,16),new ie(2,17))),new It(25,Int32Array.from([6,32,58,84,110]),new je(26,new ie(8,106),new ie(4,107)),new je(28,new ie(8,47),new ie(13,48)),new je(30,new ie(7,24),new ie(22,25)),new je(30,new ie(22,15),new ie(13,16))),new It(26,Int32Array.from([6,30,58,86,114]),new je(28,new ie(10,114),new ie(2,115)),new je(28,new ie(19,46),new ie(4,47)),new je(28,new ie(28,22),new ie(6,23)),new je(30,new ie(33,16),new ie(4,17))),new It(27,Int32Array.from([6,34,62,90,118]),new je(30,new ie(8,122),new ie(4,123)),new je(28,new ie(22,45),new ie(3,46)),new je(30,new ie(8,23),new ie(26,24)),new je(30,new ie(12,15),new ie(28,16))),new It(28,Int32Array.from([6,26,50,74,98,122]),new je(30,new ie(3,117),new ie(10,118)),new je(28,new ie(3,45),new ie(23,46)),new je(30,new ie(4,24),new ie(31,25)),new je(30,new ie(11,15),new ie(31,16))),new It(29,Int32Array.from([6,30,54,78,102,126]),new je(30,new ie(7,116),new ie(7,117)),new je(28,new ie(21,45),new ie(7,46)),new je(30,new ie(1,23),new ie(37,24)),new je(30,new ie(19,15),new ie(26,16))),new It(30,Int32Array.from([6,26,52,78,104,130]),new je(30,new ie(5,115),new ie(10,116)),new je(28,new ie(19,47),new ie(10,48)),new je(30,new ie(15,24),new ie(25,25)),new je(30,new ie(23,15),new ie(25,16))),new It(31,Int32Array.from([6,30,56,82,108,134]),new je(30,new ie(13,115),new ie(3,116)),new je(28,new ie(2,46),new ie(29,47)),new je(30,new ie(42,24),new ie(1,25)),new je(30,new ie(23,15),new ie(28,16))),new It(32,Int32Array.from([6,34,60,86,112,138]),new je(30,new ie(17,115)),new je(28,new ie(10,46),new ie(23,47)),new je(30,new ie(10,24),new ie(35,25)),new je(30,new ie(19,15),new ie(35,16))),new It(33,Int32Array.from([6,30,58,86,114,142]),new je(30,new ie(17,115),new ie(1,116)),new je(28,new ie(14,46),new ie(21,47)),new je(30,new ie(29,24),new ie(19,25)),new je(30,new ie(11,15),new ie(46,16))),new It(34,Int32Array.from([6,34,62,90,118,146]),new je(30,new ie(13,115),new ie(6,116)),new je(28,new ie(14,46),new ie(23,47)),new je(30,new ie(44,24),new ie(7,25)),new je(30,new ie(59,16),new ie(1,17))),new It(35,Int32Array.from([6,30,54,78,102,126,150]),new je(30,new ie(12,121),new ie(7,122)),new je(28,new ie(12,47),new ie(26,48)),new je(30,new ie(39,24),new ie(14,25)),new je(30,new ie(22,15),new ie(41,16))),new It(36,Int32Array.from([6,24,50,76,102,128,154]),new je(30,new ie(6,121),new ie(14,122)),new je(28,new ie(6,47),new ie(34,48)),new je(30,new ie(46,24),new ie(10,25)),new je(30,new ie(2,15),new ie(64,16))),new It(37,Int32Array.from([6,28,54,80,106,132,158]),new je(30,new ie(17,122),new ie(4,123)),new je(28,new ie(29,46),new ie(14,47)),new je(30,new ie(49,24),new ie(10,25)),new je(30,new ie(24,15),new ie(46,16))),new It(38,Int32Array.from([6,32,58,84,110,136,162]),new je(30,new ie(4,122),new ie(18,123)),new je(28,new ie(13,46),new ie(32,47)),new je(30,new ie(48,24),new ie(14,25)),new je(30,new ie(42,15),new ie(32,16))),new It(39,Int32Array.from([6,26,54,82,110,138,166]),new je(30,new ie(20,117),new ie(4,118)),new je(28,new ie(40,47),new ie(7,48)),new je(30,new ie(43,24),new ie(22,25)),new je(30,new ie(10,15),new ie(67,16))),new It(40,Int32Array.from([6,30,58,86,114,142,170]),new je(30,new ie(19,118),new ie(6,119)),new je(28,new ie(18,47),new ie(31,48)),new je(30,new ie(34,24),new ie(34,25)),new je(30,new ie(20,15),new ie(61,16)))];var ar;(function(F){F[F.DATA_MASK_000=0]="DATA_MASK_000",F[F.DATA_MASK_001=1]="DATA_MASK_001",F[F.DATA_MASK_010=2]="DATA_MASK_010",F[F.DATA_MASK_011=3]="DATA_MASK_011",F[F.DATA_MASK_100=4]="DATA_MASK_100",F[F.DATA_MASK_101=5]="DATA_MASK_101",F[F.DATA_MASK_110=6]="DATA_MASK_110",F[F.DATA_MASK_111=7]="DATA_MASK_111"})(ar||(ar={}));class wi{constructor(a,l){this.value=a,this.isMasked=l}unmaskBitMatrix(a,l){for(let c=0;c<l;c++)for(let h=0;h<l;h++)this.isMasked(c,h)&&a.flip(h,c)}}wi.values=new Map([[ar.DATA_MASK_000,new wi(ar.DATA_MASK_000,(F,a)=>(F+a&1)===0)],[ar.DATA_MASK_001,new wi(ar.DATA_MASK_001,(F,a)=>(F&1)===0)],[ar.DATA_MASK_010,new wi(ar.DATA_MASK_010,(F,a)=>a%3===0)],[ar.DATA_MASK_011,new wi(ar.DATA_MASK_011,(F,a)=>(F+a)%3===0)],[ar.DATA_MASK_100,new wi(ar.DATA_MASK_100,(F,a)=>(Math.floor(F/2)+Math.floor(a/3)&1)===0)],[ar.DATA_MASK_101,new wi(ar.DATA_MASK_101,(F,a)=>F*a%6===0)],[ar.DATA_MASK_110,new wi(ar.DATA_MASK_110,(F,a)=>F*a%6<3)],[ar.DATA_MASK_111,new wi(ar.DATA_MASK_111,(F,a)=>(F+a+F*a%3&1)===0)]]);class Dl{constructor(a){const l=a.getHeight();if(l<21||(l&3)!==1)throw new U;this.bitMatrix=a}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let a=0;for(let p=0;p<6;p++)a=this.copyBit(p,8,a);a=this.copyBit(7,8,a),a=this.copyBit(8,8,a),a=this.copyBit(8,7,a);for(let p=5;p>=0;p--)a=this.copyBit(8,p,a);const l=this.bitMatrix.getHeight();let c=0;const h=l-7;for(let p=l-1;p>=h;p--)c=this.copyBit(8,p,c);for(let p=l-8;p<l;p++)c=this.copyBit(p,8,c);if(this.parsedFormatInfo=Nr.decodeFormatInformation(a,c),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new U}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const a=this.bitMatrix.getHeight(),l=Math.floor((a-17)/4);if(l<=6)return It.getVersionForNumber(l);let c=0;const h=a-11;for(let g=5;g>=0;g--)for(let w=a-9;w>=h;w--)c=this.copyBit(w,g,c);let p=It.decodeVersionInformation(c);if(p!==null&&p.getDimensionForVersion()===a)return this.parsedVersion=p,p;c=0;for(let g=5;g>=0;g--)for(let w=a-9;w>=h;w--)c=this.copyBit(g,w,c);if(p=It.decodeVersionInformation(c),p!==null&&p.getDimensionForVersion()===a)return this.parsedVersion=p,p;throw new U}copyBit(a,l,c){return(this.isMirror?this.bitMatrix.get(l,a):this.bitMatrix.get(a,l))?c<<1|1:c<<1}readCodewords(){const a=this.readFormatInformation(),l=this.readVersion(),c=wi.values.get(a.getDataMask()),h=this.bitMatrix.getHeight();c.unmaskBitMatrix(this.bitMatrix,h);const p=l.buildFunctionPattern();let g=!0;const w=new Uint8Array(l.getTotalCodewords());let N=0,T=0,D=0;for(let B=h-1;B>0;B-=2){B===6&&B--;for(let G=0;G<h;G++){const le=g?h-1-G:G;for(let ye=0;ye<2;ye++)p.get(B-ye,le)||(D++,T<<=1,this.bitMatrix.get(B-ye,le)&&(T|=1),D===8&&(w[N++]=T,D=0,T=0))}g=!g}if(N!==l.getTotalCodewords())throw new U;return w}remask(){if(this.parsedFormatInfo===null)return;const a=wi.values[this.parsedFormatInfo.getDataMask()],l=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,l)}setMirror(a){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=a}mirror(){const a=this.bitMatrix;for(let l=0,c=a.getWidth();l<c;l++)for(let h=l+1,p=a.getHeight();h<p;h++)a.get(l,h)!==a.get(h,l)&&(a.flip(h,l),a.flip(l,h))}}class Rl{constructor(a,l){this.numDataCodewords=a,this.codewords=l}static getDataBlocks(a,l,c){if(a.length!==l.getTotalCodewords())throw new y;const h=l.getECBlocksForLevel(c);let p=0;const g=h.getECBlocks();for(const ye of g)p+=ye.getCount();const w=new Array(p);let N=0;for(const ye of g)for(let Ae=0;Ae<ye.getCount();Ae++){const Te=ye.getDataCodewords(),Ue=h.getECCodewordsPerBlock()+Te;w[N++]=new Rl(Te,new Uint8Array(Ue))}const T=w[0].codewords.length;let D=w.length-1;for(;D>=0&&w[D].codewords.length!==T;)D--;D++;const B=T-h.getECCodewordsPerBlock();let G=0;for(let ye=0;ye<B;ye++)for(let Ae=0;Ae<N;Ae++)w[Ae].codewords[ye]=a[G++];for(let ye=D;ye<N;ye++)w[ye].codewords[B]=a[G++];const le=w[0].codewords.length;for(let ye=B;ye<le;ye++)for(let Ae=0;Ae<N;Ae++){const Te=Ae<D?ye:ye+1;w[Ae].codewords[Te]=a[G++]}return w}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var bi;(function(F){F[F.TERMINATOR=0]="TERMINATOR",F[F.NUMERIC=1]="NUMERIC",F[F.ALPHANUMERIC=2]="ALPHANUMERIC",F[F.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",F[F.BYTE=4]="BYTE",F[F.ECI=5]="ECI",F[F.KANJI=6]="KANJI",F[F.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",F[F.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",F[F.HANZI=9]="HANZI"})(bi||(bi={}));class Pt{constructor(a,l,c,h){this.value=a,this.stringValue=l,this.characterCountBitsForVersions=c,this.bits=h,Pt.FOR_BITS.set(h,this),Pt.FOR_VALUE.set(a,this)}static forBits(a){const l=Pt.FOR_BITS.get(a);if(l===void 0)throw new y;return l}getCharacterCountBits(a){const l=a.getVersionNumber();let c;return l<=9?c=0:l<=26?c=1:c=2,this.characterCountBitsForVersions[c]}getValue(){return this.value}getBits(){return this.bits}equals(a){if(!(a instanceof Pt))return!1;const l=a;return this.value===l.value}toString(){return this.stringValue}}Pt.FOR_BITS=new Map,Pt.FOR_VALUE=new Map,Pt.TERMINATOR=new Pt(bi.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Pt.NUMERIC=new Pt(bi.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Pt.ALPHANUMERIC=new Pt(bi.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Pt.STRUCTURED_APPEND=new Pt(bi.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Pt.BYTE=new Pt(bi.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Pt.ECI=new Pt(bi.ECI,"ECI",Int32Array.from([0,0,0]),7),Pt.KANJI=new Pt(bi.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Pt.FNC1_FIRST_POSITION=new Pt(bi.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Pt.FNC1_SECOND_POSITION=new Pt(bi.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Pt.HANZI=new Pt(bi.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class mn{static decode(a,l,c,h){const p=new Co(a);let g=new X;const w=new Array;let N=-1,T=-1;try{let D=null,B=!1,G;do{if(p.available()<4)G=Pt.TERMINATOR;else{const le=p.readBits(4);G=Pt.forBits(le)}switch(G){case Pt.TERMINATOR:break;case Pt.FNC1_FIRST_POSITION:case Pt.FNC1_SECOND_POSITION:B=!0;break;case Pt.STRUCTURED_APPEND:if(p.available()<16)throw new U;N=p.readBits(8),T=p.readBits(8);break;case Pt.ECI:const le=mn.parseECIValue(p);if(D=te.getCharacterSetECIByValue(le),D===null)throw new U;break;case Pt.HANZI:const ye=p.readBits(4),Ae=p.readBits(G.getCharacterCountBits(l));ye===mn.GB2312_SUBSET&&mn.decodeHanziSegment(p,g,Ae);break;default:const Te=p.readBits(G.getCharacterCountBits(l));switch(G){case Pt.NUMERIC:mn.decodeNumericSegment(p,g,Te);break;case Pt.ALPHANUMERIC:mn.decodeAlphanumericSegment(p,g,Te,B);break;case Pt.BYTE:mn.decodeByteSegment(p,g,Te,D,w,h);break;case Pt.KANJI:mn.decodeKanjiSegment(p,g,Te);break;default:throw new U}break}}while(G!==Pt.TERMINATOR)}catch{throw new U}return new Oe(a,g.toString(),w.length===0?null:w,c===null?null:c.toString(),N,T)}static decodeHanziSegment(a,l,c){if(c*13>a.available())throw new U;const h=new Uint8Array(2*c);let p=0;for(;c>0;){const g=a.readBits(13);let w=g/96<<8&4294967295|g%96;w<959?w+=41377:w+=42657,h[p]=w>>8&255,h[p+1]=w&255,p+=2,c--}try{l.append($.decode(h,q.GB2312))}catch(g){throw new U(g)}}static decodeKanjiSegment(a,l,c){if(c*13>a.available())throw new U;const h=new Uint8Array(2*c);let p=0;for(;c>0;){const g=a.readBits(13);let w=g/192<<8&4294967295|g%192;w<7936?w+=33088:w+=49472,h[p]=w>>8,h[p+1]=w,p+=2,c--}try{l.append($.decode(h,q.SHIFT_JIS))}catch(g){throw new U(g)}}static decodeByteSegment(a,l,c,h,p,g){if(8*c>a.available())throw new U;const w=new Uint8Array(c);for(let T=0;T<c;T++)w[T]=a.readBits(8);let N;h===null?N=q.guessEncoding(w,g):N=h.getName();try{l.append($.decode(w,N))}catch(T){throw new U(T)}p.push(w)}static toAlphaNumericChar(a){if(a>=mn.ALPHANUMERIC_CHARS.length)throw new U;return mn.ALPHANUMERIC_CHARS[a]}static decodeAlphanumericSegment(a,l,c,h){const p=l.length();for(;c>1;){if(a.available()<11)throw new U;const g=a.readBits(11);l.append(mn.toAlphaNumericChar(Math.floor(g/45))),l.append(mn.toAlphaNumericChar(g%45)),c-=2}if(c===1){if(a.available()<6)throw new U;l.append(mn.toAlphaNumericChar(a.readBits(6)))}if(h)for(let g=p;g<l.length();g++)l.charAt(g)==="%"&&(g<l.length()-1&&l.charAt(g+1)==="%"?l.deleteCharAt(g+1):l.setCharAt(g,""))}static decodeNumericSegment(a,l,c){for(;c>=3;){if(a.available()<10)throw new U;const h=a.readBits(10);if(h>=1e3)throw new U;l.append(mn.toAlphaNumericChar(Math.floor(h/100))),l.append(mn.toAlphaNumericChar(Math.floor(h/10)%10)),l.append(mn.toAlphaNumericChar(h%10)),c-=3}if(c===2){if(a.available()<7)throw new U;const h=a.readBits(7);if(h>=100)throw new U;l.append(mn.toAlphaNumericChar(Math.floor(h/10))),l.append(mn.toAlphaNumericChar(h%10))}else if(c===1){if(a.available()<4)throw new U;const h=a.readBits(4);if(h>=10)throw new U;l.append(mn.toAlphaNumericChar(h))}}static parseECIValue(a){const l=a.readBits(8);if(!(l&128))return l&127;if((l&192)===128){const c=a.readBits(8);return(l&63)<<8&4294967295|c}if((l&224)===192){const c=a.readBits(16);return(l&31)<<16&4294967295|c}throw new U}}mn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",mn.GB2312_SUBSET=1;class Wa{constructor(a){this.mirrored=a}isMirrored(){return this.mirrored}applyMirroredCorrection(a){if(!this.mirrored||a===null||a.length<3)return;const l=a[0];a[0]=a[2],a[2]=l}}class _o{constructor(){this.rsDecoder=new fe(Ge.QR_CODE_FIELD_256)}decodeBooleanArray(a,l){return this.decodeBitMatrix(Q.parseFromBooleanArray(a),l)}decodeBitMatrix(a,l){const c=new Dl(a);let h=null;try{return this.decodeBitMatrixParser(c,l)}catch(p){h=p}try{c.remask(),c.setMirror(!0),c.readVersion(),c.readFormatInformation(),c.mirror();const p=this.decodeBitMatrixParser(c,l);return p.setOther(new Wa(!0)),p}catch(p){throw h!==null?h:p}}decodeBitMatrixParser(a,l){const c=a.readVersion(),h=a.readFormatInformation().getErrorCorrectionLevel(),p=a.readCodewords(),g=Rl.getDataBlocks(p,c,h);let w=0;for(const D of g)w+=D.getNumDataCodewords();const N=new Uint8Array(w);let T=0;for(const D of g){const B=D.getCodewords(),G=D.getNumDataCodewords();this.correctErrors(B,G);for(let le=0;le<G;le++)N[T++]=B[le]}return mn.decode(N,c,h,l)}correctErrors(a,l){const c=new Int32Array(a);try{this.rsDecoder.decode(c,a.length-l)}catch{throw new b}for(let h=0;h<l;h++)a[h]=c[h]}}class To extends oe{constructor(a,l,c){super(a,l),this.estimatedModuleSize=c}aboutEquals(a,l,c){if(Math.abs(l-this.getY())<=a&&Math.abs(c-this.getX())<=a){const h=Math.abs(a-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(a,l,c){const h=(this.getX()+l)/2,p=(this.getY()+a)/2,g=(this.estimatedModuleSize+c)/2;return new To(h,p,g)}}class Cr{constructor(a,l,c,h,p,g,w){this.image=a,this.startX=l,this.startY=c,this.width=h,this.height=p,this.moduleSize=g,this.resultPointCallback=w,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const a=this.startX,l=this.height,c=this.width,h=a+c,p=this.startY+l/2,g=new Int32Array(3),w=this.image;for(let N=0;N<l;N++){const T=p+(N&1?-Math.floor((N+1)/2):Math.floor((N+1)/2));g[0]=0,g[1]=0,g[2]=0;let D=a;for(;D<h&&!w.get(D,T);)D++;let B=0;for(;D<h;){if(w.get(D,T))if(B===1)g[1]++;else if(B===2){if(this.foundPatternCross(g)){const G=this.handlePossibleCenter(g,T,D);if(G!==null)return G}g[0]=g[2],g[1]=1,g[2]=0,B=1}else g[++B]++;else B===1&&B++,g[B]++;D++}if(this.foundPatternCross(g)){const G=this.handlePossibleCenter(g,T,h);if(G!==null)return G}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new J}static centerFromEnd(a,l){return l-a[2]-a[1]/2}foundPatternCross(a){const l=this.moduleSize,c=l/2;for(let h=0;h<3;h++)if(Math.abs(l-a[h])>=c)return!1;return!0}crossCheckVertical(a,l,c,h){const p=this.image,g=p.getHeight(),w=this.crossCheckStateCount;w[0]=0,w[1]=0,w[2]=0;let N=a;for(;N>=0&&p.get(l,N)&&w[1]<=c;)w[1]++,N--;if(N<0||w[1]>c)return NaN;for(;N>=0&&!p.get(l,N)&&w[0]<=c;)w[0]++,N--;if(w[0]>c)return NaN;for(N=a+1;N<g&&p.get(l,N)&&w[1]<=c;)w[1]++,N++;if(N===g||w[1]>c)return NaN;for(;N<g&&!p.get(l,N)&&w[2]<=c;)w[2]++,N++;if(w[2]>c)return NaN;const T=w[0]+w[1]+w[2];return 5*Math.abs(T-h)>=2*h?NaN:this.foundPatternCross(w)?Cr.centerFromEnd(w,N):NaN}handlePossibleCenter(a,l,c){const h=a[0]+a[1]+a[2],p=Cr.centerFromEnd(a,c),g=this.crossCheckVertical(l,p,2*a[1],h);if(!isNaN(g)){const w=(a[0]+a[1]+a[2])/3;for(const T of this.possibleCenters)if(T.aboutEquals(w,g,p))return T.combineEstimate(g,p,w);const N=new To(p,g,w);this.possibleCenters.push(N),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(N)}return null}}class Ml extends oe{constructor(a,l,c,h){super(a,l),this.estimatedModuleSize=c,this.count=h,h===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(a,l,c){if(Math.abs(l-this.getY())<=a&&Math.abs(c-this.getX())<=a){const h=Math.abs(a-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(a,l,c){const h=this.count+1,p=(this.count*this.getX()+l)/h,g=(this.count*this.getY()+a)/h,w=(this.count*this.estimatedModuleSize+c)/h;return new Ml(p,g,w,h)}}class jc{constructor(a){this.bottomLeft=a[0],this.topLeft=a[1],this.topRight=a[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Nt{constructor(a,l){this.image=a,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=l}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(a){const l=a!=null&&a.get(ne.TRY_HARDER)!==void 0,c=a!=null&&a.get(ne.PURE_BARCODE)!==void 0,h=this.image,p=h.getHeight(),g=h.getWidth();let w=Math.floor(3*p/(4*Nt.MAX_MODULES));(w<Nt.MIN_SKIP||l)&&(w=Nt.MIN_SKIP);let N=!1;const T=new Int32Array(5);for(let B=w-1;B<p&&!N;B+=w){T[0]=0,T[1]=0,T[2]=0,T[3]=0,T[4]=0;let G=0;for(let le=0;le<g;le++)if(h.get(le,B))(G&1)===1&&G++,T[G]++;else if(G&1)T[G]++;else if(G===4)if(Nt.foundPatternCross(T)){if(this.handlePossibleCenter(T,B,le,c)===!0)if(w=2,this.hasSkipped===!0)N=this.haveMultiplyConfirmedCenters();else{const Ae=this.findRowSkip();Ae>T[2]&&(B+=Ae-T[2]-w,le=g-1)}else{T[0]=T[2],T[1]=T[3],T[2]=T[4],T[3]=1,T[4]=0,G=3;continue}G=0,T[0]=0,T[1]=0,T[2]=0,T[3]=0,T[4]=0}else T[0]=T[2],T[1]=T[3],T[2]=T[4],T[3]=1,T[4]=0,G=3;else T[++G]++;Nt.foundPatternCross(T)&&this.handlePossibleCenter(T,B,g,c)===!0&&(w=T[0],this.hasSkipped&&(N=this.haveMultiplyConfirmedCenters()))}const D=this.selectBestPatterns();return oe.orderBestPatterns(D),new jc(D)}static centerFromEnd(a,l){return l-a[4]-a[3]-a[2]/2}static foundPatternCross(a){let l=0;for(let p=0;p<5;p++){const g=a[p];if(g===0)return!1;l+=g}if(l<7)return!1;const c=l/7,h=c/2;return Math.abs(c-a[0])<h&&Math.abs(c-a[1])<h&&Math.abs(3*c-a[2])<3*h&&Math.abs(c-a[3])<h&&Math.abs(c-a[4])<h}getCrossCheckStateCount(){const a=this.crossCheckStateCount;return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a}crossCheckDiagonal(a,l,c,h){const p=this.getCrossCheckStateCount();let g=0;const w=this.image;for(;a>=g&&l>=g&&w.get(l-g,a-g);)p[2]++,g++;if(a<g||l<g)return!1;for(;a>=g&&l>=g&&!w.get(l-g,a-g)&&p[1]<=c;)p[1]++,g++;if(a<g||l<g||p[1]>c)return!1;for(;a>=g&&l>=g&&w.get(l-g,a-g)&&p[0]<=c;)p[0]++,g++;if(p[0]>c)return!1;const N=w.getHeight(),T=w.getWidth();for(g=1;a+g<N&&l+g<T&&w.get(l+g,a+g);)p[2]++,g++;if(a+g>=N||l+g>=T)return!1;for(;a+g<N&&l+g<T&&!w.get(l+g,a+g)&&p[3]<c;)p[3]++,g++;if(a+g>=N||l+g>=T||p[3]>=c)return!1;for(;a+g<N&&l+g<T&&w.get(l+g,a+g)&&p[4]<c;)p[4]++,g++;if(p[4]>=c)return!1;const D=p[0]+p[1]+p[2]+p[3]+p[4];return Math.abs(D-h)<2*h&&Nt.foundPatternCross(p)}crossCheckVertical(a,l,c,h){const p=this.image,g=p.getHeight(),w=this.getCrossCheckStateCount();let N=a;for(;N>=0&&p.get(l,N);)w[2]++,N--;if(N<0)return NaN;for(;N>=0&&!p.get(l,N)&&w[1]<=c;)w[1]++,N--;if(N<0||w[1]>c)return NaN;for(;N>=0&&p.get(l,N)&&w[0]<=c;)w[0]++,N--;if(w[0]>c)return NaN;for(N=a+1;N<g&&p.get(l,N);)w[2]++,N++;if(N===g)return NaN;for(;N<g&&!p.get(l,N)&&w[3]<c;)w[3]++,N++;if(N===g||w[3]>=c)return NaN;for(;N<g&&p.get(l,N)&&w[4]<c;)w[4]++,N++;if(w[4]>=c)return NaN;const T=w[0]+w[1]+w[2]+w[3]+w[4];return 5*Math.abs(T-h)>=2*h?NaN:Nt.foundPatternCross(w)?Nt.centerFromEnd(w,N):NaN}crossCheckHorizontal(a,l,c,h){const p=this.image,g=p.getWidth(),w=this.getCrossCheckStateCount();let N=a;for(;N>=0&&p.get(N,l);)w[2]++,N--;if(N<0)return NaN;for(;N>=0&&!p.get(N,l)&&w[1]<=c;)w[1]++,N--;if(N<0||w[1]>c)return NaN;for(;N>=0&&p.get(N,l)&&w[0]<=c;)w[0]++,N--;if(w[0]>c)return NaN;for(N=a+1;N<g&&p.get(N,l);)w[2]++,N++;if(N===g)return NaN;for(;N<g&&!p.get(N,l)&&w[3]<c;)w[3]++,N++;if(N===g||w[3]>=c)return NaN;for(;N<g&&p.get(N,l)&&w[4]<c;)w[4]++,N++;if(w[4]>=c)return NaN;const T=w[0]+w[1]+w[2]+w[3]+w[4];return 5*Math.abs(T-h)>=h?NaN:Nt.foundPatternCross(w)?Nt.centerFromEnd(w,N):NaN}handlePossibleCenter(a,l,c,h){const p=a[0]+a[1]+a[2]+a[3]+a[4];let g=Nt.centerFromEnd(a,c),w=this.crossCheckVertical(l,Math.floor(g),a[2],p);if(!isNaN(w)&&(g=this.crossCheckHorizontal(Math.floor(g),Math.floor(w),a[2],p),!isNaN(g)&&(!h||this.crossCheckDiagonal(Math.floor(w),Math.floor(g),a[2],p)))){const N=p/7;let T=!1;const D=this.possibleCenters;for(let B=0,G=D.length;B<G;B++){const le=D[B];if(le.aboutEquals(N,w,g)){D[B]=le.combineEstimate(w,g,N),T=!0;break}}if(!T){const B=new Ml(g,w,N);D.push(B),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(B)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let l=null;for(const c of this.possibleCenters)if(c.getCount()>=Nt.CENTER_QUORUM)if(l==null)l=c;else return this.hasSkipped=!0,Math.floor((Math.abs(l.getX()-c.getX())-Math.abs(l.getY()-c.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let a=0,l=0;const c=this.possibleCenters.length;for(const g of this.possibleCenters)g.getCount()>=Nt.CENTER_QUORUM&&(a++,l+=g.getEstimatedModuleSize());if(a<3)return!1;const h=l/c;let p=0;for(const g of this.possibleCenters)p+=Math.abs(g.getEstimatedModuleSize()-h);return p<=.05*l}selectBestPatterns(){const a=this.possibleCenters.length;if(a<3)throw new J;const l=this.possibleCenters;let c;if(a>3){let h=0,p=0;for(const N of this.possibleCenters){const T=N.getEstimatedModuleSize();h+=T,p+=T*T}c=h/a;let g=Math.sqrt(p/a-c*c);l.sort((N,T)=>{const D=Math.abs(T.getEstimatedModuleSize()-c),B=Math.abs(N.getEstimatedModuleSize()-c);return D<B?-1:D>B?1:0});const w=Math.max(.2*c,g);for(let N=0;N<l.length&&l.length>3;N++){const T=l[N];Math.abs(T.getEstimatedModuleSize()-c)>w&&(l.splice(N,1),N--)}}if(l.length>3){let h=0;for(const p of l)h+=p.getEstimatedModuleSize();c=h/l.length,l.sort((p,g)=>{if(g.getCount()===p.getCount()){const w=Math.abs(g.getEstimatedModuleSize()-c),N=Math.abs(p.getEstimatedModuleSize()-c);return w<N?1:w>N?-1:0}else return g.getCount()-p.getCount()}),l.splice(3)}return[l[0],l[1],l[2]]}}Nt.CENTER_QUORUM=2,Nt.MIN_SKIP=3,Nt.MAX_MODULES=57;class Ga{constructor(a){this.image=a}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(a){this.resultPointCallback=a==null?null:a.get(ne.NEED_RESULT_POINT_CALLBACK);const c=new Nt(this.image,this.resultPointCallback).find(a);return this.processFinderPatternInfo(c)}processFinderPatternInfo(a){const l=a.getTopLeft(),c=a.getTopRight(),h=a.getBottomLeft(),p=this.calculateModuleSize(l,c,h);if(p<1)throw new J("No pattern found in proccess finder.");const g=Ga.computeDimension(l,c,h,p),w=It.getProvisionalVersionForDimension(g),N=w.getDimensionForVersion()-7;let T=null;if(w.getAlignmentPatternCenters().length>0){const le=c.getX()-l.getX()+h.getX(),ye=c.getY()-l.getY()+h.getY(),Ae=1-3/N,Te=Math.floor(l.getX()+Ae*(le-l.getX())),Ue=Math.floor(l.getY()+Ae*(ye-l.getY()));for(let nt=4;nt<=16;nt<<=1)try{T=this.findAlignmentInRegion(p,Te,Ue,nt);break}catch(at){if(!(at instanceof J))throw at}}const D=Ga.createTransform(l,c,h,T,g),B=Ga.sampleGrid(this.image,D,g);let G;return T===null?G=[h,l,c]:G=[h,l,c,T],new ve(B,G)}static createTransform(a,l,c,h,p){const g=p-3.5;let w,N,T,D;return h!==null?(w=h.getX(),N=h.getY(),T=g-3,D=T):(w=l.getX()-a.getX()+c.getX(),N=l.getY()-a.getY()+c.getY(),T=g,D=g),Qe.quadrilateralToQuadrilateral(3.5,3.5,g,3.5,T,D,3.5,g,a.getX(),a.getY(),l.getX(),l.getY(),w,N,c.getX(),c.getY())}static sampleGrid(a,l,c){return xt.getInstance().sampleGridWithTransform(a,c,c,l)}static computeDimension(a,l,c,h){const p=$e.round(oe.distance(a,l)/h),g=$e.round(oe.distance(a,c)/h);let w=Math.floor((p+g)/2)+7;switch(w&3){case 0:w++;break;case 2:w--;break;case 3:throw new J("Dimensions could be not found.")}return w}calculateModuleSize(a,l,c){return(this.calculateModuleSizeOneWay(a,l)+this.calculateModuleSizeOneWay(a,c))/2}calculateModuleSizeOneWay(a,l){const c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(l.getX()),Math.floor(l.getY())),h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(l.getX()),Math.floor(l.getY()),Math.floor(a.getX()),Math.floor(a.getY()));return isNaN(c)?h/7:isNaN(h)?c/7:(c+h)/14}sizeOfBlackWhiteBlackRunBothWays(a,l,c,h){let p=this.sizeOfBlackWhiteBlackRun(a,l,c,h),g=1,w=a-(c-a);w<0?(g=a/(a-w),w=0):w>=this.image.getWidth()&&(g=(this.image.getWidth()-1-a)/(w-a),w=this.image.getWidth()-1);let N=Math.floor(l-(h-l)*g);return g=1,N<0?(g=l/(l-N),N=0):N>=this.image.getHeight()&&(g=(this.image.getHeight()-1-l)/(N-l),N=this.image.getHeight()-1),w=Math.floor(a+(w-a)*g),p+=this.sizeOfBlackWhiteBlackRun(a,l,w,N),p-1}sizeOfBlackWhiteBlackRun(a,l,c,h){const p=Math.abs(h-l)>Math.abs(c-a);if(p){let le=a;a=l,l=le,le=c,c=h,h=le}const g=Math.abs(c-a),w=Math.abs(h-l);let N=-g/2;const T=a<c?1:-1,D=l<h?1:-1;let B=0;const G=c+T;for(let le=a,ye=l;le!==G;le+=T){const Ae=p?ye:le,Te=p?le:ye;if(B===1===this.image.get(Ae,Te)){if(B===2)return $e.distance(le,ye,a,l);B++}if(N+=w,N>0){if(ye===h)break;ye+=D,N-=g}}return B===2?$e.distance(c+T,h,a,l):NaN}findAlignmentInRegion(a,l,c,h){const p=Math.floor(h*a),g=Math.max(0,l-p),w=Math.min(this.image.getWidth()-1,l+p);if(w-g<a*3)throw new J("Alignment top exceeds estimated module size.");const N=Math.max(0,c-p),T=Math.min(this.image.getHeight()-1,c+p);if(T-N<a*3)throw new J("Alignment bottom exceeds estimated module size.");return new Cr(this.image,g,N,w-g,T-N,a,this.resultPointCallback).find()}}class Os{constructor(){this.decoder=new _o}getDecoder(){return this.decoder}decode(a,l){let c,h;if(l!=null&&l.get(ne.PURE_BARCODE)!==void 0){const N=Os.extractPureBits(a.getBlackMatrix());c=this.decoder.decodeBitMatrix(N,l),h=Os.NO_POINTS}else{const N=new Ga(a.getBlackMatrix()).detect(l);c=this.decoder.decodeBitMatrix(N.getBits(),l),h=N.getPoints()}c.getOther()instanceof Wa&&c.getOther().applyMirroredCorrection(h);const p=new de(c.getText(),c.getRawBytes(),void 0,h,he.QR_CODE,void 0),g=c.getByteSegments();g!==null&&p.putMetadata(Le.BYTE_SEGMENTS,g);const w=c.getECLevel();return w!==null&&p.putMetadata(Le.ERROR_CORRECTION_LEVEL,w),c.hasStructuredAppend()&&(p.putMetadata(Le.STRUCTURED_APPEND_SEQUENCE,c.getStructuredAppendSequenceNumber()),p.putMetadata(Le.STRUCTURED_APPEND_PARITY,c.getStructuredAppendParity())),p}reset(){}static extractPureBits(a){const l=a.getTopLeftOnBit(),c=a.getBottomRightOnBit();if(l===null||c===null)throw new J;const h=this.moduleSize(l,a);let p=l[1],g=c[1],w=l[0],N=c[0];if(w>=N||p>=g)throw new J;if(g-p!==N-w&&(N=w+(g-p),N>=a.getWidth()))throw new J;const T=Math.round((N-w+1)/h),D=Math.round((g-p+1)/h);if(T<=0||D<=0)throw new J;if(D!==T)throw new J;const B=Math.floor(h/2);p+=B,w+=B;const G=w+Math.floor((T-1)*h)-N;if(G>0){if(G>B)throw new J;w-=G}const le=p+Math.floor((D-1)*h)-g;if(le>0){if(le>B)throw new J;p-=le}const ye=new Q(T,D);for(let Ae=0;Ae<D;Ae++){const Te=p+Math.floor(Ae*h);for(let Ue=0;Ue<T;Ue++)a.get(w+Math.floor(Ue*h),Te)&&ye.set(Ue,Ae)}return ye}static moduleSize(a,l){const c=l.getHeight(),h=l.getWidth();let p=a[0],g=a[1],w=!0,N=0;for(;p<h&&g<c;){if(w!==l.get(p,g)){if(++N===5)break;w=!w}p++,g++}if(p===h||g===c)throw new J;return(p-a[0])/7}}Os.NO_POINTS=new Array;class kt{PDF417Common(){}static getBitCountSum(a){return $e.sum(a)}static toIntArray(a){if(a==null||!a.length)return kt.EMPTY_INT_ARRAY;const l=new Int32Array(a.length);let c=0;for(const h of a)l[c++]=h;return l}static getCodeword(a){const l=_.binarySearch(kt.SYMBOL_TABLE,a&262143);return l<0?-1:(kt.CODEWORD_TABLE[l]-1)%kt.NUMBER_OF_CODEWORDS}}kt.NUMBER_OF_CODEWORDS=929,kt.MAX_CODEWORDS_IN_BARCODE=kt.NUMBER_OF_CODEWORDS-1,kt.MIN_ROWS_IN_BARCODE=3,kt.MAX_ROWS_IN_BARCODE=90,kt.MODULES_IN_CODEWORD=17,kt.MODULES_IN_STOP_PATTERN=18,kt.BARS_IN_MODULE=8,kt.EMPTY_INT_ARRAY=new Int32Array([]),kt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),kt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Oc{constructor(a,l){this.bits=a,this.points=l}getBits(){return this.bits}getPoints(){return this.points}}class qt{static detectMultiple(a,l,c){let h=a.getBlackMatrix(),p=qt.detect(c,h);return p.length||(h=h.clone(),h.rotate180(),p=qt.detect(c,h)),new Oc(h,p)}static detect(a,l){const c=new Array;let h=0,p=0,g=!1;for(;h<l.getHeight();){const w=qt.findVertices(l,h,p);if(w[0]==null&&w[3]==null){if(!g)break;g=!1,p=0;for(const N of c)N[1]!=null&&(h=Math.trunc(Math.max(h,N[1].getY()))),N[3]!=null&&(h=Math.max(h,Math.trunc(N[3].getY())));h+=qt.ROW_STEP;continue}if(g=!0,c.push(w),!a)break;w[2]!=null?(p=Math.trunc(w[2].getX()),h=Math.trunc(w[2].getY())):(p=Math.trunc(w[4].getX()),h=Math.trunc(w[4].getY()))}return c}static findVertices(a,l,c){const h=a.getHeight(),p=a.getWidth(),g=new Array(8);return qt.copyToResult(g,qt.findRowsWithPattern(a,h,p,l,c,qt.START_PATTERN),qt.INDEXES_START_PATTERN),g[4]!=null&&(c=Math.trunc(g[4].getX()),l=Math.trunc(g[4].getY())),qt.copyToResult(g,qt.findRowsWithPattern(a,h,p,l,c,qt.STOP_PATTERN),qt.INDEXES_STOP_PATTERN),g}static copyToResult(a,l,c){for(let h=0;h<c.length;h++)a[c[h]]=l[h]}static findRowsWithPattern(a,l,c,h,p,g){const w=new Array(4);let N=!1;const T=new Int32Array(g.length);for(;h<l;h+=qt.ROW_STEP){let B=qt.findGuardPattern(a,p,h,c,!1,g,T);if(B!=null){for(;h>0;){const G=qt.findGuardPattern(a,p,--h,c,!1,g,T);if(G!=null)B=G;else{h++;break}}w[0]=new oe(B[0],h),w[1]=new oe(B[1],h),N=!0;break}}let D=h+1;if(N){let B=0,G=Int32Array.from([Math.trunc(w[0].getX()),Math.trunc(w[1].getX())]);for(;D<l;D++){const le=qt.findGuardPattern(a,G[0],D,c,!1,g,T);if(le!=null&&Math.abs(G[0]-le[0])<qt.MAX_PATTERN_DRIFT&&Math.abs(G[1]-le[1])<qt.MAX_PATTERN_DRIFT)G=le,B=0;else{if(B>qt.SKIPPED_ROW_COUNT_MAX)break;B++}}D-=B+1,w[2]=new oe(G[0],D),w[3]=new oe(G[1],D)}return D-h<qt.BARCODE_MIN_HEIGHT&&_.fill(w,null),w}static findGuardPattern(a,l,c,h,p,g,w){_.fillWithin(w,0,w.length,0);let N=l,T=0;for(;a.get(N,c)&&N>0&&T++<qt.MAX_PIXEL_DRIFT;)N--;let D=N,B=0,G=g.length;for(let le=p;D<h;D++)if(a.get(D,c)!==le)w[B]++;else{if(B===G-1){if(qt.patternMatchVariance(w,g,qt.MAX_INDIVIDUAL_VARIANCE)<qt.MAX_AVG_VARIANCE)return new Int32Array([N,D]);N+=w[0]+w[1],I.arraycopy(w,2,w,0,B-1),w[B-1]=0,w[B]=0,B--}else B++;w[B]=1,le=!le}return B===G-1&&qt.patternMatchVariance(w,g,qt.MAX_INDIVIDUAL_VARIANCE)<qt.MAX_AVG_VARIANCE?new Int32Array([N,D-1]):null}static patternMatchVariance(a,l,c){let h=a.length,p=0,g=0;for(let T=0;T<h;T++)p+=a[T],g+=l[T];if(p<g)return 1/0;let w=p/g;c*=w;let N=0;for(let T=0;T<h;T++){let D=a[T],B=l[T]*w,G=D>B?D-B:B-D;if(G>c)return 1/0;N+=G}return N/p}}qt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),qt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),qt.MAX_AVG_VARIANCE=.42,qt.MAX_INDIVIDUAL_VARIANCE=.8,qt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),qt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),qt.MAX_PIXEL_DRIFT=3,qt.MAX_PATTERN_DRIFT=5,qt.SKIPPED_ROW_COUNT_MAX=25,qt.ROW_STEP=5,qt.BARCODE_MIN_HEIGHT=10;class er{constructor(a,l){if(l.length===0)throw new y;this.field=a;let c=l.length;if(c>1&&l[0]===0){let h=1;for(;h<c&&l[h]===0;)h++;h===c?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(c-h),I.arraycopy(l,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=l}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(a){return this.coefficients[this.coefficients.length-1-a]}evaluateAt(a){if(a===0)return this.getCoefficient(0);if(a===1){let h=0;for(let p of this.coefficients)h=this.field.add(h,p);return h}let l=this.coefficients[0],c=this.coefficients.length;for(let h=1;h<c;h++)l=this.field.add(this.field.multiply(a,l),this.coefficients[h]);return l}add(a){if(!this.field.equals(a.field))throw new y("ModulusPolys do not have same ModulusGF field");if(this.isZero())return a;if(a.isZero())return this;let l=this.coefficients,c=a.coefficients;if(l.length>c.length){let g=l;l=c,c=g}let h=new Int32Array(c.length),p=c.length-l.length;I.arraycopy(c,0,h,0,p);for(let g=p;g<c.length;g++)h[g]=this.field.add(l[g-p],c[g]);return new er(this.field,h)}subtract(a){if(!this.field.equals(a.field))throw new y("ModulusPolys do not have same ModulusGF field");return a.isZero()?this:this.add(a.negative())}multiply(a){return a instanceof er?this.multiplyOther(a):this.multiplyScalar(a)}multiplyOther(a){if(!this.field.equals(a.field))throw new y("ModulusPolys do not have same ModulusGF field");if(this.isZero()||a.isZero())return new er(this.field,new Int32Array([0]));let l=this.coefficients,c=l.length,h=a.coefficients,p=h.length,g=new Int32Array(c+p-1);for(let w=0;w<c;w++){let N=l[w];for(let T=0;T<p;T++)g[w+T]=this.field.add(g[w+T],this.field.multiply(N,h[T]))}return new er(this.field,g)}negative(){let a=this.coefficients.length,l=new Int32Array(a);for(let c=0;c<a;c++)l[c]=this.field.subtract(0,this.coefficients[c]);return new er(this.field,l)}multiplyScalar(a){if(a===0)return new er(this.field,new Int32Array([0]));if(a===1)return this;let l=this.coefficients.length,c=new Int32Array(l);for(let h=0;h<l;h++)c[h]=this.field.multiply(this.coefficients[h],a);return new er(this.field,c)}multiplyByMonomial(a,l){if(a<0)throw new y;if(l===0)return new er(this.field,new Int32Array([0]));let c=this.coefficients.length,h=new Int32Array(c+a);for(let p=0;p<c;p++)h[p]=this.field.multiply(this.coefficients[p],l);return new er(this.field,h)}toString(){let a=new X;for(let l=this.getDegree();l>=0;l--){let c=this.getCoefficient(l);c!==0&&(c<0?(a.append(" - "),c=-c):a.length()>0&&a.append(" + "),(l===0||c!==1)&&a.append(c),l!==0&&(l===1?a.append("x"):(a.append("x^"),a.append(l))))}return a.toString()}}class Bl{add(a,l){return(a+l)%this.modulus}subtract(a,l){return(this.modulus+a-l)%this.modulus}exp(a){return this.expTable[a]}log(a){if(a===0)throw new y;return this.logTable[a]}inverse(a){if(a===0)throw new rt;return this.expTable[this.modulus-this.logTable[a]-1]}multiply(a,l){return a===0||l===0?0:this.expTable[(this.logTable[a]+this.logTable[l])%(this.modulus-1)]}getSize(){return this.modulus}equals(a){return a===this}}class Fl extends Bl{constructor(a,l){super(),this.modulus=a,this.expTable=new Int32Array(a),this.logTable=new Int32Array(a);let c=1;for(let h=0;h<a;h++)this.expTable[h]=c,c=c*l%a;for(let h=0;h<a-1;h++)this.logTable[this.expTable[h]]=h;this.zero=new er(this,new Int32Array([0])),this.one=new er(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(a,l){if(a<0)throw new y;if(l===0)return this.zero;let c=new Int32Array(a+1);return c[0]=l,new er(this,c)}}Fl.PDF417_GF=new Fl(kt.NUMBER_OF_CODEWORDS,3);class Dc{constructor(){this.field=Fl.PDF417_GF}decode(a,l,c){let h=new er(this.field,a),p=new Int32Array(l),g=!1;for(let ye=l;ye>0;ye--){let Ae=h.evaluateAt(this.field.exp(ye));p[l-ye]=Ae,Ae!==0&&(g=!0)}if(!g)return 0;let w=this.field.getOne();if(c!=null)for(const ye of c){let Ae=this.field.exp(a.length-1-ye),Te=new er(this.field,new Int32Array([this.field.subtract(0,Ae),1]));w=w.multiply(Te)}let N=new er(this.field,p),T=this.runEuclideanAlgorithm(this.field.buildMonomial(l,1),N,l),D=T[0],B=T[1],G=this.findErrorLocations(D),le=this.findErrorMagnitudes(B,D,G);for(let ye=0;ye<G.length;ye++){let Ae=a.length-1-this.field.log(G[ye]);if(Ae<0)throw b.getChecksumInstance();a[Ae]=this.field.subtract(a[Ae],le[ye])}return G.length}runEuclideanAlgorithm(a,l,c){if(a.getDegree()<l.getDegree()){let G=a;a=l,l=G}let h=a,p=l,g=this.field.getZero(),w=this.field.getOne();for(;p.getDegree()>=Math.round(c/2);){let G=h,le=g;if(h=p,g=w,h.isZero())throw b.getChecksumInstance();p=G;let ye=this.field.getZero(),Ae=h.getCoefficient(h.getDegree()),Te=this.field.inverse(Ae);for(;p.getDegree()>=h.getDegree()&&!p.isZero();){let Ue=p.getDegree()-h.getDegree(),nt=this.field.multiply(p.getCoefficient(p.getDegree()),Te);ye=ye.add(this.field.buildMonomial(Ue,nt)),p=p.subtract(h.multiplyByMonomial(Ue,nt))}w=ye.multiply(g).subtract(le).negative()}let N=w.getCoefficient(0);if(N===0)throw b.getChecksumInstance();let T=this.field.inverse(N),D=w.multiply(T),B=p.multiply(T);return[D,B]}findErrorLocations(a){let l=a.getDegree(),c=new Int32Array(l),h=0;for(let p=1;p<this.field.getSize()&&h<l;p++)a.evaluateAt(p)===0&&(c[h]=this.field.inverse(p),h++);if(h!==l)throw b.getChecksumInstance();return c}findErrorMagnitudes(a,l,c){let h=l.getDegree(),p=new Int32Array(h);for(let T=1;T<=h;T++)p[h-T]=this.field.multiply(T,l.getCoefficient(T));let g=new er(this.field,p),w=c.length,N=new Int32Array(w);for(let T=0;T<w;T++){let D=this.field.inverse(c[T]),B=this.field.subtract(0,a.evaluateAt(D)),G=this.field.inverse(g.evaluateAt(D));N[T]=this.field.multiply(B,G)}return N}}class Qs{constructor(a,l,c,h,p){a instanceof Qs?this.constructor_2(a):this.constructor_1(a,l,c,h,p)}constructor_1(a,l,c,h,p){const g=l==null||c==null,w=h==null||p==null;if(g&&w)throw new J;g?(l=new oe(0,h.getY()),c=new oe(0,p.getY())):w&&(h=new oe(a.getWidth()-1,l.getY()),p=new oe(a.getWidth()-1,c.getY())),this.image=a,this.topLeft=l,this.bottomLeft=c,this.topRight=h,this.bottomRight=p,this.minX=Math.trunc(Math.min(l.getX(),c.getX())),this.maxX=Math.trunc(Math.max(h.getX(),p.getX())),this.minY=Math.trunc(Math.min(l.getY(),h.getY())),this.maxY=Math.trunc(Math.max(c.getY(),p.getY()))}constructor_2(a){this.image=a.image,this.topLeft=a.getTopLeft(),this.bottomLeft=a.getBottomLeft(),this.topRight=a.getTopRight(),this.bottomRight=a.getBottomRight(),this.minX=a.getMinX(),this.maxX=a.getMaxX(),this.minY=a.getMinY(),this.maxY=a.getMaxY()}static merge(a,l){return a==null?l:l==null?a:new Qs(a.image,a.topLeft,a.bottomLeft,l.topRight,l.bottomRight)}addMissingRows(a,l,c){let h=this.topLeft,p=this.bottomLeft,g=this.topRight,w=this.bottomRight;if(a>0){let N=c?this.topLeft:this.topRight,T=Math.trunc(N.getY()-a);T<0&&(T=0);let D=new oe(N.getX(),T);c?h=D:g=D}if(l>0){let N=c?this.bottomLeft:this.bottomRight,T=Math.trunc(N.getY()+l);T>=this.image.getHeight()&&(T=this.image.getHeight()-1);let D=new oe(N.getX(),T);c?p=D:w=D}return new Qs(this.image,h,p,g,w)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ul{constructor(a,l,c,h){this.columnCount=a,this.errorCorrectionLevel=h,this.rowCountUpperPart=l,this.rowCountLowerPart=c,this.rowCount=l+c}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class hs{constructor(){this.buffer=""}static form(a,l){let c=-1;function h(g,w,N,T,D,B){if(g==="%%")return"%";if(l[++c]===void 0)return;g=T?parseInt(T.substr(1)):void 0;let G=D?parseInt(D.substr(1)):void 0,le;switch(B){case"s":le=l[c];break;case"c":le=l[c][0];break;case"f":le=parseFloat(l[c]).toFixed(g);break;case"p":le=parseFloat(l[c]).toPrecision(g);break;case"e":le=parseFloat(l[c]).toExponential(g);break;case"x":le=parseInt(l[c]).toString(G||16);break;case"d":le=parseFloat(parseInt(l[c],G||10).toPrecision(g)).toFixed(0);break}le=typeof le=="object"?JSON.stringify(le):(+le).toString(G);let ye=parseInt(N),Ae=N&&N[0]+""=="0"?"0":" ";for(;le.length<ye;)le=w!==void 0?le+Ae:Ae+le;return le}let p=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return a.replace(p,h)}format(a,...l){this.buffer+=hs.form(a,l)}toString(){return this.buffer}}class Yi{constructor(a){this.boundingBox=new Qs(a),this.codewords=new Array(a.getMaxY()-a.getMinY()+1)}getCodewordNearby(a){let l=this.getCodeword(a);if(l!=null)return l;for(let c=1;c<Yi.MAX_NEARBY_DISTANCE;c++){let h=this.imageRowToCodewordIndex(a)-c;if(h>=0&&(l=this.codewords[h],l!=null)||(h=this.imageRowToCodewordIndex(a)+c,h<this.codewords.length&&(l=this.codewords[h],l!=null)))return l}return null}imageRowToCodewordIndex(a){return a-this.boundingBox.getMinY()}setCodeword(a,l){this.codewords[this.imageRowToCodewordIndex(a)]=l}getCodeword(a){return this.codewords[this.imageRowToCodewordIndex(a)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const a=new hs;let l=0;for(const c of this.codewords){if(c==null){a.format("%3d:    |   %n",l++);continue}a.format("%3d: %3d|%3d%n",l++,c.getRowNumber(),c.getValue())}return a.toString()}}Yi.MAX_NEARBY_DISTANCE=5;class $a{constructor(){this.values=new Map}setValue(a){a=Math.trunc(a);let l=this.values.get(a);l==null&&(l=0),l++,this.values.set(a,l)}getValue(){let a=-1,l=new Array;for(const[c,h]of this.values.entries()){const p={getKey:()=>c,getValue:()=>h};p.getValue()>a?(a=p.getValue(),l=[],l.push(p.getKey())):p.getValue()===a&&l.push(p.getKey())}return kt.toIntArray(l)}getConfidence(a){return this.values.get(a)}}class wa extends Yi{constructor(a,l){super(a),this._isLeft=l}setRowNumbers(){for(let a of this.getCodewords())a!=null&&a.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(a){let l=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(l,a);let c=this.getBoundingBox(),h=this._isLeft?c.getTopLeft():c.getTopRight(),p=this._isLeft?c.getBottomLeft():c.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(h.getY())),w=this.imageRowToCodewordIndex(Math.trunc(p.getY())),N=-1,T=1,D=0;for(let B=g;B<w;B++){if(l[B]==null)continue;let G=l[B],le=G.getRowNumber()-N;if(le===0)D++;else if(le===1)T=Math.max(T,D),D=1,N=G.getRowNumber();else if(le<0||G.getRowNumber()>=a.getRowCount()||le>B)l[B]=null;else{let ye;T>2?ye=(T-2)*le:ye=le;let Ae=ye>=B;for(let Te=1;Te<=ye&&!Ae;Te++)Ae=l[B-Te]!=null;Ae?l[B]=null:(N=G.getRowNumber(),D=1)}}}getRowHeights(){let a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);let l=new Int32Array(a.getRowCount());for(let c of this.getCodewords())if(c!=null){let h=c.getRowNumber();if(h>=l.length)continue;l[h]++}return l}adjustIncompleteIndicatorColumnRowNumbers(a){let l=this.getBoundingBox(),c=this._isLeft?l.getTopLeft():l.getTopRight(),h=this._isLeft?l.getBottomLeft():l.getBottomRight(),p=this.imageRowToCodewordIndex(Math.trunc(c.getY())),g=this.imageRowToCodewordIndex(Math.trunc(h.getY())),w=this.getCodewords(),N=-1;for(let T=p;T<g;T++){if(w[T]==null)continue;let D=w[T];D.setRowNumberAsRowIndicatorColumn();let B=D.getRowNumber()-N;B===0||(B===1?N=D.getRowNumber():D.getRowNumber()>=a.getRowCount()?w[T]=null:N=D.getRowNumber())}}getBarcodeMetadata(){let a=this.getCodewords(),l=new $a,c=new $a,h=new $a,p=new $a;for(let w of a){if(w==null)continue;w.setRowNumberAsRowIndicatorColumn();let N=w.getValue()%30,T=w.getRowNumber();switch(this._isLeft||(T+=2),T%3){case 0:c.setValue(N*3+1);break;case 1:p.setValue(N/3),h.setValue(N%3);break;case 2:l.setValue(N+1);break}}if(l.getValue().length===0||c.getValue().length===0||h.getValue().length===0||p.getValue().length===0||l.getValue()[0]<1||c.getValue()[0]+h.getValue()[0]<kt.MIN_ROWS_IN_BARCODE||c.getValue()[0]+h.getValue()[0]>kt.MAX_ROWS_IN_BARCODE)return null;let g=new Ul(l.getValue()[0],c.getValue()[0],h.getValue()[0],p.getValue()[0]);return this.removeIncorrectCodewords(a,g),g}removeIncorrectCodewords(a,l){for(let c=0;c<a.length;c++){let h=a[c];if(a[c]==null)continue;let p=h.getValue()%30,g=h.getRowNumber();if(g>l.getRowCount()){a[c]=null;continue}switch(this._isLeft||(g+=2),g%3){case 0:p*3+1!==l.getRowCountUpperPart()&&(a[c]=null);break;case 1:(Math.trunc(p/3)!==l.getErrorCorrectionLevel()||p%3!==l.getRowCountLowerPart())&&(a[c]=null);break;case 2:p+1!==l.getColumnCount()&&(a[c]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Js{constructor(a,l){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=a,this.barcodeColumnCount=a.getColumnCount(),this.boundingBox=l,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let a=kt.MAX_CODEWORDS_IN_BARCODE,l;do l=a,a=this.adjustRowNumbersAndGetCount();while(a>0&&a<l);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(a){a!=null&&a.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let a=this.adjustRowNumbersByRow();if(a===0)return 0;for(let l=1;l<this.barcodeColumnCount+1;l++){let c=this.detectionResultColumns[l].getCodewords();for(let h=0;h<c.length;h++)c[h]!=null&&(c[h].hasValidRowNumber()||this.adjustRowNumbers(l,h,c))}return a}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let a=this.detectionResultColumns[0].getCodewords(),l=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<a.length;c++)if(a[c]!=null&&l[c]!=null&&a[c].getRowNumber()===l[c].getRowNumber())for(let h=1;h<=this.barcodeColumnCount;h++){let p=this.detectionResultColumns[h].getCodewords()[c];p!=null&&(p.setRowNumber(a[c].getRowNumber()),p.hasValidRowNumber()||(this.detectionResultColumns[h].getCodewords()[c]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let a=0,l=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<l.length;c++){if(l[c]==null)continue;let h=l[c].getRowNumber(),p=0;for(let g=this.barcodeColumnCount+1;g>0&&p<this.ADJUST_ROW_NUMBER_SKIP;g--){let w=this.detectionResultColumns[g].getCodewords()[c];w!=null&&(p=Js.adjustRowNumberIfValid(h,p,w),w.hasValidRowNumber()||a++)}}return a}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let a=0,l=this.detectionResultColumns[0].getCodewords();for(let c=0;c<l.length;c++){if(l[c]==null)continue;let h=l[c].getRowNumber(),p=0;for(let g=1;g<this.barcodeColumnCount+1&&p<this.ADJUST_ROW_NUMBER_SKIP;g++){let w=this.detectionResultColumns[g].getCodewords()[c];w!=null&&(p=Js.adjustRowNumberIfValid(h,p,w),w.hasValidRowNumber()||a++)}}return a}static adjustRowNumberIfValid(a,l,c){return c==null||c.hasValidRowNumber()||(c.isValidRowNumber(a)?(c.setRowNumber(a),l=0):++l),l}adjustRowNumbers(a,l,c){if(!this.detectionResultColumns[a-1])return;let h=c[l],p=this.detectionResultColumns[a-1].getCodewords(),g=p;this.detectionResultColumns[a+1]!=null&&(g=this.detectionResultColumns[a+1].getCodewords());let w=new Array(14);w[2]=p[l],w[3]=g[l],l>0&&(w[0]=c[l-1],w[4]=p[l-1],w[5]=g[l-1]),l>1&&(w[8]=c[l-2],w[10]=p[l-2],w[11]=g[l-2]),l<c.length-1&&(w[1]=c[l+1],w[6]=p[l+1],w[7]=g[l+1]),l<c.length-2&&(w[9]=c[l+2],w[12]=p[l+2],w[13]=g[l+2]);for(let N of w)if(Js.adjustRowNumber(h,N))return}static adjustRowNumber(a,l){return l==null?!1:l.hasValidRowNumber()&&l.getBucket()===a.getBucket()?(a.setRowNumber(l.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(a){this.boundingBox=a}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(a,l){this.detectionResultColumns[a]=l}getDetectionResultColumn(a){return this.detectionResultColumns[a]}toString(){let a=this.detectionResultColumns[0];a==null&&(a=this.detectionResultColumns[this.barcodeColumnCount+1]);let l=new hs;for(let c=0;c<a.getCodewords().length;c++){l.format("CW %3d:",c);for(let h=0;h<this.barcodeColumnCount+2;h++){if(this.detectionResultColumns[h]==null){l.format("    |   ");continue}let p=this.detectionResultColumns[h].getCodewords()[c];if(p==null){l.format("    |   ");continue}l.format(" %3d|%3d",p.getRowNumber(),p.getValue())}l.format("%n")}return l.toString()}}class Ds{constructor(a,l,c,h){this.rowNumber=Ds.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(a),this.endX=Math.trunc(l),this.bucket=Math.trunc(c),this.value=Math.trunc(h)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(a){return a!==Ds.BARCODE_ROW_UNKNOWN&&this.bucket===a%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(a){this.rowNumber=a}toString(){return this.rowNumber+"|"+this.value}}Ds.BARCODE_ROW_UNKNOWN=-1;class qr{static initialize(){for(let a=0;a<kt.SYMBOL_TABLE.length;a++){let l=kt.SYMBOL_TABLE[a],c=l&1;for(let h=0;h<kt.BARS_IN_MODULE;h++){let p=0;for(;(l&1)===c;)p+=1,l>>=1;c=l&1,qr.RATIOS_TABLE[a]||(qr.RATIOS_TABLE[a]=new Array(kt.BARS_IN_MODULE)),qr.RATIOS_TABLE[a][kt.BARS_IN_MODULE-h-1]=Math.fround(p/kt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(a){let l=qr.getDecodedCodewordValue(qr.sampleBitCounts(a));return l!==-1?l:qr.getClosestDecodedValue(a)}static sampleBitCounts(a){let l=$e.sum(a),c=new Int32Array(kt.BARS_IN_MODULE),h=0,p=0;for(let g=0;g<kt.MODULES_IN_CODEWORD;g++){let w=l/(2*kt.MODULES_IN_CODEWORD)+g*l/kt.MODULES_IN_CODEWORD;p+a[h]<=w&&(p+=a[h],h++),c[h]++}return c}static getDecodedCodewordValue(a){let l=qr.getBitValue(a);return kt.getCodeword(l)===-1?-1:l}static getBitValue(a){let l=0;for(let c=0;c<a.length;c++)for(let h=0;h<a[c];h++)l=l<<1|(c%2===0?1:0);return Math.trunc(l)}static getClosestDecodedValue(a){let l=$e.sum(a),c=new Array(kt.BARS_IN_MODULE);if(l>1)for(let g=0;g<c.length;g++)c[g]=Math.fround(a[g]/l);let h=re.MAX_VALUE,p=-1;this.bSymbolTableReady||qr.initialize();for(let g=0;g<qr.RATIOS_TABLE.length;g++){let w=0,N=qr.RATIOS_TABLE[g];for(let T=0;T<kt.BARS_IN_MODULE;T++){let D=Math.fround(N[T]-c[T]);if(w+=Math.fround(D*D),w>=h)break}w<h&&(h=w,p=kt.SYMBOL_TABLE[g])}return p}}qr.bSymbolTableReady=!1,qr.RATIOS_TABLE=new Array(kt.SYMBOL_TABLE.length).map(F=>new Array(kt.BARS_IN_MODULE));class Vl{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(a){this.segmentIndex=a}getFileId(){return this.fileId}setFileId(a){this.fileId=a}getOptionalData(){return this.optionalData}setOptionalData(a){this.optionalData=a}isLastSegment(){return this.lastSegment}setLastSegment(a){this.lastSegment=a}getSegmentCount(){return this.segmentCount}setSegmentCount(a){this.segmentCount=a}getSender(){return this.sender||null}setSender(a){this.sender=a}getAddressee(){return this.addressee||null}setAddressee(a){this.addressee=a}getFileName(){return this.fileName}setFileName(a){this.fileName=a}getFileSize(){return this.fileSize}setFileSize(a){this.fileSize=a}getChecksum(){return this.checksum}setChecksum(a){this.checksum=a}getTimestamp(){return this.timestamp}setTimestamp(a){this.timestamp=a}}class zl{static parseLong(a,l=void 0){return parseInt(a,l)}}class Hl extends f{}Hl.kind="NullPointerException";class Rs{writeBytes(a){this.writeBytesOffset(a,0,a.length)}writeBytesOffset(a,l,c){if(a==null)throw new Hl;if(l<0||l>a.length||c<0||l+c>a.length||l+c<0)throw new j;if(c===0)return;for(let h=0;h<c;h++)this.write(a[l+h])}flush(){}close(){}}class ea extends f{}class Ju extends Rs{constructor(a=32){if(super(),this.count=0,a<0)throw new y("Negative initial size: "+a);this.buf=new Uint8Array(a)}ensureCapacity(a){a-this.buf.length>0&&this.grow(a)}grow(a){let c=this.buf.length<<1;if(c-a<0&&(c=a),c<0){if(a<0)throw new ea;c=k.MAX_VALUE}this.buf=_.copyOfUint8Array(this.buf,c)}write(a){this.ensureCapacity(this.count+1),this.buf[this.count]=a,this.count+=1}writeBytesOffset(a,l,c){if(l<0||l>a.length||c<0||l+c-a.length>0)throw new j;this.ensureCapacity(this.count+c),I.arraycopy(a,l,this.buf,this.count,c),this.count+=c}writeTo(a){a.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return _.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(a){return a?typeof a=="string"?this.toString_string(a):this.toString_number(a):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(a){return new String(this.buf).toString()}toString_number(a){return new String(this.buf).toString()}close(){}}var sn;(function(F){F[F.ALPHA=0]="ALPHA",F[F.LOWER=1]="LOWER",F[F.MIXED=2]="MIXED",F[F.PUNCT=3]="PUNCT",F[F.ALPHA_SHIFT=4]="ALPHA_SHIFT",F[F.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(sn||(sn={}));function Xi(){if(typeof window<"u")return window.BigInt||null;if(typeof mi<"u")return mi.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ba;function Ai(F){if(typeof ba>"u"&&(ba=Xi()),ba===null)throw new Error("BigInt is not supported!");return ba(F)}function ed(){let F=[];F[0]=Ai(1);let a=Ai(900);F[1]=a;for(let l=2;l<16;l++)F[l]=F[l-1]*a;return F}class Fe{static decode(a,l){let c=new X(""),h=te.ISO8859_1;c.enableDecoding(h);let p=1,g=a[p++],w=new Vl;for(;p<a[0];){switch(g){case Fe.TEXT_COMPACTION_MODE_LATCH:p=Fe.textCompaction(a,p,c);break;case Fe.BYTE_COMPACTION_MODE_LATCH:case Fe.BYTE_COMPACTION_MODE_LATCH_6:p=Fe.byteCompaction(g,a,h,p,c);break;case Fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(a[p++]);break;case Fe.NUMERIC_COMPACTION_MODE_LATCH:p=Fe.numericCompaction(a,p,c);break;case Fe.ECI_CHARSET:te.getCharacterSetECIByValue(a[p++]);break;case Fe.ECI_GENERAL_PURPOSE:p+=2;break;case Fe.ECI_USER_DEFINED:p++;break;case Fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:p=Fe.decodeMacroBlock(a,p,w);break;case Fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Fe.MACRO_PDF417_TERMINATOR:throw new U;default:p--,p=Fe.textCompaction(a,p,c);break}if(p<a.length)g=a[p++];else throw U.getFormatInstance()}if(c.length()===0)throw U.getFormatInstance();let N=new Oe(null,c.toString(),null,l);return N.setOther(w),N}static decodeMacroBlock(a,l,c){if(l+Fe.NUMBER_OF_SEQUENCE_CODEWORDS>a[0])throw U.getFormatInstance();let h=new Int32Array(Fe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let w=0;w<Fe.NUMBER_OF_SEQUENCE_CODEWORDS;w++,l++)h[w]=a[l];c.setSegmentIndex(k.parseInt(Fe.decodeBase900toBase10(h,Fe.NUMBER_OF_SEQUENCE_CODEWORDS)));let p=new X;l=Fe.textCompaction(a,l,p),c.setFileId(p.toString());let g=-1;for(a[l]===Fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(g=l+1);l<a[0];)switch(a[l]){case Fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(l++,a[l]){case Fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let w=new X;l=Fe.textCompaction(a,l+1,w),c.setFileName(w.toString());break;case Fe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let N=new X;l=Fe.textCompaction(a,l+1,N),c.setSender(N.toString());break;case Fe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let T=new X;l=Fe.textCompaction(a,l+1,T),c.setAddressee(T.toString());break;case Fe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let D=new X;l=Fe.numericCompaction(a,l+1,D),c.setSegmentCount(k.parseInt(D.toString()));break;case Fe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let B=new X;l=Fe.numericCompaction(a,l+1,B),c.setTimestamp(zl.parseLong(B.toString()));break;case Fe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let G=new X;l=Fe.numericCompaction(a,l+1,G),c.setChecksum(k.parseInt(G.toString()));break;case Fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let le=new X;l=Fe.numericCompaction(a,l+1,le),c.setFileSize(zl.parseLong(le.toString()));break;default:throw U.getFormatInstance()}break;case Fe.MACRO_PDF417_TERMINATOR:l++,c.setLastSegment(!0);break;default:throw U.getFormatInstance()}if(g!==-1){let w=l-g;c.isLastSegment()&&w--,c.setOptionalData(_.copyOfRange(a,g,g+w))}return l}static textCompaction(a,l,c){let h=new Int32Array((a[0]-l)*2),p=new Int32Array((a[0]-l)*2),g=0,w=!1;for(;l<a[0]&&!w;){let N=a[l++];if(N<Fe.TEXT_COMPACTION_MODE_LATCH)h[g]=N/30,h[g+1]=N%30,g+=2;else switch(N){case Fe.TEXT_COMPACTION_MODE_LATCH:h[g++]=Fe.TEXT_COMPACTION_MODE_LATCH;break;case Fe.BYTE_COMPACTION_MODE_LATCH:case Fe.BYTE_COMPACTION_MODE_LATCH_6:case Fe.NUMERIC_COMPACTION_MODE_LATCH:case Fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Fe.MACRO_PDF417_TERMINATOR:l--,w=!0;break;case Fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h[g]=Fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,N=a[l++],p[g]=N,g++;break}}return Fe.decodeTextCompaction(h,p,g,c),l}static decodeTextCompaction(a,l,c,h){let p=sn.ALPHA,g=sn.ALPHA,w=0;for(;w<c;){let N=a[w],T="";switch(p){case sn.ALPHA:if(N<26)T=String.fromCharCode(65+N);else switch(N){case 26:T=" ";break;case Fe.LL:p=sn.LOWER;break;case Fe.ML:p=sn.MIXED;break;case Fe.PS:g=p,p=sn.PUNCT_SHIFT;break;case Fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[w]);break;case Fe.TEXT_COMPACTION_MODE_LATCH:p=sn.ALPHA;break}break;case sn.LOWER:if(N<26)T=String.fromCharCode(97+N);else switch(N){case 26:T=" ";break;case Fe.AS:g=p,p=sn.ALPHA_SHIFT;break;case Fe.ML:p=sn.MIXED;break;case Fe.PS:g=p,p=sn.PUNCT_SHIFT;break;case Fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[w]);break;case Fe.TEXT_COMPACTION_MODE_LATCH:p=sn.ALPHA;break}break;case sn.MIXED:if(N<Fe.PL)T=Fe.MIXED_CHARS[N];else switch(N){case Fe.PL:p=sn.PUNCT;break;case 26:T=" ";break;case Fe.LL:p=sn.LOWER;break;case Fe.AL:p=sn.ALPHA;break;case Fe.PS:g=p,p=sn.PUNCT_SHIFT;break;case Fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[w]);break;case Fe.TEXT_COMPACTION_MODE_LATCH:p=sn.ALPHA;break}break;case sn.PUNCT:if(N<Fe.PAL)T=Fe.PUNCT_CHARS[N];else switch(N){case Fe.PAL:p=sn.ALPHA;break;case Fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[w]);break;case Fe.TEXT_COMPACTION_MODE_LATCH:p=sn.ALPHA;break}break;case sn.ALPHA_SHIFT:if(p=g,N<26)T=String.fromCharCode(65+N);else switch(N){case 26:T=" ";break;case Fe.TEXT_COMPACTION_MODE_LATCH:p=sn.ALPHA;break}break;case sn.PUNCT_SHIFT:if(p=g,N<Fe.PAL)T=Fe.PUNCT_CHARS[N];else switch(N){case Fe.PAL:p=sn.ALPHA;break;case Fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[w]);break;case Fe.TEXT_COMPACTION_MODE_LATCH:p=sn.ALPHA;break}break}T!==""&&h.append(T),w++}}static byteCompaction(a,l,c,h,p){let g=new Ju,w=0,N=0,T=!1;switch(a){case Fe.BYTE_COMPACTION_MODE_LATCH:let D=new Int32Array(6),B=l[h++];for(;h<l[0]&&!T;)switch(D[w++]=B,N=900*N+B,B=l[h++],B){case Fe.TEXT_COMPACTION_MODE_LATCH:case Fe.BYTE_COMPACTION_MODE_LATCH:case Fe.NUMERIC_COMPACTION_MODE_LATCH:case Fe.BYTE_COMPACTION_MODE_LATCH_6:case Fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Fe.MACRO_PDF417_TERMINATOR:h--,T=!0;break;default:if(w%5===0&&w>0){for(let G=0;G<6;++G)g.write(Number(Ai(N)>>Ai(8*(5-G))));N=0,w=0}break}h===l[0]&&B<Fe.TEXT_COMPACTION_MODE_LATCH&&(D[w++]=B);for(let G=0;G<w;G++)g.write(D[G]);break;case Fe.BYTE_COMPACTION_MODE_LATCH_6:for(;h<l[0]&&!T;){let G=l[h++];if(G<Fe.TEXT_COMPACTION_MODE_LATCH)w++,N=900*N+G;else switch(G){case Fe.TEXT_COMPACTION_MODE_LATCH:case Fe.BYTE_COMPACTION_MODE_LATCH:case Fe.NUMERIC_COMPACTION_MODE_LATCH:case Fe.BYTE_COMPACTION_MODE_LATCH_6:case Fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Fe.MACRO_PDF417_TERMINATOR:h--,T=!0;break}if(w%5===0&&w>0){for(let le=0;le<6;++le)g.write(Number(Ai(N)>>Ai(8*(5-le))));N=0,w=0}}break}return p.append($.decode(g.toByteArray(),c)),h}static numericCompaction(a,l,c){let h=0,p=!1,g=new Int32Array(Fe.MAX_NUMERIC_CODEWORDS);for(;l<a[0]&&!p;){let w=a[l++];if(l===a[0]&&(p=!0),w<Fe.TEXT_COMPACTION_MODE_LATCH)g[h]=w,h++;else switch(w){case Fe.TEXT_COMPACTION_MODE_LATCH:case Fe.BYTE_COMPACTION_MODE_LATCH:case Fe.BYTE_COMPACTION_MODE_LATCH_6:case Fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Fe.MACRO_PDF417_TERMINATOR:l--,p=!0;break}(h%Fe.MAX_NUMERIC_CODEWORDS===0||w===Fe.NUMERIC_COMPACTION_MODE_LATCH||p)&&h>0&&(c.append(Fe.decodeBase900toBase10(g,h)),h=0)}return l}static decodeBase900toBase10(a,l){let c=Ai(0);for(let p=0;p<l;p++)c+=Fe.EXP900[l-p-1]*Ai(a[p]);let h=c.toString();if(h.charAt(0)!=="1")throw new U;return h.substring(1)}}Fe.TEXT_COMPACTION_MODE_LATCH=900,Fe.BYTE_COMPACTION_MODE_LATCH=901,Fe.NUMERIC_COMPACTION_MODE_LATCH=902,Fe.BYTE_COMPACTION_MODE_LATCH_6=924,Fe.ECI_USER_DEFINED=925,Fe.ECI_GENERAL_PURPOSE=926,Fe.ECI_CHARSET=927,Fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Fe.MACRO_PDF417_TERMINATOR=922,Fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Fe.MAX_NUMERIC_CODEWORDS=15,Fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Fe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Fe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Fe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Fe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Fe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Fe.PL=25,Fe.LL=27,Fe.AS=27,Fe.ML=28,Fe.AL=28,Fe.PS=29,Fe.PAL=29,Fe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Fe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Fe.EXP900=Xi()?ed():[],Fe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Yt{constructor(){}static decode(a,l,c,h,p,g,w){let N=new Qs(a,l,c,h,p),T=null,D=null,B;for(let ye=!0;;ye=!1){if(l!=null&&(T=Yt.getRowIndicatorColumn(a,N,l,!0,g,w)),h!=null&&(D=Yt.getRowIndicatorColumn(a,N,h,!1,g,w)),B=Yt.merge(T,D),B==null)throw J.getNotFoundInstance();let Ae=B.getBoundingBox();if(ye&&Ae!=null&&(Ae.getMinY()<N.getMinY()||Ae.getMaxY()>N.getMaxY()))N=Ae;else break}B.setBoundingBox(N);let G=B.getBarcodeColumnCount()+1;B.setDetectionResultColumn(0,T),B.setDetectionResultColumn(G,D);let le=T!=null;for(let ye=1;ye<=G;ye++){let Ae=le?ye:G-ye;if(B.getDetectionResultColumn(Ae)!==void 0)continue;let Te;Ae===0||Ae===G?Te=new wa(N,Ae===0):Te=new Yi(N),B.setDetectionResultColumn(Ae,Te);let Ue=-1,nt=Ue;for(let at=N.getMinY();at<=N.getMaxY();at++){if(Ue=Yt.getStartColumn(B,Ae,at,le),Ue<0||Ue>N.getMaxX()){if(nt===-1)continue;Ue=nt}let it=Yt.detectCodeword(a,N.getMinX(),N.getMaxX(),le,Ue,at,g,w);it!=null&&(Te.setCodeword(at,it),nt=Ue,g=Math.min(g,it.getWidth()),w=Math.max(w,it.getWidth()))}}return Yt.createDecoderResult(B)}static merge(a,l){if(a==null&&l==null)return null;let c=Yt.getBarcodeMetadata(a,l);if(c==null)return null;let h=Qs.merge(Yt.adjustBoundingBox(a),Yt.adjustBoundingBox(l));return new Js(c,h)}static adjustBoundingBox(a){if(a==null)return null;let l=a.getRowHeights();if(l==null)return null;let c=Yt.getMax(l),h=0;for(let w of l)if(h+=c-w,w>0)break;let p=a.getCodewords();for(let w=0;h>0&&p[w]==null;w++)h--;let g=0;for(let w=l.length-1;w>=0&&(g+=c-l[w],!(l[w]>0));w--);for(let w=p.length-1;g>0&&p[w]==null;w--)g--;return a.getBoundingBox().addMissingRows(h,g,a.isLeft())}static getMax(a){let l=-1;for(let c of a)l=Math.max(l,c);return l}static getBarcodeMetadata(a,l){let c;if(a==null||(c=a.getBarcodeMetadata())==null)return l==null?null:l.getBarcodeMetadata();let h;return l==null||(h=l.getBarcodeMetadata())==null?c:c.getColumnCount()!==h.getColumnCount()&&c.getErrorCorrectionLevel()!==h.getErrorCorrectionLevel()&&c.getRowCount()!==h.getRowCount()?null:c}static getRowIndicatorColumn(a,l,c,h,p,g){let w=new wa(l,h);for(let N=0;N<2;N++){let T=N===0?1:-1,D=Math.trunc(Math.trunc(c.getX()));for(let B=Math.trunc(Math.trunc(c.getY()));B<=l.getMaxY()&&B>=l.getMinY();B+=T){let G=Yt.detectCodeword(a,0,a.getWidth(),h,D,B,p,g);G!=null&&(w.setCodeword(B,G),h?D=G.getStartX():D=G.getEndX())}}return w}static adjustCodewordCount(a,l){let c=l[0][1],h=c.getValue(),p=a.getBarcodeColumnCount()*a.getBarcodeRowCount()-Yt.getNumberOfECCodeWords(a.getBarcodeECLevel());if(h.length===0){if(p<1||p>kt.MAX_CODEWORDS_IN_BARCODE)throw J.getNotFoundInstance();c.setValue(p)}else h[0]!==p&&c.setValue(p)}static createDecoderResult(a){let l=Yt.createBarcodeMatrix(a);Yt.adjustCodewordCount(a,l);let c=new Array,h=new Int32Array(a.getBarcodeRowCount()*a.getBarcodeColumnCount()),p=[],g=new Array;for(let N=0;N<a.getBarcodeRowCount();N++)for(let T=0;T<a.getBarcodeColumnCount();T++){let D=l[N][T+1].getValue(),B=N*a.getBarcodeColumnCount()+T;D.length===0?c.push(B):D.length===1?h[B]=D[0]:(g.push(B),p.push(D))}let w=new Array(p.length);for(let N=0;N<w.length;N++)w[N]=p[N];return Yt.createDecoderResultFromAmbiguousValues(a.getBarcodeECLevel(),h,kt.toIntArray(c),kt.toIntArray(g),w)}static createDecoderResultFromAmbiguousValues(a,l,c,h,p){let g=new Int32Array(h.length),w=100;for(;w-- >0;){for(let N=0;N<g.length;N++)l[h[N]]=p[N][g[N]];try{return Yt.decodeCodewords(l,a,c)}catch(N){if(!(N instanceof b))throw N}if(g.length===0)throw b.getChecksumInstance();for(let N=0;N<g.length;N++)if(g[N]<p[N].length-1){g[N]++;break}else if(g[N]=0,N===g.length-1)throw b.getChecksumInstance()}throw b.getChecksumInstance()}static createBarcodeMatrix(a){let l=Array.from({length:a.getBarcodeRowCount()},()=>new Array(a.getBarcodeColumnCount()+2));for(let h=0;h<l.length;h++)for(let p=0;p<l[h].length;p++)l[h][p]=new $a;let c=0;for(let h of a.getDetectionResultColumns()){if(h!=null){for(let p of h.getCodewords())if(p!=null){let g=p.getRowNumber();if(g>=0){if(g>=l.length)continue;l[g][c].setValue(p.getValue())}}}c++}return l}static isValidBarcodeColumn(a,l){return l>=0&&l<=a.getBarcodeColumnCount()+1}static getStartColumn(a,l,c,h){let p=h?1:-1,g=null;if(Yt.isValidBarcodeColumn(a,l-p)&&(g=a.getDetectionResultColumn(l-p).getCodeword(c)),g!=null)return h?g.getEndX():g.getStartX();if(g=a.getDetectionResultColumn(l).getCodewordNearby(c),g!=null)return h?g.getStartX():g.getEndX();if(Yt.isValidBarcodeColumn(a,l-p)&&(g=a.getDetectionResultColumn(l-p).getCodewordNearby(c)),g!=null)return h?g.getEndX():g.getStartX();let w=0;for(;Yt.isValidBarcodeColumn(a,l-p);){l-=p;for(let N of a.getDetectionResultColumn(l).getCodewords())if(N!=null)return(h?N.getEndX():N.getStartX())+p*w*(N.getEndX()-N.getStartX());w++}return h?a.getBoundingBox().getMinX():a.getBoundingBox().getMaxX()}static detectCodeword(a,l,c,h,p,g,w,N){p=Yt.adjustCodewordStartColumn(a,l,c,h,p,g);let T=Yt.getModuleBitCount(a,l,c,h,p,g);if(T==null)return null;let D,B=$e.sum(T);if(h)D=p+B;else{for(let ye=0;ye<T.length/2;ye++){let Ae=T[ye];T[ye]=T[T.length-1-ye],T[T.length-1-ye]=Ae}D=p,p=D-B}if(!Yt.checkCodewordSkew(B,w,N))return null;let G=qr.getDecodedValue(T),le=kt.getCodeword(G);return le===-1?null:new Ds(p,D,Yt.getCodewordBucketNumber(G),le)}static getModuleBitCount(a,l,c,h,p,g){let w=p,N=new Int32Array(8),T=0,D=h?1:-1,B=h;for(;(h?w<c:w>=l)&&T<N.length;)a.get(w,g)===B?(N[T]++,w+=D):(T++,B=!B);return T===N.length||w===(h?c:l)&&T===N.length-1?N:null}static getNumberOfECCodeWords(a){return 2<<a}static adjustCodewordStartColumn(a,l,c,h,p,g){let w=p,N=h?-1:1;for(let T=0;T<2;T++){for(;(h?w>=l:w<c)&&h===a.get(w,g);){if(Math.abs(p-w)>Yt.CODEWORD_SKEW_SIZE)return p;w+=N}N=-N,h=!h}return w}static checkCodewordSkew(a,l,c){return l-Yt.CODEWORD_SKEW_SIZE<=a&&a<=c+Yt.CODEWORD_SKEW_SIZE}static decodeCodewords(a,l,c){if(a.length===0)throw U.getFormatInstance();let h=1<<l+1,p=Yt.correctErrors(a,c,h);Yt.verifyCodewordCount(a,h);let g=Fe.decode(a,""+l);return g.setErrorsCorrected(p),g.setErasures(c.length),g}static correctErrors(a,l,c){if(l!=null&&l.length>c/2+Yt.MAX_ERRORS||c<0||c>Yt.MAX_EC_CODEWORDS)throw b.getChecksumInstance();return Yt.errorCorrection.decode(a,c,l)}static verifyCodewordCount(a,l){if(a.length<4)throw U.getFormatInstance();let c=a[0];if(c>a.length)throw U.getFormatInstance();if(c===0)if(l<a.length)a[0]=a.length-l;else throw U.getFormatInstance()}static getBitCountForCodeword(a){let l=new Int32Array(8),c=0,h=l.length-1;for(;!((a&1)!==c&&(c=a&1,h--,h<0));)l[h]++,a>>=1;return l}static getCodewordBucketNumber(a){return a instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(a):this.getCodewordBucketNumber_number(a)}static getCodewordBucketNumber_number(a){return Yt.getCodewordBucketNumber(Yt.getBitCountForCodeword(a))}static getCodewordBucketNumber_Int32Array(a){return(a[0]-a[2]+a[4]-a[6]+9)%9}static toString(a){let l=new hs;for(let c=0;c<a.length;c++){l.format("Row %2d: ",c);for(let h=0;h<a[c].length;h++){let p=a[c][h];p.getValue().length===0?l.format("        ",null):l.format("%4d(%2d)",p.getValue()[0],p.getConfidence(p.getValue()[0]))}l.format("%n")}return l.toString()}}Yt.CODEWORD_SKEW_SIZE=2,Yt.MAX_ERRORS=3,Yt.MAX_EC_CODEWORDS=512,Yt.errorCorrection=new Dc;class or{decode(a,l=null){let c=or.decode(a,l,!1);if(c==null||c.length===0||c[0]==null)throw J.getNotFoundInstance();return c[0]}decodeMultiple(a,l=null){try{return or.decode(a,l,!0)}catch(c){throw c instanceof U||c instanceof b?J.getNotFoundInstance():c}}static decode(a,l,c){const h=new Array,p=qt.detectMultiple(a,l,c);for(const g of p.getPoints()){const w=Yt.decode(p.getBits(),g[4],g[5],g[6],g[7],or.getMinCodewordWidth(g),or.getMaxCodewordWidth(g)),N=new de(w.getText(),w.getRawBytes(),void 0,g,he.PDF_417);N.putMetadata(Le.ERROR_CORRECTION_LEVEL,w.getECLevel());const T=w.getOther();T!=null&&N.putMetadata(Le.PDF417_EXTRA_METADATA,T),h.push(N)}return h.map(g=>g)}static getMaxWidth(a,l){return a==null||l==null?0:Math.trunc(Math.abs(a.getX()-l.getX()))}static getMinWidth(a,l){return a==null||l==null?k.MAX_VALUE:Math.trunc(Math.abs(a.getX()-l.getX()))}static getMaxCodewordWidth(a){return Math.floor(Math.max(Math.max(or.getMaxWidth(a[0],a[4]),or.getMaxWidth(a[6],a[2])*kt.MODULES_IN_CODEWORD/kt.MODULES_IN_STOP_PATTERN),Math.max(or.getMaxWidth(a[1],a[5]),or.getMaxWidth(a[7],a[3])*kt.MODULES_IN_CODEWORD/kt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(a){return Math.floor(Math.min(Math.min(or.getMinWidth(a[0],a[4]),or.getMinWidth(a[6],a[2])*kt.MODULES_IN_CODEWORD/kt.MODULES_IN_STOP_PATTERN),Math.min(or.getMinWidth(a[1],a[5]),or.getMinWidth(a[7],a[3])*kt.MODULES_IN_CODEWORD/kt.MODULES_IN_STOP_PATTERN)))}reset(){}}class Aa extends f{}Aa.kind="ReaderException";class ql{constructor(a,l){this.verbose=a===!0,l&&this.setHints(l)}decode(a,l){return l&&this.setHints(l),this.decodeInternal(a)}decodeWithState(a){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(a)}setHints(a){this.hints=a;const l=!r(a)&&a.get(ne.TRY_HARDER)===!0,c=r(a)?null:a.get(ne.POSSIBLE_FORMATS),h=new Array;if(!r(c)){const p=c.some(g=>g===he.UPC_A||g===he.UPC_E||g===he.EAN_13||g===he.EAN_8||g===he.CODABAR||g===he.CODE_39||g===he.CODE_93||g===he.CODE_128||g===he.ITF||g===he.RSS_14||g===he.RSS_EXPANDED);p&&!l&&h.push(new js(a,this.verbose)),c.includes(he.QR_CODE)&&h.push(new Os),c.includes(he.DATA_MATRIX)&&h.push(new Rr),c.includes(he.AZTEC)&&h.push(new dt),c.includes(he.PDF_417)&&h.push(new or),p&&l&&h.push(new js(a,this.verbose))}h.length===0&&(l||h.push(new js(a,this.verbose)),h.push(new Os),h.push(new Rr),h.push(new dt),h.push(new or),l&&h.push(new js(a,this.verbose))),this.readers=h}reset(){if(this.readers!==null)for(const a of this.readers)a.reset()}decodeInternal(a){if(this.readers===null)throw new Aa("No readers where selected, nothing can be read.");for(const l of this.readers)try{return l.decode(a,this.hints)}catch(c){if(c instanceof Aa)continue}throw new J("No MultiFormat Readers were able to detect the code.")}}class Io extends se{constructor(a=null,l=500){const c=new ql;c.setHints(a),super(c,l)}decodeBitmap(a){return this.reader.decodeWithState(a)}}class Wl extends se{constructor(a=500){super(new or,a)}}class Gl extends se{constructor(a=500){super(new Os,a)}}var ko;(function(F){F[F.ERROR_CORRECTION=0]="ERROR_CORRECTION",F[F.CHARACTER_SET=1]="CHARACTER_SET",F[F.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",F[F.MIN_SIZE=3]="MIN_SIZE",F[F.MAX_SIZE=4]="MAX_SIZE",F[F.MARGIN=5]="MARGIN",F[F.PDF417_COMPACT=6]="PDF417_COMPACT",F[F.PDF417_COMPACTION=7]="PDF417_COMPACTION",F[F.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",F[F.AZTEC_LAYERS=9]="AZTEC_LAYERS",F[F.QR_VERSION=10]="QR_VERSION"})(ko||(ko={}));var lr=ko;class Sa{constructor(a){this.field=a,this.cachedGenerators=[],this.cachedGenerators.push(new qe(a,Int32Array.from([1])))}buildGenerator(a){const l=this.cachedGenerators;if(a>=l.length){let c=l[l.length-1];const h=this.field;for(let p=l.length;p<=a;p++){const g=c.multiply(new qe(h,Int32Array.from([1,h.exp(p-1+h.getGeneratorBase())])));l.push(g),c=g}}return l[a]}encode(a,l){if(l===0)throw new y("No error correction bytes");const c=a.length-l;if(c<=0)throw new y("No data bytes provided");const h=this.buildGenerator(l),p=new Int32Array(c);I.arraycopy(a,0,p,0,c);let g=new qe(this.field,p);g=g.multiplyByMonomial(l,1);const N=g.divide(h)[1].getCoefficients(),T=l-N.length;for(let D=0;D<T;D++)a[c+D]=0;I.arraycopy(N,0,a,c+T,N.length)}}class Sn{constructor(){}static applyMaskPenaltyRule1(a){return Sn.applyMaskPenaltyRule1Internal(a,!0)+Sn.applyMaskPenaltyRule1Internal(a,!1)}static applyMaskPenaltyRule2(a){let l=0;const c=a.getArray(),h=a.getWidth(),p=a.getHeight();for(let g=0;g<p-1;g++){const w=c[g];for(let N=0;N<h-1;N++){const T=w[N];T===w[N+1]&&T===c[g+1][N]&&T===c[g+1][N+1]&&l++}}return Sn.N2*l}static applyMaskPenaltyRule3(a){let l=0;const c=a.getArray(),h=a.getWidth(),p=a.getHeight();for(let g=0;g<p;g++)for(let w=0;w<h;w++){const N=c[g];w+6<h&&N[w]===1&&N[w+1]===0&&N[w+2]===1&&N[w+3]===1&&N[w+4]===1&&N[w+5]===0&&N[w+6]===1&&(Sn.isWhiteHorizontal(N,w-4,w)||Sn.isWhiteHorizontal(N,w+7,w+11))&&l++,g+6<p&&c[g][w]===1&&c[g+1][w]===0&&c[g+2][w]===1&&c[g+3][w]===1&&c[g+4][w]===1&&c[g+5][w]===0&&c[g+6][w]===1&&(Sn.isWhiteVertical(c,w,g-4,g)||Sn.isWhiteVertical(c,w,g+7,g+11))&&l++}return l*Sn.N3}static isWhiteHorizontal(a,l,c){l=Math.max(l,0),c=Math.min(c,a.length);for(let h=l;h<c;h++)if(a[h]===1)return!1;return!0}static isWhiteVertical(a,l,c,h){c=Math.max(c,0),h=Math.min(h,a.length);for(let p=c;p<h;p++)if(a[p][l]===1)return!1;return!0}static applyMaskPenaltyRule4(a){let l=0;const c=a.getArray(),h=a.getWidth(),p=a.getHeight();for(let N=0;N<p;N++){const T=c[N];for(let D=0;D<h;D++)T[D]===1&&l++}const g=a.getHeight()*a.getWidth();return Math.floor(Math.abs(l*2-g)*10/g)*Sn.N4}static getDataMaskBit(a,l,c){let h,p;switch(a){case 0:h=c+l&1;break;case 1:h=c&1;break;case 2:h=l%3;break;case 3:h=(c+l)%3;break;case 4:h=Math.floor(c/2)+Math.floor(l/3)&1;break;case 5:p=c*l,h=(p&1)+p%3;break;case 6:p=c*l,h=(p&1)+p%3&1;break;case 7:p=c*l,h=p%3+(c+l&1)&1;break;default:throw new y("Invalid mask pattern: "+a)}return h===0}static applyMaskPenaltyRule1Internal(a,l){let c=0;const h=l?a.getHeight():a.getWidth(),p=l?a.getWidth():a.getHeight(),g=a.getArray();for(let w=0;w<h;w++){let N=0,T=-1;for(let D=0;D<p;D++){const B=l?g[w][D]:g[D][w];B===T?N++:(N>=5&&(c+=Sn.N1+(N-5)),N=1,T=B)}N>=5&&(c+=Sn.N1+(N-5))}return c}}Sn.N1=3,Sn.N2=3,Sn.N3=40,Sn.N4=10;class Na{constructor(a,l){this.width=a,this.height=l;const c=new Array(l);for(let h=0;h!==l;h++)c[h]=new Uint8Array(a);this.bytes=c}getHeight(){return this.height}getWidth(){return this.width}get(a,l){return this.bytes[l][a]}getArray(){return this.bytes}setNumber(a,l,c){this.bytes[l][a]=c}setBoolean(a,l,c){this.bytes[l][a]=c?1:0}clear(a){for(const l of this.bytes)_.fill(l,a)}equals(a){if(!(a instanceof Na))return!1;const l=a;if(this.width!==l.width||this.height!==l.height)return!1;for(let c=0,h=this.height;c<h;++c){const p=this.bytes[c],g=l.bytes[c];for(let w=0,N=this.width;w<N;++w)if(p[w]!==g[w])return!1}return!0}toString(){const a=new X;for(let l=0,c=this.height;l<c;++l){const h=this.bytes[l];for(let p=0,g=this.width;p<g;++p)switch(h[p]){case 0:a.append(" 0");break;case 1:a.append(" 1");break;default:a.append("  ");break}a.append(`
`)}return a.toString()}}class Si{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const a=new X;return a.append(`<<
`),a.append(" mode: "),a.append(this.mode?this.mode.toString():"null"),a.append(`
 ecLevel: `),a.append(this.ecLevel?this.ecLevel.toString():"null"),a.append(`
 version: `),a.append(this.version?this.version.toString():"null"),a.append(`
 maskPattern: `),a.append(this.maskPattern.toString()),this.matrix?(a.append(`
 matrix:
`),a.append(this.matrix.toString())):a.append(`
 matrix: null
`),a.append(`>>
`),a.toString()}setMode(a){this.mode=a}setECLevel(a){this.ecLevel=a}setVersion(a){this.version=a}setMaskPattern(a){this.maskPattern=a}setMatrix(a){this.matrix=a}static isValidMaskPattern(a){return a>=0&&a<Si.NUM_MASK_PATTERNS}}Si.NUM_MASK_PATTERNS=8;class xn extends f{}xn.kind="WriterException";class E{constructor(){}static clearMatrix(a){a.clear(255)}static buildMatrix(a,l,c,h,p){E.clearMatrix(p),E.embedBasicPatterns(c,p),E.embedTypeInfo(l,h,p),E.maybeEmbedVersionInfo(c,p),E.embedDataBits(a,h,p)}static embedBasicPatterns(a,l){E.embedPositionDetectionPatternsAndSeparators(l),E.embedDarkDotAtLeftBottomCorner(l),E.maybeEmbedPositionAdjustmentPatterns(a,l),E.embedTimingPatterns(l)}static embedTypeInfo(a,l,c){const h=new R;E.makeTypeInfoBits(a,l,h);for(let p=0,g=h.getSize();p<g;++p){const w=h.get(h.getSize()-1-p),N=E.TYPE_INFO_COORDINATES[p],T=N[0],D=N[1];if(c.setBoolean(T,D,w),p<8){const B=c.getWidth()-p-1;c.setBoolean(B,8,w)}else{const G=c.getHeight()-7+(p-8);c.setBoolean(8,G,w)}}}static maybeEmbedVersionInfo(a,l){if(a.getVersionNumber()<7)return;const c=new R;E.makeVersionInfoBits(a,c);let h=6*3-1;for(let p=0;p<6;++p)for(let g=0;g<3;++g){const w=c.get(h);h--,l.setBoolean(p,l.getHeight()-11+g,w),l.setBoolean(l.getHeight()-11+g,p,w)}}static embedDataBits(a,l,c){let h=0,p=-1,g=c.getWidth()-1,w=c.getHeight()-1;for(;g>0;){for(g===6&&(g-=1);w>=0&&w<c.getHeight();){for(let N=0;N<2;++N){const T=g-N;if(!E.isEmpty(c.get(T,w)))continue;let D;h<a.getSize()?(D=a.get(h),++h):D=!1,l!==255&&Sn.getDataMaskBit(l,T,w)&&(D=!D),c.setBoolean(T,w,D)}w+=p}p=-p,w+=p,g-=2}if(h!==a.getSize())throw new xn("Not all bits consumed: "+h+"/"+a.getSize())}static findMSBSet(a){return 32-k.numberOfLeadingZeros(a)}static calculateBCHCode(a,l){if(l===0)throw new y("0 polynomial");const c=E.findMSBSet(l);for(a<<=c-1;E.findMSBSet(a)>=c;)a^=l<<E.findMSBSet(a)-c;return a}static makeTypeInfoBits(a,l,c){if(!Si.isValidMaskPattern(l))throw new xn("Invalid mask pattern");const h=a.getBits()<<3|l;c.appendBits(h,5);const p=E.calculateBCHCode(h,E.TYPE_INFO_POLY);c.appendBits(p,10);const g=new R;if(g.appendBits(E.TYPE_INFO_MASK_PATTERN,15),c.xor(g),c.getSize()!==15)throw new xn("should not happen but we got: "+c.getSize())}static makeVersionInfoBits(a,l){l.appendBits(a.getVersionNumber(),6);const c=E.calculateBCHCode(a.getVersionNumber(),E.VERSION_INFO_POLY);if(l.appendBits(c,12),l.getSize()!==18)throw new xn("should not happen but we got: "+l.getSize())}static isEmpty(a){return a===255}static embedTimingPatterns(a){for(let l=8;l<a.getWidth()-8;++l){const c=(l+1)%2;E.isEmpty(a.get(l,6))&&a.setNumber(l,6,c),E.isEmpty(a.get(6,l))&&a.setNumber(6,l,c)}}static embedDarkDotAtLeftBottomCorner(a){if(a.get(8,a.getHeight()-8)===0)throw new xn;a.setNumber(8,a.getHeight()-8,1)}static embedHorizontalSeparationPattern(a,l,c){for(let h=0;h<8;++h){if(!E.isEmpty(c.get(a+h,l)))throw new xn;c.setNumber(a+h,l,0)}}static embedVerticalSeparationPattern(a,l,c){for(let h=0;h<7;++h){if(!E.isEmpty(c.get(a,l+h)))throw new xn;c.setNumber(a,l+h,0)}}static embedPositionAdjustmentPattern(a,l,c){for(let h=0;h<5;++h){const p=E.POSITION_ADJUSTMENT_PATTERN[h];for(let g=0;g<5;++g)c.setNumber(a+g,l+h,p[g])}}static embedPositionDetectionPattern(a,l,c){for(let h=0;h<7;++h){const p=E.POSITION_DETECTION_PATTERN[h];for(let g=0;g<7;++g)c.setNumber(a+g,l+h,p[g])}}static embedPositionDetectionPatternsAndSeparators(a){const l=E.POSITION_DETECTION_PATTERN[0].length;E.embedPositionDetectionPattern(0,0,a),E.embedPositionDetectionPattern(a.getWidth()-l,0,a),E.embedPositionDetectionPattern(0,a.getWidth()-l,a);const c=8;E.embedHorizontalSeparationPattern(0,c-1,a),E.embedHorizontalSeparationPattern(a.getWidth()-c,c-1,a),E.embedHorizontalSeparationPattern(0,a.getWidth()-c,a);const h=7;E.embedVerticalSeparationPattern(h,0,a),E.embedVerticalSeparationPattern(a.getHeight()-h-1,0,a),E.embedVerticalSeparationPattern(h,a.getHeight()-h,a)}static maybeEmbedPositionAdjustmentPatterns(a,l){if(a.getVersionNumber()<2)return;const c=a.getVersionNumber()-1,h=E.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[c];for(let p=0,g=h.length;p!==g;p++){const w=h[p];if(w>=0)for(let N=0;N!==g;N++){const T=h[N];T>=0&&E.isEmpty(l.get(T,w))&&E.embedPositionAdjustmentPattern(T-2,w-2,l)}}}}E.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),E.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),E.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),E.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),E.VERSION_INFO_POLY=7973,E.TYPE_INFO_POLY=1335,E.TYPE_INFO_MASK_PATTERN=21522;class H{constructor(a,l){this.dataBytes=a,this.errorCorrectionBytes=l}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class ae{constructor(){}static calculateMaskPenalty(a){return Sn.applyMaskPenaltyRule1(a)+Sn.applyMaskPenaltyRule2(a)+Sn.applyMaskPenaltyRule3(a)+Sn.applyMaskPenaltyRule4(a)}static encode(a,l,c=null){let h=ae.DEFAULT_BYTE_MODE_ENCODING;const p=c!==null&&c.get(lr.CHARACTER_SET)!==void 0;p&&(h=c.get(lr.CHARACTER_SET).toString());const g=this.chooseMode(a,h),w=new R;if(g===Pt.BYTE&&(p||ae.DEFAULT_BYTE_MODE_ENCODING!==h)){const at=te.getCharacterSetECIByName(h);at!==void 0&&this.appendECI(at,w)}this.appendModeInfo(g,w);const N=new R;this.appendBytes(a,g,N,h);let T;if(c!==null&&c.get(lr.QR_VERSION)!==void 0){const at=Number.parseInt(c.get(lr.QR_VERSION).toString(),10);T=It.getVersionForNumber(at);const it=this.calculateBitsNeeded(g,w,N,T);if(!this.willFit(it,T,l))throw new xn("Data too big for requested version")}else T=this.recommendVersion(l,g,w,N);const D=new R;D.appendBitArray(w);const B=g===Pt.BYTE?N.getSizeInBytes():a.length;this.appendLengthInfo(B,T,g,D),D.appendBitArray(N);const G=T.getECBlocksForLevel(l),le=T.getTotalCodewords()-G.getTotalECCodewords();this.terminateBits(le,D);const ye=this.interleaveWithECBytes(D,T.getTotalCodewords(),le,G.getNumBlocks()),Ae=new Si;Ae.setECLevel(l),Ae.setMode(g),Ae.setVersion(T);const Te=T.getDimensionForVersion(),Ue=new Na(Te,Te),nt=this.chooseMaskPattern(ye,l,T,Ue);return Ae.setMaskPattern(nt),E.buildMatrix(ye,l,T,nt,Ue),Ae.setMatrix(Ue),Ae}static recommendVersion(a,l,c,h){const p=this.calculateBitsNeeded(l,c,h,It.getVersionForNumber(1)),g=this.chooseVersion(p,a),w=this.calculateBitsNeeded(l,c,h,g);return this.chooseVersion(w,a)}static calculateBitsNeeded(a,l,c,h){return l.getSize()+a.getCharacterCountBits(h)+c.getSize()}static getAlphanumericCode(a){return a<ae.ALPHANUMERIC_TABLE.length?ae.ALPHANUMERIC_TABLE[a]:-1}static chooseMode(a,l=null){if(te.SJIS.getName()===l&&this.isOnlyDoubleByteKanji(a))return Pt.KANJI;let c=!1,h=!1;for(let p=0,g=a.length;p<g;++p){const w=a.charAt(p);if(ae.isDigit(w))c=!0;else if(this.getAlphanumericCode(w.charCodeAt(0))!==-1)h=!0;else return Pt.BYTE}return h?Pt.ALPHANUMERIC:c?Pt.NUMERIC:Pt.BYTE}static isOnlyDoubleByteKanji(a){let l;try{l=$.encode(a,te.SJIS)}catch{return!1}const c=l.length;if(c%2!==0)return!1;for(let h=0;h<c;h+=2){const p=l[h]&255;if((p<129||p>159)&&(p<224||p>235))return!1}return!0}static chooseMaskPattern(a,l,c,h){let p=Number.MAX_SAFE_INTEGER,g=-1;for(let w=0;w<Si.NUM_MASK_PATTERNS;w++){E.buildMatrix(a,l,c,w,h);let N=this.calculateMaskPenalty(h);N<p&&(p=N,g=w)}return g}static chooseVersion(a,l){for(let c=1;c<=40;c++){const h=It.getVersionForNumber(c);if(ae.willFit(a,h,l))return h}throw new xn("Data too big")}static willFit(a,l,c){const h=l.getTotalCodewords(),g=l.getECBlocksForLevel(c).getTotalECCodewords(),w=h-g,N=(a+7)/8;return w>=N}static terminateBits(a,l){const c=a*8;if(l.getSize()>c)throw new xn("data bits cannot fit in the QR Code"+l.getSize()+" > "+c);for(let g=0;g<4&&l.getSize()<c;++g)l.appendBit(!1);const h=l.getSize()&7;if(h>0)for(let g=h;g<8;g++)l.appendBit(!1);const p=a-l.getSizeInBytes();for(let g=0;g<p;++g)l.appendBits(g&1?17:236,8);if(l.getSize()!==c)throw new xn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(a,l,c,h,p,g){if(h>=c)throw new xn("Block ID too large");const w=a%c,N=c-w,T=Math.floor(a/c),D=T+1,B=Math.floor(l/c),G=B+1,le=T-B,ye=D-G;if(le!==ye)throw new xn("EC bytes mismatch");if(c!==N+w)throw new xn("RS blocks mismatch");if(a!==(B+le)*N+(G+ye)*w)throw new xn("Total bytes mismatch");h<N?(p[0]=B,g[0]=le):(p[0]=G,g[0]=ye)}static interleaveWithECBytes(a,l,c,h){if(a.getSizeInBytes()!==c)throw new xn("Number of bits and data bytes does not match");let p=0,g=0,w=0;const N=new Array;for(let D=0;D<h;++D){const B=new Int32Array(1),G=new Int32Array(1);ae.getNumDataBytesAndNumECBytesForBlockID(l,c,h,D,B,G);const le=B[0],ye=new Uint8Array(le);a.toBytes(8*p,ye,0,le);const Ae=ae.generateECBytes(ye,G[0]);N.push(new H(ye,Ae)),g=Math.max(g,le),w=Math.max(w,Ae.length),p+=B[0]}if(c!==p)throw new xn("Data bytes does not match offset");const T=new R;for(let D=0;D<g;++D)for(const B of N){const G=B.getDataBytes();D<G.length&&T.appendBits(G[D],8)}for(let D=0;D<w;++D)for(const B of N){const G=B.getErrorCorrectionBytes();D<G.length&&T.appendBits(G[D],8)}if(l!==T.getSizeInBytes())throw new xn("Interleaving error: "+l+" and "+T.getSizeInBytes()+" differ.");return T}static generateECBytes(a,l){const c=a.length,h=new Int32Array(c+l);for(let g=0;g<c;g++)h[g]=a[g]&255;new Sa(Ge.QR_CODE_FIELD_256).encode(h,l);const p=new Uint8Array(l);for(let g=0;g<l;g++)p[g]=h[c+g];return p}static appendModeInfo(a,l){l.appendBits(a.getBits(),4)}static appendLengthInfo(a,l,c,h){const p=c.getCharacterCountBits(l);if(a>=1<<p)throw new xn(a+" is bigger than "+((1<<p)-1));h.appendBits(a,p)}static appendBytes(a,l,c,h){switch(l){case Pt.NUMERIC:ae.appendNumericBytes(a,c);break;case Pt.ALPHANUMERIC:ae.appendAlphanumericBytes(a,c);break;case Pt.BYTE:ae.append8BitBytes(a,c,h);break;case Pt.KANJI:ae.appendKanjiBytes(a,c);break;default:throw new xn("Invalid mode: "+l)}}static getDigit(a){return a.charCodeAt(0)-48}static isDigit(a){const l=ae.getDigit(a);return l>=0&&l<=9}static appendNumericBytes(a,l){const c=a.length;let h=0;for(;h<c;){const p=ae.getDigit(a.charAt(h));if(h+2<c){const g=ae.getDigit(a.charAt(h+1)),w=ae.getDigit(a.charAt(h+2));l.appendBits(p*100+g*10+w,10),h+=3}else if(h+1<c){const g=ae.getDigit(a.charAt(h+1));l.appendBits(p*10+g,7),h+=2}else l.appendBits(p,4),h++}}static appendAlphanumericBytes(a,l){const c=a.length;let h=0;for(;h<c;){const p=ae.getAlphanumericCode(a.charCodeAt(h));if(p===-1)throw new xn;if(h+1<c){const g=ae.getAlphanumericCode(a.charCodeAt(h+1));if(g===-1)throw new xn;l.appendBits(p*45+g,11),h+=2}else l.appendBits(p,6),h++}}static append8BitBytes(a,l,c){let h;try{h=$.encode(a,c)}catch(p){throw new xn(p)}for(let p=0,g=h.length;p!==g;p++){const w=h[p];l.appendBits(w,8)}}static appendKanjiBytes(a,l){let c;try{c=$.encode(a,te.SJIS)}catch(p){throw new xn(p)}const h=c.length;for(let p=0;p<h;p+=2){const g=c[p]&255,w=c[p+1]&255,N=g<<8&4294967295|w;let T=-1;if(N>=33088&&N<=40956?T=N-33088:N>=57408&&N<=60351&&(T=N-49472),T===-1)throw new xn("Invalid byte sequence");const D=(T>>8)*192+(T&255);l.appendBits(D,13)}}static appendECI(a,l){l.appendBits(Pt.ECI.getBits(),4),l.appendBits(a.getValue(),8)}}ae.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),ae.DEFAULT_BYTE_MODE_ENCODING=te.UTF8.getName();class we{write(a,l,c,h=null){if(a.length===0)throw new y("Found empty contents");if(l<0||c<0)throw new y("Requested dimensions are too small: "+l+"x"+c);let p=wn.L,g=we.QUIET_ZONE_SIZE;h!==null&&(h.get(lr.ERROR_CORRECTION)!==void 0&&(p=wn.fromString(h.get(lr.ERROR_CORRECTION).toString())),h.get(lr.MARGIN)!==void 0&&(g=Number.parseInt(h.get(lr.MARGIN).toString(),10)));const w=ae.encode(a,p,h);return this.renderResult(w,l,c,g)}writeToDom(a,l,c,h,p=null){typeof a=="string"&&(a=document.querySelector(a));const g=this.write(l,c,h,p);a&&a.appendChild(g)}renderResult(a,l,c,h){const p=a.getMatrix();if(p===null)throw new Ve;const g=p.getWidth(),w=p.getHeight(),N=g+h*2,T=w+h*2,D=Math.max(l,N),B=Math.max(c,T),G=Math.min(Math.floor(D/N),Math.floor(B/T)),le=Math.floor((D-g*G)/2),ye=Math.floor((B-w*G)/2),Ae=this.createSVGElement(D,B);for(let Te=0,Ue=ye;Te<w;Te++,Ue+=G)for(let nt=0,at=le;nt<g;nt++,at+=G)if(p.get(nt,Te)===1){const it=this.createSvgRectElement(at,Ue,G,G);Ae.appendChild(it)}return Ae}createSVGElement(a,l){const c=document.createElementNS(we.SVG_NS,"svg");return c.setAttributeNS(null,"height",a.toString()),c.setAttributeNS(null,"width",l.toString()),c}createSvgRectElement(a,l,c,h){const p=document.createElementNS(we.SVG_NS,"rect");return p.setAttributeNS(null,"x",a.toString()),p.setAttributeNS(null,"y",l.toString()),p.setAttributeNS(null,"height",c.toString()),p.setAttributeNS(null,"width",h.toString()),p.setAttributeNS(null,"fill","#000000"),p}}we.QUIET_ZONE_SIZE=4,we.SVG_NS="http://www.w3.org/2000/svg";class ke{encode(a,l,c,h,p){if(a.length===0)throw new y("Found empty contents");if(l!==he.QR_CODE)throw new y("Can only encode QR_CODE, but got "+l);if(c<0||h<0)throw new y(`Requested dimensions are too small: ${c}x${h}`);let g=wn.L,w=ke.QUIET_ZONE_SIZE;p!==null&&(p.get(lr.ERROR_CORRECTION)!==void 0&&(g=wn.fromString(p.get(lr.ERROR_CORRECTION).toString())),p.get(lr.MARGIN)!==void 0&&(w=Number.parseInt(p.get(lr.MARGIN).toString(),10)));const N=ae.encode(a,g,p);return ke.renderResult(N,c,h,w)}static renderResult(a,l,c,h){const p=a.getMatrix();if(p===null)throw new Ve;const g=p.getWidth(),w=p.getHeight(),N=g+h*2,T=w+h*2,D=Math.max(l,N),B=Math.max(c,T),G=Math.min(Math.floor(D/N),Math.floor(B/T)),le=Math.floor((D-g*G)/2),ye=Math.floor((B-w*G)/2),Ae=new Q(D,B);for(let Te=0,Ue=ye;Te<w;Te++,Ue+=G)for(let nt=0,at=le;nt<g;nt++,at+=G)p.get(nt,Te)===1&&Ae.setRegion(at,Ue,G,G);return Ae}}ke.QUIET_ZONE_SIZE=4;class Xe{encode(a,l,c,h,p){let g;switch(l){case he.QR_CODE:g=new ke;break;default:throw new y("No encoder available for format "+l)}return g.encode(a,l,c,h,p)}}class tt extends ue{constructor(a,l,c,h,p,g,w,N){if(super(g,w),this.yuvData=a,this.dataWidth=l,this.dataHeight=c,this.left=h,this.top=p,h+g>l||p+w>c)throw new y("Crop rectangle does not fit within image data.");N&&this.reverseHorizontal(g,w)}getRow(a,l){if(a<0||a>=this.getHeight())throw new y("Requested row is outside the image: "+a);const c=this.getWidth();(l==null||l.length<c)&&(l=new Uint8ClampedArray(c));const h=(a+this.top)*this.dataWidth+this.left;return I.arraycopy(this.yuvData,h,l,0,c),l}getMatrix(){const a=this.getWidth(),l=this.getHeight();if(a===this.dataWidth&&l===this.dataHeight)return this.yuvData;const c=a*l,h=new Uint8ClampedArray(c);let p=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return I.arraycopy(this.yuvData,p,h,0,c),h;for(let g=0;g<l;g++){const w=g*a;I.arraycopy(this.yuvData,p,h,w,a),p+=this.dataWidth}return h}isCropSupported(){return!0}crop(a,l,c,h){return new tt(this.yuvData,this.dataWidth,this.dataHeight,this.left+a,this.top+l,c,h,!1)}renderThumbnail(){const a=this.getWidth()/tt.THUMBNAIL_SCALE_FACTOR,l=this.getHeight()/tt.THUMBNAIL_SCALE_FACTOR,c=new Int32Array(a*l),h=this.yuvData;let p=this.top*this.dataWidth+this.left;for(let g=0;g<l;g++){const w=g*a;for(let N=0;N<a;N++){const T=h[p+N*tt.THUMBNAIL_SCALE_FACTOR]&255;c[w+N]=4278190080|T*65793}p+=this.dataWidth*tt.THUMBNAIL_SCALE_FACTOR}return c}getThumbnailWidth(){return this.getWidth()/tt.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/tt.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(a,l){const c=this.yuvData;for(let h=0,p=this.top*this.dataWidth+this.left;h<l;h++,p+=this.dataWidth){const g=p+a/2;for(let w=p,N=p+a-1;w<g;w++,N--){const T=c[w];c[w]=c[N],c[N]=T}}}invert(){return new Se(this)}}tt.THUMBNAIL_SCALE_FACTOR=2;class gt extends ue{constructor(a,l,c,h,p,g,w){if(super(l,c),this.dataWidth=h,this.dataHeight=p,this.left=g,this.top=w,a.BYTES_PER_ELEMENT===4){const N=l*c,T=new Uint8ClampedArray(N);for(let D=0;D<N;D++){const B=a[D],G=B>>16&255,le=B>>7&510,ye=B&255;T[D]=(G+le+ye)/4&255}this.luminances=T}else this.luminances=a;if(h===void 0&&(this.dataWidth=l),p===void 0&&(this.dataHeight=c),g===void 0&&(this.left=0),w===void 0&&(this.top=0),this.left+l>this.dataWidth||this.top+c>this.dataHeight)throw new y("Crop rectangle does not fit within image data.")}getRow(a,l){if(a<0||a>=this.getHeight())throw new y("Requested row is outside the image: "+a);const c=this.getWidth();(l==null||l.length<c)&&(l=new Uint8ClampedArray(c));const h=(a+this.top)*this.dataWidth+this.left;return I.arraycopy(this.luminances,h,l,0,c),l}getMatrix(){const a=this.getWidth(),l=this.getHeight();if(a===this.dataWidth&&l===this.dataHeight)return this.luminances;const c=a*l,h=new Uint8ClampedArray(c);let p=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return I.arraycopy(this.luminances,p,h,0,c),h;for(let g=0;g<l;g++){const w=g*a;I.arraycopy(this.luminances,p,h,w,a),p+=this.dataWidth}return h}isCropSupported(){return!0}crop(a,l,c,h){return new gt(this.luminances,c,h,this.dataWidth,this.dataHeight,this.left+a,this.top+l)}invert(){return new Se(this)}}class Lt extends te{static forName(a){return this.getCharacterSetECIByName(a)}}class zt{}zt.ISO_8859_1=te.ISO8859_1;class Ht{isCompact(){return this.compact}setCompact(a){this.compact=a}getSize(){return this.size}setSize(a){this.size=a}getLayers(){return this.layers}setLayers(a){this.layers=a}getCodeWords(){return this.codeWords}setCodeWords(a){this.codeWords=a}getMatrix(){return this.matrix}setMatrix(a){this.matrix=a}}class an{static singletonList(a){return[a]}static min(a,l){return a.sort(l)[0]}}class Yn{constructor(a){this.previous=a}getPrevious(){return this.previous}}class Nn extends Yn{constructor(a,l,c){super(a),this.value=l,this.bitCount=c}appendTo(a,l){a.appendBits(this.value,this.bitCount)}add(a,l){return new Nn(this,a,l)}addBinaryShift(a,l){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Nn(this,a,l)}toString(){let a=this.value&(1<<this.bitCount)-1;return a|=1<<this.bitCount,"<"+k.toBinaryString(a|1<<this.bitCount).substring(1)+">"}}class tr extends Nn{constructor(a,l,c){super(a,0,0),this.binaryShiftStart=l,this.binaryShiftByteCount=c}appendTo(a,l){for(let c=0;c<this.binaryShiftByteCount;c++)(c===0||c===31&&this.binaryShiftByteCount<=62)&&(a.appendBits(31,5),this.binaryShiftByteCount>62?a.appendBits(this.binaryShiftByteCount-31,16):c===0?a.appendBits(Math.min(this.binaryShiftByteCount,31),5):a.appendBits(this.binaryShiftByteCount-31,5)),a.appendBits(l[this.binaryShiftStart+c],8)}addBinaryShift(a,l){return new tr(this,a,l)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function ni(F,a,l){return new tr(F,a,l)}function nr(F,a,l){return new Nn(F,a,l)}const fs=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],mr=0,Bi=1,fi=2,Lo=3,Ni=4,Po=new Nn(null,0,0),Ya=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function $l(F){for(let a of F)_.fill(a,-1);return F[mr][Ni]=0,F[Bi][Ni]=0,F[Bi][mr]=28,F[Lo][Ni]=0,F[fi][Ni]=0,F[fi][mr]=15,F}const Xa=$l(_.createInt32Array(6,6));class Pn{constructor(a,l,c,h){this.token=a,this.mode=l,this.binaryShiftByteCount=c,this.bitCount=h}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(a,l){let c=this.bitCount,h=this.token;if(a!==this.mode){let g=Ya[this.mode][a];h=nr(h,g&65535,g>>16),c+=g>>16}let p=a===fi?4:5;return h=nr(h,l,p),new Pn(h,a,0,c+p)}shiftAndAppend(a,l){let c=this.token,h=this.mode===fi?4:5;return c=nr(c,Xa[this.mode][a],h),c=nr(c,l,5),new Pn(c,this.mode,0,this.bitCount+h+5)}addBinaryShiftChar(a){let l=this.token,c=this.mode,h=this.bitCount;if(this.mode===Ni||this.mode===fi){let w=Ya[c][mr];l=nr(l,w&65535,w>>16),h+=w>>16,c=mr}let p=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,g=new Pn(l,c,this.binaryShiftByteCount+1,h+p);return g.binaryShiftByteCount===2078&&(g=g.endBinaryShift(a+1)),g}endBinaryShift(a){if(this.binaryShiftByteCount===0)return this;let l=this.token;return l=ni(l,a-this.binaryShiftByteCount,this.binaryShiftByteCount),new Pn(l,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(a){let l=this.bitCount+(Ya[this.mode][a.mode]>>16);return this.binaryShiftByteCount<a.binaryShiftByteCount?l+=Pn.calculateBinaryShiftCost(a)-Pn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>a.binaryShiftByteCount&&a.binaryShiftByteCount>0&&(l+=10),l<=a.bitCount}toBitArray(a){let l=[];for(let h=this.endBinaryShift(a.length).token;h!==null;h=h.getPrevious())l.unshift(h);let c=new R;for(const h of l)h.appendTo(c,a);return c}toString(){return q.format("%s bits=%d bytes=%d",fs[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(a){return a.binaryShiftByteCount>62?21:a.binaryShiftByteCount>31?20:a.binaryShiftByteCount>0?10:0}}Pn.INITIAL_STATE=new Pn(Po,mr,0,0);function jo(F){const a=q.getCharCode(" "),l=q.getCharCode("."),c=q.getCharCode(",");F[mr][a]=1;const h=q.getCharCode("Z"),p=q.getCharCode("A");for(let G=p;G<=h;G++)F[mr][G]=G-p+2;F[Bi][a]=1;const g=q.getCharCode("z"),w=q.getCharCode("a");for(let G=w;G<=g;G++)F[Bi][G]=G-w+2;F[fi][a]=1;const N=q.getCharCode("9"),T=q.getCharCode("0");for(let G=T;G<=N;G++)F[fi][G]=G-T+2;F[fi][c]=12,F[fi][l]=13;const D=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let G=0;G<D.length;G++)F[Lo][q.getCharCode(D[G])]=G;const B=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let G=0;G<B.length;G++)q.getCharCode(B[G])>0&&(F[Ni][q.getCharCode(B[G])]=G);return F}const Ca=jo(_.createInt32Array(5,256));class Ms{constructor(a){this.text=a}encode(){const a=q.getCharCode(" "),l=q.getCharCode(`
`);let c=an.singletonList(Pn.INITIAL_STATE);for(let p=0;p<this.text.length;p++){let g,w=p+1<this.text.length?this.text[p+1]:0;switch(this.text[p]){case q.getCharCode("\r"):g=w===l?2:0;break;case q.getCharCode("."):g=w===a?3:0;break;case q.getCharCode(","):g=w===a?4:0;break;case q.getCharCode(":"):g=w===a?5:0;break;default:g=0}g>0?(c=Ms.updateStateListForPair(c,p,g),p++):c=this.updateStateListForChar(c,p)}return an.min(c,(p,g)=>p.getBitCount()-g.getBitCount()).toBitArray(this.text)}updateStateListForChar(a,l){const c=[];for(let h of a)this.updateStateForChar(h,l,c);return Ms.simplifyStates(c)}updateStateForChar(a,l,c){let h=this.text[l]&255,p=Ca[a.getMode()][h]>0,g=null;for(let w=0;w<=Ni;w++){let N=Ca[w][h];if(N>0){if(g==null&&(g=a.endBinaryShift(l)),!p||w===a.getMode()||w===fi){const T=g.latchAndAppend(w,N);c.push(T)}if(!p&&Xa[a.getMode()][w]>=0){const T=g.shiftAndAppend(w,N);c.push(T)}}}if(a.getBinaryShiftByteCount()>0||Ca[a.getMode()][h]===0){let w=a.addBinaryShiftChar(l);c.push(w)}}static updateStateListForPair(a,l,c){const h=[];for(let p of a)this.updateStateForPair(p,l,c,h);return this.simplifyStates(h)}static updateStateForPair(a,l,c,h){let p=a.endBinaryShift(l);if(h.push(p.latchAndAppend(Ni,c)),a.getMode()!==Ni&&h.push(p.shiftAndAppend(Ni,c)),c===3||c===4){let g=p.latchAndAppend(fi,16-c).latchAndAppend(fi,1);h.push(g)}if(a.getBinaryShiftByteCount()>0){let g=a.addBinaryShiftChar(l).addBinaryShiftChar(l+1);h.push(g)}}static simplifyStates(a){let l=[];for(const c of a){let h=!0;for(const p of l){if(p.isBetterThanOrEqualTo(c)){h=!1;break}c.isBetterThanOrEqualTo(p)&&(l=l.filter(g=>g!==p))}h&&l.push(c)}return l}}class nn{constructor(){}static encodeBytes(a){return nn.encode(a,nn.DEFAULT_EC_PERCENT,nn.DEFAULT_AZTEC_LAYERS)}static encode(a,l,c){let h=new Ms(a).encode(),p=k.truncDivision(h.getSize()*l,100)+11,g=h.getSize()+p,w,N,T,D,B;if(c!==nn.DEFAULT_AZTEC_LAYERS){if(w=c<0,N=Math.abs(c),N>(w?nn.MAX_NB_BITS_COMPACT:nn.MAX_NB_BITS))throw new y(q.format("Illegal value %s for layers",c));T=nn.totalBitsInLayer(N,w),D=nn.WORD_SIZE[N];let it=T-T%D;if(B=nn.stuffBits(h,D),B.getSize()+p>it)throw new y("Data to large for user specified layer");if(w&&B.getSize()>D*64)throw new y("Data to large for user specified layer")}else{D=0,B=null;for(let it=0;;it++){if(it>nn.MAX_NB_BITS)throw new y("Data too large for an Aztec code");if(w=it<=3,N=w?it+1:it,T=nn.totalBitsInLayer(N,w),g>T)continue;(B==null||D!==nn.WORD_SIZE[N])&&(D=nn.WORD_SIZE[N],B=nn.stuffBits(h,D));let Jt=T-T%D;if(!(w&&B.getSize()>D*64)&&B.getSize()+p<=Jt)break}}let G=nn.generateCheckWords(B,T,D),le=B.getSize()/D,ye=nn.generateModeMessage(w,N,le),Ae=(w?11:14)+N*4,Te=new Int32Array(Ae),Ue;if(w){Ue=Ae;for(let it=0;it<Te.length;it++)Te[it]=it}else{Ue=Ae+1+2*k.truncDivision(k.truncDivision(Ae,2)-1,15);let it=k.truncDivision(Ae,2),Jt=k.truncDivision(Ue,2);for(let Ut=0;Ut<it;Ut++){let xr=Ut+k.truncDivision(Ut,15);Te[it-Ut-1]=Jt-xr-1,Te[it+Ut]=Jt+xr+1}}let nt=new Q(Ue);for(let it=0,Jt=0;it<N;it++){let Ut=(N-it)*4+(w?9:12);for(let xr=0;xr<Ut;xr++){let Gr=xr*2;for(let cr=0;cr<2;cr++)G.get(Jt+Gr+cr)&&nt.set(Te[it*2+cr],Te[it*2+xr]),G.get(Jt+Ut*2+Gr+cr)&&nt.set(Te[it*2+xr],Te[Ae-1-it*2-cr]),G.get(Jt+Ut*4+Gr+cr)&&nt.set(Te[Ae-1-it*2-cr],Te[Ae-1-it*2-xr]),G.get(Jt+Ut*6+Gr+cr)&&nt.set(Te[Ae-1-it*2-xr],Te[it*2+cr])}Jt+=Ut*8}if(nn.drawModeMessage(nt,w,Ue,ye),w)nn.drawBullsEye(nt,k.truncDivision(Ue,2),5);else{nn.drawBullsEye(nt,k.truncDivision(Ue,2),7);for(let it=0,Jt=0;it<k.truncDivision(Ae,2)-1;it+=15,Jt+=16)for(let Ut=k.truncDivision(Ue,2)&1;Ut<Ue;Ut+=2)nt.set(k.truncDivision(Ue,2)-Jt,Ut),nt.set(k.truncDivision(Ue,2)+Jt,Ut),nt.set(Ut,k.truncDivision(Ue,2)-Jt),nt.set(Ut,k.truncDivision(Ue,2)+Jt)}let at=new Ht;return at.setCompact(w),at.setSize(Ue),at.setLayers(N),at.setCodeWords(le),at.setMatrix(nt),at}static drawBullsEye(a,l,c){for(let h=0;h<c;h+=2)for(let p=l-h;p<=l+h;p++)a.set(p,l-h),a.set(p,l+h),a.set(l-h,p),a.set(l+h,p);a.set(l-c,l-c),a.set(l-c+1,l-c),a.set(l-c,l-c+1),a.set(l+c,l-c),a.set(l+c,l-c+1),a.set(l+c,l+c-1)}static generateModeMessage(a,l,c){let h=new R;return a?(h.appendBits(l-1,2),h.appendBits(c-1,6),h=nn.generateCheckWords(h,28,4)):(h.appendBits(l-1,5),h.appendBits(c-1,11),h=nn.generateCheckWords(h,40,4)),h}static drawModeMessage(a,l,c,h){let p=k.truncDivision(c,2);if(l)for(let g=0;g<7;g++){let w=p-3+g;h.get(g)&&a.set(w,p-5),h.get(g+7)&&a.set(p+5,w),h.get(20-g)&&a.set(w,p+5),h.get(27-g)&&a.set(p-5,w)}else for(let g=0;g<10;g++){let w=p-5+g+k.truncDivision(g,5);h.get(g)&&a.set(w,p-7),h.get(g+10)&&a.set(p+7,w),h.get(29-g)&&a.set(w,p+7),h.get(39-g)&&a.set(p-7,w)}}static generateCheckWords(a,l,c){let h=a.getSize()/c,p=new Sa(nn.getGF(c)),g=k.truncDivision(l,c),w=nn.bitsToWords(a,c,g);p.encode(w,g-h);let N=l%c,T=new R;T.appendBits(0,N);for(const D of Array.from(w))T.appendBits(D,c);return T}static bitsToWords(a,l,c){let h=new Int32Array(c),p,g;for(p=0,g=a.getSize()/l;p<g;p++){let w=0;for(let N=0;N<l;N++)w|=a.get(p*l+N)?1<<l-N-1:0;h[p]=w}return h}static getGF(a){switch(a){case 4:return Ge.AZTEC_PARAM;case 6:return Ge.AZTEC_DATA_6;case 8:return Ge.AZTEC_DATA_8;case 10:return Ge.AZTEC_DATA_10;case 12:return Ge.AZTEC_DATA_12;default:throw new y("Unsupported word size "+a)}}static stuffBits(a,l){let c=new R,h=a.getSize(),p=(1<<l)-2;for(let g=0;g<h;g+=l){let w=0;for(let N=0;N<l;N++)(g+N>=h||a.get(g+N))&&(w|=1<<l-1-N);(w&p)===p?(c.appendBits(w&p,l),g--):w&p?c.appendBits(w,l):(c.appendBits(w|1,l),g--)}return c}static totalBitsInLayer(a,l){return((l?88:112)+16*a)*a}}nn.DEFAULT_EC_PERCENT=33,nn.DEFAULT_AZTEC_LAYERS=0,nn.MAX_NB_BITS=32,nn.MAX_NB_BITS_COMPACT=4,nn.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Wr{encode(a,l,c,h){return this.encodeWithHints(a,l,c,h,null)}encodeWithHints(a,l,c,h,p){let g=zt.ISO_8859_1,w=nn.DEFAULT_EC_PERCENT,N=nn.DEFAULT_AZTEC_LAYERS;return p!=null&&(p.has(lr.CHARACTER_SET)&&(g=Lt.forName(p.get(lr.CHARACTER_SET).toString())),p.has(lr.ERROR_CORRECTION)&&(w=k.parseInt(p.get(lr.ERROR_CORRECTION).toString())),p.has(lr.AZTEC_LAYERS)&&(N=k.parseInt(p.get(lr.AZTEC_LAYERS).toString()))),Wr.encodeLayers(a,l,c,h,g,w,N)}static encodeLayers(a,l,c,h,p,g,w){if(l!==he.AZTEC)throw new y("Can only encode AZTEC, but got "+l);let N=nn.encode(q.getBytes(a,p),g,w);return Wr.renderResult(N,c,h)}static renderResult(a,l,c){let h=a.getMatrix();if(h==null)throw new Ve;let p=h.getWidth(),g=h.getHeight(),w=Math.max(l,p),N=Math.max(c,g),T=Math.min(w/p,N/g),D=(w-p*T)/2,B=(N-g*T)/2,G=new Q(w,N);for(let le=0,ye=B;le<g;le++,ye+=T)for(let Ae=0,Te=D;Ae<p;Ae++,Te+=T)h.get(Ae,le)&&G.setRegion(Te,ye,T,T);return G}}n.AbstractExpandedDecoder=Ri,n.ArgumentException=x,n.ArithmeticException=rt,n.AztecCode=Ht,n.AztecCodeReader=dt,n.AztecCodeWriter=Wr,n.AztecDecoder=ct,n.AztecDetector=Dt,n.AztecDetectorResult=ze,n.AztecEncoder=nn,n.AztecHighLevelEncoder=Ms,n.AztecPoint=ht,n.BarcodeFormat=he,n.Binarizer=P,n.BinaryBitmap=A,n.BitArray=R,n.BitMatrix=Q,n.BitSource=Co,n.BrowserAztecCodeReader=kn,n.BrowserBarcodeReader=Qu,n.BrowserCodeReader=se,n.BrowserDatamatrixCodeReader=Eo,n.BrowserMultiFormatReader=Io,n.BrowserPDF417Reader=Wl,n.BrowserQRCodeReader=Gl,n.BrowserQRCodeSvgWriter=we,n.CharacterSetECI=te,n.ChecksumException=b,n.Code128Reader=ot,n.Code39Reader=Mt,n.DataMatrixDecodedBitStreamParser=ds,n.DataMatrixReader=Rr,n.DecodeHintType=ne,n.DecoderResult=Oe,n.DefaultGridSampler=yt,n.DetectorResult=ve,n.EAN13Reader=ci,n.EncodeHintType=lr,n.Exception=f,n.FormatException=U,n.GenericGF=Ge,n.GenericGFPoly=qe,n.GlobalHistogramBinarizer=pe,n.GridSampler=We,n.GridSamplerInstance=xt,n.HTMLCanvasElementLuminanceSource=_e,n.HybridBinarizer=ge,n.ITFReader=jt,n.IllegalArgumentException=y,n.IllegalStateException=Ve,n.InvertedLuminanceSource=Se,n.LuminanceSource=ue,n.MathUtils=$e,n.MultiFormatOneDReader=js,n.MultiFormatReader=ql,n.MultiFormatWriter=Xe,n.NotFoundException=J,n.OneDReader=Et,n.PDF417DecodedBitStreamParser=Fe,n.PDF417DecoderErrorCorrection=Dc,n.PDF417Reader=or,n.PDF417ResultMetadata=Vl,n.PerspectiveTransform=Qe,n.PlanarYUVLuminanceSource=tt,n.QRCodeByteMatrix=Na,n.QRCodeDataMask=wi,n.QRCodeDecodedBitStreamParser=mn,n.QRCodeDecoderErrorCorrectionLevel=wn,n.QRCodeDecoderFormatInformation=Nr,n.QRCodeEncoder=ae,n.QRCodeEncoderQRCode=Si,n.QRCodeMaskUtil=Sn,n.QRCodeMatrixUtil=E,n.QRCodeMode=Pt,n.QRCodeReader=Os,n.QRCodeVersion=It,n.QRCodeWriter=ke,n.RGBLuminanceSource=gt,n.RSS14Reader=Bn,n.RSSExpandedReader=Je,n.ReaderException=Aa,n.ReedSolomonDecoder=fe,n.ReedSolomonEncoder=Sa,n.ReedSolomonException=vt,n.Result=de,n.ResultMetadataType=Le,n.ResultPoint=oe,n.StringUtils=q,n.UnsupportedOperationException=be,n.VideoInputDevice=Me,n.WhiteRectangleDetector=Be,n.WriterException=xn,n.ZXingArrays=_,n.ZXingCharset=Lt,n.ZXingInteger=k,n.ZXingStandardCharsets=zt,n.ZXingStringBuilder=X,n.ZXingStringEncoding=$,n.ZXingSystem=I,n.createAbstractExpandedDecoder=Ll,Object.defineProperty(n,"__esModule",{value:!0})})})(Jm,Jm.exports);var Kn=Jm.exports;const zD=i1(Kn),HD=Eb({__proto__:null,default:zD},[Kn]);var F5=function(){function e(t,n,r){if(this.formatMap=new Map([[At.QR_CODE,Kn.BarcodeFormat.QR_CODE],[At.AZTEC,Kn.BarcodeFormat.AZTEC],[At.CODABAR,Kn.BarcodeFormat.CODABAR],[At.CODE_39,Kn.BarcodeFormat.CODE_39],[At.CODE_93,Kn.BarcodeFormat.CODE_93],[At.CODE_128,Kn.BarcodeFormat.CODE_128],[At.DATA_MATRIX,Kn.BarcodeFormat.DATA_MATRIX],[At.MAXICODE,Kn.BarcodeFormat.MAXICODE],[At.ITF,Kn.BarcodeFormat.ITF],[At.EAN_13,Kn.BarcodeFormat.EAN_13],[At.EAN_8,Kn.BarcodeFormat.EAN_8],[At.PDF_417,Kn.BarcodeFormat.PDF_417],[At.RSS_14,Kn.BarcodeFormat.RSS_14],[At.RSS_EXPANDED,Kn.BarcodeFormat.RSS_EXPANDED],[At.UPC_A,Kn.BarcodeFormat.UPC_A],[At.UPC_E,Kn.BarcodeFormat.UPC_E],[At.UPC_EAN_EXTENSION,Kn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!HD)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var i=this.createZXingFormats(t),s=new Map;s.set(Kn.DecodeHintType.POSSIBLE_FORMATS,i),s.set(Kn.DecodeHintType.TRY_HARDER,!1),this.hints=s}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(r,i){try{r(n.decode(t))}catch(s){i(s)}})},e.prototype.decode=function(t){var n=new Kn.MultiFormatReader(this.verbose,this.hints),r=new Kn.HTMLCanvasElementLuminanceSource(t),i=new Kn.BinaryBitmap(new Kn.HybridBinarizer(r)),s=n.decode(i);return{text:s.text,format:m6.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,i){t.set(n,r)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],r=0,i=t;r<i.length;r++){var s=i[r];this.formatMap.has(s)?n.push(this.formatMap.get(s)):this.logger.logError("".concat(s," is not supported by")+"ZXingHtml5QrcodeShim")}return n},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),qD=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function u(x){try{f(r.next(x))}catch(y){o(y)}}function d(x){try{f(r.throw(x))}catch(y){o(y)}}function f(x){x.done?s(x.value):i(x.value).then(u,d)}f((r=r.apply(e,t||[])).next())})},WD=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(f){return function(x){return d([f,x])}}function d(f){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(n=0)),n;)try{if(r=1,i&&(s=f[0]&2?i.return:f[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,f[1])).done)return s;switch(i=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,i=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){n.label=f[1];break}if(f[0]===6&&n.label<s[1]){n.label=s[1],s=f;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(f);break}s[2]&&n.ops.pop(),n.trys.pop();continue}f=t.call(e,n)}catch(x){f=[6,x],i=0}finally{r=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},U5=function(){function e(t,n,r){if(this.formatMap=new Map([[At.QR_CODE,"qr_code"],[At.AZTEC,"aztec"],[At.CODABAR,"codabar"],[At.CODE_39,"code_39"],[At.CODE_93,"code_93"],[At.CODE_128,"code_128"],[At.DATA_MATRIX,"data_matrix"],[At.ITF,"itf"],[At.EAN_13,"ean_13"],[At.EAN_8,"ean_8"],[At.PDF_417,"pdf417"],[At.UPC_A,"upc_a"],[At.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var i=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return qD(this,void 0,void 0,function(){var n,r;return WD(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(t)];case 1:if(n=i.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:m6.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,r=0,i=0,s=t;i<s.length;i++){var o=s[i],u=o.boundingBox.width*o.boundingBox.height;u>r&&(r=u,n=o)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],r=0,i=t;r<i.length;r++){var s=i[r];this.formatMap.has(s)?n.push(this.formatMap.get(s)):this.logger.warn("".concat(s," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,i){t.set(n,r)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),V5=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function u(x){try{f(r.next(x))}catch(y){o(y)}}function d(x){try{f(r.throw(x))}catch(y){o(y)}}function f(x){x.done?s(x.value):i(x.value).then(u,d)}f((r=r.apply(e,t||[])).next())})},z5=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(f){return function(x){return d([f,x])}}function d(f){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(n=0)),n;)try{if(r=1,i&&(s=f[0]&2?i.return:f[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,f[1])).done)return s;switch(i=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,i=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){n.label=f[1];break}if(f[0]===6&&n.label<s[1]){n.label=s[1],s=f;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(f);break}s[2]&&n.ops.pop(),n.trys.pop();continue}f=t.call(e,n)}catch(x){f=[6,x],i=0}finally{r=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},GD=function(){function e(t,n,r,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&U5.isSupported()?(this.primaryDecoder=new U5(t,r,i),this.secondaryDecoder=new F5(t,r,i)):this.primaryDecoder=new F5(t,r,i)}return e.prototype.decodeAsync=function(t){return V5(this,void 0,void 0,function(){var n;return z5(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return V5(this,void 0,void 0,function(){var n,r;return z5(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,i.sent()];case 3:if(r=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,r=this.executionResults;n<r.length;n++){var i=r[n];t+=i}var s=t/this.executionResults.length;console.log("".concat(s," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),$x=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Q0=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function u(x){try{f(r.next(x))}catch(y){o(y)}}function d(x){try{f(r.throw(x))}catch(y){o(y)}}function f(x){x.done?s(x.value):i(x.value).then(u,d)}f((r=r.apply(e,t||[])).next())})},J0=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(f){return function(x){return d([f,x])}}function d(f){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(n=0)),n;)try{if(r=1,i&&(s=f[0]&2?i.return:f[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,f[1])).done)return s;switch(i=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,i=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){n.label=f[1];break}if(f[0]===6&&n.label<s[1]){n.label=s[1],s=f;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(f);break}s[2]&&n.ops.pop(),n.trys.pop();continue}f=t.call(e,n)}catch(x){f=[6,x],i=0}finally{r=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},w6=function(){function e(t,n){this.name=t,this.track=n}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var n={};n[this.name]=t;var r={advanced:[n]};return this.track.applyConstraints(r)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var n=t[this.name];return n}return null},e}(),$D=function(e){$x(t,e);function t(n,r){return e.call(this,n,r)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var r={};r[this.name]=n;var i={advanced:[r]};return this.track.applyConstraints(i)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(w6),YD=function(e){$x(t,e);function t(n){return e.call(this,"zoom",n)||this}return t}($D),XD=function(e){$x(t,e);function t(n){return e.call(this,"torch",n)||this}return t}(w6),KD=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new YD(this.track)},e.prototype.torchFeature=function(){return new XD(this.track)},e}(),ZD=function(){function e(t,n,r){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width="".concat(t,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=t.surface.clientWidth,i=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(r,i),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,r,i){return Q0(this,void 0,void 0,function(){var s,o;return J0(this,function(u){switch(u.label){case 0:return s=new e(t,n,i),r.aspectRatio?(o={aspectRatio:r.aspectRatio},[4,s.getFirstTrackOrFail().applyConstraints(o)]):[3,2];case 1:u.sent(),u.label=2;case 2:return s.setupSurface(),[2,s]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var n=this,r=function(){setTimeout(t,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return Q0(this,void 0,void 0,function(){return J0(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,r){var i=t.mediaStream.getVideoTracks(),s=i.length,o=0;t.mediaStream.getVideoTracks().forEach(function(u){t.mediaStream.removeTrack(u),u.stop(),++o,o>=s&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},e.prototype.getCapabilities=function(){return new KD(this.getFirstTrackOrFail())},e}(),QD=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,n,r){return Q0(this,void 0,void 0,function(){return J0(this,function(i){return[2,ZD.create(t,this.mediaStream,n,r)]})})},e.create=function(t){return Q0(this,void 0,void 0,function(){var n,r;return J0(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=i.sent(),[2,new e(r)]}})})},e}(),H5=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function u(x){try{f(r.next(x))}catch(y){o(y)}}function d(x){try{f(r.throw(x))}catch(y){o(y)}}function f(x){x.done?s(x.value):i(x.value).then(u,d)}f((r=r.apply(e,t||[])).next())})},q5=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(f){return function(x){return d([f,x])}}function d(f){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(n=0)),n;)try{if(r=1,i&&(s=f[0]&2?i.return:f[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,f[1])).done)return s;switch(i=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,i=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){n.label=f[1];break}if(f[0]===6&&n.label<s[1]){n.label=s[1],s=f;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(f);break}s[2]&&n.ops.pop(),n.trys.pop();continue}f=t.call(e,n)}catch(x){f=[6,x],i=0}finally{r=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},JD=function(){function e(){}return e.failIfNotSupported=function(){return H5(this,void 0,void 0,function(){return q5(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return H5(this,void 0,void 0,function(){return q5(this,function(n){return[2,QD.create(t)]})})},e}(),e9=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function u(x){try{f(r.next(x))}catch(y){o(y)}}function d(x){try{f(r.throw(x))}catch(y){o(y)}}function f(x){x.done?s(x.value):i(x.value).then(u,d)}f((r=r.apply(e,t||[])).next())})},t9=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(f){return function(x){return d([f,x])}}function d(f){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(n=0)),n;)try{if(r=1,i&&(s=f[0]&2?i.return:f[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,f[1])).done)return s;switch(i=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,i=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){n.label=f[1];break}if(f[0]===6&&n.label<s[1]){n.label=s[1],s=f;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(f);break}s[2]&&n.ops.pop(),n.trys.pop();continue}f=t.call(e,n)}catch(x){f=[6,x],i=0}finally{r=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},n9=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=xu.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=xu.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return e9(this,void 0,void 0,function(){var t,n,r,i,s,o,u;return t9(this,function(d){switch(d.label){case 0:return t=function(f){for(var x=f.getVideoTracks(),y=0,A=x;y<A.length;y++){var b=A[y];b.enabled=!1,b.stop(),f.removeTrack(b)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=d.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=d.sent(),i=[],s=0,o=r;s<o.length;s++)u=o[s],u.kind==="videoinput"&&i.push({id:u.deviceId,label:u.label});return t(n),[2,i]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){var r=function(s){for(var o=[],u=0,d=s;u<d.length;u++){var f=d[u];f.kind==="video"&&o.push({id:f.id,label:f.label})}t(o)},i=MediaStreamTrack;i.getSources(r)})},e}(),vr;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(vr||(vr={}));var r9=function(){function e(){this.state=vr.NOT_STARTED,this.onGoingTransactionNewState=vr.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===vr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=vr.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===vr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=vr.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==vr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case vr.UNKNOWN:throw"Transition from unknown is not allowed";case vr.NOT_STARTED:this.failIfNewStateIs(t,[vr.PAUSED]);break;case vr.SCANNING:break;case vr.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];if(t===s)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),i9=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===vr.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==vr.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===vr.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===vr.PAUSED},e}(),s9=function(){function e(){}return e.create=function(){return new i9(new r9)},e}(),a9=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ys=function(e){a9(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(da),o9=function(){function e(t,n){this.logger=n,this.fps=ys.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=ys.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?v6.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!La(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),W5=function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new y6(this.verbose),this.qrcode=new GD(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=s9.create()}return e.prototype.start=function(t,n,r,i){var s=this;if(!t)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var o;i?o=i:o=this.verbose?this.logger.log:function(){};var u=o9.create(n,this.logger);this.clearElement();var d=!1;u.videoConstraints&&(u.isMediaStreamConstraintsValid()?d=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var f=d,x=document.getElementById(this.elementId);x.clientWidth?x.clientWidth:ys.DEFAULT_WIDTH,x.style.position="relative",this.shouldScan=!0,this.element=x;var y=this,A=this.stateManagerProxy.startTransition(vr.SCANNING);return new Promise(function(b,P){var I=f?u.videoConstraints:y.createVideoConstraints(t);if(!I){A.cancel(),P("videoConstraints should be defined");return}var j={};(!f||u.aspectRatio)&&(j.aspectRatio=u.aspectRatio);var C={onRenderSurfaceReady:function(_,k){y.setupUi(_,k,u),y.isScanning=!0,y.foreverScan(u,r,o)}};JD.failIfNotSupported().then(function(_){_.create(I).then(function(k){return k.render(s.element,j,C).then(function(R){y.renderedCamera=R,A.execute(),b(null)}).catch(function(R){A.cancel(),P(R)})}).catch(function(k){A.cancel(),P(xu.errorGettingUserMedia(k))})}).catch(function(_){A.cancel(),P(xu.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(vr.PAUSED),this.showPausedState(),(La(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(vr.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(vr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(t.element){var s=document.getElementById(ys.SHADED_REGION_ELEMENT_ID);s&&t.element.removeChild(s)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),r(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),n.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(r){return r.decodedText})},e.prototype.scanFileV2=function(t,n){var r=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(La(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,s){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(t);var o=new Image;o.onload=function(){var u=o.width,d=o.height,f=document.getElementById(r.elementId),x=f.clientWidth?f.clientWidth:ys.DEFAULT_WIDTH,y=Math.max(f.clientHeight?f.clientHeight:d,ys.FILE_SCAN_MIN_HEIGHT),A=r.computeCanvasDrawConfig(u,d,x,y);if(n){var b=r.createCanvasElement(x,y,"qr-canvas-visible");b.style.display="inline-block",f.appendChild(b);var P=b.getContext("2d");if(!P)throw"Unable to get 2d context from canvas";P.canvas.width=x,P.canvas.height=y,P.drawImage(o,0,0,u,d,A.x,A.y,A.width,A.height)}var I=ys.FILE_SCAN_HIDDEN_CANVAS_PADDING,j=Math.max(o.width,A.width),C=Math.max(o.height,A.height),_=j+2*I,k=C+2*I,R=r.createCanvasElement(_,k);f.appendChild(R);var M=R.getContext("2d");if(!M)throw"Unable to get 2d context from canvas";M.canvas.width=_,M.canvas.height=k,M.drawImage(o,0,0,u,d,I,I,j,C);try{r.qrcode.decodeRobustlyAsync(R).then(function(ne){i(M5.createFromQrcodeResult(ne))}).catch(s)}catch(ne){s("QR code parse error, error = ".concat(ne))}},o.onerror=s,o.onabort=s,o.onstalled=s,o.onsuspend=s,o.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return n9.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!v6.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var n=[At.QR_CODE,At.AZTEC,At.CODABAR,At.CODE_39,At.CODE_93,At.CODE_128,At.DATA_MATRIX,At.MAXICODE,At.ITF,At.EAN_13,At.EAN_8,At.PDF_417,At.RSS_14,At.RSS_EXPANDED,At.UPC_A,At.UPC_E,At.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return n;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],i=0,s=t.formatsToSupport;i<s.length;i++){var o=s[i];UD(o)?r.push(o):this.logger.warn("Invalid format: ".concat(o," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(La(t))return!0;if(!La(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(La(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return La(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,n,r){var i=this,s=r.qrbox;this.validateQrboxConfig(s);var o=this.toQrdimensions(t,n,s),u=function(f){if(f<ys.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(ys.MIN_QR_BOX_SIZE,"px.")},d=function(f){return f>t&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),f=t),f};u(o.width),u(o.height),o.width=d(o.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(t,n)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return r},e.prototype.setupUi=function(t,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,r);var i=La(r.qrbox)?{width:t,height:n}:r.qrbox;this.validateQrboxConfig(i);var s=this.toQrdimensions(t,n,i);s.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var o=r.isShadedBoxEnabled()&&s.height<=n,u={x:0,y:0,width:t,height:n},d=o?this.getShadedRegionBounds(t,n,s):u,f=this.createCanvasElement(d.width,d.height),x={willReadFrequently:!0},y=f.getContext("2d",x);y.canvas.width=d.width,y.canvas.height=d.height,this.element.append(f),o&&this.possiblyInsertShadingElement(this.element,t,n,s),this.createScannerPausedUiElement(this.element),this.qrRegion=d,this.context=y,this.canvasElement=f},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText=xu.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return t(i.text,M5.createFromQrcodeResult(i)),r.possiblyUpdateShaders(!0),!0}).catch(function(i){r.possiblyUpdateShaders(!1);var s=xu.codeParseError(i);return n(s,x6.createFrom(s)),!1})},e.prototype.foreverScan=function(t,n,r){var i=this;if(this.shouldScan&&this.renderedCamera){var s=this.renderedCamera.getSurface(),o=s.videoWidth/s.clientWidth,u=s.videoHeight/s.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var d=this.qrRegion.width*o,f=this.qrRegion.height*u,x=this.qrRegion.x*o,y=this.qrRegion.y*u;this.context.drawImage(s,x,y,d,f,0,0,this.qrRegion.width,this.qrRegion.height);var A=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(t,n,r)},i.getTimeoutFps(t.fps))};this.scanContext(n,r).then(function(b){!b&&t.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(n,r).finally(function(){A()})):A()}).catch(function(b){i.logger.logError("Error happend while scanning context",b),A()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var n="facingMode",r="deviceId",i={user:!0,environment:!0},s="exact",o=function(P){if(P in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(P,"'")},u=Object.keys(t);if(u.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(u.length," keys");var d=Object.keys(t)[0];if(d!==n&&d!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(d===n){var f=t.facingMode;if(typeof f=="string"){if(o(f))return{facingMode:f}}else if(typeof f=="object")if(s in f){if(o(f["".concat(s)]))return{facingMode:{exact:f["".concat(s)]}}}else throw"'facingMode' should be string or object with"+" ".concat(s," as key.");else{var x=typeof f;throw"Invalid type of 'facingMode' = ".concat(x)}}else{var y=t.deviceId;if(typeof y=="string")return{deviceId:y};if(typeof y=="object"){if(s in y)return{deviceId:{exact:y["".concat(s)]}};throw"'deviceId' should be string or object with"+" ".concat(s," as key.")}else{var A=typeof y;throw"Invalid type of 'deviceId' = ".concat(A)}}}var b=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(b)},e.prototype.computeCanvasDrawConfig=function(t,n,r,i){if(t<=r&&n<=i){var s=(r-t)/2,o=(i-n)/2;return{x:s,y:o,width:t,height:n}}else{var u=t,d=n;return t>r&&(n=r/t*n,t=r),n>i&&(t=i/n*t,n=i),this.logger.log("Image downsampled from "+"".concat(u,"X").concat(d)+" to ".concat(t,"X").concat(n,".")),this.computeCanvasDrawConfig(t,n,r,i)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?ys.BORDER_SHADER_MATCH_COLOR:ys.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,r){var i=t,s=n,o=document.createElement("canvas");return o.style.width="".concat(i,"px"),o.style.height="".concat(s,"px"),o.style.display="none",o.id=La(r)?"qr-canvas":r,o},e.prototype.getShadedRegionBounds=function(t,n,r){if(r.width>t||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},e.prototype.possiblyInsertShadingElement=function(t,n,r,i){if(!(n-i.width<1||r-i.height<1)){var s=document.createElement("div");s.style.position="absolute";var o=(n-i.width)/2,u=(r-i.height)/2;if(s.style.borderLeft="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderRight="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderTop="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderBottom="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),s.style.boxSizing="border-box",s.style.top="0px",s.style.bottom="0px",s.style.left="0px",s.style.right="0px",s.id="".concat(ys.SHADED_REGION_ELEMENT_ID),n-i.width<11||r-i.height<11)this.hasBorderShaders=!1;else{var d=5,f=40;this.insertShaderBorders(s,f,d,-d,null,0,!0),this.insertShaderBorders(s,f,d,-d,null,0,!1),this.insertShaderBorders(s,f,d,null,-d,0,!0),this.insertShaderBorders(s,f,d,null,-d,0,!1),this.insertShaderBorders(s,d,f+d,-d,null,-d,!0),this.insertShaderBorders(s,d,f+d,null,-d,-d,!0),this.insertShaderBorders(s,d,f+d,-d,null,-d,!1),this.insertShaderBorders(s,d,f+d,null,-d,-d,!1),this.hasBorderShaders=!0}t.append(s)}},e.prototype.insertShaderBorders=function(t,n,r,i,s,o,u){var d=document.createElement("div");d.style.position="absolute",d.style.backgroundColor=ys.BORDER_SHADER_DEFAULT_COLOR,d.style.width="".concat(n,"px"),d.style.height="".concat(r,"px"),i!==null&&(d.style.top="".concat(i,"px")),s!==null&&(d.style.bottom="".concat(s,"px")),u?d.style.left="".concat(o,"px"):d.style.right="".concat(o,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(d),t.appendChild(d)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),Yx="data:image/svg+xml;base64,",l9=Yx+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",c9=Yx+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",G5=Yx+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",u9="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",$5=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),d9=function(){function e(){this.data=$5.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},e.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=$5.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),h9=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=B5.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var r=document.createElement("br"),i=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(i);var s=document.createElement("a");s.innerText=B5.reportIssues(),s.href="https://github.com/mebjas/html5-qrcode/issues",s.target="new",s.style.color="white",this.infoDiv.appendChild(s),t.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),f9=function(){function e(t,n){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=n,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(t){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=G5,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(r){return n.onHoverIn()},this.infoIcon.onmouseout=function(r){return n.onHoverOut()},this.infoIcon.onclick=function(r){return n.onClick()},t.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=u9,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=G5,this.infoIcon.style.opacity="0.6")},e}(),p9=function(){function e(){var t=this;this.infoDiv=new h9,this.infoIcon=new f9(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return e.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},e}(),g9=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function u(x){try{f(r.next(x))}catch(y){o(y)}}function d(x){try{f(r.throw(x))}catch(y){o(y)}}function f(x){x.done?s(x.value):i(x.value).then(u,d)}f((r=r.apply(e,t||[])).next())})},m9=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(f){return function(x){return d([f,x])}}function d(f){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(n=0)),n;)try{if(r=1,i&&(s=f[0]&2?i.return:f[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,f[1])).done)return s;switch(i=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,i=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){n.label=f[1];break}if(f[0]===6&&n.label<s[1]){n.label=s[1],s=f;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(f);break}s[2]&&n.ops.pop(),n.trys.pop();continue}f=t.call(e,n)}catch(x){f=[6,x],i=0}finally{r=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Y5=function(){function e(){}return e.hasPermissions=function(){return g9(this,void 0,void 0,function(){var t,n,r,i;return m9(this,function(s){switch(s.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=s.sent(),n=0,r=t;n<r.length;n++)if(i=r[n],i.kind==="videoinput"&&i.label)return[2,!0];return[2,!1]}})})},e}(),Ho=function(){function e(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var r=n[t];if(e.isCameraScanType(r))return!0}return!1},e.isCameraScanType=function(t){return t===bl.SCAN_TYPE_CAMERA},e.isFileScanType=function(t){return t===bl.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(t){if(!t||t.length===0)return da.DEFAULT_SUPPORTED_SCAN_TYPE;var n=da.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var r=0,i=t;r<i.length;r++){var s=i[r];if(!da.DEFAULT_SUPPORTED_SCAN_TYPE.includes(s))throw"Unsupported scan type ".concat(s)}return t},e}(),As=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),uo=function(){function e(){}return e.createElement=function(t,n){var r=document.createElement(t);return r.id=n,r.classList.add(As.ALL_ELEMENT_CLASS),t==="button"&&r.setAttribute("type","button"),r},e}(),b6=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function u(x){try{f(r.next(x))}catch(y){o(y)}}function d(x){try{f(r.throw(x))}catch(y){o(y)}}function f(x){x.done?s(x.value):i(x.value).then(u,d)}f((r=r.apply(e,t||[])).next())})},A6=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(f){return function(x){return d([f,x])}}function d(f){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(n=0)),n;)try{if(r=1,i&&(s=f[0]&2?i.return:f[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,f[1])).done)return s;switch(i=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,i=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){n.label=f[1];break}if(f[0]===6&&n.label<s[1]){n.label=s[1],s=f;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(f);break}s[2]&&n.ops.pop(),n.trys.pop();continue}f=t.call(e,n)}catch(x){f=[6,x],i=0}finally{r=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},X5=function(){function e(t,n,r){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=n,this.onTorchActionFailureCallback=r}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return b6(this,void 0,void 0,function(){var t,n;return A6(this,function(r){switch(r.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return n=r.sent(),this.propagateFailure(t,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(t,n){t===n?(this.buttonController.setText(n?_n.torchOffButton():_n.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},e.prototype.propagateFailure=function(t,n){var r=t?_n.torchOnFailedMessage():_n.torchOffFailedMessage();n&&(r+="; Error = "+n),this.onTorchActionFailureCallback(r)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),x9=function(){function e(t,n){this.onTorchActionFailureCallback=n,this.torchButton=uo.createElement("button",As.TORCH_BUTTON_ID),this.torchController=new X5(t,this,n)}return e.prototype.render=function(t,n){var r=this;this.torchButton.innerText=_n.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var i=this;this.torchButton.addEventListener("click",function(s){return b6(r,void 0,void 0,function(){return A6(this,function(o){switch(o.label){case 0:return[4,i.torchController.flipState()];case 1:return o.sent(),i.torchController.isTorchEnabled()?(i.torchButton.classList.remove(As.TORCH_BUTTON_CLASS_TORCH_OFF),i.torchButton.classList.add(As.TORCH_BUTTON_CLASS_TORCH_ON)):(i.torchButton.classList.remove(As.TORCH_BUTTON_CLASS_TORCH_ON),i.torchButton.classList.add(As.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(t){this.torchController=new X5(t,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(t){this.torchButton.innerText=t},e.prototype.reset=function(){this.torchButton.innerText=_n.torchOnButton(),this.torchController.reset()},e.create=function(t,n,r,i){var s=new e(n,i);return s.render(t,r),s},e}(),y9=function(){function e(t,n,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",t.appendChild(this.fileBasedScanRegion);var i=document.createElement("label");i.setAttribute("for",this.getFileScanInputId()),i.style.display="inline-block",this.fileBasedScanRegion.appendChild(i),this.fileSelectionButton=uo.createElement("button",As.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(u){i.click()}),i.append(this.fileSelectionButton),this.fileScanInput=uo.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",i.appendChild(this.fileScanInput);var s=this;this.fileScanInput.addEventListener("change",function(u){if(!(u==null||u.target==null)){var d=u.target;if(!(d.files&&d.files.length===0)){var f=d.files,x=f[0],y=x.name;s.setImageNameToButton(y),r(x)}}});var o=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(o),this.fileBasedScanRegion.addEventListener("dragenter",function(u){s.fileBasedScanRegion.style.border=s.fileBasedScanRegionActiveBorder(),u.stopPropagation(),u.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(u){s.fileBasedScanRegion.style.border=s.fileBasedScanRegionDefaultBorder(),u.stopPropagation(),u.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(u){s.fileBasedScanRegion.style.border=s.fileBasedScanRegionActiveBorder(),u.stopPropagation(),u.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(u){u.stopPropagation(),u.preventDefault(),s.fileBasedScanRegion.style.border=s.fileBasedScanRegionDefaultBorder();var d=u.dataTransfer;if(d){var f=d.files;if(!f||f.length===0)return;for(var x=!1,y=0;y<f.length;++y){var A=f.item(y);if(A){var b=/image.*/;if(A.type.match(b)){x=!0;var P=A.name;s.setImageNameToButton(P),r(A),o.innerText=_n.dragAndDropMessage();break}}}x||(o.innerText=_n.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=_n.dragAndDropMessage(),t.style.fontWeight="400",t},e.prototype.setImageNameToButton=function(t){var n=20;if(t.length>n){var r=t.substring(0,8),i=t.length,s=t.substring(i-8,i);t="".concat(r,"....").concat(s)}var o=_n.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=o},e.prototype.setInitialValueToButton=function(){var t=_n.fileSelectionChooseImage()+" - "+_n.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,r){var i=new e(t,n,r);return i},e}(),v9=function(){function e(t){this.selectElement=uo.createElement("select",As.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return e.prototype.render=function(t){var n=document.createElement("span");n.style.marginRight="10px";var r=this.cameras.length;if(r===0)throw new Error("No cameras found");if(r===1)n.style.display="none";else{var i=_n.selectCamera();n.innerText="".concat(i," (").concat(this.cameras.length,")  ")}for(var s=1,o=0,u=this.cameras;o<u.length;o++){var d=u[o],f=d.id,x=d.label==null?f:d.label;(!x||x==="")&&(x=[_n.anonymousCameraPrefix(),s++].join(" "));var y=document.createElement("option");y.value=f,y.innerText=x,this.options.push(y),this.selectElement.appendChild(y)}n.appendChild(this.selectElement),t.appendChild(n)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return this.selectElement.disabled===!0},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(t){for(var n=0,r=this.options;n<r.length;n++){var i=r[n];if(i.value===t)return!0}return!1},e.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},e.prototype.hasSingleItem=function(){return this.cameras.length===1},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var r=new e(n);return r.render(t),r},e}(),w9=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=uo.createElement("input",As.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(t,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=_n.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var i=this;this.rangeInput.addEventListener("input",function(){return i.onValueChange()}),this.rangeInput.addEventListener("change",function(){return i.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var t=_n.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(t,n,r,i){this.rangeInput.min=t.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=i.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var r=new e;return r.render(t,n),r},e}(),vs;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(vs||(vs={}));function b9(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function A9(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}var S9=function(){function e(t,n,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(n),this.verbose=r===!0,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new Ho(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new y6(this.verbose),this.persistedDataManager=new d9,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return e.prototype.render=function(t,n){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(s,o){if(t)t(s,o);else{if(r.lastMatchFound===s)return;r.lastMatchFound=s,r.setHeaderMessage(_n.lastMatch(s),vs.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(s,o){n&&n(s,o)};var i=document.getElementById(this.elementId);if(!i)throw"HTML Element with id=".concat(this.elementId," not found");i.innerHTML="",this.createBasicLayout(i),this.html5Qrcode=new W5(this.getScanRegionId(),A9(this.config,this.verbose))},e.prototype.pause=function(t){(La(t)||t!==!0)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var t=this,n=function(){var r=document.getElementById(t.elementId);r&&(r.innerHTML="",t.resetBasicLayout(r))};return this.html5Qrcode?new Promise(function(r,i){if(!t.html5Qrcode){r();return}t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(s){if(!t.html5Qrcode){r();return}t.html5Qrcode.clear(),n(),r()}).catch(function(s){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",s),i(s)}):(t.html5Qrcode.clear(),n(),r())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(t){return t?(t.fps||(t.fps=da.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!da.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=da.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=da.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:da.SCAN_DEFAULT_FPS,rememberLastUsedCamera:da.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:da.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var n=document.createElement("div"),r=this.getScanRegionId();n.id=r,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",t.appendChild(n),Ho.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var i=document.createElement("div"),s=this.getDashboardId();i.id=s,i.style.width="100%",t.appendChild(i),this.setupInitialDashboard(i)},e.prototype.resetBasicLayout=function(t){t.style.border="none"},e.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(t){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",t.appendChild(n);var r=new p9;r.renderInto(n);var i=document.createElement("div");i.id=this.getHeaderMessageContainerId(),i.style.display="none",i.style.textAlign="center",i.style.fontSize="14px",i.style.padding="2px 10px",i.style.margin="4px",i.style.borderTop="1px solid #f6f6f6",n.appendChild(i)},e.prototype.createSection=function(t){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",t.appendChild(n)},e.prototype.createCameraListUi=function(t,n,r){var i=this;i.showHideScanTypeSwapLink(!1),i.setHeaderMessage(_n.cameraPermissionRequesting());var s=function(){r||i.createPermissionButton(t,n)};W5.getCameras().then(function(o){i.persistedDataManager.setHasPermission(!0),i.showHideScanTypeSwapLink(!0),i.resetHeaderMessage(),o&&o.length>0?(t.removeChild(n),i.renderCameraSelection(o)):(i.setHeaderMessage(_n.noCameraFound(),vs.STATUS_WARNING),s())}).catch(function(o){i.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:s(),i.setHeaderMessage(o,vs.STATUS_WARNING),i.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(t,n){var r=this,i=uo.createElement("button",this.getCameraPermissionButtonId());i.innerText=_n.cameraPermissionTitle(),i.addEventListener("click",function(){i.disabled=!0,r.createCameraListUi(t,n,i)}),n.appendChild(i)},e.prototype.createPermissionsUi=function(t,n){var r=this;if(Ho.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Y5.hasPermissions().then(function(i){i?r.createCameraListUi(t,n):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(t,n))}).catch(function(i){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(t,n)});return}this.createPermissionButton(t,n)},e.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");t.appendChild(n);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=Ho.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(r);var i=document.createElement("div");i.style.textAlign="center",r.appendChild(i),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,i),this.renderFileScanUi(n)},e.prototype.renderFileScanUi=function(t){var n=Ho.isFileScanType(this.currentScanType),r=this,i=function(s){if(!r.html5Qrcode)throw"html5Qrcode not defined";Ho.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(_n.loadingImage()),r.html5Qrcode.scanFileV2(s,!0).then(function(o){r.resetHeaderMessage(),r.qrCodeSuccessCallback(o.decodedText,o)}).catch(function(o){r.setHeaderMessage(o,vs.STATUS_WARNING),r.qrCodeErrorCallback(o,x6.createFrom(o))}))};this.fileSelectionUi=y9.create(t,n,i)},e.prototype.renderCameraSelection=function(t){var n=this,r=this,i=document.getElementById(this.getDashboardSectionCameraScanRegionId());i.style.textAlign="center";var s=w9.create(i,!1),o=function(I){var j=I.zoomFeature();if(j.isSupported()){s.setOnCameraZoomValueChangeCallback(function(_){j.apply(_)});var C=1;n.config.defaultZoomValueIfSupported&&(C=n.config.defaultZoomValueIfSupported),C=VD(C,j.min(),j.max()),s.setValues(j.min(),j.max(),C,j.step()),s.show()}},u=v9.create(i,t),d=document.createElement("span"),f=uo.createElement("button",As.CAMERA_START_BUTTON_ID);f.innerText=_n.scanButtonStartScanningText(),d.appendChild(f);var x=uo.createElement("button",As.CAMERA_STOP_BUTTON_ID);x.innerText=_n.scanButtonStopScanningText(),x.style.display="none",x.disabled=!0,d.appendChild(x);var y,A=function(I){if(!I.torchFeature().isSupported()){y&&y.hide();return}y?y.updateTorchCapability(I.torchFeature()):y=x9.create(d,I.torchFeature(),{display:"none",marginLeft:"5px"},function(j){r.setHeaderMessage(j,vs.STATUS_WARNING)}),y.show()};i.appendChild(d);var b=function(I){I||(f.style.display="none"),f.innerText=_n.scanButtonStartScanningText(),f.style.opacity="1",f.disabled=!1,I&&(f.style.display="inline-block")};if(f.addEventListener("click",function(I){f.innerText=_n.scanButtonScanningStarting(),u.disable(),f.disabled=!0,f.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var j=u.getValue();r.persistedDataManager.setLastUsedCameraId(j),r.html5Qrcode.start(j,b9(r.config),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function(C){x.disabled=!1,x.style.display="inline-block",b(!1);var _=r.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&A(_),n.config.showZoomSliderIfSupported===!0&&o(_)}).catch(function(C){r.showHideScanTypeSwapLink(!0),u.enable(),b(!0),r.setHeaderMessage(C,vs.STATUS_WARNING)})}),u.hasSingleItem()&&f.click(),x.addEventListener("click",function(I){if(!r.html5Qrcode)throw"html5Qrcode not defined";x.disabled=!0,r.html5Qrcode.stop().then(function(j){n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),u.enable(),f.disabled=!1,x.style.display="none",f.style.display="inline-block",y&&(y.reset(),y.hide()),s.removeOnCameraZoomValueChangeCallback(),s.hide(),r.insertCameraScanImageToScanRegion()}).catch(function(j){x.disabled=!1,r.setHeaderMessage(j,vs.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var P=r.persistedDataManager.getLastUsedCameraId();u.hasValue(P)?(u.setValue(P),f.click()):r.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var t=this,n=_n.textIfCameraScanSelected(),r=_n.textIfFileScanSelected(),i=document.getElementById(this.getDashboardSectionId()),s=document.createElement("div");s.style.textAlign="center";var o=uo.createElement("span",this.getDashboardSectionSwapLinkId());o.style.textDecoration="underline",o.style.cursor="pointer",o.innerText=Ho.isCameraScanType(this.currentScanType)?n:r,o.addEventListener("click",function(){if(!t.sectionSwapAllowed){t.verbose&&t.logger.logError("Section swap called when not allowed");return}t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,Ho.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),o.innerText=r,t.currentScanType=bl.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),o.innerText=n,t.currentScanType=bl.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0}),s.appendChild(o),i.appendChild(s)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){Y5.hasPermissions().then(function(r){if(r){var i=document.getElementById(n.getCameraPermissionButtonId());if(!i)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";i.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(r){n.persistedDataManager.setHasPermission(!1)});return}},e.prototype.resetHeaderMessage=function(){var t=document.getElementById(this.getHeaderMessageContainerId());t.style.display="none"},e.prototype.setHeaderMessage=function(t,n){n||(n=vs.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=t,r.style.display="block",n){case vs.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case vs.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case vs.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(t!==!0&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=l9,this.cameraScanImage.alt=_n.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=c9,this.fileScanImage.alt=_n.fileScanAltText()},e.prototype.clearScanRegion=function(){var t=document.getElementById(this.getScanRegionId());t.innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return As.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return As.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();const N9=()=>{const e=Xu(),[t,n]=me.useState(null),[r,i]=me.useState(!1),[s,o]=me.useState([]),{validateTicket:u,recordTicketScan:d,validateGuestlist:f,recordGuestlistScan:x}=So(),y=me.useRef(null),A=me.useRef(null),b=me.useRef(null),P=me.useRef(""),I=me.useRef(!1);me.useEffect(()=>{if(A.current)return y.current=new S9("qr-reader",{fps:10,qrbox:{width:250,height:250},aspectRatio:1},!1),y.current.render(j,C),()=>{y.current&&y.current.clear(),b.current&&clearTimeout(b.current)}},[]);const j=async k=>{if(P.current===k){console.log(" Duplicate QR code detected, ignoring");return}if(I.current||r){console.log(" Already processing, ignoring scan");return}I.current=!0,i(!0),P.current=k;try{console.log(" Raw QR code data:",k);const R=JSON.parse(k);console.log(" Parsed QR data:",R);let M;if(R.type==="guestlist"){if(console.log(" Processing guestlist QR code"),M=await f(R.guestlistId,"entry"),console.log(" Guestlist validation result:",M),M.isValid){await x({guestlistId:R.guestlistId,eventId:M.eventId||"",scanType:"entry",location:"",notes:"",scannedBy:"admin"});const{data:ne}=await en.from("guestlists").select("remaining_scans").eq("id",R.guestlistId).single(),U=(ne==null?void 0:ne.remaining_scans)||0,K=U===1?"1 ticket remaining":`${U} tickets remaining`,te={...M,message:K},be={...te,scanType:"entry",timestamp:new Date().toISOString()};o($=>[be,...$.slice(0,9)]),n(te)}}else if(console.log(" Processing regular ticket QR code"),M=await u(R.orderId,R.ticketTierId,R.customer,"entry"),console.log(" Ticket validation result:",M),M.isValid){await d({orderId:R.orderId,ticketTierId:R.ticketTierId,customerEmail:R.customer,eventId:M.eventId||"",scanType:"entry",location:"",notes:""});const ne={...M,scanType:"entry",timestamp:new Date().toISOString()};o(U=>[ne,...U.slice(0,9)])}t||n(M),b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{n(null)},5e3)}catch(R){console.error("Scan error:",R),n({isValid:!1,message:"Invalid QR code format",orderStatus:"unknown",eventDate:"unknown",customerName:"unknown",customerEmail:"unknown"}),b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{n(null)},5e3)}finally{i(!1),I.current=!1,setTimeout(()=>{P.current=""},5e3)}},C=k=>{console.error("QR Scanner error:",k)},_=()=>{b.current&&clearTimeout(b.current),n(null)};return m.jsx("div",{className:"min-h-screen bg-gray-50 p-2 sm:p-4",children:m.jsxs("div",{className:"max-w-2xl mx-auto",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6 text-center",children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Ticket Scanner"}),m.jsx("p",{className:"text-gray-600 text-lg",children:"Scan QR codes to validate tickets and record entry"})]}),m.jsxs("button",{onClick:()=>e("/admin/dashboard"),className:"flex items-center gap-2 px-6 py-3 text-gray-700 bg-gray-100 rounded-xl hover:bg-gray-200 transition-colors mx-auto text-lg font-medium",children:[m.jsx(HL,{className:"h-5 w-5"}),"Back to Dashboard"]})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6 text-center",children:"QR Code Scanner"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{id:"qr-reader",ref:A,className:"w-full max-w-sm mx-auto"}),m.jsxs("div",{className:"text-center mt-6 space-y-2",children:[m.jsx("p",{className:"text-gray-600 text-lg font-medium",children:" Position QR code within the frame"}),m.jsx("p",{className:"text-sm text-gray-500",children:"Hold steady for best results"})]})]})]}),r&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),m.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Processing ticket..."}),m.jsx("p",{className:"text-sm text-gray-600",children:"Please wait"})]})}),t&&!r&&m.jsx(IS,{children:m.jsx(lt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center z-50 cursor-pointer",onClick:_,children:m.jsxs(lt.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:`p-8 rounded-2xl border-2 max-w-lg w-full mx-4 text-center ${t.isValid?"border-green-300 bg-white shadow-green-100":"border-red-300 bg-white shadow-red-100"} shadow-2xl`,onClick:k=>k.stopPropagation(),children:[m.jsx("div",{className:"mb-6",children:t.isValid?m.jsx(bo,{className:"h-20 w-20 text-green-500 mx-auto"}):m.jsx(G0,{className:"h-20 w-20 text-red-500 mx-auto"})}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:`text-3xl font-bold mb-2 ${t.isValid?"text-green-800":"text-red-800"}`,children:t.isValid?"VALID TICKET":"INVALID TICKET"}),m.jsx("p",{className:`text-lg ${t.isValid?"text-green-700":"text-red-700"}`,children:t.message}),t.message.includes("already scanned")&&m.jsx("p",{className:"text-orange-600 mt-2 font-medium",children:" Already Scanned for Entry"})]}),m.jsxs("div",{className:"space-y-4 text-left bg-gray-50 p-4 rounded-xl",children:[m.jsxs("div",{className:"flex items-center justify-center gap-3",children:[m.jsx(tP,{className:"h-5 w-5 text-gray-600"}),m.jsx("span",{className:"font-semibold text-lg text-gray-900",children:t.customerName})]}),m.jsxs("div",{className:"flex items-center justify-center gap-3",children:[m.jsx(is,{className:"h-5 w-5 text-gray-600"}),m.jsx("span",{className:"text-gray-700",children:t.eventDate&&t.eventDate!=="unknown"?new Date(t.eventDate).toLocaleDateString():"Unknown Date"})]}),t.eventTitle&&m.jsxs("div",{className:"flex items-center justify-center gap-3",children:[m.jsx(Sc,{className:"h-5 w-5 text-gray-600"}),m.jsx("span",{className:"font-medium text-gray-900",children:t.eventTitle})]}),t.ticketTierName&&m.jsxs("div",{className:"flex items-center justify-center gap-3",children:[m.jsx(j1,{className:"h-5 w-5 text-gray-600"}),m.jsx("span",{className:"text-gray-700",children:t.ticketTierName})]})]}),m.jsx("p",{className:"text-sm text-gray-500 mt-6",children:"Tap anywhere to close"})]})})}),s.length>0&&m.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mt-6",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6 text-center",children:"Recent Scans"}),m.jsx("div",{className:"space-y-4",children:s.map((k,R)=>m.jsxs("div",{className:`p-4 rounded-xl border-2 ${k.isValid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[m.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[k.isValid?m.jsx(bo,{className:"h-6 w-6 text-green-600 flex-shrink-0"}):m.jsx(G0,{className:"h-6 w-6 text-red-600 flex-shrink-0"}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:`font-semibold text-lg ${k.isValid?"text-green-800":"text-red-800"}`,children:k.customerName}),m.jsx("p",{className:"text-gray-600",children:k.customerEmail})]})]}),m.jsxs("div",{className:"bg-white p-3 rounded-lg",children:[m.jsx("p",{className:"font-medium text-gray-900 mb-1",children:k.eventTitle||"Unknown Event"}),m.jsxs("p",{className:"text-sm text-gray-600",children:["Entry  ",k.timestamp?new Date(k.timestamp).toLocaleTimeString():k.eventDate&&k.eventDate!=="unknown"?new Date(k.eventDate).toLocaleDateString():"Unknown Date"]})]})]},R))})]})]})})},C9=({event:e,onClose:t,onSuccess:n,onManageGuestlists:r})=>{const[i,s]=me.useState({leadName:"",leadEmail:"",leadPhone:"",totalTickets:1,notes:""}),[o,u]=me.useState(!1),[d,f]=me.useState(null),x=async A=>{if(A.preventDefault(),!i.leadName||!i.leadEmail||i.totalTickets<1){f("Please fill in all required fields and ensure at least 1 ticket.");return}u(!0),f(null);try{const b=await fetch("/api/create-guestlist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventId:e.id,...i})});if(!b.ok){const I=await b.json();throw new Error(I.error||"Failed to create guestlist")}const P=await b.json();n(P.guestlist)}catch(b){f(b instanceof Error?b.message:"An error occurred")}finally{u(!1)}},y=(A,b)=>{s(P=>({...P,[A]:b}))};return m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:m.jsxs(lt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[m.jsx("div",{className:"p-6 border-b",children:m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create Guestlist"}),m.jsx("p",{className:"text-gray-600",children:e.title})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[r&&m.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium",children:"Manage Guestlists"}),m.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:m.jsx(Ic,{className:"h-6 w-6"})})]})]})}),m.jsxs("form",{onSubmit:x,className:"p-6 space-y-6",children:[m.jsxs("div",{children:[m.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[m.jsx(Es,{className:"h-5 w-5"}),"Group Leader Information"]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lead Name *"}),m.jsx("input",{type:"text",value:i.leadName,onChange:A=>y("leadName",A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., John Smith",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lead Email *"}),m.jsx("input",{type:"email",value:i.leadEmail,onChange:A=>y("leadEmail",A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"john@example.com",required:!0})]})]}),m.jsxs("div",{className:"mt-4",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lead Phone (Optional)"}),m.jsx("input",{type:"tel",value:i.leadPhone,onChange:A=>y("leadPhone",A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+44 123 456 7890"})]})]}),m.jsxs("div",{children:[m.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[m.jsx(Mm,{className:"h-5 w-5"}),"Ticket Details"]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of Tickets *"}),m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsx("button",{type:"button",onClick:()=>y("totalTickets",Math.max(1,i.totalTickets-1)),className:"w-10 h-10 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 disabled:opacity-50",disabled:i.totalTickets<=1,children:"-"}),m.jsx("span",{className:"text-2xl font-bold text-gray-900 min-w-[3rem] text-center",children:i.totalTickets}),m.jsx("button",{type:"button",onClick:()=>y("totalTickets",i.totalTickets+1),className:"w-10 h-10 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50",children:"+"})]}),m.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["This will create one QR code that can be scanned ",i.totalTickets," times for entry."]})]})]}),m.jsxs("div",{children:[m.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[m.jsx(Mm,{className:"h-5 w-5"}),"Additional Notes"]}),m.jsx("textarea",{value:i.notes,onChange:A=>y("notes",A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"e.g., VIP table, special dietary requirements, arrival time..."})]}),m.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Summary"}),m.jsxs("div",{className:"space-y-2 text-sm",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Event:"}),m.jsx("span",{className:"font-medium",children:e.title})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Group Leader:"}),m.jsx("span",{className:"font-medium",children:i.leadName||"Not specified"})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Contact:"}),m.jsx("span",{className:"font-medium",children:i.leadEmail||"Not specified"})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Total Tickets:"}),m.jsx("span",{className:"font-medium",children:i.totalTickets})]}),i.notes&&m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Notes:"}),m.jsx("span",{className:"font-medium text-gray-600",children:i.notes})]})]})]}),d&&m.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:m.jsx("p",{className:"text-red-800",children:d})}),m.jsx("button",{type:"submit",disabled:o,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:o?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),m.jsx("span",{children:"Creating Guestlist..."})]}):m.jsxs(m.Fragment,{children:[m.jsx(Rx,{className:"h-5 w-5"}),m.jsx("span",{children:"Create Guestlist & Send QR Code"})]})}),m.jsxs("div",{className:"text-center text-sm text-gray-500",children:[m.jsx("p",{children:"This will create a guestlist and automatically send a QR code to the group leader."}),m.jsxs("p",{children:["The QR code can be scanned ",i.totalTickets," times for entry."]})]})]})]})})},E9=({event:e,onClose:t,onCreateNew:n})=>{const[r,i]=me.useState([]),[s,o]=me.useState(!0);me.useEffect(()=>{u()},[e.id]);const u=async()=>{try{console.log(" Fetching guestlists for event:",e.id);const A=await fetch(`/api/guestlists?eventId=${e.id}`);if(console.log(" Response status:",A.status),!A.ok)throw new Error("Failed to fetch guestlists");const b=await A.json();console.log(" Response data:",b),i(b.guestlists||[])}catch(A){console.error(" Error fetching guestlists:",A)}finally{o(!1)}},d=async A=>{try{if(!(await fetch("/api/resend-guestlist-qr",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guestlistId:A})})).ok)throw new Error("Failed to resend QR code");alert("QR code resent successfully!")}catch(b){alert(b instanceof Error?b.message:"Failed to resend QR code")}},f=async A=>{if(confirm("Are you sure you want to delete this guestlist? This action cannot be undone."))try{if(!(await fetch(`/api/guestlists/${A}`,{method:"DELETE"})).ok)throw new Error("Failed to delete guestlist");i(P=>P.filter(I=>I.id!==A))}catch(b){alert(b instanceof Error?b.message:"Failed to delete guestlist")}},x=()=>r.reduce((A,b)=>A+b.totalTickets,0),y=()=>r.reduce((A,b)=>A+(b.totalTickets-b.remainingScans),0);return s?m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:m.jsxs("div",{className:"bg-white rounded-lg p-8 text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),m.jsx("p",{className:"text-lg font-medium text-gray-700",children:"Loading guestlists..."})]})}):m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:m.jsxs(lt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[m.jsx("div",{className:"p-6 border-b",children:m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Guestlist Management"}),m.jsx("p",{className:"text-gray-600",children:e.title})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[n&&m.jsx("button",{onClick:n,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"Create New Guestlist"}),m.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:m.jsx(Ic,{className:"h-6 w-6"})})]})]})}),m.jsxs("div",{className:"p-6",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[m.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Es,{className:"h-8 w-8 text-blue-600"}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total Guestlists"}),m.jsx("p",{className:"text-2xl font-bold text-blue-900",children:r.length})]})]})}),m.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Mm,{className:"h-8 w-8 text-green-600"}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Total Tickets"}),m.jsx("p",{className:"text-2xl font-bold text-green-900",children:x()})]})]})}),m.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(is,{className:"h-8 w-8 text-orange-600"}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-orange-600 font-medium",children:"Tickets Used"}),m.jsx("p",{className:"text-2xl font-bold text-orange-900",children:y()})]})]})})]}),r.length===0?m.jsxs("div",{className:"text-center py-12",children:[m.jsx(Es,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),m.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No guestlists yet"}),m.jsx("p",{className:"text-gray-500",children:"Create your first guestlist to get started."})]}):m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Group Leader"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tickets"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(A=>m.jsxs("tr",{className:"hover:bg-gray-50",children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsxs("div",{children:[m.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.leadName}),A.notes&&m.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:A.notes})]})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsxs("div",{className:"text-sm text-gray-900",children:[m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(P1,{className:"h-4 w-4 text-gray-400"}),A.leadEmail]}),A.leadPhone&&m.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[m.jsx(kS,{className:"h-4 w-4 text-gray-400"}),A.leadPhone]})]})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsxs("div",{className:"text-sm text-gray-900",children:[m.jsx("div",{className:"font-medium",children:A.totalTickets}),m.jsxs("div",{className:"text-gray-500",children:[A.remainingScans," remaining"]})]})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${A.remainingScans===0?"bg-red-100 text-red-800":A.remainingScans<A.totalTickets?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:A.remainingScans===0?"All Used":A.remainingScans<A.totalTickets?"Partially Used":"Unused"})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(A.createdAt).toLocaleDateString()}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("button",{onClick:()=>d(A.id),className:"text-blue-600 hover:text-blue-900 flex items-center gap-1",title:"Resend QR Code",children:[m.jsx(Rx,{className:"h-4 w-4"}),"Resend"]}),m.jsxs("button",{onClick:()=>f(A.id),className:"text-red-600 hover:text-red-900 flex items-center gap-1",title:"Delete Guestlist",children:[m.jsx(Fm,{className:"h-4 w-4"}),"Delete"]})]})})]},A.id))})]})})]})]})})},hc=({filename:e,data:t,headers:n})=>{const r=[n.join(","),...t.map(u=>n.map(d=>{const f=u[d];return typeof f=="string"&&(f.includes(",")||f.includes('"'))?`"${f.replace(/"/g,'""')}"`:f}).join(","))].join(`
`),i=new Blob([r],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),o=URL.createObjectURL(i);s.setAttribute("href",o),s.setAttribute("download",`${e}.csv`),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)},_9=(e,t,n)=>{const r=`customer-data-${n}-${new Date().toISOString().split("T")[0]}`,i=e.filter(x=>{const y=new Date(x.createdAt),A=new Date;return A.setDate(A.getDate()-(n==="7d"?7:n==="30d"?30:90)),y>=A}),s=i.map(x=>{var b;const y=t.find(P=>P.id===x.eventId);return((b=x.tickets)==null?void 0:b.map(P=>{var j,C;const I=(j=y==null?void 0:y.ticketTiers)==null?void 0:j.find(_=>_.id===P.ticketTierId);return{"Customer Name":x.customerName||"N/A","Customer Email":x.customerEmail||"N/A","Order ID":((C=x.id)==null?void 0:C.slice(0,8))||"N/A","Event Title":(y==null?void 0:y.title)||"Unknown Event","Event Date":(y==null?void 0:y.date)||"N/A","Event Venue":(y==null?void 0:y.venue)||"N/A","Ticket Tier":(I==null?void 0:I.name)||"Unknown Tier","Ticket Price":I?`${(I.price/100).toFixed(2)}`:"N/A",Quantity:P.quantity||0,"Total Price":`${((P.totalPrice||0)/100).toFixed(2)}`,"Order Status":x.status||"N/A","Order Date":new Date(x.createdAt).toLocaleDateString(),"Order Time":new Date(x.createdAt).toLocaleTimeString(),Currency:x.currency||"gbp","Stripe Payment ID":x.stripePaymentIntentId||"N/A"}}))||[]}).flat();if(s.length>0){const x=["Customer Name","Customer Email","Order ID","Event Title","Event Date","Event Venue","Ticket Tier","Ticket Price","Quantity","Total Price","Order Status","Order Date","Order Time","Currency","Stripe Payment ID"];hc({filename:`${r}-purchases`,data:s,headers:x})}const o=i.reduce((x,y)=>{var P;const A=y.customerEmail||"Unknown";x[A]||(x[A]={"Customer Email":A,"Customer Name":y.customerName||"N/A","Total Orders":0,"Total Spent":0,"Total Tickets":0,"Events Attended":new Set,"First Order":new Date(y.createdAt),"Last Order":new Date(y.createdAt),"Favorite Event":"","Most Expensive Order":0}),x[A]["Total Orders"]++,x[A]["Total Spent"]+=y.totalAmount||0,x[A]["Total Tickets"]+=((P=y.tickets)==null?void 0:P.reduce((I,j)=>I+(j.quantity||0),0))||0;const b=t.find(I=>I.id===y.eventId);return b&&x[A]["Events Attended"].add(b.title),new Date(y.createdAt)<x[A]["First Order"]&&(x[A]["First Order"]=new Date(y.createdAt)),new Date(y.createdAt)>x[A]["Last Order"]&&(x[A]["Last Order"]=new Date(y.createdAt)),(y.totalAmount||0)>x[A]["Most Expensive Order"]&&(x[A]["Most Expensive Order"]=y.totalAmount||0),x},{}),u=Object.values(o).map(x=>({...x,"Events Attended":Array.from(x["Events Attended"]).join(", "),"First Order":x["First Order"].toLocaleDateString(),"Last Order":x["Last Order"].toLocaleDateString(),"Total Spent":`${(x["Total Spent"]/100).toFixed(2)}`,"Most Expensive Order":`${(x["Most Expensive Order"]/100).toFixed(2)}`}));if(u.length>0){const x=["Customer Email","Customer Name","Total Orders","Total Spent","Total Tickets","Events Attended","First Order","Last Order","Favorite Event","Most Expensive Order"];hc({filename:`${r}-summary`,data:u,headers:x})}const d=i.map(x=>{var j,C,_;const y=t.find(k=>k.id===x.eventId),A=new Date(x.createdAt),b=A.toLocaleDateString("en-GB",{weekday:"long"}),P=A.getHours(),I=P<12?"Morning":P<17?"Afternoon":"Evening";return{"Customer Email":x.customerEmail||"N/A","Customer Name":x.customerName||"N/A","Order ID":((j=x.id)==null?void 0:j.slice(0,8))||"N/A","Event Title":(y==null?void 0:y.title)||"Unknown Event","Event Category":((C=y==null?void 0:y.tags)==null?void 0:C.join(", "))||"N/A","Day of Week":b,"Time of Day":I,"Hour of Day":P,"Order Amount":`${((x.totalAmount||0)/100).toFixed(2)}`,"Ticket Count":((_=x.tickets)==null?void 0:_.reduce((k,R)=>k+(R.quantity||0),0))||0,"Order Status":x.status||"N/A","Order Date":A.toLocaleDateString(),"Days Until Event":(y!=null&&y.date,"N/A")}});if(d.length>0){const x=["Customer Email","Customer Name","Order ID","Event Title","Event Category","Day of Week","Time of Day","Hour of Day","Order Amount","Ticket Count","Order Status","Order Date","Days Until Event"];hc({filename:`${r}-behavior`,data:d,headers:x})}const f=u.filter(x=>parseFloat(x["Total Spent"].replace("",""))>=100).sort((x,y)=>parseFloat(y["Total Spent"].replace("",""))-parseFloat(x["Total Spent"].replace("","")));if(f.length>0){const x=["Customer Email","Customer Name","Total Spent","Total Orders","Total Tickets","Events Attended","First Order","Last Order","Customer Value Tier"],y=f.map(A=>{const b=parseFloat(A["Total Spent"].replace("",""));let P="Bronze";return b>=500?P="Platinum":b>=300?P="Gold":b>=150&&(P="Silver"),{...A,"Customer Value Tier":P}});hc({filename:`${r}-high-value-customers`,data:y,headers:x})}},T9=(e,t,n)=>{const r=`event-${e.title.replace(/[^a-z0-9]/gi,"-").toLowerCase()}-${n}-${new Date().toISOString().split("T")[0]}`,i=t.filter(o=>o.eventId===e.id),s=[{Event:e.title,Date:e.date,Venue:e.venue,"Total Revenue":`${(i.reduce((o,u)=>o+(u.totalAmount||0),0)/100).toFixed(2)}`,"Total Orders":i.length,"Total Tickets":i.reduce((o,u)=>{var d;return o+(((d=u.tickets)==null?void 0:d.reduce((f,x)=>f+(x.quantity||0),0))||0)},0),Period:n}];if(hc({filename:`${r}-overview`,data:s,headers:["Event","Date","Venue","Total Revenue","Total Orders","Total Tickets","Period"]}),i.length>0){const o=i.map(u=>{var d,f;return{"Order ID":((d=u.id)==null?void 0:d.slice(0,8))||"N/A","Customer Name":u.customerName||"N/A","Customer Email":u.customerEmail||"N/A",Amount:`${((u.totalAmount||0)/100).toFixed(2)}`,Status:u.status||"N/A",Date:new Date(u.createdAt).toLocaleDateString(),Tickets:((f=u.tickets)==null?void 0:f.reduce((x,y)=>x+(y.quantity||0),0))||0}});hc({filename:`${r}-orders`,data:o,headers:["Order ID","Customer Name","Customer Email","Amount","Status","Date","Tickets"]})}if(e.ticketTiers&&e.ticketTiers.length>0){const o=e.ticketTiers.map(u=>{const d=i.filter(y=>{var A;return(A=y.tickets)==null?void 0:A.some(b=>b.ticketTierId===u.id)}),f=d.reduce((y,A)=>{var P;const b=((P=A.tickets)==null?void 0:P.filter(I=>I.ticketTierId===u.id))||[];return y+b.reduce((I,j)=>I+(j.totalPrice||0),0)},0),x=d.reduce((y,A)=>{var P;const b=((P=A.tickets)==null?void 0:P.filter(I=>I.ticketTierId===u.id))||[];return y+b.reduce((I,j)=>I+(j.quantity||0),0)},0);return{"Tier Name":u.name,Price:`${(u.price/100).toFixed(2)}`,Capacity:u.capacity,Sold:x,Available:u.capacity-x,Utilization:`${(x/u.capacity*100).toFixed(1)}%`,Revenue:`${(f/100).toFixed(2)}`,"Revenue per Ticket":x>0?`${(f/x/100).toFixed(2)}`:"0.00"}});hc({filename:`${r}-tiers`,data:o,headers:["Tier Name","Price","Capacity","Sold","Available","Utilization","Revenue","Revenue per Ticket"]})}},I9=()=>{const{events:e,orders:t,getEvents:n,getOrders:r,addEvent:i,deleteEvent:s,archiveEvent:o}=So(),[u,d]=me.useState(null),[f,x]=me.useState(!0),[y,A]=me.useState("30d"),[b,P]=me.useState("all"),[I,j]=me.useState([]),[C,_]=me.useState("analytics"),[k,R]=me.useState(!1),[M,ne]=me.useState(null),[U,K]=me.useState(null),[te,be]=me.useState(!1),[$,q]=me.useState(!1),[X,Q]=me.useState(null);me.useEffect(()=>{J()},[]),me.useEffect(()=>{if(e&&t){const He=se();d(He)}},[e,t,y,b]);const J=async()=>{console.log(" Loading dashboard data..."),x(!0);const He=setTimeout(()=>{console.log(" Loading timeout - forcing completion"),x(!1)},1e4);try{console.log(" Fetching events and orders..."),await Promise.all([n(),r()]),console.log(" Data fetched successfully");const qe=se();d(qe),console.log(" Stats calculated:",qe)}catch(qe){console.error(" Error loading dashboard data:",qe)}finally{clearTimeout(He),x(!1),console.log(" Dashboard loading complete")}},pe=()=>{ne(null),R(!0)},ge=He=>{ne(He),R(!0)},ue=He=>{K({type:"delete",event:He})},Se=He=>{K({type:"archive",event:He})},_e=He=>{Q(He),be(!0)},Me=He=>{be(!1),Q(null),bs.success(`Guestlist created successfully! QR code sent to ${He.leadEmail}`),J()},V=async He=>{j(vt=>[...vt,He]);const qe=new Date,rt=new Date(qe.getTime()+30*24*60*60*1e3);let Ge;switch(He){case"sundowner":Ge={title:"Carnival LDN Sundowner",date:rt.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),time:"18:00 - 22:00",venue:"Sky Garden, London",price:"From 25",description:"Experience the magic of London at sunset with our exclusive Carnival LDN Sundowner. Enjoy live music, craft cocktails, and breathtaking city views from one of London's most iconic venues.",capacity:"150",image:"https://images.unsplash.com/photo-1513635269975-59663e0ac1ad?w=800&h=600&fit=crop",tags:"sundowner,networking,music,cocktails,views",gradient:"from-orange-400 via-red-500 to-pink-500",ticketTiers:[{id:`tier_${Date.now()}_1`,name:"Early Bird",price:2500,originalPrice:3500,capacity:50,soldCount:0,description:"Limited early bird tickets",benefits:["Priority entry","Welcome drink","Canaps"],isActive:!0},{id:`tier_${Date.now()}_2`,name:"Standard",price:3500,originalPrice:null,capacity:80,soldCount:0,description:"Standard admission",benefits:["Entry","Welcome drink","Canaps","Live music"],isActive:!0},{id:`tier_${Date.now()}_3`,name:"VIP",price:5500,originalPrice:null,capacity:20,soldCount:0,description:"Premium experience",benefits:["Priority entry","Premium drinks","Full catering","Reserved seating","Meet & greet with artists"],isActive:!0}]};break;case"bollywood":Ge={title:"Bollywood Night - Carnival LDN",date:rt.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),time:"19:00 - 02:00",venue:"O2 Academy Brixton, London",price:"From 20",description:"Get ready for the most vibrant Bollywood night in London! Dance to the latest Bollywood hits, enjoy authentic Indian cuisine, and experience the magic of Indian cinema with live performances.",capacity:"200",image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=800&h=600&fit=crop",tags:"bollywood,indian,music,dance,food,culture",gradient:"from-purple-400 via-pink-500 to-red-500",ticketTiers:[{id:`tier_${Date.now()}_1`,name:"General Admission",price:2e3,originalPrice:null,capacity:120,soldCount:0,description:"Basic entry",benefits:["Entry","Live music","Dance floor access"],isActive:!0},{id:`tier_${Date.now()}_2`,name:"Premium",price:3500,originalPrice:null,capacity:60,soldCount:0,description:"Enhanced experience",benefits:["Entry","Live music","Dance floor access","Food vouchers","Reserved seating"],isActive:!0},{id:`tier_${Date.now()}_3`,name:"VIP Experience",price:6500,originalPrice:null,capacity:20,soldCount:0,description:"Ultimate Bollywood experience",benefits:["Priority entry","Premium seating","All-inclusive food & drinks","Meet performers","Photo opportunities","Exclusive dance workshop"],isActive:!0}]};break;case"carnival":Ge={title:"Carnival LDN Street Festival",date:rt.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),time:"12:00 - 20:00",venue:"Brockwell Park, London SE24 9BJ",price:"Free - 40",description:"Join us for the biggest Caribbean carnival celebration in London! Experience vibrant costumes, steel pan music, Caribbean food stalls, and an unforgettable day of culture and celebration.",capacity:"500",image:"https://images.unsplash.com/photo-1516450360452-9312f5e86fc7?w=800&h=600&fit=crop",tags:"carnival,caribbean,culture,music,food,family",gradient:"from-green-400 via-blue-500 to-purple-500",ticketTiers:[{id:`tier_${Date.now()}_1`,name:"Free Entry",price:0,originalPrice:null,capacity:300,soldCount:0,description:"General festival access",benefits:["Entry","Live music","Food stalls access","Family activities"],isActive:!0},{id:`tier_${Date.now()}_2`,name:"Premium Pass",price:2500,originalPrice:null,capacity:150,soldCount:0,description:"Enhanced festival experience",benefits:["Priority entry","Reserved seating areas","Food vouchers","Exclusive bar access","Meet & greet with performers"],isActive:!0},{id:`tier_${Date.now()}_3`,name:"VIP Experience",price:4e3,originalPrice:null,capacity:50,soldCount:0,description:"Ultimate carnival experience",benefits:["Priority entry","VIP seating","All-inclusive food & drinks","Backstage access","Exclusive workshops","Commemorative gift bag"],isActive:!0}]};break}try{await i(Ge),bs.success(`${Ge.title} created successfully!`),await J()}catch(vt){console.error("Error creating test event:",vt),bs.error("Failed to create test event")}finally{j(vt=>vt.filter(Ve=>Ve!==He))}},se=()=>{var oe;if(!e||!t)return{totalRevenue:0,totalOrders:0,totalTickets:0,conversionRate:0,averageOrderValue:0,topPerformingEvent:"N/A",recentOrders:[],revenueByEvent:[],ticketSalesByTier:[],dailyRevenue:[]};const He=t.filter(ve=>{if(b!=="all"&&ve.eventId!==b)return!1;const ze=new Date(ve.createdAt),Be=new Date;return Be.setDate(Be.getDate()-(y==="7d"?7:y==="30d"?30:90)),ze>=Be}),qe=He.reduce((ve,ze)=>ve+(ze.totalAmount||0),0),rt=He.length,Ge=He.reduce((ve,ze)=>{var Be;return ve+(((Be=ze.tickets)==null?void 0:Be.reduce((We,Qe)=>We+(Qe.quantity||0),0))||0)},0),vt=rt>0?qe/rt:0,Ve=rt>0?Math.min(95,Math.random()*20+5):0,fe=e.map(ve=>{const Be=He.filter(We=>We.eventId===ve.id).reduce((We,Qe)=>We+(Qe.totalAmount||0),0);return{event:ve.title,revenue:Be}}),bt=((oe=fe.sort((ve,ze)=>ze.revenue-ve.revenue)[0])==null?void 0:oe.event)||"N/A",ct=fe.filter(ve=>ve.revenue>0),$e=[];e.forEach(ve=>{var ze;(ze=ve.ticketTiers)==null||ze.forEach(Be=>{const We=He.filter(xt=>{var ht;return(ht=xt.tickets)==null?void 0:ht.some(Dt=>Dt.ticketTierId===Be.id)}),Qe=We.reduce((xt,ht)=>{var dt;const Dt=((dt=ht.tickets)==null?void 0:dt.filter(kn=>kn.ticketTierId===Be.id))||[];return xt+Dt.reduce((kn,Et)=>kn+(Et.totalPrice||0),0)},0),yt=We.reduce((xt,ht)=>{var dt;const Dt=((dt=ht.tickets)==null?void 0:dt.filter(kn=>kn.ticketTierId===Be.id))||[];return xt+Dt.reduce((kn,Et)=>kn+(Et.quantity||0),0)},0);$e.push({tier:`${ve.title} - ${Be.name}`,sold:yt,revenue:Qe,capacity:Be.capacity||0})})});const re=Array.from({length:30},(ve,ze)=>{const Be=new Date;Be.setDate(Be.getDate()-(29-ze));const Qe=He.filter(yt=>new Date(yt.createdAt).toDateString()===Be.toDateString()).reduce((yt,xt)=>yt+(xt.totalAmount||0),0);return{date:Be.toLocaleDateString("en-GB",{month:"short",day:"numeric"}),revenue:Qe}});return{totalRevenue:qe,totalOrders:rt,totalTickets:Ge,conversionRate:Ve,averageOrderValue:vt,topPerformingEvent:bt,recentOrders:He.slice(0,5),revenueByEvent:ct,ticketSalesByTier:$e,dailyRevenue:re}},de=()=>{e&&t&&(_9(t,e,y),bs.success("Customer data exported successfully!"))},xe=He=>{const qe=e==null?void 0:e.find(rt=>rt.id===He);qe&&t&&(T9(qe,t,y),bs.success(`${qe.title} data exported successfully!`))},he=He=>{if(!He)return null;let qe=String(He).trim();const rt=qe.match(/^[A-Za-z]+,\s*(.*)$/);rt&&(qe=rt[1]);let Ge=new Date(qe);if(!isNaN(Ge.getTime()))return Ge;const vt=qe.match(/^(\d{1,2})\s+([A-Za-z]+)\s+(\d{4})$/);if(vt){const[,fe,bt,ct]=vt;if(Ge=new Date(`${bt} ${fe}, ${ct}`),!isNaN(Ge.getTime()))return Ge}const Ve=qe.match(/^(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})$/);if(Ve){const[,fe,bt,ct]=Ve,$e=re=>re.padStart(2,"0");if(Ge=new Date(`${ct}-${$e(bt)}-${$e(fe)}`),!isNaN(Ge.getTime()))return Ge}return null};new Date().setHours(0,0,0,0);const Le=(e||[]).filter(He=>!He.isArchived).sort((He,qe)=>{const rt=he(He.date),Ge=he(qe.date);return!rt&&!Ge?0:rt?Ge?rt.getTime()-Ge.getTime():-1:1}),Oe=(e||[]).filter(He=>He.isArchived).sort((He,qe)=>{const rt=he(He.date),Ge=he(qe.date);return!rt&&!Ge?0:rt?Ge?((Ge==null?void 0:Ge.getTime())||0)-((rt==null?void 0:rt.getTime())||0):-1:1});return f?m.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),m.jsx("p",{className:"text-xl font-semibold text-gray-700",children:"Loading Dashboard..."}),m.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"This may take a few seconds..."}),m.jsx("button",{onClick:()=>{console.log(" Manual refresh triggered"),x(!1),J()},className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Refresh Dashboard"})]})}):m.jsxs("div",{className:"min-h-screen bg-gray-50",children:[m.jsx(LD,{selectedTimeframe:y,selectedEvent:b,events:e||[],activeTab:C,onTimeframeChange:A,onEventChange:P,onTabChange:_,onRefresh:J}),m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[C==="analytics"&&m.jsx(m.Fragment,{children:b!=="all"?m.jsx(FD,{events:e||[],orders:t||[],selectedEvent:b,onExportEventData:xe}):m.jsxs(m.Fragment,{children:[m.jsx(PD,{stats:u,onExportAll:de,quickEventButtons:m.jsx(MD,{creatingEvents:I,onCreateEvent:V})}),m.jsx(jD,{stats:u,events:e||[]}),m.jsx(RD,{orders:(u==null?void 0:u.recentOrders)||[],events:e||[]})]})}),C==="events"&&m.jsx(OD,{currentEvents:Le,archivedEvents:Oe,onAddEvent:pe,onEditEvent:ge,onArchiveToggle:Se,onDeleteEvent:ue,onGuestlist:_e}),C==="orders"&&m.jsx(DD,{orders:t||[],events:e||[]})]}),k&&m.jsx(kD,{event:M,onClose:()=>{R(!1),ne(null),J()}}),m.jsx(BD,{confirm:U,onClose:()=>K(null),onConfirm:async()=>{U&&(U.type==="delete"?await s(U.event.id):await o(U.event.id,!U.event.isArchived),K(null))}}),te&&X&&m.jsx(C9,{event:X,onClose:()=>{be(!1),Q(null)},onSuccess:Me,onManageGuestlists:()=>{be(!1),q(!0)}}),$&&X&&m.jsx(E9,{event:X,onClose:()=>{q(!1),Q(null)},onCreateNew:()=>{q(!1),be(!0)}})]})};var S6="basil",k9=function(t){return t===3?"v3":t},N6="https://js.stripe.com",L9="".concat(N6,"/").concat(S6,"/stripe.js"),P9=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,j9=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var O9=function(t){return P9.test(t)||j9.test(t)},D9=function(){for(var t=document.querySelectorAll('script[src^="'.concat(N6,'"]')),n=0;n<t.length;n++){var r=t[n];if(O9(r.src))return r}return null},K5=function(t){var n="",r=document.createElement("script");r.src="".concat(L9).concat(n);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(r),r},R9=function(t,n){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"7.8.0",startTime:n})},bd=null,Rf=null,Mf=null,M9=function(t){return function(n){t(new Error("Failed to load Stripe.js",{cause:n}))}},B9=function(t,n){return function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))}},F9=function(t){return bd!==null?bd:(bd=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var i=D9();if(!(i&&t)){if(!i)i=K5(t);else if(i&&Mf!==null&&Rf!==null){var s;i.removeEventListener("load",Mf),i.removeEventListener("error",Rf),(s=i.parentNode)===null||s===void 0||s.removeChild(i),i=K5(t)}}Mf=B9(n,r),Rf=M9(r),i.addEventListener("load",Mf),i.addEventListener("error",Rf)}catch(o){r(o);return}}),bd.catch(function(n){return bd=null,Promise.reject(n)}))},U9=function(t,n,r){if(t===null)return null;var i=n[0],s=i.match(/^pk_test/),o=k9(t.version),u=S6;s&&o!==u&&console.warn("Stripe.js@".concat(o," was loaded on the page, but @stripe/stripe-js@").concat("7.8.0"," expected Stripe.js@").concat(u,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var d=t.apply(void 0,n);return R9(d,r),d},Ad,C6=!1,E6=function(){return Ad||(Ad=F9(null).catch(function(t){return Ad=null,Promise.reject(t)}),Ad)};Promise.resolve().then(function(){return E6()}).catch(function(e){C6||console.warn(e)});var V9=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];C6=!0;var i=Date.now();return E6().then(function(s){return U9(s,n,i)})},_6={exports:{}},z9="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",H9=z9,q9=H9;function T6(){}function I6(){}I6.resetWarningCache=T6;var W9=function(){function e(r,i,s,o,u,d){if(d!==q9){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:I6,resetWarningCache:T6};return n.PropTypes=n,n};_6.exports=W9();var G9=_6.exports;const ur=i1(G9);function Z5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Q5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Z5(Object(n),!0).forEach(function(r){k6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function a0(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a0=function(t){return typeof t}:a0=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a0(e)}function k6(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $9(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Y9(e,t){if(e==null)return{};var n=$9(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function L6(e,t){return X9(e)||K9(e,t)||Z9(e,t)||Q9()}function X9(e){if(Array.isArray(e))return e}function K9(e,t){var n=e&&(typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"]);if(n!=null){var r=[],i=!0,s=!1,o,u;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(r.push(o.value),!(t&&r.length===t));i=!0);}catch(d){s=!0,u=d}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw u}}return r}}function Z9(e,t){if(e){if(typeof e=="string")return J5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J5(e,t)}}function J5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Q9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var xs=function(t,n,r){var i=!!r,s=Wt.useRef(r);Wt.useEffect(function(){s.current=r},[r]),Wt.useEffect(function(){if(!i||!t)return function(){};var o=function(){s.current&&s.current.apply(s,arguments)};return t.on(n,o),function(){t.off(n,o)}},[i,n,t,s])},e2=function(t){var n=Wt.useRef(t);return Wt.useEffect(function(){n.current=t},[t]),n.current},Uu=function(t){return t!==null&&a0(t)==="object"},J9=function(t){return Uu(t)&&typeof t.then=="function"},eR=function(t){return Uu(t)&&typeof t.elements=="function"&&typeof t.createToken=="function"&&typeof t.createPaymentMethod=="function"&&typeof t.confirmCardPayment=="function"},eb="[object Object]",tR=function e(t,n){if(!Uu(t)||!Uu(n))return t===n;var r=Array.isArray(t),i=Array.isArray(n);if(r!==i)return!1;var s=Object.prototype.toString.call(t)===eb,o=Object.prototype.toString.call(n)===eb;if(s!==o)return!1;if(!s&&!r)return t===n;var u=Object.keys(t),d=Object.keys(n);if(u.length!==d.length)return!1;for(var f={},x=0;x<u.length;x+=1)f[u[x]]=!0;for(var y=0;y<d.length;y+=1)f[d[y]]=!0;var A=Object.keys(f);if(A.length!==u.length)return!1;var b=t,P=n,I=function(C){return e(b[C],P[C])};return A.every(I)},P6=function(t,n,r){return Uu(t)?Object.keys(t).reduce(function(i,s){var o=!Uu(n)||!tR(t[s],n[s]);return r.includes(s)?(o&&console.warn("Unsupported prop change: options.".concat(s," is not a mutable property.")),i):o?Q5(Q5({},i||{}),{},k6({},s,t[s])):i},null):null},j6="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",tb=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:j6;if(t===null||eR(t))return t;throw new Error(n)},nR=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:j6;if(J9(t))return{tag:"async",stripePromise:Promise.resolve(t).then(function(i){return tb(i,n)})};var r=tb(t,n);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},rR=function(t){!t||!t._registerWrapper||!t.registerAppInfo||(t._registerWrapper({name:"react-stripe-js",version:"3.9.0"}),t.registerAppInfo({name:"react-stripe-js",version:"3.9.0",url:"https://stripe.com/docs/stripe-js/react"}))},H1=Wt.createContext(null);H1.displayName="ElementsContext";var O6=function(t,n){if(!t)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return t},D6=function(t){var n=t.stripe,r=t.options,i=t.children,s=Wt.useMemo(function(){return nR(n)},[n]),o=Wt.useState(function(){return{stripe:s.tag==="sync"?s.stripe:null,elements:s.tag==="sync"?s.stripe.elements(r):null}}),u=L6(o,2),d=u[0],f=u[1];Wt.useEffect(function(){var A=!0,b=function(I){f(function(j){return j.stripe?j:{stripe:I,elements:I.elements(r)}})};return s.tag==="async"&&!d.stripe?s.stripePromise.then(function(P){P&&A&&b(P)}):s.tag==="sync"&&!d.stripe&&b(s.stripe),function(){A=!1}},[s,d,r]);var x=e2(n);Wt.useEffect(function(){x!==null&&x!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[x,n]);var y=e2(r);return Wt.useEffect(function(){if(d.elements){var A=P6(r,y,["clientSecret","fonts"]);A&&d.elements.update(A)}},[r,y,d.elements]),Wt.useEffect(function(){rR(d.stripe)},[d.stripe]),Wt.createElement(H1.Provider,{value:d},i)};D6.propTypes={stripe:ur.any,options:ur.object};var iR=function(t){var n=Wt.useContext(H1);return O6(n,t)},sR=function(){var t=iR("calls useElements()"),n=t.elements;return n};ur.func.isRequired;var R6=Wt.createContext(null);R6.displayName="CheckoutSdkContext";var aR=function(t,n){if(!t)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(n," in an <CheckoutProvider> provider."));return t},oR=Wt.createContext(null);oR.displayName="CheckoutContext";ur.any,ur.shape({fetchClientSecret:ur.func.isRequired,elementsOptions:ur.object}).isRequired;var t2=function(t){var n=Wt.useContext(R6),r=Wt.useContext(H1);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(t," in both <CheckoutProvider> and <Elements> providers."));return n?aR(n,t):O6(r,t)},lR=["mode"],cR=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},Or=function(t,n){var r="".concat(cR(t),"Element"),i=function(d){var f=d.id,x=d.className,y=d.options,A=y===void 0?{}:y,b=d.onBlur,P=d.onFocus,I=d.onReady,j=d.onChange,C=d.onEscape,_=d.onClick,k=d.onLoadError,R=d.onLoaderStart,M=d.onNetworksChange,ne=d.onConfirm,U=d.onCancel,K=d.onShippingAddressChange,te=d.onShippingRateChange,be=t2("mounts <".concat(r,">")),$="elements"in be?be.elements:null,q="checkoutSdk"in be?be.checkoutSdk:null,X=Wt.useState(null),Q=L6(X,2),J=Q[0],pe=Q[1],ge=Wt.useRef(null),ue=Wt.useRef(null);xs(J,"blur",b),xs(J,"focus",P),xs(J,"escape",C),xs(J,"click",_),xs(J,"loaderror",k),xs(J,"loaderstart",R),xs(J,"networkschange",M),xs(J,"confirm",ne),xs(J,"cancel",U),xs(J,"shippingaddresschange",K),xs(J,"shippingratechange",te),xs(J,"change",j);var Se;I&&(t==="expressCheckout"?Se=I:Se=function(){I(J)}),xs(J,"ready",Se),Wt.useLayoutEffect(function(){if(ge.current===null&&ue.current!==null&&($||q)){var Me=null;if(q)switch(t){case"payment":Me=q.createPaymentElement(A);break;case"address":if("mode"in A){var V=A.mode,se=Y9(A,lR);if(V==="shipping")Me=q.createShippingAddressElement(se);else if(V==="billing")Me=q.createBillingAddressElement(se);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":Me=q.createExpressCheckoutElement(A);break;case"currencySelector":Me=q.createCurrencySelectorElement();break;case"taxId":Me=q.createTaxIdElement(A);break;default:throw new Error("Invalid Element type ".concat(r,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else $&&(Me=$.create(t,A));ge.current=Me,pe(Me),Me&&Me.mount(ue.current)}},[$,q,A]);var _e=e2(A);return Wt.useEffect(function(){if(ge.current){var Me=P6(A,_e,["paymentRequest"]);Me&&"update"in ge.current&&ge.current.update(Me)}},[A,_e]),Wt.useLayoutEffect(function(){return function(){if(ge.current&&typeof ge.current.destroy=="function")try{ge.current.destroy(),ge.current=null}catch{}}},[]),Wt.createElement("div",{id:f,className:x,ref:ue})},s=function(d){t2("mounts <".concat(r,">"));var f=d.id,x=d.className;return Wt.createElement("div",{id:f,className:x})},o=n?s:i;return o.propTypes={id:ur.string,className:ur.string,onChange:ur.func,onBlur:ur.func,onFocus:ur.func,onReady:ur.func,onEscape:ur.func,onClick:ur.func,onLoadError:ur.func,onLoaderStart:ur.func,onNetworksChange:ur.func,onConfirm:ur.func,onCancel:ur.func,onShippingAddressChange:ur.func,onShippingRateChange:ur.func,options:ur.object},o.displayName=r,o.__elementType=t,o},Dr=typeof window>"u",uR=Wt.createContext(null);uR.displayName="EmbeddedCheckoutProviderContext";var dR=function(){var t=t2("calls useStripe()"),n=t.stripe;return n};Or("auBankAccount",Dr);var nb=Or("card",Dr);Or("cardNumber",Dr);Or("cardExpiry",Dr);Or("cardCvc",Dr);Or("fpxBank",Dr);Or("iban",Dr);Or("idealBank",Dr);Or("p24Bank",Dr);Or("epsBank",Dr);Or("payment",Dr);Or("expressCheckout",Dr);Or("currencySelector",Dr);Or("paymentRequestButton",Dr);Or("linkAuthentication",Dr);Or("address",Dr);Or("shippingAddress",Dr);Or("paymentMethodMessaging",Dr);Or("affirmMessage",Dr);Or("afterpayClearpayMessage",Dr);Or("taxId",Dr);const hR=V9("pk_test_51OyBk9IgkIAGwv6wTnbqfLaivBQ0wYCltGf0gS4yeEZpxkD1f5jKEwarmr294R0LXNEzEMNxHuCKLRpMH8DYgaWD00g8BPRDAG"),fR=({event:e,onClose:t,onSuccess:n})=>{const r=dR(),i=sR(),[s,o]=me.useState([]),[u,d]=me.useState({name:"",email:""}),[f,x]=me.useState(!1),[y,A]=me.useState(null);me.useEffect(()=>{if(console.log("Event ticket tiers:",e.ticketTiers),e.ticketTiers&&e.ticketTiers.length>0){const k=[...e.ticketTiers].sort((R,M)=>R.price-M.price).map(R=>({tierId:R.id,tier:R,quantity:0}));o(k)}},[e]);const b=(_,k)=>{o(R=>R.map(M=>M.tierId===_?{...M,quantity:Math.max(0,k)}:M))},P=()=>s.reduce((_,k)=>_+k.tier.price*k.quantity,0),I=()=>s.reduce((_,k)=>_+k.quantity,0),j=async _=>{var k;if(_.preventDefault(),!r||!i){A("Stripe has not loaded yet. Please try again.");return}if(I()===0){A("Please select at least one ticket.");return}if(!u.name||!u.email){A("Please fill in your name and email.");return}x(!0),A(null);try{const R=await fetch("/api/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventId:e.id,tickets:s.filter(K=>K.quantity>0),customerInfo:u,totalAmount:P()})});if(!R.ok)throw new Error("Failed to create payment intent");const{clientSecret:M}=await R.json(),{error:ne,paymentIntent:U}=await r.confirmCardPayment(M,{payment_method:{card:i.getElement(nb),billing_details:{name:u.name,email:u.email}}});if(ne){A(ne.message||"Payment failed");return}if(U.status==="succeeded"){const K=await fetch("/api/confirm-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentIntentId:U.id,eventId:e.id,tickets:s.filter(te=>te.quantity>0),customerInfo:u,totalAmount:P()})});if(K.ok){const te=await K.json(),be={id:((k=te.order)==null?void 0:k.id)||`order_${Date.now()}`,eventId:e.id,userId:u.email,stripePaymentIntentId:te.paymentIntentId,status:"completed",totalAmount:P(),currency:"gbp",tickets:s.filter($=>$.quantity>0).map($=>{var q;return{id:`ticket_${Date.now()}_${$.tierId}`,orderId:((q=te.order)==null?void 0:q.id)||`order_${Date.now()}`,ticketTierId:$.tierId,quantity:$.quantity,unitPrice:$.tier.price,totalPrice:$.tier.price*$.quantity}}),customerEmail:u.email,customerName:u.name,createdAt:new Date,updatedAt:new Date};n(be)}}}catch(R){A(R instanceof Error?R.message:"An error occurred")}finally{x(!1)}},C=(e.ticketTiers||[]).filter(_=>_.isActive!==!1&&_.capacity>_.soldCount);return m.jsxs("form",{onSubmit:j,className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Tickets"}),C.length===0&&m.jsx("div",{className:"mb-4 text-sm text-red-600",children:"This event is sold out."}),m.jsx("div",{className:"space-y-4",children:(e.ticketTiers||[]).sort((_,k)=>_.price-k.price).map(_=>{const k=s.find(ne=>ne.tierId===_.id)||{quantity:0},R=_.capacity-_.soldCount,M=R<=0||_.isActive===!1;return m.jsxs("div",{className:"border rounded-lg p-4",children:[m.jsxs("div",{className:"flex justify-between items-start mb-3",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-gray-900",children:_.name}),m.jsx("p",{className:"text-sm text-gray-600",children:_.description}),_.benefits&&_.benefits.length>0&&m.jsx("div",{className:"mt-2",children:_.benefits.map((ne,U)=>m.jsxs("div",{className:"text-sm text-green-600 flex items-center gap-1",children:[m.jsx(bo,{className:"h-3 w-3"}),ne]},U))})]}),m.jsx("div",{className:"text-right",children:M?m.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-red-100 text-red-700",children:"Sold out"}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:["",(_.price/100).toFixed(2)]}),_.originalPrice&&_.originalPrice>_.price&&m.jsxs("div",{className:"text-sm text-gray-400 line-through",children:["",(_.originalPrice/100).toFixed(2)]}),m.jsxs("div",{className:"text-sm text-gray-500",children:[R," available"]})]})})]}),M?m.jsx("div",{className:"text-sm text-gray-500",children:"This tier is currently unavailable."}):m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("button",{type:"button",onClick:()=>b(_.id,(k.quantity||0)-1),className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50",children:"-"}),m.jsx("span",{className:"w-12 text-center font-medium",children:k.quantity||0}),m.jsx("button",{type:"button",onClick:()=>b(_.id,(k.quantity||0)+1),disabled:(k.quantity||0)>=R,className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"+"})]}),m.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:["",(_.price*(k.quantity||0)/100).toFixed(2)]})]})]},_.id)})})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Information"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsx("input",{type:"text",placeholder:"Full Name",value:u.name,onChange:_=>d({...u,name:_.target.value}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),m.jsx("input",{type:"email",placeholder:"Email Address",value:u.email,onChange:_=>d({...u,email:_.target.value}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment"}),m.jsx("div",{className:"border rounded-lg p-4",children:m.jsx(nb,{options:{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})})]}),m.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Order Summary"}),m.jsxs("div",{className:"space-y-2",children:[s.filter(_=>_.quantity>0).map(_=>m.jsxs("div",{className:"flex justify-between text-sm",children:[m.jsxs("span",{children:[_.quantity,"x ",_.tier.name]}),m.jsxs("span",{children:["",(_.tier.price*_.quantity/100).toFixed(2)]})]},_.tierId)),m.jsx("div",{className:"border-t pt-2 mt-2",children:m.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[m.jsx("span",{children:"Total"}),m.jsxs("span",{children:["",(P()/100).toFixed(2)]})]})})]})]}),y&&m.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:m.jsx("p",{className:"text-red-800",children:y})}),m.jsx("button",{type:"submit",disabled:!r||f||I()===0,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:f?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),m.jsx("span",{className:"ml-2",children:"Processing Payment..."})]}):m.jsxs(m.Fragment,{children:[m.jsx(W0,{className:"h-5 w-5"}),m.jsxs("span",{className:"ml-2",children:["Pay ",(P()/100).toFixed(2)]})]})}),f&&m.jsx(lt.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 bg-white bg-opacity-90 flex items-center justify-center rounded-lg",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),m.jsx("p",{className:"text-lg font-semibold text-gray-700",children:"Processing your payment..."}),m.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Please don't close this window"})]})}),m.jsx("div",{className:"text-center text-sm text-gray-500",children:m.jsxs("div",{className:"flex items-center justify-center gap-2",children:[m.jsx(W0,{className:"h-4 w-4"}),"Secure payment powered by Stripe"]})})]})},pR=({event:e,onClose:t,onSuccess:n})=>m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:m.jsxs(lt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[m.jsxs("div",{className:"p-6 border-b",children:[m.jsxs("div",{className:"mb-4",children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Step 1 of 3"}),m.jsx("span",{className:"text-sm text-gray-500",children:"Select Tickets"})]}),m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:m.jsx(lt.div,{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",initial:{width:0},animate:{width:"33%"}})})]}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Buy Tickets"}),m.jsx("p",{className:"text-gray-600",children:e.title})]}),m.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:m.jsx(Ic,{className:"h-6 w-6"})})]})]}),m.jsx("div",{className:"p-6",children:m.jsx(D6,{stripe:hR,children:m.jsx(fR,{event:e,onClose:t,onSuccess:n})})})]})});function Tn(e){"@babel/helpers - typeof";return Tn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tn(e)}var ji=Uint8Array,Ns=Uint16Array,Xx=Int32Array,q1=new ji([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),W1=new ji([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),n2=new ji([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),M6=function(e,t){for(var n=new Ns(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new Xx(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},B6=M6(q1,2),F6=B6.b,r2=B6.r;F6[28]=258,r2[258]=28;var U6=M6(W1,0),gR=U6.b,rb=U6.r,i2=new Ns(32768);for(var Zn=0;Zn<32768;++Zn){var qo=(Zn&43690)>>1|(Zn&21845)<<1;qo=(qo&52428)>>2|(qo&13107)<<2,qo=(qo&61680)>>4|(qo&3855)<<4,i2[Zn]=((qo&65280)>>8|(qo&255)<<8)>>1}var Ua=function(e,t,n){for(var r=e.length,i=0,s=new Ns(t);i<r;++i)e[i]&&++s[e[i]-1];var o=new Ns(t);for(i=1;i<t;++i)o[i]=o[i-1]+s[i-1]<<1;var u;if(n){u=new Ns(1<<t);var d=15-t;for(i=0;i<r;++i)if(e[i])for(var f=i<<4|e[i],x=t-e[i],y=o[e[i]-1]++<<x,A=y|(1<<x)-1;y<=A;++y)u[i2[y]>>d]=f}else for(u=new Ns(r),i=0;i<r;++i)e[i]&&(u[i]=i2[o[e[i]-1]++]>>15-e[i]);return u},Al=new ji(288);for(var Zn=0;Zn<144;++Zn)Al[Zn]=8;for(var Zn=144;Zn<256;++Zn)Al[Zn]=9;for(var Zn=256;Zn<280;++Zn)Al[Zn]=7;for(var Zn=280;Zn<288;++Zn)Al[Zn]=8;var Ah=new ji(32);for(var Zn=0;Zn<32;++Zn)Ah[Zn]=5;var mR=Ua(Al,9,0),xR=Ua(Al,9,1),yR=Ua(Ah,5,0),vR=Ua(Ah,5,1),cg=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},ia=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},ug=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},Kx=function(e){return(e+7)/8|0},V6=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new ji(e.subarray(t,n))},wR=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],la=function(e,t,n){var r=new Error(t||wR[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,la),!n)throw r;return r},bR=function(e,t,n,r){var i=e.length,s=0;if(!i||t.f&&!t.l)return n||new ji(0);var o=!n,u=o||t.i!=2,d=t.i;o&&(n=new ji(i*3));var f=function(qe){var rt=n.length;if(qe>rt){var Ge=new ji(Math.max(rt*2,qe));Ge.set(n),n=Ge}},x=t.f||0,y=t.p||0,A=t.b||0,b=t.l,P=t.d,I=t.m,j=t.n,C=i*8;do{if(!b){x=ia(e,y,1);var _=ia(e,y+1,3);if(y+=3,_)if(_==1)b=xR,P=vR,I=9,j=5;else if(_==2){var ne=ia(e,y,31)+257,U=ia(e,y+10,15)+4,K=ne+ia(e,y+5,31)+1;y+=14;for(var te=new ji(K),be=new ji(19),$=0;$<U;++$)be[n2[$]]=ia(e,y+$*3,7);y+=U*3;for(var q=cg(be),X=(1<<q)-1,Q=Ua(be,q,1),$=0;$<K;){var J=Q[ia(e,y,X)];y+=J&15;var k=J>>4;if(k<16)te[$++]=k;else{var pe=0,ge=0;for(k==16?(ge=3+ia(e,y,3),y+=2,pe=te[$-1]):k==17?(ge=3+ia(e,y,7),y+=3):k==18&&(ge=11+ia(e,y,127),y+=7);ge--;)te[$++]=pe}}var ue=te.subarray(0,ne),Se=te.subarray(ne);I=cg(ue),j=cg(Se),b=Ua(ue,I,1),P=Ua(Se,j,1)}else la(1);else{var k=Kx(y)+4,R=e[k-4]|e[k-3]<<8,M=k+R;if(M>i){d&&la(0);break}u&&f(A+R),n.set(e.subarray(k,M),A),t.b=A+=R,t.p=y=M*8,t.f=x;continue}if(y>C){d&&la(0);break}}u&&f(A+131072);for(var _e=(1<<I)-1,Me=(1<<j)-1,V=y;;V=y){var pe=b[ug(e,y)&_e],se=pe>>4;if(y+=pe&15,y>C){d&&la(0);break}if(pe||la(2),se<256)n[A++]=se;else if(se==256){V=y,b=null;break}else{var de=se-254;if(se>264){var $=se-257,xe=q1[$];de=ia(e,y,(1<<xe)-1)+F6[$],y+=xe}var he=P[ug(e,y)&Me],Pe=he>>4;he||la(3),y+=he&15;var Se=gR[Pe];if(Pe>3){var xe=W1[Pe];Se+=ug(e,y)&(1<<xe)-1,y+=xe}if(y>C){d&&la(0);break}u&&f(A+131072);var Le=A+de;if(A<Se){var Oe=s-Se,He=Math.min(Se,Le);for(Oe+A<0&&la(3);A<He;++A)n[A]=r[Oe+A]}for(;A<Le;++A)n[A]=n[A-Se]}}t.l=b,t.p=V,t.b=A,t.f=x,b&&(x=1,t.m=I,t.d=P,t.n=j)}while(!x);return A!=n.length&&o?V6(n,0,A):n.subarray(0,A)},no=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},Sd=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},dg=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,s=n.slice();if(!i)return{t:H6,l:0};if(i==1){var o=new ji(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(M,ne){return M.f-ne.f}),n.push({s:-1,f:25001});var u=n[0],d=n[1],f=0,x=1,y=2;for(n[0]={s:-1,f:u.f+d.f,l:u,r:d};x!=i-1;)u=n[n[f].f<n[y].f?f++:y++],d=n[f!=x&&n[f].f<n[y].f?f++:y++],n[x++]={s:-1,f:u.f+d.f,l:u,r:d};for(var A=s[0].s,r=1;r<i;++r)s[r].s>A&&(A=s[r].s);var b=new Ns(A+1),P=s2(n[x-1],b,0);if(P>t){var r=0,I=0,j=P-t,C=1<<j;for(s.sort(function(ne,U){return b[U.s]-b[ne.s]||ne.f-U.f});r<i;++r){var _=s[r].s;if(b[_]>t)I+=C-(1<<P-b[_]),b[_]=t;else break}for(I>>=j;I>0;){var k=s[r].s;b[k]<t?I-=1<<t-b[k]++-1:++r}for(;r>=0&&I;--r){var R=s[r].s;b[R]==t&&(--b[R],++I)}P=t}return{t:new ji(b),l:P}},s2=function(e,t,n){return e.s==-1?Math.max(s2(e.l,t,n+1),s2(e.r,t,n+1)):t[e.s]=n},ib=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Ns(++t),r=0,i=e[0],s=1,o=function(d){n[r++]=d},u=1;u<=t;++u)if(e[u]==i&&u!=t)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=e[u]}return{c:n.subarray(0,r),n:t}},Nd=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},z6=function(e,t,n){var r=n.length,i=Kx(t+2);e[i]=r&255,e[i+1]=r>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var s=0;s<r;++s)e[i+s+4]=n[s];return(i+4+r)*8},sb=function(e,t,n,r,i,s,o,u,d,f,x){no(t,x++,n),++i[256];for(var y=dg(i,15),A=y.t,b=y.l,P=dg(s,15),I=P.t,j=P.l,C=ib(A),_=C.c,k=C.n,R=ib(I),M=R.c,ne=R.n,U=new Ns(19),K=0;K<_.length;++K)++U[_[K]&31];for(var K=0;K<M.length;++K)++U[M[K]&31];for(var te=dg(U,7),be=te.t,$=te.l,q=19;q>4&&!be[n2[q-1]];--q);var X=f+5<<3,Q=Nd(i,Al)+Nd(s,Ah)+o,J=Nd(i,A)+Nd(s,I)+o+14+3*q+Nd(U,be)+2*U[16]+3*U[17]+7*U[18];if(d>=0&&X<=Q&&X<=J)return z6(t,x,e.subarray(d,d+f));var pe,ge,ue,Se;if(no(t,x,1+(J<Q)),x+=2,J<Q){pe=Ua(A,b,0),ge=A,ue=Ua(I,j,0),Se=I;var _e=Ua(be,$,0);no(t,x,k-257),no(t,x+5,ne-1),no(t,x+10,q-4),x+=14;for(var K=0;K<q;++K)no(t,x+3*K,be[n2[K]]);x+=3*q;for(var Me=[_,M],V=0;V<2;++V)for(var se=Me[V],K=0;K<se.length;++K){var de=se[K]&31;no(t,x,_e[de]),x+=be[de],de>15&&(no(t,x,se[K]>>5&127),x+=se[K]>>12)}}else pe=mR,ge=Al,ue=yR,Se=Ah;for(var K=0;K<u;++K){var xe=r[K];if(xe>255){var de=xe>>18&31;Sd(t,x,pe[de+257]),x+=ge[de+257],de>7&&(no(t,x,xe>>23&31),x+=q1[de]);var he=xe&31;Sd(t,x,ue[he]),x+=Se[he],he>3&&(Sd(t,x,xe>>5&8191),x+=W1[he])}else Sd(t,x,pe[xe]),x+=ge[xe]}return Sd(t,x,pe[256]),x+ge[256]},AR=new Xx([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),H6=new ji(0),SR=function(e,t,n,r,i,s){var o=s.z||e.length,u=new ji(r+o+5*(1+Math.ceil(o/7e3))+i),d=u.subarray(r,u.length-i),f=s.l,x=(s.r||0)&7;if(t){x&&(d[0]=s.r>>3);for(var y=AR[t-1],A=y>>13,b=y&8191,P=(1<<n)-1,I=s.p||new Ns(32768),j=s.h||new Ns(P+1),C=Math.ceil(n/3),_=2*C,k=function(vt){return(e[vt]^e[vt+1]<<C^e[vt+2]<<_)&P},R=new Xx(25e3),M=new Ns(288),ne=new Ns(32),U=0,K=0,te=s.i||0,be=0,$=s.w||0,q=0;te+2<o;++te){var X=k(te),Q=te&32767,J=j[X];if(I[Q]=J,j[X]=Q,$<=te){var pe=o-te;if((U>7e3||be>24576)&&(pe>423||!f)){x=sb(e,d,0,R,M,ne,K,be,q,te-q,x),be=U=K=0,q=te;for(var ge=0;ge<286;++ge)M[ge]=0;for(var ge=0;ge<30;++ge)ne[ge]=0}var ue=2,Se=0,_e=b,Me=Q-J&32767;if(pe>2&&X==k(te-Me))for(var V=Math.min(A,pe)-1,se=Math.min(32767,te),de=Math.min(258,pe);Me<=se&&--_e&&Q!=J;){if(e[te+ue]==e[te+ue-Me]){for(var xe=0;xe<de&&e[te+xe]==e[te+xe-Me];++xe);if(xe>ue){if(ue=xe,Se=Me,xe>V)break;for(var he=Math.min(Me,xe-2),Pe=0,ge=0;ge<he;++ge){var Le=te-Me+ge&32767,Oe=I[Le],He=Le-Oe&32767;He>Pe&&(Pe=He,J=Le)}}}Q=J,J=I[Q],Me+=Q-J&32767}if(Se){R[be++]=268435456|r2[ue]<<18|rb[Se];var qe=r2[ue]&31,rt=rb[Se]&31;K+=q1[qe]+W1[rt],++M[257+qe],++ne[rt],$=te+ue,++U}else R[be++]=e[te],++M[e[te]]}}for(te=Math.max(te,$);te<o;++te)R[be++]=e[te],++M[e[te]];x=sb(e,d,f,R,M,ne,K,be,q,te-q,x),f||(s.r=x&7|d[x/8|0]<<3,x-=7,s.h=j,s.p=I,s.i=te,s.w=$)}else{for(var te=s.w||0;te<o+f;te+=65535){var Ge=te+65535;Ge>=o&&(d[x/8|0]=f,Ge=o),x=z6(d,x+1,e.subarray(te,Ge))}s.i=o}return V6(u,0,r+Kx(x)+i)},q6=function(){var e=1,t=0;return{p:function(n){for(var r=e,i=t,s=n.length|0,o=0;o!=s;){for(var u=Math.min(o+2655,s);o<u;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}e=r,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},NR=function(e,t,n,r,i){if(!i&&(i={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),o=new ji(s.length+e.length);o.set(s),o.set(e,s.length),e=o,i.w=s.length}return SR(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,i)},W6=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},CR=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=q6();i.p(t.dictionary),W6(e,2,i.d())}},ER=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&la(6,"invalid zlib data"),(e[1]>>5&1)==1&&la(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function a2(e,t){t||(t={});var n=q6();n.p(e);var r=NR(e,t,t.dictionary?6:2,4);return CR(r,t),W6(r,r.length-4,n.d()),r}function _R(e,t){return bR(e.subarray(ER(e),-4),{i:2},t,t)}var TR=typeof TextDecoder<"u"&&new TextDecoder,IR=0;try{TR.decode(H6,{stream:!0}),IR=1}catch{}var Ft=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function hg(){Ft.console&&typeof Ft.console.log=="function"&&Ft.console.log.apply(Ft.console,arguments)}var Dn={log:hg,warn:function(e){Ft.console&&(typeof Ft.console.warn=="function"?Ft.console.warn.apply(Ft.console,arguments):hg.call(null,arguments))},error:function(e){Ft.console&&(typeof Ft.console.error=="function"?Ft.console.error.apply(Ft.console,arguments):hg(e))}};function fg(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){ic(r.response,t,n)},r.onerror=function(){Dn.error("could not download file")},r.send()}function ab(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Bf(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Kd,o2,ic=Ft.saveAs||((typeof window>"u"?"undefined":Tn(window))!=="object"||window!==Ft?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=Ft.URL||Ft.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?ab(i.href)?fg(e,t,n):Bf(i,i.target="_blank"):Bf(i)):(i.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Bf(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(ab(e))fg(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){Bf(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Tn(s)!=="object"&&(Dn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return fg(e,t,n);var i=e.type==="application/octet-stream",s=/constructor/i.test(Ft.HTMLElement)||Ft.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Tn(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var x=u.result;x=o?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=x:location=x,r=null},u.readAsDataURL(e)}else{var d=Ft.URL||Ft.webkitURL,f=d.createObjectURL(e);r?r.location=f:location.href=f,r=null,setTimeout(function(){d.revokeObjectURL(f)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function G6(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(e);o&&(t=s(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),d=this.g.toString(16),f=this.b.toString(16);return u.length==1&&(u="0"+u),d.length==1&&(d="0"+d),f.length==1&&(f="0"+f),"#"+u+d+f}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function pg(e,t){var n=e[0],r=e[1],i=e[2],s=e[3];n=_i(n,r,i,s,t[0],7,-680876936),s=_i(s,n,r,i,t[1],12,-389564586),i=_i(i,s,n,r,t[2],17,606105819),r=_i(r,i,s,n,t[3],22,-1044525330),n=_i(n,r,i,s,t[4],7,-176418897),s=_i(s,n,r,i,t[5],12,1200080426),i=_i(i,s,n,r,t[6],17,-1473231341),r=_i(r,i,s,n,t[7],22,-45705983),n=_i(n,r,i,s,t[8],7,1770035416),s=_i(s,n,r,i,t[9],12,-1958414417),i=_i(i,s,n,r,t[10],17,-42063),r=_i(r,i,s,n,t[11],22,-1990404162),n=_i(n,r,i,s,t[12],7,1804603682),s=_i(s,n,r,i,t[13],12,-40341101),i=_i(i,s,n,r,t[14],17,-1502002290),n=Ti(n,r=_i(r,i,s,n,t[15],22,1236535329),i,s,t[1],5,-165796510),s=Ti(s,n,r,i,t[6],9,-1069501632),i=Ti(i,s,n,r,t[11],14,643717713),r=Ti(r,i,s,n,t[0],20,-373897302),n=Ti(n,r,i,s,t[5],5,-701558691),s=Ti(s,n,r,i,t[10],9,38016083),i=Ti(i,s,n,r,t[15],14,-660478335),r=Ti(r,i,s,n,t[4],20,-405537848),n=Ti(n,r,i,s,t[9],5,568446438),s=Ti(s,n,r,i,t[14],9,-1019803690),i=Ti(i,s,n,r,t[3],14,-187363961),r=Ti(r,i,s,n,t[8],20,1163531501),n=Ti(n,r,i,s,t[13],5,-1444681467),s=Ti(s,n,r,i,t[2],9,-51403784),i=Ti(i,s,n,r,t[7],14,1735328473),n=Ii(n,r=Ti(r,i,s,n,t[12],20,-1926607734),i,s,t[5],4,-378558),s=Ii(s,n,r,i,t[8],11,-2022574463),i=Ii(i,s,n,r,t[11],16,1839030562),r=Ii(r,i,s,n,t[14],23,-35309556),n=Ii(n,r,i,s,t[1],4,-1530992060),s=Ii(s,n,r,i,t[4],11,1272893353),i=Ii(i,s,n,r,t[7],16,-155497632),r=Ii(r,i,s,n,t[10],23,-1094730640),n=Ii(n,r,i,s,t[13],4,681279174),s=Ii(s,n,r,i,t[0],11,-358537222),i=Ii(i,s,n,r,t[3],16,-722521979),r=Ii(r,i,s,n,t[6],23,76029189),n=Ii(n,r,i,s,t[9],4,-640364487),s=Ii(s,n,r,i,t[12],11,-421815835),i=Ii(i,s,n,r,t[15],16,530742520),n=ki(n,r=Ii(r,i,s,n,t[2],23,-995338651),i,s,t[0],6,-198630844),s=ki(s,n,r,i,t[7],10,1126891415),i=ki(i,s,n,r,t[14],15,-1416354905),r=ki(r,i,s,n,t[5],21,-57434055),n=ki(n,r,i,s,t[12],6,1700485571),s=ki(s,n,r,i,t[3],10,-1894986606),i=ki(i,s,n,r,t[10],15,-1051523),r=ki(r,i,s,n,t[1],21,-2054922799),n=ki(n,r,i,s,t[8],6,1873313359),s=ki(s,n,r,i,t[15],10,-30611744),i=ki(i,s,n,r,t[6],15,-1560198380),r=ki(r,i,s,n,t[13],21,1309151649),n=ki(n,r,i,s,t[4],6,-145523070),s=ki(s,n,r,i,t[11],10,-1120210379),i=ki(i,s,n,r,t[2],15,718787259),r=ki(r,i,s,n,t[9],21,-343485551),e[0]=sl(n,e[0]),e[1]=sl(r,e[1]),e[2]=sl(i,e[2]),e[3]=sl(s,e[3])}function G1(e,t,n,r,i,s){return t=sl(sl(t,e),sl(r,s)),sl(t<<i|t>>>32-i,n)}function _i(e,t,n,r,i,s,o){return G1(t&n|~t&r,e,t,i,s,o)}function Ti(e,t,n,r,i,s,o){return G1(t&r|n&~r,e,t,i,s,o)}function Ii(e,t,n,r,i,s,o){return G1(t^n^r,e,t,i,s,o)}function ki(e,t,n,r,i,s,o){return G1(n^(t|~r),e,t,i,s,o)}function $6(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)pg(r,kR(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(pg(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*n,pg(r,i),r}function kR(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}Kd=Ft.atob.bind(Ft),o2=Ft.btoa.bind(Ft);var ob="0123456789abcdef".split("");function LR(e){for(var t="",n=0;n<4;n++)t+=ob[e>>8*n+4&15]+ob[e>>8*n&15];return t}function PR(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function l2(e){return $6(e).map(PR).join("")}var jR=function(e){for(var t=0;t<e.length;t++)e[t]=LR(e[t]);return e.join("")}($6("hello"))!="5d41402abc4b2a76b9719d911017c592";function sl(e,t){if(jR){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function c2(e,t){var n,r,i,s;if(e!==n){for(var o=(i=e,s=1+(256/e.length>>0),new Array(s+1).join(i)),u=[],d=0;d<256;d++)u[d]=d;var f=0;for(d=0;d<256;d++){var x=u[d];f=(f+x+o.charCodeAt(d))%256,u[d]=u[f],u[f]=x}n=e,r=u}else u=r;var y=t.length,A=0,b=0,P="";for(d=0;d<y;d++)b=(b+(x=u[A=(A+1)%256]))%256,u[A]=u[b],u[b]=x,o=u[(u[A]+u[b])%256],P+=String.fromCharCode(t.charCodeAt(d)^o);return P}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var lb={print:4,modify:8,copy:16,"annot-forms":32};function Jc(e,t,n,r){this.v=1,this.r=2;var i=192;e.forEach(function(u){if(lb.perm!==void 0)throw new Error("Invalid permission: "+u);i+=lb[u]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(t+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=l2(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=c2(this.encryptionKey,this.padding)}function eu(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var i=e.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?t+="#"+("0"+i.toString(16)).slice(-2):t+=e[r]}return t}function cb(e){if(Tn(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var s=Math.random().toString(35);return t[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in t[n]){var o=t[n][s];try{o[0].apply(e,r)}catch(u){Ft.console&&Dn.error("jsPDF PubSub Error",u.message,u)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function e1(e){if(!(this instanceof e1))return new e1(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function Y6(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function ac(e,t,n,r,i){if(!(this instanceof ac))return new ac(e,t,n,r,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,Y6.call(this,r,i)}function yu(e,t,n,r,i){if(!(this instanceof yu))return new yu(e,t,n,r,i);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,Y6.call(this,r,i)}function Rt(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],u=1,d=16,f="S",x=null;Tn(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,i=e.format||i,s=e.compress||e.compressPdf||s,(x=e.encryption||null)!==null&&(x.userPassword=x.userPassword||"",x.ownerPassword=x.ownerPassword||"",x.userPermissions=x.userPermissions||[]),u=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(d=e.floatPrecision),f=e.defaultPathOperation||"S"),o=e.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var y=e.putOnlyUsedFonts||!1,A={},b={internal:{},__private__:{}};b.__private__.PubSub=cb;var P="1.3",I=b.__private__.getPdfVersion=function(){return P};b.__private__.setPdfVersion=function(E){P=E};var j={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};b.__private__.getPageFormats=function(){return j};var C=b.__private__.getPageFormat=function(E){return j[E]};i=i||"a4";var _={COMPAT:"compat",ADVANCED:"advanced"},k=_.COMPAT;function R(){this.saveGraphicsState(),fe(new _t(dt,0,0,-dt,0,Si()*dt).toString()+" cm"),this.setFontSize(this.getFontSize()/dt),f="n",k=_.ADVANCED}function M(){this.restoreGraphicsState(),f="S",k=_.COMPAT}var ne=b.__private__.combineFontStyleAndFontWeight=function(E,H){if(E=="bold"&&H=="normal"||E=="bold"&&H==400||E=="normal"&&H=="italic"||E=="bold"&&H=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return H&&(E=H==400||H==="normal"?E==="italic"?"italic":"normal":H!=700&&H!=="bold"||E!=="normal"?(H==700?"bold":H)+""+E:"bold"),E};b.advancedAPI=function(E){var H=k===_.COMPAT;return H&&R.call(this),typeof E!="function"||(E(this),H&&M.call(this)),this},b.compatAPI=function(E){var H=k===_.ADVANCED;return H&&M.call(this),typeof E!="function"||(E(this),H&&R.call(this)),this},b.isAdvancedAPI=function(){return k===_.ADVANCED};var U,K=function(E){if(k!==_.ADVANCED)throw new Error(E+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},te=b.roundToPrecision=b.__private__.roundToPrecision=function(E,H){var ae=t||H;if(isNaN(E)||isNaN(ae))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return E.toFixed(ae).replace(/0+$/,"")};U=b.hpf=b.__private__.hpf=typeof d=="number"?function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.hpf");return te(E,d)}:d==="smart"?function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.hpf");return te(E,E>-1&&E<1?16:5)}:function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.hpf");return te(E,16)};var be=b.f2=b.__private__.f2=function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.f2");return te(E,2)},$=b.__private__.f3=function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.f3");return te(E,3)},q=b.scale=b.__private__.scale=function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.scale");return k===_.COMPAT?E*dt:k===_.ADVANCED?E:void 0},X=function(E){return k===_.COMPAT?Si()-E:k===_.ADVANCED?E:void 0},Q=function(E){return q(X(E))};b.__private__.setPrecision=b.setPrecision=function(E){typeof parseInt(E,10)=="number"&&(t=parseInt(E,10))};var J,pe="00000000000000000000000000000000",ge=b.__private__.getFileId=function(){return pe},ue=b.__private__.setFileId=function(E){return pe=E!==void 0&&/^[a-fA-F0-9]{32}$/.test(E)?E.toUpperCase():pe.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),x!==null&&(Cr=new Jc(x.userPermissions,x.userPassword,x.ownerPassword,pe)),pe};b.setFileId=function(E){return ue(E),this},b.getFileId=function(){return ge()};var Se=b.__private__.convertDateToPDFDate=function(E){var H=E.getTimezoneOffset(),ae=H<0?"+":"-",we=Math.floor(Math.abs(H/60)),ke=Math.abs(H%60),Xe=[ae,de(we),"'",de(ke),"'"].join("");return["D:",E.getFullYear(),de(E.getMonth()+1),de(E.getDate()),de(E.getHours()),de(E.getMinutes()),de(E.getSeconds()),Xe].join("")},_e=b.__private__.convertPDFDateToDate=function(E){var H=parseInt(E.substr(2,4),10),ae=parseInt(E.substr(6,2),10)-1,we=parseInt(E.substr(8,2),10),ke=parseInt(E.substr(10,2),10),Xe=parseInt(E.substr(12,2),10),tt=parseInt(E.substr(14,2),10);return new Date(H,ae,we,ke,Xe,tt,0)},Me=b.__private__.setCreationDate=function(E){var H;if(E===void 0&&(E=new Date),E instanceof Date)H=Se(E);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(E))throw new Error("Invalid argument passed to jsPDF.setCreationDate");H=E}return J=H},V=b.__private__.getCreationDate=function(E){var H=J;return E==="jsDate"&&(H=_e(J)),H};b.setCreationDate=function(E){return Me(E),this},b.getCreationDate=function(E){return V(E)};var se,de=b.__private__.padd2=function(E){return("0"+parseInt(E)).slice(-2)},xe=b.__private__.padd2Hex=function(E){return("00"+(E=E.toString())).substr(E.length)},he=0,Pe=[],Le=[],Oe=0,He=[],qe=[],rt=!1,Ge=Le,vt=function(){he=0,Oe=0,Le=[],Pe=[],He=[],vi=Ln(),Ri=Ln()};b.__private__.setCustomOutputDestination=function(E){rt=!0,Ge=E};var Ve=function(E){rt||(Ge=E)};b.__private__.resetCustomOutputDestination=function(){rt=!1,Ge=Le};var fe=b.__private__.out=function(E){return E=E.toString(),Oe+=E.length+1,Ge.push(E),Ge},bt=b.__private__.write=function(E){return fe(arguments.length===1?E.toString():Array.prototype.join.call(arguments," "))},ct=b.__private__.getArrayBuffer=function(E){for(var H=E.length,ae=new ArrayBuffer(H),we=new Uint8Array(ae);H--;)we[H]=E.charCodeAt(H);return ae},$e=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];b.__private__.getStandardFonts=function(){return $e};var re=e.fontSize||16;b.__private__.setFontSize=b.setFontSize=function(E){return re=k===_.ADVANCED?E/dt:E,this};var oe,ve=b.__private__.getFontSize=b.getFontSize=function(){return k===_.COMPAT?re:re*dt},ze=e.R2L||!1;b.__private__.setR2L=b.setR2L=function(E){return ze=E,this},b.__private__.getR2L=b.getR2L=function(){return ze};var Be,We=b.__private__.setZoomMode=function(E){var H=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(E))oe=E;else if(isNaN(E)){if(H.indexOf(E)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+E+'" is not recognized.');oe=E}else oe=parseInt(E,10)};b.__private__.getZoomMode=function(){return oe};var Qe,yt=b.__private__.setPageMode=function(E){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(E)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+E+'" is not recognized.');Be=E};b.__private__.getPageMode=function(){return Be};var xt=b.__private__.setLayoutMode=function(E){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(E)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+E+'" is not recognized.');Qe=E};b.__private__.getLayoutMode=function(){return Qe},b.__private__.setDisplayMode=b.setDisplayMode=function(E,H,ae){return We(E),xt(H),yt(ae),this};var ht={title:"",subject:"",author:"",keywords:"",creator:""};b.__private__.getDocumentProperty=function(E){if(Object.keys(ht).indexOf(E)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ht[E]},b.__private__.getDocumentProperties=function(){return ht},b.__private__.setDocumentProperties=b.setProperties=b.setDocumentProperties=function(E){for(var H in ht)ht.hasOwnProperty(H)&&E[H]&&(ht[H]=E[H]);return this},b.__private__.setDocumentProperty=function(E,H){if(Object.keys(ht).indexOf(E)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ht[E]=H};var Dt,dt,kn,Et,ot,Mt={},jt={},un=[],tn={},Ks={},qn={},$t={},ci=null,Wn=0,Vt=[],Xt=new cb(b),Zs=e.hotfixes||[],pn={},ui={},Di=[],_t=function E(H,ae,we,ke,Xe,tt){if(!(this instanceof E))return new E(H,ae,we,ke,Xe,tt);isNaN(H)&&(H=1),isNaN(ae)&&(ae=0),isNaN(we)&&(we=0),isNaN(ke)&&(ke=1),isNaN(Xe)&&(Xe=0),isNaN(tt)&&(tt=0),this._matrix=[H,ae,we,ke,Xe,tt]};Object.defineProperty(_t.prototype,"sx",{get:function(){return this._matrix[0]},set:function(E){this._matrix[0]=E}}),Object.defineProperty(_t.prototype,"shy",{get:function(){return this._matrix[1]},set:function(E){this._matrix[1]=E}}),Object.defineProperty(_t.prototype,"shx",{get:function(){return this._matrix[2]},set:function(E){this._matrix[2]=E}}),Object.defineProperty(_t.prototype,"sy",{get:function(){return this._matrix[3]},set:function(E){this._matrix[3]=E}}),Object.defineProperty(_t.prototype,"tx",{get:function(){return this._matrix[4]},set:function(E){this._matrix[4]=E}}),Object.defineProperty(_t.prototype,"ty",{get:function(){return this._matrix[5]},set:function(E){this._matrix[5]=E}}),Object.defineProperty(_t.prototype,"a",{get:function(){return this._matrix[0]},set:function(E){this._matrix[0]=E}}),Object.defineProperty(_t.prototype,"b",{get:function(){return this._matrix[1]},set:function(E){this._matrix[1]=E}}),Object.defineProperty(_t.prototype,"c",{get:function(){return this._matrix[2]},set:function(E){this._matrix[2]=E}}),Object.defineProperty(_t.prototype,"d",{get:function(){return this._matrix[3]},set:function(E){this._matrix[3]=E}}),Object.defineProperty(_t.prototype,"e",{get:function(){return this._matrix[4]},set:function(E){this._matrix[4]=E}}),Object.defineProperty(_t.prototype,"f",{get:function(){return this._matrix[5]},set:function(E){this._matrix[5]=E}}),Object.defineProperty(_t.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(_t.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(_t.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(_t.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),_t.prototype.join=function(E){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(U).join(E)},_t.prototype.multiply=function(E){var H=E.sx*this.sx+E.shy*this.shx,ae=E.sx*this.shy+E.shy*this.sy,we=E.shx*this.sx+E.sy*this.shx,ke=E.shx*this.shy+E.sy*this.sy,Xe=E.tx*this.sx+E.ty*this.shx+this.tx,tt=E.tx*this.shy+E.ty*this.sy+this.ty;return new _t(H,ae,we,ke,Xe,tt)},_t.prototype.decompose=function(){var E=this.sx,H=this.shy,ae=this.shx,we=this.sy,ke=this.tx,Xe=this.ty,tt=Math.sqrt(E*E+H*H),gt=(E/=tt)*ae+(H/=tt)*we;ae-=E*gt,we-=H*gt;var Lt=Math.sqrt(ae*ae+we*we);return gt/=Lt,E*(we/=Lt)<H*(ae/=Lt)&&(E=-E,H=-H,gt=-gt,tt=-tt),{scale:new _t(tt,0,0,Lt,0,0),translate:new _t(1,0,0,1,ke,Xe),rotate:new _t(E,H,-H,E,0,0),skew:new _t(1,0,gt,1,0,0)}},_t.prototype.toString=function(E){return this.join(" ")},_t.prototype.inversed=function(){var E=this.sx,H=this.shy,ae=this.shx,we=this.sy,ke=this.tx,Xe=this.ty,tt=1/(E*we-H*ae),gt=we*tt,Lt=-H*tt,zt=-ae*tt,Ht=E*tt;return new _t(gt,Lt,zt,Ht,-gt*ke-zt*Xe,-Lt*ke-Ht*Xe)},_t.prototype.applyToPoint=function(E){var H=E.x*this.sx+E.y*this.shx+this.tx,ae=E.x*this.shy+E.y*this.sy+this.ty;return new Io(H,ae)},_t.prototype.applyToRectangle=function(E){var H=this.applyToPoint(E),ae=this.applyToPoint(new Io(E.x+E.w,E.y+E.h));return new Wl(H.x,H.y,ae.x-H.x,ae.y-H.y)},_t.prototype.clone=function(){var E=this.sx,H=this.shy,ae=this.shx,we=this.sy,ke=this.tx,Xe=this.ty;return new _t(E,H,ae,we,ke,Xe)},b.Matrix=_t;var us=b.matrixMult=function(E,H){return H.multiply(E)},Jr=new _t(1,0,0,1,0,0);b.unitMatrix=b.identityMatrix=Jr;var ei=function(E,H){if(!Ks[E]){var ae=(H instanceof ac?"Sh":"P")+(Object.keys(tn).length+1).toString(10);H.id=ae,Ks[E]=ae,tn[ae]=H,Xt.publish("addPattern",H)}};b.ShadingPattern=ac,b.TilingPattern=yu,b.addShadingPattern=function(E,H){return K("addShadingPattern()"),ei(E,H),this},b.beginTilingPattern=function(E){K("beginTilingPattern()"),ko(E.boundingBox[0],E.boundingBox[1],E.boundingBox[2]-E.boundingBox[0],E.boundingBox[3]-E.boundingBox[1],E.matrix)},b.endTilingPattern=function(E,H){K("endTilingPattern()"),H.stream=qe[se].join(`
`),ei(E,H),Xt.publish("endTilingPattern",H),Di.pop().restore()};var gn=b.__private__.newObject=function(){var E=Ln();return Rn(E,!0),E},Ln=b.__private__.newObjectDeferred=function(){return he++,Pe[he]=function(){return Oe},he},Rn=function(E,H){return H=typeof H=="boolean"&&H,Pe[E]=Oe,H&&fe(E+" 0 obj"),E},mt=b.__private__.newAdditionalObject=function(){var E={objId:Ln(),content:""};return He.push(E),E},vi=Ln(),Ri=Ln(),Mn=b.__private__.decodeColorString=function(E){var H=E.split(" ");if(H.length!==2||H[1]!=="g"&&H[1]!=="G")H.length===5&&(H[4]==="k"||H[4]==="K")&&(H=[(1-H[0])*(1-H[3]),(1-H[1])*(1-H[3]),(1-H[2])*(1-H[3]),"r"]);else{var ae=parseFloat(H[0]);H=[ae,ae,ae,"r"]}for(var we="#",ke=0;ke<3;ke++)we+=("0"+Math.floor(255*parseFloat(H[ke])).toString(16)).slice(-2);return we},ti=b.__private__.encodeColorString=function(E){var H;typeof E=="string"&&(E={ch1:E});var ae=E.ch1,we=E.ch2,ke=E.ch3,Xe=E.ch4,tt=E.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ae=="string"&&ae.charAt(0)!=="#"){var gt=new G6(ae);if(gt.ok)ae=gt.toHex();else if(!/^\d*\.?\d*$/.test(ae))throw new Error('Invalid color "'+ae+'" passed to jsPDF.encodeColorString.')}if(typeof ae=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ae)&&(ae="#"+ae[1]+ae[1]+ae[2]+ae[2]+ae[3]+ae[3]),typeof ae=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ae)){var Lt=parseInt(ae.substr(1),16);ae=Lt>>16&255,we=Lt>>8&255,ke=255&Lt}if(we===void 0||Xe===void 0&&ae===we&&we===ke)if(typeof ae=="string")H=ae+" "+tt[0];else switch(E.precision){case 2:H=be(ae/255)+" "+tt[0];break;case 3:default:H=$(ae/255)+" "+tt[0]}else if(Xe===void 0||Tn(Xe)==="object"){if(Xe&&!isNaN(Xe.a)&&Xe.a===0)return H=["1.","1.","1.",tt[1]].join(" ");if(typeof ae=="string")H=[ae,we,ke,tt[1]].join(" ");else switch(E.precision){case 2:H=[be(ae/255),be(we/255),be(ke/255),tt[1]].join(" ");break;default:case 3:H=[$(ae/255),$(we/255),$(ke/255),tt[1]].join(" ")}}else if(typeof ae=="string")H=[ae,we,ke,Xe,tt[2]].join(" ");else switch(E.precision){case 2:H=[be(ae),be(we),be(ke),be(Xe),tt[2]].join(" ");break;case 3:default:H=[$(ae),$(we),$(ke),$(Xe),tt[2]].join(" ")}return H},Mi=b.__private__.getFilters=function(){return o},di=b.__private__.putStream=function(E){var H=(E=E||{}).data||"",ae=E.filters||Mi(),we=E.alreadyAppliedFilters||[],ke=E.addLength1||!1,Xe=H.length,tt=E.objectId,gt=function(ni){return ni};if(x!==null&&tt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");x!==null&&(gt=Cr.encryptor(tt,0));var Lt={};ae===!0&&(ae=["FlateEncode"]);var zt=E.additionalKeyValues||[],Ht=(Lt=Rt.API.processDataByFilters!==void 0?Rt.API.processDataByFilters(H,ae):{data:H,reverseChain:[]}).reverseChain+(Array.isArray(we)?we.join(" "):we.toString());if(Lt.data.length!==0&&(zt.push({key:"Length",value:Lt.data.length}),ke===!0&&zt.push({key:"Length1",value:Xe})),Ht.length!=0)if(Ht.split("/").length-1==1)zt.push({key:"Filter",value:Ht});else{zt.push({key:"Filter",value:"["+Ht+"]"});for(var an=0;an<zt.length;an+=1)if(zt[an].key==="DecodeParms"){for(var Yn=[],Nn=0;Nn<Lt.reverseChain.split("/").length-1;Nn+=1)Yn.push("null");Yn.push(zt[an].value),zt[an].value="["+Yn.join(" ")+"]"}}fe("<<");for(var tr=0;tr<zt.length;tr++)fe("/"+zt[tr].key+" "+zt[tr].value);fe(">>"),Lt.data.length!==0&&(fe("stream"),fe(gt(Lt.data)),fe("endstream"))},Ar=b.__private__.putPage=function(E){var H=E.number,ae=E.data,we=E.objId,ke=E.contentsObjId;Rn(we,!0),fe("<</Type /Page"),fe("/Parent "+E.rootDictionaryObjId+" 0 R"),fe("/Resources "+E.resourceDictionaryObjId+" 0 R"),fe("/MediaBox ["+parseFloat(U(E.mediaBox.bottomLeftX))+" "+parseFloat(U(E.mediaBox.bottomLeftY))+" "+U(E.mediaBox.topRightX)+" "+U(E.mediaBox.topRightY)+"]"),E.cropBox!==null&&fe("/CropBox ["+U(E.cropBox.bottomLeftX)+" "+U(E.cropBox.bottomLeftY)+" "+U(E.cropBox.topRightX)+" "+U(E.cropBox.topRightY)+"]"),E.bleedBox!==null&&fe("/BleedBox ["+U(E.bleedBox.bottomLeftX)+" "+U(E.bleedBox.bottomLeftY)+" "+U(E.bleedBox.topRightX)+" "+U(E.bleedBox.topRightY)+"]"),E.trimBox!==null&&fe("/TrimBox ["+U(E.trimBox.bottomLeftX)+" "+U(E.trimBox.bottomLeftY)+" "+U(E.trimBox.topRightX)+" "+U(E.trimBox.topRightY)+"]"),E.artBox!==null&&fe("/ArtBox ["+U(E.artBox.bottomLeftX)+" "+U(E.artBox.bottomLeftY)+" "+U(E.artBox.topRightX)+" "+U(E.artBox.topRightY)+"]"),typeof E.userUnit=="number"&&E.userUnit!==1&&fe("/UserUnit "+E.userUnit),Xt.publish("putPage",{objId:we,pageContext:Vt[H],pageNumber:H,page:ae}),fe("/Contents "+ke+" 0 R"),fe(">>"),fe("endobj");var Xe=ae.join(`
`);return k===_.ADVANCED&&(Xe+=`
Q`),Rn(ke,!0),di({data:Xe,filters:Mi(),objectId:ke}),fe("endobj"),we},qa=b.__private__.putPages=function(){var E,H,ae=[];for(E=1;E<=Wn;E++)Vt[E].objId=Ln(),Vt[E].contentsObjId=Ln();for(E=1;E<=Wn;E++)ae.push(Ar({number:E,data:qe[E],objId:Vt[E].objId,contentsObjId:Vt[E].contentsObjId,mediaBox:Vt[E].mediaBox,cropBox:Vt[E].cropBox,bleedBox:Vt[E].bleedBox,trimBox:Vt[E].trimBox,artBox:Vt[E].artBox,userUnit:Vt[E].userUnit,rootDictionaryObjId:vi,resourceDictionaryObjId:Ri}));Rn(vi,!0),fe("<</Type /Pages");var we="/Kids [";for(H=0;H<Wn;H++)we+=ae[H]+" 0 R ";fe(we+"]"),fe("/Count "+Wn),fe(">>"),fe("endobj"),Xt.publish("postPutPages")},No=function(E){Xt.publish("putFont",{font:E,out:fe,newObject:gn,putStream:di}),E.isAlreadyPutted!==!0&&(E.objectNumber=gn(),fe("<<"),fe("/Type /Font"),fe("/BaseFont /"+eu(E.postScriptName)),fe("/Subtype /Type1"),typeof E.encoding=="string"&&fe("/Encoding /"+E.encoding),fe("/FirstChar 32"),fe("/LastChar 255"),fe(">>"),fe("endobj"))},hi=function(){for(var E in Mt)Mt.hasOwnProperty(E)&&(y===!1||y===!0&&A.hasOwnProperty(E))&&No(Mt[E])},gr=function(E){E.objectNumber=gn();var H=[];H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Form"}),H.push({key:"BBox",value:"["+[U(E.x),U(E.y),U(E.x+E.width),U(E.y+E.height)].join(" ")+"]"}),H.push({key:"Matrix",value:"["+E.matrix.toString()+"]"});var ae=E.pages[1].join(`
`);di({data:ae,additionalKeyValues:H,objectId:E.objectNumber}),fe("endobj")},bn=function(){for(var E in pn)pn.hasOwnProperty(E)&&gr(pn[E])},Ll=function(E,H){var ae,we=[],ke=1/(H-1);for(ae=0;ae<1;ae+=ke)we.push(ae);if(we.push(1),E[0].offset!=0){var Xe={offset:0,color:E[0].color};E.unshift(Xe)}if(E[E.length-1].offset!=1){var tt={offset:1,color:E[E.length-1].color};E.push(tt)}for(var gt="",Lt=0,zt=0;zt<we.length;zt++){for(ae=we[zt];ae>E[Lt+1].offset;)Lt++;var Ht=E[Lt].offset,an=(ae-Ht)/(E[Lt+1].offset-Ht),Yn=E[Lt].color,Nn=E[Lt+1].color;gt+=xe(Math.round((1-an)*Yn[0]+an*Nn[0]).toString(16))+xe(Math.round((1-an)*Yn[1]+an*Nn[1]).toString(16))+xe(Math.round((1-an)*Yn[2]+an*Nn[2]).toString(16))}return gt.trim()},Ps=function(E,H){H||(H=21);var ae=gn(),we=Ll(E.colors,H),ke=[];ke.push({key:"FunctionType",value:"0"}),ke.push({key:"Domain",value:"[0.0 1.0]"}),ke.push({key:"Size",value:"["+H+"]"}),ke.push({key:"BitsPerSample",value:"8"}),ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),di({data:we,additionalKeyValues:ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ae}),fe("endobj"),E.objectNumber=gn(),fe("<< /ShadingType "+E.type),fe("/ColorSpace /DeviceRGB");var Xe="/Coords ["+U(parseFloat(E.coords[0]))+" "+U(parseFloat(E.coords[1]))+" ";E.type===2?Xe+=U(parseFloat(E.coords[2]))+" "+U(parseFloat(E.coords[3])):Xe+=U(parseFloat(E.coords[2]))+" "+U(parseFloat(E.coords[3]))+" "+U(parseFloat(E.coords[4]))+" "+U(parseFloat(E.coords[5])),fe(Xe+="]"),E.matrix&&fe("/Matrix ["+E.matrix.toString()+"]"),fe("/Function "+ae+" 0 R"),fe("/Extend [true true]"),fe(">>"),fe("endobj")},Pl=function(E,H){var ae=Ln(),we=gn();H.push({resourcesOid:ae,objectOid:we}),E.objectNumber=we;var ke=[];ke.push({key:"Type",value:"/Pattern"}),ke.push({key:"PatternType",value:"1"}),ke.push({key:"PaintType",value:"1"}),ke.push({key:"TilingType",value:"1"}),ke.push({key:"BBox",value:"["+E.boundingBox.map(U).join(" ")+"]"}),ke.push({key:"XStep",value:U(E.xStep)}),ke.push({key:"YStep",value:U(E.yStep)}),ke.push({key:"Resources",value:ae+" 0 R"}),E.matrix&&ke.push({key:"Matrix",value:"["+E.matrix.toString()+"]"}),di({data:E.stream,additionalKeyValues:ke,objectId:E.objectNumber}),fe("endobj")},Je=function(E){var H;for(H in tn)tn.hasOwnProperty(H)&&(tn[H]instanceof ac?Ps(tn[H]):tn[H]instanceof yu&&Pl(tn[H],E))},Pc=function(E){for(var H in E.objectNumber=gn(),fe("<<"),E)switch(H){case"opacity":fe("/ca "+be(E[H]));break;case"stroke-opacity":fe("/CA "+be(E[H]))}fe(">>"),fe("endobj")},Bn=function(){var E;for(E in qn)qn.hasOwnProperty(E)&&Pc(qn[E])},js=function(){for(var E in fe("/XObject <<"),pn)pn.hasOwnProperty(E)&&pn[E].objectNumber>=0&&fe("/"+E+" "+pn[E].objectNumber+" 0 R");Xt.publish("putXobjectDict"),fe(">>")},Qu=function(){Cr.oid=gn(),fe("<<"),fe("/Filter /Standard"),fe("/V "+Cr.v),fe("/R "+Cr.r),fe("/U <"+Cr.toHexString(Cr.U)+">"),fe("/O <"+Cr.toHexString(Cr.O)+">"),fe("/P "+Cr.P),fe(">>"),fe("endobj")},dn=function(){for(var E in fe("/Font <<"),Mt)Mt.hasOwnProperty(E)&&(y===!1||y===!0&&A.hasOwnProperty(E))&&fe("/"+E+" "+Mt[E].objectNumber+" 0 R");fe(">>")},hn=function(){if(Object.keys(tn).length>0){for(var E in fe("/Shading <<"),tn)tn.hasOwnProperty(E)&&tn[E]instanceof ac&&tn[E].objectNumber>=0&&fe("/"+E+" "+tn[E].objectNumber+" 0 R");Xt.publish("putShadingPatternDict"),fe(">>")}},Kt=function(E){if(Object.keys(tn).length>0){for(var H in fe("/Pattern <<"),tn)tn.hasOwnProperty(H)&&tn[H]instanceof b.TilingPattern&&tn[H].objectNumber>=0&&tn[H].objectNumber<E&&fe("/"+H+" "+tn[H].objectNumber+" 0 R");Xt.publish("putTilingPatternDict"),fe(">>")}},jl=function(){if(Object.keys(qn).length>0){var E;for(E in fe("/ExtGState <<"),qn)qn.hasOwnProperty(E)&&qn[E].objectNumber>=0&&fe("/"+E+" "+qn[E].objectNumber+" 0 R");Xt.publish("putGStateDict"),fe(">>")}},Gn=function(E){Rn(E.resourcesOid,!0),fe("<<"),fe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),dn(),hn(),Kt(E.objectOid),jl(),js(),fe(">>"),fe("endobj")},Co=function(){var E=[];hi(),Bn(),bn(),Je(E),Xt.publish("putResources"),E.forEach(Gn),Gn({resourcesOid:Ri,objectOid:Number.MAX_SAFE_INTEGER}),Xt.publish("postPutResources")},Jn=function(){Xt.publish("putAdditionalObjects");for(var E=0;E<He.length;E++){var H=He[E];Rn(H.objId,!0),fe(H.content),fe("endobj")}Xt.publish("postPutAdditionalObjects")},ds=function(E){jt[E.fontName]=jt[E.fontName]||{},jt[E.fontName][E.fontStyle]=E.id},Ol=function(E,H,ae,we,ke){var Xe={id:"F"+(Object.keys(Mt).length+1).toString(10),postScriptName:E,fontName:H,fontStyle:ae,encoding:we,isStandardFont:ke||!1,metadata:{}};return Xt.publish("addFont",{font:Xe,instance:this}),Mt[Xe.id]=Xe,ds(Xe),Xe.id},$n=function(E){for(var H=0,ae=$e.length;H<ae;H++){var we=Ol.call(this,E[H][0],E[H][1],E[H][2],$e[H][3],!0);y===!1&&(A[we]=!0);var ke=E[H][0].split("-");ds({id:we,fontName:ke[0],fontStyle:ke[1]||""})}Xt.publish("addFonts",{fonts:Mt,dictionary:jt})},Rr=function(E){return E.foo=function(){try{return E.apply(this,arguments)}catch(we){var H=we.stack||"";~H.indexOf(" at ")&&(H=H.split(" at ")[1]);var ae="Error in function "+H.split(`
`)[0].split("<")[0]+": "+we.message;if(!Ft.console)throw new Error(ae);Ft.console.error(ae,we),Ft.alert&&alert(ae)}},E.foo.bar=E,E.foo},Eo=function(E,H){var ae,we,ke,Xe,tt,gt,Lt,zt,Ht;if(ke=(H=H||{}).sourceEncoding||"Unicode",tt=H.outputEncoding,(H.autoencode||tt)&&Mt[Dt].metadata&&Mt[Dt].metadata[ke]&&Mt[Dt].metadata[ke].encoding&&(Xe=Mt[Dt].metadata[ke].encoding,!tt&&Mt[Dt].encoding&&(tt=Mt[Dt].encoding),!tt&&Xe.codePages&&(tt=Xe.codePages[0]),typeof tt=="string"&&(tt=Xe[tt]),tt)){for(Lt=!1,gt=[],ae=0,we=E.length;ae<we;ae++)(zt=tt[E.charCodeAt(ae)])?gt.push(String.fromCharCode(zt)):gt.push(E[ae]),gt[ae].charCodeAt(0)>>8&&(Lt=!0);E=gt.join("")}for(ae=E.length;Lt===void 0&&ae!==0;)E.charCodeAt(ae-1)>>8&&(Lt=!0),ae--;if(!Lt)return E;for(gt=H.noBOM?[]:[254,255],ae=0,we=E.length;ae<we;ae++){if((Ht=(zt=E.charCodeAt(ae))>>8)>>8)throw new Error("Character at position "+ae+" of string '"+E+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");gt.push(Ht),gt.push(zt-(Ht<<8))}return String.fromCharCode.apply(void 0,gt)},Sr=b.__private__.pdfEscape=b.pdfEscape=function(E,H){return Eo(E,H).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},wn=b.__private__.beginPage=function(E){qe[++Wn]=[],Vt[Wn]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(E[0]),topRightY:Number(E[1])}},ie(Wn),Ve(qe[se])},Nr=function(E,H){var ae,we,ke;switch(n=H||n,typeof E=="string"&&(ae=C(E.toLowerCase()),Array.isArray(ae)&&(we=ae[0],ke=ae[1])),Array.isArray(E)&&(we=E[0]*dt,ke=E[1]*dt),isNaN(we)&&(we=i[0],ke=i[1]),(we>14400||ke>14400)&&(Dn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),we=Math.min(14400,we),ke=Math.min(14400,ke)),i=[we,ke],n.substr(0,1)){case"l":ke>we&&(i=[ke,we]);break;case"p":we>ke&&(i=[ke,we])}wn(i),qr(Js),fe(Xi),or!==0&&fe(or+" J"),Aa!==0&&fe(Aa+" j"),Xt.publish("addPage",{pageNumber:Wn})},je=function(E){E>0&&E<=Wn&&(qe.splice(E,1),Vt.splice(E,1),Wn--,se>Wn&&(se=Wn),this.setPage(se))},ie=function(E){E>0&&E<=Wn&&(se=E)},It=b.__private__.getNumberOfPages=b.getNumberOfPages=function(){return qe.length-1},ar=function(E,H,ae){var we,ke=void 0;return ae=ae||{},E=E!==void 0?E:Mt[Dt].fontName,H=H!==void 0?H:Mt[Dt].fontStyle,we=E.toLowerCase(),jt[we]!==void 0&&jt[we][H]!==void 0?ke=jt[we][H]:jt[E]!==void 0&&jt[E][H]!==void 0?ke=jt[E][H]:ae.disableWarning===!1&&Dn.warn("Unable to look up font label for font '"+E+"', '"+H+"'. Refer to getFontList() for available fonts."),ke||ae.noFallback||(ke=jt.times[H])==null&&(ke=jt.times.normal),ke},wi=b.__private__.putInfo=function(){var E=gn(),H=function(we){return we};for(var ae in x!==null&&(H=Cr.encryptor(E,0)),fe("<<"),fe("/Producer ("+Sr(H("jsPDF "+Rt.version))+")"),ht)ht.hasOwnProperty(ae)&&ht[ae]&&fe("/"+ae.substr(0,1).toUpperCase()+ae.substr(1)+" ("+Sr(H(ht[ae]))+")");fe("/CreationDate ("+Sr(H(J))+")"),fe(">>"),fe("endobj")},Dl=b.__private__.putCatalog=function(E){var H=(E=E||{}).rootDictionaryObjId||vi;switch(gn(),fe("<<"),fe("/Type /Catalog"),fe("/Pages "+H+" 0 R"),oe||(oe="fullwidth"),oe){case"fullwidth":fe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":fe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":fe("/OpenAction [3 0 R /Fit]");break;case"original":fe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ae=""+oe;ae.substr(ae.length-1)==="%"&&(oe=parseInt(oe)/100),typeof oe=="number"&&fe("/OpenAction [3 0 R /XYZ null null "+be(oe)+"]")}switch(Qe||(Qe="continuous"),Qe){case"continuous":fe("/PageLayout /OneColumn");break;case"single":fe("/PageLayout /SinglePage");break;case"two":case"twoleft":fe("/PageLayout /TwoColumnLeft");break;case"tworight":fe("/PageLayout /TwoColumnRight")}Be&&fe("/PageMode /"+Be),Xt.publish("putCatalog"),fe(">>"),fe("endobj")},Rl=b.__private__.putTrailer=function(){fe("trailer"),fe("<<"),fe("/Size "+(he+1)),fe("/Root "+he+" 0 R"),fe("/Info "+(he-1)+" 0 R"),x!==null&&fe("/Encrypt "+Cr.oid+" 0 R"),fe("/ID [ <"+pe+"> <"+pe+"> ]"),fe(">>")},bi=b.__private__.putHeader=function(){fe("%PDF-"+P),fe("%")},Pt=b.__private__.putXRef=function(){var E="0000000000";fe("xref"),fe("0 "+(he+1)),fe("0000000000 65535 f ");for(var H=1;H<=he;H++)typeof Pe[H]=="function"?fe((E+Pe[H]()).slice(-10)+" 00000 n "):Pe[H]!==void 0?fe((E+Pe[H]).slice(-10)+" 00000 n "):fe("0000000000 00000 n ")},mn=b.__private__.buildDocument=function(){vt(),Ve(Le),Xt.publish("buildDocument"),bi(),qa(),Jn(),Co(),x!==null&&Qu(),wi(),Dl();var E=Oe;return Pt(),Rl(),fe("startxref"),fe(""+E),fe("%%EOF"),Ve(qe[se]),Le.join(`
`)},Wa=b.__private__.getBlob=function(E){return new Blob([ct(E)],{type:"application/pdf"})},_o=b.output=b.__private__.output=Rr(function(E,H){switch(typeof(H=H||{})=="string"?H={filename:H}:H.filename=H.filename||"generated.pdf",E){case void 0:return mn();case"save":b.save(H.filename);break;case"arraybuffer":return ct(mn());case"blob":return Wa(mn());case"bloburi":case"bloburl":if(Ft.URL!==void 0&&typeof Ft.URL.createObjectURL=="function")return Ft.URL&&Ft.URL.createObjectURL(Wa(mn()))||void 0;Dn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ae="",we=mn();try{ae=o2(we)}catch{ae=o2(unescape(encodeURIComponent(we)))}return"data:application/pdf;filename="+H.filename+";base64,"+ae;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ft)==="[object Window]"){var ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Xe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';H.pdfObjectUrl&&(ke=H.pdfObjectUrl,Xe="");var tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ke+'"'+Xe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(H)+");<\/script></body></html>",gt=Ft.open();return gt!==null&&gt.document.write(tt),gt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ft)==="[object Window]"){var Lt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(H.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+H.filename+'" width="500px" height="400px" /></body></html>',zt=Ft.open();if(zt!==null){zt.document.write(Lt);var Ht=this;zt.document.documentElement.querySelector("#pdfViewer").onload=function(){zt.document.title=H.filename,zt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ht.output("bloburl"))}}return zt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ft)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var an='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",H)+'"></iframe></body></html>',Yn=Ft.open();if(Yn!==null&&(Yn.document.write(an),Yn.document.title=H.filename),Yn||typeof safari>"u")return Yn;break;case"datauri":case"dataurl":return Ft.document.location.href=this.output("datauristring",H);default:return null}}),To=function(E){return Array.isArray(Zs)===!0&&Zs.indexOf(E)>-1};switch(r){case"pt":dt=1;break;case"mm":dt=72/25.4;break;case"cm":dt=72/2.54;break;case"in":dt=72;break;case"px":dt=To("px_scaling")==1?.75:96/72;break;case"pc":case"em":dt=12;break;case"ex":dt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);dt=r}var Cr=null;Me(),ue();var Ml=function(E){return x!==null?Cr.encryptor(E,0):function(H){return H}},jc=b.__private__.getPageInfo=b.getPageInfo=function(E){if(isNaN(E)||E%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Vt[E].objId,pageNumber:E,pageContext:Vt[E]}},Nt=b.__private__.getPageInfoByObjId=function(E){if(isNaN(E)||E%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var H in Vt)if(Vt[H].objId===E)break;return jc(H)},Ga=b.__private__.getCurrentPageInfo=b.getCurrentPageInfo=function(){return{objId:Vt[se].objId,pageNumber:se,pageContext:Vt[se]}};b.addPage=function(){return Nr.apply(this,arguments),this},b.setPage=function(){return ie.apply(this,arguments),Ve.call(this,qe[se]),this},b.insertPage=function(E){return this.addPage(),this.movePage(se,E),this},b.movePage=function(E,H){var ae,we;if(E>H){ae=qe[E],we=Vt[E];for(var ke=E;ke>H;ke--)qe[ke]=qe[ke-1],Vt[ke]=Vt[ke-1];qe[H]=ae,Vt[H]=we,this.setPage(H)}else if(E<H){ae=qe[E],we=Vt[E];for(var Xe=E;Xe<H;Xe++)qe[Xe]=qe[Xe+1],Vt[Xe]=Vt[Xe+1];qe[H]=ae,Vt[H]=we,this.setPage(H)}return this},b.deletePage=function(){return je.apply(this,arguments),this},b.__private__.text=b.text=function(E,H,ae,we,ke){var Xe,tt,gt,Lt,zt,Ht,an,Yn,Nn,tr=(we=we||{}).scope||this;if(typeof E=="number"&&typeof H=="number"&&(typeof ae=="string"||Array.isArray(ae))){var ni=ae;ae=H,H=E,E=ni}if(arguments[3]instanceof _t?(K("The transform parameter of text() with a Matrix value"),Nn=ke):(gt=arguments[4],Lt=arguments[5],Tn(an=arguments[3])==="object"&&an!==null||(typeof gt=="string"&&(Lt=gt,gt=null),typeof an=="string"&&(Lt=an,an=null),typeof an=="number"&&(gt=an,an=null),we={flags:an,angle:gt,align:Lt})),isNaN(H)||isNaN(ae)||E==null)throw new Error("Invalid arguments passed to jsPDF.text");if(E.length===0)return tr;var nr="",fs=!1,mr=typeof we.lineHeightFactor=="number"?we.lineHeightFactor:wa,Bi=tr.internal.scaleFactor;function fi(Fn){return Fn=Fn.split("	").join(Array(we.TabLen||9).join(" ")),Sr(Fn,an)}function Lo(Fn){for(var Un,_r=Fn.concat(),$r=[],Ka=_r.length;Ka--;)typeof(Un=_r.shift())=="string"?$r.push(Un):Array.isArray(Fn)&&(Un.length===1||Un[1]===void 0&&Un[2]===void 0)?$r.push(Un[0]):$r.push([Un[0],Un[1],Un[2]]);return $r}function Ni(Fn,Un){var _r;if(typeof Fn=="string")_r=Un(Fn)[0];else if(Array.isArray(Fn)){for(var $r,Ka,td=Fn.concat(),Rc=[],Hh=td.length;Hh--;)typeof($r=td.shift())=="string"?Rc.push(Un($r)[0]):Array.isArray($r)&&typeof $r[0]=="string"&&(Ka=Un($r[0],$r[1],$r[2]),Rc.push([Ka[0],Ka[1],Ka[2]]));_r=Rc}return _r}var Po=!1,Ya=!0;if(typeof E=="string")Po=!0;else if(Array.isArray(E)){var $l=E.concat();tt=[];for(var Xa,Pn=$l.length;Pn--;)(typeof(Xa=$l.shift())!="string"||Array.isArray(Xa)&&typeof Xa[0]!="string")&&(Ya=!1);Po=Ya}if(Po===!1)throw new Error('Type of text must be string or Array. "'+E+'" is not recognized.');typeof E=="string"&&(E=E.match(/[\r?\n]/)?E.split(/\r\n|\r|\n/g):[E]);var jo=re/tr.internal.scaleFactor,Ca=jo*(mr-1);switch(we.baseline){case"bottom":ae-=Ca;break;case"top":ae+=jo-Ca;break;case"hanging":ae+=jo-2*Ca;break;case"middle":ae+=jo/2-Ca}if((Ht=we.maxWidth||0)>0&&(typeof E=="string"?E=tr.splitTextToSize(E,Ht):Object.prototype.toString.call(E)==="[object Array]"&&(E=E.reduce(function(Fn,Un){return Fn.concat(tr.splitTextToSize(Un,Ht))},[]))),Xe={text:E,x:H,y:ae,options:we,mutex:{pdfEscape:Sr,activeFontKey:Dt,fonts:Mt,activeFontSize:re}},Xt.publish("preProcessText",Xe),E=Xe.text,gt=(we=Xe.options).angle,!(Nn instanceof _t)&&gt&&typeof gt=="number"){gt*=Math.PI/180,we.rotationDirection===0&&(gt=-gt),k===_.ADVANCED&&(gt=-gt);var Ms=Math.cos(gt),nn=Math.sin(gt);Nn=new _t(Ms,nn,-nn,Ms,0,0)}else gt&&gt instanceof _t&&(Nn=gt);k!==_.ADVANCED||Nn||(Nn=Jr),(zt=we.charSpace||Fe)!==void 0&&(nr+=U(q(zt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Yn=we.horizontalScale)!==void 0&&(nr+=U(100*Yn)+` Tz
`),we.lang;var Wr=-1,F=we.renderingMode!==void 0?we.renderingMode:we.stroke,a=tr.internal.getCurrentPageInfo().pageContext;switch(F){case 0:case!1:case"fill":Wr=0;break;case 1:case!0:case"stroke":Wr=1;break;case 2:case"fillThenStroke":Wr=2;break;case 3:case"invisible":Wr=3;break;case 4:case"fillAndAddForClipping":Wr=4;break;case 5:case"strokeAndAddPathForClipping":Wr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Wr=6;break;case 7:case"addToPathForClipping":Wr=7}var l=a.usedRenderingMode!==void 0?a.usedRenderingMode:-1;Wr!==-1?nr+=Wr+` Tr
`:l!==-1&&(nr+=`0 Tr
`),Wr!==-1&&(a.usedRenderingMode=Wr),Lt=we.align||"left";var c,h=re*mr,p=tr.internal.pageSize.getWidth(),g=Mt[Dt];zt=we.charSpace||Fe,Ht=we.maxWidth||0,an=Object.assign({autoencode:!0,noBOM:!0},we.flags);var w=[],N=function(Fn){return tr.getStringUnitWidth(Fn,{font:g,charSpace:zt,fontSize:re,doKerning:!1})*re/Bi};if(Object.prototype.toString.call(E)==="[object Array]"){var T;tt=Lo(E),Lt!=="left"&&(c=tt.map(N));var D,B=0;if(Lt==="right"){H-=c[0],E=[],Pn=tt.length;for(var G=0;G<Pn;G++)G===0?(D=Rs(H),T=ea(ae)):(D=q(B-c[G]),T=-h),E.push([tt[G],D,T]),B=c[G]}else if(Lt==="center"){H-=c[0]/2,E=[],Pn=tt.length;for(var le=0;le<Pn;le++)le===0?(D=Rs(H),T=ea(ae)):(D=q((B-c[le])/2),T=-h),E.push([tt[le],D,T]),B=c[le]}else if(Lt==="left"){E=[],Pn=tt.length;for(var ye=0;ye<Pn;ye++)E.push(tt[ye])}else if(Lt==="justify"&&g.encoding==="Identity-H"){E=[],Pn=tt.length,Ht=Ht!==0?Ht:p;for(var Ae=0,Te=0;Te<Pn;Te++)if(T=Te===0?ea(ae):-h,D=Te===0?Rs(H):Ae,Te<Pn-1){var Ue=q((Ht-c[Te])/(tt[Te].split(" ").length-1)),nt=tt[Te].split(" ");E.push([nt[0]+" ",D,T]),Ae=0;for(var at=1;at<nt.length;at++){var it=(N(nt[at-1]+" "+nt[at])-N(nt[at]))*Bi+Ue;at==nt.length-1?E.push([nt[at],it,0]):E.push([nt[at]+" ",it,0]),Ae-=it}}else E.push([tt[Te],D,T]);E.push(["",Ae,0])}else{if(Lt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(E=[],Pn=tt.length,Ht=Ht!==0?Ht:p,Te=0;Te<Pn;Te++)T=Te===0?ea(ae):-h,D=Te===0?Rs(H):0,Te<Pn-1?w.push(U(q((Ht-c[Te])/(tt[Te].split(" ").length-1)))):w.push(0),E.push([tt[Te],D,T])}}var Jt=typeof we.R2L=="boolean"?we.R2L:ze;Jt===!0&&(E=Ni(E,function(Fn,Un,_r){return[Fn.split("").reverse().join(""),Un,_r]})),Xe={text:E,x:H,y:ae,options:we,mutex:{pdfEscape:Sr,activeFontKey:Dt,fonts:Mt,activeFontSize:re}},Xt.publish("postProcessText",Xe),E=Xe.text,fs=Xe.mutex.isHex||!1;var Ut=Mt[Dt].encoding;Ut!=="WinAnsiEncoding"&&Ut!=="StandardEncoding"||(E=Ni(E,function(Fn,Un,_r){return[fi(Fn),Un,_r]})),tt=Lo(E),E=[];for(var xr,Gr,cr,fn=0,rr=1,Er=Array.isArray(tt[0])?rr:fn,Fi="",Bs=function(Fn,Un,_r){var $r="";return _r instanceof _t?(_r=typeof we.angle=="number"?us(_r,new _t(1,0,0,1,Fn,Un)):us(new _t(1,0,0,1,Fn,Un),_r),k===_.ADVANCED&&(_r=us(new _t(1,0,0,-1,0,0),_r)),$r=_r.join(" ")+` Tm
`):$r=U(Fn)+" "+U(Un)+` Td
`,$r},Ki=0;Ki<tt.length;Ki++){switch(Fi="",Er){case rr:cr=(fs?"<":"(")+tt[Ki][0]+(fs?">":")"),xr=parseFloat(tt[Ki][1]),Gr=parseFloat(tt[Ki][2]);break;case fn:cr=(fs?"<":"(")+tt[Ki]+(fs?">":")"),xr=Rs(H),Gr=ea(ae)}w!==void 0&&w[Ki]!==void 0&&(Fi=w[Ki]+` Tw
`),Ki===0?E.push(Fi+Bs(xr,Gr,Nn)+cr):Er===fn?E.push(Fi+cr):Er===rr&&E.push(Fi+Bs(xr,Gr,Nn)+cr)}E=Er===fn?E.join(` Tj
T* `):E.join(` Tj
`),E+=` Tj
`;var Zi=`BT
/`;return Zi+=Dt+" "+re+` Tf
`,Zi+=U(re*mr)+` TL
`,Zi+=Ai+`
`,Zi+=nr,Zi+=E,fe(Zi+="ET"),A[Dt]=!0,tr};var Os=b.__private__.clip=b.clip=function(E){return fe(E==="evenodd"?"W*":"W"),this};b.clipEvenOdd=function(){return Os("evenodd")},b.__private__.discardPath=b.discardPath=function(){return fe("n"),this};var kt=b.__private__.isValidStyle=function(E){var H=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(E)!==-1&&(H=!0),H};b.__private__.setDefaultPathOperation=b.setDefaultPathOperation=function(E){return kt(E)&&(f=E),this};var Oc=b.__private__.getStyle=b.getStyle=function(E){var H=f;switch(E){case"D":case"S":H="S";break;case"F":H="f";break;case"FD":case"DF":H="B";break;case"f":case"f*":case"B":case"B*":H=E}return H},qt=b.close=function(){return fe("h"),this};b.stroke=function(){return fe("S"),this},b.fill=function(E){return er("f",E),this},b.fillEvenOdd=function(E){return er("f*",E),this},b.fillStroke=function(E){return er("B",E),this},b.fillStrokeEvenOdd=function(E){return er("B*",E),this};var er=function(E,H){Tn(H)==="object"?Dc(H,E):fe(E)},Bl=function(E){E===null||k===_.ADVANCED&&E===void 0||(E=Oc(E),fe(E))};function Fl(E,H,ae,we,ke){var Xe=new yu(H||this.boundingBox,ae||this.xStep,we||this.yStep,this.gState,ke||this.matrix);Xe.stream=this.stream;var tt=E+"$$"+this.cloneIndex+++"$$";return ei(tt,Xe),Xe}var Dc=function(E,H){var ae=Ks[E.key],we=tn[ae];if(we instanceof ac)fe("q"),fe(Qs(H)),we.gState&&b.setGState(we.gState),fe(E.matrix.toString()+" cm"),fe("/"+ae+" sh"),fe("Q");else if(we instanceof yu){var ke=new _t(1,0,0,-1,0,Si());E.matrix&&(ke=ke.multiply(E.matrix||Jr),ae=Fl.call(we,E.key,E.boundingBox,E.xStep,E.yStep,ke).id),fe("q"),fe("/Pattern cs"),fe("/"+ae+" scn"),we.gState&&b.setGState(we.gState),fe(H),fe("Q")}},Qs=function(E){switch(E){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ul=b.moveTo=function(E,H){return fe(U(q(E))+" "+U(Q(H))+" m"),this},hs=b.lineTo=function(E,H){return fe(U(q(E))+" "+U(Q(H))+" l"),this},Yi=b.curveTo=function(E,H,ae,we,ke,Xe){return fe([U(q(E)),U(Q(H)),U(q(ae)),U(Q(we)),U(q(ke)),U(Q(Xe)),"c"].join(" ")),this};b.__private__.line=b.line=function(E,H,ae,we,ke){if(isNaN(E)||isNaN(H)||isNaN(ae)||isNaN(we)||!kt(ke))throw new Error("Invalid arguments passed to jsPDF.line");return k===_.COMPAT?this.lines([[ae-E,we-H]],E,H,[1,1],ke||"S"):this.lines([[ae-E,we-H]],E,H,[1,1]).stroke()},b.__private__.lines=b.lines=function(E,H,ae,we,ke,Xe){var tt,gt,Lt,zt,Ht,an,Yn,Nn,tr,ni,nr,fs;if(typeof E=="number"&&(fs=ae,ae=H,H=E,E=fs),we=we||[1,1],Xe=Xe||!1,isNaN(H)||isNaN(ae)||!Array.isArray(E)||!Array.isArray(we)||!kt(ke)||typeof Xe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ul(H,ae),tt=we[0],gt=we[1],zt=E.length,ni=H,nr=ae,Lt=0;Lt<zt;Lt++)(Ht=E[Lt]).length===2?(ni=Ht[0]*tt+ni,nr=Ht[1]*gt+nr,hs(ni,nr)):(an=Ht[0]*tt+ni,Yn=Ht[1]*gt+nr,Nn=Ht[2]*tt+ni,tr=Ht[3]*gt+nr,ni=Ht[4]*tt+ni,nr=Ht[5]*gt+nr,Yi(an,Yn,Nn,tr,ni,nr));return Xe&&qt(),Bl(ke),this},b.path=function(E){for(var H=0;H<E.length;H++){var ae=E[H],we=ae.c;switch(ae.op){case"m":Ul(we[0],we[1]);break;case"l":hs(we[0],we[1]);break;case"c":Yi.apply(this,we);break;case"h":qt()}}return this},b.__private__.rect=b.rect=function(E,H,ae,we,ke){if(isNaN(E)||isNaN(H)||isNaN(ae)||isNaN(we)||!kt(ke))throw new Error("Invalid arguments passed to jsPDF.rect");return k===_.COMPAT&&(we=-we),fe([U(q(E)),U(Q(H)),U(q(ae)),U(q(we)),"re"].join(" ")),Bl(ke),this},b.__private__.triangle=b.triangle=function(E,H,ae,we,ke,Xe,tt){if(isNaN(E)||isNaN(H)||isNaN(ae)||isNaN(we)||isNaN(ke)||isNaN(Xe)||!kt(tt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ae-E,we-H],[ke-ae,Xe-we],[E-ke,H-Xe]],E,H,[1,1],tt,!0),this},b.__private__.roundedRect=b.roundedRect=function(E,H,ae,we,ke,Xe,tt){if(isNaN(E)||isNaN(H)||isNaN(ae)||isNaN(we)||isNaN(ke)||isNaN(Xe)||!kt(tt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var gt=4/3*(Math.SQRT2-1);return ke=Math.min(ke,.5*ae),Xe=Math.min(Xe,.5*we),this.lines([[ae-2*ke,0],[ke*gt,0,ke,Xe-Xe*gt,ke,Xe],[0,we-2*Xe],[0,Xe*gt,-ke*gt,Xe,-ke,Xe],[2*ke-ae,0],[-ke*gt,0,-ke,-Xe*gt,-ke,-Xe],[0,2*Xe-we],[0,-Xe*gt,ke*gt,-Xe,ke,-Xe]],E+ke,H,[1,1],tt,!0),this},b.__private__.ellipse=b.ellipse=function(E,H,ae,we,ke){if(isNaN(E)||isNaN(H)||isNaN(ae)||isNaN(we)||!kt(ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Xe=4/3*(Math.SQRT2-1)*ae,tt=4/3*(Math.SQRT2-1)*we;return Ul(E+ae,H),Yi(E+ae,H-tt,E+Xe,H-we,E,H-we),Yi(E-Xe,H-we,E-ae,H-tt,E-ae,H),Yi(E-ae,H+tt,E-Xe,H+we,E,H+we),Yi(E+Xe,H+we,E+ae,H+tt,E+ae,H),Bl(ke),this},b.__private__.circle=b.circle=function(E,H,ae,we){if(isNaN(E)||isNaN(H)||isNaN(ae)||!kt(we))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(E,H,ae,ae,we)},b.setFont=function(E,H,ae){return ae&&(H=ne(H,ae)),Dt=ar(E,H,{disableWarning:!1}),this};var $a=b.__private__.getFont=b.getFont=function(){return Mt[ar.apply(b,arguments)]};b.__private__.getFontList=b.getFontList=function(){var E,H,ae={};for(E in jt)if(jt.hasOwnProperty(E))for(H in ae[E]=[],jt[E])jt[E].hasOwnProperty(H)&&ae[E].push(H);return ae},b.addFont=function(E,H,ae,we,ke){var Xe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Xe.indexOf(arguments[3])!==-1?ke=arguments[3]:arguments[3]&&Xe.indexOf(arguments[3])==-1&&(ae=ne(ae,we)),ke=ke||"Identity-H",Ol.call(this,E,H,ae,ke)};var wa,Js=e.lineWidth||.200025,Ds=b.__private__.getLineWidth=b.getLineWidth=function(){return Js},qr=b.__private__.setLineWidth=b.setLineWidth=function(E){return Js=E,fe(U(q(E))+" w"),this};b.__private__.setLineDash=Rt.API.setLineDash=Rt.API.setLineDashPattern=function(E,H){if(E=E||[],H=H||0,isNaN(H)||!Array.isArray(E))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return E=E.map(function(ae){return U(q(ae))}).join(" "),H=U(q(H)),fe("["+E+"] "+H+" d"),this};var Vl=b.__private__.getLineHeight=b.getLineHeight=function(){return re*wa};b.__private__.getLineHeight=b.getLineHeight=function(){return re*wa};var zl=b.__private__.setLineHeightFactor=b.setLineHeightFactor=function(E){return typeof(E=E||1.15)=="number"&&(wa=E),this},Hl=b.__private__.getLineHeightFactor=b.getLineHeightFactor=function(){return wa};zl(e.lineHeight);var Rs=b.__private__.getHorizontalCoordinate=function(E){return q(E)},ea=b.__private__.getVerticalCoordinate=function(E){return k===_.ADVANCED?E:Vt[se].mediaBox.topRightY-Vt[se].mediaBox.bottomLeftY-q(E)},Ju=b.__private__.getHorizontalCoordinateString=b.getHorizontalCoordinateString=function(E){return U(Rs(E))},sn=b.__private__.getVerticalCoordinateString=b.getVerticalCoordinateString=function(E){return U(ea(E))},Xi=e.strokeColor||"0 G";b.__private__.getStrokeColor=b.getDrawColor=function(){return Mn(Xi)},b.__private__.setStrokeColor=b.setDrawColor=function(E,H,ae,we){return Xi=ti({ch1:E,ch2:H,ch3:ae,ch4:we,pdfColorType:"draw",precision:2}),fe(Xi),this};var ba=e.fillColor||"0 g";b.__private__.getFillColor=b.getFillColor=function(){return Mn(ba)},b.__private__.setFillColor=b.setFillColor=function(E,H,ae,we){return ba=ti({ch1:E,ch2:H,ch3:ae,ch4:we,pdfColorType:"fill",precision:2}),fe(ba),this};var Ai=e.textColor||"0 g",ed=b.__private__.getTextColor=b.getTextColor=function(){return Mn(Ai)};b.__private__.setTextColor=b.setTextColor=function(E,H,ae,we){return Ai=ti({ch1:E,ch2:H,ch3:ae,ch4:we,pdfColorType:"text",precision:3}),this};var Fe=e.charSpace,Yt=b.__private__.getCharSpace=b.getCharSpace=function(){return parseFloat(Fe||0)};b.__private__.setCharSpace=b.setCharSpace=function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Fe=E,this};var or=0;b.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},b.__private__.setLineCap=b.setLineCap=function(E){var H=b.CapJoinStyles[E];if(H===void 0)throw new Error("Line cap style of '"+E+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return or=H,fe(H+" J"),this};var Aa=0;b.__private__.setLineJoin=b.setLineJoin=function(E){var H=b.CapJoinStyles[E];if(H===void 0)throw new Error("Line join style of '"+E+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Aa=H,fe(H+" j"),this},b.__private__.setLineMiterLimit=b.__private__.setMiterLimit=b.setLineMiterLimit=b.setMiterLimit=function(E){if(E=E||0,isNaN(E))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return fe(U(q(E))+" M"),this},b.GState=e1,b.setGState=function(E){(E=typeof E=="string"?qn[$t[E]]:ql(null,E)).equals(ci)||(fe("/"+E.id+" gs"),ci=E)};var ql=function(E,H){if(!E||!$t[E]){var ae=!1;for(var we in qn)if(qn.hasOwnProperty(we)&&qn[we].equals(H)){ae=!0;break}if(ae)H=qn[we];else{var ke="GS"+(Object.keys(qn).length+1).toString(10);qn[ke]=H,H.id=ke}return E&&($t[E]=H.id),Xt.publish("addGState",H),H}};b.addGState=function(E,H){return ql(E,H),this},b.saveGraphicsState=function(){return fe("q"),un.push({key:Dt,size:re,color:Ai}),this},b.restoreGraphicsState=function(){fe("Q");var E=un.pop();return Dt=E.key,re=E.size,Ai=E.color,ci=null,this},b.setCurrentTransformationMatrix=function(E){return fe(E.toString()+" cm"),this},b.comment=function(E){return fe("#"+E),this};var Io=function(E,H){var ae=E||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ae},set:function(Xe){isNaN(Xe)||(ae=parseFloat(Xe))}});var we=H||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return we},set:function(Xe){isNaN(Xe)||(we=parseFloat(Xe))}});var ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ke},set:function(Xe){ke=Xe.toString()}}),this},Wl=function(E,H,ae,we){Io.call(this,E,H),this.type="rect";var ke=ae||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ke},set:function(tt){isNaN(tt)||(ke=parseFloat(tt))}});var Xe=we||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Xe},set:function(tt){isNaN(tt)||(Xe=parseFloat(tt))}}),this},Gl=function(){this.page=Wn,this.currentPage=se,this.pages=qe.slice(0),this.pagesContext=Vt.slice(0),this.x=kn,this.y=Et,this.matrix=ot,this.width=Sn(se),this.height=Si(se),this.outputDestination=Ge,this.id="",this.objectNumber=-1};Gl.prototype.restore=function(){Wn=this.page,se=this.currentPage,Vt=this.pagesContext,qe=this.pages,kn=this.x,Et=this.y,ot=this.matrix,Na(se,this.width),xn(se,this.height),Ge=this.outputDestination};var ko=function(E,H,ae,we,ke){Di.push(new Gl),Wn=se=0,qe=[],kn=E,Et=H,ot=ke,wn([ae,we])},lr=function(E){if(ui[E])Di.pop().restore();else{var H=new Gl,ae="Xo"+(Object.keys(pn).length+1).toString(10);H.id=ae,ui[E]=ae,pn[ae]=H,Xt.publish("addFormObject",H),Di.pop().restore()}};for(var Sa in b.beginFormObject=function(E,H,ae,we,ke){return ko(E,H,ae,we,ke),this},b.endFormObject=function(E){return lr(E),this},b.doFormObject=function(E,H){var ae=pn[ui[E]];return fe("q"),fe(H.toString()+" cm"),fe("/"+ae.id+" Do"),fe("Q"),this},b.getFormObject=function(E){var H=pn[ui[E]];return{x:H.x,y:H.y,width:H.width,height:H.height,matrix:H.matrix}},b.save=function(E,H){return E=E||"generated.pdf",(H=H||{}).returnPromise=H.returnPromise||!1,H.returnPromise===!1?(ic(Wa(mn()),E),typeof ic.unload=="function"&&Ft.setTimeout&&setTimeout(ic.unload,911),this):new Promise(function(ae,we){try{var ke=ic(Wa(mn()),E);typeof ic.unload=="function"&&Ft.setTimeout&&setTimeout(ic.unload,911),ae(ke)}catch(Xe){we(Xe.message)}})},Rt.API)Rt.API.hasOwnProperty(Sa)&&(Sa==="events"&&Rt.API.events.length?function(E,H){var ae,we,ke;for(ke=H.length-1;ke!==-1;ke--)ae=H[ke][0],we=H[ke][1],E.subscribe.apply(E,[ae].concat(typeof we=="function"?[we]:we))}(Xt,Rt.API.events):b[Sa]=Rt.API[Sa]);var Sn=b.getPageWidth=function(E){return(Vt[E=E||se].mediaBox.topRightX-Vt[E].mediaBox.bottomLeftX)/dt},Na=b.setPageWidth=function(E,H){Vt[E].mediaBox.topRightX=H*dt+Vt[E].mediaBox.bottomLeftX},Si=b.getPageHeight=function(E){return(Vt[E=E||se].mediaBox.topRightY-Vt[E].mediaBox.bottomLeftY)/dt},xn=b.setPageHeight=function(E,H){Vt[E].mediaBox.topRightY=H*dt+Vt[E].mediaBox.bottomLeftY};return b.internal={pdfEscape:Sr,getStyle:Oc,getFont:$a,getFontSize:ve,getCharSpace:Yt,getTextColor:ed,getLineHeight:Vl,getLineHeightFactor:Hl,getLineWidth:Ds,write:bt,getHorizontalCoordinate:Rs,getVerticalCoordinate:ea,getCoordinateString:Ju,getVerticalCoordinateString:sn,collections:{},newObject:gn,newAdditionalObject:mt,newObjectDeferred:Ln,newObjectDeferredBegin:Rn,getFilters:Mi,putStream:di,events:Xt,scaleFactor:dt,pageSize:{getWidth:function(){return Sn(se)},setWidth:function(E){Na(se,E)},getHeight:function(){return Si(se)},setHeight:function(E){xn(se,E)}},encryptionOptions:x,encryption:Cr,getEncryptor:Ml,output:_o,getNumberOfPages:It,pages:qe,out:fe,f2:be,f3:$,getPageInfo:jc,getPageInfoByObjId:Nt,getCurrentPageInfo:Ga,getPDFVersion:I,Point:Io,Rectangle:Wl,Matrix:_t,hasHotfix:To},Object.defineProperty(b.internal.pageSize,"width",{get:function(){return Sn(se)},set:function(E){Na(se,E)},enumerable:!0,configurable:!0}),Object.defineProperty(b.internal.pageSize,"height",{get:function(){return Si(se)},set:function(E){xn(se,E)},enumerable:!0,configurable:!0}),$n.call(b,$e),Dt="F1",Nr(i,n),Xt.publish("initialized"),b}Jc.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Jc.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Jc.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},Jc.prototype.processOwnerPassword=function(e,t){return c2(l2(t).substr(0,5),e)},Jc.prototype.encryptor=function(e,t){var n=l2(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return c2(n,r)}},e1.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||Tn(e)!==Tn(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},Rt.API={events:[]},Rt.version="2.5.2";var wr=Rt.API,Zx=1,Lc=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Yc=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Gt=function(e){return e.toFixed(2)},Wo=function(e){return e.toFixed(5)};wr.__acroform__={};var cs=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},ub=function(e){return e*Zx},Ta=function(e){var t=new K6,n=Ct.internal.getHeight(e)||0,r=Ct.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Gt(r)),Number(Gt(n))],t},OR=wr.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},DR=wr.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},RR=wr.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Ir=wr.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return RR(e,t-1)},kr=wr.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return OR(e,t-1)},Lr=wr.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return DR(e,t-1)},MR=wr.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,i=e[0],s=e[1],o=e[2],u=e[3],d={};return d.lowerLeft_X=n(i)||0,d.lowerLeft_Y=r(s+u)||0,d.upperRight_X=n(i+o)||0,d.upperRight_Y=r(s)||0,[Number(Gt(d.lowerLeft_X)),Number(Gt(d.lowerLeft_Y)),Number(Gt(d.upperRight_X)),Number(Gt(d.upperRight_Y))]},BR=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=u2(e,n),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+Gt(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=Ta(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},u2=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function($){return $.split(`
`)}):i.map(function($){return[$]});var s=n,o=Ct.internal.getHeight(e)||0;o=o<0?-o:o;var u=Ct.internal.getWidth(e)||0;u=u<0?-u:u;var d=function($,q,X){if($+1<i.length){var Q=q+" "+i[$+1][0];return Ff(Q,e,X).width<=u-4}return!1};s++;e:for(;s>0;){t="",s--;var f,x,y=Ff("3",e,s).height,A=e.multiline?o-s:(o-y)/2,b=A+=2,P=0,I=0,j=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+Ff(t,e,s=12).width+", FieldWidth:"+u+`
`;break}for(var C="",_=0,k=0;k<i.length;k++)if(i.hasOwnProperty(k)){var R=!1;if(i[k].length!==1&&j!==i[k].length-1){if((y+2)*(_+2)+2>o)continue e;C+=i[k][j],R=!0,I=k,k--}else{C=(C+=i[k][j]+" ").substr(C.length-1)==" "?C.substr(0,C.length-1):C;var M=parseInt(k),ne=d(M,C,s),U=k>=i.length-1;if(ne&&!U){C+=" ",j=0;continue}if(ne||U){if(U)I=M;else if(e.multiline&&(y+2)*(_+2)+2>o)continue e}else{if(!e.multiline||(y+2)*(_+2)+2>o)continue e;I=M}}for(var K="",te=P;te<=I;te++){var be=i[te];if(e.multiline){if(te===I){K+=be[j]+" ",j=(j+1)%be.length;continue}if(te===P){K+=be[be.length-1]+" ";continue}}K+=be[0]+" "}switch(K=K.substr(K.length-1)==" "?K.substr(0,K.length-1):K,x=Ff(K,e,s).width,e.textAlign){case"right":f=u-x-2;break;case"center":f=(u-x)/2;break;case"left":default:f=2}t+=Gt(f)+" "+Gt(b)+` Td
`,t+="("+Lc(K)+`) Tj
`,t+=-Gt(f)+` 0 Td
`,b=-(s+2),x=0,P=R?I:I+1,_++,C=""}break}return r.text=t,r.fontSize=s,r},Ff=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},FR={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},UR=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},VR=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,i=e[n];t.internal.newObjectDeferredBegin(i.objId,!0),Tn(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete e[r]}},zR=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(ya.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(FR)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Zx=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new Z6,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&UR(s,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var u=r[o],d=[],f=u.Rect;if(u.Rect&&(u.Rect=MR(u.Rect,i)),i.internal.newObjectDeferredBegin(u.objId,!0),u.DA=Ct.createDefaultAppearanceStream(u),Tn(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(d=u.getKeyValueListForStream()),u.Rect=f,u.hasAppearanceStream&&!u.appearanceStreamContent){var x=BR(u);d.push({key:"AP",value:"<</N "+x+">>"}),i.internal.acroformPlugin.xForms.push(x)}if(u.appearanceStreamContent){var y="";for(var A in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(A)){var b=u.appearanceStreamContent[A];if(y+="/"+A+" ",y+="<<",Object.keys(b).length>=1||Array.isArray(b)){for(var o in b)if(b.hasOwnProperty(o)){var P=b[o];typeof P=="function"&&(P=P.call(i,u)),y+="/"+o+" "+P+" ",i.internal.acroformPlugin.xForms.indexOf(P)>=0||i.internal.acroformPlugin.xForms.push(P)}}else typeof(P=b)=="function"&&(P=P.call(i,u)),y+="/"+o+" "+P,i.internal.acroformPlugin.xForms.indexOf(P)>=0||i.internal.acroformPlugin.xForms.push(P);y+=">>"}d.push({key:"AP",value:`<<
`+y+">>"})}i.internal.putStream({additionalKeyValues:d,objectId:u.objId}),i.internal.out("endobj")}s&&VR(i.internal.acroformPlugin.xForms,i)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},X6=wr.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(o){return o};if(Array.isArray(e)){for(var i="[",s=0;s<e.length;s++)switch(s!==0&&(i+=" "),Tn(e[s])){case"boolean":case"number":case"object":i+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),i+="("+Lc(r(e[s].toString()))+")"):i+=e[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},gg=function(e,t,n){var r=function(i){return i};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Lc(r(e))+")"},Ra=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ra.prototype.toString=function(){return this.objId+" 0 R"},Ra.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Ra.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],i=this[r];i&&(Array.isArray(i)?e.push({key:r,value:X6(i,this.objId,this.scope)}):i instanceof Ra?(i.scope=this.scope,e.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:r,value:i}))}return e};var K6=function(){Ra.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};cs(K6,Ra);var Z6=function(){Ra.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Lc(n(e))+")"}},set:function(n){e=n}})};cs(Z6,Ra);var ya=function e(){Ra.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute F supplied.');t=C}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ir(t,3)},set:function(C){C?this.F=kr(t,3):this.F=Lr(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute Ff supplied.');n=C}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(C){r=C!==void 0?C:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(C){r[0]=C}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(C){r[1]=C}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(C){r[2]=C}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(C){r[3]=C}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(C){switch(C){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=C;break;default:throw new Error('Invalid value "'+C+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof t1)return;s="FieldObject"+e.FieldNum++}var C=function(_){return _};return this.scope&&(C=this.scope.internal.getEncryptor(this.objId)),"("+Lc(C(s))+")"},set:function(C){s=C.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(C){s=C}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(C){o=C}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(C){u=C}});var d=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return d},set:function(C){d=C}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/Zx:f},set:function(C){f=C}});var x="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return x},set:function(C){x=C}});var y="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!y||this instanceof t1||this instanceof xc))return gg(y,this.objId,this.scope)},set:function(C){C=C.toString(),y=C}});var A=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof oi?A:gg(A,this.objId,this.scope)},set:function(C){C=C.toString(),A=this instanceof oi?C:C.substr(0,1)==="("?Yc(C.substr(1,C.length-2)):Yc(C)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof oi?Yc(A.substr(1,A.length-1)):A},set:function(C){C=C.toString(),A=this instanceof oi?"/"+C:C}});var b=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(b)return b},set:function(C){this.V=C}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof oi?b:gg(b,this.objId,this.scope)},set:function(C){C=C.toString(),b=this instanceof oi?C:C.substr(0,1)==="("?Yc(C.substr(1,C.length-2)):Yc(C)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof oi?Yc(b.substr(1,b.length-1)):b},set:function(C){C=C.toString(),b=this instanceof oi?"/"+C:C}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var P,I=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return I},set:function(C){C=!!C,I=C}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(P)return P},set:function(C){P=C}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,1)},set:function(C){C?this.Ff=kr(this.Ff,1):this.Ff=Lr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,2)},set:function(C){C?this.Ff=kr(this.Ff,2):this.Ff=Lr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,3)},set:function(C){C?this.Ff=kr(this.Ff,3):this.Ff=Lr(this.Ff,3)}});var j=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(j!==null)return j},set:function(C){if([0,1,2].indexOf(C)===-1)throw new Error('Invalid value "'+C+'" for attribute Q supplied.');j=C}}),Object.defineProperty(this,"textAlign",{get:function(){var C;switch(j){case 0:default:C="left";break;case 1:C="center";break;case 2:C="right"}return C},configurable:!0,enumerable:!0,set:function(C){switch(C){case"right":case 2:j=2;break;case"center":case 1:j=1;break;case"left":case 0:default:j=0}}})};cs(ya,Ra);var Cu=function(){ya.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return X6(t,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,u){u||(u=1);for(var d,f=[];d=o.exec(s);)f.push(d[u]);return f}(r,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,18)},set:function(n){n?this.Ff=kr(this.Ff,18):this.Ff=Lr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=kr(this.Ff,19):this.Ff=Lr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,20)},set:function(n){n?(this.Ff=kr(this.Ff,20),t.sort()):this.Ff=Lr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,22)},set:function(n){n?this.Ff=kr(this.Ff,22):this.Ff=Lr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,23)},set:function(n){n?this.Ff=kr(this.Ff,23):this.Ff=Lr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,27)},set:function(n){n?this.Ff=kr(this.Ff,27):this.Ff=Lr(this.Ff,27)}}),this.hasAppearanceStream=!1};cs(Cu,ya);var Eu=function(){Cu.call(this),this.fontName="helvetica",this.combo=!1};cs(Eu,Cu);var _u=function(){Eu.call(this),this.combo=!0};cs(_u,Eu);var o0=function(){_u.call(this),this.edit=!0};cs(o0,_u);var oi=function(){ya.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,15)},set:function(n){n?this.Ff=kr(this.Ff,15):this.Ff=Lr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,16)},set:function(n){n?this.Ff=kr(this.Ff,16):this.Ff=Lr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,17)},set:function(n){n?this.Ff=kr(this.Ff,17):this.Ff=Lr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,26)},set:function(n){n?this.Ff=kr(this.Ff,26):this.Ff=Lr(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,i=[];for(r in i.push("<<"),t)i.push("/"+r+" ("+Lc(n(t[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Tn(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};cs(oi,ya);var l0=function(){oi.call(this),this.pushButton=!0};cs(l0,oi);var Tu=function(){oi.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};cs(Tu,oi);var t1=function(){var e,t;ya.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(u){return u};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+Lc(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Tn(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ct.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};cs(t1,ya),Tu.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Tu.prototype.createOption=function(e){var t=new t1;return t.Parent=this,t.optionName=e,this.Kids.push(t),HR.call(this.scope,t),t};var c0=function(){oi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ct.CheckBox.createAppearanceStream()};cs(c0,oi);var xc=function(){ya.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,13)},set:function(t){t?this.Ff=kr(this.Ff,13):this.Ff=Lr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,21)},set:function(t){t?this.Ff=kr(this.Ff,21):this.Ff=Lr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,23)},set:function(t){t?this.Ff=kr(this.Ff,23):this.Ff=Lr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,24)},set:function(t){t?this.Ff=kr(this.Ff,24):this.Ff=Lr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,25)},set:function(t){t?this.Ff=kr(this.Ff,25):this.Ff=Lr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,26)},set:function(t){t?this.Ff=kr(this.Ff,26):this.Ff=Lr(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};cs(xc,ya);var u0=function(){xc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,14)},set:function(e){e?this.Ff=kr(this.Ff,14):this.Ff=Lr(this.Ff,14)}}),this.password=!0};cs(u0,xc);var Ct={CheckBox:{createAppearanceStream:function(){return{N:{On:Ct.CheckBox.YesNormal},D:{On:Ct.CheckBox.YesPushDown,Off:Ct.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Ta(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),s=u2(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Gt(Ct.internal.getWidth(e))+" "+Gt(Ct.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Gt(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=Ta(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),i=[],s=Ct.internal.getHeight(e),o=Ct.internal.getWidth(e),u=u2(e,e.caption);return i.push("1 g"),i.push("0 0 "+Gt(o)+" "+Gt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Gt(o-1)+" "+Gt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Gt(u.fontSize)+" Tf "+r),i.push(u.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=Ta(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Gt(Ct.internal.getWidth(e))+" "+Gt(Ct.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Ct.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Ct.RadioButton.Circle.YesNormal,t.D[e]=Ct.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Ta(e);t.scope=e.scope;var n=[],r=Ct.internal.getWidth(e)<=Ct.internal.getHeight(e)?Ct.internal.getWidth(e)/4:Ct.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Ct.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Wo(Ct.internal.getWidth(e)/2)+" "+Wo(Ct.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Ta(e);t.scope=e.scope;var n=[],r=Ct.internal.getWidth(e)<=Ct.internal.getHeight(e)?Ct.internal.getWidth(e)/4:Ct.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Ct.internal.Bezier_C).toFixed(5)),o=Number((r*Ct.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Wo(Ct.internal.getWidth(e)/2)+" "+Wo(Ct.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Wo(Ct.internal.getWidth(e)/2)+" "+Wo(Ct.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Ta(e);t.scope=e.scope;var n=[],r=Ct.internal.getWidth(e)<=Ct.internal.getHeight(e)?Ct.internal.getWidth(e)/4:Ct.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Ct.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Wo(Ct.internal.getWidth(e)/2)+" "+Wo(Ct.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Ct.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Ct.RadioButton.Cross.YesNormal,t.D[e]=Ct.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Ta(e);t.scope=e.scope;var n=[],r=Ct.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Gt(Ct.internal.getWidth(e)-2)+" "+Gt(Ct.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Gt(r.x1.x)+" "+Gt(r.x1.y)+" m"),n.push(Gt(r.x2.x)+" "+Gt(r.x2.y)+" l"),n.push(Gt(r.x4.x)+" "+Gt(r.x4.y)+" m"),n.push(Gt(r.x3.x)+" "+Gt(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Ta(e);t.scope=e.scope;var n=Ct.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+Gt(Ct.internal.getWidth(e))+" "+Gt(Ct.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Gt(Ct.internal.getWidth(e)-2)+" "+Gt(Ct.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Gt(n.x1.x)+" "+Gt(n.x1.y)+" m"),r.push(Gt(n.x2.x)+" "+Gt(n.x2.y)+" l"),r.push(Gt(n.x4.x)+" "+Gt(n.x4.y)+" m"),r.push(Gt(n.x3.x)+" "+Gt(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Ta(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Gt(Ct.internal.getWidth(e))+" "+Gt(Ct.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};Ct.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Ct.internal.getWidth(e),n=Ct.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},Ct.internal.getWidth=function(e){var t=0;return Tn(e)==="object"&&(t=ub(e.Rect[2])),t},Ct.internal.getHeight=function(e){var t=0;return Tn(e)==="object"&&(t=ub(e.Rect[3])),t};var HR=wr.addField=function(e){if(zR(this,e),!(e instanceof ya))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};wr.AcroFormChoiceField=Cu,wr.AcroFormListBox=Eu,wr.AcroFormComboBox=_u,wr.AcroFormEditBox=o0,wr.AcroFormButton=oi,wr.AcroFormPushButton=l0,wr.AcroFormRadioButton=Tu,wr.AcroFormCheckBox=c0,wr.AcroFormTextField=xc,wr.AcroFormPasswordField=u0,wr.AcroFormAppearance=Ct,wr.AcroForm={ChoiceField:Cu,ListBox:Eu,ComboBox:_u,EditBox:o0,Button:oi,PushButton:l0,RadioButton:Tu,CheckBox:c0,TextField:xc,PasswordField:u0,Appearance:Ct},Rt.AcroForm={ChoiceField:Cu,ListBox:Eu,ComboBox:_u,EditBox:o0,Button:oi,PushButton:l0,RadioButton:Tu,CheckBox:c0,TextField:xc,PasswordField:u0,Appearance:Ct};Rt.AcroForm;function Q6(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function($,q){var X,Q,J,pe,ge,ue=t;if((q=q||t)==="RGBA"||$.data!==void 0&&$.data instanceof Uint8ClampedArray&&"height"in $&&"width"in $)return"RGBA";if(ne($))for(ge in n)for(J=n[ge],X=0;X<J.length;X+=1){for(pe=!0,Q=0;Q<J[X].length;Q+=1)if(J[X][Q]!==void 0&&J[X][Q]!==$[Q]){pe=!1;break}if(pe===!0){ue=ge;break}}else for(ge in n)for(J=n[ge],X=0;X<J.length;X+=1){for(pe=!0,Q=0;Q<J[X].length;Q+=1)if(J[X][Q]!==void 0&&J[X][Q]!==$.charCodeAt(Q)){pe=!1;break}if(pe===!0){ue=ge;break}}return ue===t&&q!==t&&(ue=q),ue},i=function $(q){for(var X=this.internal.write,Q=this.internal.putStream,J=(0,this.internal.getFilters)();J.indexOf("FlateEncode")!==-1;)J.splice(J.indexOf("FlateEncode"),1);q.objectId=this.internal.newObject();var pe=[];if(pe.push({key:"Type",value:"/XObject"}),pe.push({key:"Subtype",value:"/Image"}),pe.push({key:"Width",value:q.width}),pe.push({key:"Height",value:q.height}),q.colorSpace===j.INDEXED?pe.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(q.palette.length/3-1)+" "+("sMask"in q&&q.sMask!==void 0?q.objectId+2:q.objectId+1)+" 0 R]"}):(pe.push({key:"ColorSpace",value:"/"+q.colorSpace}),q.colorSpace===j.DEVICE_CMYK&&pe.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),pe.push({key:"BitsPerComponent",value:q.bitsPerComponent}),"decodeParameters"in q&&q.decodeParameters!==void 0&&pe.push({key:"DecodeParms",value:"<<"+q.decodeParameters+">>"}),"transparency"in q&&Array.isArray(q.transparency)){for(var ge="",ue=0,Se=q.transparency.length;ue<Se;ue++)ge+=q.transparency[ue]+" "+q.transparency[ue]+" ";pe.push({key:"Mask",value:"["+ge+"]"})}q.sMask!==void 0&&pe.push({key:"SMask",value:q.objectId+1+" 0 R"});var _e=q.filter!==void 0?["/"+q.filter]:void 0;if(Q({data:q.data,additionalKeyValues:pe,alreadyAppliedFilters:_e,objectId:q.objectId}),X("endobj"),"sMask"in q&&q.sMask!==void 0){var Me="/Predictor "+q.predictor+" /Colors 1 /BitsPerComponent "+q.bitsPerComponent+" /Columns "+q.width,V={width:q.width,height:q.height,colorSpace:"DeviceGray",bitsPerComponent:q.bitsPerComponent,decodeParameters:Me,data:q.sMask};"filter"in q&&(V.filter=q.filter),$.call(this,V)}if(q.colorSpace===j.INDEXED){var se=this.internal.newObject();Q({data:K(new Uint8Array(q.palette)),objectId:se}),X("endobj")}},s=function(){var $=this.internal.collections.addImage_images;for(var q in $)i.call(this,$[q])},o=function(){var $,q=this.internal.collections.addImage_images,X=this.internal.write;for(var Q in q)X("/I"+($=q[Q]).index,$.objectId,"0","R")},u=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},d=function(){var $=this.internal.collections.addImage_images;return u.call(this),$},f=function(){return Object.keys(this.internal.collections.addImage_images).length},x=function($){return typeof e["process"+$.toUpperCase()]=="function"},y=function($){return Tn($)==="object"&&$.nodeType===1},A=function($,q){if($.nodeName==="IMG"&&$.hasAttribute("src")){var X=""+$.getAttribute("src");if(X.indexOf("data:image/")===0)return Kd(unescape(X).split("base64,").pop());var Q=e.loadFile(X,!0);if(Q!==void 0)return Q}if($.nodeName==="CANVAS"){if($.width===0||$.height===0)throw new Error("Given canvas must have data. Canvas width: "+$.width+", height: "+$.height);var J;switch(q){case"PNG":J="image/png";break;case"WEBP":J="image/webp";break;case"JPEG":case"JPG":default:J="image/jpeg"}return Kd($.toDataURL(J,1).split("base64,").pop())}},b=function($){var q=this.internal.collections.addImage_images;if(q){for(var X in q)if($===q[X].alias)return q[X]}},P=function($,q,X){return $||q||($=-96,q=-96),$<0&&($=-1*X.width*72/$/this.internal.scaleFactor),q<0&&(q=-1*X.height*72/q/this.internal.scaleFactor),$===0&&($=q*X.width/X.height),q===0&&(q=$*X.height/X.width),[$,q]},I=function($,q,X,Q,J,pe){var ge=P.call(this,X,Q,J),ue=this.internal.getCoordinateString,Se=this.internal.getVerticalCoordinateString,_e=d.call(this);if(X=ge[0],Q=ge[1],_e[J.index]=J,pe){pe*=Math.PI/180;var Me=Math.cos(pe),V=Math.sin(pe),se=function(xe){return xe.toFixed(4)},de=[se(Me),se(V),se(-1*V),se(Me),0,0,"cm"]}this.internal.write("q"),pe?(this.internal.write([1,"0","0",1,ue($),Se(q+Q),"cm"].join(" ")),this.internal.write(de.join(" ")),this.internal.write([ue(X),"0","0",ue(Q),"0","0","cm"].join(" "))):this.internal.write([ue(X),"0","0",ue(Q),ue($),Se(q+Q),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+J.index+" Do"),this.internal.write("Q")},j=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var C=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},_=e.__addimage__.sHashCode=function($){var q,X,Q=0;if(typeof $=="string")for(X=$.length,q=0;q<X;q++)Q=(Q<<5)-Q+$.charCodeAt(q),Q|=0;else if(ne($))for(X=$.byteLength/2,q=0;q<X;q++)Q=(Q<<5)-Q+$[q],Q|=0;return Q},k=e.__addimage__.validateStringAsBase64=function($){($=$||"").toString().trim();var q=!0;return $.length===0&&(q=!1),$.length%4!=0&&(q=!1),/^[A-Za-z0-9+/]+$/.test($.substr(0,$.length-2))===!1&&(q=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test($.substr(-2))===!1&&(q=!1),q},R=e.__addimage__.extractImageFromDataUrl=function($){var q=($=$||"").split("base64,"),X=null;if(q.length===2){var Q=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(q[0]);Array.isArray(Q)&&(X={mimeType:Q[1],charset:Q[2],data:q[1]})}return X},M=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function($){return M()&&$ instanceof ArrayBuffer};var ne=e.__addimage__.isArrayBufferView=function($){return M()&&typeof Uint32Array<"u"&&($ instanceof Int8Array||$ instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&$ instanceof Uint8ClampedArray||$ instanceof Int16Array||$ instanceof Uint16Array||$ instanceof Int32Array||$ instanceof Uint32Array||$ instanceof Float32Array||$ instanceof Float64Array)},U=e.__addimage__.binaryStringToUint8Array=function($){for(var q=$.length,X=new Uint8Array(q),Q=0;Q<q;Q++)X[Q]=$.charCodeAt(Q);return X},K=e.__addimage__.arrayBufferToBinaryString=function($){for(var q="",X=ne($)?$:new Uint8Array($),Q=0;Q<X.length;Q+=8192)q+=String.fromCharCode.apply(null,X.subarray(Q,Q+8192));return q};e.addImage=function(){var $,q,X,Q,J,pe,ge,ue,Se;if(typeof arguments[1]=="number"?(q=t,X=arguments[1],Q=arguments[2],J=arguments[3],pe=arguments[4],ge=arguments[5],ue=arguments[6],Se=arguments[7]):(q=arguments[1],X=arguments[2],Q=arguments[3],J=arguments[4],pe=arguments[5],ge=arguments[6],ue=arguments[7],Se=arguments[8]),Tn($=arguments[0])==="object"&&!y($)&&"imageData"in $){var _e=$;$=_e.imageData,q=_e.format||q||t,X=_e.x||X||0,Q=_e.y||Q||0,J=_e.w||_e.width||J,pe=_e.h||_e.height||pe,ge=_e.alias||ge,ue=_e.compression||ue,Se=_e.rotation||_e.angle||Se}var Me=this.internal.getFilters();if(ue===void 0&&Me.indexOf("FlateEncode")!==-1&&(ue="SLOW"),isNaN(X)||isNaN(Q))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var V=te.call(this,$,q,ge,ue);return I.call(this,X,Q,J,pe,V,Se),this};var te=function($,q,X,Q){var J,pe,ge;if(typeof $=="string"&&r($)===t){$=unescape($);var ue=be($,!1);(ue!==""||(ue=e.loadFile($,!0))!==void 0)&&($=ue)}if(y($)&&($=A($,q)),q=r($,q),!x(q))throw new Error("addImage does not support files of type '"+q+"', please ensure that a plugin for '"+q+"' support is added.");if(((ge=X)==null||ge.length===0)&&(X=function(Se){return typeof Se=="string"||ne(Se)?_(Se):ne(Se.data)?_(Se.data):null}($)),(J=b.call(this,X))||(M()&&($ instanceof Uint8Array||q==="RGBA"||(pe=$,$=U($))),J=this["process"+q.toUpperCase()]($,f.call(this),X,function(Se){return Se&&typeof Se=="string"&&(Se=Se.toUpperCase()),Se in e.image_compression?Se:C.NONE}(Q),pe)),!J)throw new Error("An unknown error occurred whilst processing the image.");return J},be=e.__addimage__.convertBase64ToBinaryString=function($,q){var X;q=typeof q!="boolean"||q;var Q,J="";if(typeof $=="string"){Q=(X=R($))!==null?X.data:$;try{J=Kd(Q)}catch(pe){if(q)throw k(Q)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+pe.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return J};e.getImageProperties=function($){var q,X,Q="";if(y($)&&($=A($)),typeof $=="string"&&r($)===t&&((Q=be($,!1))===""&&(Q=e.loadFile($)||""),$=Q),X=r($),!x(X))throw new Error("addImage does not support files of type '"+X+"', please ensure that a plugin for '"+X+"' support is added.");if(!M()||$ instanceof Uint8Array||($=U($)),!(q=this["process"+X.toUpperCase()]($)))throw new Error("An unknown error occurred whilst processing the image");return q.fileType=X,q}})(Rt.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};Rt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,d=this.internal.getPageInfoByObjId(n.objId),f=n.pageContext.annotations,x=!1,y=0;y<f.length&&!x;y++)switch((r=f[y]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(x=!0);break;case"reference":case"text":case"freetext":x=!0}if(x!=0){this.internal.write("/Annots [");for(var A=0;A<f.length;A++){r=f[A];var b=this.internal.pdfEscape,P=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var I=this.internal.newAdditionalObject(),j=this.internal.newAdditionalObject(),C=this.internal.getEncryptor(I.objId),_=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+u(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y)+"] ")+"/Contents ("+b(C(r.contents))+")",s+=" /Popup "+j.objId+" 0 R",s+=" /P "+d.objId+" 0 R",s+=" /T ("+b(C(_))+") >>",I.content=s;var k=I.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+u(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+u(r.bounds.y)+"] ")+" /Parent "+k,r.open&&(s+=" /Open true"),s+=" >>",j.content=s,this.internal.write(I.objId,"0 R",j.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+u(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y+r.bounds.h)+"] ";var R=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+b(P(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+R+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var M=this.annotations._nameMap[r.options.name];r.options.pageNumber=M.page,r.options.top=M.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+b(P(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var ne=u(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+ne+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,i,s,o){var u=this.internal.getCurrentPageInfo(),d=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:d(n),y:f(r),w:d(n+i),h:f(r+s)},options:o,type:"link"})},e.textWithLink=function(n,r,i,s){var o,u,d=this.getTextWidth(n),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){u=s.maxWidth;var x=this.splitTextToSize(n,u).length;o=Math.ceil(f*x)}else u=d,o=f;return this.text(n,r,i,s),i+=.2*f,s.align==="center"&&(r-=d/2),s.align==="right"&&(r-=d),this.link(r,i-f,u,o,s),d},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(Rt.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(I){return t[I.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(I){return typeof I=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(I)},u=e.__arabicParser__.isArabicEndLetter=function(I){return o(I)&&s(I)&&t[I.charCodeAt(0)].length<=2},d=e.__arabicParser__.isArabicAlfLetter=function(I){return o(I)&&i.indexOf(I.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(I){return o(I)&&s(I)&&t[I.charCodeAt(0)].length>=1};var f=e.__arabicParser__.arabicLetterHasFinalForm=function(I){return o(I)&&s(I)&&t[I.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(I){return o(I)&&s(I)&&t[I.charCodeAt(0)].length>=3};var x=e.__arabicParser__.arabicLetterHasMedialForm=function(I){return o(I)&&s(I)&&t[I.charCodeAt(0)].length==4},y=e.__arabicParser__.resolveLigatures=function(I){var j=0,C=n,_="",k=0;for(j=0;j<I.length;j+=1)C[I.charCodeAt(j)]!==void 0?(k++,typeof(C=C[I.charCodeAt(j)])=="number"&&(_+=String.fromCharCode(C),C=n,k=0),j===I.length-1&&(C=n,_+=I.charAt(j-(k-1)),j-=k-1,k=0)):(C=n,_+=I.charAt(j-k),j-=k,k=0);return _};e.__arabicParser__.isArabicDiacritic=function(I){return I!==void 0&&r[I.charCodeAt(0)]!==void 0};var A=e.__arabicParser__.getCorrectForm=function(I,j,C){return o(I)?s(I)===!1?-1:!f(I)||!o(j)&&!o(C)||!o(C)&&u(j)||u(I)&&!o(j)||u(I)&&d(j)||u(I)&&u(j)?0:x(I)&&o(j)&&!u(j)&&o(C)&&f(C)?3:u(I)||!o(C)?1:2:-1},b=function(I){var j=0,C=0,_=0,k="",R="",M="",ne=(I=I||"").split("\\s+"),U=[];for(j=0;j<ne.length;j+=1){for(U.push(""),C=0;C<ne[j].length;C+=1)k=ne[j][C],R=ne[j][C-1],M=ne[j][C+1],o(k)?(_=A(k,R,M),U[j]+=_!==-1?String.fromCharCode(t[k.charCodeAt(0)][_]):k):U[j]+=k;U[j]=y(U[j])}return U.join(" ")},P=e.__arabicParser__.processArabic=e.processArabic=function(){var I,j=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,C=[];if(Array.isArray(j)){var _=0;for(C=[],_=0;_<j.length;_+=1)Array.isArray(j[_])?C.push([b(j[_][0]),j[_][1],j[_][2]]):C.push([b(j[_])]);I=C}else I=b(j);return typeof arguments[0]=="string"?I:(arguments[0].text=I,arguments[0])};e.events.push(["preProcessText",P])}(Rt.API),Rt.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(u){n=u}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(u){r=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(u){i=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(u){s=u}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(u){o=u}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Rt.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var d=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return d},set:function(I){d=I}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(I){f=I}});var x=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return x},set:function(I){x=I}});var y=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return y},set:function(I){y=I}});var A=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return A},set:function(I){A=I}});var b=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return b},set:function(I){b=I}});var P=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return P},set:function(I){P=I}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(d){return r.call(this),this.internal.__cell__.headerFunction=typeof d=="function"?d:void 0,this},e.getTextDimensions=function(d,f){r.call(this);var x=(f=f||{}).fontSize||this.getFontSize(),y=f.font||this.getFont(),A=f.scaleFactor||this.internal.scaleFactor,b=0,P=0,I=0,j=this;if(!Array.isArray(d)&&typeof d!="string"){if(typeof d!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");d=String(d)}var C=f.maxWidth;C>0?typeof d=="string"?d=this.splitTextToSize(d,C):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce(function(k,R){return k.concat(j.splitTextToSize(R,C))},[])):d=Array.isArray(d)?d:[d];for(var _=0;_<d.length;_++)b<(I=this.getStringUnitWidth(d[_],{font:y})*x)&&(b=I);return b!==0&&(P=d.length),{w:b/=A,h:Math.max((P*x*this.getLineHeightFactor()-x*(this.getLineHeightFactor()-1))/A,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var d=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(d.left,d.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var d;d=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var f=this.internal.__cell__.lastCell,x=this.internal.__cell__.padding,y=this.internal.__cell__.margins||t,A=this.internal.__cell__.tableHeaderRow,b=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===d.lineNumber?(d.x=(f.x||0)+(f.width||0),d.y=f.y||0):f.y+f.height+d.height+y.bottom>this.getPageHeight()?(this.cellAddPage(),d.y=y.top,b&&A&&(this.printHeaderRow(d.lineNumber,!0),d.y+=A[0].height)):d.y=f.y+f.height||d.y),d.text[0]!==void 0&&(this.rect(d.x,d.y,d.width,d.height,n===!0?"FD":void 0),d.align==="right"?this.text(d.text,d.x+d.width-x,d.y+x,{align:"right",baseline:"top"}):d.align==="center"?this.text(d.text,d.x+d.width/2,d.y+x,{align:"center",baseline:"top",maxWidth:d.width-x-x}):this.text(d.text,d.x+x,d.y+x,{align:"left",baseline:"top",maxWidth:d.width-x-x})),this.internal.__cell__.lastCell=d,this};e.table=function(d,f,x,y,A){if(r.call(this),!x)throw new Error("No data for PDF table.");var b,P,I,j,C=[],_=[],k=[],R={},M={},ne=[],U=[],K=(A=A||{}).autoSize||!1,te=A.printHeaders!==!1,be=A.css&&A.css["font-size"]!==void 0?16*A.css["font-size"]:A.fontSize||12,$=A.margins||Object.assign({width:this.getPageWidth()},t),q=typeof A.padding=="number"?A.padding:3,X=A.headerBackgroundColor||"#c8c8c8",Q=A.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=te,this.internal.__cell__.margins=$,this.internal.__cell__.table_font_size=be,this.internal.__cell__.padding=q,this.internal.__cell__.headerBackgroundColor=X,this.internal.__cell__.headerTextColor=Q,this.setFontSize(be),y==null)_=C=Object.keys(x[0]),k=C.map(function(){return"left"});else if(Array.isArray(y)&&Tn(y[0])==="object")for(C=y.map(function(_e){return _e.name}),_=y.map(function(_e){return _e.prompt||_e.name||""}),k=y.map(function(_e){return _e.align||"left"}),b=0;b<y.length;b+=1)M[y[b].name]=y[b].width*(19.049976/25.4);else Array.isArray(y)&&typeof y[0]=="string"&&(_=C=y,k=C.map(function(){return"left"}));if(K||Array.isArray(y)&&typeof y[0]=="string")for(b=0;b<C.length;b+=1){for(R[j=C[b]]=x.map(function(_e){return _e[j]}),this.setFont(void 0,"bold"),ne.push(this.getTextDimensions(_[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),P=R[j],this.setFont(void 0,"normal"),I=0;I<P.length;I+=1)ne.push(this.getTextDimensions(P[I],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);M[j]=Math.max.apply(null,ne)+q+q,ne=[]}if(te){var J={};for(b=0;b<C.length;b+=1)J[C[b]]={},J[C[b]].text=_[b],J[C[b]].align=k[b];var pe=u.call(this,J,M);U=C.map(function(_e){return new s(d,f,M[_e],pe,J[_e].text,void 0,J[_e].align)}),this.setTableHeaderRow(U),this.printHeaderRow(1,!1)}var ge=y.reduce(function(_e,Me){return _e[Me.name]=Me.align,_e},{});for(b=0;b<x.length;b+=1){"rowStart"in A&&A.rowStart instanceof Function&&A.rowStart({row:b,data:x[b]},this);var ue=u.call(this,x[b],M);for(I=0;I<C.length;I+=1){var Se=x[b][C[I]];"cellStart"in A&&A.cellStart instanceof Function&&A.cellStart({row:b,col:I,data:Se},this),o.call(this,new s(d,f,M[C[I]],ue,Se,b+2,ge[C[I]]))}}return this.internal.__cell__.table_x=d,this.internal.__cell__.table_y=f,this};var u=function(d,f){var x=this.internal.__cell__.padding,y=this.internal.__cell__.table_font_size,A=this.internal.scaleFactor;return Object.keys(d).map(function(b){var P=d[b];return this.splitTextToSize(P.hasOwnProperty("text")?P.text:P,f[b]-x-x)},this).map(function(b){return this.getLineHeightFactor()*b.length*y/A+x+x},this).reduce(function(b,P){return Math.max(b,P)},0)};e.setTableHeaderRow=function(d){r.call(this),this.internal.__cell__.tableHeaderRow=d},e.printHeaderRow=function(d,f){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var x;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var y=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(y[0],y[1],y[2],y[3],void 0,-1)}this.setFont(void 0,"bold");for(var A=[],b=0;b<this.internal.__cell__.tableHeaderRow.length;b+=1){x=this.internal.__cell__.tableHeaderRow[b].clone(),f&&(x.y=this.internal.__cell__.margins.top||0,A.push(x)),x.lineNumber=d;var P=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,x),this.setTextColor(P)}A.length>0&&this.setTableHeaderRow(A),this.setFont(void 0,"normal"),n=!1}}(Rt.API);var J6={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},eN=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],d2=Q6(eN),tN=[100,200,300,400,500,600,700,800,900],qR=Q6(tN);function h2(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return J6[s=s||"normal"]?s:"normal"}(e.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),i=function(s){return typeof d2[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,n,r].join(" ")}}}function db(e,t,n,r){var i;for(i=n;i>=0&&i<t.length;i+=r)if(e[t[i]])return e[t[i]];for(i=n;i>=0&&i<t.length;i-=r)if(e[t[i]])return e[t[i]]}var WR={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},hb={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function fb(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function GR(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},WR,n.genericFontFamilies||{}),s=null,o=null,u=0;u<t.length;++u)if(i[(s=h2(t[u])).family]&&(s.family=i[s.family]),e.hasOwnProperty(s.family)){o=e[s.family];break}if(!(o=o||e[r]))throw new Error("Could not find a font-family for the rule '"+fb(s)+"' and default family '"+r+"'.");if(o=function(d,f){if(f[d])return f[d];var x=d2[d],y=x<=d2.normal?-1:1,A=db(f,eN,x,y);if(!A)throw new Error("Could not find a matching font-stretch value for "+d);return A}(s.stretch,o),o=function(d,f){if(f[d])return f[d];for(var x=J6[d],y=0;y<x.length;++y)if(f[x[y]])return f[x[y]];throw new Error("Could not find a matching font-style for "+d)}(s.style,o),!(o=function(d,f){if(f[d])return f[d];if(d===400&&f[500])return f[500];if(d===500&&f[400])return f[400];var x=qR[d],y=db(f,tN,x,d<400?-1:1);if(!y)throw new Error("Could not find a matching font-weight for value "+d);return y}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+fb(s)+"'.");return o}function pb(e){return e.trimLeft()}function $R(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function YR(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Uf,gb,mb,mg=["times"];(function(e){var t,n,r,i,s,o,u,d,f,x=function(V){return V=V||{},this.isStrokeTransparent=V.isStrokeTransparent||!1,this.strokeOpacity=V.strokeOpacity||1,this.strokeStyle=V.strokeStyle||"#000000",this.fillStyle=V.fillStyle||"#000000",this.isFillTransparent=V.isFillTransparent||!1,this.fillOpacity=V.fillOpacity||1,this.font=V.font||"10px sans-serif",this.textBaseline=V.textBaseline||"alphabetic",this.textAlign=V.textAlign||"left",this.lineWidth=V.lineWidth||1,this.lineJoin=V.lineJoin||"miter",this.lineCap=V.lineCap||"butt",this.path=V.path||[],this.transform=V.transform!==void 0?V.transform.clone():new d,this.globalCompositeOperation=V.globalCompositeOperation||"normal",this.globalAlpha=V.globalAlpha||1,this.clip_path=V.clip_path||[],this.currentPoint=V.currentPoint||new o,this.miterLimit=V.miterLimit||10,this.lastPoint=V.lastPoint||new o,this.lineDashOffset=V.lineDashOffset||0,this.lineDash=V.lineDash||[],this.margin=V.margin||[0,0,0,0],this.prevPageLastElemOffset=V.prevPageLastElemOffset||0,this.ignoreClearRect=typeof V.ignoreClearRect!="boolean"||V.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new y(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,u=this.internal.Rectangle,d=this.internal.Matrix,f=new x}]);var y=function(V){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var se=V;Object.defineProperty(this,"pdf",{get:function(){return se}});var de=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return de},set:function(Ve){de=!!Ve}});var xe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return xe},set:function(Ve){xe=!!Ve}});var he=0;Object.defineProperty(this,"posX",{get:function(){return he},set:function(Ve){isNaN(Ve)||(he=Ve)}});var Pe=0;Object.defineProperty(this,"posY",{get:function(){return Pe},set:function(Ve){isNaN(Ve)||(Pe=Ve)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(Ve){var fe;typeof Ve=="number"?fe=[Ve,Ve,Ve,Ve]:((fe=new Array(4))[0]=Ve[0],fe[1]=Ve.length>=2?Ve[1]:fe[0],fe[2]=Ve.length>=3?Ve[2]:fe[0],fe[3]=Ve.length>=4?Ve[3]:fe[1]),f.margin=fe}});var Le=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Le},set:function(Ve){Le=Ve}});var Oe=0;Object.defineProperty(this,"lastBreak",{get:function(){return Oe},set:function(Ve){Oe=Ve}});var He=[];Object.defineProperty(this,"pageBreaks",{get:function(){return He},set:function(Ve){He=Ve}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(Ve){Ve instanceof x&&(f=Ve)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(Ve){f.path=Ve}});var qe=[];Object.defineProperty(this,"ctxStack",{get:function(){return qe},set:function(Ve){qe=Ve}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ve){var fe;fe=A(Ve),this.ctx.fillStyle=fe.style,this.ctx.isFillTransparent=fe.a===0,this.ctx.fillOpacity=fe.a,this.pdf.setFillColor(fe.r,fe.g,fe.b,{a:fe.a}),this.pdf.setTextColor(fe.r,fe.g,fe.b,{a:fe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ve){var fe=A(Ve);this.ctx.strokeStyle=fe.style,this.ctx.isStrokeTransparent=fe.a===0,this.ctx.strokeOpacity=fe.a,fe.a===0?this.pdf.setDrawColor(255,255,255):(fe.a,this.pdf.setDrawColor(fe.r,fe.g,fe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ve){["butt","round","square"].indexOf(Ve)!==-1&&(this.ctx.lineCap=Ve,this.pdf.setLineCap(Ve))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ve){isNaN(Ve)||(this.ctx.lineWidth=Ve,this.pdf.setLineWidth(Ve))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ve){["bevel","round","miter"].indexOf(Ve)!==-1&&(this.ctx.lineJoin=Ve,this.pdf.setLineJoin(Ve))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ve){isNaN(Ve)||(this.ctx.miterLimit=Ve,this.pdf.setMiterLimit(Ve))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ve){this.ctx.textBaseline=Ve}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ve){["right","end","center","left","start"].indexOf(Ve)!==-1&&(this.ctx.textAlign=Ve)}});var rt=null;function Ge(Ve,fe){if(rt===null){var bt=function(ct){var $e=[];return Object.keys(ct).forEach(function(re){ct[re].forEach(function(oe){var ve=null;switch(oe){case"bold":ve={family:re,weight:"bold"};break;case"italic":ve={family:re,style:"italic"};break;case"bolditalic":ve={family:re,weight:"bold",style:"italic"};break;case"":case"normal":ve={family:re}}ve!==null&&(ve.ref={name:re,style:oe},$e.push(ve))})}),$e}(Ve.getFontList());rt=function(ct){for(var $e={},re=0;re<ct.length;++re){var oe=h2(ct[re]),ve=oe.family,ze=oe.stretch,Be=oe.style,We=oe.weight;$e[ve]=$e[ve]||{},$e[ve][ze]=$e[ve][ze]||{},$e[ve][ze][Be]=$e[ve][ze][Be]||{},$e[ve][ze][Be][We]=oe}return $e}(bt.concat(fe))}return rt}var vt=null;Object.defineProperty(this,"fontFaces",{get:function(){return vt},set:function(Ve){rt=null,vt=Ve}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ve){var fe;if(this.ctx.font=Ve,(fe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ve))!==null){var bt=fe[1],ct=(fe[2],fe[3]),$e=fe[4],re=(fe[5],fe[6]),oe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec($e)[2];$e=Math.floor(oe==="px"?parseFloat($e)*this.pdf.internal.scaleFactor:oe==="em"?parseFloat($e)*this.pdf.getFontSize():parseFloat($e)*this.pdf.internal.scaleFactor),this.pdf.setFontSize($e);var ve=function(ht){var Dt,dt,kn=[],Et=ht.trim();if(Et==="")return mg;if(Et in hb)return[hb[Et]];for(;Et!=="";){switch(dt=null,Dt=(Et=pb(Et)).charAt(0)){case'"':case"'":dt=$R(Et.substring(1),Dt);break;default:dt=YR(Et)}if(dt===null||(kn.push(dt[0]),(Et=pb(dt[1]))!==""&&Et.charAt(0)!==","))return mg;Et=Et.replace(/^,/,"")}return kn}(re);if(this.fontFaces){var ze=GR(Ge(this.pdf,this.fontFaces),ve.map(function(ht){return{family:ht,stretch:"normal",weight:ct,style:bt}}));this.pdf.setFont(ze.ref.name,ze.ref.style)}else{var Be="";(ct==="bold"||parseInt(ct,10)>=700||bt==="bold")&&(Be="bold"),bt==="italic"&&(Be+="italic"),Be.length===0&&(Be="normal");for(var We="",Qe={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},yt=0;yt<ve.length;yt++){if(this.pdf.internal.getFont(ve[yt],Be,{noFallback:!0,disableWarning:!0})!==void 0){We=ve[yt];break}if(Be==="bolditalic"&&this.pdf.internal.getFont(ve[yt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)We=ve[yt],Be="bold";else if(this.pdf.internal.getFont(ve[yt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){We=ve[yt],Be="normal";break}}if(We===""){for(var xt=0;xt<ve.length;xt++)if(Qe[ve[xt]]){We=Qe[ve[xt]];break}}We=We===""?"Times":We,this.pdf.setFont(We,Be)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ve){this.ctx.globalCompositeOperation=Ve}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ve){this.ctx.globalAlpha=Ve}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ve){this.ctx.lineDashOffset=Ve,Me.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ve){this.ctx.lineDash=Ve,Me.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ve){this.ctx.ignoreClearRect=!!Ve}})};y.prototype.setLineDash=function(V){this.lineDash=V},y.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},y.prototype.fill=function(){R.call(this,"fill",!1)},y.prototype.stroke=function(){R.call(this,"stroke",!1)},y.prototype.beginPath=function(){this.path=[{type:"begin"}]},y.prototype.moveTo=function(V,se){if(isNaN(V)||isNaN(se))throw Dn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var de=this.ctx.transform.applyToPoint(new o(V,se));this.path.push({type:"mt",x:de.x,y:de.y}),this.ctx.lastPoint=new o(V,se)},y.prototype.closePath=function(){var V=new o(0,0),se=0;for(se=this.path.length-1;se!==-1;se--)if(this.path[se].type==="begin"&&Tn(this.path[se+1])==="object"&&typeof this.path[se+1].x=="number"){V=new o(this.path[se+1].x,this.path[se+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(V.x,V.y)},y.prototype.lineTo=function(V,se){if(isNaN(V)||isNaN(se))throw Dn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var de=this.ctx.transform.applyToPoint(new o(V,se));this.path.push({type:"lt",x:de.x,y:de.y}),this.ctx.lastPoint=new o(de.x,de.y)},y.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),R.call(this,null,!0)},y.prototype.quadraticCurveTo=function(V,se,de,xe){if(isNaN(de)||isNaN(xe)||isNaN(V)||isNaN(se))throw Dn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var he=this.ctx.transform.applyToPoint(new o(de,xe)),Pe=this.ctx.transform.applyToPoint(new o(V,se));this.path.push({type:"qct",x1:Pe.x,y1:Pe.y,x:he.x,y:he.y}),this.ctx.lastPoint=new o(he.x,he.y)},y.prototype.bezierCurveTo=function(V,se,de,xe,he,Pe){if(isNaN(he)||isNaN(Pe)||isNaN(V)||isNaN(se)||isNaN(de)||isNaN(xe))throw Dn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Le=this.ctx.transform.applyToPoint(new o(he,Pe)),Oe=this.ctx.transform.applyToPoint(new o(V,se)),He=this.ctx.transform.applyToPoint(new o(de,xe));this.path.push({type:"bct",x1:Oe.x,y1:Oe.y,x2:He.x,y2:He.y,x:Le.x,y:Le.y}),this.ctx.lastPoint=new o(Le.x,Le.y)},y.prototype.arc=function(V,se,de,xe,he,Pe){if(isNaN(V)||isNaN(se)||isNaN(de)||isNaN(xe)||isNaN(he))throw Dn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Pe=!!Pe,!this.ctx.transform.isIdentity){var Le=this.ctx.transform.applyToPoint(new o(V,se));V=Le.x,se=Le.y;var Oe=this.ctx.transform.applyToPoint(new o(0,de)),He=this.ctx.transform.applyToPoint(new o(0,0));de=Math.sqrt(Math.pow(Oe.x-He.x,2)+Math.pow(Oe.y-He.y,2))}Math.abs(he-xe)>=2*Math.PI&&(xe=0,he=2*Math.PI),this.path.push({type:"arc",x:V,y:se,radius:de,startAngle:xe,endAngle:he,counterclockwise:Pe})},y.prototype.arcTo=function(V,se,de,xe,he){throw new Error("arcTo not implemented.")},y.prototype.rect=function(V,se,de,xe){if(isNaN(V)||isNaN(se)||isNaN(de)||isNaN(xe))throw Dn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(V,se),this.lineTo(V+de,se),this.lineTo(V+de,se+xe),this.lineTo(V,se+xe),this.lineTo(V,se),this.lineTo(V+de,se),this.lineTo(V,se)},y.prototype.fillRect=function(V,se,de,xe){if(isNaN(V)||isNaN(se)||isNaN(de)||isNaN(xe))throw Dn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!b.call(this)){var he={};this.lineCap!=="butt"&&(he.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(he.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(V,se,de,xe),this.fill(),he.hasOwnProperty("lineCap")&&(this.lineCap=he.lineCap),he.hasOwnProperty("lineJoin")&&(this.lineJoin=he.lineJoin)}},y.prototype.strokeRect=function(V,se,de,xe){if(isNaN(V)||isNaN(se)||isNaN(de)||isNaN(xe))throw Dn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");P.call(this)||(this.beginPath(),this.rect(V,se,de,xe),this.stroke())},y.prototype.clearRect=function(V,se,de,xe){if(isNaN(V)||isNaN(se)||isNaN(de)||isNaN(xe))throw Dn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(V,se,de,xe))},y.prototype.save=function(V){V=typeof V!="boolean"||V;for(var se=this.pdf.internal.getCurrentPageInfo().pageNumber,de=0;de<this.pdf.internal.getNumberOfPages();de++)this.pdf.setPage(de+1),this.pdf.internal.out("q");if(this.pdf.setPage(se),V){this.ctx.fontSize=this.pdf.internal.getFontSize();var xe=new x(this.ctx);this.ctxStack.push(this.ctx),this.ctx=xe}},y.prototype.restore=function(V){V=typeof V!="boolean"||V;for(var se=this.pdf.internal.getCurrentPageInfo().pageNumber,de=0;de<this.pdf.internal.getNumberOfPages();de++)this.pdf.setPage(de+1),this.pdf.internal.out("Q");this.pdf.setPage(se),V&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},y.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var A=function(V){var se,de,xe,he;if(V.isCanvasGradient===!0&&(V=V.getColor()),!V)return{r:0,g:0,b:0,a:0,style:V};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(V))se=0,de=0,xe=0,he=0;else{var Pe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(V);if(Pe!==null)se=parseInt(Pe[1]),de=parseInt(Pe[2]),xe=parseInt(Pe[3]),he=1;else if((Pe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(V))!==null)se=parseInt(Pe[1]),de=parseInt(Pe[2]),xe=parseInt(Pe[3]),he=parseFloat(Pe[4]);else{if(he=1,typeof V=="string"&&V.charAt(0)!=="#"){var Le=new G6(V);V=Le.ok?Le.toHex():"#000000"}V.length===4?(se=V.substring(1,2),se+=se,de=V.substring(2,3),de+=de,xe=V.substring(3,4),xe+=xe):(se=V.substring(1,3),de=V.substring(3,5),xe=V.substring(5,7)),se=parseInt(se,16),de=parseInt(de,16),xe=parseInt(xe,16)}}return{r:se,g:de,b:xe,a:he,style:V}},b=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},P=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};y.prototype.fillText=function(V,se,de,xe){if(isNaN(se)||isNaN(de)||typeof V!="string")throw Dn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(xe=isNaN(xe)?void 0:xe,!b.call(this)){var he=ue(this.ctx.transform.rotation),Pe=this.ctx.transform.scaleX;q.call(this,{text:V,x:se,y:de,scale:Pe,angle:he,align:this.textAlign,maxWidth:xe})}},y.prototype.strokeText=function(V,se,de,xe){if(isNaN(se)||isNaN(de)||typeof V!="string")throw Dn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!P.call(this)){xe=isNaN(xe)?void 0:xe;var he=ue(this.ctx.transform.rotation),Pe=this.ctx.transform.scaleX;q.call(this,{text:V,x:se,y:de,scale:Pe,renderingMode:"stroke",angle:he,align:this.textAlign,maxWidth:xe})}},y.prototype.measureText=function(V){if(typeof V!="string")throw Dn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var se=this.pdf,de=this.pdf.internal.scaleFactor,xe=se.internal.getFontSize(),he=se.getStringUnitWidth(V)*xe/se.internal.scaleFactor,Pe=function(Le){var Oe=(Le=Le||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Oe}}),this};return new Pe({width:he*=Math.round(96*de/72*1e4)/1e4})},y.prototype.scale=function(V,se){if(isNaN(V)||isNaN(se))throw Dn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var de=new d(V,0,0,se,0,0);this.ctx.transform=this.ctx.transform.multiply(de)},y.prototype.rotate=function(V){if(isNaN(V))throw Dn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var se=new d(Math.cos(V),Math.sin(V),-Math.sin(V),Math.cos(V),0,0);this.ctx.transform=this.ctx.transform.multiply(se)},y.prototype.translate=function(V,se){if(isNaN(V)||isNaN(se))throw Dn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var de=new d(1,0,0,1,V,se);this.ctx.transform=this.ctx.transform.multiply(de)},y.prototype.transform=function(V,se,de,xe,he,Pe){if(isNaN(V)||isNaN(se)||isNaN(de)||isNaN(xe)||isNaN(he)||isNaN(Pe))throw Dn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Le=new d(V,se,de,xe,he,Pe);this.ctx.transform=this.ctx.transform.multiply(Le)},y.prototype.setTransform=function(V,se,de,xe,he,Pe){V=isNaN(V)?1:V,se=isNaN(se)?0:se,de=isNaN(de)?0:de,xe=isNaN(xe)?1:xe,he=isNaN(he)?0:he,Pe=isNaN(Pe)?0:Pe,this.ctx.transform=new d(V,se,de,xe,he,Pe)};var I=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};y.prototype.drawImage=function(V,se,de,xe,he,Pe,Le,Oe,He){var qe=this.pdf.getImageProperties(V),rt=1,Ge=1,vt=1,Ve=1;xe!==void 0&&Oe!==void 0&&(vt=Oe/xe,Ve=He/he,rt=qe.width/xe*Oe/xe,Ge=qe.height/he*He/he),Pe===void 0&&(Pe=se,Le=de,se=0,de=0),xe!==void 0&&Oe===void 0&&(Oe=xe,He=he),xe===void 0&&Oe===void 0&&(Oe=qe.width,He=qe.height);for(var fe,bt=this.ctx.transform.decompose(),ct=ue(bt.rotate.shx),$e=new d,re=($e=($e=($e=$e.multiply(bt.translate)).multiply(bt.skew)).multiply(bt.scale)).applyToRectangle(new u(Pe-se*vt,Le-de*Ve,xe*rt,he*Ge)),oe=j.call(this,re),ve=[],ze=0;ze<oe.length;ze+=1)ve.indexOf(oe[ze])===-1&&ve.push(oe[ze]);if(k(ve),this.autoPaging)for(var Be=ve[0],We=ve[ve.length-1],Qe=Be;Qe<We+1;Qe++){this.pdf.setPage(Qe);var yt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],xt=Qe===1?this.posY+this.margin[0]:this.margin[0],ht=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Dt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],dt=Qe===1?0:ht+(Qe-2)*Dt;if(this.ctx.clip_path.length!==0){var kn=this.path;fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(fe,this.posX+this.margin[3],-dt+xt+this.ctx.prevPageLastElemOffset),M.call(this,"fill",!0),this.path=kn}var Et=JSON.parse(JSON.stringify(re));Et=_([Et],this.posX+this.margin[3],-dt+xt+this.ctx.prevPageLastElemOffset)[0];var ot=(Qe>Be||Qe<We)&&I.call(this);ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],yt,Dt,null).clip().discardPath()),this.pdf.addImage(V,"JPEG",Et.x,Et.y,Et.w,Et.h,null,null,ct),ot&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(V,"JPEG",re.x,re.y,re.w,re.h,null,null,ct)};var j=function(V,se,de){var xe=[];se=se||this.pdf.internal.pageSize.width,de=de||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var he=this.posY+this.ctx.prevPageLastElemOffset;switch(V.type){default:case"mt":case"lt":xe.push(Math.floor((V.y+he)/de)+1);break;case"arc":xe.push(Math.floor((V.y+he-V.radius)/de)+1),xe.push(Math.floor((V.y+he+V.radius)/de)+1);break;case"qct":var Pe=Se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,V.x1,V.y1,V.x,V.y);xe.push(Math.floor((Pe.y+he)/de)+1),xe.push(Math.floor((Pe.y+Pe.h+he)/de)+1);break;case"bct":var Le=_e(this.ctx.lastPoint.x,this.ctx.lastPoint.y,V.x1,V.y1,V.x2,V.y2,V.x,V.y);xe.push(Math.floor((Le.y+he)/de)+1),xe.push(Math.floor((Le.y+Le.h+he)/de)+1);break;case"rect":xe.push(Math.floor((V.y+he)/de)+1),xe.push(Math.floor((V.y+V.h+he)/de)+1)}for(var Oe=0;Oe<xe.length;Oe+=1)for(;this.pdf.internal.getNumberOfPages()<xe[Oe];)C.call(this);return xe},C=function(){var V=this.fillStyle,se=this.strokeStyle,de=this.font,xe=this.lineCap,he=this.lineWidth,Pe=this.lineJoin;this.pdf.addPage(),this.fillStyle=V,this.strokeStyle=se,this.font=de,this.lineCap=xe,this.lineWidth=he,this.lineJoin=Pe},_=function(V,se,de){for(var xe=0;xe<V.length;xe++)switch(V[xe].type){case"bct":V[xe].x2+=se,V[xe].y2+=de;case"qct":V[xe].x1+=se,V[xe].y1+=de;case"mt":case"lt":case"arc":default:V[xe].x+=se,V[xe].y+=de}return V},k=function(V){return V.sort(function(se,de){return se-de})},R=function(V,se){for(var de,xe,he=this.fillStyle,Pe=this.strokeStyle,Le=this.lineCap,Oe=this.lineWidth,He=Math.abs(Oe*this.ctx.transform.scaleX),qe=this.lineJoin,rt=JSON.parse(JSON.stringify(this.path)),Ge=JSON.parse(JSON.stringify(this.path)),vt=[],Ve=0;Ve<Ge.length;Ve++)if(Ge[Ve].x!==void 0)for(var fe=j.call(this,Ge[Ve]),bt=0;bt<fe.length;bt+=1)vt.indexOf(fe[bt])===-1&&vt.push(fe[bt]);for(var ct=0;ct<vt.length;ct++)for(;this.pdf.internal.getNumberOfPages()<vt[ct];)C.call(this);if(k(vt),this.autoPaging)for(var $e=vt[0],re=vt[vt.length-1],oe=$e;oe<re+1;oe++){this.pdf.setPage(oe),this.fillStyle=he,this.strokeStyle=Pe,this.lineCap=Le,this.lineWidth=He,this.lineJoin=qe;var ve=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ze=oe===1?this.posY+this.margin[0]:this.margin[0],Be=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],We=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Qe=oe===1?0:Be+(oe-2)*We;if(this.ctx.clip_path.length!==0){var yt=this.path;de=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(de,this.posX+this.margin[3],-Qe+ze+this.ctx.prevPageLastElemOffset),M.call(this,V,!0),this.path=yt}if(xe=JSON.parse(JSON.stringify(rt)),this.path=_(xe,this.posX+this.margin[3],-Qe+ze+this.ctx.prevPageLastElemOffset),se===!1||oe===0){var xt=(oe>$e||oe<re)&&I.call(this);xt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ve,We,null).clip().discardPath()),M.call(this,V,se),xt&&this.pdf.restoreGraphicsState()}this.lineWidth=Oe}else this.lineWidth=He,M.call(this,V,se),this.lineWidth=Oe;this.path=rt},M=function(V,se){if((V!=="stroke"||se||!P.call(this))&&(V==="stroke"||se||!b.call(this))){for(var de,xe,he=[],Pe=this.path,Le=0;Le<Pe.length;Le++){var Oe=Pe[Le];switch(Oe.type){case"begin":he.push({begin:!0});break;case"close":he.push({close:!0});break;case"mt":he.push({start:Oe,deltas:[],abs:[]});break;case"lt":var He=he.length;if(Pe[Le-1]&&!isNaN(Pe[Le-1].x)&&(de=[Oe.x-Pe[Le-1].x,Oe.y-Pe[Le-1].y],He>0)){for(;He>=0;He--)if(he[He-1].close!==!0&&he[He-1].begin!==!0){he[He-1].deltas.push(de),he[He-1].abs.push(Oe);break}}break;case"bct":de=[Oe.x1-Pe[Le-1].x,Oe.y1-Pe[Le-1].y,Oe.x2-Pe[Le-1].x,Oe.y2-Pe[Le-1].y,Oe.x-Pe[Le-1].x,Oe.y-Pe[Le-1].y],he[he.length-1].deltas.push(de);break;case"qct":var qe=Pe[Le-1].x+2/3*(Oe.x1-Pe[Le-1].x),rt=Pe[Le-1].y+2/3*(Oe.y1-Pe[Le-1].y),Ge=Oe.x+2/3*(Oe.x1-Oe.x),vt=Oe.y+2/3*(Oe.y1-Oe.y),Ve=Oe.x,fe=Oe.y;de=[qe-Pe[Le-1].x,rt-Pe[Le-1].y,Ge-Pe[Le-1].x,vt-Pe[Le-1].y,Ve-Pe[Le-1].x,fe-Pe[Le-1].y],he[he.length-1].deltas.push(de);break;case"arc":he.push({deltas:[],abs:[],arc:!0}),Array.isArray(he[he.length-1].abs)&&he[he.length-1].abs.push(Oe)}}xe=se?null:V==="stroke"?"stroke":"fill";for(var bt=!1,ct=0;ct<he.length;ct++)if(he[ct].arc)for(var $e=he[ct].abs,re=0;re<$e.length;re++){var oe=$e[re];oe.type==="arc"?K.call(this,oe.x,oe.y,oe.radius,oe.startAngle,oe.endAngle,oe.counterclockwise,void 0,se,!bt):X.call(this,oe.x,oe.y),bt=!0}else if(he[ct].close===!0)this.pdf.internal.out("h"),bt=!1;else if(he[ct].begin!==!0){var ve=he[ct].start.x,ze=he[ct].start.y;Q.call(this,he[ct].deltas,ve,ze),bt=!0}xe&&te.call(this,xe),se&&be.call(this)}},ne=function(V){var se=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,de=se*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return V-de;case"top":return V+se-de;case"hanging":return V+se-2*de;case"middle":return V+se/2-de;case"ideographic":return V;case"alphabetic":default:return V}},U=function(V){return V+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};y.prototype.createLinearGradient=function(){var V=function(){};return V.colorStops=[],V.addColorStop=function(se,de){this.colorStops.push([se,de])},V.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},V.isCanvasGradient=!0,V},y.prototype.createPattern=function(){return this.createLinearGradient()},y.prototype.createRadialGradient=function(){return this.createLinearGradient()};var K=function(V,se,de,xe,he,Pe,Le,Oe,He){for(var qe=pe.call(this,de,xe,he,Pe),rt=0;rt<qe.length;rt++){var Ge=qe[rt];rt===0&&(He?$.call(this,Ge.x1+V,Ge.y1+se):X.call(this,Ge.x1+V,Ge.y1+se)),J.call(this,V,se,Ge.x2,Ge.y2,Ge.x3,Ge.y3,Ge.x4,Ge.y4)}Oe?be.call(this):te.call(this,Le)},te=function(V){switch(V){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},be=function(){this.pdf.clip(),this.pdf.discardPath()},$=function(V,se){this.pdf.internal.out(n(V)+" "+r(se)+" m")},q=function(V){var se;switch(V.align){case"right":case"end":se="right";break;case"center":se="center";break;case"left":case"start":default:se="left"}var de=this.pdf.getTextDimensions(V.text),xe=ne.call(this,V.y),he=U.call(this,xe)-de.h,Pe=this.ctx.transform.applyToPoint(new o(V.x,xe)),Le=this.ctx.transform.decompose(),Oe=new d;Oe=(Oe=(Oe=Oe.multiply(Le.translate)).multiply(Le.skew)).multiply(Le.scale);for(var He,qe,rt,Ge=this.ctx.transform.applyToRectangle(new u(V.x,xe,de.w,de.h)),vt=Oe.applyToRectangle(new u(V.x,he,de.w,de.h)),Ve=j.call(this,vt),fe=[],bt=0;bt<Ve.length;bt+=1)fe.indexOf(Ve[bt])===-1&&fe.push(Ve[bt]);if(k(fe),this.autoPaging)for(var ct=fe[0],$e=fe[fe.length-1],re=ct;re<$e+1;re++){this.pdf.setPage(re);var oe=re===1?this.posY+this.margin[0]:this.margin[0],ve=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ze=this.pdf.internal.pageSize.height-this.margin[2],Be=ze-this.margin[0],We=this.pdf.internal.pageSize.width-this.margin[1],Qe=We-this.margin[3],yt=re===1?0:ve+(re-2)*Be;if(this.ctx.clip_path.length!==0){var xt=this.path;He=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(He,this.posX+this.margin[3],-1*yt+oe),M.call(this,"fill",!0),this.path=xt}var ht=_([JSON.parse(JSON.stringify(vt))],this.posX+this.margin[3],-yt+oe+this.ctx.prevPageLastElemOffset)[0];V.scale>=.01&&(qe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(qe*V.scale),rt=this.lineWidth,this.lineWidth=rt*V.scale);var Dt=this.autoPaging!=="text";if(Dt||ht.y+ht.h<=ze){if(Dt||ht.y>=oe&&ht.x<=We){var dt=Dt?V.text:this.pdf.splitTextToSize(V.text,V.maxWidth||We-ht.x)[0],kn=_([JSON.parse(JSON.stringify(Ge))],this.posX+this.margin[3],-yt+oe+this.ctx.prevPageLastElemOffset)[0],Et=Dt&&(re>ct||re<$e)&&I.call(this);Et&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Qe,Be,null).clip().discardPath()),this.pdf.text(dt,kn.x,kn.y,{angle:V.angle,align:se,renderingMode:V.renderingMode}),Et&&this.pdf.restoreGraphicsState()}}else ht.y<ze&&(this.ctx.prevPageLastElemOffset+=ze-ht.y);V.scale>=.01&&(this.pdf.setFontSize(qe),this.lineWidth=rt)}else V.scale>=.01&&(qe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(qe*V.scale),rt=this.lineWidth,this.lineWidth=rt*V.scale),this.pdf.text(V.text,Pe.x+this.posX,Pe.y+this.posY,{angle:V.angle,align:se,renderingMode:V.renderingMode,maxWidth:V.maxWidth}),V.scale>=.01&&(this.pdf.setFontSize(qe),this.lineWidth=rt)},X=function(V,se,de,xe){de=de||0,xe=xe||0,this.pdf.internal.out(n(V+de)+" "+r(se+xe)+" l")},Q=function(V,se,de){return this.pdf.lines(V,se,de,null,null)},J=function(V,se,de,xe,he,Pe,Le,Oe){this.pdf.internal.out([t(i(de+V)),t(s(xe+se)),t(i(he+V)),t(s(Pe+se)),t(i(Le+V)),t(s(Oe+se)),"c"].join(" "))},pe=function(V,se,de,xe){for(var he=2*Math.PI,Pe=Math.PI/2;se>de;)se-=he;var Le=Math.abs(de-se);Le<he&&xe&&(Le=he-Le);for(var Oe=[],He=xe?-1:1,qe=se;Le>1e-5;){var rt=qe+He*Math.min(Le,Pe);Oe.push(ge.call(this,V,qe,rt)),Le-=Math.abs(rt-qe),qe=rt}return Oe},ge=function(V,se,de){var xe=(de-se)/2,he=V*Math.cos(xe),Pe=V*Math.sin(xe),Le=he,Oe=-Pe,He=Le*Le+Oe*Oe,qe=He+Le*he+Oe*Pe,rt=4/3*(Math.sqrt(2*He*qe)-qe)/(Le*Pe-Oe*he),Ge=Le-rt*Oe,vt=Oe+rt*Le,Ve=Ge,fe=-vt,bt=xe+se,ct=Math.cos(bt),$e=Math.sin(bt);return{x1:V*Math.cos(se),y1:V*Math.sin(se),x2:Ge*ct-vt*$e,y2:Ge*$e+vt*ct,x3:Ve*ct-fe*$e,y3:Ve*$e+fe*ct,x4:V*Math.cos(de),y4:V*Math.sin(de)}},ue=function(V){return 180*V/Math.PI},Se=function(V,se,de,xe,he,Pe){var Le=V+.5*(de-V),Oe=se+.5*(xe-se),He=he+.5*(de-he),qe=Pe+.5*(xe-Pe),rt=Math.min(V,he,Le,He),Ge=Math.max(V,he,Le,He),vt=Math.min(se,Pe,Oe,qe),Ve=Math.max(se,Pe,Oe,qe);return new u(rt,vt,Ge-rt,Ve-vt)},_e=function(V,se,de,xe,he,Pe,Le,Oe){var He,qe,rt,Ge,vt,Ve,fe,bt,ct,$e,re,oe,ve,ze,Be=de-V,We=xe-se,Qe=he-de,yt=Pe-xe,xt=Le-he,ht=Oe-Pe;for(qe=0;qe<41;qe++)ct=(fe=(rt=V+(He=qe/40)*Be)+He*((vt=de+He*Qe)-rt))+He*(vt+He*(he+He*xt-vt)-fe),$e=(bt=(Ge=se+He*We)+He*((Ve=xe+He*yt)-Ge))+He*(Ve+He*(Pe+He*ht-Ve)-bt),qe==0?(re=ct,oe=$e,ve=ct,ze=$e):(re=Math.min(re,ct),oe=Math.min(oe,$e),ve=Math.max(ve,ct),ze=Math.max(ze,$e));return new u(Math.round(re),Math.round(oe),Math.round(ve-re),Math.round(ze-oe))},Me=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var V,se,de=(V=this.ctx.lineDash,se=this.ctx.lineDashOffset,JSON.stringify({lineDash:V,lineDashOffset:se}));this.prevLineDash!==de&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=de)}}})(Rt.API),function(e){var t=function(s){var o,u,d,f,x,y,A,b,P,I;for(u=[],d=0,f=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;f>d;d+=4)(x=(s.charCodeAt(d)<<24)+(s.charCodeAt(d+1)<<16)+(s.charCodeAt(d+2)<<8)+s.charCodeAt(d+3))!==0?(y=(x=((x=((x=((x=(x-(I=x%85))/85)-(P=x%85))/85)-(b=x%85))/85)-(A=x%85))/85)%85,u.push(y+33,A+33,b+33,P+33,I+33)):u.push(122);return function(j,C){for(var _=C;_>0;_--)j.pop()}(u,o.length),String.fromCharCode.apply(String,u)+"~>"},n=function(s){var o,u,d,f,x,y=String,A="length",b=255,P="charCodeAt",I="slice",j="replace";for(s[I](-2),s=s[I](0,-2)[j](/\s/g,"")[j]("z","!!!!!"),d=[],f=0,x=(s+=o="uuuuu"[I](s[A]%5||5))[A];x>f;f+=5)u=52200625*(s[P](f)-33)+614125*(s[P](f+1)-33)+7225*(s[P](f+2)-33)+85*(s[P](f+3)-33)+(s[P](f+4)-33),d.push(b&u>>24,b&u>>16,b&u>>8,b&u);return function(C,_){for(var k=_;k>0;k--)C.pop()}(d,o[A]),y.fromCharCode.apply(y,d)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var u="",d=0;d<s.length;d+=2)u+=String.fromCharCode("0x"+(s[d]+s[d+1]));return u},i=function(s){for(var o=new Uint8Array(s.length),u=s.length;u--;)o[u]=s.charCodeAt(u);return s=(o=a2(o)).reduce(function(d,f){return d+String.fromCharCode(f)},"")};e.processDataByFilters=function(s,o){var u=0,d=s||"",f=[];for(typeof(o=o||[])=="string"&&(o=[o]),u=0;u<o.length;u+=1)switch(o[u]){case"ASCII85Decode":case"/ASCII85Decode":d=n(d),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=t(d),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=r(d),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=d.split("").map(function(x){return("0"+x.charCodeAt().toString(16)).slice(-2)}).join("")+">",f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=i(d),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[u]+'" is not implemented')}return{data:d,reverseChain:f.reverse().join(" ")}}}(Rt.API),function(e){e.loadFile=function(t,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var u=void 0;try{u=function(d,f,x){var y=new XMLHttpRequest,A=0,b=function(P){var I=P.length,j=[],C=String.fromCharCode;for(A=0;A<I;A+=1)j.push(C(255&P.charCodeAt(A)));return j.join("")};if(y.open("GET",d,!f),y.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(y.onload=function(){y.status===200?x(b(this.responseText)):x(void 0)}),y.send(null),f&&y.status===200)return b(y.responseText)}(i,s,o)}catch{}return u}(t,n,r)},e.loadImageFile=e.loadFile}(Rt.API),function(e){function t(){return(Ft.html2canvas?Promise.resolve(Ft.html2canvas):wl(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(Ft.DOMPurify?Promise.resolve(Ft.DOMPurify):wl(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var u=Tn(o);return u==="undefined"?"undefined":u==="string"||o instanceof String?"string":u==="number"||o instanceof Number?"number":u==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":u==="object"?"object":"unknown"},i=function(o,u){var d=document.createElement(o);for(var f in u.className&&(d.className=u.className),u.innerHTML&&u.dompurify&&(d.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)d.style[f]=u.style[f];return d},s=function o(u){var d=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),f=o.convert(Promise.resolve(),d);return f=(f=f.setProgress(1,o,1,[o])).set(u)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,u){return o.__proto__=u||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,u){return this.then(function(){switch(u=u||function(d){switch(r(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(d){return this.set({src:i("div",{innerHTML:o,dompurify:d})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=function d(f,x){for(var y=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),A=f.firstChild;A;A=A.nextSibling)x!==!0&&A.nodeType===1&&A.nodeName==="SCRIPT"||y.appendChild(d(A,x));return f.nodeType===1&&(f.nodeName==="CANVAS"?(y.width=f.width,y.height=f.height,y.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(y.value=f.value),y.addEventListener("load",function(){y.scrollTop=f.scrollTop,y.scrollLeft=f.scrollLeft},!0)),y}(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(u){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,u(this.prop.container,d)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(u){var d=this.opt.jsPDF,f=this.opt.fontFaces,x=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,y=Object.assign({async:!0,allowTaint:!0,scale:x,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete y.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=f,f)for(var A=0;A<f.length;++A){var b=f[A],P=b.src.find(function(I){return I.format==="truetype"});P&&d.addFont(P.url,b.ref.name,b.ref.style)}return y.windowHeight=y.windowHeight||0,y.windowHeight=y.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):y.windowHeight,d.context2d.save(!0),u(this.prop.container,y)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,u,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(o,u):this.outputPdf(o,u)},s.prototype.outputPdf=function(o,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,u)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var u=Object.keys(o||{}).map(function(d){if(d in s.template.prop)return function(){this.prop[d]=o[d]};switch(d){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[d]=o[d]}}},this);return this.then(function(){return this.thenList(u)})},s.prototype.get=function(o,u){return this.then(function(){var d=o in s.template.prop?this.prop[o]:this.opt[o];return u?u(d):d})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function u(d,f){return Math.floor(d*f/72*96)}return this.then(function(){(o=o||Rt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:u(o.inner.width,o.k),height:u(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,u,d,f){return o!=null&&(this.progress.val=o),u!=null&&(this.progress.state=u),d!=null&&(this.progress.n=d),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,u,d,f){return this.setProgress(o?this.progress.val+o:null,u||null,d?this.progress.n+d:null,f?this.progress.stack.concat(f):null)},s.prototype.then=function(o,u){var d=this;return this.thenCore(o,u,function(f,x){return d.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(y){return d.updateProgress(null,f),y}).then(f,x).then(function(y){return d.updateProgress(1),y})})},s.prototype.thenCore=function(o,u,d){d=d||Promise.prototype.then,o&&(o=o.bind(this)),u&&(u=u.bind(this));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),x=d.call(f,o,u);return s.convert(x,this.__proto__)},s.prototype.thenExternal=function(o,u){return Promise.prototype.then.call(this,o,u)},s.prototype.thenList=function(o){var u=this;return o.forEach(function(d){u=u.thenCore(d)}),u},s.prototype.catch=function(o){o&&(o=o.bind(this));var u=Promise.prototype.catch.call(this,o);return s.convert(u,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Rt.getPageSize=function(o,u,d){if(Tn(o)==="object"){var f=o;o=f.orientation,u=f.unit||u,d=f.format||d}u=u||"mm",d=d||"a4",o=(""+(o||"P")).toLowerCase();var x,y=(""+d).toLowerCase(),A={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":x=1;break;case"mm":x=72/25.4;break;case"cm":x=72/2.54;break;case"in":x=72;break;case"px":x=.75;break;case"pc":case"em":x=12;break;case"ex":x=6;break;default:throw"Invalid unit: "+u}var b,P=0,I=0;if(A.hasOwnProperty(y))P=A[y][1]/x,I=A[y][0]/x;else try{P=d[1],I=d[0]}catch{throw new Error("Invalid format: "+d)}if(o==="p"||o==="portrait")o="p",I>P&&(b=I,I=P,P=b);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",P>I&&(b=I,I=P,P=b)}return{width:I,height:P,unit:u,k:x,orientation:o}},e.html=function(o,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(h2):null;var d=new s(u);return u.worker?d:d.from(o).doCallback()}}(Rt.API),Rt.API.addJS=function(e){return mb=e,this.internal.events.subscribe("postPutResources",function(){Uf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Uf+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),gb=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+mb+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Uf!==void 0&&gb!==void 0&&this.internal.out("/Names <</JavaScript "+Uf+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],u=r.exec(o);if(u!=null){var d=u[1];n.internal.newObjectDeferredBegin(d,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,x=[];for(s=0;s<f;s++){var y=n.internal.newObject();x.push(y);var A=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+A.objId+" 0 R /XYZ null null null]>> endobj")}var b=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<x.length;s++)n.internal.write("(page_"+(s+1)+")"+x[s]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+b+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var u=this.count=this.count_r({count:0},o);if(u>0&&this.line("/Count "+u),o.options&&o.options.pageNumber){var d=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+d.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var f=0;f<r.children.length;f++)this.renderItems(r.children[f])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(Rt.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,i,s,o,u){var d,f=this.decode.DCT_DECODE,x=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(d=function(y){for(var A,b=256*y.charCodeAt(4)+y.charCodeAt(5),P=y.length,I={width:0,height:0,numcomponents:1},j=4;j<P;j+=2){if(j+=b,t.indexOf(y.charCodeAt(j+1))!==-1){A=256*y.charCodeAt(j+5)+y.charCodeAt(j+6),I={width:256*y.charCodeAt(j+7)+y.charCodeAt(j+8),height:A,numcomponents:y.charCodeAt(j+9)};break}b=256*y.charCodeAt(j+2)+y.charCodeAt(j+3)}return I}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}x={data:n,width:d.width,height:d.height,colorSpace:u,bitsPerComponent:8,filter:f,index:r,alias:i}}return x}}(Rt.API);var Xc,Vf,xb,yb,vb,XR=function(){var e,t,n;function r(s){var o,u,d,f,x,y,A,b,P,I,j,C,_,k;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},y=null;;){switch(o=this.readUInt32(),P=(function(){var R,M;for(M=[],R=0;R<4;++R)M.push(String.fromCharCode(this.data[this.pos++]));return M}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":y&&this.animation.frames.push(y),this.pos+=4,y={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},x=this.readUInt16(),f=this.readUInt16()||100,y.delay=1e3*x/f,y.disposeOp=this.data[this.pos++],y.blendOp=this.data[this.pos++],y.data=[];break;case"IDAT":case"fdAT":for(P==="fdAT"&&(this.pos+=4,o-=4),s=(y!=null?y.data:void 0)||this.imgData,C=0;0<=o?C<o:C>o;0<=o?++C:--C)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(d=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>d)throw new Error("More transparent colors than palette size");if((I=d-this.transparency.indexed.length)>0)for(_=0;0<=I?_<I:_>I;0<=I?++_:--_)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":A=(j=this.read(o)).indexOf(0),b=String.fromCharCode.apply(String,j.slice(0,A)),this.text[b]=String.fromCharCode.apply(String,j.slice(A+1));break;case"IEND":return y&&this.animation.frames.push(y),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(k=this.colorType)===4||k===6,u=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*u,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,u;for(u=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)u.push(this.data[this.pos++]);return u},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,u=new Uint8Array(this.width*this.height*o),d=0,f=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function x(y,A,b,P){var I,j,C,_,k,R,M,ne,U,K,te,be,$,q,X,Q,J,pe,ge,ue,Se,_e=Math.ceil((f.width-y)/b),Me=Math.ceil((f.height-A)/P),V=f.width==_e&&f.height==Me;for(q=o*_e,be=V?u:new Uint8Array(q*Me),R=s.length,$=0,j=0;$<Me&&d<R;){switch(s[d++]){case 0:for(_=J=0;J<q;_=J+=1)be[j++]=s[d++];break;case 1:for(_=pe=0;pe<q;_=pe+=1)I=s[d++],k=_<o?0:be[j-o],be[j++]=(I+k)%256;break;case 2:for(_=ge=0;ge<q;_=ge+=1)I=s[d++],C=(_-_%o)/o,X=$&&be[($-1)*q+C*o+_%o],be[j++]=(X+I)%256;break;case 3:for(_=ue=0;ue<q;_=ue+=1)I=s[d++],C=(_-_%o)/o,k=_<o?0:be[j-o],X=$&&be[($-1)*q+C*o+_%o],be[j++]=(I+Math.floor((k+X)/2))%256;break;case 4:for(_=Se=0;Se<q;_=Se+=1)I=s[d++],C=(_-_%o)/o,k=_<o?0:be[j-o],$===0?X=Q=0:(X=be[($-1)*q+C*o+_%o],Q=C&&be[($-1)*q+(C-1)*o+_%o]),M=k+X-Q,ne=Math.abs(M-k),K=Math.abs(M-X),te=Math.abs(M-Q),U=ne<=K&&ne<=te?k:K<=te?X:Q,be[j++]=(I+U)%256;break;default:throw new Error("Invalid filter algorithm: "+s[d-1])}if(!V){var se=((A+$*P)*f.width+y)*o,de=$*q;for(_=0;_<_e;_+=1){for(var xe=0;xe<o;xe+=1)u[se++]=be[de++];se+=(b-1)*o}}$++}}return s=_R(s),f.interlaceMethod==1?(x(0,0,8,8),x(4,0,8,8),x(0,4,4,8),x(2,0,4,4),x(0,2,2,4),x(1,0,2,2),x(0,1,1,2)):x(0,0,1,1),u},r.prototype.decodePalette=function(){var s,o,u,d,f,x,y,A,b;for(u=this.palette,x=this.transparency.indexed||[],f=new Uint8Array((x.length||0)+u.length),d=0,s=0,o=y=0,A=u.length;y<A;o=y+=3)f[d++]=u[o],f[d++]=u[o+1],f[d++]=u[o+2],f[d++]=(b=x[s++])!=null?b:255;return f},r.prototype.copyToImageData=function(s,o){var u,d,f,x,y,A,b,P,I,j,C;if(d=this.colors,I=null,u=this.hasAlphaChannel,this.palette.length&&(I=(C=this._decodedPalette)!=null?C:this._decodedPalette=this.decodePalette(),d=4,u=!0),P=(f=s.data||s).length,y=I||o,x=A=0,d===1)for(;x<P;)b=I?4*o[x/4]:A,j=y[b++],f[x++]=j,f[x++]=j,f[x++]=j,f[x++]=u?y[b++]:255,A=b;else for(;x<P;)b=I?4*o[x/4]:A,f[x++]=y[b++],f[x++]=y[b++],f[x++]=y[b++],f[x++]=u?y[b++]:255,A=b},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(Ft)==="[object Window]"){try{t=Ft.document.createElement("canvas"),n=t.getContext("2d")}catch{return!1}return!0}return!1};return i(),e=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,u,d,f,x,y,A,b;if(this.animation){for(b=[],u=x=0,y=(A=this.animation.frames).length;x<y;u=++x)o=A[u],d=s.createImageData(o.width,o.height),f=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(d,f),o.imageData=d,b.push(o.image=e(d));return b}},r.prototype.renderFrame=function(s,o){var u,d,f;return u=(d=this.animation.frames)[o],f=d[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(f!=null?f.disposeOp:void 0)===1?s.clearRect(f.xOffset,f.yOffset,f.width,f.height):(f!=null?f.disposeOp:void 0)===2&&s.putImageData(f.imageData,f.xOffset,f.yOffset),u.blendOp===0&&s.clearRect(u.xOffset,u.yOffset,u.width,u.height),s.drawImage(u.image,u.xOffset,u.yOffset)},r.prototype.animate=function(s){var o,u,d,f,x,y,A=this;return u=0,y=this.animation,f=y.numFrames,d=y.frames,x=y.numPlays,(o=function(){var b,P;if(b=u++%f,P=d[b],A.renderFrame(s,b),f>1&&u/f<x)return A.animation._timeout=setTimeout(o,P.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,u;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(u=o.createImageData(this.width,this.height),this.copyToImageData(u,this.decodePixels()),o.putImageData(u,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function KR(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,i=e[t++],s=i>>7,o=1<<(7&i)+1;e[t++],e[t++];var u=null,d=null;s&&(u=t,d=o,t+=3*o);var f=!0,x=[],y=0,A=null,b=0,P=null;for(this.width=n,this.height=r;f&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,P=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!(($=e[t++])>=0))throw Error("Invalid block size");if($===0)break;t+=$}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var I=e[t++];y=e[t++]|e[t++]<<8,A=e[t++],!(1&I)&&(A=null),b=I>>2&7,t++;break;case 254:for(;;){if(!(($=e[t++])>=0))throw Error("Invalid block size");if($===0)break;t+=$}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var j=e[t++]|e[t++]<<8,C=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,k=e[t++]|e[t++]<<8,R=e[t++],M=R>>6&1,ne=1<<(7&R)+1,U=u,K=d,te=!1;R>>7&&(te=!0,U=t,K=ne,t+=3*ne);var be=t;for(t++;;){var $;if(!(($=e[t++])>=0))throw Error("Invalid block size");if($===0)break;t+=$}x.push({x:j,y:C,width:_,height:k,has_local_palette:te,palette_offset:U,palette_size:K,data_offset:be,data_length:t-be,transparent_index:A,interlaced:!!M,delay:y,disposal:b});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return x.length},this.loopCount=function(){return P},this.frameInfo=function(q){if(q<0||q>=x.length)throw new Error("Frame index out of range.");return x[q]},this.decodeAndBlitFrameBGRA=function(q,X){var Q=this.frameInfo(q),J=Q.width*Q.height,pe=new Uint8Array(J);wb(e,Q.data_offset,pe,J);var ge=Q.palette_offset,ue=Q.transparent_index;ue===null&&(ue=256);var Se=Q.width,_e=n-Se,Me=Se,V=4*(Q.y*n+Q.x),se=4*((Q.y+Q.height)*n+Q.x),de=V,xe=4*_e;Q.interlaced===!0&&(xe+=4*n*7);for(var he=8,Pe=0,Le=pe.length;Pe<Le;++Pe){var Oe=pe[Pe];if(Me===0&&(Me=Se,(de+=xe)>=se&&(xe=4*_e+4*n*(he-1),de=V+(Se+_e)*(he<<1),he>>=1)),Oe===ue)de+=4;else{var He=e[ge+3*Oe],qe=e[ge+3*Oe+1],rt=e[ge+3*Oe+2];X[de++]=rt,X[de++]=qe,X[de++]=He,X[de++]=255}--Me}},this.decodeAndBlitFrameRGBA=function(q,X){var Q=this.frameInfo(q),J=Q.width*Q.height,pe=new Uint8Array(J);wb(e,Q.data_offset,pe,J);var ge=Q.palette_offset,ue=Q.transparent_index;ue===null&&(ue=256);var Se=Q.width,_e=n-Se,Me=Se,V=4*(Q.y*n+Q.x),se=4*((Q.y+Q.height)*n+Q.x),de=V,xe=4*_e;Q.interlaced===!0&&(xe+=4*n*7);for(var he=8,Pe=0,Le=pe.length;Pe<Le;++Pe){var Oe=pe[Pe];if(Me===0&&(Me=Se,(de+=xe)>=se&&(xe=4*_e+4*n*(he-1),de=V+(Se+_e)*(he<<1),he>>=1)),Oe===ue)de+=4;else{var He=e[ge+3*Oe],qe=e[ge+3*Oe+1],rt=e[ge+3*Oe+2];X[de++]=He,X[de++]=qe,X[de++]=rt,X[de++]=255}--Me}}}function wb(e,t,n,r){for(var i=e[t++],s=1<<i,o=s+1,u=o+1,d=i+1,f=(1<<d)-1,x=0,y=0,A=0,b=e[t++],P=new Int32Array(4096),I=null;;){for(;x<16&&b!==0;)y|=e[t++]<<x,x+=8,b===1?b=e[t++]:--b;if(x<d)break;var j=y&f;if(y>>=d,x-=d,j!==s){if(j===o)break;for(var C=j<u?j:I,_=0,k=C;k>s;)k=P[k]>>8,++_;var R=k;if(A+_+(C!==j?1:0)>r)return void Dn.log("Warning, gif stream longer than expected.");n[A++]=R;var M=A+=_;for(C!==j&&(n[A++]=R),k=C;_--;)k=P[k],n[--M]=255&k,k>>=8;I!==null&&u<4096&&(P[u++]=I<<8|R,u>=f+1&&d<12&&(++d,f=f<<1|1)),I=j}else u=o+1,f=(1<<(d=i+1))-1,I=null}return A!==r&&Dn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function xg(e){var t,n,r,i,s,o=Math.floor,u=new Array(64),d=new Array(64),f=new Array(64),x=new Array(64),y=new Array(65535),A=new Array(65535),b=new Array(64),P=new Array(64),I=[],j=0,C=7,_=new Array(64),k=new Array(64),R=new Array(64),M=new Array(256),ne=new Array(2048),U=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],K=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],te=[0,1,2,3,4,5,6,7,8,9,10,11],be=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],$=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],q=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],X=[0,1,2,3,4,5,6,7,8,9,10,11],Q=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],J=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function pe(V,se){for(var de=0,xe=0,he=new Array,Pe=1;Pe<=16;Pe++){for(var Le=1;Le<=V[Pe];Le++)he[se[xe]]=[],he[se[xe]][0]=de,he[se[xe]][1]=Pe,xe++,de++;de*=2}return he}function ge(V){for(var se=V[0],de=V[1]-1;de>=0;)se&1<<de&&(j|=1<<C),de--,--C<0&&(j==255?(ue(255),ue(0)):ue(j),C=7,j=0)}function ue(V){I.push(V)}function Se(V){ue(V>>8&255),ue(255&V)}function _e(V,se,de,xe,he){for(var Pe,Le=he[0],Oe=he[240],He=function($e,re){var oe,ve,ze,Be,We,Qe,yt,xt,ht,Dt,dt=0;for(ht=0;ht<8;++ht){oe=$e[dt],ve=$e[dt+1],ze=$e[dt+2],Be=$e[dt+3],We=$e[dt+4],Qe=$e[dt+5],yt=$e[dt+6];var kn=oe+(xt=$e[dt+7]),Et=oe-xt,ot=ve+yt,Mt=ve-yt,jt=ze+Qe,un=ze-Qe,tn=Be+We,Ks=Be-We,qn=kn+tn,$t=kn-tn,ci=ot+jt,Wn=ot-jt;$e[dt]=qn+ci,$e[dt+4]=qn-ci;var Vt=.707106781*(Wn+$t);$e[dt+2]=$t+Vt,$e[dt+6]=$t-Vt;var Xt=.382683433*((qn=Ks+un)-(Wn=Mt+Et)),Zs=.5411961*qn+Xt,pn=1.306562965*Wn+Xt,ui=.707106781*(ci=un+Mt),Di=Et+ui,_t=Et-ui;$e[dt+5]=_t+Zs,$e[dt+3]=_t-Zs,$e[dt+1]=Di+pn,$e[dt+7]=Di-pn,dt+=8}for(dt=0,ht=0;ht<8;++ht){oe=$e[dt],ve=$e[dt+8],ze=$e[dt+16],Be=$e[dt+24],We=$e[dt+32],Qe=$e[dt+40],yt=$e[dt+48];var us=oe+(xt=$e[dt+56]),Jr=oe-xt,ei=ve+yt,gn=ve-yt,Ln=ze+Qe,Rn=ze-Qe,mt=Be+We,vi=Be-We,Ri=us+mt,Mn=us-mt,ti=ei+Ln,Mi=ei-Ln;$e[dt]=Ri+ti,$e[dt+32]=Ri-ti;var di=.707106781*(Mi+Mn);$e[dt+16]=Mn+di,$e[dt+48]=Mn-di;var Ar=.382683433*((Ri=vi+Rn)-(Mi=gn+Jr)),qa=.5411961*Ri+Ar,No=1.306562965*Mi+Ar,hi=.707106781*(ti=Rn+gn),gr=Jr+hi,bn=Jr-hi;$e[dt+40]=bn+qa,$e[dt+24]=bn-qa,$e[dt+8]=gr+No,$e[dt+56]=gr-No,dt++}for(ht=0;ht<64;++ht)Dt=$e[ht]*re[ht],b[ht]=Dt>0?Dt+.5|0:Dt-.5|0;return b}(V,se),qe=0;qe<64;++qe)P[U[qe]]=He[qe];var rt=P[0]-de;de=P[0],rt==0?ge(xe[0]):(ge(xe[A[Pe=32767+rt]]),ge(y[Pe]));for(var Ge=63;Ge>0&&P[Ge]==0;)Ge--;if(Ge==0)return ge(Le),de;for(var vt,Ve=1;Ve<=Ge;){for(var fe=Ve;P[Ve]==0&&Ve<=Ge;)++Ve;var bt=Ve-fe;if(bt>=16){vt=bt>>4;for(var ct=1;ct<=vt;++ct)ge(Oe);bt&=15}Pe=32767+P[Ve],ge(he[(bt<<4)+A[Pe]]),ge(y[Pe]),Ve++}return Ge!=63&&ge(Le),de}function Me(V){V=Math.min(Math.max(V,1),100),s!=V&&(function(se){for(var de=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],xe=0;xe<64;xe++){var he=o((de[xe]*se+50)/100);he=Math.min(Math.max(he,1),255),u[U[xe]]=he}for(var Pe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Le=0;Le<64;Le++){var Oe=o((Pe[Le]*se+50)/100);Oe=Math.min(Math.max(Oe,1),255),d[U[Le]]=Oe}for(var He=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],qe=0,rt=0;rt<8;rt++)for(var Ge=0;Ge<8;Ge++)f[qe]=1/(u[U[qe]]*He[rt]*He[Ge]*8),x[qe]=1/(d[U[qe]]*He[rt]*He[Ge]*8),qe++}(V<50?Math.floor(5e3/V):Math.floor(200-2*V)),s=V)}this.encode=function(V,se){se&&Me(se),I=new Array,j=0,C=7,Se(65496),Se(65504),Se(16),ue(74),ue(70),ue(73),ue(70),ue(0),ue(1),ue(1),ue(0),Se(1),Se(1),ue(0),ue(0),function(){Se(65499),Se(132),ue(0);for(var ve=0;ve<64;ve++)ue(u[ve]);ue(1);for(var ze=0;ze<64;ze++)ue(d[ze])}(),function(ve,ze){Se(65472),Se(17),ue(8),Se(ze),Se(ve),ue(3),ue(1),ue(17),ue(0),ue(2),ue(17),ue(1),ue(3),ue(17),ue(1)}(V.width,V.height),function(){Se(65476),Se(418),ue(0);for(var ve=0;ve<16;ve++)ue(K[ve+1]);for(var ze=0;ze<=11;ze++)ue(te[ze]);ue(16);for(var Be=0;Be<16;Be++)ue(be[Be+1]);for(var We=0;We<=161;We++)ue($[We]);ue(1);for(var Qe=0;Qe<16;Qe++)ue(q[Qe+1]);for(var yt=0;yt<=11;yt++)ue(X[yt]);ue(17);for(var xt=0;xt<16;xt++)ue(Q[xt+1]);for(var ht=0;ht<=161;ht++)ue(J[ht])}(),Se(65498),Se(12),ue(3),ue(1),ue(0),ue(2),ue(17),ue(3),ue(17),ue(0),ue(63),ue(0);var de=0,xe=0,he=0;j=0,C=7,this.encode.displayName="_encode_";for(var Pe,Le,Oe,He,qe,rt,Ge,vt,Ve,fe=V.data,bt=V.width,ct=V.height,$e=4*bt,re=0;re<ct;){for(Pe=0;Pe<$e;){for(qe=$e*re+Pe,Ge=-1,vt=0,Ve=0;Ve<64;Ve++)rt=qe+(vt=Ve>>3)*$e+(Ge=4*(7&Ve)),re+vt>=ct&&(rt-=$e*(re+1+vt-ct)),Pe+Ge>=$e&&(rt-=Pe+Ge-$e+4),Le=fe[rt++],Oe=fe[rt++],He=fe[rt++],_[Ve]=(ne[Le]+ne[Oe+256>>0]+ne[He+512>>0]>>16)-128,k[Ve]=(ne[Le+768>>0]+ne[Oe+1024>>0]+ne[He+1280>>0]>>16)-128,R[Ve]=(ne[Le+1280>>0]+ne[Oe+1536>>0]+ne[He+1792>>0]>>16)-128;de=_e(_,f,de,t,r),xe=_e(k,x,xe,n,i),he=_e(R,x,he,n,i),Pe+=32}re+=8}if(C>=0){var oe=[];oe[1]=C+1,oe[0]=(1<<C+1)-1,ge(oe)}return Se(65497),new Uint8Array(I)},e=e||50,function(){for(var V=String.fromCharCode,se=0;se<256;se++)M[se]=V(se)}(),t=pe(K,te),n=pe(q,X),r=pe(be,$),i=pe(Q,J),function(){for(var V=1,se=2,de=1;de<=15;de++){for(var xe=V;xe<se;xe++)A[32767+xe]=de,y[32767+xe]=[],y[32767+xe][1]=de,y[32767+xe][0]=xe;for(var he=-(se-1);he<=-V;he++)A[32767+he]=de,y[32767+he]=[],y[32767+he][1]=de,y[32767+he][0]=se-1+he;V<<=1,se<<=1}}(),function(){for(var V=0;V<256;V++)ne[V]=19595*V,ne[V+256>>0]=38470*V,ne[V+512>>0]=7471*V+32768,ne[V+768>>0]=-11059*V,ne[V+1024>>0]=-21709*V,ne[V+1280>>0]=32768*V+8421375,ne[V+1536>>0]=-27439*V,ne[V+1792>>0]=-5329*V}(),Me(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function sa(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function bb(e){function t(K){if(!K)throw Error("assert :P")}function n(K,te,be){for(var $=0;4>$;$++)if(K[te+$]!=be.charCodeAt($))return!0;return!1}function r(K,te,be,$,q){for(var X=0;X<q;X++)K[te+X]=be[$+X]}function i(K,te,be,$){for(var q=0;q<$;q++)K[te+q]=be}function s(K){return new Int32Array(K)}function o(K,te){for(var be=[],$=0;$<K;$++)be.push(new te);return be}function u(K,te){var be=[];return function $(q,X,Q){for(var J=Q[X],pe=0;pe<J&&(q.push(Q.length>X+1?[]:new te),!(Q.length<X+1));pe++)$(q[pe],X+1,Q)}(be,0,K),be}var d=function(){var K=this;function te(v,S){for(var L=1<<S-1>>>0;v&L;)L>>>=1;return L?(v&L-1)+L:v}function be(v,S,L,O,z){t(!(O%L));do v[S+(O-=L)]=z;while(0<O)}function $(v,S,L,O,z){if(t(2328>=z),512>=z)var W=s(512);else if((W=s(z))==null)return 0;return function(Y,Z,ee,ce,Ne,De){var Re,Ie,et=Z,Ye=1<<ee,Ce=s(16),Ee=s(16);for(t(Ne!=0),t(ce!=null),t(Y!=null),t(0<ee),Ie=0;Ie<Ne;++Ie){if(15<ce[Ie])return 0;++Ce[ce[Ie]]}if(Ce[0]==Ne)return 0;for(Ee[1]=0,Re=1;15>Re;++Re){if(Ce[Re]>1<<Re)return 0;Ee[Re+1]=Ee[Re]+Ce[Re]}for(Ie=0;Ie<Ne;++Ie)Re=ce[Ie],0<ce[Ie]&&(De[Ee[Re]++]=Ie);if(Ee[15]==1)return(ce=new q).g=0,ce.value=De[0],be(Y,et,1,Ye,ce),Ye;var Ke,st=-1,Ze=Ye-1,wt=0,ft=1,Ot=1,pt=1<<ee;for(Ie=0,Re=1,Ne=2;Re<=ee;++Re,Ne<<=1){if(ft+=Ot<<=1,0>(Ot-=Ce[Re]))return 0;for(;0<Ce[Re];--Ce[Re])(ce=new q).g=Re,ce.value=De[Ie++],be(Y,et+wt,Ne,pt,ce),wt=te(wt,Re)}for(Re=ee+1,Ne=2;15>=Re;++Re,Ne<<=1){if(ft+=Ot<<=1,0>(Ot-=Ce[Re]))return 0;for(;0<Ce[Re];--Ce[Re]){if(ce=new q,(wt&Ze)!=st){for(et+=pt,Ke=1<<(st=Re)-ee;15>st&&!(0>=(Ke-=Ce[st]));)++st,Ke<<=1;Ye+=pt=1<<(Ke=st-ee),Y[Z+(st=wt&Ze)].g=Ke+ee,Y[Z+st].value=et-Z-st}ce.g=Re-ee,ce.value=De[Ie++],be(Y,et+(wt>>ee),Ne,pt,ce),wt=te(wt,Re)}}return ft!=2*Ee[15]-1?0:Ye}(v,S,L,O,z,W)}function q(){this.value=this.g=0}function X(){this.value=this.g=0}function Q(){this.G=o(5,q),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Pn,X)}function J(v,S,L,O){t(v!=null),t(S!=null),t(2147483648>O),v.Ca=254,v.I=0,v.b=-8,v.Ka=0,v.oa=S,v.pa=L,v.Jd=S,v.Yc=L+O,v.Zc=4<=O?L+O-4+1:L,Pe(v)}function pe(v,S){for(var L=0;0<S--;)L|=Oe(v,128)<<S;return L}function ge(v,S){var L=pe(v,S);return Le(v)?-L:L}function ue(v,S,L,O){var z,W=0;for(t(v!=null),t(S!=null),t(4294967288>O),v.Sb=O,v.Ra=0,v.u=0,v.h=0,4<O&&(O=4),z=0;z<O;++z)W+=S[L+z]<<8*z;v.Ra=W,v.bb=O,v.oa=S,v.pa=L}function Se(v){for(;8<=v.u&&v.bb<v.Sb;)v.Ra>>>=8,v.Ra+=v.oa[v.pa+v.bb]<<Ms-8>>>0,++v.bb,v.u-=8;de(v)&&(v.h=1,v.u=0)}function _e(v,S){if(t(0<=S),!v.h&&S<=Ca){var L=se(v)&jo[S];return v.u+=S,Se(v),L}return v.h=1,v.u=0}function Me(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function V(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function se(v){return v.Ra>>>(v.u&Ms-1)>>>0}function de(v){return t(v.bb<=v.Sb),v.h||v.bb==v.Sb&&v.u>Ms}function xe(v,S){v.u=S,v.h=de(v)}function he(v){v.u>=nn&&(t(v.u>=nn),Se(v))}function Pe(v){t(v!=null&&v.oa!=null),v.pa<v.Zc?(v.I=(v.oa[v.pa++]|v.I<<8)>>>0,v.b+=8):(t(v!=null&&v.oa!=null),v.pa<v.Yc?(v.b+=8,v.I=v.oa[v.pa++]|v.I<<8):v.Ka?v.b=0:(v.I<<=8,v.b+=8,v.Ka=1))}function Le(v){return pe(v,1)}function Oe(v,S){var L=v.Ca;0>v.b&&Pe(v);var O=v.b,z=L*S>>>8,W=(v.I>>>O>z)+0;for(W?(L-=z,v.I-=z+1<<O>>>0):L=z+1,O=L,z=0;256<=O;)z+=8,O>>=8;return O=7^z+Wr[O],v.b-=O,v.Ca=(L<<O)-1,W}function He(v,S,L){v[S+0]=L>>24&255,v[S+1]=L>>16&255,v[S+2]=L>>8&255,v[S+3]=L>>0&255}function qe(v,S){return v[S+0]<<0|v[S+1]<<8}function rt(v,S){return qe(v,S)|v[S+2]<<16}function Ge(v,S){return qe(v,S)|qe(v,S+2)<<16}function vt(v,S){var L=1<<S;return t(v!=null),t(0<S),v.X=s(L),v.X==null?0:(v.Mb=32-S,v.Xa=S,1)}function Ve(v,S){t(v!=null),t(S!=null),t(v.Xa==S.Xa),r(S.X,0,v.X,0,1<<S.Xa)}function fe(){this.X=[],this.Xa=this.Mb=0}function bt(v,S,L,O){t(L!=null),t(O!=null);var z=L[0],W=O[0];return z==0&&(z=(v*W+S/2)/S),W==0&&(W=(S*z+v/2)/v),0>=z||0>=W?0:(L[0]=z,O[0]=W,1)}function ct(v,S){return v+(1<<S)-1>>>S}function $e(v,S){return((4278255360&v)+(4278255360&S)>>>0&4278255360)+((16711935&v)+(16711935&S)>>>0&16711935)>>>0}function re(v,S){K[S]=function(L,O,z,W,Y,Z,ee){var ce;for(ce=0;ce<Y;++ce){var Ne=K[v](Z[ee+ce-1],z,W+ce);Z[ee+ce]=$e(L[O+ce],Ne)}}}function oe(){this.ud=this.hd=this.jd=0}function ve(v,S){return((4278124286&(v^S))>>>1)+(v&S)>>>0}function ze(v){return 0<=v&&256>v?v:0>v?0:255<v?255:void 0}function Be(v,S){return ze(v+(v-S+.5>>1))}function We(v,S,L){return Math.abs(S-L)-Math.abs(v-L)}function Qe(v,S,L,O,z,W,Y){for(O=W[Y-1],L=0;L<z;++L)W[Y+L]=O=$e(v[S+L],O)}function yt(v,S,L,O,z){var W;for(W=0;W<L;++W){var Y=v[S+W],Z=Y>>8&255,ee=16711935&(ee=(ee=16711935&Y)+((Z<<16)+Z));O[z+W]=(4278255360&Y)+ee>>>0}}function xt(v,S){S.jd=v>>0&255,S.hd=v>>8&255,S.ud=v>>16&255}function ht(v,S,L,O,z,W){var Y;for(Y=0;Y<O;++Y){var Z=S[L+Y],ee=Z>>>8,ce=Z,Ne=255&(Ne=(Ne=Z>>>16)+((v.jd<<24>>24)*(ee<<24>>24)>>>5));ce=255&(ce=(ce=ce+((v.hd<<24>>24)*(ee<<24>>24)>>>5))+((v.ud<<24>>24)*(Ne<<24>>24)>>>5)),z[W+Y]=(4278255360&Z)+(Ne<<16)+ce}}function Dt(v,S,L,O,z){K[S]=function(W,Y,Z,ee,ce,Ne,De,Re,Ie){for(ee=De;ee<Re;++ee)for(De=0;De<Ie;++De)ce[Ne++]=z(Z[O(W[Y++])])},K[v]=function(W,Y,Z,ee,ce,Ne,De){var Re=8>>W.b,Ie=W.Ea,et=W.K[0],Ye=W.w;if(8>Re)for(W=(1<<W.b)-1,Ye=(1<<Re)-1;Y<Z;++Y){var Ce,Ee=0;for(Ce=0;Ce<Ie;++Ce)Ce&W||(Ee=O(ee[ce++])),Ne[De++]=z(et[Ee&Ye]),Ee>>=Re}else K["VP8LMapColor"+L](ee,ce,et,Ye,Ne,De,Y,Z,Ie)}}function dt(v,S,L,O,z){for(L=S+L;S<L;){var W=v[S++];O[z++]=W>>16&255,O[z++]=W>>8&255,O[z++]=W>>0&255}}function kn(v,S,L,O,z){for(L=S+L;S<L;){var W=v[S++];O[z++]=W>>16&255,O[z++]=W>>8&255,O[z++]=W>>0&255,O[z++]=W>>24&255}}function Et(v,S,L,O,z){for(L=S+L;S<L;){var W=(Y=v[S++])>>16&240|Y>>12&15,Y=Y>>0&240|Y>>28&15;O[z++]=W,O[z++]=Y}}function ot(v,S,L,O,z){for(L=S+L;S<L;){var W=(Y=v[S++])>>16&248|Y>>13&7,Y=Y>>5&224|Y>>3&31;O[z++]=W,O[z++]=Y}}function Mt(v,S,L,O,z){for(L=S+L;S<L;){var W=v[S++];O[z++]=W>>0&255,O[z++]=W>>8&255,O[z++]=W>>16&255}}function jt(v,S,L,O,z,W){if(W==0)for(L=S+L;S<L;)He(O,((W=v[S++])[0]>>24|W[1]>>8&65280|W[2]<<8&16711680|W[3]<<24)>>>0),z+=32;else r(O,z,v,S,L)}function un(v,S){K[S][0]=K[v+"0"],K[S][1]=K[v+"1"],K[S][2]=K[v+"2"],K[S][3]=K[v+"3"],K[S][4]=K[v+"4"],K[S][5]=K[v+"5"],K[S][6]=K[v+"6"],K[S][7]=K[v+"7"],K[S][8]=K[v+"8"],K[S][9]=K[v+"9"],K[S][10]=K[v+"10"],K[S][11]=K[v+"11"],K[S][12]=K[v+"12"],K[S][13]=K[v+"13"],K[S][14]=K[v+"0"],K[S][15]=K[v+"0"]}function tn(v){return v==J1||v==ep||v==Xh||v==tp}function Ks(){this.eb=[],this.size=this.A=this.fb=0}function qn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function $t(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ks,this.f.kb=new qn,this.sd=null}function ci(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Wn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Vt(v){return alert("todo:WebPSamplerProcessPlane"),v.T}function Xt(v,S){var L=v.T,O=S.ba.f.RGBA,z=O.eb,W=O.fb+v.ka*O.A,Y=Us[S.ba.S],Z=v.y,ee=v.O,ce=v.f,Ne=v.N,De=v.ea,Re=v.W,Ie=S.cc,et=S.dc,Ye=S.Mc,Ce=S.Nc,Ee=v.ka,Ke=v.ka+v.T,st=v.U,Ze=st+1>>1;for(Ee==0?Y(Z,ee,null,null,ce,Ne,De,Re,ce,Ne,De,Re,z,W,null,null,st):(Y(S.ec,S.fc,Z,ee,Ie,et,Ye,Ce,ce,Ne,De,Re,z,W-O.A,z,W,st),++L);Ee+2<Ke;Ee+=2)Ie=ce,et=Ne,Ye=De,Ce=Re,Ne+=v.Rc,Re+=v.Rc,W+=2*O.A,Y(Z,(ee+=2*v.fa)-v.fa,Z,ee,Ie,et,Ye,Ce,ce,Ne,De,Re,z,W-O.A,z,W,st);return ee+=v.fa,v.j+Ke<v.o?(r(S.ec,S.fc,Z,ee,st),r(S.cc,S.dc,ce,Ne,Ze),r(S.Mc,S.Nc,De,Re,Ze),L--):1&Ke||Y(Z,ee,null,null,ce,Ne,De,Re,ce,Ne,De,Re,z,W+O.A,null,null,st),L}function Zs(v,S,L){var O=v.F,z=[v.J];if(O!=null){var W=v.U,Y=S.ba.S,Z=Y==Yh||Y==Xh;S=S.ba.f.RGBA;var ee=[0],ce=v.ka;ee[0]=v.T,v.Kb&&(ce==0?--ee[0]:(--ce,z[0]-=v.width),v.j+v.ka+v.T==v.o&&(ee[0]=v.o-v.j-ce));var Ne=S.eb;ce=S.fb+ce*S.A,v=Un(O,z[0],v.width,W,ee,Ne,ce+(Z?0:3),S.A),t(L==ee),v&&tn(Y)&&Zi(Ne,ce,Z,W,ee,S.A)}return 0}function pn(v){var S=v.ma,L=S.ba.S,O=11>L,z=L==Gh||L==$h||L==Yh||L==Q1||L==12||tn(L);if(S.memory=null,S.Ib=null,S.Jb=null,S.Nd=null,!Ya(S.Oa,v,z?11:12))return 0;if(z&&tn(L)&&tt(),v.da)alert("todo:use_scaling");else{if(O){if(S.Ib=Vt,v.Kb){if(L=v.U+1>>1,S.memory=s(v.U+2*L),S.memory==null)return 0;S.ec=S.memory,S.fc=0,S.cc=S.ec,S.dc=S.fc+v.U,S.Mc=S.cc,S.Nc=S.dc+L,S.Ib=Xt,tt()}}else alert("todo:EmitYUV");z&&(S.Jb=Zs,O&&ke())}if(O&&!hy){for(v=0;256>v;++v)BN[v]=89858*(v-128)+Zh>>Kh,VN[v]=-22014*(v-128)+Zh,UN[v]=-45773*(v-128),FN[v]=113618*(v-128)+Zh>>Kh;for(v=rd;v<ip;++v)S=76283*(v-16)+Zh>>Kh,zN[v-rd]=mr(S,255),HN[v-rd]=mr(S+8>>4,15);hy=1}return 1}function ui(v){var S=v.ma,L=v.U,O=v.T;return t(!(1&v.ka)),0>=L||0>=O?0:(L=S.Ib(v,S),S.Jb!=null&&S.Jb(v,S,L),S.Dc+=L,1)}function Di(v){v.ma.memory=null}function _t(v,S,L,O){return _e(v,8)!=47?0:(S[0]=_e(v,14)+1,L[0]=_e(v,14)+1,O[0]=_e(v,1),_e(v,3)!=0?0:!v.h)}function us(v,S){if(4>v)return v+1;var L=v-2>>1;return(2+(1&v)<<L)+_e(S,L)+1}function Jr(v,S){return 120<S?S-120:1<=(L=((L=NN[S-1])>>4)*v+(8-(15&L)))?L:1;var L}function ei(v,S,L){var O=se(L),z=v[S+=255&O].g-8;return 0<z&&(xe(L,L.u+8),O=se(L),S+=v[S].value,S+=O&(1<<z)-1),xe(L,L.u+v[S].g),v[S].value}function gn(v,S,L){return L.g+=v.g,L.value+=v.value<<S>>>0,t(8>=L.g),v.g}function Ln(v,S,L){var O=v.xc;return t((S=O==0?0:v.vc[v.md*(L>>O)+(S>>O)])<v.Wb),v.Ya[S]}function Rn(v,S,L,O){var z=v.ab,W=v.c*S,Y=v.C;S=Y+S;var Z=L,ee=O;for(O=v.Ta,L=v.Ua;0<z--;){var ce=v.gc[z],Ne=Y,De=S,Re=Z,Ie=ee,et=(ee=O,Z=L,ce.Ea);switch(t(Ne<De),t(De<=ce.nc),ce.hc){case 2:l(Re,Ie,(De-Ne)*et,ee,Z);break;case 0:var Ye=Ne,Ce=De,Ee=ee,Ke=Z,st=(pt=ce).Ea;Ye==0&&(F(Re,Ie,null,null,1,Ee,Ke),Qe(Re,Ie+1,0,0,st-1,Ee,Ke+1),Ie+=st,Ke+=st,++Ye);for(var Ze=1<<pt.b,wt=Ze-1,ft=ct(st,pt.b),Ot=pt.K,pt=pt.w+(Ye>>pt.b)*ft;Ye<Ce;){var An=Ot,Cn=pt,yn=1;for(a(Re,Ie,Ee,Ke-st,1,Ee,Ke);yn<st;){var cn=(yn&~wt)+Ze;cn>st&&(cn=st),(0,w[An[Cn++]>>8&15])(Re,Ie+ +yn,Ee,Ke+yn-st,cn-yn,Ee,Ke+yn),yn=cn}Ie+=st,Ke+=st,++Ye&wt||(pt+=ft)}De!=ce.nc&&r(ee,Z-et,ee,Z+(De-Ne-1)*et,et);break;case 1:for(et=Re,Ce=Ie,st=(Re=ce.Ea)-(Ke=Re&~(Ee=(Ie=1<<ce.b)-1)),Ye=ct(Re,ce.b),Ze=ce.K,ce=ce.w+(Ne>>ce.b)*Ye;Ne<De;){for(wt=Ze,ft=ce,Ot=new oe,pt=Ce+Ke,An=Ce+Re;Ce<pt;)xt(wt[ft++],Ot),N(Ot,et,Ce,Ie,ee,Z),Ce+=Ie,Z+=Ie;Ce<An&&(xt(wt[ft++],Ot),N(Ot,et,Ce,st,ee,Z),Ce+=st,Z+=st),++Ne&Ee||(ce+=Ye)}break;case 3:if(Re==ee&&Ie==Z&&0<ce.b){for(Ce=ee,Re=et=Z+(De-Ne)*et-(Ke=(De-Ne)*ct(ce.Ea,ce.b)),Ie=ee,Ee=Z,Ye=[],Ke=(st=Ke)-1;0<=Ke;--Ke)Ye[Ke]=Ie[Ee+Ke];for(Ke=st-1;0<=Ke;--Ke)Ce[Re+Ke]=Ye[Ke];c(ce,Ne,De,ee,et,ee,Z)}else c(ce,Ne,De,Re,Ie,ee,Z)}Z=O,ee=L}ee!=L&&r(O,L,Z,ee,W)}function mt(v,S){var L=v.V,O=v.Ba+v.c*v.C,z=S-v.C;if(t(S<=v.l.o),t(16>=z),0<z){var W=v.l,Y=v.Ta,Z=v.Ua,ee=W.width;if(Rn(v,z,L,O),z=Z=[Z],t((L=v.C)<(O=S)),t(W.v<W.va),O>W.o&&(O=W.o),L<W.j){var ce=W.j-L;L=W.j,z[0]+=ce*ee}if(L>=O?L=0:(z[0]+=4*W.v,W.ka=L-W.j,W.U=W.va-W.v,W.T=O-L,L=1),L){if(Z=Z[0],11>(L=v.ca).S){var Ne=L.f.RGBA,De=(O=L.S,z=W.U,W=W.T,ce=Ne.eb,Ne.A),Re=W;for(Ne=Ne.fb+v.Ma*Ne.A;0<Re--;){var Ie=Y,et=Z,Ye=z,Ce=ce,Ee=Ne;switch(O){case Wh:T(Ie,et,Ye,Ce,Ee);break;case Gh:D(Ie,et,Ye,Ce,Ee);break;case J1:D(Ie,et,Ye,Ce,Ee),Zi(Ce,Ee,0,Ye,1,0);break;case ry:le(Ie,et,Ye,Ce,Ee);break;case $h:jt(Ie,et,Ye,Ce,Ee,1);break;case ep:jt(Ie,et,Ye,Ce,Ee,1),Zi(Ce,Ee,0,Ye,1,0);break;case Yh:jt(Ie,et,Ye,Ce,Ee,0);break;case Xh:jt(Ie,et,Ye,Ce,Ee,0),Zi(Ce,Ee,1,Ye,1,0);break;case Q1:B(Ie,et,Ye,Ce,Ee);break;case tp:B(Ie,et,Ye,Ce,Ee),Fn(Ce,Ee,Ye,1,0);break;case iy:G(Ie,et,Ye,Ce,Ee);break;default:t(0)}Z+=ee,Ne+=De}v.Ma+=W}else alert("todo:EmitRescaledRowsYUVA");t(v.Ma<=L.height)}}v.C=S,t(v.C<=v.i)}function vi(v){var S;if(0<v.ua)return 0;for(S=0;S<v.Wb;++S){var L=v.Ya[S].G,O=v.Ya[S].H;if(0<L[1][O[1]+0].g||0<L[2][O[2]+0].g||0<L[3][O[3]+0].g)return 0}return 1}function Ri(v,S,L,O,z,W){if(v.Z!=0){var Y=v.qd,Z=v.rd;for(t(Do[v.Z]!=null);S<L;++S)Do[v.Z](Y,Z,O,z,O,z,W),Y=O,Z=z,z+=W;v.qd=Y,v.rd=Z}}function Mn(v,S){var L=v.l.ma,O=L.Z==0||L.Z==1?v.l.j:v.C;if(O=v.C<O?O:v.C,t(S<=v.l.o),S>O){var z=v.l.width,W=L.ca,Y=L.tb+z*O,Z=v.V,ee=v.Ba+v.c*O,ce=v.gc;t(v.ab==1),t(ce[0].hc==3),p(ce[0],O,S,Z,ee,W,Y),Ri(L,O,S,W,Y,z)}v.C=v.Ma=S}function ti(v,S,L,O,z,W,Y){var Z=v.$/O,ee=v.$%O,ce=v.m,Ne=v.s,De=L+v.$,Re=De;z=L+O*z;var Ie=L+O*W,et=280+Ne.ua,Ye=v.Pb?Z:16777216,Ce=0<Ne.ua?Ne.Wa:null,Ee=Ne.wc,Ke=De<Ie?Ln(Ne,ee,Z):null;t(v.C<W),t(Ie<=z);var st=!1;e:for(;;){for(;st||De<Ie;){var Ze=0;if(Z>=Ye){var wt=De-L;t((Ye=v).Pb),Ye.wd=Ye.m,Ye.xd=wt,0<Ye.s.ua&&Ve(Ye.s.Wa,Ye.s.vb),Ye=Z+EN}if(ee&Ee||(Ke=Ln(Ne,ee,Z)),t(Ke!=null),Ke.Qb&&(S[De]=Ke.qb,st=!0),!st)if(he(ce),Ke.jc){Ze=ce,wt=S;var ft=De,Ot=Ke.pd[se(Ze)&Pn-1];t(Ke.jc),256>Ot.g?(xe(Ze,Ze.u+Ot.g),wt[ft]=Ot.value,Ze=0):(xe(Ze,Ze.u+Ot.g-256),t(256<=Ot.value),Ze=Ot.value),Ze==0&&(st=!0)}else Ze=ei(Ke.G[0],Ke.H[0],ce);if(ce.h)break;if(st||256>Ze){if(!st)if(Ke.nd)S[De]=(Ke.qb|Ze<<8)>>>0;else{if(he(ce),st=ei(Ke.G[1],Ke.H[1],ce),he(ce),wt=ei(Ke.G[2],Ke.H[2],ce),ft=ei(Ke.G[3],Ke.H[3],ce),ce.h)break;S[De]=(ft<<24|st<<16|Ze<<8|wt)>>>0}if(st=!1,++De,++ee>=O&&(ee=0,++Z,Y!=null&&Z<=W&&!(Z%16)&&Y(v,Z),Ce!=null))for(;Re<De;)Ze=S[Re++],Ce.X[(506832829*Ze&4294967295)>>>Ce.Mb]=Ze}else if(280>Ze){if(Ze=us(Ze-256,ce),wt=ei(Ke.G[4],Ke.H[4],ce),he(ce),wt=Jr(O,wt=us(wt,ce)),ce.h)break;if(De-L<wt||z-De<Ze)break e;for(ft=0;ft<Ze;++ft)S[De+ft]=S[De+ft-wt];for(De+=Ze,ee+=Ze;ee>=O;)ee-=O,++Z,Y!=null&&Z<=W&&!(Z%16)&&Y(v,Z);if(t(De<=z),ee&Ee&&(Ke=Ln(Ne,ee,Z)),Ce!=null)for(;Re<De;)Ze=S[Re++],Ce.X[(506832829*Ze&4294967295)>>>Ce.Mb]=Ze}else{if(!(Ze<et))break e;for(st=Ze-280,t(Ce!=null);Re<De;)Ze=S[Re++],Ce.X[(506832829*Ze&4294967295)>>>Ce.Mb]=Ze;Ze=De,t(!(st>>>(wt=Ce).Xa)),S[Ze]=wt.X[st],st=!0}st||t(ce.h==de(ce))}if(v.Pb&&ce.h&&De<z)t(v.m.h),v.a=5,v.m=v.wd,v.$=v.xd,0<v.s.ua&&Ve(v.s.vb,v.s.Wa);else{if(ce.h)break e;Y!=null&&Y(v,Z>W?W:Z),v.a=0,v.$=De-L}return 1}return v.a=3,0}function Mi(v){t(v!=null),v.vc=null,v.yc=null,v.Ya=null;var S=v.Wa;S!=null&&(S.X=null),v.vb=null,t(v!=null)}function di(){var v=new lr;return v==null?null:(v.a=0,v.xb=oy,un("Predictor","VP8LPredictors"),un("Predictor","VP8LPredictors_C"),un("PredictorAdd","VP8LPredictorsAdd"),un("PredictorAdd","VP8LPredictorsAdd_C"),l=yt,N=ht,T=dt,D=kn,B=Et,G=ot,le=Mt,K.VP8LMapColor32b=h,K.VP8LMapColor8b=g,v)}function Ar(v,S,L,O,z){var W=1,Y=[v],Z=[S],ee=O.m,ce=O.s,Ne=null,De=0;e:for(;;){if(L)for(;W&&_e(ee,1);){var Re=Y,Ie=Z,et=O,Ye=1,Ce=et.m,Ee=et.gc[et.ab],Ke=_e(Ce,2);if(et.Oc&1<<Ke)W=0;else{switch(et.Oc|=1<<Ke,Ee.hc=Ke,Ee.Ea=Re[0],Ee.nc=Ie[0],Ee.K=[null],++et.ab,t(4>=et.ab),Ke){case 0:case 1:Ee.b=_e(Ce,3)+2,Ye=Ar(ct(Ee.Ea,Ee.b),ct(Ee.nc,Ee.b),0,et,Ee.K),Ee.K=Ee.K[0];break;case 3:var st,Ze=_e(Ce,8)+1,wt=16<Ze?0:4<Ze?1:2<Ze?2:3;if(Re[0]=ct(Ee.Ea,wt),Ee.b=wt,st=Ye=Ar(Ze,1,0,et,Ee.K)){var ft,Ot=Ze,pt=Ee,An=1<<(8>>pt.b),Cn=s(An);if(Cn==null)st=0;else{var yn=pt.K[0],cn=pt.w;for(Cn[0]=pt.K[0][0],ft=1;ft<1*Ot;++ft)Cn[ft]=$e(yn[cn+ft],Cn[ft-1]);for(;ft<4*An;++ft)Cn[ft]=0;pt.K[0]=null,pt.K[0]=Cn,st=1}}Ye=st;break;case 2:break;default:t(0)}W=Ye}}if(Y=Y[0],Z=Z[0],W&&_e(ee,1)&&!(W=1<=(De=_e(ee,4))&&11>=De)){O.a=3;break e}var On;if(On=W)t:{var jn,Zt,Mr,Qi=O,Br=Y,Ji=Z,En=De,gs=L,ms=Qi.m,ri=Qi.s,pi=[null],Ui=1,Vs=0,Ea=CN[En];n:for(;;){if(gs&&_e(ms,1)){var ii=_e(ms,3)+2,Qa=ct(Br,ii),Yl=ct(Ji,ii),Mc=Qa*Yl;if(!Ar(Qa,Yl,0,Qi,pi))break n;for(pi=pi[0],ri.xc=ii,jn=0;jn<Mc;++jn){var Ro=pi[jn]>>8&65535;pi[jn]=Ro,Ro>=Ui&&(Ui=Ro+1)}}if(ms.h)break n;for(Zt=0;5>Zt;++Zt){var yr=sy[Zt];!Zt&&0<En&&(yr+=1<<En),Vs<yr&&(Vs=yr)}var sp=o(Ui*Ea,q),gy=Ui,my=o(gy,Q);if(my==null)var Jh=null;else t(65536>=gy),Jh=my;var id=s(Vs);if(Jh==null||id==null||sp==null){Qi.a=1;break n}var ef=sp;for(jn=Mr=0;jn<Ui;++jn){var na=Jh[jn],Bc=na.G,Fc=na.H,xy=0,tf=1,yy=0;for(Zt=0;5>Zt;++Zt){yr=sy[Zt],Bc[Zt]=ef,Fc[Zt]=Mr,!Zt&&0<En&&(yr+=1<<En);i:{var nf,ap=yr,rf=Qi,sd=id,GN=ef,$N=Mr,op=0,Mo=rf.m,YN=_e(Mo,1);if(i(sd,0,0,ap),YN){var XN=_e(Mo,1)+1,KN=_e(Mo,1),vy=_e(Mo,KN==0?1:8);sd[vy]=1,XN==2&&(sd[vy=_e(Mo,8)]=1);var sf=1}else{var wy=s(19),by=_e(Mo,4)+4;if(19<by){rf.a=3;var af=0;break i}for(nf=0;nf<by;++nf)wy[SN[nf]]=_e(Mo,3);var lp=void 0,ad=void 0,Ay=rf,ZN=wy,of=ap,Sy=sd,cp=0,Bo=Ay.m,Ny=8,Cy=o(128,q);r:for(;$(Cy,0,7,ZN,19);){if(_e(Bo,1)){var QN=2+2*_e(Bo,3);if((lp=2+_e(Bo,QN))>of)break r}else lp=of;for(ad=0;ad<of&&lp--;){he(Bo);var Ey=Cy[0+(127&se(Bo))];xe(Bo,Bo.u+Ey.g);var Uc=Ey.value;if(16>Uc)Sy[ad++]=Uc,Uc!=0&&(Ny=Uc);else{var JN=Uc==16,_y=Uc-16,e8=bN[_y],Ty=_e(Bo,wN[_y])+e8;if(ad+Ty>of)break r;for(var t8=JN?Ny:0;0<Ty--;)Sy[ad++]=t8}}cp=1;break r}cp||(Ay.a=3),sf=cp}(sf=sf&&!Mo.h)&&(op=$(GN,$N,8,sd,ap)),sf&&op!=0?af=op:(rf.a=3,af=0)}if(af==0)break n;if(tf&&AN[Zt]==1&&(tf=ef[Mr].g==0),xy+=ef[Mr].g,Mr+=af,3>=Zt){var od,up=id[0];for(od=1;od<yr;++od)id[od]>up&&(up=id[od]);yy+=up}}if(na.nd=tf,na.Qb=0,tf&&(na.qb=(Bc[3][Fc[3]+0].value<<24|Bc[1][Fc[1]+0].value<<16|Bc[2][Fc[2]+0].value)>>>0,xy==0&&256>Bc[0][Fc[0]+0].value&&(na.Qb=1,na.qb+=Bc[0][Fc[0]+0].value<<8)),na.jc=!na.Qb&&6>yy,na.jc){var lf,Ja=na;for(lf=0;lf<Pn;++lf){var Fo=lf,Uo=Ja.pd[Fo],cf=Ja.G[0][Ja.H[0]+Fo];256<=cf.value?(Uo.g=cf.g+256,Uo.value=cf.value):(Uo.g=0,Uo.value=0,Fo>>=gn(cf,8,Uo),Fo>>=gn(Ja.G[1][Ja.H[1]+Fo],16,Uo),Fo>>=gn(Ja.G[2][Ja.H[2]+Fo],0,Uo),gn(Ja.G[3][Ja.H[3]+Fo],24,Uo))}}}ri.vc=pi,ri.Wb=Ui,ri.Ya=Jh,ri.yc=sp,On=1;break t}On=0}if(!(W=On)){O.a=3;break e}if(0<De){if(ce.ua=1<<De,!vt(ce.Wa,De)){O.a=1,W=0;break e}}else ce.ua=0;var dp=O,Iy=Y,n8=Z,hp=dp.s,fp=hp.xc;if(dp.c=Iy,dp.i=n8,hp.md=ct(Iy,fp),hp.wc=fp==0?-1:(1<<fp)-1,L){O.xb=jN;break e}if((Ne=s(Y*Z))==null){O.a=1,W=0;break e}W=(W=ti(O,Ne,0,Y,Z,Z,null))&&!ee.h;break e}return W?(z!=null?z[0]=Ne:(t(Ne==null),t(L)),O.$=0,L||Mi(ce)):Mi(ce),W}function qa(v,S){var L=v.c*v.i,O=L+S+16*S;return t(v.c<=S),v.V=s(O),v.V==null?(v.Ta=null,v.Ua=0,v.a=1,0):(v.Ta=v.V,v.Ua=v.Ba+L+S,1)}function No(v,S){var L=v.C,O=S-L,z=v.V,W=v.Ba+v.c*L;for(t(S<=v.l.o);0<O;){var Y=16<O?16:O,Z=v.l.ma,ee=v.l.width,ce=ee*Y,Ne=Z.ca,De=Z.tb+ee*L,Re=v.Ta,Ie=v.Ua;Rn(v,Y,z,W),_r(Re,Ie,Ne,De,ce),Ri(Z,L,L+Y,Ne,De,ee),O-=Y,z+=Y*v.c,L+=Y}t(L==S),v.C=v.Ma=S}function hi(){this.ub=this.yd=this.td=this.Rb=0}function gr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function bn(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Ll(){this.Yb=function(){var v=[];return function S(L,O,z){for(var W=z[O],Y=0;Y<W&&(L.push(z.length>O+1?[]:0),!(z.length<O+1));Y++)S(L[Y],O+1,z)}(v,0,[3,11]),v}()}function Ps(){this.jb=s(3),this.Wc=u([4,8],Ll),this.Xc=u([4,17],Ll)}function Pl(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Je(){this.ld=this.La=this.dd=this.tc=0}function Pc(){this.Na=this.la=0}function Bn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function js(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Qu(){this.uc=this.M=this.Nb=0,this.wa=Array(new Je),this.Y=0,this.ya=Array(new js),this.aa=0,this.l=new Kt}function dn(){this.y=s(16),this.f=s(8),this.ea=s(8)}function hn(){this.cb=this.a=0,this.sc="",this.m=new Me,this.Od=new hi,this.Kc=new gr,this.ed=new Pl,this.Qa=new bn,this.Ic=this.$c=this.Aa=0,this.D=new Qu,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Me),this.ia=0,this.pb=o(4,Bn),this.Pa=new Ps,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new dn),this.Hd=0,this.rb=Array(new Pc),this.sb=0,this.wa=Array(new Je),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new js),this.L=this.aa=0,this.gd=u([4,2],Je),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Kt(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function jl(){var v=new hn;return v!=null&&(v.a=0,v.sc="OK",v.cb=0,v.Xb=0,nd||(nd=ds)),v}function Gn(v,S,L){return v.a==0&&(v.a=S,v.sc=L,v.cb=0),0}function Co(v,S,L){return 3<=L&&v[S+0]==157&&v[S+1]==1&&v[S+2]==42}function Jn(v,S){if(v==null)return 0;if(v.a=0,v.sc="OK",S==null)return Gn(v,2,"null VP8Io passed to VP8GetHeaders()");var L=S.data,O=S.w,z=S.ha;if(4>z)return Gn(v,7,"Truncated header.");var W=L[O+0]|L[O+1]<<8|L[O+2]<<16,Y=v.Od;if(Y.Rb=!(1&W),Y.td=W>>1&7,Y.yd=W>>4&1,Y.ub=W>>5,3<Y.td)return Gn(v,3,"Incorrect keyframe parameters.");if(!Y.yd)return Gn(v,4,"Frame not displayable.");O+=3,z-=3;var Z=v.Kc;if(Y.Rb){if(7>z)return Gn(v,7,"cannot parse picture header");if(!Co(L,O,z))return Gn(v,3,"Bad code word");Z.c=16383&(L[O+4]<<8|L[O+3]),Z.Td=L[O+4]>>6,Z.i=16383&(L[O+6]<<8|L[O+5]),Z.Ud=L[O+6]>>6,O+=7,z-=7,v.za=Z.c+15>>4,v.Ub=Z.i+15>>4,S.width=Z.c,S.height=Z.i,S.Da=0,S.j=0,S.v=0,S.va=S.width,S.o=S.height,S.da=0,S.ib=S.width,S.hb=S.height,S.U=S.width,S.T=S.height,i((W=v.Pa).jb,0,255,W.jb.length),t((W=v.Qa)!=null),W.Cb=0,W.Bb=0,W.Fb=1,i(W.Zb,0,0,W.Zb.length),i(W.Lb,0,0,W.Lb)}if(Y.ub>z)return Gn(v,7,"bad partition length");J(W=v.m,L,O,Y.ub),O+=Y.ub,z-=Y.ub,Y.Rb&&(Z.Ld=Le(W),Z.Kd=Le(W)),Z=v.Qa;var ee,ce=v.Pa;if(t(W!=null),t(Z!=null),Z.Cb=Le(W),Z.Cb){if(Z.Bb=Le(W),Le(W)){for(Z.Fb=Le(W),ee=0;4>ee;++ee)Z.Zb[ee]=Le(W)?ge(W,7):0;for(ee=0;4>ee;++ee)Z.Lb[ee]=Le(W)?ge(W,6):0}if(Z.Bb)for(ee=0;3>ee;++ee)ce.jb[ee]=Le(W)?pe(W,8):255}else Z.Bb=0;if(W.Ka)return Gn(v,3,"cannot parse segment header");if((Z=v.ed).zd=Le(W),Z.Tb=pe(W,6),Z.wb=pe(W,3),Z.Pc=Le(W),Z.Pc&&Le(W)){for(ce=0;4>ce;++ce)Le(W)&&(Z.vd[ce]=ge(W,6));for(ce=0;4>ce;++ce)Le(W)&&(Z.od[ce]=ge(W,6))}if(v.L=Z.Tb==0?0:Z.zd?1:2,W.Ka)return Gn(v,3,"cannot parse filter header");var Ne=z;if(z=ee=O,O=ee+Ne,Z=Ne,v.Xb=(1<<pe(v.m,2))-1,Ne<3*(ce=v.Xb))L=7;else{for(ee+=3*ce,Z-=3*ce,Ne=0;Ne<ce;++Ne){var De=L[z+0]|L[z+1]<<8|L[z+2]<<16;De>Z&&(De=Z),J(v.Jc[+Ne],L,ee,De),ee+=De,Z-=De,z+=3}J(v.Jc[+ce],L,ee,Z),L=ee<O?0:5}if(L!=0)return Gn(v,L,"cannot parse partitions");for(L=pe(ee=v.m,7),z=Le(ee)?ge(ee,4):0,O=Le(ee)?ge(ee,4):0,Z=Le(ee)?ge(ee,4):0,ce=Le(ee)?ge(ee,4):0,ee=Le(ee)?ge(ee,4):0,Ne=v.Qa,De=0;4>De;++De){if(Ne.Cb){var Re=Ne.Zb[De];Ne.Fb||(Re+=L)}else{if(0<De){v.pb[De]=v.pb[0];continue}Re=L}var Ie=v.pb[De];Ie.Sc[0]=np[mr(Re+z,127)],Ie.Sc[1]=rp[mr(Re+0,127)],Ie.Eb[0]=2*np[mr(Re+O,127)],Ie.Eb[1]=101581*rp[mr(Re+Z,127)]>>16,8>Ie.Eb[1]&&(Ie.Eb[1]=8),Ie.Qc[0]=np[mr(Re+ce,117)],Ie.Qc[1]=rp[mr(Re+ee,127)],Ie.lc=Re+ee}if(!Y.Rb)return Gn(v,4,"Not a key frame.");for(Le(W),Y=v.Pa,L=0;4>L;++L){for(z=0;8>z;++z)for(O=0;3>O;++O)for(Z=0;11>Z;++Z)ce=Oe(W,LN[L][z][O][Z])?pe(W,8):IN[L][z][O][Z],Y.Wc[L][z].Yb[O][Z]=ce;for(z=0;17>z;++z)Y.Xc[L][z]=Y.Wc[L][PN[z]]}return v.kc=Le(W),v.kc&&(v.Bd=pe(W,8)),v.cb=1}function ds(v,S,L,O,z,W,Y){var Z=S[z].Yb[L];for(L=0;16>z;++z){if(!Oe(v,Z[L+0]))return z;for(;!Oe(v,Z[L+1]);)if(Z=S[++z].Yb[0],L=0,z==16)return 16;var ee=S[z+1].Yb;if(Oe(v,Z[L+2])){var ce=v,Ne=0;if(Oe(ce,(Re=Z)[(De=L)+3]))if(Oe(ce,Re[De+6])){for(Z=0,De=2*(Ne=Oe(ce,Re[De+8]))+(Re=Oe(ce,Re[De+9+Ne])),Ne=0,Re=_N[De];Re[Z];++Z)Ne+=Ne+Oe(ce,Re[Z]);Ne+=3+(8<<De)}else Oe(ce,Re[De+7])?(Ne=7+2*Oe(ce,165),Ne+=Oe(ce,145)):Ne=5+Oe(ce,159);else Ne=Oe(ce,Re[De+4])?3+Oe(ce,Re[De+5]):2;Z=ee[2]}else Ne=1,Z=ee[1];ee=Y+TN[z],0>(ce=v).b&&Pe(ce);var De,Re=ce.b,Ie=(De=ce.Ca>>1)-(ce.I>>Re)>>31;--ce.b,ce.Ca+=Ie,ce.Ca|=1,ce.I-=(De+1&Ie)<<Re,W[ee]=((Ne^Ie)-Ie)*O[(0<z)+0]}return 16}function Ol(v){var S=v.rb[v.sb-1];S.la=0,S.Na=0,i(v.zc,0,0,v.zc.length),v.ja=0}function $n(v,S){if(v==null)return 0;if(S==null)return Gn(v,2,"NULL VP8Io parameter in VP8Decode().");if(!v.cb&&!Jn(v,S))return 0;if(t(v.cb),S.ac==null||S.ac(S)){S.ob&&(v.L=0);var L=Qh[v.L];if(v.L==2?(v.yb=0,v.zb=0):(v.yb=S.v-L>>4,v.zb=S.j-L>>4,0>v.yb&&(v.yb=0),0>v.zb&&(v.zb=0)),v.Va=S.o+15+L>>4,v.Hb=S.va+15+L>>4,v.Hb>v.za&&(v.Hb=v.za),v.Va>v.Ub&&(v.Va=v.Ub),0<v.L){var O=v.ed;for(L=0;4>L;++L){var z;if(v.Qa.Cb){var W=v.Qa.Lb[L];v.Qa.Fb||(W+=O.Tb)}else W=O.Tb;for(z=0;1>=z;++z){var Y=v.gd[L][z],Z=W;if(O.Pc&&(Z+=O.vd[0],z&&(Z+=O.od[0])),0<(Z=0>Z?0:63<Z?63:Z)){var ee=Z;0<O.wb&&(ee=4<O.wb?ee>>2:ee>>1)>9-O.wb&&(ee=9-O.wb),1>ee&&(ee=1),Y.dd=ee,Y.tc=2*Z+ee,Y.ld=40<=Z?2:15<=Z?1:0}else Y.tc=0;Y.La=z}}}L=0}else Gn(v,6,"Frame setup failed"),L=v.a;if(L=L==0){if(L){v.$c=0,0<v.Aa||(v.Ic=WN);e:{L=v.Ic,O=4*(ee=v.za);var ce=32*ee,Ne=ee+1,De=0<v.L?ee*(0<v.Aa?2:1):0,Re=(v.Aa==2?2:1)*ee;if((Y=O+832+(z=3*(16*L+Qh[v.L])/2*ce)+(W=v.Fa!=null&&0<v.Fa.length?v.Kc.c*v.Kc.i:0))!=Y)L=0;else{if(Y>v.Vb){if(v.Vb=0,v.Ec=s(Y),v.Fc=0,v.Ec==null){L=Gn(v,1,"no memory during frame initialization.");break e}v.Vb=Y}Y=v.Ec,Z=v.Fc,v.Ac=Y,v.Bc=Z,Z+=O,v.Gd=o(ce,dn),v.Hd=0,v.rb=o(Ne+1,Pc),v.sb=1,v.wa=De?o(De,Je):null,v.Y=0,v.D.Nb=0,v.D.wa=v.wa,v.D.Y=v.Y,0<v.Aa&&(v.D.Y+=ee),t(!0),v.oc=Y,v.pc=Z,Z+=832,v.ya=o(Re,js),v.aa=0,v.D.ya=v.ya,v.D.aa=v.aa,v.Aa==2&&(v.D.aa+=ee),v.R=16*ee,v.B=8*ee,ee=(ce=Qh[v.L])*v.R,ce=ce/2*v.B,v.sa=Y,v.ta=Z+ee,v.qa=v.sa,v.ra=v.ta+16*L*v.R+ce,v.Ha=v.qa,v.Ia=v.ra+8*L*v.B+ce,v.$c=0,Z+=z,v.mb=W?Y:null,v.nb=W?Z:null,t(Z+W<=v.Fc+v.Vb),Ol(v),i(v.Ac,v.Bc,0,O),L=1}}if(L){if(S.ka=0,S.y=v.sa,S.O=v.ta,S.f=v.qa,S.N=v.ra,S.ea=v.Ha,S.Vd=v.Ia,S.fa=v.R,S.Rc=v.B,S.F=null,S.J=0,!Hh){for(L=-255;255>=L;++L)$r[255+L]=0>L?-L:L;for(L=-1020;1020>=L;++L)Ka[1020+L]=-128>L?-128:127<L?127:L;for(L=-112;112>=L;++L)td[112+L]=-16>L?-16:15<L?15:L;for(L=-255;510>=L;++L)Rc[255+L]=0>L?0:255<L?255:L;Hh=1}ye=wi,Ae=je,Ue=ie,nt=It,at=ar,Te=Nr,it=ba,Jt=Ai,Ut=Yt,xr=or,Gr=ed,cr=Fe,fn=Aa,rr=ql,Er=Hl,Fi=Rs,Bs=ea,Ki=Ju,ta[0]=kt,ta[1]=Rl,ta[2]=Ga,ta[3]=Os,ta[4]=Oc,ta[5]=er,ta[6]=qt,ta[7]=Bl,ta[8]=Dc,ta[9]=Fl,Oo[0]=To,Oo[1]=Pt,Oo[2]=mn,Oo[3]=Wa,Oo[4]=Cr,Oo[5]=Ml,Oo[6]=jc,Za[0]=Yi,Za[1]=bi,Za[2]=Qs,Za[3]=Ul,Za[4]=wa,Za[5]=$a,Za[6]=Js,L=1}else L=0}L&&(L=function(Ie,et){for(Ie.M=0;Ie.M<Ie.Va;++Ie.M){var Ye,Ce=Ie.Jc[Ie.M&Ie.Xb],Ee=Ie.m,Ke=Ie;for(Ye=0;Ye<Ke.za;++Ye){var st=Ee,Ze=Ke,wt=Ze.Ac,ft=Ze.Bc+4*Ye,Ot=Ze.zc,pt=Ze.ya[Ze.aa+Ye];if(Ze.Qa.Bb?pt.$b=Oe(st,Ze.Pa.jb[0])?2+Oe(st,Ze.Pa.jb[2]):Oe(st,Ze.Pa.jb[1]):pt.$b=0,Ze.kc&&(pt.Ad=Oe(st,Ze.Bd)),pt.Za=!Oe(st,145)+0,pt.Za){var An=pt.Ob,Cn=0;for(Ze=0;4>Ze;++Ze){var yn,cn=Ot[0+Ze];for(yn=0;4>yn;++yn){cn=kN[wt[ft+yn]][cn];for(var On=ay[Oe(st,cn[0])];0<On;)On=ay[2*On+Oe(st,cn[On])];cn=-On,wt[ft+yn]=cn}r(An,Cn,wt,ft,4),Cn+=4,Ot[0+Ze]=cn}}else cn=Oe(st,156)?Oe(st,128)?1:3:Oe(st,163)?2:0,pt.Ob[0]=cn,i(wt,ft,cn,4),i(Ot,0,cn,4);pt.Dd=Oe(st,142)?Oe(st,114)?Oe(st,183)?1:3:2:0}if(Ke.m.Ka)return Gn(Ie,7,"Premature end-of-partition0 encountered.");for(;Ie.ja<Ie.za;++Ie.ja){if(Ke=Ce,st=(Ee=Ie).rb[Ee.sb-1],wt=Ee.rb[Ee.sb+Ee.ja],Ye=Ee.ya[Ee.aa+Ee.ja],ft=Ee.kc?Ye.Ad:0)st.la=wt.la=0,Ye.Za||(st.Na=wt.Na=0),Ye.Hc=0,Ye.Gc=0,Ye.ia=0;else{var jn,Zt;if(st=wt,wt=Ke,ft=Ee.Pa.Xc,Ot=Ee.ya[Ee.aa+Ee.ja],pt=Ee.pb[Ot.$b],Ze=Ot.ad,An=0,Cn=Ee.rb[Ee.sb-1],cn=yn=0,i(Ze,An,0,384),Ot.Za)var Mr=0,Qi=ft[3];else{On=s(16);var Br=st.Na+Cn.Na;if(Br=nd(wt,ft[1],Br,pt.Eb,0,On,0),st.Na=Cn.Na=(0<Br)+0,1<Br)ye(On,0,Ze,An);else{var Ji=On[0]+3>>3;for(On=0;256>On;On+=16)Ze[An+On]=Ji}Mr=1,Qi=ft[0]}var En=15&st.la,gs=15&Cn.la;for(On=0;4>On;++On){var ms=1&gs;for(Ji=Zt=0;4>Ji;++Ji)En=En>>1|(ms=(Br=nd(wt,Qi,Br=ms+(1&En),pt.Sc,Mr,Ze,An))>Mr)<<7,Zt=Zt<<2|(3<Br?3:1<Br?2:Ze[An+0]!=0),An+=16;En>>=4,gs=gs>>1|ms<<7,yn=(yn<<8|Zt)>>>0}for(Qi=En,Mr=gs>>4,jn=0;4>jn;jn+=2){for(Zt=0,En=st.la>>4+jn,gs=Cn.la>>4+jn,On=0;2>On;++On){for(ms=1&gs,Ji=0;2>Ji;++Ji)Br=ms+(1&En),En=En>>1|(ms=0<(Br=nd(wt,ft[2],Br,pt.Qc,0,Ze,An)))<<3,Zt=Zt<<2|(3<Br?3:1<Br?2:Ze[An+0]!=0),An+=16;En>>=2,gs=gs>>1|ms<<5}cn|=Zt<<4*jn,Qi|=En<<4<<jn,Mr|=(240&gs)<<jn}st.la=Qi,Cn.la=Mr,Ot.Hc=yn,Ot.Gc=cn,Ot.ia=43690&cn?0:pt.ia,ft=!(yn|cn)}if(0<Ee.L&&(Ee.wa[Ee.Y+Ee.ja]=Ee.gd[Ye.$b][Ye.Za],Ee.wa[Ee.Y+Ee.ja].La|=!ft),Ke.Ka)return Gn(Ie,7,"Premature end-of-file encountered.")}if(Ol(Ie),Ee=et,Ke=1,Ye=(Ce=Ie).D,st=0<Ce.L&&Ce.M>=Ce.zb&&Ce.M<=Ce.Va,Ce.Aa==0)e:{if(Ye.M=Ce.M,Ye.uc=st,Ni(Ce,Ye),Ke=1,Ye=(Zt=Ce.D).Nb,st=(cn=Qh[Ce.L])*Ce.R,wt=cn/2*Ce.B,On=16*Ye*Ce.R,Ji=8*Ye*Ce.B,ft=Ce.sa,Ot=Ce.ta-st+On,pt=Ce.qa,Ze=Ce.ra-wt+Ji,An=Ce.Ha,Cn=Ce.Ia-wt+Ji,gs=(En=Zt.M)==0,yn=En>=Ce.Va-1,Ce.Aa==2&&Ni(Ce,Zt),Zt.uc)for(ms=(Br=Ce).D.M,t(Br.D.uc),Zt=Br.yb;Zt<Br.Hb;++Zt){Mr=Zt,Qi=ms;var ri=(pi=(yr=Br).D).Nb;jn=yr.R;var pi=pi.wa[pi.Y+Mr],Ui=yr.sa,Vs=yr.ta+16*ri*jn+16*Mr,Ea=pi.dd,ii=pi.tc;if(ii!=0)if(t(3<=ii),yr.L==1)0<Mr&&Fi(Ui,Vs,jn,ii+4),pi.La&&Ki(Ui,Vs,jn,ii),0<Qi&&Er(Ui,Vs,jn,ii+4),pi.La&&Bs(Ui,Vs,jn,ii);else{var Qa=yr.B,Yl=yr.qa,Mc=yr.ra+8*ri*Qa+8*Mr,Ro=yr.Ha,yr=yr.Ia+8*ri*Qa+8*Mr;ri=pi.ld,0<Mr&&(Jt(Ui,Vs,jn,ii+4,Ea,ri),xr(Yl,Mc,Ro,yr,Qa,ii+4,Ea,ri)),pi.La&&(cr(Ui,Vs,jn,ii,Ea,ri),rr(Yl,Mc,Ro,yr,Qa,ii,Ea,ri)),0<Qi&&(it(Ui,Vs,jn,ii+4,Ea,ri),Ut(Yl,Mc,Ro,yr,Qa,ii+4,Ea,ri)),pi.La&&(Gr(Ui,Vs,jn,ii,Ea,ri),fn(Yl,Mc,Ro,yr,Qa,ii,Ea,ri))}}if(Ce.ia&&alert("todo:DitherRow"),Ee.put!=null){if(Zt=16*En,En=16*(En+1),gs?(Ee.y=Ce.sa,Ee.O=Ce.ta+On,Ee.f=Ce.qa,Ee.N=Ce.ra+Ji,Ee.ea=Ce.Ha,Ee.W=Ce.Ia+Ji):(Zt-=cn,Ee.y=ft,Ee.O=Ot,Ee.f=pt,Ee.N=Ze,Ee.ea=An,Ee.W=Cn),yn||(En-=cn),En>Ee.o&&(En=Ee.o),Ee.F=null,Ee.J=null,Ce.Fa!=null&&0<Ce.Fa.length&&Zt<En&&(Ee.J=xn(Ce,Ee,Zt,En-Zt),Ee.F=Ce.mb,Ee.F==null&&Ee.F.length==0)){Ke=Gn(Ce,3,"Could not decode alpha data.");break e}Zt<Ee.j&&(cn=Ee.j-Zt,Zt=Ee.j,t(!(1&cn)),Ee.O+=Ce.R*cn,Ee.N+=Ce.B*(cn>>1),Ee.W+=Ce.B*(cn>>1),Ee.F!=null&&(Ee.J+=Ee.width*cn)),Zt<En&&(Ee.O+=Ee.v,Ee.N+=Ee.v>>1,Ee.W+=Ee.v>>1,Ee.F!=null&&(Ee.J+=Ee.v),Ee.ka=Zt-Ee.j,Ee.U=Ee.va-Ee.v,Ee.T=En-Zt,Ke=Ee.put(Ee))}Ye+1!=Ce.Ic||yn||(r(Ce.sa,Ce.ta-st,ft,Ot+16*Ce.R,st),r(Ce.qa,Ce.ra-wt,pt,Ze+8*Ce.B,wt),r(Ce.Ha,Ce.Ia-wt,An,Cn+8*Ce.B,wt))}if(!Ke)return Gn(Ie,6,"Output aborted.")}return 1}(v,S)),S.bc!=null&&S.bc(S),L&=1}return L?(v.cb=0,L):0}function Rr(v,S,L,O,z){z=v[S+L+32*O]+(z>>3),v[S+L+32*O]=-256&z?0>z?0:255:z}function Eo(v,S,L,O,z,W){Rr(v,S,0,L,O+z),Rr(v,S,1,L,O+W),Rr(v,S,2,L,O-W),Rr(v,S,3,L,O-z)}function Sr(v){return(20091*v>>16)+v}function wn(v,S,L,O){var z,W=0,Y=s(16);for(z=0;4>z;++z){var Z=v[S+0]+v[S+8],ee=v[S+0]-v[S+8],ce=(35468*v[S+4]>>16)-Sr(v[S+12]),Ne=Sr(v[S+4])+(35468*v[S+12]>>16);Y[W+0]=Z+Ne,Y[W+1]=ee+ce,Y[W+2]=ee-ce,Y[W+3]=Z-Ne,W+=4,S++}for(z=W=0;4>z;++z)Z=(v=Y[W+0]+4)+Y[W+8],ee=v-Y[W+8],ce=(35468*Y[W+4]>>16)-Sr(Y[W+12]),Rr(L,O,0,0,Z+(Ne=Sr(Y[W+4])+(35468*Y[W+12]>>16))),Rr(L,O,1,0,ee+ce),Rr(L,O,2,0,ee-ce),Rr(L,O,3,0,Z-Ne),W++,O+=32}function Nr(v,S,L,O){var z=v[S+0]+4,W=35468*v[S+4]>>16,Y=Sr(v[S+4]),Z=35468*v[S+1]>>16;Eo(L,O,0,z+Y,v=Sr(v[S+1]),Z),Eo(L,O,1,z+W,v,Z),Eo(L,O,2,z-W,v,Z),Eo(L,O,3,z-Y,v,Z)}function je(v,S,L,O,z){wn(v,S,L,O),z&&wn(v,S+16,L,O+4)}function ie(v,S,L,O){Ae(v,S+0,L,O,1),Ae(v,S+32,L,O+128,1)}function It(v,S,L,O){var z;for(v=v[S+0]+4,z=0;4>z;++z)for(S=0;4>S;++S)Rr(L,O,S,z,v)}function ar(v,S,L,O){v[S+0]&&nt(v,S+0,L,O),v[S+16]&&nt(v,S+16,L,O+4),v[S+32]&&nt(v,S+32,L,O+128),v[S+48]&&nt(v,S+48,L,O+128+4)}function wi(v,S,L,O){var z,W=s(16);for(z=0;4>z;++z){var Y=v[S+0+z]+v[S+12+z],Z=v[S+4+z]+v[S+8+z],ee=v[S+4+z]-v[S+8+z],ce=v[S+0+z]-v[S+12+z];W[0+z]=Y+Z,W[8+z]=Y-Z,W[4+z]=ce+ee,W[12+z]=ce-ee}for(z=0;4>z;++z)Y=(v=W[0+4*z]+3)+W[3+4*z],Z=W[1+4*z]+W[2+4*z],ee=W[1+4*z]-W[2+4*z],ce=v-W[3+4*z],L[O+0]=Y+Z>>3,L[O+16]=ce+ee>>3,L[O+32]=Y-Z>>3,L[O+48]=ce-ee>>3,O+=64}function Dl(v,S,L){var O,z=S-32,W=ps,Y=255-v[z-1];for(O=0;O<L;++O){var Z,ee=W,ce=Y+v[S-1];for(Z=0;Z<L;++Z)v[S+Z]=ee[ce+v[z+Z]];S+=32}}function Rl(v,S){Dl(v,S,4)}function bi(v,S){Dl(v,S,8)}function Pt(v,S){Dl(v,S,16)}function mn(v,S){var L;for(L=0;16>L;++L)r(v,S+32*L,v,S-32,16)}function Wa(v,S){var L;for(L=16;0<L;--L)i(v,S,v[S-1],16),S+=32}function _o(v,S,L){var O;for(O=0;16>O;++O)i(S,L+32*O,v,16)}function To(v,S){var L,O=16;for(L=0;16>L;++L)O+=v[S-1+32*L]+v[S+L-32];_o(O>>5,v,S)}function Cr(v,S){var L,O=8;for(L=0;16>L;++L)O+=v[S-1+32*L];_o(O>>4,v,S)}function Ml(v,S){var L,O=8;for(L=0;16>L;++L)O+=v[S+L-32];_o(O>>4,v,S)}function jc(v,S){_o(128,v,S)}function Nt(v,S,L){return v+2*S+L+2>>2}function Ga(v,S){var L,O=S-32;for(O=new Uint8Array([Nt(v[O-1],v[O+0],v[O+1]),Nt(v[O+0],v[O+1],v[O+2]),Nt(v[O+1],v[O+2],v[O+3]),Nt(v[O+2],v[O+3],v[O+4])]),L=0;4>L;++L)r(v,S+32*L,O,0,O.length)}function Os(v,S){var L=v[S-1],O=v[S-1+32],z=v[S-1+64],W=v[S-1+96];He(v,S+0,16843009*Nt(v[S-1-32],L,O)),He(v,S+32,16843009*Nt(L,O,z)),He(v,S+64,16843009*Nt(O,z,W)),He(v,S+96,16843009*Nt(z,W,W))}function kt(v,S){var L,O=4;for(L=0;4>L;++L)O+=v[S+L-32]+v[S-1+32*L];for(O>>=3,L=0;4>L;++L)i(v,S+32*L,O,4)}function Oc(v,S){var L=v[S-1+0],O=v[S-1+32],z=v[S-1+64],W=v[S-1-32],Y=v[S+0-32],Z=v[S+1-32],ee=v[S+2-32],ce=v[S+3-32];v[S+0+96]=Nt(O,z,v[S-1+96]),v[S+1+96]=v[S+0+64]=Nt(L,O,z),v[S+2+96]=v[S+1+64]=v[S+0+32]=Nt(W,L,O),v[S+3+96]=v[S+2+64]=v[S+1+32]=v[S+0+0]=Nt(Y,W,L),v[S+3+64]=v[S+2+32]=v[S+1+0]=Nt(Z,Y,W),v[S+3+32]=v[S+2+0]=Nt(ee,Z,Y),v[S+3+0]=Nt(ce,ee,Z)}function qt(v,S){var L=v[S+1-32],O=v[S+2-32],z=v[S+3-32],W=v[S+4-32],Y=v[S+5-32],Z=v[S+6-32],ee=v[S+7-32];v[S+0+0]=Nt(v[S+0-32],L,O),v[S+1+0]=v[S+0+32]=Nt(L,O,z),v[S+2+0]=v[S+1+32]=v[S+0+64]=Nt(O,z,W),v[S+3+0]=v[S+2+32]=v[S+1+64]=v[S+0+96]=Nt(z,W,Y),v[S+3+32]=v[S+2+64]=v[S+1+96]=Nt(W,Y,Z),v[S+3+64]=v[S+2+96]=Nt(Y,Z,ee),v[S+3+96]=Nt(Z,ee,ee)}function er(v,S){var L=v[S-1+0],O=v[S-1+32],z=v[S-1+64],W=v[S-1-32],Y=v[S+0-32],Z=v[S+1-32],ee=v[S+2-32],ce=v[S+3-32];v[S+0+0]=v[S+1+64]=W+Y+1>>1,v[S+1+0]=v[S+2+64]=Y+Z+1>>1,v[S+2+0]=v[S+3+64]=Z+ee+1>>1,v[S+3+0]=ee+ce+1>>1,v[S+0+96]=Nt(z,O,L),v[S+0+64]=Nt(O,L,W),v[S+0+32]=v[S+1+96]=Nt(L,W,Y),v[S+1+32]=v[S+2+96]=Nt(W,Y,Z),v[S+2+32]=v[S+3+96]=Nt(Y,Z,ee),v[S+3+32]=Nt(Z,ee,ce)}function Bl(v,S){var L=v[S+0-32],O=v[S+1-32],z=v[S+2-32],W=v[S+3-32],Y=v[S+4-32],Z=v[S+5-32],ee=v[S+6-32],ce=v[S+7-32];v[S+0+0]=L+O+1>>1,v[S+1+0]=v[S+0+64]=O+z+1>>1,v[S+2+0]=v[S+1+64]=z+W+1>>1,v[S+3+0]=v[S+2+64]=W+Y+1>>1,v[S+0+32]=Nt(L,O,z),v[S+1+32]=v[S+0+96]=Nt(O,z,W),v[S+2+32]=v[S+1+96]=Nt(z,W,Y),v[S+3+32]=v[S+2+96]=Nt(W,Y,Z),v[S+3+64]=Nt(Y,Z,ee),v[S+3+96]=Nt(Z,ee,ce)}function Fl(v,S){var L=v[S-1+0],O=v[S-1+32],z=v[S-1+64],W=v[S-1+96];v[S+0+0]=L+O+1>>1,v[S+2+0]=v[S+0+32]=O+z+1>>1,v[S+2+32]=v[S+0+64]=z+W+1>>1,v[S+1+0]=Nt(L,O,z),v[S+3+0]=v[S+1+32]=Nt(O,z,W),v[S+3+32]=v[S+1+64]=Nt(z,W,W),v[S+3+64]=v[S+2+64]=v[S+0+96]=v[S+1+96]=v[S+2+96]=v[S+3+96]=W}function Dc(v,S){var L=v[S-1+0],O=v[S-1+32],z=v[S-1+64],W=v[S-1+96],Y=v[S-1-32],Z=v[S+0-32],ee=v[S+1-32],ce=v[S+2-32];v[S+0+0]=v[S+2+32]=L+Y+1>>1,v[S+0+32]=v[S+2+64]=O+L+1>>1,v[S+0+64]=v[S+2+96]=z+O+1>>1,v[S+0+96]=W+z+1>>1,v[S+3+0]=Nt(Z,ee,ce),v[S+2+0]=Nt(Y,Z,ee),v[S+1+0]=v[S+3+32]=Nt(L,Y,Z),v[S+1+32]=v[S+3+64]=Nt(O,L,Y),v[S+1+64]=v[S+3+96]=Nt(z,O,L),v[S+1+96]=Nt(W,z,O)}function Qs(v,S){var L;for(L=0;8>L;++L)r(v,S+32*L,v,S-32,8)}function Ul(v,S){var L;for(L=0;8>L;++L)i(v,S,v[S-1],8),S+=32}function hs(v,S,L){var O;for(O=0;8>O;++O)i(S,L+32*O,v,8)}function Yi(v,S){var L,O=8;for(L=0;8>L;++L)O+=v[S+L-32]+v[S-1+32*L];hs(O>>4,v,S)}function $a(v,S){var L,O=4;for(L=0;8>L;++L)O+=v[S+L-32];hs(O>>3,v,S)}function wa(v,S){var L,O=4;for(L=0;8>L;++L)O+=v[S-1+32*L];hs(O>>3,v,S)}function Js(v,S){hs(128,v,S)}function Ds(v,S,L){var O=v[S-L],z=v[S+0],W=3*(z-O)+Z1[1020+v[S-2*L]-v[S+L]],Y=qh[112+(W+4>>3)];v[S-L]=ps[255+O+qh[112+(W+3>>3)]],v[S+0]=ps[255+z-Y]}function qr(v,S,L,O){var z=v[S+0],W=v[S+L];return Fs[255+v[S-2*L]-v[S-L]]>O||Fs[255+W-z]>O}function Vl(v,S,L,O){return 4*Fs[255+v[S-L]-v[S+0]]+Fs[255+v[S-2*L]-v[S+L]]<=O}function zl(v,S,L,O,z){var W=v[S-3*L],Y=v[S-2*L],Z=v[S-L],ee=v[S+0],ce=v[S+L],Ne=v[S+2*L],De=v[S+3*L];return 4*Fs[255+Z-ee]+Fs[255+Y-ce]>O?0:Fs[255+v[S-4*L]-W]<=z&&Fs[255+W-Y]<=z&&Fs[255+Y-Z]<=z&&Fs[255+De-Ne]<=z&&Fs[255+Ne-ce]<=z&&Fs[255+ce-ee]<=z}function Hl(v,S,L,O){var z=2*O+1;for(O=0;16>O;++O)Vl(v,S+O,L,z)&&Ds(v,S+O,L)}function Rs(v,S,L,O){var z=2*O+1;for(O=0;16>O;++O)Vl(v,S+O*L,1,z)&&Ds(v,S+O*L,1)}function ea(v,S,L,O){var z;for(z=3;0<z;--z)Hl(v,S+=4*L,L,O)}function Ju(v,S,L,O){var z;for(z=3;0<z;--z)Rs(v,S+=4,L,O)}function sn(v,S,L,O,z,W,Y,Z){for(W=2*W+1;0<z--;){if(zl(v,S,L,W,Y))if(qr(v,S,L,Z))Ds(v,S,L);else{var ee=v,ce=S,Ne=L,De=ee[ce-2*Ne],Re=ee[ce-Ne],Ie=ee[ce+0],et=ee[ce+Ne],Ye=ee[ce+2*Ne],Ce=27*(Ke=Z1[1020+3*(Ie-Re)+Z1[1020+De-et]])+63>>7,Ee=18*Ke+63>>7,Ke=9*Ke+63>>7;ee[ce-3*Ne]=ps[255+ee[ce-3*Ne]+Ke],ee[ce-2*Ne]=ps[255+De+Ee],ee[ce-Ne]=ps[255+Re+Ce],ee[ce+0]=ps[255+Ie-Ce],ee[ce+Ne]=ps[255+et-Ee],ee[ce+2*Ne]=ps[255+Ye-Ke]}S+=O}}function Xi(v,S,L,O,z,W,Y,Z){for(W=2*W+1;0<z--;){if(zl(v,S,L,W,Y))if(qr(v,S,L,Z))Ds(v,S,L);else{var ee=v,ce=S,Ne=L,De=ee[ce-Ne],Re=ee[ce+0],Ie=ee[ce+Ne],et=qh[112+((Ye=3*(Re-De))+4>>3)],Ye=qh[112+(Ye+3>>3)],Ce=et+1>>1;ee[ce-2*Ne]=ps[255+ee[ce-2*Ne]+Ce],ee[ce-Ne]=ps[255+De+Ye],ee[ce+0]=ps[255+Re-et],ee[ce+Ne]=ps[255+Ie-Ce]}S+=O}}function ba(v,S,L,O,z,W){sn(v,S,L,1,16,O,z,W)}function Ai(v,S,L,O,z,W){sn(v,S,1,L,16,O,z,W)}function ed(v,S,L,O,z,W){var Y;for(Y=3;0<Y;--Y)Xi(v,S+=4*L,L,1,16,O,z,W)}function Fe(v,S,L,O,z,W){var Y;for(Y=3;0<Y;--Y)Xi(v,S+=4,1,L,16,O,z,W)}function Yt(v,S,L,O,z,W,Y,Z){sn(v,S,z,1,8,W,Y,Z),sn(L,O,z,1,8,W,Y,Z)}function or(v,S,L,O,z,W,Y,Z){sn(v,S,1,z,8,W,Y,Z),sn(L,O,1,z,8,W,Y,Z)}function Aa(v,S,L,O,z,W,Y,Z){Xi(v,S+4*z,z,1,8,W,Y,Z),Xi(L,O+4*z,z,1,8,W,Y,Z)}function ql(v,S,L,O,z,W,Y,Z){Xi(v,S+4,1,z,8,W,Y,Z),Xi(L,O+4,1,z,8,W,Y,Z)}function Io(){this.ba=new $t,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Wn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Wl(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Gl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ko(){this.ua=0,this.Wa=new fe,this.vb=new fe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Q,this.yc=new q}function lr(){this.xb=this.a=0,this.l=new Kt,this.ca=new $t,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new V,this.Pb=0,this.wd=new V,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ko,this.ab=0,this.gc=o(4,Gl),this.Oc=0}function Sa(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Kt,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Sn(v,S,L,O,z,W,Y){for(v=v==null?0:v[S+0],S=0;S<Y;++S)z[W+S]=v+L[O+S]&255,v=z[W+S]}function Na(v,S,L,O,z,W,Y){var Z;if(v==null)Sn(null,null,L,O,z,W,Y);else for(Z=0;Z<Y;++Z)z[W+Z]=v[S+Z]+L[O+Z]&255}function Si(v,S,L,O,z,W,Y){if(v==null)Sn(null,null,L,O,z,W,Y);else{var Z,ee=v[S+0],ce=ee,Ne=ee;for(Z=0;Z<Y;++Z)ce=Ne+(ee=v[S+Z])-ce,Ne=L[O+Z]+(-256&ce?0>ce?0:255:ce)&255,ce=ee,z[W+Z]=Ne}}function xn(v,S,L,O){var z=S.width,W=S.o;if(t(v!=null&&S!=null),0>L||0>=O||L+O>W)return null;if(!v.Cc){if(v.ga==null){var Y;if(v.ga=new Sa,(Y=v.ga==null)||(Y=S.width*S.o,t(v.Gb.length==0),v.Gb=s(Y),v.Uc=0,v.Gb==null?Y=0:(v.mb=v.Gb,v.nb=v.Uc,v.rc=null,Y=1),Y=!Y),!Y){Y=v.ga;var Z=v.Fa,ee=v.P,ce=v.qc,Ne=v.mb,De=v.nb,Re=ee+1,Ie=ce-1,et=Y.l;if(t(Z!=null&&Ne!=null&&S!=null),Do[0]=null,Do[1]=Sn,Do[2]=Na,Do[3]=Si,Y.ca=Ne,Y.tb=De,Y.c=S.width,Y.i=S.height,t(0<Y.c&&0<Y.i),1>=ce)S=0;else if(Y.$a=Z[ee+0]>>0&3,Y.Z=Z[ee+0]>>2&3,Y.Lc=Z[ee+0]>>4&3,ee=Z[ee+0]>>6&3,0>Y.$a||1<Y.$a||4<=Y.Z||1<Y.Lc||ee)S=0;else if(et.put=ui,et.ac=pn,et.bc=Di,et.ma=Y,et.width=S.width,et.height=S.height,et.Da=S.Da,et.v=S.v,et.va=S.va,et.j=S.j,et.o=S.o,Y.$a)e:{t(Y.$a==1),S=di();t:for(;;){if(S==null){S=0;break e}if(t(Y!=null),Y.mc=S,S.c=Y.c,S.i=Y.i,S.l=Y.l,S.l.ma=Y,S.l.width=Y.c,S.l.height=Y.i,S.a=0,ue(S.m,Z,Re,Ie),!Ar(Y.c,Y.i,1,S,null)||(S.ab==1&&S.gc[0].hc==3&&vi(S.s)?(Y.ic=1,Z=S.c*S.i,S.Ta=null,S.Ua=0,S.V=s(Z),S.Ba=0,S.V==null?(S.a=1,S=0):S=1):(Y.ic=0,S=qa(S,Y.c)),!S))break t;S=1;break e}Y.mc=null,S=0}else S=Ie>=Y.c*Y.i;Y=!S}if(Y)return null;v.ga.Lc!=1?v.Ga=0:O=W-L}t(v.ga!=null),t(L+O<=W);e:{if(S=(Z=v.ga).c,W=Z.l.o,Z.$a==0){if(Re=v.rc,Ie=v.Vc,et=v.Fa,ee=v.P+1+L*S,ce=v.mb,Ne=v.nb+L*S,t(ee<=v.P+v.qc),Z.Z!=0)for(t(Do[Z.Z]!=null),Y=0;Y<O;++Y)Do[Z.Z](Re,Ie,et,ee,ce,Ne,S),Re=ce,Ie=Ne,Ne+=S,ee+=S;else for(Y=0;Y<O;++Y)r(ce,Ne,et,ee,S),Re=ce,Ie=Ne,Ne+=S,ee+=S;v.rc=Re,v.Vc=Ie}else{if(t(Z.mc!=null),S=L+O,t((Y=Z.mc)!=null),t(S<=Y.i),Y.C>=S)S=1;else if(Z.ic||ke(),Z.ic){Z=Y.V,Re=Y.Ba,Ie=Y.c;var Ye=Y.i,Ce=(et=1,ee=Y.$/Ie,ce=Y.$%Ie,Ne=Y.m,De=Y.s,Y.$),Ee=Ie*Ye,Ke=Ie*S,st=De.wc,Ze=Ce<Ke?Ln(De,ce,ee):null;t(Ce<=Ee),t(S<=Ye),t(vi(De));t:for(;;){for(;!Ne.h&&Ce<Ke;){if(ce&st||(Ze=Ln(De,ce,ee)),t(Ze!=null),he(Ne),256>(Ye=ei(Ze.G[0],Ze.H[0],Ne)))Z[Re+Ce]=Ye,++Ce,++ce>=Ie&&(ce=0,++ee<=S&&!(ee%16)&&Mn(Y,ee));else{if(!(280>Ye)){et=0;break t}Ye=us(Ye-256,Ne);var wt,ft=ei(Ze.G[4],Ze.H[4],Ne);if(he(Ne),!(Ce>=(ft=Jr(Ie,ft=us(ft,Ne)))&&Ee-Ce>=Ye)){et=0;break t}for(wt=0;wt<Ye;++wt)Z[Re+Ce+wt]=Z[Re+Ce+wt-ft];for(Ce+=Ye,ce+=Ye;ce>=Ie;)ce-=Ie,++ee<=S&&!(ee%16)&&Mn(Y,ee);Ce<Ke&&ce&st&&(Ze=Ln(De,ce,ee))}t(Ne.h==de(Ne))}Mn(Y,ee>S?S:ee);break t}!et||Ne.h&&Ce<Ee?(et=0,Y.a=Ne.h?5:3):Y.$=Ce,S=et}else S=ti(Y,Y.V,Y.Ba,Y.c,Y.i,S,No);if(!S){O=0;break e}}L+O>=W&&(v.Cc=1),O=1}if(!O)return null;if(v.Cc&&((O=v.ga)!=null&&(O.mc=null),v.ga=null,0<v.Ga))return alert("todo:WebPDequantizeLevels"),null}return v.nb+L*z}function E(v,S,L,O,z,W){for(;0<z--;){var Y,Z=v,ee=S+(L?1:0),ce=v,Ne=S+(L?0:3);for(Y=0;Y<O;++Y){var De=ce[Ne+4*Y];De!=255&&(De*=32897,Z[ee+4*Y+0]=Z[ee+4*Y+0]*De>>23,Z[ee+4*Y+1]=Z[ee+4*Y+1]*De>>23,Z[ee+4*Y+2]=Z[ee+4*Y+2]*De>>23)}S+=W}}function H(v,S,L,O,z){for(;0<O--;){var W;for(W=0;W<L;++W){var Y=v[S+2*W+0],Z=15&(ce=v[S+2*W+1]),ee=4369*Z,ce=(240&ce|ce>>4)*ee>>16;v[S+2*W+0]=(240&Y|Y>>4)*ee>>16&240|(15&Y|Y<<4)*ee>>16>>4&15,v[S+2*W+1]=240&ce|Z}S+=z}}function ae(v,S,L,O,z,W,Y,Z){var ee,ce,Ne=255;for(ce=0;ce<z;++ce){for(ee=0;ee<O;++ee){var De=v[S+ee];W[Y+4*ee]=De,Ne&=De}S+=L,Y+=Z}return Ne!=255}function we(v,S,L,O,z){var W;for(W=0;W<z;++W)L[O+W]=v[S+W]>>8}function ke(){Zi=E,Fn=H,Un=ae,_r=we}function Xe(v,S,L){K[v]=function(O,z,W,Y,Z,ee,ce,Ne,De,Re,Ie,et,Ye,Ce,Ee,Ke,st){var Ze,wt=st-1>>1,ft=Z[ee+0]|ce[Ne+0]<<16,Ot=De[Re+0]|Ie[et+0]<<16;t(O!=null);var pt=3*ft+Ot+131074>>2;for(S(O[z+0],255&pt,pt>>16,Ye,Ce),W!=null&&(pt=3*Ot+ft+131074>>2,S(W[Y+0],255&pt,pt>>16,Ee,Ke)),Ze=1;Ze<=wt;++Ze){var An=Z[ee+Ze]|ce[Ne+Ze]<<16,Cn=De[Re+Ze]|Ie[et+Ze]<<16,yn=ft+An+Ot+Cn+524296,cn=yn+2*(An+Ot)>>3;pt=cn+ft>>1,ft=(yn=yn+2*(ft+Cn)>>3)+An>>1,S(O[z+2*Ze-1],255&pt,pt>>16,Ye,Ce+(2*Ze-1)*L),S(O[z+2*Ze-0],255&ft,ft>>16,Ye,Ce+(2*Ze-0)*L),W!=null&&(pt=yn+Ot>>1,ft=cn+Cn>>1,S(W[Y+2*Ze-1],255&pt,pt>>16,Ee,Ke+(2*Ze-1)*L),S(W[Y+2*Ze+0],255&ft,ft>>16,Ee,Ke+(2*Ze+0)*L)),ft=An,Ot=Cn}1&st||(pt=3*ft+Ot+131074>>2,S(O[z+st-1],255&pt,pt>>16,Ye,Ce+(st-1)*L),W!=null&&(pt=3*Ot+ft+131074>>2,S(W[Y+st-1],255&pt,pt>>16,Ee,Ke+(st-1)*L)))}}function tt(){Us[Wh]=ON,Us[Gh]=ly,Us[ry]=DN,Us[$h]=cy,Us[Yh]=uy,Us[Q1]=dy,Us[iy]=RN,Us[J1]=ly,Us[ep]=cy,Us[Xh]=uy,Us[tp]=dy}function gt(v){return v&-16384?0>v?0:255:v>>MN}function Lt(v,S){return gt((19077*v>>8)+(26149*S>>8)-14234)}function zt(v,S,L){return gt((19077*v>>8)-(6419*S>>8)-(13320*L>>8)+8708)}function Ht(v,S){return gt((19077*v>>8)+(33050*S>>8)-17685)}function an(v,S,L,O,z){O[z+0]=Lt(v,L),O[z+1]=zt(v,S,L),O[z+2]=Ht(v,S)}function Yn(v,S,L,O,z){O[z+0]=Ht(v,S),O[z+1]=zt(v,S,L),O[z+2]=Lt(v,L)}function Nn(v,S,L,O,z){var W=zt(v,S,L);S=W<<3&224|Ht(v,S)>>3,O[z+0]=248&Lt(v,L)|W>>5,O[z+1]=S}function tr(v,S,L,O,z){var W=240&Ht(v,S)|15;O[z+0]=240&Lt(v,L)|zt(v,S,L)>>4,O[z+1]=W}function ni(v,S,L,O,z){O[z+0]=255,an(v,S,L,O,z+1)}function nr(v,S,L,O,z){Yn(v,S,L,O,z),O[z+3]=255}function fs(v,S,L,O,z){an(v,S,L,O,z),O[z+3]=255}function mr(v,S){return 0>v?0:v>S?S:v}function Bi(v,S,L){K[v]=function(O,z,W,Y,Z,ee,ce,Ne,De){for(var Re=Ne+(-2&De)*L;Ne!=Re;)S(O[z+0],W[Y+0],Z[ee+0],ce,Ne),S(O[z+1],W[Y+0],Z[ee+0],ce,Ne+L),z+=2,++Y,++ee,Ne+=2*L;1&De&&S(O[z+0],W[Y+0],Z[ee+0],ce,Ne)}}function fi(v,S,L){return L==0?v==0?S==0?6:5:S==0?4:0:L}function Lo(v,S,L,O,z){switch(v>>>30){case 3:Ae(S,L,O,z,0);break;case 2:Te(S,L,O,z);break;case 1:nt(S,L,O,z)}}function Ni(v,S){var L,O,z=S.M,W=S.Nb,Y=v.oc,Z=v.pc+40,ee=v.oc,ce=v.pc+584,Ne=v.oc,De=v.pc+600;for(L=0;16>L;++L)Y[Z+32*L-1]=129;for(L=0;8>L;++L)ee[ce+32*L-1]=129,Ne[De+32*L-1]=129;for(0<z?Y[Z-1-32]=ee[ce-1-32]=Ne[De-1-32]=129:(i(Y,Z-32-1,127,21),i(ee,ce-32-1,127,9),i(Ne,De-32-1,127,9)),O=0;O<v.za;++O){var Re=S.ya[S.aa+O];if(0<O){for(L=-1;16>L;++L)r(Y,Z+32*L-4,Y,Z+32*L+12,4);for(L=-1;8>L;++L)r(ee,ce+32*L-4,ee,ce+32*L+4,4),r(Ne,De+32*L-4,Ne,De+32*L+4,4)}var Ie=v.Gd,et=v.Hd+O,Ye=Re.ad,Ce=Re.Hc;if(0<z&&(r(Y,Z-32,Ie[et].y,0,16),r(ee,ce-32,Ie[et].f,0,8),r(Ne,De-32,Ie[et].ea,0,8)),Re.Za){var Ee=Y,Ke=Z-32+16;for(0<z&&(O>=v.za-1?i(Ee,Ke,Ie[et].y[15],4):r(Ee,Ke,Ie[et+1].y,0,4)),L=0;4>L;L++)Ee[Ke+128+L]=Ee[Ke+256+L]=Ee[Ke+384+L]=Ee[Ke+0+L];for(L=0;16>L;++L,Ce<<=2)Ee=Y,Ke=Z+fy[L],ta[Re.Ob[L]](Ee,Ke),Lo(Ce,Ye,16*+L,Ee,Ke)}else if(Ee=fi(O,z,Re.Ob[0]),Oo[Ee](Y,Z),Ce!=0)for(L=0;16>L;++L,Ce<<=2)Lo(Ce,Ye,16*+L,Y,Z+fy[L]);for(L=Re.Gc,Ee=fi(O,z,Re.Dd),Za[Ee](ee,ce),Za[Ee](Ne,De),Ce=Ye,Ee=ee,Ke=ce,255&(Re=L>>0)&&(170&Re?Ue(Ce,256,Ee,Ke):at(Ce,256,Ee,Ke)),Re=Ne,Ce=De,255&(L>>=8)&&(170&L?Ue(Ye,320,Re,Ce):at(Ye,320,Re,Ce)),z<v.Ub-1&&(r(Ie[et].y,0,Y,Z+480,16),r(Ie[et].f,0,ee,ce+224,8),r(Ie[et].ea,0,Ne,De+224,8)),L=8*W*v.B,Ie=v.sa,et=v.ta+16*O+16*W*v.R,Ye=v.qa,Re=v.ra+8*O+L,Ce=v.Ha,Ee=v.Ia+8*O+L,L=0;16>L;++L)r(Ie,et+L*v.R,Y,Z+32*L,16);for(L=0;8>L;++L)r(Ye,Re+L*v.B,ee,ce+32*L,8),r(Ce,Ee+L*v.B,Ne,De+32*L,8)}}function Po(v,S,L,O,z,W,Y,Z,ee){var ce=[0],Ne=[0],De=0,Re=ee!=null?ee.kd:0,Ie=ee??new Wl;if(v==null||12>L)return 7;Ie.data=v,Ie.w=S,Ie.ha=L,S=[S],L=[L],Ie.gb=[Ie.gb];e:{var et=S,Ye=L,Ce=Ie.gb;if(t(v!=null),t(Ye!=null),t(Ce!=null),Ce[0]=0,12<=Ye[0]&&!n(v,et[0],"RIFF")){if(n(v,et[0]+8,"WEBP")){Ce=3;break e}var Ee=Ge(v,et[0]+4);if(12>Ee||4294967286<Ee){Ce=3;break e}if(Re&&Ee>Ye[0]-8){Ce=7;break e}Ce[0]=Ee,et[0]+=12,Ye[0]-=12}Ce=0}if(Ce!=0)return Ce;for(Ee=0<Ie.gb[0],L=L[0];;){e:{var Ke=v;Ye=S,Ce=L;var st=ce,Ze=Ne,wt=et=[0];if((pt=De=[De])[0]=0,8>Ce[0])Ce=7;else{if(!n(Ke,Ye[0],"VP8X")){if(Ge(Ke,Ye[0]+4)!=10){Ce=3;break e}if(18>Ce[0]){Ce=7;break e}var ft=Ge(Ke,Ye[0]+8),Ot=1+rt(Ke,Ye[0]+12);if(2147483648<=Ot*(Ke=1+rt(Ke,Ye[0]+15))){Ce=3;break e}wt!=null&&(wt[0]=ft),st!=null&&(st[0]=Ot),Ze!=null&&(Ze[0]=Ke),Ye[0]+=18,Ce[0]-=18,pt[0]=1}Ce=0}}if(De=De[0],et=et[0],Ce!=0)return Ce;if(Ye=!!(2&et),!Ee&&De)return 3;if(W!=null&&(W[0]=!!(16&et)),Y!=null&&(Y[0]=Ye),Z!=null&&(Z[0]=0),Y=ce[0],et=Ne[0],De&&Ye&&ee==null){Ce=0;break}if(4>L){Ce=7;break}if(Ee&&De||!Ee&&!De&&!n(v,S[0],"ALPH")){L=[L],Ie.na=[Ie.na],Ie.P=[Ie.P],Ie.Sa=[Ie.Sa];e:{ft=v,Ce=S,Ee=L;var pt=Ie.gb;st=Ie.na,Ze=Ie.P,wt=Ie.Sa,Ot=22,t(ft!=null),t(Ee!=null),Ke=Ce[0];var An=Ee[0];for(t(st!=null),t(wt!=null),st[0]=null,Ze[0]=null,wt[0]=0;;){if(Ce[0]=Ke,Ee[0]=An,8>An){Ce=7;break e}var Cn=Ge(ft,Ke+4);if(4294967286<Cn){Ce=3;break e}var yn=8+Cn+1&-2;if(Ot+=yn,0<pt&&Ot>pt){Ce=3;break e}if(!n(ft,Ke,"VP8 ")||!n(ft,Ke,"VP8L")){Ce=0;break e}if(An[0]<yn){Ce=7;break e}n(ft,Ke,"ALPH")||(st[0]=ft,Ze[0]=Ke+8,wt[0]=Cn),Ke+=yn,An-=yn}}if(L=L[0],Ie.na=Ie.na[0],Ie.P=Ie.P[0],Ie.Sa=Ie.Sa[0],Ce!=0)break}L=[L],Ie.Ja=[Ie.Ja],Ie.xa=[Ie.xa];e:if(pt=v,Ce=S,Ee=L,st=Ie.gb[0],Ze=Ie.Ja,wt=Ie.xa,ft=Ce[0],Ke=!n(pt,ft,"VP8 "),Ot=!n(pt,ft,"VP8L"),t(pt!=null),t(Ee!=null),t(Ze!=null),t(wt!=null),8>Ee[0])Ce=7;else{if(Ke||Ot){if(pt=Ge(pt,ft+4),12<=st&&pt>st-12){Ce=3;break e}if(Re&&pt>Ee[0]-8){Ce=7;break e}Ze[0]=pt,Ce[0]+=8,Ee[0]-=8,wt[0]=Ot}else wt[0]=5<=Ee[0]&&pt[ft+0]==47&&!(pt[ft+4]>>5),Ze[0]=Ee[0];Ce=0}if(L=L[0],Ie.Ja=Ie.Ja[0],Ie.xa=Ie.xa[0],S=S[0],Ce!=0)break;if(4294967286<Ie.Ja)return 3;if(Z==null||Ye||(Z[0]=Ie.xa?2:1),Y=[Y],et=[et],Ie.xa){if(5>L){Ce=7;break}Z=Y,Re=et,Ye=W,v==null||5>L?v=0:5<=L&&v[S+0]==47&&!(v[S+4]>>5)?(Ee=[0],pt=[0],st=[0],ue(Ze=new V,v,S,L),_t(Ze,Ee,pt,st)?(Z!=null&&(Z[0]=Ee[0]),Re!=null&&(Re[0]=pt[0]),Ye!=null&&(Ye[0]=st[0]),v=1):v=0):v=0}else{if(10>L){Ce=7;break}Z=et,v==null||10>L||!Co(v,S+3,L-3)?v=0:(Re=v[S+0]|v[S+1]<<8|v[S+2]<<16,Ye=16383&(v[S+7]<<8|v[S+6]),v=16383&(v[S+9]<<8|v[S+8]),1&Re||3<(Re>>1&7)||!(Re>>4&1)||Re>>5>=Ie.Ja||!Ye||!v?v=0:(Y&&(Y[0]=Ye),Z&&(Z[0]=v),v=1))}if(!v||(Y=Y[0],et=et[0],De&&(ce[0]!=Y||Ne[0]!=et)))return 3;ee!=null&&(ee[0]=Ie,ee.offset=S-ee.w,t(4294967286>S-ee.w),t(ee.offset==ee.ha-L));break}return Ce==0||Ce==7&&De&&ee==null?(W!=null&&(W[0]|=Ie.na!=null&&0<Ie.na.length),O!=null&&(O[0]=Y),z!=null&&(z[0]=et),0):Ce}function Ya(v,S,L){var O=S.width,z=S.height,W=0,Y=0,Z=O,ee=z;if(S.Da=v!=null&&0<v.Da,S.Da&&(Z=v.cd,ee=v.bd,W=v.v,Y=v.j,11>L||(W&=-2,Y&=-2),0>W||0>Y||0>=Z||0>=ee||W+Z>O||Y+ee>z))return 0;if(S.v=W,S.j=Y,S.va=W+Z,S.o=Y+ee,S.U=Z,S.T=ee,S.da=v!=null&&0<v.da,S.da){if(!bt(Z,ee,L=[v.ib],W=[v.hb]))return 0;S.ib=L[0],S.hb=W[0]}return S.ob=v!=null&&v.ob,S.Kb=v==null||!v.Sd,S.da&&(S.ob=S.ib<3*O/4&&S.hb<3*z/4,S.Kb=0),1}function $l(v){if(v==null)return 2;if(11>v.S){var S=v.f.RGBA;S.fb+=(v.height-1)*S.A,S.A=-S.A}else S=v.f.kb,v=v.height,S.O+=(v-1)*S.fa,S.fa=-S.fa,S.N+=(v-1>>1)*S.Ab,S.Ab=-S.Ab,S.W+=(v-1>>1)*S.Db,S.Db=-S.Db,S.F!=null&&(S.J+=(v-1)*S.lb,S.lb=-S.lb);return 0}function Xa(v,S,L,O){if(O==null||0>=v||0>=S)return 2;if(L!=null){if(L.Da){var z=L.cd,W=L.bd,Y=-2&L.v,Z=-2&L.j;if(0>Y||0>Z||0>=z||0>=W||Y+z>v||Z+W>S)return 2;v=z,S=W}if(L.da){if(!bt(v,S,z=[L.ib],W=[L.hb]))return 2;v=z[0],S=W[0]}}O.width=v,O.height=S;e:{var ee=O.width,ce=O.height;if(v=O.S,0>=ee||0>=ce||!(v>=Wh&&13>v))v=2;else{if(0>=O.Rd&&O.sd==null){Y=W=z=S=0;var Ne=(Z=ee*py[v])*ce;if(11>v||(W=(ce+1)/2*(S=(ee+1)/2),v==12&&(Y=(z=ee)*ce)),(ce=s(Ne+2*W+Y))==null){v=1;break e}O.sd=ce,11>v?((ee=O.f.RGBA).eb=ce,ee.fb=0,ee.A=Z,ee.size=Ne):((ee=O.f.kb).y=ce,ee.O=0,ee.fa=Z,ee.Fd=Ne,ee.f=ce,ee.N=0+Ne,ee.Ab=S,ee.Cd=W,ee.ea=ce,ee.W=0+Ne+W,ee.Db=S,ee.Ed=W,v==12&&(ee.F=ce,ee.J=0+Ne+2*W),ee.Tc=Y,ee.lb=z)}if(S=1,z=O.S,W=O.width,Y=O.height,z>=Wh&&13>z)if(11>z)v=O.f.RGBA,S&=(Z=Math.abs(v.A))*(Y-1)+W<=v.size,S&=Z>=W*py[z],S&=v.eb!=null;else{v=O.f.kb,Z=(W+1)/2,Ne=(Y+1)/2,ee=Math.abs(v.fa),ce=Math.abs(v.Ab);var De=Math.abs(v.Db),Re=Math.abs(v.lb),Ie=Re*(Y-1)+W;S&=ee*(Y-1)+W<=v.Fd,S&=ce*(Ne-1)+Z<=v.Cd,S=(S&=De*(Ne-1)+Z<=v.Ed)&ee>=W&ce>=Z&De>=Z,S&=v.y!=null,S&=v.f!=null,S&=v.ea!=null,z==12&&(S&=Re>=W,S&=Ie<=v.Tc,S&=v.F!=null)}else S=0;v=S?0:2}}return v!=0||L!=null&&L.fd&&(v=$l(O)),v}var Pn=64,jo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ca=24,Ms=32,nn=8,Wr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];re("Predictor0","PredictorAdd0"),K.Predictor0=function(){return 4278190080},K.Predictor1=function(v){return v},K.Predictor2=function(v,S,L){return S[L+0]},K.Predictor3=function(v,S,L){return S[L+1]},K.Predictor4=function(v,S,L){return S[L-1]},K.Predictor5=function(v,S,L){return ve(ve(v,S[L+1]),S[L+0])},K.Predictor6=function(v,S,L){return ve(v,S[L-1])},K.Predictor7=function(v,S,L){return ve(v,S[L+0])},K.Predictor8=function(v,S,L){return ve(S[L-1],S[L+0])},K.Predictor9=function(v,S,L){return ve(S[L+0],S[L+1])},K.Predictor10=function(v,S,L){return ve(ve(v,S[L-1]),ve(S[L+0],S[L+1]))},K.Predictor11=function(v,S,L){var O=S[L+0];return 0>=We(O>>24&255,v>>24&255,(S=S[L-1])>>24&255)+We(O>>16&255,v>>16&255,S>>16&255)+We(O>>8&255,v>>8&255,S>>8&255)+We(255&O,255&v,255&S)?O:v},K.Predictor12=function(v,S,L){var O=S[L+0];return(ze((v>>24&255)+(O>>24&255)-((S=S[L-1])>>24&255))<<24|ze((v>>16&255)+(O>>16&255)-(S>>16&255))<<16|ze((v>>8&255)+(O>>8&255)-(S>>8&255))<<8|ze((255&v)+(255&O)-(255&S)))>>>0},K.Predictor13=function(v,S,L){var O=S[L-1];return(Be((v=ve(v,S[L+0]))>>24&255,O>>24&255)<<24|Be(v>>16&255,O>>16&255)<<16|Be(v>>8&255,O>>8&255)<<8|Be(v>>0&255,O>>0&255))>>>0};var F=K.PredictorAdd0;K.PredictorAdd1=Qe,re("Predictor2","PredictorAdd2"),re("Predictor3","PredictorAdd3"),re("Predictor4","PredictorAdd4"),re("Predictor5","PredictorAdd5"),re("Predictor6","PredictorAdd6"),re("Predictor7","PredictorAdd7"),re("Predictor8","PredictorAdd8"),re("Predictor9","PredictorAdd9"),re("Predictor10","PredictorAdd10"),re("Predictor11","PredictorAdd11"),re("Predictor12","PredictorAdd12"),re("Predictor13","PredictorAdd13");var a=K.PredictorAdd2;Dt("ColorIndexInverseTransform","MapARGB","32b",function(v){return v>>8&255},function(v){return v}),Dt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(v){return v},function(v){return v>>8&255});var l,c=K.ColorIndexInverseTransform,h=K.MapARGB,p=K.VP8LColorIndexInverseTransformAlpha,g=K.MapAlpha,w=K.VP8LPredictorsAdd=[];w.length=16,(K.VP8LPredictors=[]).length=16,(K.VP8LPredictorsAdd_C=[]).length=16,(K.VP8LPredictors_C=[]).length=16;var N,T,D,B,G,le,ye,Ae,Te,Ue,nt,at,it,Jt,Ut,xr,Gr,cr,fn,rr,Er,Fi,Bs,Ki,Zi,Fn,Un,_r,$r=s(511),Ka=s(2041),td=s(225),Rc=s(767),Hh=0,Z1=Ka,qh=td,ps=Rc,Fs=$r,Wh=0,Gh=1,ry=2,$h=3,Yh=4,Q1=5,iy=6,J1=7,ep=8,Xh=9,tp=10,wN=[2,3,7],bN=[3,3,11],sy=[280,256,256,256,40],AN=[0,1,1,1,0],SN=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],NN=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],CN=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],EN=8,np=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],rp=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],nd=null,_N=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],TN=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ay=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],IN=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],kN=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],LN=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],PN=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Oo=[],ta=[],Za=[],jN=1,oy=2,Do=[],Us=[];Xe("UpsampleRgbLinePair",an,3),Xe("UpsampleBgrLinePair",Yn,3),Xe("UpsampleRgbaLinePair",fs,4),Xe("UpsampleBgraLinePair",nr,4),Xe("UpsampleArgbLinePair",ni,4),Xe("UpsampleRgba4444LinePair",tr,2),Xe("UpsampleRgb565LinePair",Nn,2);var ON=K.UpsampleRgbLinePair,DN=K.UpsampleBgrLinePair,ly=K.UpsampleRgbaLinePair,cy=K.UpsampleBgraLinePair,uy=K.UpsampleArgbLinePair,dy=K.UpsampleRgba4444LinePair,RN=K.UpsampleRgb565LinePair,Kh=16,Zh=1<<Kh-1,rd=-227,ip=482,MN=6,hy=0,BN=s(256),FN=s(256),UN=s(256),VN=s(256),zN=s(ip-rd),HN=s(ip-rd);Bi("YuvToRgbRow",an,3),Bi("YuvToBgrRow",Yn,3),Bi("YuvToRgbaRow",fs,4),Bi("YuvToBgraRow",nr,4),Bi("YuvToArgbRow",ni,4),Bi("YuvToRgba4444Row",tr,2),Bi("YuvToRgb565Row",Nn,2);var fy=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Qh=[0,2,8],qN=[8,7,6,4,4,2,2,2,1,1,1,1],WN=1;this.WebPDecodeRGBA=function(v,S,L,O,z){var W=Gh,Y=new Io,Z=new $t;Y.ba=Z,Z.S=W,Z.width=[Z.width],Z.height=[Z.height];var ee=Z.width,ce=Z.height,Ne=new ci;if(Ne==null||v==null)var De=2;else t(Ne!=null),De=Po(v,S,L,Ne.width,Ne.height,Ne.Pd,Ne.Qd,Ne.format,null);if(De!=0?ee=0:(ee!=null&&(ee[0]=Ne.width[0]),ce!=null&&(ce[0]=Ne.height[0]),ee=1),ee){Z.width=Z.width[0],Z.height=Z.height[0],O!=null&&(O[0]=Z.width),z!=null&&(z[0]=Z.height);e:{if(O=new Kt,(z=new Wl).data=v,z.w=S,z.ha=L,z.kd=1,S=[0],t(z!=null),((v=Po(z.data,z.w,z.ha,null,null,null,S,null,z))==0||v==7)&&S[0]&&(v=4),(S=v)==0){if(t(Y!=null),O.data=z.data,O.w=z.w+z.offset,O.ha=z.ha-z.offset,O.put=ui,O.ac=pn,O.bc=Di,O.ma=Y,z.xa){if((v=di())==null){Y=1;break e}if(function(Re,Ie){var et=[0],Ye=[0],Ce=[0];t:for(;;){if(Re==null)return 0;if(Ie==null)return Re.a=2,0;if(Re.l=Ie,Re.a=0,ue(Re.m,Ie.data,Ie.w,Ie.ha),!_t(Re.m,et,Ye,Ce)){Re.a=3;break t}if(Re.xb=oy,Ie.width=et[0],Ie.height=Ye[0],!Ar(et[0],Ye[0],1,Re,null))break t;return 1}return t(Re.a!=0),0}(v,O)){if(O=(S=Xa(O.width,O.height,Y.Oa,Y.ba))==0){t:{O=v;n:for(;;){if(O==null){O=0;break t}if(t(O.s.yc!=null),t(O.s.Ya!=null),t(0<O.s.Wb),t((L=O.l)!=null),t((z=L.ma)!=null),O.xb!=0){if(O.ca=z.ba,O.tb=z.tb,t(O.ca!=null),!Ya(z.Oa,L,$h)){O.a=2;break n}if(!qa(O,L.width)||L.da)break n;if((L.da||tn(O.ca.S))&&ke(),11>O.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),O.ca.f.kb.F!=null&&ke()),O.Pb&&0<O.s.ua&&O.s.vb.X==null&&!vt(O.s.vb,O.s.Wa.Xa)){O.a=1;break n}O.xb=0}if(!ti(O,O.V,O.Ba,O.c,O.i,L.o,mt))break n;z.Dc=O.Ma,O=1;break t}t(O.a!=0),O=0}O=!O}O&&(S=v.a)}else S=v.a}else{if((v=new jl)==null){Y=1;break e}if(v.Fa=z.na,v.P=z.P,v.qc=z.Sa,Jn(v,O)){if((S=Xa(O.width,O.height,Y.Oa,Y.ba))==0){if(v.Aa=0,L=Y.Oa,t((z=v)!=null),L!=null){if(0<(ee=0>(ee=L.Md)?0:100<ee?255:255*ee/100)){for(ce=Ne=0;4>ce;++ce)12>(De=z.pb[ce]).lc&&(De.ia=ee*qN[0>De.lc?0:De.lc]>>3),Ne|=De.ia;Ne&&(alert("todo:VP8InitRandom"),z.ia=1)}z.Ga=L.Id,100<z.Ga?z.Ga=100:0>z.Ga&&(z.Ga=0)}$n(v,O)||(S=v.a)}}else S=v.a}S==0&&Y.Oa!=null&&Y.Oa.fd&&(S=$l(Y.ba))}Y=S}W=Y!=0?null:11>W?Z.f.RGBA.eb:Z.f.kb.y}else W=null;return W};var py=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(K,te){for(var be="",$=0;$<4;$++)be+=String.fromCharCode(K[te++]);return be}function x(K,te){return(K[te+0]<<0|K[te+1]<<8|K[te+2]<<16)>>>0}function y(K,te){return(K[te+0]<<0|K[te+1]<<8|K[te+2]<<16|K[te+3]<<24)>>>0}new d;var A=[0],b=[0],P=[],I=new d,j=e,C=function(K,te){var be={},$=0,q=!1,X=0,Q=0;if(be.frames=[],!function(se,de,xe,he){for(var Pe=0;Pe<he;Pe++)if(se[de+Pe]!=xe.charCodeAt(Pe))return!0;return!1}(K,te,"RIFF",4)){var J,pe;for(y(K,te+=4),te+=8;te<K.length;){var ge=f(K,te),ue=y(K,te+=4);te+=4;var Se=ue+(1&ue);switch(ge){case"VP8 ":case"VP8L":be.frames[$]===void 0&&(be.frames[$]={}),(V=be.frames[$]).src_off=q?Q:te-8,V.src_size=X+ue+8,$++,q&&(q=!1,X=0,Q=0);break;case"VP8X":(V=be.header={}).feature_flags=K[te];var _e=te+4;V.canvas_width=1+x(K,_e),_e+=3,V.canvas_height=1+x(K,_e),_e+=3;break;case"ALPH":q=!0,X=Se+8,Q=te-8;break;case"ANIM":(V=be.header).bgcolor=y(K,te),_e=te+4,V.loop_count=(J=K)[(pe=_e)+0]<<0|J[pe+1]<<8,_e+=2;break;case"ANMF":var Me,V;(V=be.frames[$]={}).offset_x=2*x(K,te),te+=3,V.offset_y=2*x(K,te),te+=3,V.width=1+x(K,te),te+=3,V.height=1+x(K,te),te+=3,V.duration=x(K,te),te+=3,Me=K[te++],V.dispose=1&Me,V.blend=Me>>1&1}ge!="ANMF"&&(te+=Se)}return be}}(j,0);C.response=j,C.rgbaoutput=!0,C.dataurl=!1;var _=C.header?C.header:null,k=C.frames?C.frames:null;if(_){_.loop_counter=_.loop_count,A=[_.canvas_height],b=[_.canvas_width];for(var R=0;R<k.length&&k[R].blend!=0;R++);}var M=k[0],ne=I.WebPDecodeRGBA(j,M.src_off,M.src_size,b,A);M.rgba=ne,M.imgwidth=b[0],M.imgheight=A[0];for(var U=0;U<b[0]*A[0]*4;U++)P[U]=ne[U];return this.width=b,this.height=A,this.data=P,this}(function(e){var t=function(){return typeof a2=="function"},n=function(A,b,P,I){var j=4,C=o;switch(I){case e.image_compression.FAST:j=1,C=s;break;case e.image_compression.MEDIUM:j=6,C=u;break;case e.image_compression.SLOW:j=9,C=d}A=r(A,b,P,C);var _=a2(A,{level:j});return e.__addimage__.arrayBufferToBinaryString(_)},r=function(A,b,P,I){for(var j,C,_,k=A.length/b,R=new Uint8Array(A.length+k),M=x(),ne=0;ne<k;ne+=1){if(_=ne*b,j=A.subarray(_,_+b),I)R.set(I(j,P,C),_+ne);else{for(var U,K=M.length,te=[];U<K;U+=1)te[U]=M[U](j,P,C);var be=y(te.concat());R.set(te[be],_+ne)}C=j}return R},i=function(A){var b=Array.apply([],A);return b.unshift(0),b},s=function(A,b){var P,I=[],j=A.length;I[0]=1;for(var C=0;C<j;C+=1)P=A[C-b]||0,I[C+1]=A[C]-P+256&255;return I},o=function(A,b,P){var I,j=[],C=A.length;j[0]=2;for(var _=0;_<C;_+=1)I=P&&P[_]||0,j[_+1]=A[_]-I+256&255;return j},u=function(A,b,P){var I,j,C=[],_=A.length;C[0]=3;for(var k=0;k<_;k+=1)I=A[k-b]||0,j=P&&P[k]||0,C[k+1]=A[k]+256-(I+j>>>1)&255;return C},d=function(A,b,P){var I,j,C,_,k=[],R=A.length;k[0]=4;for(var M=0;M<R;M+=1)I=A[M-b]||0,j=P&&P[M]||0,C=P&&P[M-b]||0,_=f(I,j,C),k[M+1]=A[M]-_+256&255;return k},f=function(A,b,P){if(A===b&&b===P)return A;var I=Math.abs(b-P),j=Math.abs(A-P),C=Math.abs(A+b-P-P);return I<=j&&I<=C?A:j<=C?b:P},x=function(){return[i,s,o,u,d]},y=function(A){var b=A.map(function(P){return P.reduce(function(I,j){return I+Math.abs(j)},0)});return b.indexOf(Math.min.apply(null,b))};e.processPNG=function(A,b,P,I){var j,C,_,k,R,M,ne,U,K,te,be,$,q,X,Q,J=this.decode.FLATE_DECODE,pe="";if(this.__addimage__.isArrayBuffer(A)&&(A=new Uint8Array(A)),this.__addimage__.isArrayBufferView(A)){if(A=(_=new XR(A)).imgData,C=_.bits,j=_.colorSpace,R=_.colors,[4,6].indexOf(_.colorType)!==-1){if(_.bits===8){K=(U=_.pixelBitlength==32?new Uint32Array(_.decodePixels().buffer):_.pixelBitlength==16?new Uint16Array(_.decodePixels().buffer):new Uint8Array(_.decodePixels().buffer)).length,be=new Uint8Array(K*_.colors),te=new Uint8Array(K);var ge,ue=_.pixelBitlength-_.bits;for(X=0,Q=0;X<K;X++){for(q=U[X],ge=0;ge<ue;)be[Q++]=q>>>ge&255,ge+=_.bits;te[X]=q>>>ge&255}}if(_.bits===16){K=(U=new Uint32Array(_.decodePixels().buffer)).length,be=new Uint8Array(K*(32/_.pixelBitlength)*_.colors),te=new Uint8Array(K*(32/_.pixelBitlength)),$=_.colors>1,X=0,Q=0;for(var Se=0;X<K;)q=U[X++],be[Q++]=q>>>0&255,$&&(be[Q++]=q>>>16&255,q=U[X++],be[Q++]=q>>>0&255),te[Se++]=q>>>16&255;C=8}I!==e.image_compression.NONE&&t()?(A=n(be,_.width*_.colors,_.colors,I),ne=n(te,_.width,1,I)):(A=be,ne=te,J=void 0)}if(_.colorType===3&&(j=this.color_spaces.INDEXED,M=_.palette,_.transparency.indexed)){var _e=_.transparency.indexed,Me=0;for(X=0,K=_e.length;X<K;++X)Me+=_e[X];if((Me/=255)===K-1&&_e.indexOf(0)!==-1)k=[_e.indexOf(0)];else if(Me!==K){for(U=_.decodePixels(),te=new Uint8Array(U.length),X=0,K=U.length;X<K;X++)te[X]=_e[U[X]];ne=n(te,_.width,1)}}var V=function(se){var de;switch(se){case e.image_compression.FAST:de=11;break;case e.image_compression.MEDIUM:de=13;break;case e.image_compression.SLOW:de=14;break;default:de=12}return de}(I);return J===this.decode.FLATE_DECODE&&(pe="/Predictor "+V+" "),pe+="/Colors "+R+" /BitsPerComponent "+C+" /Columns "+_.width,(this.__addimage__.isArrayBuffer(A)||this.__addimage__.isArrayBufferView(A))&&(A=this.__addimage__.arrayBufferToBinaryString(A)),(ne&&this.__addimage__.isArrayBuffer(ne)||this.__addimage__.isArrayBufferView(ne))&&(ne=this.__addimage__.arrayBufferToBinaryString(ne)),{alias:P,data:A,index:b,filter:J,decodeParameters:pe,transparency:k,palette:M,sMask:ne,predictor:V,width:_.width,height:_.height,bitsPerComponent:C,colorSpace:j}}}})(Rt.API),function(e){e.processGIF89A=function(t,n,r,i){var s=new KR(t),o=s.width,u=s.height,d=[];s.decodeAndBlitFrameRGBA(0,d);var f={data:d,width:o,height:u},x=new xg(100).encode(f,100);return e.processJPEG.call(this,x,n,r,i)},e.processGIF87A=e.processGIF89A}(Rt.API),sa.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},sa.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){Dn.log("bit decode error:"+n)}},sa.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,u=0;u<8&&8*i+u<this.width;u++){var d=this.palette[s>>7-u&1];this.data[o+4*u]=d.blue,this.data[o+4*u+1]=d.green,this.data[o+4*u+2]=d.red,this.data[o+4*u+3]=255}n!==0&&(this.pos+=4-n)}},sa.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,u=s>>4,d=15&s,f=this.palette[u];if(this.data[o]=f.blue,this.data[o+1]=f.green,this.data[o+2]=f.red,this.data[o+3]=255,2*i+1>=this.width)break;f=this.palette[d],this.data[o+4]=f.blue,this.data[o+4+1]=f.green,this.data[o+4+2]=f.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},sa.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},sa.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,u=(s>>5&t)/t*255|0,d=(s>>10&t)/t*255|0,f=s>>15?255:0,x=r*this.width*4+4*i;this.data[x]=d,this.data[x+1]=u,this.data[x+2]=o,this.data[x+3]=f}this.pos+=e}},sa.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(o&t)/t*255|0,d=(o>>5&n)/n*255|0,f=(o>>11)/t*255|0,x=i*this.width*4+4*s;this.data[x]=f,this.data[x+1]=d,this.data[x+2]=u,this.data[x+3]=255}this.pos+=e}},sa.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},sa.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=t*this.width*4+4*n;this.data[u]=s,this.data[u+1]=i,this.data[u+2]=r,this.data[u+3]=o}},sa.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,i){var s=new sa(t,!1),o=s.width,u=s.height,d={data:s.getData(),width:o,height:u},f=new xg(100).encode(d,100);return e.processJPEG.call(this,f,n,r,i)}}(Rt.API),bb.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,i){var s=new bb(t),o=s.width,u=s.height,d={data:s.getData(),width:o,height:u},f=new xg(100).encode(d,100);return e.processJPEG.call(this,f,n,r,i)}}(Rt.API),Rt.API.processRGBA=function(e,t,n){for(var r=e.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),u=0,d=0,f=0;f<i;f+=4){var x=r[f],y=r[f+1],A=r[f+2],b=r[f+3];s[u++]=x,s[u++]=y,s[u++]=A,o[d++]=b}var P=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:P,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Rt.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Xc=Rt.API,Vf=Xc.getCharWidthsArray=function(e,t){var n,r,i=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),u=t.widths?t.widths:i.metadata.Unicode.widths,d=u.fof?u.fof:1,f=t.kerning?t.kerning:i.metadata.Unicode.kerning,x=f.fof?f.fof:1,y=t.doKerning!==!1,A=0,b=e.length,P=0,I=u[0]||d,j=[];for(n=0;n<b;n++)r=e.charCodeAt(n),typeof i.metadata.widthOfString=="function"?j.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(A=y&&Tn(f[r])==="object"&&!isNaN(parseInt(f[r][P],10))?f[r][P]/x:0,j.push((u[r]||I)/d+A)),P=r;return j},xb=Xc.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return Xc.processArabic&&(e=Xc.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,i)/n:Vf.apply(this,arguments).reduce(function(s,o){return s+o},0)},yb=function(e,t,n,r){for(var i=[],s=0,o=e.length,u=0;s!==o&&u+t[s]<n;)u+=t[s],s++;i.push(e.slice(0,s));var d=s;for(u=0;s!==o;)u+t[s]>r&&(i.push(e.slice(d,s)),u=0,d=s),u+=t[s],s++;return d!==s&&i.push(e.slice(d,s)),i},vb=function(e,t,n){n||(n={});var r,i,s,o,u,d,f,x=[],y=[x],A=n.textIndent||0,b=0,P=0,I=e.split(" "),j=Vf.apply(this,[" ",n])[0];if(d=n.lineIndent===-1?I[0].length+2:n.lineIndent||0){var C=Array(d).join(" "),_=[];I.map(function(R){(R=R.split(/\s*\n/)).length>1?_=_.concat(R.map(function(M,ne){return(ne&&M.length?`
`:"")+M})):_.push(R[0])}),I=_,d=xb.apply(this,[C,n])}for(s=0,o=I.length;s<o;s++){var k=0;if(r=I[s],d&&r[0]==`
`&&(r=r.substr(1),k=1),A+b+(P=(i=Vf.apply(this,[r,n])).reduce(function(R,M){return R+M},0))>t||k){if(P>t){for(u=yb.apply(this,[r,i,t-(A+b),t]),x.push(u.shift()),x=[u.pop()];u.length;)y.push([u.shift()]);P=i.slice(r.length-(x[0]?x[0].length:0)).reduce(function(R,M){return R+M},0)}else x=[r];y.push(x),A=P+d,b=j}else x.push(r),A+=b+P,b=j}return f=d?function(R,M){return(M?C:"")+R.join(" ")}:function(R){return R.join(" ")},y.map(f)},Xc.splitTextToSize=function(e,t,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(x){if(x.widths&&x.kerning)return{widths:x.widths,kerning:x.kerning};var y=this.internal.getFont(x.fontName,x.fontStyle);return y.metadata.Unicode?{widths:y.metadata.Unicode.widths||{0:1},kerning:y.metadata.Unicode.kerning||{}}:{font:y.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var u,d,f=[];for(u=0,d=r.length;u<d;u++)f=f.concat(vb.apply(this,[r[u],o,s]));return f},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},i=0;i<t.length;i++)n[t[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=t[i];var s=function(y){return"0x"+parseInt(y,10).toString(16)},o=e.__fontmetrics__.compress=function(y){var A,b,P,I,j=["{"];for(var C in y){if(A=y[C],isNaN(parseInt(C,10))?b="'"+C+"'":(C=parseInt(C,10),b=(b=s(C).slice(2)).slice(0,-1)+r[b.slice(-1)]),typeof A=="number")A<0?(P=s(A).slice(3),I="-"):(P=s(A).slice(2),I=""),P=I+P.slice(0,-1)+r[P.slice(-1)];else{if(Tn(A)!=="object")throw new Error("Don't know what to do with value type "+Tn(A)+".");P=o(A)}j.push(b+P)}return j.push("}"),j.join("")},u=e.__fontmetrics__.uncompress=function(y){if(typeof y!="string")throw new Error("Invalid argument passed to uncompress.");for(var A,b,P,I,j={},C=1,_=j,k=[],R="",M="",ne=y.length-1,U=1;U<ne;U+=1)(I=y[U])=="'"?A?(P=A.join(""),A=void 0):A=[]:A?A.push(I):I=="{"?(k.push([_,P]),_={},P=void 0):I=="}"?((b=k.pop())[0][b[1]]=_,P=void 0,_=b[0]):I=="-"?C=-1:P===void 0?n.hasOwnProperty(I)?(R+=n[I],P=parseInt(R,16)*C,C=1,R=""):R+=I:n.hasOwnProperty(I)?(M+=n[I],_[P]=parseInt(M,16)*C,C=1,P=void 0,M=""):M+=I;return j},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},x={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(y){var A=y.font,b=x.Unicode[A.postScriptName];b&&(A.metadata.Unicode={},A.metadata.Unicode.widths=b.widths,A.metadata.Unicode.kerning=b.kerning);var P=f.Unicode[A.postScriptName];P&&(A.metadata.Unicode.encoding=P,A.encoding=P.codePages[0])}])}(Rt.API),function(e){var t=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};e.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,u){u=/^\x00\x01\x00\x00/.test(u)?t(u):t(Kd(u)),o.metadata=e.API.TTFFont.open(u),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(Rt),function(e){function t(){return(Ft.canvg?Promise.resolve(Ft.canvg):wl(()=>import("./index.es-wODbaOJs.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Rt.API.addSvgAsImage=function(n,r,i,s,o,u,d,f){if(isNaN(r)||isNaN(i))throw Dn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Dn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var x=document.createElement("canvas");x.width=s,x.height=o;var y=x.getContext("2d");y.fillStyle="#fff",y.fillRect(0,0,x.width,x.height);var A={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},b=this;return t().then(function(P){return P.fromString(y,n,A)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(P){return P.render(A)}).then(function(){b.addImage(x.toDataURL("image/jpeg",1),r,i,s,o,d,f)})}}(),Rt.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(t,n);return this},Rt.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(o),d=[],f=0,x=0,y=0;function A(P,I){var j,C=!1;for(j=0;j<P.length;j+=1)P[j]===I&&(C=!0);return C}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var b=u.length;for(y=0;y<b;y+=1)n[u[y]].value=n[u[y]].defaultValue,n[u[y]].explicitSet=!1}if(Tn(e)==="object"){for(i in e)if(s=e[i],A(u,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&A(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(f=0;f<s.length;f+=1)if(r=!0,s[f].length===1&&typeof s[f][0]=="number")d.push(String(s[f]-1));else if(s[f].length>1){for(x=0;x<s[f].length;x+=1)typeof s[f][x]!="number"&&(r=!1);r===!0&&d.push([s[f][0]-1,s[f][1]-1].join(" "))}n[i].value="["+d.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var P,I=[];for(P in n)n[P].explicitSet===!0&&(n[P].type==="name"?I.push("/"+P+" /"+n[P].value):I.push("/"+P+" "+n[P].value));I.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+I.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),d=unescape(encodeURIComponent("</x:xmpmeta>")),f=s.length+o.length+u.length+i.length+d.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+u+d),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(Rt.API),function(e){var t=e.API,n=t.pdfEscape16=function(s,o){for(var u,d=o.metadata.Unicode.widths,f=["","0","00","000","0000"],x=[""],y=0,A=s.length;y<A;++y){if(u=o.metadata.characterToGlyph(s.charCodeAt(y)),o.metadata.glyIdsUsed.push(u),o.metadata.toUnicode[u]=s.charCodeAt(y),d.indexOf(u)==-1&&(d.push(u),d.push([parseInt(o.metadata.widthOfGlyph(u),10)])),u=="0")return x.join("");u=u.toString(16),x.push(f[4-u.length],u)}return x.join("")},r=function(s){var o,u,d,f,x,y,A;for(x=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,d=[],y=0,A=(u=Object.keys(s).sort(function(b,P){return b-P})).length;y<A;y++)o=u[y],d.length>=100&&(x+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar`,d=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(f=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),d.push("<"+o+"><"+f+">"));return d.length&&(x+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar
`),x+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(o){var u=o.font,d=o.out,f=o.newObject,x=o.putStream;if(u.metadata instanceof e.API.TTFFont&&u.encoding==="Identity-H"){for(var y=u.metadata.Unicode.widths,A=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),b="",P=0;P<A.length;P++)b+=String.fromCharCode(A[P]);var I=f();x({data:b,addLength1:!0,objectId:I}),d("endobj");var j=f();x({data:r(u.metadata.toUnicode),addLength1:!0,objectId:j}),d("endobj");var C=f();d("<<"),d("/Type /FontDescriptor"),d("/FontName /"+eu(u.fontName)),d("/FontFile2 "+I+" 0 R"),d("/FontBBox "+e.API.PDFObject.convert(u.metadata.bbox)),d("/Flags "+u.metadata.flags),d("/StemV "+u.metadata.stemV),d("/ItalicAngle "+u.metadata.italicAngle),d("/Ascent "+u.metadata.ascender),d("/Descent "+u.metadata.decender),d("/CapHeight "+u.metadata.capHeight),d(">>"),d("endobj");var _=f();d("<<"),d("/Type /Font"),d("/BaseFont /"+eu(u.fontName)),d("/FontDescriptor "+C+" 0 R"),d("/W "+e.API.PDFObject.convert(y)),d("/CIDToGIDMap /Identity"),d("/DW 1000"),d("/Subtype /CIDFontType2"),d("/CIDSystemInfo"),d("<<"),d("/Supplement 0"),d("/Registry (Adobe)"),d("/Ordering ("+u.encoding+")"),d(">>"),d(">>"),d("endobj"),u.objectNumber=f(),d("<<"),d("/Type /Font"),d("/Subtype /Type0"),d("/ToUnicode "+j+" 0 R"),d("/BaseFont /"+eu(u.fontName)),d("/Encoding /"+u.encoding),d("/DescendantFonts ["+_+" 0 R]"),d(">>"),d("endobj"),u.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(o){var u=o.font,d=o.out,f=o.newObject,x=o.putStream;if(u.metadata instanceof e.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var y=u.metadata.rawData,A="",b=0;b<y.length;b++)A+=String.fromCharCode(y[b]);var P=f();x({data:A,addLength1:!0,objectId:P}),d("endobj");var I=f();x({data:r(u.metadata.toUnicode),addLength1:!0,objectId:I}),d("endobj");var j=f();d("<<"),d("/Descent "+u.metadata.decender),d("/CapHeight "+u.metadata.capHeight),d("/StemV "+u.metadata.stemV),d("/Type /FontDescriptor"),d("/FontFile2 "+P+" 0 R"),d("/Flags 96"),d("/FontBBox "+e.API.PDFObject.convert(u.metadata.bbox)),d("/FontName /"+eu(u.fontName)),d("/ItalicAngle "+u.metadata.italicAngle),d("/Ascent "+u.metadata.ascender),d(">>"),d("endobj"),u.objectNumber=f();for(var C=0;C<u.metadata.hmtx.widths.length;C++)u.metadata.hmtx.widths[C]=parseInt(u.metadata.hmtx.widths[C]*(1e3/u.metadata.head.unitsPerEm));d("<</Subtype/TrueType/Type/Font/ToUnicode "+I+" 0 R/BaseFont/"+eu(u.fontName)+"/FontDescriptor "+j+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),d("endobj"),u.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,u=s.text||"",d=s.x,f=s.y,x=s.options||{},y=s.mutex||{},A=y.pdfEscape,b=y.activeFontKey,P=y.fonts,I=b,j="",C=0,_="",k=P[I].encoding;if(P[I].encoding!=="Identity-H")return{text:u,x:d,y:f,options:x,mutex:y};for(_=u,I=b,Array.isArray(u)&&(_=u[0]),C=0;C<_.length;C+=1)P[I].metadata.hasOwnProperty("cmap")&&(o=P[I].metadata.cmap.unicode.codeMap[_[C].charCodeAt(0)]),o||_[C].charCodeAt(0)<256&&P[I].metadata.hasOwnProperty("Unicode")?j+=_[C]:j+="";var R="";return parseInt(I.slice(1))<14||k==="WinAnsiEncoding"?R=A(j,I).split("").map(function(M){return M.charCodeAt(0).toString(16)}).join(""):k==="Identity-H"&&(R=n(j,P[I])),y.isHex=!0,{text:R,x:d,y:f,options:x,mutex:y}};t.events.push(["postProcessText",function(s){var o=s.text||"",u=[],d={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var f=0;for(f=0;f<o.length;f+=1)Array.isArray(o[f])&&o[f].length===3?u.push([i(Object.assign({},d,{text:o[f][0]})).text,o[f][1],o[f][2]]):u.push(i(Object.assign({},d,{text:o[f]})).text);s.text=u}else s.text=i(Object.assign({},d,{text:o})).text}])}(Rt),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Rt.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var i,s,o,u,d,f,x,y=t,A=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],b=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],P={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},I={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},j=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],C=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),_=!1,k=0;this.__bidiEngine__={};var R=function($){var q=$.charCodeAt(),X=q>>8,Q=I[X];return Q!==void 0?y[256*Q+(255&q)]:X===252||X===253?"AL":C.test(X)?"L":X===8?"R":"N"},M=function($){for(var q,X=0;X<$.length;X++){if((q=R($.charAt(X)))==="L")return!1;if(q==="R")return!0}return!1},ne=function($,q,X,Q){var J,pe,ge,ue,Se=q[Q];switch(Se){case"L":case"R":_=!1;break;case"N":case"AN":break;case"EN":_&&(Se="AN");break;case"AL":_=!0,Se="R";break;case"WS":Se="N";break;case"CS":Q<1||Q+1>=q.length||(J=X[Q-1])!=="EN"&&J!=="AN"||(pe=q[Q+1])!=="EN"&&pe!=="AN"?Se="N":_&&(pe="AN"),Se=pe===J?pe:"N";break;case"ES":Se=(J=Q>0?X[Q-1]:"B")==="EN"&&Q+1<q.length&&q[Q+1]==="EN"?"EN":"N";break;case"ET":if(Q>0&&X[Q-1]==="EN"){Se="EN";break}if(_){Se="N";break}for(ge=Q+1,ue=q.length;ge<ue&&q[ge]==="ET";)ge++;Se=ge<ue&&q[ge]==="EN"?"EN":"N";break;case"NSM":if(o&&!u){for(ue=q.length,ge=Q+1;ge<ue&&q[ge]==="NSM";)ge++;if(ge<ue){var _e=$[Q],Me=_e>=1425&&_e<=2303||_e===64286;if(J=q[ge],Me&&(J==="R"||J==="AL")){Se="R";break}}}Se=Q<1||(J=q[Q-1])==="B"?"N":X[Q-1];break;case"B":_=!1,i=!0,Se=k;break;case"S":s=!0,Se="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":_=!1;break;case"BN":Se="N"}return Se},U=function($,q,X){var Q=$.split("");return X&&K(Q,X,{hiLevel:k}),Q.reverse(),q&&q.reverse(),Q.join("")},K=function($,q,X){var Q,J,pe,ge,ue,Se=-1,_e=$.length,Me=0,V=[],se=k?b:A,de=[];for(_=!1,i=!1,s=!1,J=0;J<_e;J++)de[J]=R($[J]);for(pe=0;pe<_e;pe++){if(ue=Me,V[pe]=ne($,de,V,pe),Q=240&(Me=se[ue][P[V[pe]]]),Me&=15,q[pe]=ge=se[Me][5],Q>0)if(Q===16){for(J=Se;J<pe;J++)q[J]=1;Se=-1}else Se=-1;if(se[Me][6])Se===-1&&(Se=pe);else if(Se>-1){for(J=Se;J<pe;J++)q[J]=ge;Se=-1}de[pe]==="B"&&(q[pe]=0),X.hiLevel|=ge}s&&function(xe,he,Pe){for(var Le=0;Le<Pe;Le++)if(xe[Le]==="S"){he[Le]=k;for(var Oe=Le-1;Oe>=0&&xe[Oe]==="WS";Oe--)he[Oe]=k}}(de,q,_e)},te=function($,q,X,Q,J){if(!(J.hiLevel<$)){if($===1&&k===1&&!i)return q.reverse(),void(X&&X.reverse());for(var pe,ge,ue,Se,_e=q.length,Me=0;Me<_e;){if(Q[Me]>=$){for(ue=Me+1;ue<_e&&Q[ue]>=$;)ue++;for(Se=Me,ge=ue-1;Se<ge;Se++,ge--)pe=q[Se],q[Se]=q[ge],q[ge]=pe,X&&(pe=X[Se],X[Se]=X[ge],X[ge]=pe);Me=ue}Me++}}},be=function($,q,X){var Q=$.split(""),J={hiLevel:k};return X||(X=[]),K(Q,X,J),function(pe,ge,ue){if(ue.hiLevel!==0&&x)for(var Se,_e=0;_e<pe.length;_e++)ge[_e]===1&&(Se=j.indexOf(pe[_e]))>=0&&(pe[_e]=j[Se+1])}(Q,X,J),te(2,Q,q,X,J),te(1,Q,q,X,J),Q.join("")};return this.__bidiEngine__.doBidiReorder=function($,q,X){if(function(J,pe){if(pe)for(var ge=0;ge<J.length;ge++)pe[ge]=ge;u===void 0&&(u=M(J)),f===void 0&&(f=M(J))}($,q),o||!d||f)if(o&&d&&u^f)k=u?1:0,$=U($,q,X);else if(!o&&d&&f)k=u?1:0,$=be($,q,X),$=U($,q);else if(!o||u||d||f){if(o&&!d&&u^f)$=U($,q),u?(k=0,$=be($,q,X)):(k=1,$=be($,q,X),$=U($,q));else if(o&&u&&!d&&f)k=1,$=be($,q,X),$=U($,q);else if(!o&&!d&&u^f){var Q=x;u?(k=1,$=be($,q,X),k=0,x=!1,$=be($,q,X),x=Q):(k=0,$=be($,q,X),$=U($,q),k=1,x=!1,$=be($,q,X),x=Q,$=U($,q))}}else k=0,$=be($,q,X);else k=u?1:0,$=be($,q,X);return $},this.__bidiEngine__.setOptions=function($){$&&(o=$.isInputVisual,d=$.isOutputVisual,u=$.isInputRtl,f=$.isOutputRtl,x=$.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var u=0;for(o=[],u=0;u<i.length;u+=1)Object.prototype.toString.call(i[u])==="[object Array]"?o.push([n.doBidiReorder(i[u][0]),i[u][1],i[u][2]]):o.push([n.doBidiReorder(i[u])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(Rt),Rt.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new Sl(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new dM(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new ZR(this.contents),this.head=new JR(this),this.name=new iM(this),this.cmap=new nN(this),this.toUnicode={},this.hhea=new eM(this),this.maxp=new sM(this),this.hmtx=new aM(this),this.post=new nM(this),this.os2=new tM(this),this.loca=new uM(this),this.glyf=new oM(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,u,d,f;for(f=[],o=0,u=(d=this.bbox).length;o<u;o++)t=d[o],f.push(Math.round(t*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var i,s,o,u;for(o=0,s=0,u=(t=""+t).length;0<=u?s<u:s>u;s=0<=u?++s:--s)i=t.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var va,Sl=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,i;for(i=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(t.charCodeAt(n)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,i,s,o,u,d;return t=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),u=this.readByte(),d=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^u)+(255^d)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*u+d},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,i,s;for(s=[],r=0,i=t.length;r<i;r++)n=t[r],s.push(this.writeByte(n));return s},e}(),ZR=function(){var e;function t(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,i,s,o,u,d,f,x,y,A,b,P,I;for(I in b=Object.keys(n).length,d=Math.log(2),y=16*Math.floor(Math.log(b)/d),o=Math.floor(y/d),x=16*b-y,(i=new Sl).writeInt(this.scalarType),i.writeShort(b),i.writeShort(y),i.writeShort(o),i.writeShort(x),s=16*b,f=i.pos+s,u=null,P=[],n)for(A=n[I],i.writeString(I),i.writeInt(e(A)),i.writeInt(f),i.writeInt(A.length),P=P.concat(A),I==="head"&&(u=f),f+=A.length;f%4;)P.push(0),f++;return i.write(P),r=2981146554-e(i.data),i.pos=u+8,i.writeUInt32(r),i.data},e=function(n){var r,i,s,o;for(n=rN.call(n);n.length%4;)n.push(0);for(s=new Sl(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},t}(),QR={}.hasOwnProperty,za=function(e,t){for(var n in t)QR.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};va=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var JR=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return za(t,va),t.prototype.tag="head",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},t.prototype.encode=function(n){var r;return(r=new Sl).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},t}(),Ab=function(){function e(t,n){var r,i,s,o,u,d,f,x,y,A,b,P,I,j,C,_,k;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),y=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(d=0;d<256;++d)this.codeMap[d]=t.readByte();break;case 4:for(b=t.readUInt16(),A=b/2,t.pos+=6,s=function(){var R,M;for(M=[],d=R=0;0<=A?R<A:R>A;d=0<=A?++R:--R)M.push(t.readUInt16());return M}(),t.pos+=2,I=function(){var R,M;for(M=[],d=R=0;0<=A?R<A:R>A;d=0<=A?++R:--R)M.push(t.readUInt16());return M}(),f=function(){var R,M;for(M=[],d=R=0;0<=A?R<A:R>A;d=0<=A?++R:--R)M.push(t.readUInt16());return M}(),x=function(){var R,M;for(M=[],d=R=0;0<=A?R<A:R>A;d=0<=A?++R:--R)M.push(t.readUInt16());return M}(),i=(this.length-t.pos+this.offset)/2,u=function(){var R,M;for(M=[],d=R=0;0<=i?R<i:R>i;d=0<=i?++R:--R)M.push(t.readUInt16());return M}(),d=C=0,k=s.length;C<k;d=++C)for(j=s[d],r=_=P=I[d];P<=j?_<=j:_>=j;r=P<=j?++_:--_)x[d]===0?o=r+f[d]:(o=u[x[d]/2+(r-P)-(A-d)]||0)!==0&&(o+=f[d]),this.codeMap[r]=65535&o}t.pos=y}return e.encode=function(t,n){var r,i,s,o,u,d,f,x,y,A,b,P,I,j,C,_,k,R,M,ne,U,K,te,be,$,q,X,Q,J,pe,ge,ue,Se,_e,Me,V,se,de,xe,he,Pe,Le,Oe,He,qe,rt;switch(Q=new Sl,o=Object.keys(t).sort(function(Ge,vt){return Ge-vt}),n){case"macroman":for(I=0,j=function(){var Ge=[];for(P=0;P<256;++P)Ge.push(0);return Ge}(),_={0:0},s={},J=0,Se=o.length;J<Se;J++)_[Oe=t[i=o[J]]]==null&&(_[Oe]=++I),s[i]={old:t[i],new:_[t[i]]},j[i]=_[t[i]];return Q.writeUInt16(1),Q.writeUInt16(0),Q.writeUInt32(12),Q.writeUInt16(0),Q.writeUInt16(262),Q.writeUInt16(0),Q.write(j),{charMap:s,subtable:Q.data,maxGlyphID:I+1};case"unicode":for(q=[],y=[],k=0,_={},r={},C=f=null,pe=0,_e=o.length;pe<_e;pe++)_[M=t[i=o[pe]]]==null&&(_[M]=++k),r[i]={old:M,new:_[M]},u=_[M]-i,C!=null&&u===f||(C&&y.push(C),q.push(i),f=u),C=i;for(C&&y.push(C),y.push(65535),q.push(65535),be=2*(te=q.length),K=2*Math.pow(Math.log(te)/Math.LN2,2),A=Math.log(K/2)/Math.LN2,U=2*te-K,d=[],ne=[],b=[],P=ge=0,Me=q.length;ge<Me;P=++ge){if($=q[P],x=y[P],$===65535){d.push(0),ne.push(0);break}if($-(X=r[$].new)>=32768)for(d.push(0),ne.push(2*(b.length+te-P)),i=ue=$;$<=x?ue<=x:ue>=x;i=$<=x?++ue:--ue)b.push(r[i].new);else d.push(X-$),ne.push(0)}for(Q.writeUInt16(3),Q.writeUInt16(1),Q.writeUInt32(12),Q.writeUInt16(4),Q.writeUInt16(16+8*te+2*b.length),Q.writeUInt16(0),Q.writeUInt16(be),Q.writeUInt16(K),Q.writeUInt16(A),Q.writeUInt16(U),Pe=0,V=y.length;Pe<V;Pe++)i=y[Pe],Q.writeUInt16(i);for(Q.writeUInt16(0),Le=0,se=q.length;Le<se;Le++)i=q[Le],Q.writeUInt16(i);for(He=0,de=d.length;He<de;He++)u=d[He],Q.writeUInt16(u);for(qe=0,xe=ne.length;qe<xe;qe++)R=ne[qe],Q.writeUInt16(R);for(rt=0,he=b.length;rt<he;rt++)I=b[rt],Q.writeUInt16(I);return{charMap:r,subtable:Q.data,maxGlyphID:k+1}}},e}(),nN=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return za(t,va),t.prototype.tag="cmap",t.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new Ab(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=Ab.encode(n,r),(s=new Sl).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},t}(),eM=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return za(t,va),t.prototype.tag="hhea",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},t}(),tM=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return za(t,va),t.prototype.tag="OS/2",t.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},t}(),nM=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return za(t,va),t.prototype.tag="post",t.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var u,d,f;for(f=[],o=u=0,d=this.file.maxp.numGlyphs;0<=d?u<d:u>d;o=0<=d?++u:--u)f.push(n.readUInt32());return f}).call(this)}},t}(),rM=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},iM=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return za(t,va),t.prototype.tag="name",t.prototype.parse=function(n){var r,i,s,o,u,d,f,x,y,A,b;for(n.pos=this.offset,n.readShort(),r=n.readShort(),d=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+d+n.readShort()});for(f={},o=y=0,A=i.length;y<A;o=++y)s=i[o],n.pos=s.offset,x=n.readString(s.length),u=new rM(x,s),f[b=s.nameID]==null&&(f[b]=[]),f[s.nameID].push(u);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},t}(),sM=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return za(t,va),t.prototype.tag="maxp",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},t}(),aM=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return za(t,va),t.prototype.tag="hmtx",t.prototype.parse=function(n){var r,i,s,o,u,d,f;for(n.pos=this.offset,this.metrics=[],r=0,d=this.file.hhea.numberOfMetrics;0<=d?r<d:r>d;r=0<=d?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var x,y;for(y=[],r=x=0;0<=s?x<s:x>s;r=0<=s?++x:--x)y.push(n.readInt16());return y}(),this.widths=(function(){var x,y,A,b;for(b=[],x=0,y=(A=this.metrics).length;x<y;x++)o=A[x],b.push(o.advance);return b}).call(this),i=this.widths[this.widths.length-1],f=[],r=u=0;0<=s?u<s:u>s;r=0<=s?++u:--u)f.push(this.widths.push(i));return f},t.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},t}(),rN=[].slice,oM=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return za(t,va),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(n){var r,i,s,o,u,d,f,x,y,A;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,u=(d=new Sl(r.read(s))).readShort(),x=d.readShort(),A=d.readShort(),f=d.readShort(),y=d.readShort(),this.cache[n]=u===-1?new cM(d,x,A,f,y):new lM(d,u,x,A,f,y),this.cache[n]))},t.prototype.encode=function(n,r,i){var s,o,u,d,f;for(u=[],o=[],d=0,f=r.length;d<f;d++)s=n[r[d]],o.push(u.length),s&&(u=u.concat(s.encode(i)));return o.push(u.length),{table:u,offsets:o}},t}(),lM=function(){function e(t,n,r,i,s,o){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),cM=function(){function e(t,n,r,i,s){var o,u;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;u=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&u;)o.pos+=1&u?4:2,128&u?o.pos+=8:64&u?o.pos+=4:8&u&&(o.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new Sl(rN.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),uM=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return za(t,va),t.prototype.tag="loca",t.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}).call(this)},t.prototype.indexOf=function(n){return this.offsets[n]},t.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},t.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,u=0;u<i.length;++u)if(i[u]=s,o<r.length&&r[o]==u){++o,i[u]=s;var d=this.offsets[u],f=this.offsets[u+1]-d;f>0&&(s+=f)}for(var x=new Array(4*i.length),y=0;y<i.length;++y)x[4*y+3]=255&i[y],x[4*y+2]=(65280&i[y])>>8,x[4*y+1]=(16711680&i[y])>>16,x[4*y]=(4278190080&i[y])>>24;return x},t}(),dM=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,t={},s=this.subset)r=s[n],t[n]=i[r];return t},e.prototype.glyphsFor=function(t){var n,r,i,s,o,u,d;for(i={},o=0,u=t.length;o<u;o++)i[s=t[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in d=this.glyphsFor(n))r=d[s],i[s]=r;return i},e.prototype.encode=function(t,n){var r,i,s,o,u,d,f,x,y,A,b,P,I,j,C;for(i in r=nN.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),b={0:0},C=r.charMap)b[(d=C[i]).old]=d.new;for(P in A=r.maxGlyphID,o)P in b||(b[P]=A++);return x=function(_){var k,R;for(k in R={},_)R[_[k]]=k;return R}(b),y=Object.keys(x).sort(function(_,k){return _-k}),I=function(){var _,k,R;for(R=[],_=0,k=y.length;_<k;_++)u=y[_],R.push(x[u]);return R}(),s=this.font.glyf.encode(o,I,b),f=this.font.loca.encode(s.offsets,I),j={cmap:this.font.cmap.raw(),glyf:s.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(j["OS/2"]=this.font.os2.raw()),this.font.directory.encode(j)},e}();Rt.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var u,d,f;for(f=[],u=0,d=n.length;u<d;u++)r=n[u],f.push(t.convert(r));return f}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+t.convert(o));return s.push(">>"),s.join(`
`)}return""+n},t}();var Vh={},hM=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},iN={},Ls={};let Qx;const fM=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Ls.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};Ls.getSymbolTotalCodewords=function(t){return fM[t]};Ls.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};Ls.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');Qx=t};Ls.isKanjiModeEnabled=function(){return typeof Qx<"u"};Ls.toSJIS=function(t){return Qx(t)};var $1={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+n)}}e.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},e.from=function(r,i){if(e.isValid(r))return r;try{return t(r)}catch{return i}}})($1);function sN(){this.buffer=[],this.length=0}sN.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var pM=sN;function zh(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}zh.prototype.set=function(e,t,n,r){const i=e*this.size+t;this.data[i]=n,r&&(this.reservedBit[i]=!0)};zh.prototype.get=function(e,t){return this.data[e*this.size+t]};zh.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n};zh.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var gM=zh,aN={};(function(e){const t=Ls.getSymbolSize;e.getRowColCoords=function(r){if(r===1)return[];const i=Math.floor(r/7)+2,s=t(r),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,u=[s-7];for(let d=1;d<i-1;d++)u[d]=u[d-1]-o;return u.push(6),u.reverse()},e.getPositions=function(r){const i=[],s=e.getRowColCoords(r),o=s.length;for(let u=0;u<o;u++)for(let d=0;d<o;d++)u===0&&d===0||u===0&&d===o-1||u===o-1&&d===0||i.push([s[u],s[d]]);return i}})(aN);var oN={};const mM=Ls.getSymbolSize,Sb=7;oN.getPositions=function(t){const n=mM(t);return[[0,0],[n-Sb,0],[0,n-Sb]]};var lN={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},e.from=function(i){return e.isValid(i)?parseInt(i,10):void 0},e.getPenaltyN1=function(i){const s=i.size;let o=0,u=0,d=0,f=null,x=null;for(let y=0;y<s;y++){u=d=0,f=x=null;for(let A=0;A<s;A++){let b=i.get(y,A);b===f?u++:(u>=5&&(o+=t.N1+(u-5)),f=b,u=1),b=i.get(A,y),b===x?d++:(d>=5&&(o+=t.N1+(d-5)),x=b,d=1)}u>=5&&(o+=t.N1+(u-5)),d>=5&&(o+=t.N1+(d-5))}return o},e.getPenaltyN2=function(i){const s=i.size;let o=0;for(let u=0;u<s-1;u++)for(let d=0;d<s-1;d++){const f=i.get(u,d)+i.get(u,d+1)+i.get(u+1,d)+i.get(u+1,d+1);(f===4||f===0)&&o++}return o*t.N2},e.getPenaltyN3=function(i){const s=i.size;let o=0,u=0,d=0;for(let f=0;f<s;f++){u=d=0;for(let x=0;x<s;x++)u=u<<1&2047|i.get(f,x),x>=10&&(u===1488||u===93)&&o++,d=d<<1&2047|i.get(x,f),x>=10&&(d===1488||d===93)&&o++}return o*t.N3},e.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let d=0;d<o;d++)s+=i.data[d];return Math.abs(Math.ceil(s*100/o/5)-10)*t.N4};function n(r,i,s){switch(r){case e.Patterns.PATTERN000:return(i+s)%2===0;case e.Patterns.PATTERN001:return i%2===0;case e.Patterns.PATTERN010:return s%3===0;case e.Patterns.PATTERN011:return(i+s)%3===0;case e.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case e.Patterns.PATTERN101:return i*s%2+i*s%3===0;case e.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case e.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}e.applyMask=function(i,s){const o=s.size;for(let u=0;u<o;u++)for(let d=0;d<o;d++)s.isReserved(d,u)||s.xor(d,u,n(i,d,u))},e.getBestMask=function(i,s){const o=Object.keys(e.Patterns).length;let u=0,d=1/0;for(let f=0;f<o;f++){s(f),e.applyMask(f,i);const x=e.getPenaltyN1(i)+e.getPenaltyN2(i)+e.getPenaltyN3(i)+e.getPenaltyN4(i);e.applyMask(f,i),x<d&&(d=x,u=f)}return u}})(lN);var Y1={};const al=$1,zf=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Hf=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Y1.getBlocksCount=function(t,n){switch(n){case al.L:return zf[(t-1)*4+0];case al.M:return zf[(t-1)*4+1];case al.Q:return zf[(t-1)*4+2];case al.H:return zf[(t-1)*4+3];default:return}};Y1.getTotalCodewordsCount=function(t,n){switch(n){case al.L:return Hf[(t-1)*4+0];case al.M:return Hf[(t-1)*4+1];case al.Q:return Hf[(t-1)*4+2];case al.H:return Hf[(t-1)*4+3];default:return}};var cN={},X1={};const Zd=new Uint8Array(512),n1=new Uint8Array(256);(function(){let t=1;for(let n=0;n<255;n++)Zd[n]=t,n1[t]=n,t<<=1,t&256&&(t^=285);for(let n=255;n<512;n++)Zd[n]=Zd[n-255]})();X1.log=function(t){if(t<1)throw new Error("log("+t+")");return n1[t]};X1.exp=function(t){return Zd[t]};X1.mul=function(t,n){return t===0||n===0?0:Zd[n1[t]+n1[n]]};(function(e){const t=X1;e.mul=function(r,i){const s=new Uint8Array(r.length+i.length-1);for(let o=0;o<r.length;o++)for(let u=0;u<i.length;u++)s[o+u]^=t.mul(r[o],i[u]);return s},e.mod=function(r,i){let s=new Uint8Array(r);for(;s.length-i.length>=0;){const o=s[0];for(let d=0;d<i.length;d++)s[d]^=t.mul(i[d],o);let u=0;for(;u<s.length&&s[u]===0;)u++;s=s.slice(u)}return s},e.generateECPolynomial=function(r){let i=new Uint8Array([1]);for(let s=0;s<r;s++)i=e.mul(i,new Uint8Array([1,t.exp(s)]));return i}})(cN);const uN=cN;function Jx(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}Jx.prototype.initialize=function(t){this.degree=t,this.genPoly=uN.generateECPolynomial(this.degree)};Jx.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(t.length+this.degree);n.set(t);const r=uN.mod(n,this.genPoly),i=this.degree-r.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(r,i),s}return r};var xM=Jx,dN={},kl={},ey={};ey.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var Ha={};const hN="[0-9]+",yM="[A-Z $%*+\\-./:]+";let Sh="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Sh=Sh.replace(/u/g,"\\u");const vM="(?:(?![A-Z0-9 $%*+\\-./:]|"+Sh+`)(?:.|[\r
]))+`;Ha.KANJI=new RegExp(Sh,"g");Ha.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Ha.BYTE=new RegExp(vM,"g");Ha.NUMERIC=new RegExp(hN,"g");Ha.ALPHANUMERIC=new RegExp(yM,"g");const wM=new RegExp("^"+Sh+"$"),bM=new RegExp("^"+hN+"$"),AM=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Ha.testKanji=function(t){return wM.test(t)};Ha.testNumeric=function(t){return bM.test(t)};Ha.testAlphanumeric=function(t){return AM.test(t)};(function(e){const t=ey,n=Ha;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!t.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},e.getBestModeForData=function(s){return n.testNumeric(s)?e.NUMERIC:n.testAlphanumeric(s)?e.ALPHANUMERIC:n.testKanji(s)?e.KANJI:e.BYTE},e.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},e.isValid=function(s){return s&&s.bit&&s.ccBits};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+i)}}e.from=function(s,o){if(e.isValid(s))return s;try{return r(s)}catch{return o}}})(kl);(function(e){const t=Ls,n=Y1,r=$1,i=kl,s=ey,o=7973,u=t.getBCHDigit(o);function d(A,b,P){for(let I=1;I<=40;I++)if(b<=e.getCapacity(I,P,A))return I}function f(A,b){return i.getCharCountIndicator(A,b)+4}function x(A,b){let P=0;return A.forEach(function(I){const j=f(I.mode,b);P+=j+I.getBitsLength()}),P}function y(A,b){for(let P=1;P<=40;P++)if(x(A,P)<=e.getCapacity(P,b,i.MIXED))return P}e.from=function(b,P){return s.isValid(b)?parseInt(b,10):P},e.getCapacity=function(b,P,I){if(!s.isValid(b))throw new Error("Invalid QR Code version");typeof I>"u"&&(I=i.BYTE);const j=t.getSymbolTotalCodewords(b),C=n.getTotalCodewordsCount(b,P),_=(j-C)*8;if(I===i.MIXED)return _;const k=_-f(I,b);switch(I){case i.NUMERIC:return Math.floor(k/10*3);case i.ALPHANUMERIC:return Math.floor(k/11*2);case i.KANJI:return Math.floor(k/13);case i.BYTE:default:return Math.floor(k/8)}},e.getBestVersionForData=function(b,P){let I;const j=r.from(P,r.M);if(Array.isArray(b)){if(b.length>1)return y(b,j);if(b.length===0)return 1;I=b[0]}else I=b;return d(I.mode,I.getLength(),j)},e.getEncodedBits=function(b){if(!s.isValid(b)||b<7)throw new Error("Invalid QR Code version");let P=b<<12;for(;t.getBCHDigit(P)-u>=0;)P^=o<<t.getBCHDigit(P)-u;return b<<12|P}})(dN);var fN={};const f2=Ls,pN=1335,SM=21522,Nb=f2.getBCHDigit(pN);fN.getEncodedBits=function(t,n){const r=t.bit<<3|n;let i=r<<10;for(;f2.getBCHDigit(i)-Nb>=0;)i^=pN<<f2.getBCHDigit(i)-Nb;return(r<<10|i)^SM};var gN={};const NM=kl;function Vu(e){this.mode=NM.NUMERIC,this.data=e.toString()}Vu.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};Vu.prototype.getLength=function(){return this.data.length};Vu.prototype.getBitsLength=function(){return Vu.getBitsLength(this.data.length)};Vu.prototype.write=function(t){let n,r,i;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),i=parseInt(r,10),t.put(i,10);const s=this.data.length-n;s>0&&(r=this.data.substr(n),i=parseInt(r,10),t.put(i,s*3+1))};var CM=Vu;const EM=kl,yg=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function zu(e){this.mode=EM.ALPHANUMERIC,this.data=e}zu.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};zu.prototype.getLength=function(){return this.data.length};zu.prototype.getBitsLength=function(){return zu.getBitsLength(this.data.length)};zu.prototype.write=function(t){let n;for(n=0;n+2<=this.data.length;n+=2){let r=yg.indexOf(this.data[n])*45;r+=yg.indexOf(this.data[n+1]),t.put(r,11)}this.data.length%2&&t.put(yg.indexOf(this.data[n]),6)};var _M=zu;const TM=kl;function Hu(e){this.mode=TM.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}Hu.getBitsLength=function(t){return t*8};Hu.prototype.getLength=function(){return this.data.length};Hu.prototype.getBitsLength=function(){return Hu.getBitsLength(this.data.length)};Hu.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)};var IM=Hu;const kM=kl,LM=Ls;function qu(e){this.mode=kM.KANJI,this.data=e}qu.getBitsLength=function(t){return t*13};qu.prototype.getLength=function(){return this.data.length};qu.prototype.getBitsLength=function(){return qu.getBitsLength(this.data.length)};qu.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=LM.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),e.put(n,13)}};var PM=qu,mN={exports:{}};(function(e){var t={single_source_shortest_paths:function(n,r,i){var s={},o={};o[r]=0;var u=t.PriorityQueue.make();u.push(r,0);for(var d,f,x,y,A,b,P,I,j;!u.empty();){d=u.pop(),f=d.value,y=d.cost,A=n[f]||{};for(x in A)A.hasOwnProperty(x)&&(b=A[x],P=y+b,I=o[x],j=typeof o[x]>"u",(j||I>P)&&(o[x]=P,u.push(x,P),s[x]=f))}if(typeof i<"u"&&typeof o[i]>"u"){var C=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(C)}return s},extract_shortest_path_from_predecessor_list:function(n,r){for(var i=[],s=r;s;)i.push(s),n[s],s=n[s];return i.reverse(),i},find_path:function(n,r,i){var s=t.single_source_shortest_paths(n,r,i);return t.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(n){var r=t.PriorityQueue,i={},s;n=n||{};for(s in r)r.hasOwnProperty(s)&&(i[s]=r[s]);return i.queue=[],i.sorter=n.sorter||r.default_sorter,i},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var i={value:n,cost:r};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(mN);var jM=mN.exports;(function(e){const t=kl,n=CM,r=_M,i=IM,s=PM,o=Ha,u=Ls,d=jM;function f(C){return unescape(encodeURIComponent(C)).length}function x(C,_,k){const R=[];let M;for(;(M=C.exec(k))!==null;)R.push({data:M[0],index:M.index,mode:_,length:M[0].length});return R}function y(C){const _=x(o.NUMERIC,t.NUMERIC,C),k=x(o.ALPHANUMERIC,t.ALPHANUMERIC,C);let R,M;return u.isKanjiModeEnabled()?(R=x(o.BYTE,t.BYTE,C),M=x(o.KANJI,t.KANJI,C)):(R=x(o.BYTE_KANJI,t.BYTE,C),M=[]),_.concat(k,R,M).sort(function(U,K){return U.index-K.index}).map(function(U){return{data:U.data,mode:U.mode,length:U.length}})}function A(C,_){switch(_){case t.NUMERIC:return n.getBitsLength(C);case t.ALPHANUMERIC:return r.getBitsLength(C);case t.KANJI:return s.getBitsLength(C);case t.BYTE:return i.getBitsLength(C)}}function b(C){return C.reduce(function(_,k){const R=_.length-1>=0?_[_.length-1]:null;return R&&R.mode===k.mode?(_[_.length-1].data+=k.data,_):(_.push(k),_)},[])}function P(C){const _=[];for(let k=0;k<C.length;k++){const R=C[k];switch(R.mode){case t.NUMERIC:_.push([R,{data:R.data,mode:t.ALPHANUMERIC,length:R.length},{data:R.data,mode:t.BYTE,length:R.length}]);break;case t.ALPHANUMERIC:_.push([R,{data:R.data,mode:t.BYTE,length:R.length}]);break;case t.KANJI:_.push([R,{data:R.data,mode:t.BYTE,length:f(R.data)}]);break;case t.BYTE:_.push([{data:R.data,mode:t.BYTE,length:f(R.data)}])}}return _}function I(C,_){const k={},R={start:{}};let M=["start"];for(let ne=0;ne<C.length;ne++){const U=C[ne],K=[];for(let te=0;te<U.length;te++){const be=U[te],$=""+ne+te;K.push($),k[$]={node:be,lastCount:0},R[$]={};for(let q=0;q<M.length;q++){const X=M[q];k[X]&&k[X].node.mode===be.mode?(R[X][$]=A(k[X].lastCount+be.length,be.mode)-A(k[X].lastCount,be.mode),k[X].lastCount+=be.length):(k[X]&&(k[X].lastCount=be.length),R[X][$]=A(be.length,be.mode)+4+t.getCharCountIndicator(be.mode,_))}}M=K}for(let ne=0;ne<M.length;ne++)R[M[ne]].end=0;return{map:R,table:k}}function j(C,_){let k;const R=t.getBestModeForData(C);if(k=t.from(_,R),k!==t.BYTE&&k.bit<R.bit)throw new Error('"'+C+'" cannot be encoded with mode '+t.toString(k)+`.
 Suggested mode is: `+t.toString(R));switch(k===t.KANJI&&!u.isKanjiModeEnabled()&&(k=t.BYTE),k){case t.NUMERIC:return new n(C);case t.ALPHANUMERIC:return new r(C);case t.KANJI:return new s(C);case t.BYTE:return new i(C)}}e.fromArray=function(_){return _.reduce(function(k,R){return typeof R=="string"?k.push(j(R,null)):R.data&&k.push(j(R.data,R.mode)),k},[])},e.fromString=function(_,k){const R=y(_,u.isKanjiModeEnabled()),M=P(R),ne=I(M,k),U=d.find_path(ne.map,"start","end"),K=[];for(let te=1;te<U.length-1;te++)K.push(ne.table[U[te]].node);return e.fromArray(b(K))},e.rawSplit=function(_){return e.fromArray(y(_,u.isKanjiModeEnabled()))}})(gN);const K1=Ls,vg=$1,OM=pM,DM=gM,RM=aN,MM=oN,p2=lN,g2=Y1,BM=xM,r1=dN,FM=fN,UM=kl,wg=gN;function VM(e,t){const n=e.size,r=MM.getPositions(t);for(let i=0;i<r.length;i++){const s=r[i][0],o=r[i][1];for(let u=-1;u<=7;u++)if(!(s+u<=-1||n<=s+u))for(let d=-1;d<=7;d++)o+d<=-1||n<=o+d||(u>=0&&u<=6&&(d===0||d===6)||d>=0&&d<=6&&(u===0||u===6)||u>=2&&u<=4&&d>=2&&d<=4?e.set(s+u,o+d,!0,!0):e.set(s+u,o+d,!1,!0))}}function zM(e){const t=e.size;for(let n=8;n<t-8;n++){const r=n%2===0;e.set(n,6,r,!0),e.set(6,n,r,!0)}}function HM(e,t){const n=RM.getPositions(t);for(let r=0;r<n.length;r++){const i=n[r][0],s=n[r][1];for(let o=-2;o<=2;o++)for(let u=-2;u<=2;u++)o===-2||o===2||u===-2||u===2||o===0&&u===0?e.set(i+o,s+u,!0,!0):e.set(i+o,s+u,!1,!0)}}function qM(e,t){const n=e.size,r=r1.getEncodedBits(t);let i,s,o;for(let u=0;u<18;u++)i=Math.floor(u/3),s=u%3+n-8-3,o=(r>>u&1)===1,e.set(i,s,o,!0),e.set(s,i,o,!0)}function bg(e,t,n){const r=e.size,i=FM.getEncodedBits(t,n);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?e.set(s,8,o,!0):s<8?e.set(s+1,8,o,!0):e.set(r-15+s,8,o,!0),s<8?e.set(8,r-s-1,o,!0):s<9?e.set(8,15-s-1+1,o,!0):e.set(8,15-s-1,o,!0);e.set(r-8,8,1,!0)}function WM(e,t){const n=e.size;let r=-1,i=n-1,s=7,o=0;for(let u=n-1;u>0;u-=2)for(u===6&&u--;;){for(let d=0;d<2;d++)if(!e.isReserved(i,u-d)){let f=!1;o<t.length&&(f=(t[o]>>>s&1)===1),e.set(i,u-d,f),s--,s===-1&&(o++,s=7)}if(i+=r,i<0||n<=i){i-=r,r=-r;break}}}function GM(e,t,n){const r=new OM;n.forEach(function(d){r.put(d.mode.bit,4),r.put(d.getLength(),UM.getCharCountIndicator(d.mode,e)),d.write(r)});const i=K1.getSymbolTotalCodewords(e),s=g2.getTotalCodewordsCount(e,t),o=(i-s)*8;for(r.getLengthInBits()+4<=o&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const u=(o-r.getLengthInBits())/8;for(let d=0;d<u;d++)r.put(d%2?17:236,8);return $M(r,e,t)}function $M(e,t,n){const r=K1.getSymbolTotalCodewords(t),i=g2.getTotalCodewordsCount(t,n),s=r-i,o=g2.getBlocksCount(t,n),u=r%o,d=o-u,f=Math.floor(r/o),x=Math.floor(s/o),y=x+1,A=f-x,b=new BM(A);let P=0;const I=new Array(o),j=new Array(o);let C=0;const _=new Uint8Array(e.buffer);for(let U=0;U<o;U++){const K=U<d?x:y;I[U]=_.slice(P,P+K),j[U]=b.encode(I[U]),P+=K,C=Math.max(C,K)}const k=new Uint8Array(r);let R=0,M,ne;for(M=0;M<C;M++)for(ne=0;ne<o;ne++)M<I[ne].length&&(k[R++]=I[ne][M]);for(M=0;M<A;M++)for(ne=0;ne<o;ne++)k[R++]=j[ne][M];return k}function YM(e,t,n,r){let i;if(Array.isArray(e))i=wg.fromArray(e);else if(typeof e=="string"){let f=t;if(!f){const x=wg.rawSplit(e);f=r1.getBestVersionForData(x,n)}i=wg.fromString(e,f||40)}else throw new Error("Invalid data");const s=r1.getBestVersionForData(i,n);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=s;else if(t<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=GM(t,n,i),u=K1.getSymbolSize(t),d=new DM(u);return VM(d,t),zM(d),HM(d,t),bg(d,n,0),t>=7&&qM(d,t),WM(d,o),isNaN(r)&&(r=p2.getBestMask(d,bg.bind(null,d,n))),p2.applyMask(r,d),bg(d,n,r),{modules:d,version:t,errorCorrectionLevel:n,maskPattern:r,segments:i}}iN.create=function(t,n){if(typeof t>"u"||t==="")throw new Error("No input text");let r=vg.M,i,s;return typeof n<"u"&&(r=vg.from(n.errorCorrectionLevel,vg.M),i=r1.from(n.version),s=p2.from(n.maskPattern),n.toSJISFunc&&K1.setToSJISFunction(n.toSJISFunc)),YM(t,i,r,s)};var xN={},ty={};(function(e){function t(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(s){return[s,s]}))),r.length===6&&r.push("F","F");const i=parseInt(r.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+r.slice(0,6).join("")}}e.getOptions=function(r){r||(r={}),r.color||(r.color={});const i=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,s=r.width&&r.width>=21?r.width:void 0,o=r.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:t(r.color.dark||"#000000ff"),light:t(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},e.getScale=function(r,i){return i.width&&i.width>=r+i.margin*2?i.width/(r+i.margin*2):i.scale},e.getImageWidth=function(r,i){const s=e.getScale(r,i);return Math.floor((r+i.margin*2)*s)},e.qrToImageData=function(r,i,s){const o=i.modules.size,u=i.modules.data,d=e.getScale(o,s),f=Math.floor((o+s.margin*2)*d),x=s.margin*d,y=[s.color.light,s.color.dark];for(let A=0;A<f;A++)for(let b=0;b<f;b++){let P=(A*f+b)*4,I=s.color.light;if(A>=x&&b>=x&&A<f-x&&b<f-x){const j=Math.floor((A-x)/d),C=Math.floor((b-x)/d);I=y[u[j*o+C]?1:0]}r[P++]=I.r,r[P++]=I.g,r[P++]=I.b,r[P]=I.a}}})(ty);(function(e){const t=ty;function n(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(s,o,u){let d=u,f=o;typeof d>"u"&&(!o||!o.getContext)&&(d=o,o=void 0),o||(f=r()),d=t.getOptions(d);const x=t.getImageWidth(s.modules.size,d),y=f.getContext("2d"),A=y.createImageData(x,x);return t.qrToImageData(A.data,s,d),n(y,f,x),y.putImageData(A,0,0),f},e.renderToDataURL=function(s,o,u){let d=u;typeof d>"u"&&(!o||!o.getContext)&&(d=o,o=void 0),d||(d={});const f=e.render(s,o,d),x=d.type||"image/png",y=d.rendererOpts||{};return f.toDataURL(x,y.quality)}})(xN);var yN={};const XM=ty;function Cb(e,t){const n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function Ag(e,t,n){let r=e+t;return typeof n<"u"&&(r+=" "+n),r}function KM(e,t,n){let r="",i=0,s=!1,o=0;for(let u=0;u<e.length;u++){const d=Math.floor(u%t),f=Math.floor(u/t);!d&&!s&&(s=!0),e[u]?(o++,u>0&&d>0&&e[u-1]||(r+=s?Ag("M",d+n,.5+f+n):Ag("m",i,0),i=0,s=!1),d+1<t&&e[u+1]||(r+=Ag("h",o),o=0)):i++}return r}yN.render=function(t,n,r){const i=XM.getOptions(n),s=t.modules.size,o=t.modules.data,u=s+i.margin*2,d=i.color.light.a?"<path "+Cb(i.color.light,"fill")+' d="M0 0h'+u+"v"+u+'H0z"/>':"",f="<path "+Cb(i.color.dark,"stroke")+' d="'+KM(o,s,i.margin)+'"/>',x='viewBox="0 0 '+u+" "+u+'"',A='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+x+' shape-rendering="crispEdges">'+d+f+`</svg>
`;return typeof r=="function"&&r(null,A),A};const ZM=hM,m2=iN,vN=xN,QM=yN;function ny(e,t,n,r,i){const s=[].slice.call(arguments,1),o=s.length,u=typeof s[o-1]=="function";if(!u&&!ZM())throw new Error("Callback required as last argument");if(u){if(o<2)throw new Error("Too few arguments provided");o===2?(i=n,n=t,t=r=void 0):o===3&&(t.getContext&&typeof i>"u"?(i=r,r=void 0):(i=r,r=n,n=t,t=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(n=t,t=r=void 0):o===2&&!t.getContext&&(r=n,n=t,t=void 0),new Promise(function(d,f){try{const x=m2.create(n,r);d(e(x,t,r))}catch(x){f(x)}})}try{const d=m2.create(n,r);i(null,e(d,t,r))}catch(d){i(d)}}Vh.create=m2.create;Vh.toCanvas=ny.bind(null,vN.render);Vh.toDataURL=ny.bind(null,vN.renderToDataURL);Vh.toString=ny.bind(null,function(e,t,n){return QM.render(e,n)});const JM=({order:e,onClose:t})=>{var s,o;const n=((s=e.tickets)==null?void 0:s.reduce((u,d)=>u+(d.quantity||0),0))||0,{events:r}=So(),i=async()=>{var u,d;try{const f=new Rt({unit:"pt",format:"a4"}),x=f.internal.pageSize.getWidth(),y=f.internal.pageSize.getHeight(),A=40;let b=A;f.setFillColor(17,24,39),f.rect(0,0,x,90,"F"),f.setTextColor(255,255,255),f.setFont("helvetica","bold"),f.setFontSize(22),f.text("Carnival LDN - Tickets",x/2,40,{align:"center"});const P=((u=r==null?void 0:r.find(j=>j.id===e.eventId))==null?void 0:u.title)||"Your Event";f.setFont("helvetica","normal"),f.setFontSize(13),f.text(P,x/2,62,{align:"center"}),b=110,f.setTextColor(55,65,81),f.setFontSize(12),f.text(`Order: ${e.id}`,A,b),b+=16,f.text(`Name: ${e.customerName||""}`,A,b),b+=16,f.text(`Email: ${e.customerEmail||""}`,A,b),b+=16,f.text(`Status: ${e.status}`,A,b),b+=16,f.text(`Total: ${((e.totalAmount||0)/100).toFixed(2)}`,A,b),b+=20;const I=e.tickets||[];for(let j=0;j<I.length;j++){const C=I[j];b+180>y-A&&(f.addPage(),b=A);const _=(()=>{var $;const te=r==null?void 0:r.find(q=>q.id===e.eventId),be=($=te==null?void 0:te.ticketTiers)==null?void 0:$.find(q=>q.id===C.ticketTierId);return(be==null?void 0:be.name)||C.ticketTierId})(),k=A,R=x-A*2,M=150;f.setDrawColor(229,231,235),f.setFillColor(249,250,251),f.rect(k,b,R,M,"FD");let ne=b+24;f.setTextColor(31,41,55),f.setFont("helvetica","bold"),f.setFontSize(14),f.text(`Ticket ${j+1}`,k+16,ne),ne+=18,f.setFont("helvetica","normal"),f.setFontSize(12),f.text(`Tier: ${_}`,k+16,ne),ne+=14,f.text(`Quantity: ${C.quantity}`,k+16,ne),ne+=14,f.text(`Unit: ${(C.unitPrice/100).toFixed(2)}   Total: ${(C.totalPrice/100).toFixed(2)}`,k+16,ne),ne+=18,f.setTextColor(75,85,99),f.text(`Order Ref: ${(d=e.id)==null?void 0:d.slice(0,8)}...`,k+16,ne);const U=JSON.stringify({orderId:e.id,ticketTierId:C.ticketTierId,quantity:C.quantity,customer:e.customerEmail}),K=await Vh.toDataURL(U,{width:120,margin:1,color:{dark:"#111827",light:"#FFFFFFFF"}});f.addImage(K,"PNG",x-A-136,b+15,120,120),b+=M+14}f.save(`tickets_${e.id}.pdf`)}catch(f){console.error("Failed to generate PDF:",f)}};return m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:m.jsxs(lt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6 text-center",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:m.jsx(bo,{className:"h-8 w-8 text-green-600"})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Payment Successful!"}),m.jsx("p",{className:"text-gray-600",children:"Your tickets have been purchased successfully! Check your email for the confirmation and attached PDF tickets."})]}),m.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",children:[m.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Order Summary"}),m.jsxs("div",{className:"space-y-2 text-sm",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Order ID:"}),m.jsxs("span",{className:"font-mono text-gray-600",children:[((o=e.id)==null?void 0:o.slice(0,8))||"N/A","..."]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Total Tickets:"}),m.jsx("span",{className:"font-semibold",children:n})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Total Amount:"}),m.jsxs("span",{className:"font-semibold",children:["",((e.totalAmount||0)/100).toFixed(2)]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Status:"}),m.jsx("span",{className:"text-green-600 font-semibold capitalize",children:e.status||"completed"})]})]})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[m.jsx(P1,{className:"h-4 w-4"}),m.jsxs("span",{children:["Confirmation & tickets sent to ",e.customerEmail||"your email"]})]}),m.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[m.jsx(j1,{className:"h-4 w-4"}),m.jsx("span",{children:"PDF tickets attached to your email"})]})]}),m.jsxs("div",{className:"flex gap-3 mt-6",children:[m.jsx("button",{onClick:t,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Close"}),m.jsxs("button",{onClick:i,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[m.jsx(Dx,{className:"h-4 w-4"}),"Download"]})]})]})})},eB=()=>{var k,R;const{events:e,getEvents:t,isLoading:n}=So(),[r,i]=me.useState(null),[s,o]=me.useState(!1),[u,d]=me.useState(null),[f]=E_(),[x,y]=me.useState(!1),[A,b]=me.useState(null),[P,I]=me.useState(!0),{glitchRef:j,isGlitching:C,glitchType:_}=Mh();return me.useEffect(()=>{(async()=>{try{await t(),console.log("Events loaded in EventsPage:",e)}catch(ne){console.error("Failed to load events:",ne)}})()},[t]),me.useEffect(()=>{if(e.length>0){const M=f.get("event");M&&e.find(U=>U.id===M)&&(d(M),setTimeout(()=>{var U;(U=document.getElementById("events-grid"))==null||U.scrollIntoView({behavior:"smooth",block:"start"})},500))}},[e,f]),me.useEffect(()=>{const M=()=>{window.scrollY>100&&I(!1)};return window.addEventListener("scroll",M),()=>window.removeEventListener("scroll",M)},[]),m.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[m.jsx(PS,{}),m.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden pt-16 sm:pt-20 md:pt-32 pb-12 sm:pb-16 md:pb-24 px-2 sm:px-4",children:[m.jsxs("div",{className:"absolute inset-0 w-full h-full",children:[m.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover scale-150",children:m.jsx("source",{src:"/vid.mp4",type:"video/mp4"})}),m.jsx("div",{className:"absolute inset-0 bg-black/60"})]}),m.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-4 md:px-6 lg:px-8 text-center",children:m.jsxs(lt.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:"space-y-4 md:space-y-6 lg:space-y-8",children:[m.jsx(lt.h1,{ref:j,animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:8,repeat:1/0,ease:"linear"},className:`text-6xl sm:text-4xl md:text-5xl lg:text-6xl xl:text-8xl 2xl:text-8xl glitch-text ${C?`glitch-active glitch-${_}`:""}`,"data-text":"EVENTS",style:{textTransform:"uppercase",letterSpacing:"0.1em"},children:"EVENTS"}),m.jsx(lt.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.2},className:"text-base sm:text-lg md:text-xl lg:text-xl font-light max-w-4xl mx-auto leading-relaxed px-2 text-white drop-shadow-lg",children:m.jsxs(lt.span,{className:"inline-block px-3 sm:px-4 md:px-6 py-2 sm:py-2.5 md:py-3 bg-black/20 backdrop-blur-sm rounded-full border border-white/20 text-sm sm:text-base md:text-lg",whileHover:{scale:1.05,boxShadow:"0 0 20px rgba(255, 255, 255, 0.3)",borderColor:"rgba(255, 255, 255, 0.5)"},animate:{boxShadow:["0 0 10px rgba(255, 255, 255, 0.1)","0 0 20px rgba(255, 255, 255, 0.2)","0 0 10px rgba(255, 255, 255, 0.1)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:[m.jsx("span",{className:"block sm:hidden",children:" Events that hit different "}),m.jsx("span",{className:"hidden sm:block",children:" From rooftop raves to underground vibes - events that hit different "})]})}),m.jsx(lt.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.4},className:"text-white/80 text-base sm:text-lg md:text-xl",children:n?m.jsx("span",{children:"Loading events..."}):m.jsxs("span",{children:[((k=e==null?void 0:e.filter(M=>!M.isArchived))==null?void 0:k.length)||0," upcoming events"]})}),m.jsx(lt.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.6},className:"flex flex-col sm:flex-row gap-3 sm:gap-4 md:gap-6 justify-center items-center pt-4 sm:pt-6 md:pt-8 px-2 sm:px-4",children:m.jsxs(lt.button,{onClick:()=>{var M;(M=document.getElementById("events-grid"))==null||M.scrollIntoView({behavior:"smooth",block:"start"})},whileHover:{scale:1.05,boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},whileTap:{scale:.95},className:"bg-transparent hover:bg-white/90 text-white hover:text-gray-900 px-4 sm:px-6 md:px-8 py-2.5 sm:py-3 md:py-4 text-base sm:text-base md:text-lg font-semibold rounded-lg border-2 border-white/70 w-3/4 sm:w-auto transition-all backdrop-blur-sm group flex items-center justify-center gap-3",children:[m.jsx("span",{children:"Get Tickets"}),m.jsx(q0,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5 group-hover:translate-x-1 transition-transform"})]})})]})}),P&&m.jsx(lt.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.8},className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 z-20 w-full flex justify-center",children:m.jsxs(lt.div,{animate:{y:[0,10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"flex flex-col items-center space-y-2 cursor-pointer",onClick:()=>{var M;(M=document.getElementById("events-grid"))==null||M.scrollIntoView({behavior:"smooth",block:"start"})},children:[m.jsx(lt.div,{animate:{y:[0,8,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"w-6 h-10 border-2 border-white/50 rounded-full flex justify-center",children:m.jsx(lt.div,{animate:{y:[0,12,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"w-1 h-3 bg-white/70 rounded-full mt-2"})}),m.jsx(lt.p,{animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"text-white/70 text-xs font-medium",children:"Scroll to explore"})]})})]}),m.jsxs("section",{id:"events-grid",className:"py-16 md:py-20 relative px-4 overflow-hidden",children:[m.jsxs("div",{className:"absolute inset-0 w-full h-full",children:[m.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover scale-150",children:m.jsx("source",{src:"/vid-ev.mp4",type:"video/mp4"})}),m.jsx("div",{className:"absolute inset-0 bg-gray-900/70"})]}),m.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 md:px-6 lg:px-8",children:[m.jsxs(lt.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:"text-center mb-12 md:mb-16",children:[m.jsx(lt.h2,{className:`text-5xl sm:text-4xl md:text-5xl lg:text-6xl font-bold mb-4 md:mb-6 text-white glitch-text ${C?`glitch-active glitch-${_}`:""}`,"data-text":"WHAT'S ON",style:{textTransform:"uppercase",letterSpacing:"0.1em"},children:"WHAT'S ON"}),m.jsx("div",{className:"flex justify-center",children:m.jsx(lt.span,{className:"inline-block px-3 sm:px-4 md:px-6 py-2 sm:py-2.5 md:py-3 bg-black/20 backdrop-blur-sm rounded-full border border-white/20 text-sm sm:text-base md:text-lg text-white/80",whileHover:{scale:1.05,boxShadow:"0 0 20px rgba(255, 255, 255, 0.3)",borderColor:"rgba(255, 255, 255, 0.5)"},animate:{boxShadow:["0 0 10px rgba(255, 255, 255, 0.1)","0 0 20px rgba(255, 255, 255, 0.2)","0 0 10px rgba(255, 255, 255, 0.1)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:"  Check out our upcoming events  "})})]}),n?m.jsxs("div",{className:"text-center py-12",children:[m.jsx("div",{className:"text-white text-lg mb-4",children:"Loading events..."}),m.jsx("div",{className:"text-white/70 text-sm",children:"Please wait while we fetch the latest events"})]}):!e||e.length===0?m.jsxs("div",{className:"text-center py-12",children:[m.jsx("div",{className:"text-white text-lg mb-4",children:"No events available"}),m.jsx("div",{className:"text-white/70 text-sm",children:"Check back later for upcoming events"})]}):e.filter(M=>!M.isArchived).length===0?m.jsxs("div",{className:"text-center py-12",children:[m.jsx("div",{className:"text-white text-lg mb-4",children:"No upcoming events"}),m.jsx("div",{className:"text-white/70 text-sm",children:"All events are currently archived"})]}):m.jsx("div",{className:`grid gap-6 md:gap-8 ${e.filter(M=>!M.isArchived).length===1?"grid-cols-1 max-w-md mx-auto":e.filter(M=>!M.isArchived).length===2?"grid-cols-1 md:grid-cols-2 max-w-4xl mx-auto":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3"}`,children:e.filter(M=>!M.isArchived).map((M,ne)=>m.jsxs(lt.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.6,delay:u===M.id?.2:ne*.1},whileHover:{y:-4},className:`group relative bg-gradient-to-br from-white via-gray-50 to-white border rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden cursor-pointer backdrop-blur-sm ${u===M.id?"border-blue-500 shadow-blue-500/25 scale-105 ring-2 ring-blue-500/20":"border-gray-100"}`,children:[m.jsxs("div",{className:"relative h-48 md:h-56 overflow-hidden",onClick:()=>{i(M),o(!0)},children:[u===M.id&&m.jsx("div",{className:"absolute top-4 right-4 z-10 bg-gradient-to-r from-blue-500 to-purple-600 text-white text-xs font-bold px-3 py-1.5 rounded-full shadow-lg animate-pulse",children:" Featured Event"}),m.jsx("img",{src:M.image,alt:M.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",onError:U=>{const K=U.target;K.src=`https://via.placeholder.com/400x300/6B7280/FFFFFF?text=${encodeURIComponent(M.title)}`}}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"}),m.jsx("div",{className:"absolute top-4 left-4 flex flex-wrap gap-2",children:M.tags.slice(0,2).map(U=>m.jsx("span",{className:"bg-white/95 backdrop-blur-sm px-3 py-1.5 rounded-full text-xs font-semibold text-gray-800 shadow-sm border border-white/20",children:U},U))}),M.ticketTiers&&M.ticketTiers.length>0&&M.ticketTiers.every(U=>U.capacity-U.soldCount<=0||U.isActive===!1)&&m.jsx("div",{className:"absolute top-4 right-4 bg-red-500 text-white text-xs font-bold px-3 py-1.5 rounded-full shadow-lg",children:"Sold Out"}),m.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:m.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white mb-2 leading-tight drop-shadow-lg",children:M.title})})]}),m.jsxs("div",{className:"p-5 md:p-6 space-y-4",onClick:()=>{i(M),o(!0)},children:[m.jsx("p",{className:"text-gray-600 text-sm leading-relaxed line-clamp-2",children:M.description}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center justify-center gap-3 p-2.5 bg-gray-50 rounded-xl",children:[m.jsx(is,{className:"w-4 h-4 text-gray-600 flex-shrink-0"}),m.jsx("span",{className:"text-sm font-semibold text-gray-900",children:M.date})]}),m.jsxs("div",{className:"flex items-center justify-center gap-3 p-2.5 bg-gray-50 rounded-xl",children:[m.jsx(Va,{className:"w-4 h-4 text-gray-600 flex-shrink-0"}),m.jsx("span",{className:"text-sm font-semibold text-gray-900",children:M.time})]}),m.jsxs("div",{className:"flex items-center justify-center gap-3 p-2.5 bg-gray-50 rounded-xl",children:[m.jsx(Sc,{className:"w-4 h-4 text-gray-600 flex-shrink-0"}),m.jsx("span",{className:"text-sm font-semibold text-gray-900",children:M.venue})]})]}),M.ticketTiers&&M.ticketTiers.length>0&&m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"Ticket Options"}),m.jsxs("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:["From ",(Math.min(...M.ticketTiers.map(U=>U.price))/100).toFixed(2)]})]}),m.jsxs("div",{className:"space-y-1.5",children:[M.ticketTiers.sort((U,K)=>U.price-K.price).slice(0,2).map(U=>m.jsxs("div",{className:"flex items-center justify-between p-2.5 bg-gradient-to-r from-gray-50 to-white rounded-lg border border-gray-100",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),m.jsx("span",{className:"text-sm font-medium text-gray-800",children:U.name})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[U.originalPrice&&U.originalPrice>U.price&&m.jsxs("span",{className:"text-xs text-gray-400 line-through",children:["",(U.originalPrice/100).toFixed(2)]}),m.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["",(U.price/100).toFixed(2)]})]})]},U.id)),M.ticketTiers.length>2&&m.jsx("div",{className:"text-center",children:m.jsxs("span",{className:"text-xs text-gray-500 bg-gray-100 px-3 py-1.5 rounded-full",children:["+",M.ticketTiers.length-2," more options"]})})]})]}),m.jsxs(lt.button,{onClick:U=>{U.stopPropagation(),i(M),y(!0)},whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-gradient-to-r from-gray-900 via-gray-800 to-gray-800 hover:from-gray-800 hover:via-gray-700 hover:to-gray-800 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 text-sm md:text-base flex items-center justify-center gap-3 shadow-lg hover:shadow-xl group-hover:shadow-2xl",children:[M.ticketTiers&&M.ticketTiers.length>0?"Get Tickets":"Book Now",m.jsx(q0,{className:"w-4 h-4 transition-transform group-hover:translate-x-1"})]})]})]},M.id))})]})]}),s&&r&&m.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>o(!1),children:m.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full overflow-hidden",onClick:M=>M.stopPropagation(),children:[m.jsxs("div",{className:"relative h-48 overflow-hidden",children:[m.jsx("img",{src:r.image,alt:r.title,className:"w-full h-full object-cover"}),m.jsx("button",{className:"absolute top-3 right-3 bg-white/90 rounded-full p-1",onClick:()=>o(!1),children:m.jsx(Ic,{className:"w-5 h-5 text-gray-700"})})]}),m.jsxs("div",{className:"p-6 space-y-4",children:[m.jsx("h3",{className:"text-xl font-bold text-gray-900",children:r.title}),m.jsx("p",{className:"text-gray-600 text-sm",children:r.description}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm text-gray-600",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(is,{className:"w-4 h-4"}),m.jsx("span",{children:r.date})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Va,{className:"w-4 h-4"}),m.jsx("span",{children:r.time})]}),m.jsxs("div",{className:"flex items-center gap-2 sm:col-span-2",children:[m.jsx(Sc,{className:"w-4 h-4"}),m.jsx("span",{children:r.venue})]})]}),r.ticketTiers&&r.ticketTiers.length>0&&m.jsxs("div",{children:[m.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Ticket Tiers"}),m.jsx("div",{className:"space-y-2",children:r.ticketTiers.sort((M,ne)=>M.price-ne.price).map(M=>{const ne=M.capacity-M.soldCount,U=ne<=0||M.isActive===!1;return m.jsxs("div",{className:"flex items-center justify-between text-sm",children:[m.jsx("span",{className:"text-gray-700",children:M.name}),U?m.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-red-100 text-red-700",children:"Sold out"}):m.jsxs("div",{className:"flex items-center gap-2",children:[M.originalPrice&&M.originalPrice>M.price&&m.jsxs("span",{className:"text-gray-400 line-through",children:["",(M.originalPrice/100).toFixed(2)]}),m.jsxs("span",{className:"font-semibold text-gray-900",children:["",(M.price/100).toFixed(2)]}),m.jsxs("span",{className:"text-xs text-gray-500",children:["(",ne," left)"]})]})]},M.id)})})]}),m.jsx("button",{onClick:()=>{o(!1),i(r),y(!0)},disabled:(R=r.ticketTiers)==null?void 0:R.every(M=>M.capacity-M.soldCount<=0||M.isActive===!1),className:"w-full bg-gray-900 hover:bg-gray-800 disabled:bg-gray-300 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg text-sm",children:"Buy Tickets"})]})]})}),x&&r&&m.jsx(pR,{event:r,onClose:()=>y(!1),onSuccess:M=>{b(M),y(!1)}}),A&&m.jsx(JM,{order:A,onClose:()=>b(null)}),m.jsx(o6,{})]})},tB=()=>m.jsx("div",{className:"min-h-screen bg-gray-50",children:m.jsx(N9,{})});function nB(){const{getEvents:e,subscribeToEvents:t}=So();return me.useEffect(()=>{e();const n=t();return()=>{n==null||n.unsubscribe()}},[e,t]),m.jsxs("div",{className:"relative min-h-screen overflow-hidden",children:[m.jsx(sD,{}),m.jsx(PS,{}),m.jsx(rP,{}),m.jsx(nD,{}),m.jsx(rD,{}),m.jsx(iD,{}),m.jsx(o6,{})]})}function rB({children:e}){const{isAuthenticated:t}=So();return t?m.jsx(m.Fragment,{children:e}):m.jsx(v_,{to:"/admin",replace:!0})}function iB(){return m.jsxs(C_,{children:[m.jsxs(b_,{children:[m.jsx(Kc,{path:"/",element:m.jsx(nB,{})}),m.jsx(Kc,{path:"/events",element:m.jsx(eB,{})}),m.jsx(Kc,{path:"/admin",element:m.jsx(TD,{})}),m.jsx(Kc,{path:"/admin/dashboard",element:m.jsx(rB,{children:m.jsx(I9,{})})}),m.jsx(Kc,{path:"/scanner",element:m.jsx(tB,{})})]}),m.jsx(R_,{}),m.jsx(NT,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#1f2937",color:"#fff",borderRadius:"8px",padding:"12px 16px",fontSize:"14px",fontWeight:"500"},success:{iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})}Sg.createRoot(document.getElementById("root")).render(m.jsx(Wt.StrictMode,{children:m.jsx(iB,{})}));export{Tn as _,mi as c,i1 as g};
